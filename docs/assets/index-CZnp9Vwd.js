function DO(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function tE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function x0(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var Sp={exports:{}},ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x;function NO(){if($x)return ol;$x=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:c,ref:r!==void 0?r:null,props:a}}return ol.Fragment=e,ol.jsx=n,ol.jsxs=n,ol}var Xx;function MO(){return Xx||(Xx=1,Sp.exports=NO()),Sp.exports}var x=MO(),Tp={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx;function OO(){if(Zx)return Ze;Zx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function v(V){return V===null||typeof V!="object"?null:(V=p&&V[p]||V["@@iterator"],typeof V=="function"?V:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function R(V,Q,me){this.props=V,this.context=Q,this.refs=S,this.updater=me||b}R.prototype.isReactComponent={},R.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},R.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function k(){}k.prototype=R.prototype;function N(V,Q,me){this.props=V,this.context=Q,this.refs=S,this.updater=me||b}var O=N.prototype=new k;O.constructor=N,w(O,R.prototype),O.isPureReactComponent=!0;var I=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},j=Object.prototype.hasOwnProperty;function H(V,Q,me,le,Te,Ne){return me=Ne.ref,{$$typeof:t,type:V,key:Q,ref:me!==void 0?me:null,props:Ne}}function z(V,Q){return H(V.type,Q,void 0,void 0,void 0,V.props)}function G(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function ie(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(me){return Q[me]})}var re=/\/+/g;function de(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?ie(""+V.key):Q.toString(36)}function Ee(){}function Ae(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(Ee,Ee):(V.status="pending",V.then(function(Q){V.status==="pending"&&(V.status="fulfilled",V.value=Q)},function(Q){V.status==="pending"&&(V.status="rejected",V.reason=Q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Me(V,Q,me,le,Te){var Ne=typeof V;(Ne==="undefined"||Ne==="boolean")&&(V=null);var Pe=!1;if(V===null)Pe=!0;else switch(Ne){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(V.$$typeof){case t:case e:Pe=!0;break;case m:return Pe=V._init,Me(Pe(V._payload),Q,me,le,Te)}}if(Pe)return Te=Te(V),Pe=le===""?"."+de(V,0):le,I(Te)?(me="",Pe!=null&&(me=Pe.replace(re,"$&/")+"/"),Me(Te,Q,me,"",function(Ve){return Ve})):Te!=null&&(G(Te)&&(Te=z(Te,me+(Te.key==null||V&&V.key===Te.key?"":(""+Te.key).replace(re,"$&/")+"/")+Pe)),Q.push(Te)),1;Pe=0;var be=le===""?".":le+":";if(I(V))for(var Ce=0;Ce<V.length;Ce++)le=V[Ce],Ne=be+de(le,Ce),Pe+=Me(le,Q,me,Ne,Te);else if(Ce=v(V),typeof Ce=="function")for(V=Ce.call(V),Ce=0;!(le=V.next()).done;)le=le.value,Ne=be+de(le,Ce++),Pe+=Me(le,Q,me,Ne,Te);else if(Ne==="object"){if(typeof V.then=="function")return Me(Ae(V),Q,me,le,Te);throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function Y(V,Q,me){if(V==null)return V;var le=[],Te=0;return Me(V,le,"","",function(Ne){return Q.call(me,Ne,Te++)}),le}function se(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(me){(V._status===0||V._status===-1)&&(V._status=1,V._result=me)},function(me){(V._status===0||V._status===-1)&&(V._status=2,V._result=me)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var J=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function _e(){}return Ze.Children={map:Y,forEach:function(V,Q,me){Y(V,function(){Q.apply(this,arguments)},me)},count:function(V){var Q=0;return Y(V,function(){Q++}),Q},toArray:function(V){return Y(V,function(Q){return Q})||[]},only:function(V){if(!G(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ze.Component=R,Ze.Fragment=n,Ze.Profiler=r,Ze.PureComponent=N,Ze.StrictMode=i,Ze.Suspense=d,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(V){return D.H.useMemoCache(V)}},Ze.cache=function(V){return function(){return V.apply(null,arguments)}},Ze.cloneElement=function(V,Q,me){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var le=w({},V.props),Te=V.key,Ne=void 0;if(Q!=null)for(Pe in Q.ref!==void 0&&(Ne=void 0),Q.key!==void 0&&(Te=""+Q.key),Q)!j.call(Q,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&Q.ref===void 0||(le[Pe]=Q[Pe]);var Pe=arguments.length-2;if(Pe===1)le.children=me;else if(1<Pe){for(var be=Array(Pe),Ce=0;Ce<Pe;Ce++)be[Ce]=arguments[Ce+2];le.children=be}return H(V.type,Te,void 0,void 0,Ne,le)},Ze.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:a,_context:V},V},Ze.createElement=function(V,Q,me){var le,Te={},Ne=null;if(Q!=null)for(le in Q.key!==void 0&&(Ne=""+Q.key),Q)j.call(Q,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Te[le]=Q[le]);var Pe=arguments.length-2;if(Pe===1)Te.children=me;else if(1<Pe){for(var be=Array(Pe),Ce=0;Ce<Pe;Ce++)be[Ce]=arguments[Ce+2];Te.children=be}if(V&&V.defaultProps)for(le in Pe=V.defaultProps,Pe)Te[le]===void 0&&(Te[le]=Pe[le]);return H(V,Ne,void 0,void 0,null,Te)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(V){return{$$typeof:l,render:V}},Ze.isValidElement=G,Ze.lazy=function(V){return{$$typeof:m,_payload:{_status:-1,_result:V},_init:se}},Ze.memo=function(V,Q){return{$$typeof:f,type:V,compare:Q===void 0?null:Q}},Ze.startTransition=function(V){var Q=D.T,me={};D.T=me;try{var le=V(),Te=D.S;Te!==null&&Te(me,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(_e,J)}catch(Ne){J(Ne)}finally{D.T=Q}},Ze.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ze.use=function(V){return D.H.use(V)},Ze.useActionState=function(V,Q,me){return D.H.useActionState(V,Q,me)},Ze.useCallback=function(V,Q){return D.H.useCallback(V,Q)},Ze.useContext=function(V){return D.H.useContext(V)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(V,Q){return D.H.useDeferredValue(V,Q)},Ze.useEffect=function(V,Q,me){var le=D.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(V,Q)},Ze.useId=function(){return D.H.useId()},Ze.useImperativeHandle=function(V,Q,me){return D.H.useImperativeHandle(V,Q,me)},Ze.useInsertionEffect=function(V,Q){return D.H.useInsertionEffect(V,Q)},Ze.useLayoutEffect=function(V,Q){return D.H.useLayoutEffect(V,Q)},Ze.useMemo=function(V,Q){return D.H.useMemo(V,Q)},Ze.useOptimistic=function(V,Q){return D.H.useOptimistic(V,Q)},Ze.useReducer=function(V,Q,me){return D.H.useReducer(V,Q,me)},Ze.useRef=function(V){return D.H.useRef(V)},Ze.useState=function(V){return D.H.useState(V)},Ze.useSyncExternalStore=function(V,Q,me){return D.H.useSyncExternalStore(V,Q,me)},Ze.useTransition=function(){return D.H.useTransition()},Ze.version="19.1.1",Ze}var Jx;function w0(){return Jx||(Jx=1,Tp.exports=OO()),Tp.exports}var T=w0();const Re=tE(T),nE=DO({__proto__:null,default:Re},[T]);var xp={exports:{}},cl={},wp={exports:{}},Cp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx;function IO(){return Qx||(Qx=1,function(t){function e(Y,se){var J=Y.length;Y.push(se);e:for(;0<J;){var _e=J-1>>>1,V=Y[_e];if(0<r(V,se))Y[_e]=se,Y[J]=V,J=_e;else break e}}function n(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var se=Y[0],J=Y.pop();if(J!==se){Y[0]=J;e:for(var _e=0,V=Y.length,Q=V>>>1;_e<Q;){var me=2*(_e+1)-1,le=Y[me],Te=me+1,Ne=Y[Te];if(0>r(le,J))Te<V&&0>r(Ne,le)?(Y[_e]=Ne,Y[Te]=J,_e=Te):(Y[_e]=le,Y[me]=J,_e=me);else if(Te<V&&0>r(Ne,J))Y[_e]=Ne,Y[Te]=J,_e=Te;else break e}}return se}function r(Y,se){var J=Y.sortIndex-se.sortIndex;return J!==0?J:Y.id-se.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var d=[],f=[],m=1,p=null,v=3,b=!1,w=!1,S=!1,R=!1,k=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function I(Y){for(var se=n(f);se!==null;){if(se.callback===null)i(f);else if(se.startTime<=Y)i(f),se.sortIndex=se.expirationTime,e(d,se);else break;se=n(f)}}function D(Y){if(S=!1,I(Y),!w)if(n(d)!==null)w=!0,j||(j=!0,de());else{var se=n(f);se!==null&&Me(D,se.startTime-Y)}}var j=!1,H=-1,z=5,G=-1;function ie(){return R?!0:!(t.unstable_now()-G<z)}function re(){if(R=!1,j){var Y=t.unstable_now();G=Y;var se=!0;try{e:{w=!1,S&&(S=!1,N(H),H=-1),b=!0;var J=v;try{t:{for(I(Y),p=n(d);p!==null&&!(p.expirationTime>Y&&ie());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,v=p.priorityLevel;var V=_e(p.expirationTime<=Y);if(Y=t.unstable_now(),typeof V=="function"){p.callback=V,I(Y),se=!0;break t}p===n(d)&&i(d),I(Y)}else i(d);p=n(d)}if(p!==null)se=!0;else{var Q=n(f);Q!==null&&Me(D,Q.startTime-Y),se=!1}}break e}finally{p=null,v=J,b=!1}se=void 0}}finally{se?de():j=!1}}}var de;if(typeof O=="function")de=function(){O(re)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Ae=Ee.port2;Ee.port1.onmessage=re,de=function(){Ae.postMessage(null)}}else de=function(){k(re,0)};function Me(Y,se){H=k(function(){Y(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(Y){switch(v){case 1:case 2:case 3:var se=3;break;default:se=v}var J=v;v=se;try{return Y()}finally{v=J}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var J=v;v=Y;try{return se()}finally{v=J}},t.unstable_scheduleCallback=function(Y,se,J){var _e=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?_e+J:_e):J=_e,Y){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=J+V,Y={id:m++,callback:se,priorityLevel:Y,startTime:J,expirationTime:V,sortIndex:-1},J>_e?(Y.sortIndex=J,e(f,Y),n(d)===null&&Y===n(f)&&(S?(N(H),H=-1):S=!0,Me(D,J-_e))):(Y.sortIndex=V,e(d,Y),w||b||(w=!0,j||(j=!0,de()))),Y},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(Y){var se=v;return function(){var J=v;v=se;try{return Y.apply(this,arguments)}finally{v=J}}}}(Cp)),Cp}var e1;function UO(){return e1||(e1=1,wp.exports=IO()),wp.exports}var kp={exports:{}},Dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1;function LO(){if(t1)return Dn;t1=1;var t=w0();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(d,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:d,containerInfo:f,implementation:m}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Dn.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},Dn.flushSync=function(d){var f=c.T,m=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=m,i.d.f()}},Dn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Dn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Dn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,p=l(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:b}):m==="script"&&i.d.X(d,{crossOrigin:p,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Dn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Dn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=l(m,f.crossOrigin);i.d.L(d,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Dn.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=l(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Dn.requestFormReset=function(d){i.d.r(d)},Dn.unstable_batchedUpdates=function(d,f){return d(f)},Dn.useFormState=function(d,f,m){return c.H.useFormState(d,f,m)},Dn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Dn.version="19.1.1",Dn}var n1;function iE(){if(n1)return kp.exports;n1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),kp.exports=LO(),kp.exports}var i1;function jO(){if(i1)return cl;i1=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=UO(),e=w0(),n=iE();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function l(s){if(a(s)!==s)throw Error(i(188))}function d(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var u=s,h=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){u=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return l(g),s;if(y===h)return l(g),o;y=y.sibling}throw Error(i(188))}if(u.return!==h.return)u=g,h=y;else{for(var P=!1,U=g.child;U;){if(U===u){P=!0,u=g,h=y;break}if(U===h){P=!0,h=g,u=y;break}U=U.sibling}if(!P){for(U=y.child;U;){if(U===u){P=!0,u=y,h=g;break}if(U===h){P=!0,h=y,u=g;break}U=U.sibling}if(!P)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:o}function f(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=f(s),o!==null)return o;s=s.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),O=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function de(s){return s===null||typeof s!="object"?null:(s=re&&s[re]||s["@@iterator"],typeof s=="function"?s:null)}var Ee=Symbol.for("react.client.reference");function Ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case R:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case j:return"SuspenseList";case G:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case O:return(s.displayName||"Context")+".Provider";case N:return(s._context.displayName||"Context")+".Consumer";case I:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case H:return o=s.displayName||null,o!==null?o:Ae(s.type)||"Memo";case z:o=s._payload,s=s._init;try{return Ae(s(o))}catch{}}return null}var Me=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},_e=[],V=-1;function Q(s){return{current:s}}function me(s){0>V||(s.current=_e[V],_e[V]=null,V--)}function le(s,o){V++,_e[V]=s.current,s.current=o}var Te=Q(null),Ne=Q(null),Pe=Q(null),be=Q(null);function Ce(s,o){switch(le(Pe,o),le(Ne,s),le(Te,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?wx(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=wx(o),s=Cx(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}me(Te),le(Te,s)}function Ve(){me(Te),me(Ne),me(Pe)}function qe(s){s.memoizedState!==null&&le(be,s);var o=Te.current,u=Cx(o,s.type);o!==u&&(le(Ne,s),le(Te,u))}function Xe(s){Ne.current===s&&(me(Te),me(Ne)),be.current===s&&(me(be),nl._currentValue=J)}var Ye=Object.prototype.hasOwnProperty,kt=t.unstable_scheduleCallback,Lt=t.unstable_cancelCallback,ui=t.unstable_shouldYield,On=t.unstable_requestPaint,At=t.unstable_now,B=t.unstable_getCurrentPriorityLevel,A=t.unstable_ImmediatePriority,_=t.unstable_UserBlockingPriority,F=t.unstable_NormalPriority,X=t.unstable_LowPriority,pe=t.unstable_IdlePriority,we=t.log,Ke=t.unstable_setDisableYieldValue,Je=null,M=null;function C(s){if(typeof we=="function"&&Ke(s),M&&typeof M.setStrictMode=="function")try{M.setStrictMode(Je,s)}catch{}}var E=Math.clz32?Math.clz32:ae,L=Math.log,$=Math.LN2;function ae(s){return s>>>=0,s===0?32:31-(L(s)/$|0)|0}var ge=256,We=4194304;function ut(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ht(s,o,u){var h=s.pendingLanes;if(h===0)return 0;var g=0,y=s.suspendedLanes,P=s.pingedLanes;s=s.warmLanes;var U=h&134217727;return U!==0?(h=U&~y,h!==0?g=ut(h):(P&=U,P!==0?g=ut(P):u||(u=U&~s,u!==0&&(g=ut(u))))):(U=h&~y,U!==0?g=ut(U):P!==0?g=ut(P):u||(u=h&~s,u!==0&&(g=ut(u)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,u=o&-o,y>=u||y===32&&(u&4194048)!==0)?o:g}function vt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function dt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ei(){var s=ge;return ge<<=1,(ge&4194048)===0&&(ge=256),s}function mu(){var s=We;return We<<=1,(We&62914560)===0&&(We=4194304),s}function fc(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function $r(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function pu(s,o,u,h,g,y){var P=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var U=s.entanglements,q=s.expirationTimes,ne=s.hiddenUpdates;for(u=P&~u;0<u;){var he=31-E(u),Se=1<<he;U[he]=0,q[he]=-1;var oe=ne[he];if(oe!==null)for(ne[he]=null,he=0;he<oe.length;he++){var ce=oe[he];ce!==null&&(ce.lane&=-536870913)}u&=~Se}h!==0&&$e(s,h,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(P&~o))}function $e(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-E(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|u&4194090}function Yt(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var h=31-E(u),g=1<<h;g&o|s[h]&o&&(s[h]|=o),u&=~g}}function nn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function wn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function qs(){var s=se.p;return s!==0?s:(s=window.event,s===void 0?32:Hx(s.type))}function dn(s,o){var u=se.p;try{return se.p=s,o()}finally{se.p=u}}var Wt=Math.random().toString(36).slice(2),$t="__reactFiber$"+Wt,_t="__reactProps$"+Wt,gn="__reactContainer$"+Wt,Da="__reactEvents$"+Wt,mr="__reactListeners$"+Wt,ub="__reactHandles$"+Wt,db="__reactResources$"+Wt,hc="__reactMarker$"+Wt;function hh(s){delete s[$t],delete s[_t],delete s[Da],delete s[mr],delete s[ub]}function Na(s){var o=s[$t];if(o)return o;for(var u=s.parentNode;u;){if(o=u[gn]||u[$t]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Ax(s);s!==null;){if(u=s[$t])return u;s=Ax(s)}return o}s=u,u=s.parentNode}return null}function Ma(s){if(s=s[$t]||s[gn]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function mc(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Oa(s){var o=s[db];return o||(o=s[db]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function vn(s){s[hc]=!0}var fb=new Set,hb={};function Ks(s,o){Ia(s,o),Ia(s+"Capture",o)}function Ia(s,o){for(hb[s]=o,s=0;s<o.length;s++)fb.add(o[s])}var wN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mb={},pb={};function CN(s){return Ye.call(pb,s)?!0:Ye.call(mb,s)?!1:wN.test(s)?pb[s]=!0:(mb[s]=!0,!1)}function gu(s,o,u){if(CN(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function vu(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function pr(s,o,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+h)}}var mh,gb;function Ua(s){if(mh===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);mh=o&&o[1]||"",gb=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mh+s+gb}var ph=!1;function gh(s,o){if(!s||ph)return"";ph=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ce){var oe=ce}Reflect.construct(s,[],Se)}else{try{Se.call()}catch(ce){oe=ce}s.call(Se.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(Se=s())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),P=y[0],U=y[1];if(P&&U){var q=P.split(`
`),ne=U.split(`
`);for(g=h=0;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;for(;g<ne.length&&!ne[g].includes("DetermineComponentFrameRoot");)g++;if(h===q.length||g===ne.length)for(h=q.length-1,g=ne.length-1;1<=h&&0<=g&&q[h]!==ne[g];)g--;for(;1<=h&&0<=g;h--,g--)if(q[h]!==ne[g]){if(h!==1||g!==1)do if(h--,g--,0>g||q[h]!==ne[g]){var he=`
`+q[h].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=h&&0<=g);break}}}finally{ph=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ua(u):""}function kN(s){switch(s.tag){case 26:case 27:case 5:return Ua(s.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 15:return gh(s.type,!1);case 11:return gh(s.type.render,!1);case 1:return gh(s.type,!0);case 31:return Ua("Activity");default:return""}}function vb(s){try{var o="";do o+=kN(s),s=s.return;while(s);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function di(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function yb(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function EN(s){var o=yb(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(P){h=""+P,y.call(this,P)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(P){h=""+P},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function yu(s){s._valueTracker||(s._valueTracker=EN(s))}function bb(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return s&&(h=yb(s)?s.checked?"true":"false":s.value),s=h,s!==u?(o.setValue(s),!0):!1}function bu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var RN=/[\n"\\]/g;function fi(s){return s.replace(RN,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function vh(s,o,u,h,g,y,P,U){s.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.type=P:s.removeAttribute("type"),o!=null?P==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+di(o)):s.value!==""+di(o)&&(s.value=""+di(o)):P!=="submit"&&P!=="reset"||s.removeAttribute("value"),o!=null?yh(s,P,di(o)):u!=null?yh(s,P,di(u)):h!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.name=""+di(U):s.removeAttribute("name")}function Sb(s,o,u,h,g,y,P,U){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),o!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;u=u!=null?""+di(u):"",o=o!=null?""+di(o):u,U||o===s.value||(s.value=o),s.defaultValue=o}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=U?s.checked:!!h,s.defaultChecked=!!h,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(s.name=P)}function yh(s,o,u){o==="number"&&bu(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function La(s,o,u,h){if(s=s.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=o.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&h&&(s[u].defaultSelected=!0)}else{for(u=""+di(u),o=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function Tb(s,o,u){if(o!=null&&(o=""+di(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+di(u):""}function xb(s,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(i(92));if(Me(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=di(o),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h)}function ja(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var AN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wb(s,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,u):typeof u!="number"||u===0||AN.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function Cb(s,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var g in o)h=o[g],o.hasOwnProperty(g)&&u[g]!==h&&wb(s,g,h)}else for(var y in o)o.hasOwnProperty(y)&&wb(s,y,o[y])}function bh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _N=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Su(s){return PN.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Sh=null;function Th(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ba=null,Fa=null;function kb(s){var o=Ma(s);if(o&&(s=o.stateNode)){var u=s[_t]||null;e:switch(s=o.stateNode,o.type){case"input":if(vh(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+fi(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==s&&h.form===s.form){var g=h[_t]||null;if(!g)throw Error(i(90));vh(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===s.form&&bb(h)}break e;case"textarea":Tb(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&La(s,!!u.multiple,o,!1)}}}var xh=!1;function Eb(s,o,u){if(xh)return s(o,u);xh=!0;try{var h=s(o);return h}finally{if(xh=!1,(Ba!==null||Fa!==null)&&(sd(),Ba&&(o=Ba,s=Fa,Fa=Ba=null,kb(o),s)))for(o=0;o<s.length;o++)kb(s[o])}}function pc(s,o){var u=s.stateNode;if(u===null)return null;var h=u[_t]||null;if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=!1;if(gr)try{var gc={};Object.defineProperty(gc,"passive",{get:function(){wh=!0}}),window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch{wh=!1}var Xr=null,Ch=null,Tu=null;function Rb(){if(Tu)return Tu;var s,o=Ch,u=o.length,h,g="value"in Xr?Xr.value:Xr.textContent,y=g.length;for(s=0;s<u&&o[s]===g[s];s++);var P=u-s;for(h=1;h<=P&&o[u-h]===g[y-h];h++);return Tu=g.slice(s,1<h?1-h:void 0)}function xu(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function wu(){return!0}function Ab(){return!1}function Bn(s){function o(u,h,g,y,P){this._reactName=u,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=P,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(u=s[U],this[U]=u?u(y):y[U]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wu:Ab,this.isPropagationStopped=Ab,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=wu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=wu)},persist:function(){},isPersistent:wu}),o}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cu=Bn(Gs),vc=m({},Gs,{view:0,detail:0}),DN=Bn(vc),kh,Eh,yc,ku=m({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ah,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yc&&(yc&&s.type==="mousemove"?(kh=s.screenX-yc.screenX,Eh=s.screenY-yc.screenY):Eh=kh=0,yc=s),kh)},movementY:function(s){return"movementY"in s?s.movementY:Eh}}),_b=Bn(ku),NN=m({},ku,{dataTransfer:0}),MN=Bn(NN),ON=m({},vc,{relatedTarget:0}),Rh=Bn(ON),IN=m({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),UN=Bn(IN),LN=m({},Gs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),jN=Bn(LN),BN=m({},Gs,{data:0}),Pb=Bn(BN),FN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HN(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=zN[s])?!!o[s]:!1}function Ah(){return HN}var qN=m({},vc,{key:function(s){if(s.key){var o=FN[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=xu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?VN[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ah,charCode:function(s){return s.type==="keypress"?xu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?xu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),KN=Bn(qN),GN=m({},ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Db=Bn(GN),YN=m({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ah}),WN=Bn(YN),$N=m({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),XN=Bn($N),ZN=m({},ku,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),JN=Bn(ZN),QN=m({},Gs,{newState:0,oldState:0}),eM=Bn(QN),tM=[9,13,27,32],_h=gr&&"CompositionEvent"in window,bc=null;gr&&"documentMode"in document&&(bc=document.documentMode);var nM=gr&&"TextEvent"in window&&!bc,Nb=gr&&(!_h||bc&&8<bc&&11>=bc),Mb=" ",Ob=!1;function Ib(s,o){switch(s){case"keyup":return tM.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ub(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Va=!1;function iM(s,o){switch(s){case"compositionend":return Ub(o);case"keypress":return o.which!==32?null:(Ob=!0,Mb);case"textInput":return s=o.data,s===Mb&&Ob?null:s;default:return null}}function rM(s,o){if(Va)return s==="compositionend"||!_h&&Ib(s,o)?(s=Rb(),Tu=Ch=Xr=null,Va=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Nb&&o.locale!=="ko"?null:o.data;default:return null}}var sM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lb(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!sM[s.type]:o==="textarea"}function jb(s,o,u,h){Ba?Fa?Fa.push(h):Fa=[h]:Ba=h,o=dd(o,"onChange"),0<o.length&&(u=new Cu("onChange","change",null,u,h),s.push({event:u,listeners:o}))}var Sc=null,Tc=null;function aM(s){yx(s,0)}function Eu(s){var o=mc(s);if(bb(o))return s}function Bb(s,o){if(s==="change")return o}var Fb=!1;if(gr){var Ph;if(gr){var Dh="oninput"in document;if(!Dh){var Vb=document.createElement("div");Vb.setAttribute("oninput","return;"),Dh=typeof Vb.oninput=="function"}Ph=Dh}else Ph=!1;Fb=Ph&&(!document.documentMode||9<document.documentMode)}function zb(){Sc&&(Sc.detachEvent("onpropertychange",Hb),Tc=Sc=null)}function Hb(s){if(s.propertyName==="value"&&Eu(Tc)){var o=[];jb(o,Tc,s,Th(s)),Eb(aM,o)}}function oM(s,o,u){s==="focusin"?(zb(),Sc=o,Tc=u,Sc.attachEvent("onpropertychange",Hb)):s==="focusout"&&zb()}function cM(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Eu(Tc)}function lM(s,o){if(s==="click")return Eu(o)}function uM(s,o){if(s==="input"||s==="change")return Eu(o)}function dM(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Xn=typeof Object.is=="function"?Object.is:dM;function xc(s,o){if(Xn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var g=u[h];if(!Ye.call(o,g)||!Xn(s[g],o[g]))return!1}return!0}function qb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Kb(s,o){var u=qb(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=o&&h>=o)return{node:u,offset:o-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=qb(u)}}function Gb(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Gb(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Yb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=bu(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=bu(s.document)}return o}function Nh(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var fM=gr&&"documentMode"in document&&11>=document.documentMode,za=null,Mh=null,wc=null,Oh=!1;function Wb(s,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Oh||za==null||za!==bu(h)||(h=za,"selectionStart"in h&&Nh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),wc&&xc(wc,h)||(wc=h,h=dd(Mh,"onSelect"),0<h.length&&(o=new Cu("onSelect","select",null,o,u),s.push({event:o,listeners:h}),o.target=za)))}function Ys(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Ha={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionrun:Ys("Transition","TransitionRun"),transitionstart:Ys("Transition","TransitionStart"),transitioncancel:Ys("Transition","TransitionCancel"),transitionend:Ys("Transition","TransitionEnd")},Ih={},$b={};gr&&($b=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function Ws(s){if(Ih[s])return Ih[s];if(!Ha[s])return s;var o=Ha[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in $b)return Ih[s]=o[u];return s}var Xb=Ws("animationend"),Zb=Ws("animationiteration"),Jb=Ws("animationstart"),hM=Ws("transitionrun"),mM=Ws("transitionstart"),pM=Ws("transitioncancel"),Qb=Ws("transitionend"),eS=new Map,Uh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uh.push("scrollEnd");function Ri(s,o){eS.set(s,o),Ks(o,[s])}var tS=new WeakMap;function hi(s,o){if(typeof s=="object"&&s!==null){var u=tS.get(s);return u!==void 0?u:(o={value:s,source:o,stack:vb(o)},tS.set(s,o),o)}return{value:s,source:o,stack:vb(o)}}var mi=[],qa=0,Lh=0;function Ru(){for(var s=qa,o=Lh=qa=0;o<s;){var u=mi[o];mi[o++]=null;var h=mi[o];mi[o++]=null;var g=mi[o];mi[o++]=null;var y=mi[o];if(mi[o++]=null,h!==null&&g!==null){var P=h.pending;P===null?g.next=g:(g.next=P.next,P.next=g),h.pending=g}y!==0&&nS(u,g,y)}}function Au(s,o,u,h){mi[qa++]=s,mi[qa++]=o,mi[qa++]=u,mi[qa++]=h,Lh|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function jh(s,o,u,h){return Au(s,o,u,h),_u(s)}function Ka(s,o){return Au(s,null,null,o),_u(s)}function nS(s,o,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var g=!1,y=s.return;y!==null;)y.childLanes|=u,h=y.alternate,h!==null&&(h.childLanes|=u),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&o!==null&&(g=31-E(u),s=y.hiddenUpdates,h=s[g],h===null?s[g]=[o]:h.push(o),o.lane=u|536870912),y):null}function _u(s){if(50<Wc)throw Wc=0,qm=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ga={};function gM(s,o,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(s,o,u,h){return new gM(s,o,u,h)}function Bh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function vr(s,o){var u=s.alternate;return u===null?(u=Zn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function iS(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Pu(s,o,u,h,g,y){var P=0;if(h=s,typeof s=="function")Bh(s)&&(P=1);else if(typeof s=="string")P=yO(s,u,Te.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case G:return s=Zn(31,u,o,g),s.elementType=G,s.lanes=y,s;case w:return $s(u.children,g,y,o);case S:P=8,g|=24;break;case R:return s=Zn(12,u,o,g|2),s.elementType=R,s.lanes=y,s;case D:return s=Zn(13,u,o,g),s.elementType=D,s.lanes=y,s;case j:return s=Zn(19,u,o,g),s.elementType=j,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:case O:P=10;break e;case N:P=9;break e;case I:P=11;break e;case H:P=14;break e;case z:P=16,h=null;break e}P=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return o=Zn(P,u,o,g),o.elementType=s,o.type=h,o.lanes=y,o}function $s(s,o,u,h){return s=Zn(7,s,h,o),s.lanes=u,s}function Fh(s,o,u){return s=Zn(6,s,null,o),s.lanes=u,s}function Vh(s,o,u){return o=Zn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Ya=[],Wa=0,Du=null,Nu=0,pi=[],gi=0,Xs=null,yr=1,br="";function Zs(s,o){Ya[Wa++]=Nu,Ya[Wa++]=Du,Du=s,Nu=o}function rS(s,o,u){pi[gi++]=yr,pi[gi++]=br,pi[gi++]=Xs,Xs=s;var h=yr;s=br;var g=32-E(h)-1;h&=~(1<<g),u+=1;var y=32-E(o)+g;if(30<y){var P=g-g%5;y=(h&(1<<P)-1).toString(32),h>>=P,g-=P,yr=1<<32-E(o)+g|u<<g|h,br=y+s}else yr=1<<y|u<<g|h,br=s}function zh(s){s.return!==null&&(Zs(s,1),rS(s,1,0))}function Hh(s){for(;s===Du;)Du=Ya[--Wa],Ya[Wa]=null,Nu=Ya[--Wa],Ya[Wa]=null;for(;s===Xs;)Xs=pi[--gi],pi[gi]=null,br=pi[--gi],pi[gi]=null,yr=pi[--gi],pi[gi]=null}var In=null,Ft=null,gt=!1,Js=null,qi=!1,qh=Error(i(519));function Qs(s){var o=Error(i(418,""));throw Ec(hi(o,s)),qh}function sS(s){var o=s.stateNode,u=s.type,h=s.memoizedProps;switch(o[$t]=s,o[_t]=h,u){case"dialog":rt("cancel",o),rt("close",o);break;case"iframe":case"object":case"embed":rt("load",o);break;case"video":case"audio":for(u=0;u<Xc.length;u++)rt(Xc[u],o);break;case"source":rt("error",o);break;case"img":case"image":case"link":rt("error",o),rt("load",o);break;case"details":rt("toggle",o);break;case"input":rt("invalid",o),Sb(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),yu(o);break;case"select":rt("invalid",o);break;case"textarea":rt("invalid",o),xb(o,h.value,h.defaultValue,h.children),yu(o)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||xx(o.textContent,u)?(h.popover!=null&&(rt("beforetoggle",o),rt("toggle",o)),h.onScroll!=null&&rt("scroll",o),h.onScrollEnd!=null&&rt("scrollend",o),h.onClick!=null&&(o.onclick=fd),o=!0):o=!1,o||Qs(s)}function aS(s){for(In=s.return;In;)switch(In.tag){case 5:case 13:qi=!1;return;case 27:case 3:qi=!0;return;default:In=In.return}}function Cc(s){if(s!==In)return!1;if(!gt)return aS(s),gt=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||ap(s.type,s.memoizedProps)),u=!u),u&&Ft&&Qs(s),aS(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(o===0){Ft=_i(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;s=s.nextSibling}Ft=null}}else o===27?(o=Ft,fs(s.type)?(s=up,up=null,Ft=s):Ft=o):Ft=In?_i(s.stateNode.nextSibling):null;return!0}function kc(){Ft=In=null,gt=!1}function oS(){var s=Js;return s!==null&&(zn===null?zn=s:zn.push.apply(zn,s),Js=null),s}function Ec(s){Js===null?Js=[s]:Js.push(s)}var Kh=Q(null),ea=null,Sr=null;function Zr(s,o,u){le(Kh,o._currentValue),o._currentValue=u}function Tr(s){s._currentValue=Kh.current,me(Kh)}function Gh(s,o,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===u)break;s=s.return}}function Yh(s,o,u,h){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var P=g.child;y=y.firstContext;e:for(;y!==null;){var U=y;y=g;for(var q=0;q<o.length;q++)if(U.context===o[q]){y.lanes|=u,U=y.alternate,U!==null&&(U.lanes|=u),Gh(y.return,u,s),h||(P=null);break e}y=U.next}}else if(g.tag===18){if(P=g.return,P===null)throw Error(i(341));P.lanes|=u,y=P.alternate,y!==null&&(y.lanes|=u),Gh(P,u,s),P=null}else P=g.child;if(P!==null)P.return=g;else for(P=g;P!==null;){if(P===s){P=null;break}if(g=P.sibling,g!==null){g.return=P.return,P=g;break}P=P.return}g=P}}function Rc(s,o,u,h){s=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var P=g.alternate;if(P===null)throw Error(i(387));if(P=P.memoizedProps,P!==null){var U=g.type;Xn(g.pendingProps.value,P.value)||(s!==null?s.push(U):s=[U])}}else if(g===be.current){if(P=g.alternate,P===null)throw Error(i(387));P.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(nl):s=[nl])}g=g.return}s!==null&&Yh(o,s,u,h),o.flags|=262144}function Mu(s){for(s=s.firstContext;s!==null;){if(!Xn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ta(s){ea=s,Sr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Pn(s){return cS(ea,s)}function Ou(s,o){return ea===null&&ta(s),cS(s,o)}function cS(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Sr===null){if(s===null)throw Error(i(308));Sr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Sr=Sr.next=o;return u}var vM=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},yM=t.unstable_scheduleCallback,bM=t.unstable_NormalPriority,fn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wh(){return{controller:new vM,data:new Map,refCount:0}}function Ac(s){s.refCount--,s.refCount===0&&yM(bM,function(){s.controller.abort()})}var _c=null,$h=0,$a=0,Xa=null;function SM(s,o){if(_c===null){var u=_c=[];$h=0,$a=Zm(),Xa={status:"pending",value:void 0,then:function(h){u.push(h)}}}return $h++,o.then(lS,lS),o}function lS(){if(--$h===0&&_c!==null){Xa!==null&&(Xa.status="fulfilled");var s=_c;_c=null,$a=0,Xa=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function TM(s,o){var u=[],h={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var g=0;g<u.length;g++)(0,u[g])(o)},function(g){for(h.status="rejected",h.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),h}var uS=Y.S;Y.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&SM(s,o),uS!==null&&uS(s,o)};var na=Q(null);function Xh(){var s=na.current;return s!==null?s:Pt.pooledCache}function Iu(s,o){o===null?le(na,na.current):le(na,o.pool)}function dS(){var s=Xh();return s===null?null:{parent:fn._currentValue,pool:s}}var Pc=Error(i(460)),fS=Error(i(474)),Uu=Error(i(542)),Zh={then:function(){}};function hS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Lu(){}function mS(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Lu,Lu),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,gS(s),s;default:if(typeof o.status=="string")o.then(Lu,Lu);else{if(s=Pt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=h}},function(h){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,gS(s),s}throw Dc=o,Pc}}var Dc=null;function pS(){if(Dc===null)throw Error(i(459));var s=Dc;return Dc=null,s}function gS(s){if(s===Pc||s===Uu)throw Error(i(483))}var Jr=!1;function Jh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qh(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Qr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function es(s,o,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(yt&2)!==0){var g=h.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),h.pending=o,o=_u(s),nS(s,null,u),o}return Au(s,h,o,u),_u(s)}function Nc(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,Yt(s,u)}}function em(s,o){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var P={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?g=y=P:y=y.next=P,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var tm=!1;function Mc(){if(tm){var s=Xa;if(s!==null)throw s}}function Oc(s,o,u,h){tm=!1;var g=s.updateQueue;Jr=!1;var y=g.firstBaseUpdate,P=g.lastBaseUpdate,U=g.shared.pending;if(U!==null){g.shared.pending=null;var q=U,ne=q.next;q.next=null,P===null?y=ne:P.next=ne,P=q;var he=s.alternate;he!==null&&(he=he.updateQueue,U=he.lastBaseUpdate,U!==P&&(U===null?he.firstBaseUpdate=ne:U.next=ne,he.lastBaseUpdate=q))}if(y!==null){var Se=g.baseState;P=0,he=ne=q=null,U=y;do{var oe=U.lane&-536870913,ce=oe!==U.lane;if(ce?(ct&oe)===oe:(h&oe)===oe){oe!==0&&oe===$a&&(tm=!0),he!==null&&(he=he.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var ze=s,Be=U;oe=o;var xt=u;switch(Be.tag){case 1:if(ze=Be.payload,typeof ze=="function"){Se=ze.call(xt,Se,oe);break e}Se=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Be.payload,oe=typeof ze=="function"?ze.call(xt,Se,oe):ze,oe==null)break e;Se=m({},Se,oe);break e;case 2:Jr=!0}}oe=U.callback,oe!==null&&(s.flags|=64,ce&&(s.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},he===null?(ne=he=ce,q=Se):he=he.next=ce,P|=oe;if(U=U.next,U===null){if(U=g.shared.pending,U===null)break;ce=U,U=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);he===null&&(q=Se),g.baseState=q,g.firstBaseUpdate=ne,g.lastBaseUpdate=he,y===null&&(g.shared.lanes=0),cs|=P,s.lanes=P,s.memoizedState=Se}}function vS(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function yS(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)vS(u[s],o)}var Za=Q(null),ju=Q(0);function bS(s,o){s=Ar,le(ju,s),le(Za,o),Ar=s|o.baseLanes}function nm(){le(ju,Ar),le(Za,Za.current)}function im(){Ar=ju.current,me(Za),me(ju)}var ts=0,Qe=null,St=null,rn=null,Bu=!1,Ja=!1,ia=!1,Fu=0,Ic=0,Qa=null,xM=0;function Xt(){throw Error(i(321))}function rm(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Xn(s[u],o[u]))return!1;return!0}function sm(s,o,u,h,g,y){return ts=y,Qe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=s===null||s.memoizedState===null?nT:iT,ia=!1,y=u(h,g),ia=!1,Ja&&(y=TS(o,u,h,g)),SS(s),y}function SS(s){Y.H=Gu;var o=St!==null&&St.next!==null;if(ts=0,rn=St=Qe=null,Bu=!1,Ic=0,Qa=null,o)throw Error(i(300));s===null||yn||(s=s.dependencies,s!==null&&Mu(s)&&(yn=!0))}function TS(s,o,u,h){Qe=s;var g=0;do{if(Ja&&(Qa=null),Ic=0,Ja=!1,25<=g)throw Error(i(301));if(g+=1,rn=St=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}Y.H=_M,y=o(u,h)}while(Ja);return y}function wM(){var s=Y.H,o=s.useState()[0];return o=typeof o.then=="function"?Uc(o):o,s=s.useState()[0],(St!==null?St.memoizedState:null)!==s&&(Qe.flags|=1024),o}function am(){var s=Fu!==0;return Fu=0,s}function om(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function cm(s){if(Bu){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Bu=!1}ts=0,rn=St=Qe=null,Ja=!1,Ic=Fu=0,Qa=null}function Fn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Qe.memoizedState=rn=s:rn=rn.next=s,rn}function sn(){if(St===null){var s=Qe.alternate;s=s!==null?s.memoizedState:null}else s=St.next;var o=rn===null?Qe.memoizedState:rn.next;if(o!==null)rn=o,St=s;else{if(s===null)throw Qe.alternate===null?Error(i(467)):Error(i(310));St=s,s={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},rn===null?Qe.memoizedState=rn=s:rn=rn.next=s}return rn}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uc(s){var o=Ic;return Ic+=1,Qa===null&&(Qa=[]),s=mS(Qa,s,o),o=Qe,(rn===null?o.memoizedState:rn.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?nT:iT),s}function Vu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Uc(s);if(s.$$typeof===O)return Pn(s)}throw Error(i(438,String(s)))}function um(s){var o=null,u=Qe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=Qe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=lm(),Qe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),h=0;h<s;h++)u[h]=ie;return o.index++,u}function xr(s,o){return typeof o=="function"?o(s):o}function zu(s){var o=sn();return dm(o,St,s)}function dm(s,o,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var g=s.baseQueue,y=h.pending;if(y!==null){if(g!==null){var P=g.next;g.next=y.next,y.next=P}o.baseQueue=g=y,h.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{o=g.next;var U=P=null,q=null,ne=o,he=!1;do{var Se=ne.lane&-536870913;if(Se!==ne.lane?(ct&Se)===Se:(ts&Se)===Se){var oe=ne.revertLane;if(oe===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),Se===$a&&(he=!0);else if((ts&oe)===oe){ne=ne.next,oe===$a&&(he=!0);continue}else Se={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(U=q=Se,P=y):q=q.next=Se,Qe.lanes|=oe,cs|=oe;Se=ne.action,ia&&u(y,Se),y=ne.hasEagerState?ne.eagerState:u(y,Se)}else oe={lane:Se,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(U=q=oe,P=y):q=q.next=oe,Qe.lanes|=Se,cs|=Se;ne=ne.next}while(ne!==null&&ne!==o);if(q===null?P=y:q.next=U,!Xn(y,s.memoizedState)&&(yn=!0,he&&(u=Xa,u!==null)))throw u;s.memoizedState=y,s.baseState=P,s.baseQueue=q,h.lastRenderedState=y}return g===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function fm(s){var o=sn(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var P=g=g.next;do y=s(y,P.action),P=P.next;while(P!==g);Xn(y,o.memoizedState)||(yn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,h]}function xS(s,o,u){var h=Qe,g=sn(),y=gt;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=o();var P=!Xn((St||g).memoizedState,u);P&&(g.memoizedState=u,yn=!0),g=g.queue;var U=kS.bind(null,h,g,s);if(Lc(2048,8,U,[s]),g.getSnapshot!==o||P||rn!==null&&rn.memoizedState.tag&1){if(h.flags|=2048,eo(9,Hu(),CS.bind(null,h,g,u,o),null),Pt===null)throw Error(i(349));y||(ts&124)!==0||wS(h,o,u)}return u}function wS(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Qe.updateQueue,o===null?(o=lm(),Qe.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function CS(s,o,u,h){o.value=u,o.getSnapshot=h,ES(o)&&RS(s)}function kS(s,o,u){return u(function(){ES(o)&&RS(s)})}function ES(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Xn(s,u)}catch{return!0}}function RS(s){var o=Ka(s,2);o!==null&&ni(o,s,2)}function hm(s){var o=Fn();if(typeof s=="function"){var u=s;if(s=u(),ia){C(!0);try{u()}finally{C(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:s},o}function AS(s,o,u,h){return s.baseState=u,dm(s,St,typeof h=="function"?h:xr)}function CM(s,o,u,h,g){if(Ku(s))throw Error(i(485));if(s=o.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){y.listeners.push(P)}};Y.T!==null?u(!0):y.isTransition=!1,h(y),u=o.pending,u===null?(y.next=o.pending=y,_S(o,y)):(y.next=u.next,o.pending=u.next=y)}}function _S(s,o){var u=o.action,h=o.payload,g=s.state;if(o.isTransition){var y=Y.T,P={};Y.T=P;try{var U=u(g,h),q=Y.S;q!==null&&q(P,U),PS(s,o,U)}catch(ne){mm(s,o,ne)}finally{Y.T=y}}else try{y=u(g,h),PS(s,o,y)}catch(ne){mm(s,o,ne)}}function PS(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){DS(s,o,h)},function(h){return mm(s,o,h)}):DS(s,o,u)}function DS(s,o,u){o.status="fulfilled",o.value=u,NS(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,_S(s,u)))}function mm(s,o,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,NS(o),o=o.next;while(o!==h)}s.action=null}function NS(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function MS(s,o){return o}function OS(s,o){if(gt){var u=Pt.formState;if(u!==null){e:{var h=Qe;if(gt){if(Ft){t:{for(var g=Ft,y=qi;g.nodeType!==8;){if(!y){g=null;break t}if(g=_i(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Ft=_i(g.nextSibling),h=g.data==="F!";break e}}Qs(h)}h=!1}h&&(o=u[0])}}return u=Fn(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:MS,lastRenderedState:o},u.queue=h,u=QS.bind(null,Qe,h),h.dispatch=u,h=hm(!1),y=bm.bind(null,Qe,!1,h.queue),h=Fn(),g={state:o,dispatch:null,action:s,pending:null},h.queue=g,u=CM.bind(null,Qe,g,y,u),g.dispatch=u,h.memoizedState=s,[o,u,!1]}function IS(s){var o=sn();return US(o,St,s)}function US(s,o,u){if(o=dm(s,o,MS)[0],s=zu(xr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Uc(o)}catch(P){throw P===Pc?Uu:P}else h=o;o=sn();var g=o.queue,y=g.dispatch;return u!==o.memoizedState&&(Qe.flags|=2048,eo(9,Hu(),kM.bind(null,g,u),null)),[h,y,s]}function kM(s,o){s.action=o}function LS(s){var o=sn(),u=St;if(u!==null)return US(o,u,s);sn(),o=o.memoizedState,u=sn();var h=u.queue.dispatch;return u.memoizedState=s,[o,h,!1]}function eo(s,o,u,h){return s={tag:s,create:u,deps:h,inst:o,next:null},o=Qe.updateQueue,o===null&&(o=lm(),Qe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,o.lastEffect=s),s}function Hu(){return{destroy:void 0,resource:void 0}}function jS(){return sn().memoizedState}function qu(s,o,u,h){var g=Fn();h=h===void 0?null:h,Qe.flags|=s,g.memoizedState=eo(1|o,Hu(),u,h)}function Lc(s,o,u,h){var g=sn();h=h===void 0?null:h;var y=g.memoizedState.inst;St!==null&&h!==null&&rm(h,St.memoizedState.deps)?g.memoizedState=eo(o,y,u,h):(Qe.flags|=s,g.memoizedState=eo(1|o,y,u,h))}function BS(s,o){qu(8390656,8,s,o)}function FS(s,o){Lc(2048,8,s,o)}function VS(s,o){return Lc(4,2,s,o)}function zS(s,o){return Lc(4,4,s,o)}function HS(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function qS(s,o,u){u=u!=null?u.concat([s]):null,Lc(4,4,HS.bind(null,o,s),u)}function pm(){}function KS(s,o){var u=sn();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&rm(o,h[1])?h[0]:(u.memoizedState=[s,o],s)}function GS(s,o){var u=sn();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&rm(o,h[1]))return h[0];if(h=s(),ia){C(!0);try{s()}finally{C(!1)}}return u.memoizedState=[h,o],h}function gm(s,o,u){return u===void 0||(ts&1073741824)!==0?s.memoizedState=o:(s.memoizedState=u,s=$T(),Qe.lanes|=s,cs|=s,u)}function YS(s,o,u,h){return Xn(u,o)?u:Za.current!==null?(s=gm(s,u,h),Xn(s,o)||(yn=!0),s):(ts&42)===0?(yn=!0,s.memoizedState=u):(s=$T(),Qe.lanes|=s,cs|=s,o)}function WS(s,o,u,h,g){var y=se.p;se.p=y!==0&&8>y?y:8;var P=Y.T,U={};Y.T=U,bm(s,!1,o,u);try{var q=g(),ne=Y.S;if(ne!==null&&ne(U,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var he=TM(q,h);jc(s,o,he,ti(s))}else jc(s,o,h,ti(s))}catch(Se){jc(s,o,{then:function(){},status:"rejected",reason:Se},ti())}finally{se.p=y,Y.T=P}}function EM(){}function vm(s,o,u,h){if(s.tag!==5)throw Error(i(476));var g=$S(s).queue;WS(s,g,o,J,u===null?EM:function(){return XS(s),u(h)})}function $S(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:J},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xr,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function XS(s){var o=$S(s).next.queue;jc(s,o,{},ti())}function ym(){return Pn(nl)}function ZS(){return sn().memoizedState}function JS(){return sn().memoizedState}function RM(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=ti();s=Qr(u);var h=es(o,s,u);h!==null&&(ni(h,o,u),Nc(h,o,u)),o={cache:Wh()},s.payload=o;return}o=o.return}}function AM(s,o,u){var h=ti();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Ku(s)?eT(o,u):(u=jh(s,o,u,h),u!==null&&(ni(u,s,h),tT(u,o,h)))}function QS(s,o,u){var h=ti();jc(s,o,u,h)}function jc(s,o,u,h){var g={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ku(s))eT(o,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var P=o.lastRenderedState,U=y(P,u);if(g.hasEagerState=!0,g.eagerState=U,Xn(U,P))return Au(s,o,g,0),Pt===null&&Ru(),!1}catch{}finally{}if(u=jh(s,o,g,h),u!==null)return ni(u,s,h),tT(u,o,h),!0}return!1}function bm(s,o,u,h){if(h={lane:2,revertLane:Zm(),action:h,hasEagerState:!1,eagerState:null,next:null},Ku(s)){if(o)throw Error(i(479))}else o=jh(s,u,h,2),o!==null&&ni(o,s,2)}function Ku(s){var o=s.alternate;return s===Qe||o!==null&&o===Qe}function eT(s,o){Ja=Bu=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function tT(s,o,u){if((u&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,Yt(s,u)}}var Gu={readContext:Pn,use:Vu,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt,useHostTransitionStatus:Xt,useFormState:Xt,useActionState:Xt,useOptimistic:Xt,useMemoCache:Xt,useCacheRefresh:Xt},nT={readContext:Pn,use:Vu,useCallback:function(s,o){return Fn().memoizedState=[s,o===void 0?null:o],s},useContext:Pn,useEffect:BS,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,qu(4194308,4,HS.bind(null,o,s),u)},useLayoutEffect:function(s,o){return qu(4194308,4,s,o)},useInsertionEffect:function(s,o){qu(4,2,s,o)},useMemo:function(s,o){var u=Fn();o=o===void 0?null:o;var h=s();if(ia){C(!0);try{s()}finally{C(!1)}}return u.memoizedState=[h,o],h},useReducer:function(s,o,u){var h=Fn();if(u!==void 0){var g=u(o);if(ia){C(!0);try{u(o)}finally{C(!1)}}}else g=o;return h.memoizedState=h.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},h.queue=s,s=s.dispatch=AM.bind(null,Qe,s),[h.memoizedState,s]},useRef:function(s){var o=Fn();return s={current:s},o.memoizedState=s},useState:function(s){s=hm(s);var o=s.queue,u=QS.bind(null,Qe,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:pm,useDeferredValue:function(s,o){var u=Fn();return gm(u,s,o)},useTransition:function(){var s=hm(!1);return s=WS.bind(null,Qe,s.queue,!0,!1),Fn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var h=Qe,g=Fn();if(gt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Pt===null)throw Error(i(349));(ct&124)!==0||wS(h,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,BS(kS.bind(null,h,y,s),[s]),h.flags|=2048,eo(9,Hu(),CS.bind(null,h,y,u,o),null),u},useId:function(){var s=Fn(),o=Pt.identifierPrefix;if(gt){var u=br,h=yr;u=(h&~(1<<32-E(h)-1)).toString(32)+u,o=""+o+"R"+u,u=Fu++,0<u&&(o+="H"+u.toString(32)),o+=""}else u=xM++,o=""+o+"r"+u.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:ym,useFormState:OS,useActionState:OS,useOptimistic:function(s){var o=Fn();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=bm.bind(null,Qe,!0,u),u.dispatch=o,[s,o]},useMemoCache:um,useCacheRefresh:function(){return Fn().memoizedState=RM.bind(null,Qe)}},iT={readContext:Pn,use:Vu,useCallback:KS,useContext:Pn,useEffect:FS,useImperativeHandle:qS,useInsertionEffect:VS,useLayoutEffect:zS,useMemo:GS,useReducer:zu,useRef:jS,useState:function(){return zu(xr)},useDebugValue:pm,useDeferredValue:function(s,o){var u=sn();return YS(u,St.memoizedState,s,o)},useTransition:function(){var s=zu(xr)[0],o=sn().memoizedState;return[typeof s=="boolean"?s:Uc(s),o]},useSyncExternalStore:xS,useId:ZS,useHostTransitionStatus:ym,useFormState:IS,useActionState:IS,useOptimistic:function(s,o){var u=sn();return AS(u,St,s,o)},useMemoCache:um,useCacheRefresh:JS},_M={readContext:Pn,use:Vu,useCallback:KS,useContext:Pn,useEffect:FS,useImperativeHandle:qS,useInsertionEffect:VS,useLayoutEffect:zS,useMemo:GS,useReducer:fm,useRef:jS,useState:function(){return fm(xr)},useDebugValue:pm,useDeferredValue:function(s,o){var u=sn();return St===null?gm(u,s,o):YS(u,St.memoizedState,s,o)},useTransition:function(){var s=fm(xr)[0],o=sn().memoizedState;return[typeof s=="boolean"?s:Uc(s),o]},useSyncExternalStore:xS,useId:ZS,useHostTransitionStatus:ym,useFormState:LS,useActionState:LS,useOptimistic:function(s,o){var u=sn();return St!==null?AS(u,St,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:um,useCacheRefresh:JS},to=null,Bc=0;function Yu(s){var o=Bc;return Bc+=1,to===null&&(to=[]),mS(to,s,o)}function Fc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Wu(s,o){throw o.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function rT(s){var o=s._init;return o(s._payload)}function sT(s){function o(Z,W){if(s){var ee=Z.deletions;ee===null?(Z.deletions=[W],Z.flags|=16):ee.push(W)}}function u(Z,W){if(!s)return null;for(;W!==null;)o(Z,W),W=W.sibling;return null}function h(Z){for(var W=new Map;Z!==null;)Z.key!==null?W.set(Z.key,Z):W.set(Z.index,Z),Z=Z.sibling;return W}function g(Z,W){return Z=vr(Z,W),Z.index=0,Z.sibling=null,Z}function y(Z,W,ee){return Z.index=ee,s?(ee=Z.alternate,ee!==null?(ee=ee.index,ee<W?(Z.flags|=67108866,W):ee):(Z.flags|=67108866,W)):(Z.flags|=1048576,W)}function P(Z){return s&&Z.alternate===null&&(Z.flags|=67108866),Z}function U(Z,W,ee,ve){return W===null||W.tag!==6?(W=Fh(ee,Z.mode,ve),W.return=Z,W):(W=g(W,ee),W.return=Z,W)}function q(Z,W,ee,ve){var Ie=ee.type;return Ie===w?he(Z,W,ee.props.children,ve,ee.key):W!==null&&(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===z&&rT(Ie)===W.type)?(W=g(W,ee.props),Fc(W,ee),W.return=Z,W):(W=Pu(ee.type,ee.key,ee.props,null,Z.mode,ve),Fc(W,ee),W.return=Z,W)}function ne(Z,W,ee,ve){return W===null||W.tag!==4||W.stateNode.containerInfo!==ee.containerInfo||W.stateNode.implementation!==ee.implementation?(W=Vh(ee,Z.mode,ve),W.return=Z,W):(W=g(W,ee.children||[]),W.return=Z,W)}function he(Z,W,ee,ve,Ie){return W===null||W.tag!==7?(W=$s(ee,Z.mode,ve,Ie),W.return=Z,W):(W=g(W,ee),W.return=Z,W)}function Se(Z,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Fh(""+W,Z.mode,ee),W.return=Z,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case v:return ee=Pu(W.type,W.key,W.props,null,Z.mode,ee),Fc(ee,W),ee.return=Z,ee;case b:return W=Vh(W,Z.mode,ee),W.return=Z,W;case z:var ve=W._init;return W=ve(W._payload),Se(Z,W,ee)}if(Me(W)||de(W))return W=$s(W,Z.mode,ee,null),W.return=Z,W;if(typeof W.then=="function")return Se(Z,Yu(W),ee);if(W.$$typeof===O)return Se(Z,Ou(Z,W),ee);Wu(Z,W)}return null}function oe(Z,W,ee,ve){var Ie=W!==null?W.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ie!==null?null:U(Z,W,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:return ee.key===Ie?q(Z,W,ee,ve):null;case b:return ee.key===Ie?ne(Z,W,ee,ve):null;case z:return Ie=ee._init,ee=Ie(ee._payload),oe(Z,W,ee,ve)}if(Me(ee)||de(ee))return Ie!==null?null:he(Z,W,ee,ve,null);if(typeof ee.then=="function")return oe(Z,W,Yu(ee),ve);if(ee.$$typeof===O)return oe(Z,W,Ou(Z,ee),ve);Wu(Z,ee)}return null}function ce(Z,W,ee,ve,Ie){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Z=Z.get(ee)||null,U(W,Z,""+ve,Ie);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case v:return Z=Z.get(ve.key===null?ee:ve.key)||null,q(W,Z,ve,Ie);case b:return Z=Z.get(ve.key===null?ee:ve.key)||null,ne(W,Z,ve,Ie);case z:var nt=ve._init;return ve=nt(ve._payload),ce(Z,W,ee,ve,Ie)}if(Me(ve)||de(ve))return Z=Z.get(ee)||null,he(W,Z,ve,Ie,null);if(typeof ve.then=="function")return ce(Z,W,ee,Yu(ve),Ie);if(ve.$$typeof===O)return ce(Z,W,ee,Ou(W,ve),Ie);Wu(W,ve)}return null}function ze(Z,W,ee,ve){for(var Ie=null,nt=null,je=W,Fe=W=0,Sn=null;je!==null&&Fe<ee.length;Fe++){je.index>Fe?(Sn=je,je=null):Sn=je.sibling;var mt=oe(Z,je,ee[Fe],ve);if(mt===null){je===null&&(je=Sn);break}s&&je&&mt.alternate===null&&o(Z,je),W=y(mt,W,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt,je=Sn}if(Fe===ee.length)return u(Z,je),gt&&Zs(Z,Fe),Ie;if(je===null){for(;Fe<ee.length;Fe++)je=Se(Z,ee[Fe],ve),je!==null&&(W=y(je,W,Fe),nt===null?Ie=je:nt.sibling=je,nt=je);return gt&&Zs(Z,Fe),Ie}for(je=h(je);Fe<ee.length;Fe++)Sn=ce(je,Z,Fe,ee[Fe],ve),Sn!==null&&(s&&Sn.alternate!==null&&je.delete(Sn.key===null?Fe:Sn.key),W=y(Sn,W,Fe),nt===null?Ie=Sn:nt.sibling=Sn,nt=Sn);return s&&je.forEach(function(vs){return o(Z,vs)}),gt&&Zs(Z,Fe),Ie}function Be(Z,W,ee,ve){if(ee==null)throw Error(i(151));for(var Ie=null,nt=null,je=W,Fe=W=0,Sn=null,mt=ee.next();je!==null&&!mt.done;Fe++,mt=ee.next()){je.index>Fe?(Sn=je,je=null):Sn=je.sibling;var vs=oe(Z,je,mt.value,ve);if(vs===null){je===null&&(je=Sn);break}s&&je&&vs.alternate===null&&o(Z,je),W=y(vs,W,Fe),nt===null?Ie=vs:nt.sibling=vs,nt=vs,je=Sn}if(mt.done)return u(Z,je),gt&&Zs(Z,Fe),Ie;if(je===null){for(;!mt.done;Fe++,mt=ee.next())mt=Se(Z,mt.value,ve),mt!==null&&(W=y(mt,W,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt);return gt&&Zs(Z,Fe),Ie}for(je=h(je);!mt.done;Fe++,mt=ee.next())mt=ce(je,Z,Fe,mt.value,ve),mt!==null&&(s&&mt.alternate!==null&&je.delete(mt.key===null?Fe:mt.key),W=y(mt,W,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt);return s&&je.forEach(function(PO){return o(Z,PO)}),gt&&Zs(Z,Fe),Ie}function xt(Z,W,ee,ve){if(typeof ee=="object"&&ee!==null&&ee.type===w&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:e:{for(var Ie=ee.key;W!==null;){if(W.key===Ie){if(Ie=ee.type,Ie===w){if(W.tag===7){u(Z,W.sibling),ve=g(W,ee.props.children),ve.return=Z,Z=ve;break e}}else if(W.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===z&&rT(Ie)===W.type){u(Z,W.sibling),ve=g(W,ee.props),Fc(ve,ee),ve.return=Z,Z=ve;break e}u(Z,W);break}else o(Z,W);W=W.sibling}ee.type===w?(ve=$s(ee.props.children,Z.mode,ve,ee.key),ve.return=Z,Z=ve):(ve=Pu(ee.type,ee.key,ee.props,null,Z.mode,ve),Fc(ve,ee),ve.return=Z,Z=ve)}return P(Z);case b:e:{for(Ie=ee.key;W!==null;){if(W.key===Ie)if(W.tag===4&&W.stateNode.containerInfo===ee.containerInfo&&W.stateNode.implementation===ee.implementation){u(Z,W.sibling),ve=g(W,ee.children||[]),ve.return=Z,Z=ve;break e}else{u(Z,W);break}else o(Z,W);W=W.sibling}ve=Vh(ee,Z.mode,ve),ve.return=Z,Z=ve}return P(Z);case z:return Ie=ee._init,ee=Ie(ee._payload),xt(Z,W,ee,ve)}if(Me(ee))return ze(Z,W,ee,ve);if(de(ee)){if(Ie=de(ee),typeof Ie!="function")throw Error(i(150));return ee=Ie.call(ee),Be(Z,W,ee,ve)}if(typeof ee.then=="function")return xt(Z,W,Yu(ee),ve);if(ee.$$typeof===O)return xt(Z,W,Ou(Z,ee),ve);Wu(Z,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,W!==null&&W.tag===6?(u(Z,W.sibling),ve=g(W,ee),ve.return=Z,Z=ve):(u(Z,W),ve=Fh(ee,Z.mode,ve),ve.return=Z,Z=ve),P(Z)):u(Z,W)}return function(Z,W,ee,ve){try{Bc=0;var Ie=xt(Z,W,ee,ve);return to=null,Ie}catch(je){if(je===Pc||je===Uu)throw je;var nt=Zn(29,je,null,Z.mode);return nt.lanes=ve,nt.return=Z,nt}finally{}}}var no=sT(!0),aT=sT(!1),vi=Q(null),Ki=null;function ns(s){var o=s.alternate;le(hn,hn.current&1),le(vi,s),Ki===null&&(o===null||Za.current!==null||o.memoizedState!==null)&&(Ki=s)}function oT(s){if(s.tag===22){if(le(hn,hn.current),le(vi,s),Ki===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Ki=s)}}else is()}function is(){le(hn,hn.current),le(vi,vi.current)}function wr(s){me(vi),Ki===s&&(Ki=null),me(hn)}var hn=Q(0);function $u(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||lp(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Sm(s,o,u,h){o=s.memoizedState,u=u(h,o),u=u==null?o:m({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Tm={enqueueSetState:function(s,o,u){s=s._reactInternals;var h=ti(),g=Qr(h);g.payload=o,u!=null&&(g.callback=u),o=es(s,g,h),o!==null&&(ni(o,s,h),Nc(o,s,h))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var h=ti(),g=Qr(h);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=es(s,g,h),o!==null&&(ni(o,s,h),Nc(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=ti(),h=Qr(u);h.tag=2,o!=null&&(h.callback=o),o=es(s,h,u),o!==null&&(ni(o,s,u),Nc(o,s,u))}};function cT(s,o,u,h,g,y,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,P):o.prototype&&o.prototype.isPureReactComponent?!xc(u,h)||!xc(g,y):!0}function lT(s,o,u,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==s&&Tm.enqueueReplaceState(o,o.state,null)}function ra(s,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(s=s.defaultProps){u===o&&(u=m({},u));for(var g in s)u[g]===void 0&&(u[g]=s[g])}return u}var Xu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function uT(s){Xu(s)}function dT(s){console.error(s)}function fT(s){Xu(s)}function Zu(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function hT(s,o,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function xm(s,o,u){return u=Qr(u),u.tag=3,u.payload={element:null},u.callback=function(){Zu(s,o)},u}function mT(s){return s=Qr(s),s.tag=3,s}function pT(s,o,u,h){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;s.payload=function(){return g(y)},s.callback=function(){hT(o,u,h)}}var P=u.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(s.callback=function(){hT(o,u,h),typeof g!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var U=h.stack;this.componentDidCatch(h.value,{componentStack:U!==null?U:""})})}function PM(s,o,u,h,g){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&Rc(o,u,g,!0),u=vi.current,u!==null){switch(u.tag){case 13:return Ki===null?Gm():u.alternate===null&&Vt===0&&(Vt=3),u.flags&=-257,u.flags|=65536,u.lanes=g,h===Zh?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),Wm(s,h,g)),!1;case 22:return u.flags|=65536,h===Zh?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),Wm(s,h,g)),!1}throw Error(i(435,u.tag))}return Wm(s,h,g),Gm(),!1}if(gt)return o=vi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,h!==qh&&(s=Error(i(422),{cause:h}),Ec(hi(s,u)))):(h!==qh&&(o=Error(i(423),{cause:h}),Ec(hi(o,u))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,h=hi(h,u),g=xm(s.stateNode,h,g),em(s,g),Vt!==4&&(Vt=2)),!1;var y=Error(i(520),{cause:h});if(y=hi(y,u),Yc===null?Yc=[y]:Yc.push(y),Vt!==4&&(Vt=2),o===null)return!0;h=hi(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=g&-g,u.lanes|=s,s=xm(u.stateNode,h,s),em(u,s),!1;case 1:if(o=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ls===null||!ls.has(y))))return u.flags|=65536,g&=-g,u.lanes|=g,g=mT(g),pT(g,s,u,h),em(u,g),!1}u=u.return}while(u!==null);return!1}var gT=Error(i(461)),yn=!1;function Cn(s,o,u,h){o.child=s===null?aT(o,null,u,h):no(o,s.child,u,h)}function vT(s,o,u,h,g){u=u.render;var y=o.ref;if("ref"in h){var P={};for(var U in h)U!=="ref"&&(P[U]=h[U])}else P=h;return ta(o),h=sm(s,o,u,P,y,g),U=am(),s!==null&&!yn?(om(s,o,g),Cr(s,o,g)):(gt&&U&&zh(o),o.flags|=1,Cn(s,o,h,g),o.child)}function yT(s,o,u,h,g){if(s===null){var y=u.type;return typeof y=="function"&&!Bh(y)&&y.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=y,bT(s,o,y,h,g)):(s=Pu(u.type,null,h,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,!Pm(s,g)){var P=y.memoizedProps;if(u=u.compare,u=u!==null?u:xc,u(P,h)&&s.ref===o.ref)return Cr(s,o,g)}return o.flags|=1,s=vr(y,h),s.ref=o.ref,s.return=o,o.child=s}function bT(s,o,u,h,g){if(s!==null){var y=s.memoizedProps;if(xc(y,h)&&s.ref===o.ref)if(yn=!1,o.pendingProps=h=y,Pm(s,g))(s.flags&131072)!==0&&(yn=!0);else return o.lanes=s.lanes,Cr(s,o,g)}return wm(s,o,u,h,g)}function ST(s,o,u){var h=o.pendingProps,g=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=y!==null?y.baseLanes|u:u,s!==null){for(g=o.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;o.childLanes=y&~h}else o.childLanes=0,o.child=null;return TT(s,o,h,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Iu(o,y!==null?y.cachePool:null),y!==null?bS(o,y):nm(),oT(o);else return o.lanes=o.childLanes=536870912,TT(s,o,y!==null?y.baseLanes|u:u,u)}else y!==null?(Iu(o,y.cachePool),bS(o,y),is(),o.memoizedState=null):(s!==null&&Iu(o,null),nm(),is());return Cn(s,o,g,u),o.child}function TT(s,o,u,h){var g=Xh();return g=g===null?null:{parent:fn._currentValue,pool:g},o.memoizedState={baseLanes:u,cachePool:g},s!==null&&Iu(o,null),nm(),oT(o),s!==null&&Rc(s,o,h,!0),null}function Ju(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function wm(s,o,u,h,g){return ta(o),u=sm(s,o,u,h,void 0,g),h=am(),s!==null&&!yn?(om(s,o,g),Cr(s,o,g)):(gt&&h&&zh(o),o.flags|=1,Cn(s,o,u,g),o.child)}function xT(s,o,u,h,g,y){return ta(o),o.updateQueue=null,u=TS(o,h,u,g),SS(s),h=am(),s!==null&&!yn?(om(s,o,y),Cr(s,o,y)):(gt&&h&&zh(o),o.flags|=1,Cn(s,o,u,y),o.child)}function wT(s,o,u,h,g){if(ta(o),o.stateNode===null){var y=Ga,P=u.contextType;typeof P=="object"&&P!==null&&(y=Pn(P)),y=new u(h,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Tm,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=h,y.state=o.memoizedState,y.refs={},Jh(o),P=u.contextType,y.context=typeof P=="object"&&P!==null?Pn(P):Ga,y.state=o.memoizedState,P=u.getDerivedStateFromProps,typeof P=="function"&&(Sm(o,u,P,h),y.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(P=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),P!==y.state&&Tm.enqueueReplaceState(y,y.state,null),Oc(o,h,y,g),Mc(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){y=o.stateNode;var U=o.memoizedProps,q=ra(u,U);y.props=q;var ne=y.context,he=u.contextType;P=Ga,typeof he=="object"&&he!==null&&(P=Pn(he));var Se=u.getDerivedStateFromProps;he=typeof Se=="function"||typeof y.getSnapshotBeforeUpdate=="function",U=o.pendingProps!==U,he||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(U||ne!==P)&&lT(o,y,h,P),Jr=!1;var oe=o.memoizedState;y.state=oe,Oc(o,h,y,g),Mc(),ne=o.memoizedState,U||oe!==ne||Jr?(typeof Se=="function"&&(Sm(o,u,Se,h),ne=o.memoizedState),(q=Jr||cT(o,u,q,h,oe,ne,P))?(he||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=ne),y.props=h,y.state=ne,y.context=P,h=q):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{y=o.stateNode,Qh(s,o),P=o.memoizedProps,he=ra(u,P),y.props=he,Se=o.pendingProps,oe=y.context,ne=u.contextType,q=Ga,typeof ne=="object"&&ne!==null&&(q=Pn(ne)),U=u.getDerivedStateFromProps,(ne=typeof U=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(P!==Se||oe!==q)&&lT(o,y,h,q),Jr=!1,oe=o.memoizedState,y.state=oe,Oc(o,h,y,g),Mc();var ce=o.memoizedState;P!==Se||oe!==ce||Jr||s!==null&&s.dependencies!==null&&Mu(s.dependencies)?(typeof U=="function"&&(Sm(o,u,U,h),ce=o.memoizedState),(he=Jr||cT(o,u,he,h,oe,ce,q)||s!==null&&s.dependencies!==null&&Mu(s.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,ce,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,ce,q)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||P===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ce),y.props=h,y.state=ce,y.context=q,h=he):(typeof y.componentDidUpdate!="function"||P===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),h=!1)}return y=h,Ju(s,o),h=(o.flags&128)!==0,y||h?(y=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,s!==null&&h?(o.child=no(o,s.child,null,g),o.child=no(o,null,u,g)):Cn(s,o,u,g),o.memoizedState=y.state,s=o.child):s=Cr(s,o,g),s}function CT(s,o,u,h){return kc(),o.flags|=256,Cn(s,o,u,h),o.child}var Cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function km(s){return{baseLanes:s,cachePool:dS()}}function Em(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=yi),s}function kT(s,o,u){var h=o.pendingProps,g=!1,y=(o.flags&128)!==0,P;if((P=y)||(P=s!==null&&s.memoizedState===null?!1:(hn.current&2)!==0),P&&(g=!0,o.flags&=-129),P=(o.flags&32)!==0,o.flags&=-33,s===null){if(gt){if(g?ns(o):is(),gt){var U=Ft,q;if(q=U){e:{for(q=U,U=qi;q.nodeType!==8;){if(!U){U=null;break e}if(q=_i(q.nextSibling),q===null){U=null;break e}}U=q}U!==null?(o.memoizedState={dehydrated:U,treeContext:Xs!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},q=Zn(18,null,null,0),q.stateNode=U,q.return=o,o.child=q,In=o,Ft=null,q=!0):q=!1}q||Qs(o)}if(U=o.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return lp(U)?o.lanes=32:o.lanes=536870912,null;wr(o)}return U=h.children,h=h.fallback,g?(is(),g=o.mode,U=Qu({mode:"hidden",children:U},g),h=$s(h,g,u,null),U.return=o,h.return=o,U.sibling=h,o.child=U,g=o.child,g.memoizedState=km(u),g.childLanes=Em(s,P,u),o.memoizedState=Cm,h):(ns(o),Rm(o,U))}if(q=s.memoizedState,q!==null&&(U=q.dehydrated,U!==null)){if(y)o.flags&256?(ns(o),o.flags&=-257,o=Am(s,o,u)):o.memoizedState!==null?(is(),o.child=s.child,o.flags|=128,o=null):(is(),g=h.fallback,U=o.mode,h=Qu({mode:"visible",children:h.children},U),g=$s(g,U,u,null),g.flags|=2,h.return=o,g.return=o,h.sibling=g,o.child=h,no(o,s.child,null,u),h=o.child,h.memoizedState=km(u),h.childLanes=Em(s,P,u),o.memoizedState=Cm,o=g);else if(ns(o),lp(U)){if(P=U.nextSibling&&U.nextSibling.dataset,P)var ne=P.dgst;P=ne,h=Error(i(419)),h.stack="",h.digest=P,Ec({value:h,source:null,stack:null}),o=Am(s,o,u)}else if(yn||Rc(s,o,u,!1),P=(u&s.childLanes)!==0,yn||P){if(P=Pt,P!==null&&(h=u&-u,h=(h&42)!==0?1:nn(h),h=(h&(P.suspendedLanes|u))!==0?0:h,h!==0&&h!==q.retryLane))throw q.retryLane=h,Ka(s,h),ni(P,s,h),gT;U.data==="$?"||Gm(),o=Am(s,o,u)}else U.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=q.treeContext,Ft=_i(U.nextSibling),In=o,gt=!0,Js=null,qi=!1,s!==null&&(pi[gi++]=yr,pi[gi++]=br,pi[gi++]=Xs,yr=s.id,br=s.overflow,Xs=o),o=Rm(o,h.children),o.flags|=4096);return o}return g?(is(),g=h.fallback,U=o.mode,q=s.child,ne=q.sibling,h=vr(q,{mode:"hidden",children:h.children}),h.subtreeFlags=q.subtreeFlags&65011712,ne!==null?g=vr(ne,g):(g=$s(g,U,u,null),g.flags|=2),g.return=o,h.return=o,h.sibling=g,o.child=h,h=g,g=o.child,U=s.child.memoizedState,U===null?U=km(u):(q=U.cachePool,q!==null?(ne=fn._currentValue,q=q.parent!==ne?{parent:ne,pool:ne}:q):q=dS(),U={baseLanes:U.baseLanes|u,cachePool:q}),g.memoizedState=U,g.childLanes=Em(s,P,u),o.memoizedState=Cm,h):(ns(o),u=s.child,s=u.sibling,u=vr(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,s!==null&&(P=o.deletions,P===null?(o.deletions=[s],o.flags|=16):P.push(s)),o.child=u,o.memoizedState=null,u)}function Rm(s,o){return o=Qu({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Qu(s,o){return s=Zn(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Am(s,o,u){return no(o,s.child,null,u),s=Rm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function ET(s,o,u){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),Gh(s.return,o,u)}function _m(s,o,u,h,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=g)}function RT(s,o,u){var h=o.pendingProps,g=h.revealOrder,y=h.tail;if(Cn(s,o,h.children,u),h=hn.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ET(s,u,o);else if(s.tag===19)ET(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(le(hn,h),g){case"forwards":for(u=o.child,g=null;u!==null;)s=u.alternate,s!==null&&$u(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),_m(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&$u(s)===null){o.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}_m(o,!0,u,null,y);break;case"together":_m(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Cr(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),cs|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(Rc(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,u=vr(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=vr(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Pm(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Mu(s)))}function DM(s,o,u){switch(o.tag){case 3:Ce(o,o.stateNode.containerInfo),Zr(o,fn,s.memoizedState.cache),kc();break;case 27:case 5:qe(o);break;case 4:Ce(o,o.stateNode.containerInfo);break;case 10:Zr(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(ns(o),o.flags|=128,null):(u&o.child.childLanes)!==0?kT(s,o,u):(ns(o),s=Cr(s,o,u),s!==null?s.sibling:null);ns(o);break;case 19:var g=(s.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(Rc(s,o,u,!1),h=(u&o.childLanes)!==0),g){if(h)return RT(s,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(hn,hn.current),h)break;return null;case 22:case 23:return o.lanes=0,ST(s,o,u);case 24:Zr(o,fn,s.memoizedState.cache)}return Cr(s,o,u)}function AT(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)yn=!0;else{if(!Pm(s,u)&&(o.flags&128)===0)return yn=!1,DM(s,o,u);yn=(s.flags&131072)!==0}else yn=!1,gt&&(o.flags&1048576)!==0&&rS(o,Nu,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var h=o.elementType,g=h._init;if(h=g(h._payload),o.type=h,typeof h=="function")Bh(h)?(s=ra(h,s),o.tag=1,o=wT(null,o,h,s,u)):(o.tag=0,o=wm(null,o,h,s,u));else{if(h!=null){if(g=h.$$typeof,g===I){o.tag=11,o=vT(null,o,h,s,u);break e}else if(g===H){o.tag=14,o=yT(null,o,h,s,u);break e}}throw o=Ae(h)||h,Error(i(306,o,""))}}return o;case 0:return wm(s,o,o.type,o.pendingProps,u);case 1:return h=o.type,g=ra(h,o.pendingProps),wT(s,o,h,g,u);case 3:e:{if(Ce(o,o.stateNode.containerInfo),s===null)throw Error(i(387));h=o.pendingProps;var y=o.memoizedState;g=y.element,Qh(s,o),Oc(o,h,null,u);var P=o.memoizedState;if(h=P.cache,Zr(o,fn,h),h!==y.cache&&Yh(o,[fn],u,!0),Mc(),h=P.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:P.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=CT(s,o,h,u);break e}else if(h!==g){g=hi(Error(i(424)),o),Ec(g),o=CT(s,o,h,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ft=_i(s.firstChild),In=o,gt=!0,Js=null,qi=!0,u=aT(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(kc(),h===g){o=Cr(s,o,u);break e}Cn(s,o,h,u)}o=o.child}return o;case 26:return Ju(s,o),s===null?(u=Nx(o.type,null,o.pendingProps,null))?o.memoizedState=u:gt||(u=o.type,s=o.pendingProps,h=hd(Pe.current).createElement(u),h[$t]=o,h[_t]=s,En(h,u,s),vn(h),o.stateNode=h):o.memoizedState=Nx(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return qe(o),s===null&&gt&&(h=o.stateNode=_x(o.type,o.pendingProps,Pe.current),In=o,qi=!0,g=Ft,fs(o.type)?(up=g,Ft=_i(h.firstChild)):Ft=g),Cn(s,o,o.pendingProps.children,u),Ju(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&gt&&((g=h=Ft)&&(h=sO(h,o.type,o.pendingProps,qi),h!==null?(o.stateNode=h,In=o,Ft=_i(h.firstChild),qi=!1,g=!0):g=!1),g||Qs(o)),qe(o),g=o.type,y=o.pendingProps,P=s!==null?s.memoizedProps:null,h=y.children,ap(g,y)?h=null:P!==null&&ap(g,P)&&(o.flags|=32),o.memoizedState!==null&&(g=sm(s,o,wM,null,null,u),nl._currentValue=g),Ju(s,o),Cn(s,o,h,u),o.child;case 6:return s===null&&gt&&((s=u=Ft)&&(u=aO(u,o.pendingProps,qi),u!==null?(o.stateNode=u,In=o,Ft=null,s=!0):s=!1),s||Qs(o)),null;case 13:return kT(s,o,u);case 4:return Ce(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=no(o,null,h,u):Cn(s,o,h,u),o.child;case 11:return vT(s,o,o.type,o.pendingProps,u);case 7:return Cn(s,o,o.pendingProps,u),o.child;case 8:return Cn(s,o,o.pendingProps.children,u),o.child;case 12:return Cn(s,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,Zr(o,o.type,h.value),Cn(s,o,h.children,u),o.child;case 9:return g=o.type._context,h=o.pendingProps.children,ta(o),g=Pn(g),h=h(g),o.flags|=1,Cn(s,o,h,u),o.child;case 14:return yT(s,o,o.type,o.pendingProps,u);case 15:return bT(s,o,o.type,o.pendingProps,u);case 19:return RT(s,o,u);case 31:return h=o.pendingProps,u=o.mode,h={mode:h.mode,children:h.children},s===null?(u=Qu(h,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=vr(s.child,h),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return ST(s,o,u);case 24:return ta(o),h=Pn(fn),s===null?(g=Xh(),g===null&&(g=Pt,y=Wh(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=u),g=y),o.memoizedState={parent:h,cache:g},Jh(o),Zr(o,fn,g)):((s.lanes&u)!==0&&(Qh(s,o),Oc(o,null,null,u),Mc()),g=s.memoizedState,y=o.memoizedState,g.parent!==h?(g={parent:h,cache:h},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Zr(o,fn,h)):(h=y.cache,Zr(o,fn,h),h!==g.cache&&Yh(o,[fn],u,!0))),Cn(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function kr(s){s.flags|=4}function _T(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Lx(o)){if(o=vi.current,o!==null&&((ct&4194048)===ct?Ki!==null:(ct&62914560)!==ct&&(ct&536870912)===0||o!==Ki))throw Dc=Zh,fS;s.flags|=8192}}function ed(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?mu():536870912,s.lanes|=o,ao|=o)}function Vc(s,o){if(!gt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function jt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(o)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=u,o}function NM(s,o,u){var h=o.pendingProps;switch(Hh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(o),null;case 1:return jt(o),null;case 3:return u=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Tr(fn),Ve(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Cc(o)?kr(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,oS())),jt(o),null;case 26:return u=o.memoizedState,s===null?(kr(o),u!==null?(jt(o),_T(o,u)):(jt(o),o.flags&=-16777217)):u?u!==s.memoizedState?(kr(o),jt(o),_T(o,u)):(jt(o),o.flags&=-16777217):(s.memoizedProps!==h&&kr(o),jt(o),o.flags&=-16777217),null;case 27:Xe(o),u=Pe.current;var g=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&kr(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return jt(o),null}s=Te.current,Cc(o)?sS(o):(s=_x(g,h,u),o.stateNode=s,kr(o))}return jt(o),null;case 5:if(Xe(o),u=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&kr(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return jt(o),null}if(s=Te.current,Cc(o))sS(o);else{switch(g=hd(Pe.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?g.createElement(u,{is:h.is}):g.createElement(u)}}s[$t]=o,s[_t]=h;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=s;e:switch(En(s,u,h),u){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&kr(o)}}return jt(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&kr(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(i(166));if(s=Pe.current,Cc(o)){if(s=o.stateNode,u=o.memoizedProps,h=null,g=In,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}s[$t]=o,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||xx(s.nodeValue,u)),s||Qs(o)}else s=hd(s).createTextNode(h),s[$t]=o,o.stateNode=s}return jt(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Cc(o),h!==null&&h.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[$t]=o}else kc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;jt(o),g=!1}else g=oS(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(wr(o),o):(wr(o),null)}if(wr(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=h!==null,s=s!==null&&s.memoizedState!==null,u){h=o.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)}return u!==s&&u&&(o.child.flags|=8192),ed(o,o.updateQueue),jt(o),null;case 4:return Ve(),s===null&&tp(o.stateNode.containerInfo),jt(o),null;case 10:return Tr(o.type),jt(o),null;case 19:if(me(hn),g=o.memoizedState,g===null)return jt(o),null;if(h=(o.flags&128)!==0,y=g.rendering,y===null)if(h)Vc(g,!1);else{if(Vt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(y=$u(s),y!==null){for(o.flags|=128,Vc(g,!1),s=y.updateQueue,o.updateQueue=s,ed(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)iS(u,s),u=u.sibling;return le(hn,hn.current&1|2),o.child}s=s.sibling}g.tail!==null&&At()>id&&(o.flags|=128,h=!0,Vc(g,!1),o.lanes=4194304)}else{if(!h)if(s=$u(y),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,ed(o,s),Vc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!gt)return jt(o),null}else 2*At()-g.renderingStartTime>id&&u!==536870912&&(o.flags|=128,h=!0,Vc(g,!1),o.lanes=4194304);g.isBackwards?(y.sibling=o.child,o.child=y):(s=g.last,s!==null?s.sibling=y:o.child=y,g.last=y)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=At(),o.sibling=null,s=hn.current,le(hn,h?s&1|2:s&1),o):(jt(o),null);case 22:case 23:return wr(o),im(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(jt(o),o.subtreeFlags&6&&(o.flags|=8192)):jt(o),u=o.updateQueue,u!==null&&ed(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),s!==null&&me(na),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Tr(fn),jt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function MM(s,o){switch(Hh(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Tr(fn),Ve(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Xe(o),null;case 13:if(wr(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));kc()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return me(hn),null;case 4:return Ve(),null;case 10:return Tr(o.type),null;case 22:case 23:return wr(o),im(),s!==null&&me(na),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Tr(fn),null;case 25:return null;default:return null}}function PT(s,o){switch(Hh(o),o.tag){case 3:Tr(fn),Ve();break;case 26:case 27:case 5:Xe(o);break;case 4:Ve();break;case 13:wr(o);break;case 19:me(hn);break;case 10:Tr(o.type);break;case 22:case 23:wr(o),im(),s!==null&&me(na);break;case 24:Tr(fn)}}function zc(s,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&s)===s){h=void 0;var y=u.create,P=u.inst;h=y(),P.destroy=h}u=u.next}while(u!==g)}}catch(U){Et(o,o.return,U)}}function rs(s,o,u){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&s)===s){var P=h.inst,U=P.destroy;if(U!==void 0){P.destroy=void 0,g=o;var q=u,ne=U;try{ne()}catch(he){Et(g,q,he)}}}h=h.next}while(h!==y)}}catch(he){Et(o,o.return,he)}}function DT(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{yS(o,u)}catch(h){Et(s,s.return,h)}}}function NT(s,o,u){u.props=ra(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Et(s,o,h)}}function Hc(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(g){Et(s,o,g)}}function Gi(s,o){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(g){Et(s,o,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){Et(s,o,g)}else u.current=null}function MT(s){var o=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(g){Et(s,s.return,g)}}function Dm(s,o,u){try{var h=s.stateNode;eO(h,s.type,u,o),h[_t]=o}catch(g){Et(s,s.return,g)}}function OT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&fs(s.type)||s.tag===4}function Nm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||OT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&fs(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Mm(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=fd));else if(h!==4&&(h===27&&fs(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(Mm(s,o,u),s=s.sibling;s!==null;)Mm(s,o,u),s=s.sibling}function td(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(h!==4&&(h===27&&fs(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(td(s,o,u),s=s.sibling;s!==null;)td(s,o,u),s=s.sibling}function IT(s){var o=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);En(o,h,u),o[$t]=s,o[_t]=u}catch(y){Et(s,s.return,y)}}var Er=!1,Zt=!1,Om=!1,UT=typeof WeakSet=="function"?WeakSet:Set,bn=null;function OM(s,o){if(s=s.containerInfo,rp=bd,s=Yb(s),Nh(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var P=0,U=-1,q=-1,ne=0,he=0,Se=s,oe=null;t:for(;;){for(var ce;Se!==u||g!==0&&Se.nodeType!==3||(U=P+g),Se!==y||h!==0&&Se.nodeType!==3||(q=P+h),Se.nodeType===3&&(P+=Se.nodeValue.length),(ce=Se.firstChild)!==null;)oe=Se,Se=ce;for(;;){if(Se===s)break t;if(oe===u&&++ne===g&&(U=P),oe===y&&++he===h&&(q=P),(ce=Se.nextSibling)!==null)break;Se=oe,oe=Se.parentNode}Se=ce}u=U===-1||q===-1?null:{start:U,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(sp={focusedElem:s,selectionRange:u},bd=!1,bn=o;bn!==null;)if(o=bn,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,bn=s;else for(;bn!==null;){switch(o=bn,y=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,u=o,g=y.memoizedProps,y=y.memoizedState,h=u.stateNode;try{var ze=ra(u.type,g,u.elementType===u.type);s=h.getSnapshotBeforeUpdate(ze,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(Be){Et(u,u.return,Be)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)cp(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":cp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,bn=s;break}bn=o.return}}function LT(s,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:ss(s,u),h&4&&zc(5,u);break;case 1:if(ss(s,u),h&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(P){Et(u,u.return,P)}else{var g=ra(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(g,o,s.__reactInternalSnapshotBeforeUpdate)}catch(P){Et(u,u.return,P)}}h&64&&DT(u),h&512&&Hc(u,u.return);break;case 3:if(ss(s,u),h&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{yS(s,o)}catch(P){Et(u,u.return,P)}}break;case 27:o===null&&h&4&&IT(u);case 26:case 5:ss(s,u),o===null&&h&4&&MT(u),h&512&&Hc(u,u.return);break;case 12:ss(s,u);break;case 13:ss(s,u),h&4&&FT(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=HM.bind(null,u),oO(s,u))));break;case 22:if(h=u.memoizedState!==null||Er,!h){o=o!==null&&o.memoizedState!==null||Zt,g=Er;var y=Zt;Er=h,(Zt=o)&&!y?as(s,u,(u.subtreeFlags&8772)!==0):ss(s,u),Er=g,Zt=y}break;case 30:break;default:ss(s,u)}}function jT(s){var o=s.alternate;o!==null&&(s.alternate=null,jT(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&hh(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Mt=null,Vn=!1;function Rr(s,o,u){for(u=u.child;u!==null;)BT(s,o,u),u=u.sibling}function BT(s,o,u){if(M&&typeof M.onCommitFiberUnmount=="function")try{M.onCommitFiberUnmount(Je,u)}catch{}switch(u.tag){case 26:Zt||Gi(u,o),Rr(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Zt||Gi(u,o);var h=Mt,g=Vn;fs(u.type)&&(Mt=u.stateNode,Vn=!1),Rr(s,o,u),Jc(u.stateNode),Mt=h,Vn=g;break;case 5:Zt||Gi(u,o);case 6:if(h=Mt,g=Vn,Mt=null,Rr(s,o,u),Mt=h,Vn=g,Mt!==null)if(Vn)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(u.stateNode)}catch(y){Et(u,o,y)}else try{Mt.removeChild(u.stateNode)}catch(y){Et(u,o,y)}break;case 18:Mt!==null&&(Vn?(s=Mt,Rx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),al(s)):Rx(Mt,u.stateNode));break;case 4:h=Mt,g=Vn,Mt=u.stateNode.containerInfo,Vn=!0,Rr(s,o,u),Mt=h,Vn=g;break;case 0:case 11:case 14:case 15:Zt||rs(2,u,o),Zt||rs(4,u,o),Rr(s,o,u);break;case 1:Zt||(Gi(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&NT(u,o,h)),Rr(s,o,u);break;case 21:Rr(s,o,u);break;case 22:Zt=(h=Zt)||u.memoizedState!==null,Rr(s,o,u),Zt=h;break;default:Rr(s,o,u)}}function FT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{al(s)}catch(u){Et(o,o.return,u)}}function IM(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new UT),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new UT),o;default:throw Error(i(435,s.tag))}}function Im(s,o){var u=IM(s);o.forEach(function(h){var g=qM.bind(null,s,h);u.has(h)||(u.add(h),h.then(g,g))})}function Jn(s,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var g=u[h],y=s,P=o,U=P;e:for(;U!==null;){switch(U.tag){case 27:if(fs(U.type)){Mt=U.stateNode,Vn=!1;break e}break;case 5:Mt=U.stateNode,Vn=!1;break e;case 3:case 4:Mt=U.stateNode.containerInfo,Vn=!0;break e}U=U.return}if(Mt===null)throw Error(i(160));BT(y,P,g),Mt=null,Vn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)VT(o,s),o=o.sibling}var Ai=null;function VT(s,o){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Jn(o,s),Qn(s),h&4&&(rs(3,s,s.return),zc(3,s),rs(5,s,s.return));break;case 1:Jn(o,s),Qn(s),h&512&&(Zt||u===null||Gi(u,u.return)),h&64&&Er&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var g=Ai;if(Jn(o,s),Qn(s),h&512&&(Zt||u===null||Gi(u,u.return)),h&4){var y=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[hc]||y[$t]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),En(y,h,u),y[$t]=s,vn(y),h=y;break e;case"link":var P=Ix("link","href",g).get(h+(u.href||""));if(P){for(var U=0;U<P.length;U++)if(y=P[U],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){P.splice(U,1);break t}}y=g.createElement(h),En(y,h,u),g.head.appendChild(y);break;case"meta":if(P=Ix("meta","content",g).get(h+(u.content||""))){for(U=0;U<P.length;U++)if(y=P[U],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){P.splice(U,1);break t}}y=g.createElement(h),En(y,h,u),g.head.appendChild(y);break;default:throw Error(i(468,h))}y[$t]=s,vn(y),h=y}s.stateNode=h}else Ux(g,s.type,s.stateNode);else s.stateNode=Ox(g,h,s.memoizedProps);else y!==h?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,h===null?Ux(g,s.type,s.stateNode):Ox(g,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Dm(s,s.memoizedProps,u.memoizedProps)}break;case 27:Jn(o,s),Qn(s),h&512&&(Zt||u===null||Gi(u,u.return)),u!==null&&h&4&&Dm(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Jn(o,s),Qn(s),h&512&&(Zt||u===null||Gi(u,u.return)),s.flags&32){g=s.stateNode;try{ja(g,"")}catch(ce){Et(s,s.return,ce)}}h&4&&s.stateNode!=null&&(g=s.memoizedProps,Dm(s,g,u!==null?u.memoizedProps:g)),h&1024&&(Om=!0);break;case 6:if(Jn(o,s),Qn(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(ce){Et(s,s.return,ce)}}break;case 3:if(gd=null,g=Ai,Ai=md(o.containerInfo),Jn(o,s),Ai=g,Qn(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{al(o.containerInfo)}catch(ce){Et(s,s.return,ce)}Om&&(Om=!1,zT(s));break;case 4:h=Ai,Ai=md(s.stateNode.containerInfo),Jn(o,s),Qn(s),Ai=h;break;case 12:Jn(o,s),Qn(s);break;case 13:Jn(o,s),Qn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Vm=At()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Im(s,h)));break;case 22:g=s.memoizedState!==null;var q=u!==null&&u.memoizedState!==null,ne=Er,he=Zt;if(Er=ne||g,Zt=he||q,Jn(o,s),Zt=he,Er=ne,Qn(s),h&8192)e:for(o=s.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(u===null||q||Er||Zt||sa(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){q=u=o;try{if(y=q.stateNode,g)P=y.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{U=q.stateNode;var Se=q.memoizedProps.style,oe=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;U.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ce){Et(q,q.return,ce)}}}else if(o.tag===6){if(u===null){q=o;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(ce){Et(q,q.return,ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Im(s,u))));break;case 19:Jn(o,s),Qn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Im(s,h)));break;case 30:break;case 21:break;default:Jn(o,s),Qn(s)}}function Qn(s){var o=s.flags;if(o&2){try{for(var u,h=s.return;h!==null;){if(OT(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var g=u.stateNode,y=Nm(s);td(s,y,g);break;case 5:var P=u.stateNode;u.flags&32&&(ja(P,""),u.flags&=-33);var U=Nm(s);td(s,U,P);break;case 3:case 4:var q=u.stateNode.containerInfo,ne=Nm(s);Mm(s,ne,q);break;default:throw Error(i(161))}}catch(he){Et(s,s.return,he)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function zT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;zT(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function ss(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)LT(s,o.alternate,o),o=o.sibling}function sa(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:rs(4,o,o.return),sa(o);break;case 1:Gi(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&NT(o,o.return,u),sa(o);break;case 27:Jc(o.stateNode);case 26:case 5:Gi(o,o.return),sa(o);break;case 22:o.memoizedState===null&&sa(o);break;case 30:sa(o);break;default:sa(o)}s=s.sibling}}function as(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,g=s,y=o,P=y.flags;switch(y.tag){case 0:case 11:case 15:as(g,y,u),zc(4,y);break;case 1:if(as(g,y,u),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ne){Et(h,h.return,ne)}if(h=y,g=h.updateQueue,g!==null){var U=h.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)vS(q[g],U)}catch(ne){Et(h,h.return,ne)}}u&&P&64&&DT(y),Hc(y,y.return);break;case 27:IT(y);case 26:case 5:as(g,y,u),u&&h===null&&P&4&&MT(y),Hc(y,y.return);break;case 12:as(g,y,u);break;case 13:as(g,y,u),u&&P&4&&FT(g,y);break;case 22:y.memoizedState===null&&as(g,y,u),Hc(y,y.return);break;case 30:break;default:as(g,y,u)}o=o.sibling}}function Um(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Ac(u))}function Lm(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Ac(s))}function Yi(s,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)HT(s,o,u,h),o=o.sibling}function HT(s,o,u,h){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Yi(s,o,u,h),g&2048&&zc(9,o);break;case 1:Yi(s,o,u,h);break;case 3:Yi(s,o,u,h),g&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Ac(s)));break;case 12:if(g&2048){Yi(s,o,u,h),s=o.stateNode;try{var y=o.memoizedProps,P=y.id,U=y.onPostCommit;typeof U=="function"&&U(P,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Et(o,o.return,q)}}else Yi(s,o,u,h);break;case 13:Yi(s,o,u,h);break;case 23:break;case 22:y=o.stateNode,P=o.alternate,o.memoizedState!==null?y._visibility&2?Yi(s,o,u,h):qc(s,o):y._visibility&2?Yi(s,o,u,h):(y._visibility|=2,io(s,o,u,h,(o.subtreeFlags&10256)!==0)),g&2048&&Um(P,o);break;case 24:Yi(s,o,u,h),g&2048&&Lm(o.alternate,o);break;default:Yi(s,o,u,h)}}function io(s,o,u,h,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=s,P=o,U=u,q=h,ne=P.flags;switch(P.tag){case 0:case 11:case 15:io(y,P,U,q,g),zc(8,P);break;case 23:break;case 22:var he=P.stateNode;P.memoizedState!==null?he._visibility&2?io(y,P,U,q,g):qc(y,P):(he._visibility|=2,io(y,P,U,q,g)),g&&ne&2048&&Um(P.alternate,P);break;case 24:io(y,P,U,q,g),g&&ne&2048&&Lm(P.alternate,P);break;default:io(y,P,U,q,g)}o=o.sibling}}function qc(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,h=o,g=h.flags;switch(h.tag){case 22:qc(u,h),g&2048&&Um(h.alternate,h);break;case 24:qc(u,h),g&2048&&Lm(h.alternate,h);break;default:qc(u,h)}o=o.sibling}}var Kc=8192;function ro(s){if(s.subtreeFlags&Kc)for(s=s.child;s!==null;)qT(s),s=s.sibling}function qT(s){switch(s.tag){case 26:ro(s),s.flags&Kc&&s.memoizedState!==null&&SO(Ai,s.memoizedState,s.memoizedProps);break;case 5:ro(s);break;case 3:case 4:var o=Ai;Ai=md(s.stateNode.containerInfo),ro(s),Ai=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Kc,Kc=16777216,ro(s),Kc=o):ro(s));break;default:ro(s)}}function KT(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Gc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];bn=h,YT(h,s)}KT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)GT(s),s=s.sibling}function GT(s){switch(s.tag){case 0:case 11:case 15:Gc(s),s.flags&2048&&rs(9,s,s.return);break;case 3:Gc(s);break;case 12:Gc(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,nd(s)):Gc(s);break;default:Gc(s)}}function nd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];bn=h,YT(h,s)}KT(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:rs(8,o,o.return),nd(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,nd(o));break;default:nd(o)}s=s.sibling}}function YT(s,o){for(;bn!==null;){var u=bn;switch(u.tag){case 0:case 11:case 15:rs(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ac(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,bn=h;else e:for(u=s;bn!==null;){h=bn;var g=h.sibling,y=h.return;if(jT(h),h===u){bn=null;break e}if(g!==null){g.return=y,bn=g;break e}bn=y}}}var UM={getCacheForType:function(s){var o=Pn(fn),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u}},LM=typeof WeakMap=="function"?WeakMap:Map,yt=0,Pt=null,it=null,ct=0,bt=0,ei=null,os=!1,so=!1,jm=!1,Ar=0,Vt=0,cs=0,aa=0,Bm=0,yi=0,ao=0,Yc=null,zn=null,Fm=!1,Vm=0,id=1/0,rd=null,ls=null,kn=0,us=null,oo=null,co=0,zm=0,Hm=null,WT=null,Wc=0,qm=null;function ti(){if((yt&2)!==0&&ct!==0)return ct&-ct;if(Y.T!==null){var s=$a;return s!==0?s:Zm()}return qs()}function $T(){yi===0&&(yi=(ct&536870912)===0||gt?Ei():536870912);var s=vi.current;return s!==null&&(s.flags|=32),yi}function ni(s,o,u){(s===Pt&&(bt===2||bt===9)||s.cancelPendingCommit!==null)&&(lo(s,0),ds(s,ct,yi,!1)),$r(s,u),((yt&2)===0||s!==Pt)&&(s===Pt&&((yt&2)===0&&(aa|=u),Vt===4&&ds(s,ct,yi,!1)),Wi(s))}function XT(s,o,u){if((yt&6)!==0)throw Error(i(327));var h=!u&&(o&124)===0&&(o&s.expiredLanes)===0||vt(s,o),g=h?FM(s,o):Ym(s,o,!0),y=h;do{if(g===0){so&&!h&&ds(s,o,0,!1);break}else{if(u=s.current.alternate,y&&!jM(u)){g=Ym(s,o,!1),y=!1;continue}if(g===2){if(y=o,s.errorRecoveryDisabledLanes&y)var P=0;else P=s.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){o=P;e:{var U=s;g=Yc;var q=U.current.memoizedState.isDehydrated;if(q&&(lo(U,P).flags|=256),P=Ym(U,P,!1),P!==2){if(jm&&!q){U.errorRecoveryDisabledLanes|=y,aa|=y,g=4;break e}y=zn,zn=g,y!==null&&(zn===null?zn=y:zn.push.apply(zn,y))}g=P}if(y=!1,g!==2)continue}}if(g===1){lo(s,0),ds(s,o,0,!0);break}e:{switch(h=s,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ds(h,o,yi,!os);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(g=Vm+300-At(),10<g)){if(ds(h,o,yi,!os),ht(h,0,!0)!==0)break e;h.timeoutHandle=kx(ZT.bind(null,h,u,zn,rd,Fm,o,yi,aa,ao,os,y,2,-0,0),g);break e}ZT(h,u,zn,rd,Fm,o,yi,aa,ao,os,y,0,-0,0)}}break}while(!0);Wi(s)}function ZT(s,o,u,h,g,y,P,U,q,ne,he,Se,oe,ce){if(s.timeoutHandle=-1,Se=o.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(tl={stylesheets:null,count:0,unsuspend:bO},qT(o),Se=TO(),Se!==null)){s.cancelPendingCommit=Se(rx.bind(null,s,o,y,u,h,g,P,U,q,he,1,oe,ce)),ds(s,y,P,!ne);return}rx(s,o,y,u,h,g,P,U,q)}function jM(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var g=u[h],y=g.getSnapshot;g=g.value;try{if(!Xn(y(),g))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ds(s,o,u,h){o&=~Bm,o&=~aa,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var g=o;0<g;){var y=31-E(g),P=1<<y;h[y]=-1,g&=~P}u!==0&&$e(s,u,o)}function sd(){return(yt&6)===0?($c(0),!1):!0}function Km(){if(it!==null){if(bt===0)var s=it.return;else s=it,Sr=ea=null,cm(s),to=null,Bc=0,s=it;for(;s!==null;)PT(s.alternate,s),s=s.return;it=null}}function lo(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,nO(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Km(),Pt=s,it=u=vr(s.current,null),ct=o,bt=0,ei=null,os=!1,so=vt(s,o),jm=!1,ao=yi=Bm=aa=cs=Vt=0,zn=Yc=null,Fm=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var g=31-E(h),y=1<<g;o|=s[g],h&=~y}return Ar=o,Ru(),u}function JT(s,o){Qe=null,Y.H=Gu,o===Pc||o===Uu?(o=pS(),bt=3):o===fS?(o=pS(),bt=4):bt=o===gT?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ei=o,it===null&&(Vt=1,Zu(s,hi(o,s.current)))}function QT(){var s=Y.H;return Y.H=Gu,s===null?Gu:s}function ex(){var s=Y.A;return Y.A=UM,s}function Gm(){Vt=4,os||(ct&4194048)!==ct&&vi.current!==null||(so=!0),(cs&134217727)===0&&(aa&134217727)===0||Pt===null||ds(Pt,ct,yi,!1)}function Ym(s,o,u){var h=yt;yt|=2;var g=QT(),y=ex();(Pt!==s||ct!==o)&&(rd=null,lo(s,o)),o=!1;var P=Vt;e:do try{if(bt!==0&&it!==null){var U=it,q=ei;switch(bt){case 8:Km(),P=6;break e;case 3:case 2:case 9:case 6:vi.current===null&&(o=!0);var ne=bt;if(bt=0,ei=null,uo(s,U,q,ne),u&&so){P=0;break e}break;default:ne=bt,bt=0,ei=null,uo(s,U,q,ne)}}BM(),P=Vt;break}catch(he){JT(s,he)}while(!0);return o&&s.shellSuspendCounter++,Sr=ea=null,yt=h,Y.H=g,Y.A=y,it===null&&(Pt=null,ct=0,Ru()),P}function BM(){for(;it!==null;)tx(it)}function FM(s,o){var u=yt;yt|=2;var h=QT(),g=ex();Pt!==s||ct!==o?(rd=null,id=At()+500,lo(s,o)):so=vt(s,o);e:do try{if(bt!==0&&it!==null){o=it;var y=ei;t:switch(bt){case 1:bt=0,ei=null,uo(s,o,y,1);break;case 2:case 9:if(hS(y)){bt=0,ei=null,nx(o);break}o=function(){bt!==2&&bt!==9||Pt!==s||(bt=7),Wi(s)},y.then(o,o);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:hS(y)?(bt=0,ei=null,nx(o)):(bt=0,ei=null,uo(s,o,y,7));break;case 5:var P=null;switch(it.tag){case 26:P=it.memoizedState;case 5:case 27:var U=it;if(!P||Lx(P)){bt=0,ei=null;var q=U.sibling;if(q!==null)it=q;else{var ne=U.return;ne!==null?(it=ne,ad(ne)):it=null}break t}}bt=0,ei=null,uo(s,o,y,5);break;case 6:bt=0,ei=null,uo(s,o,y,6);break;case 8:Km(),Vt=6;break e;default:throw Error(i(462))}}VM();break}catch(he){JT(s,he)}while(!0);return Sr=ea=null,Y.H=h,Y.A=g,yt=u,it!==null?0:(Pt=null,ct=0,Ru(),Vt)}function VM(){for(;it!==null&&!ui();)tx(it)}function tx(s){var o=AT(s.alternate,s,Ar);s.memoizedProps=s.pendingProps,o===null?ad(s):it=o}function nx(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=xT(u,o,o.pendingProps,o.type,void 0,ct);break;case 11:o=xT(u,o,o.pendingProps,o.type.render,o.ref,ct);break;case 5:cm(o);default:PT(u,o),o=it=iS(o,Ar),o=AT(u,o,Ar)}s.memoizedProps=s.pendingProps,o===null?ad(s):it=o}function uo(s,o,u,h){Sr=ea=null,cm(o),to=null,Bc=0;var g=o.return;try{if(PM(s,g,o,u,ct)){Vt=1,Zu(s,hi(u,s.current)),it=null;return}}catch(y){if(g!==null)throw it=g,y;Vt=1,Zu(s,hi(u,s.current)),it=null;return}o.flags&32768?(gt||h===1?s=!0:so||(ct&536870912)!==0?s=!1:(os=s=!0,(h===2||h===9||h===3||h===6)&&(h=vi.current,h!==null&&h.tag===13&&(h.flags|=16384))),ix(o,s)):ad(o)}function ad(s){var o=s;do{if((o.flags&32768)!==0){ix(o,os);return}s=o.return;var u=NM(o.alternate,o,Ar);if(u!==null){it=u;return}if(o=o.sibling,o!==null){it=o;return}it=o=s}while(o!==null);Vt===0&&(Vt=5)}function ix(s,o){do{var u=MM(s.alternate,s);if(u!==null){u.flags&=32767,it=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){it=s;return}it=s=u}while(s!==null);Vt=6,it=null}function rx(s,o,u,h,g,y,P,U,q){s.cancelPendingCommit=null;do od();while(kn!==0);if((yt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(y=o.lanes|o.childLanes,y|=Lh,pu(s,u,y,P,U,q),s===Pt&&(it=Pt=null,ct=0),oo=o,us=s,co=u,zm=y,Hm=g,WT=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,KM(F,function(){return lx(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=Y.T,Y.T=null,g=se.p,se.p=2,P=yt,yt|=4;try{OM(s,o,u)}finally{yt=P,se.p=g,Y.T=h}}kn=1,sx(),ax(),ox()}}function sx(){if(kn===1){kn=0;var s=us,o=oo,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null;var h=se.p;se.p=2;var g=yt;yt|=4;try{VT(o,s);var y=sp,P=Yb(s.containerInfo),U=y.focusedElem,q=y.selectionRange;if(P!==U&&U&&U.ownerDocument&&Gb(U.ownerDocument.documentElement,U)){if(q!==null&&Nh(U)){var ne=q.start,he=q.end;if(he===void 0&&(he=ne),"selectionStart"in U)U.selectionStart=ne,U.selectionEnd=Math.min(he,U.value.length);else{var Se=U.ownerDocument||document,oe=Se&&Se.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),ze=U.textContent.length,Be=Math.min(q.start,ze),xt=q.end===void 0?Be:Math.min(q.end,ze);!ce.extend&&Be>xt&&(P=xt,xt=Be,Be=P);var Z=Kb(U,Be),W=Kb(U,xt);if(Z&&W&&(ce.rangeCount!==1||ce.anchorNode!==Z.node||ce.anchorOffset!==Z.offset||ce.focusNode!==W.node||ce.focusOffset!==W.offset)){var ee=Se.createRange();ee.setStart(Z.node,Z.offset),ce.removeAllRanges(),Be>xt?(ce.addRange(ee),ce.extend(W.node,W.offset)):(ee.setEnd(W.node,W.offset),ce.addRange(ee))}}}}for(Se=[],ce=U;ce=ce.parentNode;)ce.nodeType===1&&Se.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Se.length;U++){var ve=Se[U];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}bd=!!rp,sp=rp=null}finally{yt=g,se.p=h,Y.T=u}}s.current=o,kn=2}}function ax(){if(kn===2){kn=0;var s=us,o=oo,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=Y.T,Y.T=null;var h=se.p;se.p=2;var g=yt;yt|=4;try{LT(s,o.alternate,o)}finally{yt=g,se.p=h,Y.T=u}}kn=3}}function ox(){if(kn===4||kn===3){kn=0,On();var s=us,o=oo,u=co,h=WT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?kn=5:(kn=0,oo=us=null,cx(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(ls=null),wn(u),o=o.stateNode,M&&typeof M.onCommitFiberRoot=="function")try{M.onCommitFiberRoot(Je,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=Y.T,g=se.p,se.p=2,Y.T=null;try{for(var y=s.onRecoverableError,P=0;P<h.length;P++){var U=h[P];y(U.value,{componentStack:U.stack})}}finally{Y.T=o,se.p=g}}(co&3)!==0&&od(),Wi(s),g=s.pendingLanes,(u&4194090)!==0&&(g&42)!==0?s===qm?Wc++:(Wc=0,qm=s):Wc=0,$c(0)}}function cx(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Ac(o)))}function od(s){return sx(),ax(),ox(),lx()}function lx(){if(kn!==5)return!1;var s=us,o=zm;zm=0;var u=wn(co),h=Y.T,g=se.p;try{se.p=32>u?32:u,Y.T=null,u=Hm,Hm=null;var y=us,P=co;if(kn=0,oo=us=null,co=0,(yt&6)!==0)throw Error(i(331));var U=yt;if(yt|=4,GT(y.current),HT(y,y.current,P,u),yt=U,$c(0,!1),M&&typeof M.onPostCommitFiberRoot=="function")try{M.onPostCommitFiberRoot(Je,y)}catch{}return!0}finally{se.p=g,Y.T=h,cx(s,o)}}function ux(s,o,u){o=hi(u,o),o=xm(s.stateNode,o,2),s=es(s,o,2),s!==null&&($r(s,2),Wi(s))}function Et(s,o,u){if(s.tag===3)ux(s,s,u);else for(;o!==null;){if(o.tag===3){ux(o,s,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ls===null||!ls.has(h))){s=hi(u,s),u=mT(2),h=es(o,u,2),h!==null&&(pT(u,h,o,s),$r(h,2),Wi(h));break}}o=o.return}}function Wm(s,o,u){var h=s.pingCache;if(h===null){h=s.pingCache=new LM;var g=new Set;h.set(o,g)}else g=h.get(o),g===void 0&&(g=new Set,h.set(o,g));g.has(u)||(jm=!0,g.add(u),s=zM.bind(null,s,o,u),o.then(s,s))}function zM(s,o,u){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Pt===s&&(ct&u)===u&&(Vt===4||Vt===3&&(ct&62914560)===ct&&300>At()-Vm?(yt&2)===0&&lo(s,0):Bm|=u,ao===ct&&(ao=0)),Wi(s)}function dx(s,o){o===0&&(o=mu()),s=Ka(s,o),s!==null&&($r(s,o),Wi(s))}function HM(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),dx(s,u)}function qM(s,o){var u=0;switch(s.tag){case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(o),dx(s,u)}function KM(s,o){return kt(s,o)}var cd=null,fo=null,$m=!1,ld=!1,Xm=!1,oa=0;function Wi(s){s!==fo&&s.next===null&&(fo===null?cd=fo=s:fo=fo.next=s),ld=!0,$m||($m=!0,YM())}function $c(s,o){if(!Xm&&ld){Xm=!0;do for(var u=!1,h=cd;h!==null;){if(s!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var P=h.suspendedLanes,U=h.pingedLanes;y=(1<<31-E(42|s)+1)-1,y&=g&~(P&~U),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,px(h,y))}else y=ct,y=ht(h,h===Pt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||vt(h,y)||(u=!0,px(h,y));h=h.next}while(u);Xm=!1}}function GM(){fx()}function fx(){ld=$m=!1;var s=0;oa!==0&&(tO()&&(s=oa),oa=0);for(var o=At(),u=null,h=cd;h!==null;){var g=h.next,y=hx(h,o);y===0?(h.next=null,u===null?cd=g:u.next=g,g===null&&(fo=u)):(u=h,(s!==0||(y&3)!==0)&&(ld=!0)),h=g}$c(s)}function hx(s,o){for(var u=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var P=31-E(y),U=1<<P,q=g[P];q===-1?((U&u)===0||(U&h)!==0)&&(g[P]=dt(U,o)):q<=o&&(s.expiredLanes|=U),y&=~U}if(o=Pt,u=ct,u=ht(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===o&&(bt===2||bt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Lt(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||vt(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(h!==null&&Lt(h),wn(u)){case 2:case 8:u=_;break;case 32:u=F;break;case 268435456:u=pe;break;default:u=F}return h=mx.bind(null,s),u=kt(u,h),s.callbackPriority=o,s.callbackNode=u,o}return h!==null&&h!==null&&Lt(h),s.callbackPriority=2,s.callbackNode=null,2}function mx(s,o){if(kn!==0&&kn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(od()&&s.callbackNode!==u)return null;var h=ct;return h=ht(s,s===Pt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(XT(s,h,o),hx(s,At()),s.callbackNode!=null&&s.callbackNode===u?mx.bind(null,s):null)}function px(s,o){if(od())return null;XT(s,o,!0)}function YM(){iO(function(){(yt&6)!==0?kt(A,GM):fx()})}function Zm(){return oa===0&&(oa=Ei()),oa}function gx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Su(""+s)}function vx(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function WM(s,o,u,h,g){if(o==="submit"&&u&&u.stateNode===g){var y=gx((g[_t]||null).action),P=h.submitter;P&&(o=(o=P[_t]||null)?gx(o.formAction):P.getAttribute("formAction"),o!==null&&(y=o,P=null));var U=new Cu("action","action",null,h,g);s.push({event:U,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(oa!==0){var q=P?vx(g,P):new FormData(g);vm(u,{pending:!0,data:q,method:g.method,action:y},null,q)}}else typeof y=="function"&&(U.preventDefault(),q=P?vx(g,P):new FormData(g),vm(u,{pending:!0,data:q,method:g.method,action:y},y,q))},currentTarget:g}]})}}for(var Jm=0;Jm<Uh.length;Jm++){var Qm=Uh[Jm],$M=Qm.toLowerCase(),XM=Qm[0].toUpperCase()+Qm.slice(1);Ri($M,"on"+XM)}Ri(Xb,"onAnimationEnd"),Ri(Zb,"onAnimationIteration"),Ri(Jb,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(hM,"onTransitionRun"),Ri(mM,"onTransitionStart"),Ri(pM,"onTransitionCancel"),Ri(Qb,"onTransitionEnd"),Ia("onMouseEnter",["mouseout","mouseover"]),Ia("onMouseLeave",["mouseout","mouseover"]),Ia("onPointerEnter",["pointerout","pointerover"]),Ia("onPointerLeave",["pointerout","pointerover"]),Ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ks("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xc));function yx(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],g=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var P=h.length-1;0<=P;P--){var U=h[P],q=U.instance,ne=U.currentTarget;if(U=U.listener,q!==y&&g.isPropagationStopped())break e;y=U,g.currentTarget=ne;try{y(g)}catch(he){Xu(he)}g.currentTarget=null,y=q}else for(P=0;P<h.length;P++){if(U=h[P],q=U.instance,ne=U.currentTarget,U=U.listener,q!==y&&g.isPropagationStopped())break e;y=U,g.currentTarget=ne;try{y(g)}catch(he){Xu(he)}g.currentTarget=null,y=q}}}}function rt(s,o){var u=o[Da];u===void 0&&(u=o[Da]=new Set);var h=s+"__bubble";u.has(h)||(bx(o,s,2,!1),u.add(h))}function ep(s,o,u){var h=0;o&&(h|=4),bx(u,s,h,o)}var ud="_reactListening"+Math.random().toString(36).slice(2);function tp(s){if(!s[ud]){s[ud]=!0,fb.forEach(function(u){u!=="selectionchange"&&(ZM.has(u)||ep(u,!1,s),ep(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[ud]||(o[ud]=!0,ep("selectionchange",!1,o))}}function bx(s,o,u,h){switch(Hx(o)){case 2:var g=CO;break;case 8:g=kO;break;default:g=pp}u=g.bind(null,o,u,s),g=void 0,!wh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(o,u,{capture:!0,passive:g}):s.addEventListener(o,u,!0):g!==void 0?s.addEventListener(o,u,{passive:g}):s.addEventListener(o,u,!1)}function np(s,o,u,h,g){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var P=h.tag;if(P===3||P===4){var U=h.stateNode.containerInfo;if(U===g)break;if(P===4)for(P=h.return;P!==null;){var q=P.tag;if((q===3||q===4)&&P.stateNode.containerInfo===g)return;P=P.return}for(;U!==null;){if(P=Na(U),P===null)return;if(q=P.tag,q===5||q===6||q===26||q===27){h=y=P;continue e}U=U.parentNode}}h=h.return}Eb(function(){var ne=y,he=Th(u),Se=[];e:{var oe=eS.get(s);if(oe!==void 0){var ce=Cu,ze=s;switch(s){case"keypress":if(xu(u)===0)break e;case"keydown":case"keyup":ce=KN;break;case"focusin":ze="focus",ce=Rh;break;case"focusout":ze="blur",ce=Rh;break;case"beforeblur":case"afterblur":ce=Rh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=_b;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=MN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=WN;break;case Xb:case Zb:case Jb:ce=UN;break;case Qb:ce=XN;break;case"scroll":case"scrollend":ce=DN;break;case"wheel":ce=JN;break;case"copy":case"cut":case"paste":ce=jN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Db;break;case"toggle":case"beforetoggle":ce=eM}var Be=(o&4)!==0,xt=!Be&&(s==="scroll"||s==="scrollend"),Z=Be?oe!==null?oe+"Capture":null:oe;Be=[];for(var W=ne,ee;W!==null;){var ve=W;if(ee=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ee===null||Z===null||(ve=pc(W,Z),ve!=null&&Be.push(Zc(W,ve,ee))),xt)break;W=W.return}0<Be.length&&(oe=new ce(oe,ze,null,u,he),Se.push({event:oe,listeners:Be}))}}if((o&7)===0){e:{if(oe=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",oe&&u!==Sh&&(ze=u.relatedTarget||u.fromElement)&&(Na(ze)||ze[gn]))break e;if((ce||oe)&&(oe=he.window===he?he:(oe=he.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(ze=u.relatedTarget||u.toElement,ce=ne,ze=ze?Na(ze):null,ze!==null&&(xt=a(ze),Be=ze.tag,ze!==xt||Be!==5&&Be!==27&&Be!==6)&&(ze=null)):(ce=null,ze=ne),ce!==ze)){if(Be=_b,ve="onMouseLeave",Z="onMouseEnter",W="mouse",(s==="pointerout"||s==="pointerover")&&(Be=Db,ve="onPointerLeave",Z="onPointerEnter",W="pointer"),xt=ce==null?oe:mc(ce),ee=ze==null?oe:mc(ze),oe=new Be(ve,W+"leave",ce,u,he),oe.target=xt,oe.relatedTarget=ee,ve=null,Na(he)===ne&&(Be=new Be(Z,W+"enter",ze,u,he),Be.target=ee,Be.relatedTarget=xt,ve=Be),xt=ve,ce&&ze)t:{for(Be=ce,Z=ze,W=0,ee=Be;ee;ee=ho(ee))W++;for(ee=0,ve=Z;ve;ve=ho(ve))ee++;for(;0<W-ee;)Be=ho(Be),W--;for(;0<ee-W;)Z=ho(Z),ee--;for(;W--;){if(Be===Z||Z!==null&&Be===Z.alternate)break t;Be=ho(Be),Z=ho(Z)}Be=null}else Be=null;ce!==null&&Sx(Se,oe,ce,Be,!1),ze!==null&&xt!==null&&Sx(Se,xt,ze,Be,!0)}}e:{if(oe=ne?mc(ne):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Ie=Bb;else if(Lb(oe))if(Fb)Ie=uM;else{Ie=cM;var nt=oM}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ne&&bh(ne.elementType)&&(Ie=Bb):Ie=lM;if(Ie&&(Ie=Ie(s,ne))){jb(Se,Ie,u,he);break e}nt&&nt(s,oe,ne),s==="focusout"&&ne&&oe.type==="number"&&ne.memoizedProps.value!=null&&yh(oe,"number",oe.value)}switch(nt=ne?mc(ne):window,s){case"focusin":(Lb(nt)||nt.contentEditable==="true")&&(za=nt,Mh=ne,wc=null);break;case"focusout":wc=Mh=za=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,Wb(Se,u,he);break;case"selectionchange":if(fM)break;case"keydown":case"keyup":Wb(Se,u,he)}var je;if(_h)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Va?Ib(s,u)&&(Fe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Fe="onCompositionStart");Fe&&(Nb&&u.locale!=="ko"&&(Va||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Va&&(je=Rb()):(Xr=he,Ch="value"in Xr?Xr.value:Xr.textContent,Va=!0)),nt=dd(ne,Fe),0<nt.length&&(Fe=new Pb(Fe,s,null,u,he),Se.push({event:Fe,listeners:nt}),je?Fe.data=je:(je=Ub(u),je!==null&&(Fe.data=je)))),(je=nM?iM(s,u):rM(s,u))&&(Fe=dd(ne,"onBeforeInput"),0<Fe.length&&(nt=new Pb("onBeforeInput","beforeinput",null,u,he),Se.push({event:nt,listeners:Fe}),nt.data=je)),WM(Se,s,ne,u,he)}yx(Se,o)})}function Zc(s,o,u){return{instance:s,listener:o,currentTarget:u}}function dd(s,o){for(var u=o+"Capture",h=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=pc(s,u),g!=null&&h.unshift(Zc(s,g,y)),g=pc(s,o),g!=null&&h.push(Zc(s,g,y))),s.tag===3)return h;s=s.return}return[]}function ho(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Sx(s,o,u,h,g){for(var y=o._reactName,P=[];u!==null&&u!==h;){var U=u,q=U.alternate,ne=U.stateNode;if(U=U.tag,q!==null&&q===h)break;U!==5&&U!==26&&U!==27||ne===null||(q=ne,g?(ne=pc(u,y),ne!=null&&P.unshift(Zc(u,ne,q))):g||(ne=pc(u,y),ne!=null&&P.push(Zc(u,ne,q)))),u=u.return}P.length!==0&&s.push({event:o,listeners:P})}var JM=/\r\n?/g,QM=/\u0000|\uFFFD/g;function Tx(s){return(typeof s=="string"?s:""+s).replace(JM,`
`).replace(QM,"")}function xx(s,o){return o=Tx(o),Tx(s)===o}function fd(){}function Tt(s,o,u,h,g,y){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||ja(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&ja(s,""+h);break;case"className":vu(s,"class",h);break;case"tabIndex":vu(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":vu(s,u,h);break;case"style":Cb(s,h,y);break;case"data":if(o!=="object"){vu(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Su(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(o!=="input"&&Tt(s,o,"name",g.name,g,null),Tt(s,o,"formEncType",g.formEncType,g,null),Tt(s,o,"formMethod",g.formMethod,g,null),Tt(s,o,"formTarget",g.formTarget,g,null)):(Tt(s,o,"encType",g.encType,g,null),Tt(s,o,"method",g.method,g,null),Tt(s,o,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Su(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=fd);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Su(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":rt("beforetoggle",s),rt("toggle",s),gu(s,"popover",h);break;case"xlinkActuate":pr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":pr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":pr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":pr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":pr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":pr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":pr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":pr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":pr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gu(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=_N.get(u)||u,gu(s,u,h))}}function ip(s,o,u,h,g,y){switch(u){case"style":Cb(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?ja(s,h):(typeof h=="number"||typeof h=="bigint")&&ja(s,""+h);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=fd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hb.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),o=u.slice(2,g?u.length-7:void 0),y=s[_t]||null,y=y!=null?y[u]:null,typeof y=="function"&&s.removeEventListener(o,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,h,g);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):gu(s,u,h)}}}function En(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var h=!1,g=!1,y;for(y in u)if(u.hasOwnProperty(y)){var P=u[y];if(P!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Tt(s,o,y,P,u,null)}}g&&Tt(s,o,"srcSet",u.srcSet,u,null),h&&Tt(s,o,"src",u.src,u,null);return;case"input":rt("invalid",s);var U=y=P=g=null,q=null,ne=null;for(h in u)if(u.hasOwnProperty(h)){var he=u[h];if(he!=null)switch(h){case"name":g=he;break;case"type":P=he;break;case"checked":q=he;break;case"defaultChecked":ne=he;break;case"value":y=he;break;case"defaultValue":U=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,o));break;default:Tt(s,o,h,he,u,null)}}Sb(s,y,U,q,ne,P,g,!1),yu(s);return;case"select":rt("invalid",s),h=P=y=null;for(g in u)if(u.hasOwnProperty(g)&&(U=u[g],U!=null))switch(g){case"value":y=U;break;case"defaultValue":P=U;break;case"multiple":h=U;default:Tt(s,o,g,U,u,null)}o=y,u=P,s.multiple=!!h,o!=null?La(s,!!h,o,!1):u!=null&&La(s,!!h,u,!0);return;case"textarea":rt("invalid",s),y=g=h=null;for(P in u)if(u.hasOwnProperty(P)&&(U=u[P],U!=null))switch(P){case"value":h=U;break;case"defaultValue":g=U;break;case"children":y=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:Tt(s,o,P,U,u,null)}xb(s,h,g,y),yu(s);return;case"option":for(q in u)if(u.hasOwnProperty(q)&&(h=u[q],h!=null))switch(q){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Tt(s,o,q,h,u,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(h=0;h<Xc.length;h++)rt(Xc[h],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in u)if(u.hasOwnProperty(ne)&&(h=u[ne],h!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Tt(s,o,ne,h,u,null)}return;default:if(bh(o)){for(he in u)u.hasOwnProperty(he)&&(h=u[he],h!==void 0&&ip(s,o,he,h,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(h=u[U],h!=null&&Tt(s,o,U,h,u,null))}function eO(s,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,P=null,U=null,q=null,ne=null,he=null;for(ce in u){var Se=u[ce];if(u.hasOwnProperty(ce)&&Se!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":q=Se;default:h.hasOwnProperty(ce)||Tt(s,o,ce,null,h,Se)}}for(var oe in h){var ce=h[oe];if(Se=u[oe],h.hasOwnProperty(oe)&&(ce!=null||Se!=null))switch(oe){case"type":y=ce;break;case"name":g=ce;break;case"checked":ne=ce;break;case"defaultChecked":he=ce;break;case"value":P=ce;break;case"defaultValue":U=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,o));break;default:ce!==Se&&Tt(s,o,oe,ce,h,Se)}}vh(s,P,U,q,ne,he,y,g);return;case"select":ce=P=U=oe=null;for(y in u)if(q=u[y],u.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":ce=q;default:h.hasOwnProperty(y)||Tt(s,o,y,null,h,q)}for(g in h)if(y=h[g],q=u[g],h.hasOwnProperty(g)&&(y!=null||q!=null))switch(g){case"value":oe=y;break;case"defaultValue":U=y;break;case"multiple":P=y;default:y!==q&&Tt(s,o,g,y,h,q)}o=U,u=P,h=ce,oe!=null?La(s,!!u,oe,!1):!!h!=!!u&&(o!=null?La(s,!!u,o,!0):La(s,!!u,u?[]:"",!1));return;case"textarea":ce=oe=null;for(U in u)if(g=u[U],u.hasOwnProperty(U)&&g!=null&&!h.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:Tt(s,o,U,null,h,g)}for(P in h)if(g=h[P],y=u[P],h.hasOwnProperty(P)&&(g!=null||y!=null))switch(P){case"value":oe=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&Tt(s,o,P,g,h,y)}Tb(s,oe,ce);return;case"option":for(var ze in u)if(oe=u[ze],u.hasOwnProperty(ze)&&oe!=null&&!h.hasOwnProperty(ze))switch(ze){case"selected":s.selected=!1;break;default:Tt(s,o,ze,null,h,oe)}for(q in h)if(oe=h[q],ce=u[q],h.hasOwnProperty(q)&&oe!==ce&&(oe!=null||ce!=null))switch(q){case"selected":s.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Tt(s,o,q,oe,h,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in u)oe=u[Be],u.hasOwnProperty(Be)&&oe!=null&&!h.hasOwnProperty(Be)&&Tt(s,o,Be,null,h,oe);for(ne in h)if(oe=h[ne],ce=u[ne],h.hasOwnProperty(ne)&&oe!==ce&&(oe!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,o));break;default:Tt(s,o,ne,oe,h,ce)}return;default:if(bh(o)){for(var xt in u)oe=u[xt],u.hasOwnProperty(xt)&&oe!==void 0&&!h.hasOwnProperty(xt)&&ip(s,o,xt,void 0,h,oe);for(he in h)oe=h[he],ce=u[he],!h.hasOwnProperty(he)||oe===ce||oe===void 0&&ce===void 0||ip(s,o,he,oe,h,ce);return}}for(var Z in u)oe=u[Z],u.hasOwnProperty(Z)&&oe!=null&&!h.hasOwnProperty(Z)&&Tt(s,o,Z,null,h,oe);for(Se in h)oe=h[Se],ce=u[Se],!h.hasOwnProperty(Se)||oe===ce||oe==null&&ce==null||Tt(s,o,Se,oe,h,ce)}var rp=null,sp=null;function hd(s){return s.nodeType===9?s:s.ownerDocument}function wx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Cx(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function ap(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var op=null;function tO(){var s=window.event;return s&&s.type==="popstate"?s===op?!1:(op=s,!0):(op=null,!1)}var kx=typeof setTimeout=="function"?setTimeout:void 0,nO=typeof clearTimeout=="function"?clearTimeout:void 0,Ex=typeof Promise=="function"?Promise:void 0,iO=typeof queueMicrotask=="function"?queueMicrotask:typeof Ex<"u"?function(s){return Ex.resolve(null).then(s).catch(rO)}:kx;function rO(s){setTimeout(function(){throw s})}function fs(s){return s==="head"}function Rx(s,o){var u=o,h=0,g=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<h&&8>h){u=h;var P=s.ownerDocument;if(u&1&&Jc(P.documentElement),u&2&&Jc(P.body),u&4)for(u=P.head,Jc(u),P=u.firstChild;P;){var U=P.nextSibling,q=P.nodeName;P[hc]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&P.rel.toLowerCase()==="stylesheet"||u.removeChild(P),P=U}}if(g===0){s.removeChild(y),al(o);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:h=u.charCodeAt(0)-48;else h=0;u=y}while(u);al(o)}function cp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":cp(u),hh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function sO(s,o,u,h){for(;s.nodeType===1;){var g=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[hc])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=_i(s.nextSibling),s===null)break}return null}function aO(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=_i(s.nextSibling),s===null))return null;return s}function lp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function oO(s,o){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function _i(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var up=null;function Ax(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}function _x(s,o,u){switch(o=hd(u),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Jc(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);hh(s)}var bi=new Map,Px=new Set;function md(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _r=se.d;se.d={f:cO,r:lO,D:uO,C:dO,L:fO,m:hO,X:pO,S:mO,M:gO};function cO(){var s=_r.f(),o=sd();return s||o}function lO(s){var o=Ma(s);o!==null&&o.tag===5&&o.type==="form"?XS(o):_r.r(s)}var mo=typeof document>"u"?null:document;function Dx(s,o,u){var h=mo;if(h&&typeof o=="string"&&o){var g=fi(o);g='link[rel="'+s+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),Px.has(g)||(Px.add(g),s={rel:s,crossOrigin:u,href:o},h.querySelector(g)===null&&(o=h.createElement("link"),En(o,"link",s),vn(o),h.head.appendChild(o)))}}function uO(s){_r.D(s),Dx("dns-prefetch",s,null)}function dO(s,o){_r.C(s,o),Dx("preconnect",s,o)}function fO(s,o,u){_r.L(s,o,u);var h=mo;if(h&&s&&o){var g='link[rel="preload"][as="'+fi(o)+'"]';o==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+fi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+fi(u.imageSizes)+'"]')):g+='[href="'+fi(s)+'"]';var y=g;switch(o){case"style":y=po(s);break;case"script":y=go(s)}bi.has(y)||(s=m({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),bi.set(y,s),h.querySelector(g)!==null||o==="style"&&h.querySelector(Qc(y))||o==="script"&&h.querySelector(el(y))||(o=h.createElement("link"),En(o,"link",s),vn(o),h.head.appendChild(o)))}}function hO(s,o){_r.m(s,o);var u=mo;if(u&&s){var h=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+fi(h)+'"][href="'+fi(s)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=go(s)}if(!bi.has(y)&&(s=m({rel:"modulepreload",href:s},o),bi.set(y,s),u.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(el(y)))return}h=u.createElement("link"),En(h,"link",s),vn(h),u.head.appendChild(h)}}}function mO(s,o,u){_r.S(s,o,u);var h=mo;if(h&&s){var g=Oa(h).hoistableStyles,y=po(s);o=o||"default";var P=g.get(y);if(!P){var U={loading:0,preload:null};if(P=h.querySelector(Qc(y)))U.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":o},u),(u=bi.get(y))&&dp(s,u);var q=P=h.createElement("link");vn(q),En(q,"link",s),q._p=new Promise(function(ne,he){q.onload=ne,q.onerror=he}),q.addEventListener("load",function(){U.loading|=1}),q.addEventListener("error",function(){U.loading|=2}),U.loading|=4,pd(P,o,h)}P={type:"stylesheet",instance:P,count:1,state:U},g.set(y,P)}}}function pO(s,o){_r.X(s,o);var u=mo;if(u&&s){var h=Oa(u).hoistableScripts,g=go(s),y=h.get(g);y||(y=u.querySelector(el(g)),y||(s=m({src:s,async:!0},o),(o=bi.get(g))&&fp(s,o),y=u.createElement("script"),vn(y),En(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function gO(s,o){_r.M(s,o);var u=mo;if(u&&s){var h=Oa(u).hoistableScripts,g=go(s),y=h.get(g);y||(y=u.querySelector(el(g)),y||(s=m({src:s,async:!0,type:"module"},o),(o=bi.get(g))&&fp(s,o),y=u.createElement("script"),vn(y),En(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function Nx(s,o,u,h){var g=(g=Pe.current)?md(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=po(u.href),u=Oa(g).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=po(u.href);var y=Oa(g).hoistableStyles,P=y.get(s);if(P||(g=g.ownerDocument||g,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,P),(y=g.querySelector(Qc(s)))&&!y._p&&(P.instance=y,P.state.loading=5),bi.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},bi.set(s,u),y||vO(g,s,u,P.state))),o&&h===null)throw Error(i(528,""));return P}if(o&&h!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=go(u),u=Oa(g).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function po(s){return'href="'+fi(s)+'"'}function Qc(s){return'link[rel="stylesheet"]['+s+"]"}function Mx(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function vO(s,o,u,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),En(o,"link",u),vn(o),s.head.appendChild(o))}function go(s){return'[src="'+fi(s)+'"]'}function el(s){return"script[async]"+s}function Ox(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+fi(u.href)+'"]');if(h)return o.instance=h,vn(h),h;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),vn(h),En(h,"style",g),pd(h,u.precedence,s),o.instance=h;case"stylesheet":g=po(u.href);var y=s.querySelector(Qc(g));if(y)return o.state.loading|=4,o.instance=y,vn(y),y;h=Mx(u),(g=bi.get(g))&&dp(h,g),y=(s.ownerDocument||s).createElement("link"),vn(y);var P=y;return P._p=new Promise(function(U,q){P.onload=U,P.onerror=q}),En(y,"link",h),o.state.loading|=4,pd(y,u.precedence,s),o.instance=y;case"script":return y=go(u.src),(g=s.querySelector(el(y)))?(o.instance=g,vn(g),g):(h=u,(g=bi.get(y))&&(h=m({},u),fp(h,g)),s=s.ownerDocument||s,g=s.createElement("script"),vn(g),En(g,"link",h),s.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,pd(h,u.precedence,s));return o.instance}function pd(s,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,P=0;P<h.length;P++){var U=h[P];if(U.dataset.precedence===o)y=U;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function dp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function fp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var gd=null;function Ix(s,o,u){if(gd===null){var h=new Map,g=gd=new Map;g.set(u,h)}else g=gd,h=g.get(u),h||(h=new Map,g.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),g=0;g<u.length;g++){var y=u[g];if(!(y[hc]||y[$t]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var P=y.getAttribute(o)||"";P=s+P;var U=h.get(P);U?U.push(y):h.set(P,[y])}}return h}function Ux(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function yO(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Lx(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var tl=null;function bO(){}function SO(s,o,u){if(tl===null)throw Error(i(475));var h=tl;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=po(u.href),y=s.querySelector(Qc(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=vd.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=y,vn(y);return}y=s.ownerDocument||s,u=Mx(u),(g=bi.get(g))&&dp(u,g),y=y.createElement("link"),vn(y);var P=y;P._p=new Promise(function(U,q){P.onload=U,P.onerror=q}),En(y,"link",u),o.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=vd.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function TO(){if(tl===null)throw Error(i(475));var s=tl;return s.stylesheets&&s.count===0&&hp(s,s.stylesheets),0<s.count?function(o){var u=setTimeout(function(){if(s.stylesheets&&hp(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u)}}:null}function vd(){if(this.count--,this.count===0){if(this.stylesheets)hp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var yd=null;function hp(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,yd=new Map,o.forEach(xO,s),yd=null,vd.call(s))}function xO(s,o){if(!(o.state.loading&4)){var u=yd.get(s);if(u)var h=u.get(null);else{u=new Map,yd.set(s,u);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var P=g[y];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(u.set(P.dataset.precedence,P),h=P)}h&&u.set(null,h)}g=o.instance,P=g.getAttribute("data-precedence"),y=u.get(P)||h,y===h&&u.set(null,g),u.set(P,g),this.count++,h=vd.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),o.state.loading|=4}}var nl={$$typeof:O,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function wO(s,o,u,h,g,y,P,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.hiddenUpdates=fc(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function jx(s,o,u,h,g,y,P,U,q,ne,he,Se){return s=new wO(s,o,u,P,U,q,ne,Se),o=1,y===!0&&(o|=24),y=Zn(3,null,null,o),s.current=y,y.stateNode=s,o=Wh(),o.refCount++,s.pooledCache=o,o.refCount++,y.memoizedState={element:h,isDehydrated:u,cache:o},Jh(y),s}function Bx(s){return s?(s=Ga,s):Ga}function Fx(s,o,u,h,g,y){g=Bx(g),h.context===null?h.context=g:h.pendingContext=g,h=Qr(o),h.payload={element:u},y=y===void 0?null:y,y!==null&&(h.callback=y),u=es(s,h,o),u!==null&&(ni(u,s,o),Nc(u,s,o))}function Vx(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function mp(s,o){Vx(s,o),(s=s.alternate)&&Vx(s,o)}function zx(s){if(s.tag===13){var o=Ka(s,67108864);o!==null&&ni(o,s,67108864),mp(s,67108864)}}var bd=!0;function CO(s,o,u,h){var g=Y.T;Y.T=null;var y=se.p;try{se.p=2,pp(s,o,u,h)}finally{se.p=y,Y.T=g}}function kO(s,o,u,h){var g=Y.T;Y.T=null;var y=se.p;try{se.p=8,pp(s,o,u,h)}finally{se.p=y,Y.T=g}}function pp(s,o,u,h){if(bd){var g=gp(h);if(g===null)np(s,o,h,Sd,u),qx(s,h);else if(RO(g,s,o,u,h))h.stopPropagation();else if(qx(s,h),o&4&&-1<EO.indexOf(s)){for(;g!==null;){var y=Ma(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var P=ut(y.pendingLanes);if(P!==0){var U=y;for(U.pendingLanes|=2,U.entangledLanes|=2;P;){var q=1<<31-E(P);U.entanglements[1]|=q,P&=~q}Wi(y),(yt&6)===0&&(id=At()+500,$c(0))}}break;case 13:U=Ka(y,2),U!==null&&ni(U,y,2),sd(),mp(y,2)}if(y=gp(h),y===null&&np(s,o,h,Sd,u),y===g)break;g=y}g!==null&&h.stopPropagation()}else np(s,o,h,null,u)}}function gp(s){return s=Th(s),vp(s)}var Sd=null;function vp(s){if(Sd=null,s=Na(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=c(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Sd=s,null}function Hx(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(B()){case A:return 2;case _:return 8;case F:case X:return 32;case pe:return 268435456;default:return 32}default:return 32}}var yp=!1,hs=null,ms=null,ps=null,il=new Map,rl=new Map,gs=[],EO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function qx(s,o){switch(s){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":il.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(o.pointerId)}}function sl(s,o,u,h,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Ma(o),o!==null&&zx(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function RO(s,o,u,h,g){switch(o){case"focusin":return hs=sl(hs,s,o,u,h,g),!0;case"dragenter":return ms=sl(ms,s,o,u,h,g),!0;case"mouseover":return ps=sl(ps,s,o,u,h,g),!0;case"pointerover":var y=g.pointerId;return il.set(y,sl(il.get(y)||null,s,o,u,h,g)),!0;case"gotpointercapture":return y=g.pointerId,rl.set(y,sl(rl.get(y)||null,s,o,u,h,g)),!0}return!1}function Kx(s){var o=Na(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){s.blockedOn=o,dn(s.priority,function(){if(u.tag===13){var h=ti();h=nn(h);var g=Ka(u,h);g!==null&&ni(g,u,h),mp(u,h)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Td(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=gp(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);Sh=h,u.target.dispatchEvent(h),Sh=null}else return o=Ma(u),o!==null&&zx(o),s.blockedOn=u,!1;o.shift()}return!0}function Gx(s,o,u){Td(s)&&u.delete(o)}function AO(){yp=!1,hs!==null&&Td(hs)&&(hs=null),ms!==null&&Td(ms)&&(ms=null),ps!==null&&Td(ps)&&(ps=null),il.forEach(Gx),rl.forEach(Gx)}function xd(s,o){s.blockedOn===o&&(s.blockedOn=null,yp||(yp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,AO)))}var wd=null;function Yx(s){wd!==s&&(wd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wd===s&&(wd=null);for(var o=0;o<s.length;o+=3){var u=s[o],h=s[o+1],g=s[o+2];if(typeof h!="function"){if(vp(h||u)===null)continue;break}var y=Ma(u);y!==null&&(s.splice(o,3),o-=3,vm(y,{pending:!0,data:g,method:u.method,action:h},h,g))}}))}function al(s){function o(q){return xd(q,s)}hs!==null&&xd(hs,s),ms!==null&&xd(ms,s),ps!==null&&xd(ps,s),il.forEach(o),rl.forEach(o);for(var u=0;u<gs.length;u++){var h=gs[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<gs.length&&(u=gs[0],u.blockedOn===null);)Kx(u),u.blockedOn===null&&gs.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var g=u[h],y=u[h+1],P=g[_t]||null;if(typeof y=="function")P||Yx(u);else if(P){var U=null;if(y&&y.hasAttribute("formAction")){if(g=y,P=y[_t]||null)U=P.formAction;else if(vp(g)!==null)continue}else U=P.action;typeof U=="function"?u[h+1]=U:(u.splice(h,3),h-=3),Yx(u)}}}function bp(s){this._internalRoot=s}Cd.prototype.render=bp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,h=ti();Fx(u,h,s,o,null,null)},Cd.prototype.unmount=bp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Fx(s.current,2,null,s,null,null),sd(),o[gn]=null}};function Cd(s){this._internalRoot=s}Cd.prototype.unstable_scheduleHydration=function(s){if(s){var o=qs();s={blockedOn:null,target:s,priority:o};for(var u=0;u<gs.length&&o!==0&&o<gs[u].priority;u++);gs.splice(u,0,s),u===0&&Kx(s)}};var Wx=e.version;if(Wx!=="19.1.1")throw Error(i(527,Wx,"19.1.1"));se.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(o),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var _O={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{Je=kd.inject(_O),M=kd}catch{}}return cl.createRoot=function(s,o){if(!r(s))throw Error(i(299));var u=!1,h="",g=uT,y=dT,P=fT,U=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(U=o.unstable_transitionCallbacks)),o=jx(s,1,!1,null,null,u,h,g,y,P,U,null),s[gn]=o.current,tp(s),new bp(o)},cl.hydrateRoot=function(s,o,u){if(!r(s))throw Error(i(299));var h=!1,g="",y=uT,P=dT,U=fT,q=null,ne=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(P=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(q=u.unstable_transitionCallbacks),u.formState!==void 0&&(ne=u.formState)),o=jx(s,1,!0,o,u??null,h,g,y,P,U,q,ne),o.context=Bx(null),u=o.current,h=ti(),h=nn(h),g=Qr(h),g.callback=null,es(u,g,h),u=h,o.current.lanes=u,$r(o,u),Wi(o),s[gn]=o.current,tp(s),new Cd(o)},cl.version="19.1.1",cl}var r1;function BO(){if(r1)return xp.exports;r1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),xp.exports=jO(),xp.exports}var FO=BO(),Ep={},ll={},s1;function rE(){if(s1)return ll;s1=1,ll.byteLength=l,ll.toByteArray=f,ll.fromByteArray=v;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=i.length;r<a;++r)t[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function c(b){var w=b.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=b.indexOf("=");S===-1&&(S=w);var R=S===w?0:4-S%4;return[S,R]}function l(b){var w=c(b),S=w[0],R=w[1];return(S+R)*3/4-R}function d(b,w,S){return(w+S)*3/4-S}function f(b){var w,S=c(b),R=S[0],k=S[1],N=new n(d(b,R,k)),O=0,I=k>0?R-4:R,D;for(D=0;D<I;D+=4)w=e[b.charCodeAt(D)]<<18|e[b.charCodeAt(D+1)]<<12|e[b.charCodeAt(D+2)]<<6|e[b.charCodeAt(D+3)],N[O++]=w>>16&255,N[O++]=w>>8&255,N[O++]=w&255;return k===2&&(w=e[b.charCodeAt(D)]<<2|e[b.charCodeAt(D+1)]>>4,N[O++]=w&255),k===1&&(w=e[b.charCodeAt(D)]<<10|e[b.charCodeAt(D+1)]<<4|e[b.charCodeAt(D+2)]>>2,N[O++]=w>>8&255,N[O++]=w&255),N}function m(b){return t[b>>18&63]+t[b>>12&63]+t[b>>6&63]+t[b&63]}function p(b,w,S){for(var R,k=[],N=w;N<S;N+=3)R=(b[N]<<16&16711680)+(b[N+1]<<8&65280)+(b[N+2]&255),k.push(m(R));return k.join("")}function v(b){for(var w,S=b.length,R=S%3,k=[],N=16383,O=0,I=S-R;O<I;O+=N)k.push(p(b,O,O+N>I?I:O+N));return R===1?(w=b[S-1],k.push(t[w>>2]+t[w<<4&63]+"==")):R===2&&(w=(b[S-2]<<8)+b[S-1],k.push(t[w>>10]+t[w>>4&63]+t[w<<2&63]+"=")),k.join("")}return ll}var Ed={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var a1;function sE(){return a1||(a1=1,Ed.read=function(t,e,n,i,r){var a,c,l=r*8-i-1,d=(1<<l)-1,f=d>>1,m=-7,p=n?r-1:0,v=n?-1:1,b=t[e+p];for(p+=v,a=b&(1<<-m)-1,b>>=-m,m+=l;m>0;a=a*256+t[e+p],p+=v,m-=8);for(c=a&(1<<-m)-1,a>>=-m,m+=i;m>0;c=c*256+t[e+p],p+=v,m-=8);if(a===0)a=1-f;else{if(a===d)return c?NaN:(b?-1:1)*(1/0);c=c+Math.pow(2,i),a=a-f}return(b?-1:1)*c*Math.pow(2,a-i)},Ed.write=function(t,e,n,i,r,a){var c,l,d,f=a*8-r-1,m=(1<<f)-1,p=m>>1,v=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:a-1,w=i?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,c=m):(c=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-c))<1&&(c--,d*=2),c+p>=1?e+=v/d:e+=v*Math.pow(2,1-p),e*d>=2&&(c++,d/=2),c+p>=m?(l=0,c=m):c+p>=1?(l=(e*d-1)*Math.pow(2,r),c=c+p):(l=e*Math.pow(2,p-1)*Math.pow(2,r),c=0));r>=8;t[n+b]=l&255,b+=w,l/=256,r-=8);for(c=c<<r|l,f+=r;f>0;t[n+b]=c&255,b+=w,c/=256,f-=8);t[n+b-w]|=S*128}),Ed}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var o1;function VO(){return o1||(o1=1,function(t){const e=rE(),n=sE(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;const r=2147483647;t.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const M=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(M,C),M.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function c(M){if(M>r)throw new RangeError('The value "'+M+'" is invalid for option "size"');const C=new Uint8Array(M);return Object.setPrototypeOf(C,l.prototype),C}function l(M,C,E){if(typeof M=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(M)}return d(M,C,E)}l.poolSize=8192;function d(M,C,E){if(typeof M=="string")return v(M,C);if(ArrayBuffer.isView(M))return w(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if(X(M,ArrayBuffer)||M&&X(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(X(M,SharedArrayBuffer)||M&&X(M.buffer,SharedArrayBuffer)))return S(M,C,E);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=M.valueOf&&M.valueOf();if(L!=null&&L!==M)return l.from(L,C,E);const $=R(M);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return l.from(M[Symbol.toPrimitive]("string"),C,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}l.from=function(M,C,E){return d(M,C,E)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function f(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function m(M,C,E){return f(M),M<=0?c(M):C!==void 0?typeof E=="string"?c(M).fill(C,E):c(M).fill(C):c(M)}l.alloc=function(M,C,E){return m(M,C,E)};function p(M){return f(M),c(M<0?0:k(M)|0)}l.allocUnsafe=function(M){return p(M)},l.allocUnsafeSlow=function(M){return p(M)};function v(M,C){if((typeof C!="string"||C==="")&&(C="utf8"),!l.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const E=O(M,C)|0;let L=c(E);const $=L.write(M,C);return $!==E&&(L=L.slice(0,$)),L}function b(M){const C=M.length<0?0:k(M.length)|0,E=c(C);for(let L=0;L<C;L+=1)E[L]=M[L]&255;return E}function w(M){if(X(M,Uint8Array)){const C=new Uint8Array(M);return S(C.buffer,C.byteOffset,C.byteLength)}return b(M)}function S(M,C,E){if(C<0||M.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<C+(E||0))throw new RangeError('"length" is outside of buffer bounds');let L;return C===void 0&&E===void 0?L=new Uint8Array(M):E===void 0?L=new Uint8Array(M,C):L=new Uint8Array(M,C,E),Object.setPrototypeOf(L,l.prototype),L}function R(M){if(l.isBuffer(M)){const C=k(M.length)|0,E=c(C);return E.length===0||M.copy(E,0,0,C),E}if(M.length!==void 0)return typeof M.length!="number"||pe(M.length)?c(0):b(M);if(M.type==="Buffer"&&Array.isArray(M.data))return b(M.data)}function k(M){if(M>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return M|0}function N(M){return+M!=M&&(M=0),l.alloc(+M)}l.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==l.prototype},l.compare=function(C,E){if(X(C,Uint8Array)&&(C=l.from(C,C.offset,C.byteLength)),X(E,Uint8Array)&&(E=l.from(E,E.offset,E.byteLength)),!l.isBuffer(C)||!l.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===E)return 0;let L=C.length,$=E.length;for(let ae=0,ge=Math.min(L,$);ae<ge;++ae)if(C[ae]!==E[ae]){L=C[ae],$=E[ae];break}return L<$?-1:$<L?1:0},l.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(C,E){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return l.alloc(0);let L;if(E===void 0)for(E=0,L=0;L<C.length;++L)E+=C[L].length;const $=l.allocUnsafe(E);let ae=0;for(L=0;L<C.length;++L){let ge=C[L];if(X(ge,Uint8Array))ae+ge.length>$.length?(l.isBuffer(ge)||(ge=l.from(ge)),ge.copy($,ae)):Uint8Array.prototype.set.call($,ge,ae);else if(l.isBuffer(ge))ge.copy($,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=ge.length}return $};function O(M,C){if(l.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||X(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const E=M.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&E===0)return 0;let $=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return At(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return _(M).length;default:if($)return L?-1:At(M).length;C=(""+C).toLowerCase(),$=!0}}l.byteLength=O;function I(M,C,E){let L=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,C>>>=0,E<=C))return"";for(M||(M="utf8");;)switch(M){case"hex":return _e(this,C,E);case"utf8":case"utf-8":return Ae(this,C,E);case"ascii":return se(this,C,E);case"latin1":case"binary":return J(this,C,E);case"base64":return Ee(this,C,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,C,E);default:if(L)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),L=!0}}l.prototype._isBuffer=!0;function D(M,C,E){const L=M[C];M[C]=M[E],M[E]=L}l.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<C;E+=2)D(this,E,E+1);return this},l.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<C;E+=4)D(this,E,E+3),D(this,E+1,E+2);return this},l.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<C;E+=8)D(this,E,E+7),D(this,E+1,E+6),D(this,E+2,E+5),D(this,E+3,E+4);return this},l.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?Ae(this,0,C):I.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(C){if(!l.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:l.compare(this,C)===0},l.prototype.inspect=function(){let C="";const E=t.INSPECT_MAX_BYTES;return C=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(C+=" ... "),"<Buffer "+C+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(C,E,L,$,ae){if(X(C,Uint8Array)&&(C=l.from(C,C.offset,C.byteLength)),!l.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(E===void 0&&(E=0),L===void 0&&(L=C?C.length:0),$===void 0&&($=0),ae===void 0&&(ae=this.length),E<0||L>C.length||$<0||ae>this.length)throw new RangeError("out of range index");if($>=ae&&E>=L)return 0;if($>=ae)return-1;if(E>=L)return 1;if(E>>>=0,L>>>=0,$>>>=0,ae>>>=0,this===C)return 0;let ge=ae-$,We=L-E;const ut=Math.min(ge,We),ht=this.slice($,ae),vt=C.slice(E,L);for(let dt=0;dt<ut;++dt)if(ht[dt]!==vt[dt]){ge=ht[dt],We=vt[dt];break}return ge<We?-1:We<ge?1:0};function j(M,C,E,L,$){if(M.length===0)return-1;if(typeof E=="string"?(L=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,pe(E)&&(E=$?0:M.length-1),E<0&&(E=M.length+E),E>=M.length){if($)return-1;E=M.length-1}else if(E<0)if($)E=0;else return-1;if(typeof C=="string"&&(C=l.from(C,L)),l.isBuffer(C))return C.length===0?-1:H(M,C,E,L,$);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(M,C,E):Uint8Array.prototype.lastIndexOf.call(M,C,E):H(M,[C],E,L,$);throw new TypeError("val must be string, number or Buffer")}function H(M,C,E,L,$){let ae=1,ge=M.length,We=C.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(M.length<2||C.length<2)return-1;ae=2,ge/=2,We/=2,E/=2}function ut(vt,dt){return ae===1?vt[dt]:vt.readUInt16BE(dt*ae)}let ht;if($){let vt=-1;for(ht=E;ht<ge;ht++)if(ut(M,ht)===ut(C,vt===-1?0:ht-vt)){if(vt===-1&&(vt=ht),ht-vt+1===We)return vt*ae}else vt!==-1&&(ht-=ht-vt),vt=-1}else for(E+We>ge&&(E=ge-We),ht=E;ht>=0;ht--){let vt=!0;for(let dt=0;dt<We;dt++)if(ut(M,ht+dt)!==ut(C,dt)){vt=!1;break}if(vt)return ht}return-1}l.prototype.includes=function(C,E,L){return this.indexOf(C,E,L)!==-1},l.prototype.indexOf=function(C,E,L){return j(this,C,E,L,!0)},l.prototype.lastIndexOf=function(C,E,L){return j(this,C,E,L,!1)};function z(M,C,E,L){E=Number(E)||0;const $=M.length-E;L?(L=Number(L),L>$&&(L=$)):L=$;const ae=C.length;L>ae/2&&(L=ae/2);let ge;for(ge=0;ge<L;++ge){const We=parseInt(C.substr(ge*2,2),16);if(pe(We))return ge;M[E+ge]=We}return ge}function G(M,C,E,L){return F(At(C,M.length-E),M,E,L)}function ie(M,C,E,L){return F(B(C),M,E,L)}function re(M,C,E,L){return F(_(C),M,E,L)}function de(M,C,E,L){return F(A(C,M.length-E),M,E,L)}l.prototype.write=function(C,E,L,$){if(E===void 0)$="utf8",L=this.length,E=0;else if(L===void 0&&typeof E=="string")$=E,L=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(L)?(L=L>>>0,$===void 0&&($="utf8")):($=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-E;if((L===void 0||L>ae)&&(L=ae),C.length>0&&(L<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let ge=!1;for(;;)switch($){case"hex":return z(this,C,E,L);case"utf8":case"utf-8":return G(this,C,E,L);case"ascii":case"latin1":case"binary":return ie(this,C,E,L);case"base64":return re(this,C,E,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,C,E,L);default:if(ge)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),ge=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ee(M,C,E){return C===0&&E===M.length?e.fromByteArray(M):e.fromByteArray(M.slice(C,E))}function Ae(M,C,E){E=Math.min(M.length,E);const L=[];let $=C;for(;$<E;){const ae=M[$];let ge=null,We=ae>239?4:ae>223?3:ae>191?2:1;if($+We<=E){let ut,ht,vt,dt;switch(We){case 1:ae<128&&(ge=ae);break;case 2:ut=M[$+1],(ut&192)===128&&(dt=(ae&31)<<6|ut&63,dt>127&&(ge=dt));break;case 3:ut=M[$+1],ht=M[$+2],(ut&192)===128&&(ht&192)===128&&(dt=(ae&15)<<12|(ut&63)<<6|ht&63,dt>2047&&(dt<55296||dt>57343)&&(ge=dt));break;case 4:ut=M[$+1],ht=M[$+2],vt=M[$+3],(ut&192)===128&&(ht&192)===128&&(vt&192)===128&&(dt=(ae&15)<<18|(ut&63)<<12|(ht&63)<<6|vt&63,dt>65535&&dt<1114112&&(ge=dt))}}ge===null?(ge=65533,We=1):ge>65535&&(ge-=65536,L.push(ge>>>10&1023|55296),ge=56320|ge&1023),L.push(ge),$+=We}return Y(L)}const Me=4096;function Y(M){const C=M.length;if(C<=Me)return String.fromCharCode.apply(String,M);let E="",L=0;for(;L<C;)E+=String.fromCharCode.apply(String,M.slice(L,L+=Me));return E}function se(M,C,E){let L="";E=Math.min(M.length,E);for(let $=C;$<E;++$)L+=String.fromCharCode(M[$]&127);return L}function J(M,C,E){let L="";E=Math.min(M.length,E);for(let $=C;$<E;++$)L+=String.fromCharCode(M[$]);return L}function _e(M,C,E){const L=M.length;(!C||C<0)&&(C=0),(!E||E<0||E>L)&&(E=L);let $="";for(let ae=C;ae<E;++ae)$+=we[M[ae]];return $}function V(M,C,E){const L=M.slice(C,E);let $="";for(let ae=0;ae<L.length-1;ae+=2)$+=String.fromCharCode(L[ae]+L[ae+1]*256);return $}l.prototype.slice=function(C,E){const L=this.length;C=~~C,E=E===void 0?L:~~E,C<0?(C+=L,C<0&&(C=0)):C>L&&(C=L),E<0?(E+=L,E<0&&(E=0)):E>L&&(E=L),E<C&&(E=C);const $=this.subarray(C,E);return Object.setPrototypeOf($,l.prototype),$};function Q(M,C,E){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+C>E)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(C,E,L){C=C>>>0,E=E>>>0,L||Q(C,E,this.length);let $=this[C],ae=1,ge=0;for(;++ge<E&&(ae*=256);)$+=this[C+ge]*ae;return $},l.prototype.readUintBE=l.prototype.readUIntBE=function(C,E,L){C=C>>>0,E=E>>>0,L||Q(C,E,this.length);let $=this[C+--E],ae=1;for(;E>0&&(ae*=256);)$+=this[C+--E]*ae;return $},l.prototype.readUint8=l.prototype.readUInt8=function(C,E){return C=C>>>0,E||Q(C,1,this.length),this[C]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(C,E){return C=C>>>0,E||Q(C,2,this.length),this[C]|this[C+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(C,E){return C=C>>>0,E||Q(C,2,this.length),this[C]<<8|this[C+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(C,E){return C=C>>>0,E||Q(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(C,E){return C=C>>>0,E||Q(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},l.prototype.readBigUInt64LE=Ke(function(C){C=C>>>0,kt(C,"offset");const E=this[C],L=this[C+7];(E===void 0||L===void 0)&&Lt(C,this.length-8);const $=E+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,ae=this[++C]+this[++C]*2**8+this[++C]*2**16+L*2**24;return BigInt($)+(BigInt(ae)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ke(function(C){C=C>>>0,kt(C,"offset");const E=this[C],L=this[C+7];(E===void 0||L===void 0)&&Lt(C,this.length-8);const $=E*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],ae=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+L;return(BigInt($)<<BigInt(32))+BigInt(ae)}),l.prototype.readIntLE=function(C,E,L){C=C>>>0,E=E>>>0,L||Q(C,E,this.length);let $=this[C],ae=1,ge=0;for(;++ge<E&&(ae*=256);)$+=this[C+ge]*ae;return ae*=128,$>=ae&&($-=Math.pow(2,8*E)),$},l.prototype.readIntBE=function(C,E,L){C=C>>>0,E=E>>>0,L||Q(C,E,this.length);let $=E,ae=1,ge=this[C+--$];for(;$>0&&(ae*=256);)ge+=this[C+--$]*ae;return ae*=128,ge>=ae&&(ge-=Math.pow(2,8*E)),ge},l.prototype.readInt8=function(C,E){return C=C>>>0,E||Q(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},l.prototype.readInt16LE=function(C,E){C=C>>>0,E||Q(C,2,this.length);const L=this[C]|this[C+1]<<8;return L&32768?L|4294901760:L},l.prototype.readInt16BE=function(C,E){C=C>>>0,E||Q(C,2,this.length);const L=this[C+1]|this[C]<<8;return L&32768?L|4294901760:L},l.prototype.readInt32LE=function(C,E){return C=C>>>0,E||Q(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},l.prototype.readInt32BE=function(C,E){return C=C>>>0,E||Q(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},l.prototype.readBigInt64LE=Ke(function(C){C=C>>>0,kt(C,"offset");const E=this[C],L=this[C+7];(E===void 0||L===void 0)&&Lt(C,this.length-8);const $=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(L<<24);return(BigInt($)<<BigInt(32))+BigInt(E+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),l.prototype.readBigInt64BE=Ke(function(C){C=C>>>0,kt(C,"offset");const E=this[C],L=this[C+7];(E===void 0||L===void 0)&&Lt(C,this.length-8);const $=(E<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt($)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+L)}),l.prototype.readFloatLE=function(C,E){return C=C>>>0,E||Q(C,4,this.length),n.read(this,C,!0,23,4)},l.prototype.readFloatBE=function(C,E){return C=C>>>0,E||Q(C,4,this.length),n.read(this,C,!1,23,4)},l.prototype.readDoubleLE=function(C,E){return C=C>>>0,E||Q(C,8,this.length),n.read(this,C,!0,52,8)},l.prototype.readDoubleBE=function(C,E){return C=C>>>0,E||Q(C,8,this.length),n.read(this,C,!1,52,8)};function me(M,C,E,L,$,ae){if(!l.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>$||C<ae)throw new RangeError('"value" argument is out of bounds');if(E+L>M.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(C,E,L,$){if(C=+C,E=E>>>0,L=L>>>0,!$){const We=Math.pow(2,8*L)-1;me(this,C,E,L,We,0)}let ae=1,ge=0;for(this[E]=C&255;++ge<L&&(ae*=256);)this[E+ge]=C/ae&255;return E+L},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(C,E,L,$){if(C=+C,E=E>>>0,L=L>>>0,!$){const We=Math.pow(2,8*L)-1;me(this,C,E,L,We,0)}let ae=L-1,ge=1;for(this[E+ae]=C&255;--ae>=0&&(ge*=256);)this[E+ae]=C/ge&255;return E+L},l.prototype.writeUint8=l.prototype.writeUInt8=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,1,255,0),this[E]=C&255,E+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,2,65535,0),this[E]=C&255,this[E+1]=C>>>8,E+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,2,65535,0),this[E]=C>>>8,this[E+1]=C&255,E+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,4,4294967295,0),this[E+3]=C>>>24,this[E+2]=C>>>16,this[E+1]=C>>>8,this[E]=C&255,E+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,4,4294967295,0),this[E]=C>>>24,this[E+1]=C>>>16,this[E+2]=C>>>8,this[E+3]=C&255,E+4};function le(M,C,E,L,$){Ye(C,L,$,M,E,7);let ae=Number(C&BigInt(4294967295));M[E++]=ae,ae=ae>>8,M[E++]=ae,ae=ae>>8,M[E++]=ae,ae=ae>>8,M[E++]=ae;let ge=Number(C>>BigInt(32)&BigInt(4294967295));return M[E++]=ge,ge=ge>>8,M[E++]=ge,ge=ge>>8,M[E++]=ge,ge=ge>>8,M[E++]=ge,E}function Te(M,C,E,L,$){Ye(C,L,$,M,E,7);let ae=Number(C&BigInt(4294967295));M[E+7]=ae,ae=ae>>8,M[E+6]=ae,ae=ae>>8,M[E+5]=ae,ae=ae>>8,M[E+4]=ae;let ge=Number(C>>BigInt(32)&BigInt(4294967295));return M[E+3]=ge,ge=ge>>8,M[E+2]=ge,ge=ge>>8,M[E+1]=ge,ge=ge>>8,M[E]=ge,E+8}l.prototype.writeBigUInt64LE=Ke(function(C,E=0){return le(this,C,E,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ke(function(C,E=0){return Te(this,C,E,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(C,E,L,$){if(C=+C,E=E>>>0,!$){const ut=Math.pow(2,8*L-1);me(this,C,E,L,ut-1,-ut)}let ae=0,ge=1,We=0;for(this[E]=C&255;++ae<L&&(ge*=256);)C<0&&We===0&&this[E+ae-1]!==0&&(We=1),this[E+ae]=(C/ge>>0)-We&255;return E+L},l.prototype.writeIntBE=function(C,E,L,$){if(C=+C,E=E>>>0,!$){const ut=Math.pow(2,8*L-1);me(this,C,E,L,ut-1,-ut)}let ae=L-1,ge=1,We=0;for(this[E+ae]=C&255;--ae>=0&&(ge*=256);)C<0&&We===0&&this[E+ae+1]!==0&&(We=1),this[E+ae]=(C/ge>>0)-We&255;return E+L},l.prototype.writeInt8=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,1,127,-128),C<0&&(C=255+C+1),this[E]=C&255,E+1},l.prototype.writeInt16LE=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,2,32767,-32768),this[E]=C&255,this[E+1]=C>>>8,E+2},l.prototype.writeInt16BE=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,2,32767,-32768),this[E]=C>>>8,this[E+1]=C&255,E+2},l.prototype.writeInt32LE=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,4,2147483647,-2147483648),this[E]=C&255,this[E+1]=C>>>8,this[E+2]=C>>>16,this[E+3]=C>>>24,E+4},l.prototype.writeInt32BE=function(C,E,L){return C=+C,E=E>>>0,L||me(this,C,E,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[E]=C>>>24,this[E+1]=C>>>16,this[E+2]=C>>>8,this[E+3]=C&255,E+4},l.prototype.writeBigInt64LE=Ke(function(C,E=0){return le(this,C,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ke(function(C,E=0){return Te(this,C,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(M,C,E,L,$,ae){if(E+L>M.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Pe(M,C,E,L,$){return C=+C,E=E>>>0,$||Ne(M,C,E,4),n.write(M,C,E,L,23,4),E+4}l.prototype.writeFloatLE=function(C,E,L){return Pe(this,C,E,!0,L)},l.prototype.writeFloatBE=function(C,E,L){return Pe(this,C,E,!1,L)};function be(M,C,E,L,$){return C=+C,E=E>>>0,$||Ne(M,C,E,8),n.write(M,C,E,L,52,8),E+8}l.prototype.writeDoubleLE=function(C,E,L){return be(this,C,E,!0,L)},l.prototype.writeDoubleBE=function(C,E,L){return be(this,C,E,!1,L)},l.prototype.copy=function(C,E,L,$){if(!l.isBuffer(C))throw new TypeError("argument should be a Buffer");if(L||(L=0),!$&&$!==0&&($=this.length),E>=C.length&&(E=C.length),E||(E=0),$>0&&$<L&&($=L),$===L||C.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),C.length-E<$-L&&($=C.length-E+L);const ae=$-L;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,L,$):Uint8Array.prototype.set.call(C,this.subarray(L,$),E),ae},l.prototype.fill=function(C,E,L,$){if(typeof C=="string"){if(typeof E=="string"?($=E,E=0,L=this.length):typeof L=="string"&&($=L,L=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!l.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(C.length===1){const ge=C.charCodeAt(0);($==="utf8"&&ge<128||$==="latin1")&&(C=ge)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(E<0||this.length<E||this.length<L)throw new RangeError("Out of range index");if(L<=E)return this;E=E>>>0,L=L===void 0?this.length:L>>>0,C||(C=0);let ae;if(typeof C=="number")for(ae=E;ae<L;++ae)this[ae]=C;else{const ge=l.isBuffer(C)?C:l.from(C,$),We=ge.length;if(We===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(ae=0;ae<L-E;++ae)this[ae+E]=ge[ae%We]}return this};const Ce={};function Ve(M,C,E){Ce[M]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}Ve("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ve("ERR_INVALID_ARG_TYPE",function(M,C){return`The "${M}" argument must be of type number. Received type ${typeof C}`},TypeError),Ve("ERR_OUT_OF_RANGE",function(M,C,E){let L=`The value of "${M}" is out of range.`,$=E;return Number.isInteger(E)&&Math.abs(E)>2**32?$=qe(String(E)):typeof E=="bigint"&&($=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&($=qe($)),$+="n"),L+=` It must be ${C}. Received ${$}`,L},RangeError);function qe(M){let C="",E=M.length;const L=M[0]==="-"?1:0;for(;E>=L+4;E-=3)C=`_${M.slice(E-3,E)}${C}`;return`${M.slice(0,E)}${C}`}function Xe(M,C,E){kt(C,"offset"),(M[C]===void 0||M[C+E]===void 0)&&Lt(C,M.length-(E+1))}function Ye(M,C,E,L,$,ae){if(M>E||M<C){const ge=typeof C=="bigint"?"n":"";let We;throw C===0||C===BigInt(0)?We=`>= 0${ge} and < 2${ge} ** ${(ae+1)*8}${ge}`:We=`>= -(2${ge} ** ${(ae+1)*8-1}${ge}) and < 2 ** ${(ae+1)*8-1}${ge}`,new Ce.ERR_OUT_OF_RANGE("value",We,M)}Xe(L,$,ae)}function kt(M,C){if(typeof M!="number")throw new Ce.ERR_INVALID_ARG_TYPE(C,"number",M)}function Lt(M,C,E){throw Math.floor(M)!==M?(kt(M,E),new Ce.ERR_OUT_OF_RANGE("offset","an integer",M)):C<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${C}`,M)}const ui=/[^+/0-9A-Za-z-_]/g;function On(M){if(M=M.split("=")[0],M=M.trim().replace(ui,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function At(M,C){C=C||1/0;let E;const L=M.length;let $=null;const ae=[];for(let ge=0;ge<L;++ge){if(E=M.charCodeAt(ge),E>55295&&E<57344){if(!$){if(E>56319){(C-=3)>-1&&ae.push(239,191,189);continue}else if(ge+1===L){(C-=3)>-1&&ae.push(239,191,189);continue}$=E;continue}if(E<56320){(C-=3)>-1&&ae.push(239,191,189),$=E;continue}E=($-55296<<10|E-56320)+65536}else $&&(C-=3)>-1&&ae.push(239,191,189);if($=null,E<128){if((C-=1)<0)break;ae.push(E)}else if(E<2048){if((C-=2)<0)break;ae.push(E>>6|192,E&63|128)}else if(E<65536){if((C-=3)<0)break;ae.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((C-=4)<0)break;ae.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return ae}function B(M){const C=[];for(let E=0;E<M.length;++E)C.push(M.charCodeAt(E)&255);return C}function A(M,C){let E,L,$;const ae=[];for(let ge=0;ge<M.length&&!((C-=2)<0);++ge)E=M.charCodeAt(ge),L=E>>8,$=E%256,ae.push($),ae.push(L);return ae}function _(M){return e.toByteArray(On(M))}function F(M,C,E,L){let $;for($=0;$<L&&!($+E>=C.length||$>=M.length);++$)C[$+E]=M[$];return $}function X(M,C){return M instanceof C||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===C.name}function pe(M){return M!==M}const we=function(){const M="0123456789abcdef",C=new Array(256);for(let E=0;E<16;++E){const L=E*16;for(let $=0;$<16;++$)C[L+$]=M[E]+M[$]}return C}();function Ke(M){return typeof BigInt>"u"?Je:M}function Je(){throw new Error("BigInt not supported")}}(Ep)),Ep}var zO=VO();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var c1="popstate";function HO(t={}){function e(i,r){let{pathname:a,search:c,hash:l}=i.location;return Lg("",{pathname:a,search:c,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Fl(r)}return KO(e,n,null,t)}function Ut(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ki(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qO(){return Math.random().toString(36).substring(2,10)}function l1(t,e){return{usr:t.state,key:t.key,idx:e}}function Lg(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jo(e):e,state:n,key:e&&e.key||i||qO()}}function Fl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Jo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function KO(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,c=r.history,l="POP",d=null,f=m();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function m(){return(c.state||{idx:null}).idx}function p(){l="POP";let R=m(),k=R==null?null:R-f;f=R,d&&d({action:l,location:S.location,delta:k})}function v(R,k){l="PUSH";let N=Lg(S.location,R,k);f=m()+1;let O=l1(N,f),I=S.createHref(N);try{c.pushState(O,"",I)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(I)}a&&d&&d({action:l,location:S.location,delta:1})}function b(R,k){l="REPLACE";let N=Lg(S.location,R,k);f=m();let O=l1(N,f),I=S.createHref(N);c.replaceState(O,"",I),a&&d&&d({action:l,location:S.location,delta:0})}function w(R){return GO(R)}let S={get action(){return l},get location(){return t(r,c)},listen(R){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(c1,p),d=R,()=>{r.removeEventListener(c1,p),d=null}},createHref(R){return e(r,R)},createURL:w,encodeLocation(R){let k=w(R);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:v,replace:b,go(R){return c.go(R)}};return S}function GO(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ut(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Fl(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function aE(t,e,n="/"){return YO(t,e,n,!1)}function YO(t,e,n,i){let r=typeof e=="string"?Jo(e):e,a=Br(r.pathname||"/",n);if(a==null)return null;let c=oE(t);WO(c);let l=null;for(let d=0;l==null&&d<c.length;++d){let f=sI(a);l=iI(c[d],f,i)}return l}function oE(t,e=[],n=[],i=""){let r=(a,c,l)=>{let d={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(Ut(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let f=jr([i,d.relativePath]),m=n.concat(d);a.children&&a.children.length>0&&(Ut(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),oE(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:tI(f,a.index),routesMeta:m})};return t.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))r(a,c);else for(let l of cE(a.path))r(a,c,l)}),e}function cE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let c=cE(i.join("/")),l=[];return l.push(...c.map(d=>d===""?a:[a,d].join("/"))),r&&l.push(...c),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function WO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var $O=/^:[\w-]+$/,XO=3,ZO=2,JO=1,QO=10,eI=-2,u1=t=>t==="*";function tI(t,e){let n=t.split("/"),i=n.length;return n.some(u1)&&(i+=eI),e&&(i+=ZO),n.filter(r=>!u1(r)).reduce((r,a)=>r+($O.test(a)?XO:a===""?JO:QO),i)}function nI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function iI(t,e,n=!1){let{routesMeta:i}=t,r={},a="/",c=[];for(let l=0;l<i.length;++l){let d=i[l],f=l===i.length-1,m=a==="/"?e:e.slice(a.length)||"/",p=yf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),v=d.route;if(!p&&f&&n&&!i[i.length-1].route.index&&(p=yf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!p)return null;Object.assign(r,p.params),c.push({params:r,pathname:jr([a,p.pathname]),pathnameBase:lI(jr([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=jr([a,p.pathnameBase]))}return c}function yf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=rI(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],c=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((f,{paramName:m,isOptional:p},v)=>{if(m==="*"){let w=l[v]||"";c=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=l[v];return p&&!b?f[m]=void 0:f[m]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function rI(t,e=!1,n=!0){ki(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,l,d)=>(i.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function sI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ki(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Br(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function aI(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Jo(t):t;return{pathname:n?n.startsWith("/")?n:oI(n,e):e,search:uI(i),hash:dI(r)}}function oI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Rp(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function C0(t){let e=cI(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function k0(t,e,n,i=!1){let r;typeof t=="string"?r=Jo(t):(r={...t},Ut(!r.pathname||!r.pathname.includes("?"),Rp("?","pathname","search",r)),Ut(!r.pathname||!r.pathname.includes("#"),Rp("#","pathname","hash",r)),Ut(!r.search||!r.search.includes("#"),Rp("#","search","hash",r)));let a=t===""||r.pathname==="",c=a?"/":r.pathname,l;if(c==null)l=n;else{let p=e.length-1;if(!i&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),p-=1;r.pathname=v.join("/")}l=p>=0?e[p]:"/"}let d=aI(r,l),f=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var jr=t=>t.join("/").replace(/\/\/+/g,"/"),lI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,dI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function fI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var lE=["POST","PUT","PATCH","DELETE"];new Set(lE);var hI=["GET",...lE];new Set(hI);var Qo=T.createContext(null);Qo.displayName="DataRouter";var Hf=T.createContext(null);Hf.displayName="DataRouterState";T.createContext(!1);var uE=T.createContext({isTransitioning:!1});uE.displayName="ViewTransition";var mI=T.createContext(new Map);mI.displayName="Fetchers";var pI=T.createContext(null);pI.displayName="Await";var zi=T.createContext(null);zi.displayName="Navigation";var iu=T.createContext(null);iu.displayName="Location";var lr=T.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var E0=T.createContext(null);E0.displayName="RouteError";function gI(t,{relative:e}={}){Ut(ec(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=T.useContext(zi),{hash:r,pathname:a,search:c}=ru(t,{relative:e}),l=a;return n!=="/"&&(l=a==="/"?n:jr([n,a])),i.createHref({pathname:l,search:c,hash:r})}function ec(){return T.useContext(iu)!=null}function Hi(){return Ut(ec(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(iu).location}var dE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fE(t){T.useContext(zi).static||T.useLayoutEffect(t)}function Ls(){let{isDataRoute:t}=T.useContext(lr);return t?_I():vI()}function vI(){Ut(ec(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(Qo),{basename:e,navigator:n}=T.useContext(zi),{matches:i}=T.useContext(lr),{pathname:r}=Hi(),a=JSON.stringify(C0(i)),c=T.useRef(!1);return fE(()=>{c.current=!0}),T.useCallback((d,f={})=>{if(ki(c.current,dE),!c.current)return;if(typeof d=="number"){n.go(d);return}let m=k0(d,JSON.parse(a),r,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:jr([e,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[e,n,a,r,t])}T.createContext(null);function ru(t,{relative:e}={}){let{matches:n}=T.useContext(lr),{pathname:i}=Hi(),r=JSON.stringify(C0(n));return T.useMemo(()=>k0(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function yI(t,e){return hE(t,e)}function hE(t,e,n,i){Ut(ec(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=T.useContext(zi),{matches:a}=T.useContext(lr),c=a[a.length-1],l=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let k=m&&m.path||"";mE(d,!m||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let p=Hi(),v;if(e){let k=typeof e=="string"?Jo(e):e;Ut(f==="/"||k.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${k.pathname}" was given in the \`location\` prop.`),v=k}else v=p;let b=v.pathname||"/",w=b;if(f!=="/"){let k=f.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=aE(t,{pathname:w});ki(m||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),ki(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=wI(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:jr([f,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:jr([f,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,i);return e&&R?T.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},R):R}function bI(){let t=AI(),e=fI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:r},n):null,c)}var SI=T.createElement(bI,null),TI=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?T.createElement(lr.Provider,{value:this.props.routeContext},T.createElement(E0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xI({routeContext:t,match:e,children:n}){let i=T.useContext(Qo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(lr.Provider,{value:t},n)}function wI(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,a=n?.errors;if(a!=null){let d=r.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);Ut(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let c=!1,l=-1;if(n)for(let d=0;d<r.length;d++){let f=r[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=d),f.route.id){let{loaderData:m,errors:p}=n,v=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){c=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((d,f,m)=>{let p,v=!1,b=null,w=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||SI,c&&(l<0&&m===0?(mE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):l===m&&(v=!0,w=f.route.hydrateFallbackElement||null)));let S=e.concat(r.slice(0,m+1)),R=()=>{let k;return p?k=b:v?k=w:f.route.Component?k=T.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=d,T.createElement(xI,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:k})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?T.createElement(TI,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:R(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):R()},null)}function R0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CI(t){let e=T.useContext(Qo);return Ut(e,R0(t)),e}function kI(t){let e=T.useContext(Hf);return Ut(e,R0(t)),e}function EI(t){let e=T.useContext(lr);return Ut(e,R0(t)),e}function A0(t){let e=EI(t),n=e.matches[e.matches.length-1];return Ut(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function RI(){return A0("useRouteId")}function AI(){let t=T.useContext(E0),e=kI("useRouteError"),n=A0("useRouteError");return t!==void 0?t:e.errors?.[n]}function _I(){let{router:t}=CI("useNavigate"),e=A0("useNavigate"),n=T.useRef(!1);return fE(()=>{n.current=!0}),T.useCallback(async(r,a={})=>{ki(n.current,dE),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var d1={};function mE(t,e,n){!e&&!d1[t]&&(d1[t]=!0,ki(!1,n))}T.memo(PI);function PI({routes:t,future:e,state:n}){return hE(t,void 0,n,e)}function DI({to:t,replace:e,state:n,relative:i}){Ut(ec(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=T.useContext(zi);ki(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(lr),{pathname:c}=Hi(),l=Ls(),d=k0(t,C0(a),c,i==="path"),f=JSON.stringify(d);return T.useEffect(()=>{l(JSON.parse(f),{replace:e,state:n,relative:i})},[l,f,i,e,n]),null}function Ts(t){Ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NI({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:a=!1}){Ut(!ec(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:c,navigator:r,static:a,future:{}}),[c,r,a]);typeof n=="string"&&(n=Jo(n));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:v="default"}=n,b=T.useMemo(()=>{let w=Br(d,c);return w==null?null:{location:{pathname:w,search:f,hash:m,state:p,key:v},navigationType:i}},[c,d,f,m,p,v,i]);return ki(b!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:T.createElement(zi.Provider,{value:l},T.createElement(iu.Provider,{children:e,value:b}))}function MI({children:t,location:e}){return yI(jg(t),e)}function jg(t,e=[]){let n=[];return T.Children.forEach(t,(i,r)=>{if(!T.isValidElement(i))return;let a=[...e,r];if(i.type===T.Fragment){n.push.apply(n,jg(i.props.children,a));return}Ut(i.type===Ts,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ut(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=jg(i.props.children,a)),n.push(c)}),n}var Yd="get",Wd="application/x-www-form-urlencoded";function qf(t){return t!=null&&typeof t.tagName=="string"}function OI(t){return qf(t)&&t.tagName.toLowerCase()==="button"}function II(t){return qf(t)&&t.tagName.toLowerCase()==="form"}function UI(t){return qf(t)&&t.tagName.toLowerCase()==="input"}function LI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function jI(t,e){return t.button===0&&(!e||e==="_self")&&!LI(t)}function Bg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function BI(t,e){let n=Bg(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(a=>{n.append(r,a)})}),n}var Rd=null;function FI(){if(Rd===null)try{new FormData(document.createElement("form"),0),Rd=!1}catch{Rd=!0}return Rd}var VI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ap(t){return t!=null&&!VI.has(t)?(ki(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wd}"`),null):t}function zI(t,e){let n,i,r,a,c;if(II(t)){let l=t.getAttribute("action");i=l?Br(l,e):null,n=t.getAttribute("method")||Yd,r=Ap(t.getAttribute("enctype"))||Wd,a=new FormData(t)}else if(OI(t)||UI(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||l.getAttribute("action");if(i=d?Br(d,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Yd,r=Ap(t.getAttribute("formenctype"))||Ap(l.getAttribute("enctype"))||Wd,a=new FormData(l,t),!FI()){let{name:f,type:m,value:p}=t;if(m==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,p)}}else{if(qf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Yd,i=null,r=Wd,c=t}return a&&r==="text/plain"&&(c=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HI(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Br(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function qI(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function GI(t,e,n){let i=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let c=await qI(a,n);return c.links?c.links():[]}return[]}));return XI(i.flat(1).filter(KI).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function f1(t,e,n,i,r,a){let c=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,l=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>c(d,f)||l(d,f)):a==="data"?e.filter((d,f)=>{let m=i.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,f)||l(d,f))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function YI(t,e,{includeHydrateFallback:n}={}){return WI(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function WI(t){return[...new Set(t)]}function $I(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function XI(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let a=JSON.stringify($I(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function pE(){let t=T.useContext(Qo);return _0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function ZI(){let t=T.useContext(Hf);return _0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var P0=T.createContext(void 0);P0.displayName="FrameworkContext";function gE(){let t=T.useContext(P0);return _0(t,"You must render this element inside a <HydratedRouter> element"),t}function JI(t,e){let n=T.useContext(P0),[i,r]=T.useState(!1),[a,c]=T.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:p}=e,v=T.useRef(null);T.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let S=k=>{k.forEach(N=>{c(N.isIntersecting)})},R=new IntersectionObserver(S,{threshold:.5});return v.current&&R.observe(v.current),()=>{R.disconnect()}}},[t]),T.useEffect(()=>{if(i){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[i]);let b=()=>{r(!0)},w=()=>{r(!1),c(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:ul(l,b),onBlur:ul(d,w),onMouseEnter:ul(f,b),onMouseLeave:ul(m,w),onTouchStart:ul(p,b)}]:[!1,v,{}]}function ul(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function QI({page:t,...e}){let{router:n}=pE(),i=T.useMemo(()=>aE(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?T.createElement(tU,{page:t,matches:i,...e}):null}function eU(t){let{manifest:e,routeModules:n}=gE(),[i,r]=T.useState([]);return T.useEffect(()=>{let a=!1;return GI(t,e,n).then(c=>{a||r(c)}),()=>{a=!0}},[t,e,n]),i}function tU({page:t,matches:e,...n}){let i=Hi(),{manifest:r,routeModules:a}=gE(),{basename:c}=pE(),{loaderData:l,matches:d}=ZI(),f=T.useMemo(()=>f1(t,e,d,r,i,"data"),[t,e,d,r,i]),m=T.useMemo(()=>f1(t,e,d,r,i,"assets"),[t,e,d,r,i]),p=T.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let w=new Set,S=!1;if(e.forEach(k=>{let N=r.routes[k.route.id];!N||!N.hasLoader||(!f.some(O=>O.route.id===k.route.id)&&k.route.id in l&&a[k.route.id]?.shouldRevalidate||N.hasClientLoader?S=!0:w.add(k.route.id))}),w.size===0)return[];let R=HI(t,c,"data");return S&&w.size>0&&R.searchParams.set("_routes",e.filter(k=>w.has(k.route.id)).map(k=>k.route.id).join(",")),[R.pathname+R.search]},[c,l,i,r,f,e,t,a]),v=T.useMemo(()=>YI(m,r),[m,r]),b=eU(m);return T.createElement(T.Fragment,null,p.map(w=>T.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>T.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:S})=>T.createElement("link",{key:w,...S})))}function nU(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var vE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vE&&(window.__reactRouterVersion="7.7.1")}catch{}function iU({basename:t,children:e,window:n}){let i=T.useRef();i.current==null&&(i.current=HO({window:n,v5Compat:!0}));let r=i.current,[a,c]=T.useState({action:r.action,location:r.location}),l=T.useCallback(d=>{T.startTransition(()=>c(d))},[c]);return T.useLayoutEffect(()=>r.listen(l),[r,l]),T.createElement(NI,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r})}var yE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cn=T.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:c,state:l,target:d,to:f,preventScrollReset:m,viewTransition:p,...v},b){let{basename:w}=T.useContext(zi),S=typeof f=="string"&&yE.test(f),R,k=!1;if(typeof f=="string"&&S&&(R=f,vE))try{let G=new URL(window.location.href),ie=f.startsWith("//")?new URL(G.protocol+f):new URL(f),re=Br(ie.pathname,w);ie.origin===G.origin&&re!=null?f=re+ie.search+ie.hash:k=!0}catch{ki(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=gI(f,{relative:r}),[O,I,D]=JI(i,v),j=oU(f,{replace:c,state:l,target:d,preventScrollReset:m,relative:r,viewTransition:p});function H(G){e&&e(G),G.defaultPrevented||j(G)}let z=T.createElement("a",{...v,...D,href:R||N,onClick:k||a?e:H,ref:nU(b,I),target:d,"data-discover":!S&&n==="render"?"true":void 0});return O&&!S?T.createElement(T.Fragment,null,z,T.createElement(QI,{page:N})):z});cn.displayName="Link";var rU=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:c,viewTransition:l,children:d,...f},m){let p=ru(c,{relative:f.relative}),v=Hi(),b=T.useContext(Hf),{navigator:w,basename:S}=T.useContext(zi),R=b!=null&&hU(p)&&l===!0,k=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,N=v.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(N=N.toLowerCase(),O=O?O.toLowerCase():null,k=k.toLowerCase()),O&&S&&(O=Br(O,S)||O);const I=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let D=N===k||!r&&N.startsWith(k)&&N.charAt(I)==="/",j=O!=null&&(O===k||!r&&O.startsWith(k)&&O.charAt(k.length)==="/"),H={isActive:D,isPending:j,isTransitioning:R},z=D?e:void 0,G;typeof i=="function"?G=i(H):G=[i,D?"active":null,j?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let ie=typeof a=="function"?a(H):a;return T.createElement(cn,{...f,"aria-current":z,className:G,ref:m,style:ie,to:c,viewTransition:l},typeof d=="function"?d(H):d)});rU.displayName="NavLink";var sU=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:a,method:c=Yd,action:l,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:p,...v},b)=>{let w=dU(),S=fU(l,{relative:f}),R=c.toLowerCase()==="get"?"get":"post",k=typeof l=="string"&&yE.test(l),N=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let I=O.nativeEvent.submitter,D=I?.getAttribute("formmethod")||c;w(I||O.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:r,state:a,relative:f,preventScrollReset:m,viewTransition:p})};return T.createElement("form",{ref:b,method:R,action:S,onSubmit:i?d:N,...v,"data-discover":!k&&t==="render"?"true":void 0})});sU.displayName="Form";function aU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bE(t){let e=T.useContext(Qo);return Ut(e,aU(t)),e}function oU(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:c}={}){let l=Ls(),d=Hi(),f=ru(t,{relative:a});return T.useCallback(m=>{if(jI(m,e)){m.preventDefault();let p=n!==void 0?n:Fl(d)===Fl(f);l(t,{replace:p,state:i,preventScrollReset:r,relative:a,viewTransition:c})}},[d,l,f,n,i,e,t,r,a,c])}function cU(t){ki(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(Bg(t)),n=T.useRef(!1),i=Hi(),r=T.useMemo(()=>BI(i.search,n.current?null:e.current),[i.search]),a=Ls(),c=T.useCallback((l,d)=>{const f=Bg(typeof l=="function"?l(new URLSearchParams(r)):l);n.current=!0,a("?"+f,d)},[a,r]);return[r,c]}var lU=0,uU=()=>`__${String(++lU)}__`;function dU(){let{router:t}=bE("useSubmit"),{basename:e}=T.useContext(zi),n=RI();return T.useCallback(async(i,r={})=>{let{action:a,method:c,encType:l,formData:d,body:f}=zI(i,e);if(r.navigate===!1){let m=r.fetcherKey||uU();await t.fetch(m,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||c,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||c,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function fU(t,{relative:e}={}){let{basename:n}=T.useContext(zi),i=T.useContext(lr);Ut(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...ru(t||".",{relative:e})},c=Hi();if(t==null){a.search=c.search;let l=new URLSearchParams(a.search),d=l.getAll("index");if(d.some(m=>m==="")){l.delete("index"),d.filter(p=>p).forEach(p=>l.append("index",p));let m=l.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:jr([n,a.pathname])),Fl(a)}function hU(t,{relative:e}={}){let n=T.useContext(uE);Ut(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=bE("useViewTransitionState"),r=ru(t,{relative:e});if(!n.isTransitioning)return!1;let a=Br(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=Br(n.nextLocation.pathname,i)||n.nextLocation.pathname;return yf(r.pathname,c)!=null||yf(r.pathname,a)!=null}var su=iE();const SE=tE(su);var _p={},Pp,h1;function mU(){if(h1)return Pp;h1=1;var t={}.toString;return Pp=Array.isArray||function(e){return t.call(e)=="[object Array]"},Pp}var m1;function pU(){return m1||(m1=1,function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var e=rE(),n=sE(),i=mU();t.Buffer=l,t.SlowBuffer=k,t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=a();function r(){try{var B=new Uint8Array(1);return B.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},B.foo()===42&&typeof B.subarray=="function"&&B.subarray(1,1).byteLength===0}catch{return!1}}function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(B,A){if(a()<A)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(B=new Uint8Array(A),B.__proto__=l.prototype):(B===null&&(B=new l(A)),B.length=A),B}function l(B,A,_){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(B,A,_);if(typeof B=="number"){if(typeof A=="string")throw new Error("If encoding is specified then the first argument must be a string");return p(this,B)}return d(this,B,A,_)}l.poolSize=8192,l._augment=function(B){return B.__proto__=l.prototype,B};function d(B,A,_,F){if(typeof A=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&A instanceof ArrayBuffer?w(B,A,_,F):typeof A=="string"?v(B,A,_):S(B,A)}l.from=function(B,A,_){return d(null,B,A,_)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0}));function f(B){if(typeof B!="number")throw new TypeError('"size" argument must be a number');if(B<0)throw new RangeError('"size" argument must not be negative')}function m(B,A,_,F){return f(A),A<=0?c(B,A):_!==void 0?typeof F=="string"?c(B,A).fill(_,F):c(B,A).fill(_):c(B,A)}l.alloc=function(B,A,_){return m(null,B,A,_)};function p(B,A){if(f(A),B=c(B,A<0?0:R(A)|0),!l.TYPED_ARRAY_SUPPORT)for(var _=0;_<A;++_)B[_]=0;return B}l.allocUnsafe=function(B){return p(null,B)},l.allocUnsafeSlow=function(B){return p(null,B)};function v(B,A,_){if((typeof _!="string"||_==="")&&(_="utf8"),!l.isEncoding(_))throw new TypeError('"encoding" must be a valid string encoding');var F=N(A,_)|0;B=c(B,F);var X=B.write(A,_);return X!==F&&(B=B.slice(0,X)),B}function b(B,A){var _=A.length<0?0:R(A.length)|0;B=c(B,_);for(var F=0;F<_;F+=1)B[F]=A[F]&255;return B}function w(B,A,_,F){if(A.byteLength,_<0||A.byteLength<_)throw new RangeError("'offset' is out of bounds");if(A.byteLength<_+(F||0))throw new RangeError("'length' is out of bounds");return _===void 0&&F===void 0?A=new Uint8Array(A):F===void 0?A=new Uint8Array(A,_):A=new Uint8Array(A,_,F),l.TYPED_ARRAY_SUPPORT?(B=A,B.__proto__=l.prototype):B=b(B,A),B}function S(B,A){if(l.isBuffer(A)){var _=R(A.length)|0;return B=c(B,_),B.length===0||A.copy(B,0,0,_),B}if(A){if(typeof ArrayBuffer<"u"&&A.buffer instanceof ArrayBuffer||"length"in A)return typeof A.length!="number"||At(A.length)?c(B,0):b(B,A);if(A.type==="Buffer"&&i(A.data))return b(B,A.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function R(B){if(B>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return B|0}function k(B){return+B!=B&&(B=0),l.alloc(+B)}l.isBuffer=function(A){return!!(A!=null&&A._isBuffer)},l.compare=function(A,_){if(!l.isBuffer(A)||!l.isBuffer(_))throw new TypeError("Arguments must be Buffers");if(A===_)return 0;for(var F=A.length,X=_.length,pe=0,we=Math.min(F,X);pe<we;++pe)if(A[pe]!==_[pe]){F=A[pe],X=_[pe];break}return F<X?-1:X<F?1:0},l.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(A,_){if(!i(A))throw new TypeError('"list" argument must be an Array of Buffers');if(A.length===0)return l.alloc(0);var F;if(_===void 0)for(_=0,F=0;F<A.length;++F)_+=A[F].length;var X=l.allocUnsafe(_),pe=0;for(F=0;F<A.length;++F){var we=A[F];if(!l.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(X,pe),pe+=we.length}return X};function N(B,A){if(l.isBuffer(B))return B.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(B)||B instanceof ArrayBuffer))return B.byteLength;typeof B!="string"&&(B=""+B);var _=B.length;if(_===0)return 0;for(var F=!1;;)switch(A){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":case void 0:return Ye(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return ui(B).length;default:if(F)return Ye(B).length;A=(""+A).toLowerCase(),F=!0}}l.byteLength=N;function O(B,A,_){var F=!1;if((A===void 0||A<0)&&(A=0),A>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,A>>>=0,_<=A))return"";for(B||(B="utf8");;)switch(B){case"hex":return _e(this,A,_);case"utf8":case"utf-8":return Ae(this,A,_);case"ascii":return se(this,A,_);case"latin1":case"binary":return J(this,A,_);case"base64":return Ee(this,A,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,A,_);default:if(F)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),F=!0}}l.prototype._isBuffer=!0;function I(B,A,_){var F=B[A];B[A]=B[_],B[_]=F}l.prototype.swap16=function(){var A=this.length;if(A%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _=0;_<A;_+=2)I(this,_,_+1);return this},l.prototype.swap32=function(){var A=this.length;if(A%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _=0;_<A;_+=4)I(this,_,_+3),I(this,_+1,_+2);return this},l.prototype.swap64=function(){var A=this.length;if(A%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _=0;_<A;_+=8)I(this,_,_+7),I(this,_+1,_+6),I(this,_+2,_+5),I(this,_+3,_+4);return this},l.prototype.toString=function(){var A=this.length|0;return A===0?"":arguments.length===0?Ae(this,0,A):O.apply(this,arguments)},l.prototype.equals=function(A){if(!l.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A?!0:l.compare(this,A)===0},l.prototype.inspect=function(){var A="",_=t.INSPECT_MAX_BYTES;return this.length>0&&(A=this.toString("hex",0,_).match(/.{2}/g).join(" "),this.length>_&&(A+=" ... ")),"<Buffer "+A+">"},l.prototype.compare=function(A,_,F,X,pe){if(!l.isBuffer(A))throw new TypeError("Argument must be a Buffer");if(_===void 0&&(_=0),F===void 0&&(F=A?A.length:0),X===void 0&&(X=0),pe===void 0&&(pe=this.length),_<0||F>A.length||X<0||pe>this.length)throw new RangeError("out of range index");if(X>=pe&&_>=F)return 0;if(X>=pe)return-1;if(_>=F)return 1;if(_>>>=0,F>>>=0,X>>>=0,pe>>>=0,this===A)return 0;for(var we=pe-X,Ke=F-_,Je=Math.min(we,Ke),M=this.slice(X,pe),C=A.slice(_,F),E=0;E<Je;++E)if(M[E]!==C[E]){we=M[E],Ke=C[E];break}return we<Ke?-1:Ke<we?1:0};function D(B,A,_,F,X){if(B.length===0)return-1;if(typeof _=="string"?(F=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,isNaN(_)&&(_=X?0:B.length-1),_<0&&(_=B.length+_),_>=B.length){if(X)return-1;_=B.length-1}else if(_<0)if(X)_=0;else return-1;if(typeof A=="string"&&(A=l.from(A,F)),l.isBuffer(A))return A.length===0?-1:j(B,A,_,F,X);if(typeof A=="number")return A=A&255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(B,A,_):Uint8Array.prototype.lastIndexOf.call(B,A,_):j(B,[A],_,F,X);throw new TypeError("val must be string, number or Buffer")}function j(B,A,_,F,X){var pe=1,we=B.length,Ke=A.length;if(F!==void 0&&(F=String(F).toLowerCase(),F==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(B.length<2||A.length<2)return-1;pe=2,we/=2,Ke/=2,_/=2}function Je($,ae){return pe===1?$[ae]:$.readUInt16BE(ae*pe)}var M;if(X){var C=-1;for(M=_;M<we;M++)if(Je(B,M)===Je(A,C===-1?0:M-C)){if(C===-1&&(C=M),M-C+1===Ke)return C*pe}else C!==-1&&(M-=M-C),C=-1}else for(_+Ke>we&&(_=we-Ke),M=_;M>=0;M--){for(var E=!0,L=0;L<Ke;L++)if(Je(B,M+L)!==Je(A,L)){E=!1;break}if(E)return M}return-1}l.prototype.includes=function(A,_,F){return this.indexOf(A,_,F)!==-1},l.prototype.indexOf=function(A,_,F){return D(this,A,_,F,!0)},l.prototype.lastIndexOf=function(A,_,F){return D(this,A,_,F,!1)};function H(B,A,_,F){_=Number(_)||0;var X=B.length-_;F?(F=Number(F),F>X&&(F=X)):F=X;var pe=A.length;if(pe%2!==0)throw new TypeError("Invalid hex string");F>pe/2&&(F=pe/2);for(var we=0;we<F;++we){var Ke=parseInt(A.substr(we*2,2),16);if(isNaN(Ke))return we;B[_+we]=Ke}return we}function z(B,A,_,F){return On(Ye(A,B.length-_),B,_,F)}function G(B,A,_,F){return On(kt(A),B,_,F)}function ie(B,A,_,F){return G(B,A,_,F)}function re(B,A,_,F){return On(ui(A),B,_,F)}function de(B,A,_,F){return On(Lt(A,B.length-_),B,_,F)}l.prototype.write=function(A,_,F,X){if(_===void 0)X="utf8",F=this.length,_=0;else if(F===void 0&&typeof _=="string")X=_,F=this.length,_=0;else if(isFinite(_))_=_|0,isFinite(F)?(F=F|0,X===void 0&&(X="utf8")):(X=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var pe=this.length-_;if((F===void 0||F>pe)&&(F=pe),A.length>0&&(F<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var we=!1;;)switch(X){case"hex":return H(this,A,_,F);case"utf8":case"utf-8":return z(this,A,_,F);case"ascii":return G(this,A,_,F);case"latin1":case"binary":return ie(this,A,_,F);case"base64":return re(this,A,_,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,A,_,F);default:if(we)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),we=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ee(B,A,_){return A===0&&_===B.length?e.fromByteArray(B):e.fromByteArray(B.slice(A,_))}function Ae(B,A,_){_=Math.min(B.length,_);for(var F=[],X=A;X<_;){var pe=B[X],we=null,Ke=pe>239?4:pe>223?3:pe>191?2:1;if(X+Ke<=_){var Je,M,C,E;switch(Ke){case 1:pe<128&&(we=pe);break;case 2:Je=B[X+1],(Je&192)===128&&(E=(pe&31)<<6|Je&63,E>127&&(we=E));break;case 3:Je=B[X+1],M=B[X+2],(Je&192)===128&&(M&192)===128&&(E=(pe&15)<<12|(Je&63)<<6|M&63,E>2047&&(E<55296||E>57343)&&(we=E));break;case 4:Je=B[X+1],M=B[X+2],C=B[X+3],(Je&192)===128&&(M&192)===128&&(C&192)===128&&(E=(pe&15)<<18|(Je&63)<<12|(M&63)<<6|C&63,E>65535&&E<1114112&&(we=E))}}we===null?(we=65533,Ke=1):we>65535&&(we-=65536,F.push(we>>>10&1023|55296),we=56320|we&1023),F.push(we),X+=Ke}return Y(F)}var Me=4096;function Y(B){var A=B.length;if(A<=Me)return String.fromCharCode.apply(String,B);for(var _="",F=0;F<A;)_+=String.fromCharCode.apply(String,B.slice(F,F+=Me));return _}function se(B,A,_){var F="";_=Math.min(B.length,_);for(var X=A;X<_;++X)F+=String.fromCharCode(B[X]&127);return F}function J(B,A,_){var F="";_=Math.min(B.length,_);for(var X=A;X<_;++X)F+=String.fromCharCode(B[X]);return F}function _e(B,A,_){var F=B.length;(!A||A<0)&&(A=0),(!_||_<0||_>F)&&(_=F);for(var X="",pe=A;pe<_;++pe)X+=Xe(B[pe]);return X}function V(B,A,_){for(var F=B.slice(A,_),X="",pe=0;pe<F.length;pe+=2)X+=String.fromCharCode(F[pe]+F[pe+1]*256);return X}l.prototype.slice=function(A,_){var F=this.length;A=~~A,_=_===void 0?F:~~_,A<0?(A+=F,A<0&&(A=0)):A>F&&(A=F),_<0?(_+=F,_<0&&(_=0)):_>F&&(_=F),_<A&&(_=A);var X;if(l.TYPED_ARRAY_SUPPORT)X=this.subarray(A,_),X.__proto__=l.prototype;else{var pe=_-A;X=new l(pe,void 0);for(var we=0;we<pe;++we)X[we]=this[we+A]}return X};function Q(B,A,_){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+A>_)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function(A,_,F){A=A|0,_=_|0,F||Q(A,_,this.length);for(var X=this[A],pe=1,we=0;++we<_&&(pe*=256);)X+=this[A+we]*pe;return X},l.prototype.readUIntBE=function(A,_,F){A=A|0,_=_|0,F||Q(A,_,this.length);for(var X=this[A+--_],pe=1;_>0&&(pe*=256);)X+=this[A+--_]*pe;return X},l.prototype.readUInt8=function(A,_){return _||Q(A,1,this.length),this[A]},l.prototype.readUInt16LE=function(A,_){return _||Q(A,2,this.length),this[A]|this[A+1]<<8},l.prototype.readUInt16BE=function(A,_){return _||Q(A,2,this.length),this[A]<<8|this[A+1]},l.prototype.readUInt32LE=function(A,_){return _||Q(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+this[A+3]*16777216},l.prototype.readUInt32BE=function(A,_){return _||Q(A,4,this.length),this[A]*16777216+(this[A+1]<<16|this[A+2]<<8|this[A+3])},l.prototype.readIntLE=function(A,_,F){A=A|0,_=_|0,F||Q(A,_,this.length);for(var X=this[A],pe=1,we=0;++we<_&&(pe*=256);)X+=this[A+we]*pe;return pe*=128,X>=pe&&(X-=Math.pow(2,8*_)),X},l.prototype.readIntBE=function(A,_,F){A=A|0,_=_|0,F||Q(A,_,this.length);for(var X=_,pe=1,we=this[A+--X];X>0&&(pe*=256);)we+=this[A+--X]*pe;return pe*=128,we>=pe&&(we-=Math.pow(2,8*_)),we},l.prototype.readInt8=function(A,_){return _||Q(A,1,this.length),this[A]&128?(255-this[A]+1)*-1:this[A]},l.prototype.readInt16LE=function(A,_){_||Q(A,2,this.length);var F=this[A]|this[A+1]<<8;return F&32768?F|4294901760:F},l.prototype.readInt16BE=function(A,_){_||Q(A,2,this.length);var F=this[A+1]|this[A]<<8;return F&32768?F|4294901760:F},l.prototype.readInt32LE=function(A,_){return _||Q(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},l.prototype.readInt32BE=function(A,_){return _||Q(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},l.prototype.readFloatLE=function(A,_){return _||Q(A,4,this.length),n.read(this,A,!0,23,4)},l.prototype.readFloatBE=function(A,_){return _||Q(A,4,this.length),n.read(this,A,!1,23,4)},l.prototype.readDoubleLE=function(A,_){return _||Q(A,8,this.length),n.read(this,A,!0,52,8)},l.prototype.readDoubleBE=function(A,_){return _||Q(A,8,this.length),n.read(this,A,!1,52,8)};function me(B,A,_,F,X,pe){if(!l.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>X||A<pe)throw new RangeError('"value" argument is out of bounds');if(_+F>B.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function(A,_,F,X){if(A=+A,_=_|0,F=F|0,!X){var pe=Math.pow(2,8*F)-1;me(this,A,_,F,pe,0)}var we=1,Ke=0;for(this[_]=A&255;++Ke<F&&(we*=256);)this[_+Ke]=A/we&255;return _+F},l.prototype.writeUIntBE=function(A,_,F,X){if(A=+A,_=_|0,F=F|0,!X){var pe=Math.pow(2,8*F)-1;me(this,A,_,F,pe,0)}var we=F-1,Ke=1;for(this[_+we]=A&255;--we>=0&&(Ke*=256);)this[_+we]=A/Ke&255;return _+F},l.prototype.writeUInt8=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,1,255,0),l.TYPED_ARRAY_SUPPORT||(A=Math.floor(A)),this[_]=A&255,_+1};function le(B,A,_,F){A<0&&(A=65535+A+1);for(var X=0,pe=Math.min(B.length-_,2);X<pe;++X)B[_+X]=(A&255<<8*(F?X:1-X))>>>(F?X:1-X)*8}l.prototype.writeUInt16LE=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[_]=A&255,this[_+1]=A>>>8):le(this,A,_,!0),_+2},l.prototype.writeUInt16BE=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[_]=A>>>8,this[_+1]=A&255):le(this,A,_,!1),_+2};function Te(B,A,_,F){A<0&&(A=4294967295+A+1);for(var X=0,pe=Math.min(B.length-_,4);X<pe;++X)B[_+X]=A>>>(F?X:3-X)*8&255}l.prototype.writeUInt32LE=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[_+3]=A>>>24,this[_+2]=A>>>16,this[_+1]=A>>>8,this[_]=A&255):Te(this,A,_,!0),_+4},l.prototype.writeUInt32BE=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[_]=A>>>24,this[_+1]=A>>>16,this[_+2]=A>>>8,this[_+3]=A&255):Te(this,A,_,!1),_+4},l.prototype.writeIntLE=function(A,_,F,X){if(A=+A,_=_|0,!X){var pe=Math.pow(2,8*F-1);me(this,A,_,F,pe-1,-pe)}var we=0,Ke=1,Je=0;for(this[_]=A&255;++we<F&&(Ke*=256);)A<0&&Je===0&&this[_+we-1]!==0&&(Je=1),this[_+we]=(A/Ke>>0)-Je&255;return _+F},l.prototype.writeIntBE=function(A,_,F,X){if(A=+A,_=_|0,!X){var pe=Math.pow(2,8*F-1);me(this,A,_,F,pe-1,-pe)}var we=F-1,Ke=1,Je=0;for(this[_+we]=A&255;--we>=0&&(Ke*=256);)A<0&&Je===0&&this[_+we+1]!==0&&(Je=1),this[_+we]=(A/Ke>>0)-Je&255;return _+F},l.prototype.writeInt8=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,1,127,-128),l.TYPED_ARRAY_SUPPORT||(A=Math.floor(A)),A<0&&(A=255+A+1),this[_]=A&255,_+1},l.prototype.writeInt16LE=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[_]=A&255,this[_+1]=A>>>8):le(this,A,_,!0),_+2},l.prototype.writeInt16BE=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[_]=A>>>8,this[_+1]=A&255):le(this,A,_,!1),_+2},l.prototype.writeInt32LE=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[_]=A&255,this[_+1]=A>>>8,this[_+2]=A>>>16,this[_+3]=A>>>24):Te(this,A,_,!0),_+4},l.prototype.writeInt32BE=function(A,_,F){return A=+A,_=_|0,F||me(this,A,_,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),l.TYPED_ARRAY_SUPPORT?(this[_]=A>>>24,this[_+1]=A>>>16,this[_+2]=A>>>8,this[_+3]=A&255):Te(this,A,_,!1),_+4};function Ne(B,A,_,F,X,pe){if(_+F>B.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function Pe(B,A,_,F,X){return X||Ne(B,A,_,4),n.write(B,A,_,F,23,4),_+4}l.prototype.writeFloatLE=function(A,_,F){return Pe(this,A,_,!0,F)},l.prototype.writeFloatBE=function(A,_,F){return Pe(this,A,_,!1,F)};function be(B,A,_,F,X){return X||Ne(B,A,_,8),n.write(B,A,_,F,52,8),_+8}l.prototype.writeDoubleLE=function(A,_,F){return be(this,A,_,!0,F)},l.prototype.writeDoubleBE=function(A,_,F){return be(this,A,_,!1,F)},l.prototype.copy=function(A,_,F,X){if(F||(F=0),!X&&X!==0&&(X=this.length),_>=A.length&&(_=A.length),_||(_=0),X>0&&X<F&&(X=F),X===F||A.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("sourceStart out of bounds");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),A.length-_<X-F&&(X=A.length-_+F);var pe=X-F,we;if(this===A&&F<_&&_<X)for(we=pe-1;we>=0;--we)A[we+_]=this[we+F];else if(pe<1e3||!l.TYPED_ARRAY_SUPPORT)for(we=0;we<pe;++we)A[we+_]=this[we+F];else Uint8Array.prototype.set.call(A,this.subarray(F,F+pe),_);return pe},l.prototype.fill=function(A,_,F,X){if(typeof A=="string"){if(typeof _=="string"?(X=_,_=0,F=this.length):typeof F=="string"&&(X=F,F=this.length),A.length===1){var pe=A.charCodeAt(0);pe<256&&(A=pe)}if(X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!l.isEncoding(X))throw new TypeError("Unknown encoding: "+X)}else typeof A=="number"&&(A=A&255);if(_<0||this.length<_||this.length<F)throw new RangeError("Out of range index");if(F<=_)return this;_=_>>>0,F=F===void 0?this.length:F>>>0,A||(A=0);var we;if(typeof A=="number")for(we=_;we<F;++we)this[we]=A;else{var Ke=l.isBuffer(A)?A:Ye(new l(A,X).toString()),Je=Ke.length;for(we=0;we<F-_;++we)this[we+_]=Ke[we%Je]}return this};var Ce=/[^+\/0-9A-Za-z-_]/g;function Ve(B){if(B=qe(B).replace(Ce,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function qe(B){return B.trim?B.trim():B.replace(/^\s+|\s+$/g,"")}function Xe(B){return B<16?"0"+B.toString(16):B.toString(16)}function Ye(B,A){A=A||1/0;for(var _,F=B.length,X=null,pe=[],we=0;we<F;++we){if(_=B.charCodeAt(we),_>55295&&_<57344){if(!X){if(_>56319){(A-=3)>-1&&pe.push(239,191,189);continue}else if(we+1===F){(A-=3)>-1&&pe.push(239,191,189);continue}X=_;continue}if(_<56320){(A-=3)>-1&&pe.push(239,191,189),X=_;continue}_=(X-55296<<10|_-56320)+65536}else X&&(A-=3)>-1&&pe.push(239,191,189);if(X=null,_<128){if((A-=1)<0)break;pe.push(_)}else if(_<2048){if((A-=2)<0)break;pe.push(_>>6|192,_&63|128)}else if(_<65536){if((A-=3)<0)break;pe.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((A-=4)<0)break;pe.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return pe}function kt(B){for(var A=[],_=0;_<B.length;++_)A.push(B.charCodeAt(_)&255);return A}function Lt(B,A){for(var _,F,X,pe=[],we=0;we<B.length&&!((A-=2)<0);++we)_=B.charCodeAt(we),F=_>>8,X=_%256,pe.push(X),pe.push(F);return pe}function ui(B){return e.toByteArray(Ve(B))}function On(B,A,_,F){for(var X=0;X<F&&!(X+_>=A.length||X>=B.length);++X)A[X+_]=B[X];return X}function At(B){return B!==B}}(_p)),_p}var Nt=pU(),xi;typeof window<"u"&&window.crypto&&(xi=window.crypto);!xi&&typeof window<"u"&&window.msCrypto&&(xi=window.msCrypto);!xi&&typeof globalThis<"u"&&globalThis.crypto&&(xi=globalThis.crypto);if(!xi&&typeof require=="function")try{xi=require("crypto")}catch{}function gU(){if(xi){if(typeof xi.getRandomValues=="function")try{return xi.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof xi.randomBytes=="function")try{return xi.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function vU(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((a&15).toString(16))}return i.join("")}var yU=function(){function t(n,i){n=this.words=n||[],i!=null?this.sigBytes=i:this.sigBytes=n.length*4}var e=t.prototype;return e.random=function(i){for(var r=[],a=0;a<i;a+=4)r.push(gU());return new t(r,i)},e.toString=function(){return vU(this)},t}(),Dp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fg=function(t,e){return Fg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])},Fg(t,e)};function bU(t,e){Fg(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Vg=function(){return Vg=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vg.apply(this,arguments)};function SU(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function TU(t,e,n,i){var r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(a=(r<3?c(a):r>3?c(e,n,a):c(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function xU(t,e){return function(n,i){e(n,i,t)}}function wU(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function CU(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,e||[])).next())})}function kU(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(m){return d([f,m])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],r=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function EU(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}function RU(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function zg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function TE(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,a=[],c;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(l){c={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return a}function AU(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(TE(arguments[e]));return t}function _U(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var a=arguments[e],c=0,l=a.length;c<l;c++,r++)i[r]=a[c];return i}function Vl(t){return this instanceof Vl?(this.v=t,this):new Vl(t)}function PU(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(v){i[v]&&(r[v]=function(b){return new Promise(function(w,S){a.push([v,b,w,S])>1||l(v,b)})})}function l(v,b){try{d(i[v](b))}catch(w){p(a[0][3],w)}}function d(v){v.value instanceof Vl?Promise.resolve(v.value.v).then(f,m):p(a[0][2],v)}function f(v){l("next",v)}function m(v){l("throw",v)}function p(v,b){v(b),a.shift(),a.length&&l(a[0][0],a[0][1])}}function DU(t){var e,n;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,a){e[r]=t[r]?function(c){return(n=!n)?{value:Vl(t[r](c)),done:r==="return"}:a?a(c):c}:a}}function NU(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zg=="function"?zg(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}function MU(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function OU(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function IU(t){return t&&t.__esModule?t:{default:t}}function UU(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function LU(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const jU=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Vg},__asyncDelegator:DU,__asyncGenerator:PU,__asyncValues:NU,__await:Vl,__awaiter:CU,__classPrivateFieldGet:UU,__classPrivateFieldSet:LU,__createBinding:EU,__decorate:TU,__exportStar:RU,__extends:bU,__generator:kU,__importDefault:IU,__importStar:OU,__makeTemplateObject:MU,__metadata:wU,__param:xU,__read:TE,__rest:SU,__spread:AU,__spreadArrays:_U,__values:zg},Symbol.toStringTag,{value:"Module"})),xE=x0(jU);var dl={},ii={},p1;function wE(){return p1||(p1=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.MAX_HASHABLE_LENGTH=ii.INIT=ii.KEY=ii.DIGEST_LENGTH=ii.BLOCK_SIZE=void 0,ii.BLOCK_SIZE=64,ii.DIGEST_LENGTH=32,ii.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ii.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ii.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),ii}var fl={},g1;function BU(){if(g1)return fl;g1=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.RawSha256=void 0;var t=wE(),e=function(){function n(){this.state=Int32Array.from(t.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(i){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,a=i.byteLength;if(this.bytesHashed+=a,this.bytesHashed*8>t.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;a>0;)this.buffer[this.bufferLength++]=i[r++],a--,this.bufferLength===t.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var i=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),a=this.bufferLength;if(r.setUint8(this.bufferLength++,128),a%t.BLOCK_SIZE>=t.BLOCK_SIZE-8){for(var c=this.bufferLength;c<t.BLOCK_SIZE;c++)r.setUint8(c,0);this.hashBuffer(),this.bufferLength=0}for(var c=this.bufferLength;c<t.BLOCK_SIZE-8;c++)r.setUint8(c,0);r.setUint32(t.BLOCK_SIZE-8,Math.floor(i/4294967296),!0),r.setUint32(t.BLOCK_SIZE-4,i),this.hashBuffer(),this.finished=!0}for(var l=new Uint8Array(t.DIGEST_LENGTH),c=0;c<8;c++)l[c*4]=this.state[c]>>>24&255,l[c*4+1]=this.state[c]>>>16&255,l[c*4+2]=this.state[c]>>>8&255,l[c*4+3]=this.state[c]>>>0&255;return l},n.prototype.hashBuffer=function(){for(var i=this,r=i.buffer,a=i.state,c=a[0],l=a[1],d=a[2],f=a[3],m=a[4],p=a[5],v=a[6],b=a[7],w=0;w<t.BLOCK_SIZE;w++){if(w<16)this.temp[w]=(r[w*4]&255)<<24|(r[w*4+1]&255)<<16|(r[w*4+2]&255)<<8|r[w*4+3]&255;else{var S=this.temp[w-2],R=(S>>>17|S<<15)^(S>>>19|S<<13)^S>>>10;S=this.temp[w-15];var k=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3;this.temp[w]=(R+this.temp[w-7]|0)+(k+this.temp[w-16]|0)}var N=(((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&p^~m&v)|0)+(b+(t.KEY[w]+this.temp[w]|0)|0)|0,O=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&l^c&d^l&d)|0;b=v,v=p,p=m,m=f+N|0,f=d,d=l,l=c,c=N+O|0}a[0]+=c,a[1]+=l,a[2]+=d,a[3]+=f,a[4]+=m,a[5]+=p,a[6]+=v,a[7]+=b},n}();return fl.RawSha256=e,fl}var Np={},hl={};const FU=t=>{const e=[];for(let n=0,i=t.length;n<i;n++){const r=t.charCodeAt(n);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192,r&63|128);else if(n+1<t.length&&(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320){const a=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023);e.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else e.push(r>>12|224,r>>6&63|128,r&63|128)}return Uint8Array.from(e)},VU=t=>{let e="";for(let n=0,i=t.length;n<i;n++){const r=t[n];if(r<128)e+=String.fromCharCode(r);else if(192<=r&&r<224){const a=t[++n];e+=String.fromCharCode((r&31)<<6|a&63)}else if(240<=r&&r<365){const c="%"+[r,t[++n],t[++n],t[++n]].map(l=>l.toString(16)).join("%");e+=decodeURIComponent(c)}else e+=String.fromCharCode((r&15)<<12|(t[++n]&63)<<6|t[++n]&63)}return e};function zU(t){return new TextEncoder().encode(t)}function HU(t){return new TextDecoder("utf-8").decode(t)}const qU=t=>typeof TextEncoder=="function"?zU(t):FU(t),KU=t=>typeof TextDecoder=="function"?HU(t):VU(t),GU=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:qU,toUtf8:KU},Symbol.toStringTag,{value:"Module"})),YU=x0(GU);var v1;function WU(){if(v1)return hl;v1=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.convertToBuffer=void 0;var t=YU,e=typeof Buffer<"u"&&Buffer.from?function(i){return Buffer.from(i,"utf8")}:t.fromUtf8;function n(i){return i instanceof Uint8Array?i:typeof i=="string"?e(i):ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(i)}return hl.convertToBuffer=n,hl}var ml={},y1;function $U(){if(y1)return ml;y1=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.isEmptyData=void 0;function t(e){return typeof e=="string"?e.length===0:e.byteLength===0}return ml.isEmptyData=t,ml}var pl={},b1;function XU(){if(b1)return pl;b1=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.numToUint8=void 0;function t(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}return pl.numToUint8=t,pl}var gl={},S1;function ZU(){if(S1)return gl;S1=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.uint32ArrayFrom=void 0;function t(e){if(!Array.from){for(var n=new Uint32Array(e.length),i=0;i<e.length;)n[i]=e[i];return n}return Uint32Array.from(e)}return gl.uint32ArrayFrom=t,gl}var T1;function JU(){return T1||(T1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var e=WU();Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=$U();Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var i=XU();Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return i.numToUint8}});var r=ZU();Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})}(Np)),Np}var x1;function QU(){if(x1)return dl;x1=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.Sha256=void 0;var t=xE,e=wE(),n=BU(),i=JU(),r=function(){function c(l){if(this.hash=new n.RawSha256,l){this.outer=new n.RawSha256;var d=a(l),f=new Uint8Array(e.BLOCK_SIZE);f.set(d);for(var m=0;m<e.BLOCK_SIZE;m++)d[m]^=54,f[m]^=92;this.hash.update(d),this.outer.update(f);for(var m=0;m<d.byteLength;m++)d[m]=0}}return c.prototype.update=function(l){if(!((0,i.isEmptyData)(l)||this.error))try{this.hash.update((0,i.convertToBuffer)(l))}catch(d){this.error=d}},c.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},c.prototype.digest=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(l){return[2,this.digestSync()]})})},c}();dl.Sha256=r;function a(c){var l=(0,i.convertToBuffer)(c);if(l.byteLength>e.BLOCK_SIZE){var d=new n.RawSha256;d.update(l),l=d.digest()}var f=new Uint8Array(e.BLOCK_SIZE);return f.set(l),f}return dl}var w1;function e3(){return w1||(w1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=xE;(0,e.__exportStar)(QU(),t)}(Dp)),Dp}var Dl=e3();function Oe(t,e){t!=null&&this.fromString(t,e)}function jn(){return new Oe(null)}var As,t3=0xdeadbeefcafe,C1=(t3&16777215)==15715070;function n3(t,e,n,i,r,a){for(;--a>=0;){var c=e*this[t++]+n[i]+r;r=Math.floor(c/67108864),n[i++]=c&67108863}return r}function i3(t,e,n,i,r,a){for(var c=e&32767,l=e>>15;--a>=0;){var d=this[t]&32767,f=this[t++]>>15,m=l*d+f*c;d=c*d+((m&32767)<<15)+n[i]+(r&1073741823),r=(d>>>30)+(m>>>15)+l*f+(r>>>30),n[i++]=d&1073741823}return r}function r3(t,e,n,i,r,a){for(var c=e&16383,l=e>>14;--a>=0;){var d=this[t]&16383,f=this[t++]>>14,m=l*d+f*c;d=c*d+((m&16383)<<14)+n[i]+r,r=(d>>28)+(m>>14)+l*f,n[i++]=d&268435455}return r}var k1=typeof navigator<"u";k1&&C1&&navigator.appName=="Microsoft Internet Explorer"?(Oe.prototype.am=i3,As=30):k1&&C1&&navigator.appName!="Netscape"?(Oe.prototype.am=n3,As=26):(Oe.prototype.am=r3,As=28);Oe.prototype.DB=As;Oe.prototype.DM=(1<<As)-1;Oe.prototype.DV=1<<As;var D0=52;Oe.prototype.FV=Math.pow(2,D0);Oe.prototype.F1=D0-As;Oe.prototype.F2=2*As-D0;var s3="0123456789abcdefghijklmnopqrstuvwxyz",Kf=new Array,tc,wi;tc=48;for(wi=0;wi<=9;++wi)Kf[tc++]=wi;tc=97;for(wi=10;wi<36;++wi)Kf[tc++]=wi;tc=65;for(wi=10;wi<36;++wi)Kf[tc++]=wi;function E1(t){return s3.charAt(t)}function a3(t,e){var n=Kf[t.charCodeAt(e)];return n??-1}function o3(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function c3(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function N0(t){var e=jn();return e.fromInt(t),e}function l3(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var i=t.length,r=!1,a=0;--i>=0;){var c=a3(t,i);if(c<0){t.charAt(i)=="-"&&(r=!0);continue}r=!1,a==0?this[this.t++]=c:a+n>this.DB?(this[this.t-1]|=(c&(1<<this.DB-a)-1)<<a,this[this.t++]=c>>this.DB-a):this[this.t-1]|=c<<a,a+=n,a>=this.DB&&(a-=this.DB)}this.clamp(),r&&Oe.ZERO.subTo(this,this)}function u3(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function d3(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var n=(1<<e)-1,i,r=!1,a="",c=this.t,l=this.DB-c*this.DB%e;if(c-- >0)for(l<this.DB&&(i=this[c]>>l)>0&&(r=!0,a=E1(i));c>=0;)l<e?(i=(this[c]&(1<<l)-1)<<e-l,i|=this[--c]>>(l+=this.DB-e)):(i=this[c]>>(l-=e)&n,l<=0&&(l+=this.DB,--c)),i>0&&(r=!0),r&&(a+=E1(i));return r?a:"0"}function f3(){var t=jn();return Oe.ZERO.subTo(this,t),t}function h3(){return this.s<0?this.negate():this}function m3(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this[n]-t[n])!=0)return e;return 0}function M0(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}function p3(){return this.t<=0?0:this.DB*(this.t-1)+M0(this[this.t-1]^this.s&this.DM)}function g3(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function v3(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function y3(t,e){var n=t%this.DB,i=this.DB-n,r=(1<<i)-1,a=Math.floor(t/this.DB),c=this.s<<n&this.DM,l;for(l=this.t-1;l>=0;--l)e[l+a+1]=this[l]>>i|c,c=(this[l]&r)<<n;for(l=a-1;l>=0;--l)e[l]=0;e[a]=c,e.t=this.t+a+1,e.s=this.s,e.clamp()}function b3(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var i=t%this.DB,r=this.DB-i,a=(1<<i)-1;e[0]=this[n]>>i;for(var c=n+1;c<this.t;++c)e[c-n-1]|=(this[c]&a)<<r,e[c-n]=this[c]>>i;i>0&&(e[this.t-n-1]|=(this.s&a)<<r),e.t=this.t-n,e.clamp()}function S3(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]-t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i-=t[n],e[n++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[n++]=this.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()}function T3(t,e){var n=this.abs(),i=t.abs(),r=n.t;for(e.t=r+i.t;--r>=0;)e[r]=0;for(r=0;r<i.t;++r)e[r+n.t]=n.am(0,i[r],e,r,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&Oe.ZERO.subTo(e,e)}function x3(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function w3(t,e,n){var i=t.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=jn());var a=jn(),c=this.s,l=t.s,d=this.DB-M0(i[i.t-1]);d>0?(i.lShiftTo(d,a),r.lShiftTo(d,n)):(i.copyTo(a),r.copyTo(n));var f=a.t,m=a[f-1];if(m!=0){var p=m*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),v=this.FV/p,b=(1<<this.F1)/p,w=1<<this.F2,S=n.t,R=S-f,k=e??jn();for(a.dlShiftTo(R,k),n.compareTo(k)>=0&&(n[n.t++]=1,n.subTo(k,n)),Oe.ONE.dlShiftTo(f,k),k.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--R>=0;){var N=n[--S]==m?this.DM:Math.floor(n[S]*v+(n[S-1]+w)*b);if((n[S]+=a.am(0,N,n,R,0,f))<N)for(a.dlShiftTo(R,k),n.subTo(k,n);n[S]<--N;)n.subTo(k,n)}e!=null&&(n.drShiftTo(f,e),c!=l&&Oe.ZERO.subTo(e,e)),n.t=f,n.clamp(),d>0&&n.rShiftTo(d,n),c<0&&Oe.ZERO.subTo(n,n)}}}function C3(t){var e=jn();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Oe.ZERO)>0&&t.subTo(e,e),e}function k3(){if(this.t<1)return 0;var t=this[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function E3(t){return this.compareTo(t)==0}function R3(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]+t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i+=t[n],e[n++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e[n++]=i:i<-1&&(e[n++]=this.DV+i),e.t=n,e.clamp()}function A3(t){var e=jn();return this.addTo(t,e),e}function _3(t){var e=jn();return this.subTo(t,e),e}function P3(t){var e=jn();return this.multiplyTo(t,e),e}function D3(t){var e=jn();return this.divRemTo(t,e,null),e}function nc(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function N3(t){var e=jn();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Oe.ZERO)>0&&this.m.subTo(e,e),e}function M3(t){var e=jn();return t.copyTo(e),this.reduce(e),e}function O3(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t[e]&32767,i=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,i,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function I3(t,e){t.squareTo(e),this.reduce(e)}function U3(t,e,n){t.multiplyTo(e,n),this.reduce(n)}nc.prototype.convert=N3;nc.prototype.revert=M3;nc.prototype.reduce=O3;nc.prototype.mulTo=U3;nc.prototype.sqrTo=I3;function L3(t,e,n){var i=t.bitLength(),r,a=N0(1),c=new nc(e);if(i<=0)return a;i<18?r=1:i<48?r=3:i<144?r=4:i<768?r=5:r=6;var l=new Array,d=3,f=r-1,m=(1<<r)-1;if(l[1]=c.convert(this),r>1){var p=jn();for(c.sqrTo(l[1],p);d<=m;)l[d]=jn(),c.mulTo(p,l[d-2],l[d]),d+=2}var v=t.t-1,b,w=!0,S=jn(),R;for(i=M0(t[v])-1;v>=0;){for(i>=f?b=t[v]>>i-f&m:(b=(t[v]&(1<<i+1)-1)<<f-i,v>0&&(b|=t[v-1]>>this.DB+i-f)),d=r;(b&1)==0;)b>>=1,--d;if((i-=d)<0&&(i+=this.DB,--v),w)l[b].copyTo(a),w=!1;else{for(;d>1;)c.sqrTo(a,S),c.sqrTo(S,a),d-=2;d>0?c.sqrTo(a,S):(R=a,a=S,S=R),c.mulTo(S,l[b],a)}for(;v>=0&&(t[v]&1<<i)==0;)c.sqrTo(a,S),R=a,a=S,S=R,--i<0&&(i=this.DB-1,--v)}var k=c.revert(a);return n(null,k),k}Oe.prototype.copyTo=o3;Oe.prototype.fromInt=c3;Oe.prototype.fromString=l3;Oe.prototype.clamp=u3;Oe.prototype.dlShiftTo=g3;Oe.prototype.drShiftTo=v3;Oe.prototype.lShiftTo=y3;Oe.prototype.rShiftTo=b3;Oe.prototype.subTo=S3;Oe.prototype.multiplyTo=T3;Oe.prototype.squareTo=x3;Oe.prototype.divRemTo=w3;Oe.prototype.invDigit=k3;Oe.prototype.addTo=R3;Oe.prototype.toString=d3;Oe.prototype.negate=f3;Oe.prototype.abs=h3;Oe.prototype.compareTo=m3;Oe.prototype.bitLength=p3;Oe.prototype.mod=C3;Oe.prototype.equals=E3;Oe.prototype.add=A3;Oe.prototype.subtract=_3;Oe.prototype.multiply=P3;Oe.prototype.divide=D3;Oe.prototype.modPow=L3;Oe.ZERO=N0(0);Oe.ONE=N0(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function Mp(t){return Nt.Buffer.from(new yU().random(t).toString(),"hex")}var j3=/^[89a-f]/i,B3="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",F3="userAttributes.",vo=function(){function t(n){this.N=new Oe(B3,16),this.g=new Oe("2",16),this.k=new Oe(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=Nt.Buffer.from("Caldera Derived Key","utf8"),this.poolName=n}var e=t.prototype;return e.getSmallAValue=function(){return this.smallAValue},e.getLargeAValue=function(i){var r=this;this.largeAValue?i(null,this.largeAValue):this.calculateA(this.smallAValue,function(a,c){a&&i(a,null),r.largeAValue=c,i(null,r.largeAValue)})},e.generateRandomSmallA=function(){var i=Mp(128).toString("hex"),r=new Oe(i,16);return r},e.generateRandomString=function(){return Mp(40).toString("base64")},e.getRandomPassword=function(){return this.randomPassword},e.getSaltDevices=function(){return this.SaltToHashDevices},e.getVerifierDevices=function(){return this.verifierDevices},e.generateHashDevice=function(i,r,a){var c=this;this.randomPassword=this.generateRandomString();var l=""+i+r+":"+this.randomPassword,d=this.hash(l),f=Mp(16).toString("hex");this.SaltToHashDevices=this.padHex(new Oe(f,16)),this.g.modPow(new Oe(this.hexHash(this.SaltToHashDevices+d),16),this.N,function(m,p){m&&a(m,null),c.verifierDevices=c.padHex(p),a(null,null)})},e.calculateA=function(i,r){var a=this;this.g.modPow(i,this.N,function(c,l){c&&r(c,null),l.mod(a.N).equals(Oe.ZERO)&&r(new Error("Illegal paramater. A mod N cannot be 0."),null),r(null,l)})},e.calculateU=function(i,r){this.UHexHash=this.hexHash(this.padHex(i)+this.padHex(r));var a=new Oe(this.UHexHash,16);return a},e.hash=function(i){var r=new Dl.Sha256;r.update(i);var a=r.digestSync(),c=Nt.Buffer.from(a).toString("hex");return new Array(64-c.length).join("0")+c},e.hexHash=function(i){return this.hash(Nt.Buffer.from(i,"hex"))},e.computehkdf=function(i,r){var a=Nt.Buffer.concat([this.infoBits,Nt.Buffer.from("","utf8")]),c=new Dl.Sha256(r);c.update(i);var l=c.digestSync(),d=new Dl.Sha256(l);d.update(a);var f=d.digestSync(),m=f,p=m.slice(0,16);return p},e.getPasswordAuthenticationKey=function(i,r,a,c,l){var d=this;if(a.mod(this.N).equals(Oe.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,a),this.UValue.equals(Oe.ZERO))throw new Error("U cannot be zero.");var f=""+this.poolName+i+":"+r,m=this.hash(f),p=new Oe(this.hexHash(this.padHex(c)+m),16);this.calculateS(p,a,function(v,b){v&&l(v,null);var w=d.computehkdf(Nt.Buffer.from(d.padHex(b),"hex"),Nt.Buffer.from(d.padHex(d.UValue),"hex"));l(null,w)})},e.calculateS=function(i,r,a){var c=this;this.g.modPow(i,this.N,function(l,d){l&&a(l,null);var f=r.subtract(c.k.multiply(d));f.modPow(c.smallAValue.add(c.UValue.multiply(i)),c.N,function(m,p){m&&a(m,null),a(null,p.mod(c.N))})})},e.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return F3},e.padHex=function(i){if(!(i instanceof Oe))throw new Error("Not a BigInteger");var r=i.compareTo(Oe.ZERO)<0,a=i.abs().toString(16);if(a=a.length%2!==0?"0"+a:a,a=j3.test(a)?"00"+a:a,r){var c=a.split("").map(function(d){var f=~parseInt(d,16)&15;return"0123456789ABCDEF".charAt(f)}).join(""),l=new Oe(c,16).add(Oe.ONE);a=l.toString(16),a.toUpperCase().startsWith("FF8")&&(a=a.substring(2))}return a},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var CE=function(){function t(n){this.jwtToken=n||"",this.payload=this.decodePayload()}var e=t.prototype;return e.getJwtToken=function(){return this.jwtToken},e.getExpiration=function(){return this.payload.exp},e.getIssuedAt=function(){return this.payload.iat},e.decodePayload=function(){var i=this.jwtToken.split(".")[1];try{return JSON.parse(Nt.Buffer.from(i,"base64").toString("utf8"))}catch{return{}}},t}();function V3(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Hg(t,e)}function Hg(t,e){return Hg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Hg(t,e)}var qg=function(t){function e(n){var i=n===void 0?{}:n,r=i.AccessToken;return t.call(this,r||"")||this}return V3(e,t),e}(CE);function z3(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Kg(t,e)}function Kg(t,e){return Kg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Kg(t,e)}var Gg=function(t){function e(n){var i=n===void 0?{}:n,r=i.IdToken;return t.call(this,r||"")||this}return z3(e,t),e}(CE);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Yg=function(){function t(n){var i=n===void 0?{}:n,r=i.RefreshToken;this.token=r||""}var e=t.prototype;return e.getToken=function(){return this.token},t}(),H3="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var q3="aws-amplify/"+H3,kE={userAgent:q3,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},K3=function(){return kE.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Wg=function(){function t(n){var i=n===void 0?{}:n,r=i.IdToken,a=i.RefreshToken,c=i.AccessToken,l=i.ClockDrift;if(c==null||r==null)throw new Error("Id token and Access Token must be present.");this.idToken=r,this.refreshToken=a,this.accessToken=c,this.clockDrift=l===void 0?this.calculateClockDrift():l}var e=t.prototype;return e.getIdToken=function(){return this.idToken},e.getRefreshToken=function(){return this.refreshToken},e.getAccessToken=function(){return this.accessToken},e.getClockDrift=function(){return this.clockDrift},e.calculateClockDrift=function(){var i=Math.floor(new Date/1e3),r=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return i-r},e.isValid=function(){var i=Math.floor(new Date/1e3),r=i-this.clockDrift;return r<this.accessToken.getExpiration()&&r<this.idToken.getExpiration()},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var G3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Y3=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],R1=function(){function t(){}var e=t.prototype;return e.getNowString=function(){var i=new Date,r=Y3[i.getUTCDay()],a=G3[i.getUTCMonth()],c=i.getUTCDate(),l=i.getUTCHours();l<10&&(l="0"+l);var d=i.getUTCMinutes();d<10&&(d="0"+d);var f=i.getUTCSeconds();f<10&&(f="0"+f);var m=i.getUTCFullYear(),p=r+" "+a+" "+c+" "+l+":"+d+":"+f+" UTC "+m;return p},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var W3=function(){function t(n){var i=n===void 0?{}:n,r=i.Name,a=i.Value;this.Name=r||"",this.Value=a||""}var e=t.prototype;return e.getValue=function(){return this.Value},e.setValue=function(i){return this.Value=i,this},e.getName=function(){return this.Name},e.setName=function(i){return this.Name=i,this},e.toString=function(){return JSON.stringify(this)},e.toJSON=function(){return{Name:this.Name,Value:this.Value}},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var ca={},$3=function(){function t(){}return t.setItem=function(n,i){return ca[n]=i,ca[n]},t.getItem=function(n){return Object.prototype.hasOwnProperty.call(ca,n)?ca[n]:void 0},t.removeItem=function(n){return delete ca[n]},t.clear=function(){return ca={},ca},t}(),EE=function(){function t(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=$3}}var e=t.prototype;return e.getStorage=function(){return this.storageWindow},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var X3=typeof navigator<"u",A1=X3?kE.isReactNative?"react-native":navigator.userAgent:"nodejs",$g=function(){function t(n){if(n==null||n.Username==null||n.Pool==null)throw new Error("Username and Pool information are required.");this.username=n.Username||"",this.pool=n.Pool,this.Session=null,this.client=n.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=n.Storage||new EE().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var e=t.prototype;return e.setSignInUserSession=function(i){this.clearCachedUserData(),this.signInUserSession=i,this.cacheTokens()},e.getSignInUserSession=function(){return this.signInUserSession},e.getUsername=function(){return this.username},e.getAuthenticationFlowType=function(){return this.authenticationFlowType},e.setAuthenticationFlowType=function(i){this.authenticationFlowType=i},e.initiateAuth=function(i,r){var a=this,c=i.getAuthParameters();c.USERNAME=this.username;var l=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),d={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:c,ClientMetadata:l};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",d,function(f,m){if(f)return r.onFailure(f);var p=m.ChallengeName,v=m.ChallengeParameters;return p==="CUSTOM_CHALLENGE"?(a.Session=m.Session,r.customChallenge(v)):(a.signInUserSession=a.getCognitoUserSession(m.AuthenticationResult),a.cacheTokens(),r.onSuccess(a.signInUserSession))})},e.authenticateUser=function(i,r){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(i,r):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(i,r):r.onFailure(new Error("Authentication flow type is invalid."))},e.authenticateUserDefaultAuth=function(i,r){var a=this,c=new vo(this.pool.getUserPoolName()),l=new R1,d,f,m={};this.deviceKey!=null&&(m.DEVICE_KEY=this.deviceKey),m.USERNAME=this.username,c.getLargeAValue(function(p,v){p&&r.onFailure(p),m.SRP_A=v.toString(16),a.authenticationFlowType==="CUSTOM_AUTH"&&(m.CHALLENGE_NAME="SRP_A");var b=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),w={AuthFlow:a.authenticationFlowType,ClientId:a.pool.getClientId(),AuthParameters:m,ClientMetadata:b};a.getUserContextData(a.username)&&(w.UserContextData=a.getUserContextData(a.username)),a.client.request("InitiateAuth",w,function(S,R){if(S)return r.onFailure(S);var k=R.ChallengeParameters;a.username=k.USER_ID_FOR_SRP,a.userDataKey=a.keyPrefix+"."+a.username+".userData",d=new Oe(k.SRP_B,16),f=new Oe(k.SALT,16),a.getCachedDeviceKeyAndPassword(),c.getPasswordAuthenticationKey(a.username,i.getPassword(),d,f,function(N,O){N&&r.onFailure(N);var I=l.getNowString(),D=Nt.Buffer.concat([Nt.Buffer.from(a.pool.getUserPoolName(),"utf8"),Nt.Buffer.from(a.username,"utf8"),Nt.Buffer.from(k.SECRET_BLOCK,"base64"),Nt.Buffer.from(I,"utf8")]),j=new Dl.Sha256(O);j.update(D);var H=j.digestSync(),z=Nt.Buffer.from(H).toString("base64"),G={};G.USERNAME=a.username,G.PASSWORD_CLAIM_SECRET_BLOCK=k.SECRET_BLOCK,G.TIMESTAMP=I,G.PASSWORD_CLAIM_SIGNATURE=z,a.deviceKey!=null&&(G.DEVICE_KEY=a.deviceKey);var ie=function(Ee,Ae){return a.client.request("RespondToAuthChallenge",Ee,function(Me,Y){return Me&&Me.code==="ResourceNotFoundException"&&Me.message.toLowerCase().indexOf("device")!==-1?(G.DEVICE_KEY=null,a.deviceKey=null,a.randomPassword=null,a.deviceGroupKey=null,a.clearCachedDeviceKeyAndPassword(),ie(Ee,Ae)):Ae(Me,Y)})},re={ChallengeName:"PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:G,Session:R.Session,ClientMetadata:b};a.getUserContextData()&&(re.UserContextData=a.getUserContextData()),ie(re,function(de,Ee){return de?r.onFailure(de):a.authenticateUserInternal(Ee,c,r)})})})})},e.authenticateUserPlainUsernamePassword=function(i,r){var a=this,c={};if(c.USERNAME=this.username,c.PASSWORD=i.getPassword(),!c.PASSWORD){r.onFailure(new Error("PASSWORD parameter is required"));return}var l=new vo(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(c.DEVICE_KEY=this.deviceKey);var d=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),f={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:c,ClientMetadata:d};this.getUserContextData(this.username)&&(f.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",f,function(m,p){return m?r.onFailure(m):a.authenticateUserInternal(p,l,r)})},e.authenticateUserInternal=function(i,r,a){var c=this,l=i.ChallengeName,d=i.ChallengeParameters;if(l==="SMS_MFA")return this.Session=i.Session,a.mfaRequired(l,d);if(l==="SELECT_MFA_TYPE")return this.Session=i.Session,a.selectMFAType(l,d);if(l==="MFA_SETUP")return this.Session=i.Session,a.mfaSetup(l,d);if(l==="SOFTWARE_TOKEN_MFA")return this.Session=i.Session,a.totpRequired(l,d);if(l==="CUSTOM_CHALLENGE")return this.Session=i.Session,a.customChallenge(d);if(l==="NEW_PASSWORD_REQUIRED"){this.Session=i.Session;var f=null,m=null,p=[],v=r.getNewPasswordRequiredChallengeUserAttributePrefix();if(d&&(f=JSON.parse(i.ChallengeParameters.userAttributes),m=JSON.parse(i.ChallengeParameters.requiredAttributes)),m)for(var b=0;b<m.length;b++)p[b]=m[b].substr(v.length);return a.newPasswordRequired(f,p)}if(l==="DEVICE_SRP_AUTH"){this.Session=i.Session,this.getDeviceResponse(a);return}this.signInUserSession=this.getCognitoUserSession(i.AuthenticationResult),this.challengeName=l,this.cacheTokens();var w=i.AuthenticationResult.NewDeviceMetadata;if(w==null)return a.onSuccess(this.signInUserSession);r.generateHashDevice(i.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(S){if(S)return a.onFailure(S);var R={Salt:Nt.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Nt.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};c.verifierDevices=R.PasswordVerifier,c.deviceGroupKey=w.DeviceGroupKey,c.randomPassword=r.getRandomPassword(),c.client.request("ConfirmDevice",{DeviceKey:w.DeviceKey,AccessToken:c.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:R,DeviceName:A1},function(k,N){return k?a.onFailure(k):(c.deviceKey=i.AuthenticationResult.NewDeviceMetadata.DeviceKey,c.cacheDeviceKeyAndPassword(),N.UserConfirmationNecessary===!0?a.onSuccess(c.signInUserSession,N.UserConfirmationNecessary):a.onSuccess(c.signInUserSession))})})},e.completeNewPasswordChallenge=function(i,r,a,c){var l=this;if(!i)return a.onFailure(new Error("New password is required."));var d=new vo(this.pool.getUserPoolName()),f=d.getNewPasswordRequiredChallengeUserAttributePrefix(),m={};r&&Object.keys(r).forEach(function(v){m[f+v]=r[v]}),m.NEW_PASSWORD=i,m.USERNAME=this.username;var p={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:m,Session:this.Session,ClientMetadata:c};this.getUserContextData()&&(p.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",p,function(v,b){return v?a.onFailure(v):l.authenticateUserInternal(b,d,a)})},e.getDeviceResponse=function(i,r){var a=this,c=new vo(this.deviceGroupKey),l=new R1,d={};d.USERNAME=this.username,d.DEVICE_KEY=this.deviceKey,c.getLargeAValue(function(f,m){f&&i.onFailure(f),d.SRP_A=m.toString(16);var p={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a.pool.getClientId(),ChallengeResponses:d,ClientMetadata:r,Session:a.Session};a.getUserContextData()&&(p.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",p,function(v,b){if(v)return i.onFailure(v);var w=b.ChallengeParameters,S=new Oe(w.SRP_B,16),R=new Oe(w.SALT,16);c.getPasswordAuthenticationKey(a.deviceKey,a.randomPassword,S,R,function(k,N){if(k)return i.onFailure(k);var O=l.getNowString(),I=Nt.Buffer.concat([Nt.Buffer.from(a.deviceGroupKey,"utf8"),Nt.Buffer.from(a.deviceKey,"utf8"),Nt.Buffer.from(w.SECRET_BLOCK,"base64"),Nt.Buffer.from(O,"utf8")]),D=new Dl.Sha256(N);D.update(I);var j=D.digestSync(),H=Nt.Buffer.from(j).toString("base64"),z={};z.USERNAME=a.username,z.PASSWORD_CLAIM_SECRET_BLOCK=w.SECRET_BLOCK,z.TIMESTAMP=O,z.PASSWORD_CLAIM_SIGNATURE=H,z.DEVICE_KEY=a.deviceKey;var G={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:z,Session:b.Session};a.getUserContextData()&&(G.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",G,function(ie,re){return ie?i.onFailure(ie):(a.signInUserSession=a.getCognitoUserSession(re.AuthenticationResult),a.cacheTokens(),i.onSuccess(a.signInUserSession))})})})})},e.confirmRegistration=function(i,r,a,c){var l={ClientId:this.pool.getClientId(),ConfirmationCode:i,Username:this.username,ForceAliasCreation:r,ClientMetadata:c};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",l,function(d){return d?a(d,null):a(null,"SUCCESS")})},e.sendCustomChallengeAnswer=function(i,r,a){var c=this,l={};l.USERNAME=this.username,l.ANSWER=i;var d=new vo(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(l.DEVICE_KEY=this.deviceKey);var f={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:l,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(m,p){return m?r.onFailure(m):c.authenticateUserInternal(p,d,r)})},e.sendMFACode=function(i,r,a,c){var l=this,d={};d.USERNAME=this.username,d.SMS_MFA_CODE=i;var f=a||"SMS_MFA";f==="SOFTWARE_TOKEN_MFA"&&(d.SOFTWARE_TOKEN_MFA_CODE=i),this.deviceKey!=null&&(d.DEVICE_KEY=this.deviceKey);var m={ChallengeName:f,ChallengeResponses:d,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:c};this.getUserContextData()&&(m.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",m,function(p,v){if(p)return r.onFailure(p);var b=v.ChallengeName;if(b==="DEVICE_SRP_AUTH"){l.getDeviceResponse(r);return}if(l.signInUserSession=l.getCognitoUserSession(v.AuthenticationResult),l.cacheTokens(),v.AuthenticationResult.NewDeviceMetadata==null)return r.onSuccess(l.signInUserSession);var w=new vo(l.pool.getUserPoolName());w.generateHashDevice(v.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,v.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(S){if(S)return r.onFailure(S);var R={Salt:Nt.Buffer.from(w.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Nt.Buffer.from(w.getVerifierDevices(),"hex").toString("base64")};l.verifierDevices=R.PasswordVerifier,l.deviceGroupKey=v.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,l.randomPassword=w.getRandomPassword(),l.client.request("ConfirmDevice",{DeviceKey:v.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:l.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:R,DeviceName:A1},function(k,N){return k?r.onFailure(k):(l.deviceKey=v.AuthenticationResult.NewDeviceMetadata.DeviceKey,l.cacheDeviceKeyAndPassword(),N.UserConfirmationNecessary===!0?r.onSuccess(l.signInUserSession,N.UserConfirmationNecessary):r.onSuccess(l.signInUserSession))})})})},e.changePassword=function(i,r,a,c){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return a(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:i,ProposedPassword:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:c},function(l){return l?a(l,null):a(null,"SUCCESS")})},e.enableMFA=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);var r=[],a={DeliveryMedium:"SMS",AttributeName:"phone_number"};r.push(a),this.client.request("SetUserSettings",{MFAOptions:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?i(c,null):i(null,"SUCCESS")})},e.setUserMfaPreference=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:i,SoftwareTokenMfaSettings:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?a(c,null):a(null,"SUCCESS")})},e.disableMFA=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);var r=[];this.client.request("SetUserSettings",{MFAOptions:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i(a,null):i(null,"SUCCESS")})},e.deleteUser=function(i,r){var a=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(c){return c?i(c,null):(a.clearCachedUser(),i(null,"SUCCESS"))})},e.updateAttributes=function(i,r,a){var c=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:i,ClientMetadata:a},function(l,d){return l?r(l,null):c.getUserData(function(){return r(null,"SUCCESS",d)},{bypassCache:!0})})},e.getUserAttributes=function(i){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,a){if(r)return i(r,null);for(var c=[],l=0;l<a.UserAttributes.length;l++){var d={Name:a.UserAttributes[l].Name,Value:a.UserAttributes[l].Value},f=new W3(d);c.push(f)}return i(null,c)})},e.getMFAOptions=function(i){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,a){return r?i(r,null):i(null,a.MFAOptions)})},e.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},e.refreshSessionIfPossible=function(i){var r=this;return i===void 0&&(i={}),new Promise(function(a){var c=r.signInUserSession.getRefreshToken();c&&c.getToken()?r.refreshSession(c,a,i.clientMetadata):a()})},e.getUserData=function(i,r){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),i(new Error("User is not authenticated"),null);var c=this.getUserDataFromCache();if(!c){this.fetchUserData().then(function(l){i(null,l)}).catch(i);return}if(this.isFetchUserDataAndTokenRequired(r)){this.fetchUserData().then(function(l){return a.refreshSessionIfPossible(r).then(function(){return l})}).then(function(l){return i(null,l)}).catch(i);return}try{i(null,JSON.parse(c));return}catch(l){this.clearCachedUserData(),i(l,null);return}},e.getUserDataFromCache=function(){var i=this.storage.getItem(this.userDataKey);return i},e.isFetchUserDataAndTokenRequired=function(i){var r=i||{},a=r.bypassCache,c=a===void 0?!1:a;return c},e.fetchUserData=function(){var i=this;return this.createGetUserRequest().then(function(r){return i.cacheUserData(r),r})},e.deleteAttributes=function(i,r){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?r(c,null):a.getUserData(function(){return r(null,"SUCCESS")},{bypassCache:!0})})},e.resendConfirmationCode=function(i,r){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:r};this.client.request("ResendConfirmationCode",a,function(c,l){return c?i(c,null):i(null,l)})},e.getSession=function(i,r){if(r===void 0&&(r={}),this.username==null)return i(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return i(null,this.signInUserSession);var a="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,c=a+".idToken",l=a+".accessToken",d=a+".refreshToken",f=a+".clockDrift";if(this.storage.getItem(c)){var m=new Gg({IdToken:this.storage.getItem(c)}),p=new qg({AccessToken:this.storage.getItem(l)}),v=new Yg({RefreshToken:this.storage.getItem(d)}),b=parseInt(this.storage.getItem(f),0)||0,w={IdToken:m,AccessToken:p,RefreshToken:v,ClockDrift:b},S=new Wg(w);if(S.isValid())return this.signInUserSession=S,i(null,this.signInUserSession);if(!v.getToken())return i(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(v,i,r.clientMetadata)}else i(new Error("Local storage is missing an ID Token, Please authenticate"),null)},e.refreshSession=function(i,r,a){var c=this,l=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(r):r,d={};d.REFRESH_TOKEN=i.getToken();var f="CognitoIdentityServiceProvider."+this.pool.getClientId(),m=f+".LastAuthUser";if(this.storage.getItem(m)){this.username=this.storage.getItem(m);var p=f+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(p),d.DEVICE_KEY=this.deviceKey}var v={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:d,ClientMetadata:a};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.requestWithRetry("InitiateAuth",v,function(b,w){if(b)return b.code==="NotAuthorizedException"&&c.clearCachedUser(),l(b,null);if(w){var S=w.AuthenticationResult;return Object.prototype.hasOwnProperty.call(S,"RefreshToken")||(S.RefreshToken=i.getToken()),c.signInUserSession=c.getCognitoUserSession(S),c.cacheTokens(),l(null,c.signInUserSession)}})},e.cacheTokens=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId(),r=i+"."+this.username+".idToken",a=i+"."+this.username+".accessToken",c=i+"."+this.username+".refreshToken",l=i+"."+this.username+".clockDrift",d=i+".LastAuthUser";this.storage.setItem(r,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(c,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(l,""+this.signInUserSession.getClockDrift()),this.storage.setItem(d,this.username)},e.cacheUserData=function(i){this.storage.setItem(this.userDataKey,JSON.stringify(i))},e.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},e.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},e.cacheDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.setItem(r,this.deviceKey),this.storage.setItem(a,this.randomPassword),this.storage.setItem(c,this.deviceGroupKey)},e.getCachedDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.getItem(r)&&(this.deviceKey=this.storage.getItem(r),this.randomPassword=this.storage.getItem(a),this.deviceGroupKey=this.storage.getItem(c))},e.clearCachedDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.removeItem(r),this.storage.removeItem(a),this.storage.removeItem(c)},e.clearCachedTokens=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId(),r=i+"."+this.username+".idToken",a=i+"."+this.username+".accessToken",c=i+"."+this.username+".refreshToken",l=i+".LastAuthUser",d=i+"."+this.username+".clockDrift";this.storage.removeItem(r),this.storage.removeItem(a),this.storage.removeItem(c),this.storage.removeItem(l),this.storage.removeItem(d)},e.getCognitoUserSession=function(i){var r=new Gg(i),a=new qg(i),c=new Yg(i),l={IdToken:r,AccessToken:a,RefreshToken:c};return new Wg(l)},e.forgotPassword=function(i,r){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",a,function(c,l){return c?i.onFailure(c):typeof i.inputVerificationCode=="function"?i.inputVerificationCode(l):i.onSuccess(l)})},e.confirmPassword=function(i,r,a,c){var l={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:i,Password:r,ClientMetadata:c};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",l,function(d){return d?a.onFailure(d):a.onSuccess("SUCCESS")})},e.getAttributeVerificationCode=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(c,l){return c?r.onFailure(c):typeof r.inputVerificationCode=="function"?r.inputVerificationCode(l):r.onSuccess("SUCCESS")})},e.verifyAttribute=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:i,Code:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?a.onFailure(c):a.onSuccess("SUCCESS")})},e.getDevice=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(r,a){return r?i.onFailure(r):i.onSuccess(a)})},e.forgetSpecificDevice=function(i,r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:i},function(a){return a?r.onFailure(a):r.onSuccess("SUCCESS")})},e.forgetDevice=function(i){var r=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:i.onFailure,onSuccess:function(c){return r.deviceKey=null,r.deviceGroupKey=null,r.randomPassword=null,r.clearCachedDeviceKeyAndPassword(),i.onSuccess(c)}})},e.setDeviceStatusRemembered=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(r){return r?i.onFailure(r):i.onSuccess("SUCCESS")})},e.setDeviceStatusNotRemembered=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(r){return r?i.onFailure(r):i.onSuccess("SUCCESS")})},e.listDevices=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));var c={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:i};r&&(c.PaginationToken=r),this.client.request("ListDevices",c,function(l,d){return l?a.onFailure(l):a.onSuccess(d)})},e.globalSignOut=function(i){var r=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i.onFailure(a):(r.clearCachedUser(),i.onSuccess("SUCCESS"))})},e.signOut=function(i){var r=this;if(!i||typeof i!="function"){this.cleanClientData();return}this.getSession(function(a,c){if(a)return i(a);r.revokeTokens(function(l){r.cleanClientData(),i(l)})})},e.revokeTokens=function(i){if(i===void 0&&(i=function(){}),typeof i!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var r=new Error("User is not authenticated");return i(r)}if(!this.signInUserSession.getAccessToken()){var a=new Error("No Access token available");return i(a)}var c=this.signInUserSession.getRefreshToken().getToken(),l=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(l)&&c)return this.revokeToken({token:c,callback:i});i()},e.isSessionRevocable=function(i){if(i&&typeof i.decodePayload=="function")try{var r=i.decodePayload(),a=r.origin_jti;return!!a}catch{}return!1},e.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},e.revokeToken=function(i){var r=i.token,a=i.callback;this.client.requestWithRetry("RevokeToken",{Token:r,ClientId:this.pool.getClientId()},function(c){if(c)return a(c);a()})},e.sendMFASelectionAnswer=function(i,r){var a=this,c={};c.USERNAME=this.username,c.ANSWER=i;var l={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:c,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",l,function(d,f){if(d)return r.onFailure(d);if(a.Session=f.Session,i==="SMS_MFA")return r.mfaRequired(f.ChallengeName,f.ChallengeParameters);if(i==="SOFTWARE_TOKEN_MFA")return r.totpRequired(f.ChallengeName,f.ChallengeParameters)})},e.getUserContextData=function(){var i=this.pool;return i.getUserContextData(this.username)},e.associateSoftwareToken=function(i){var r=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a,c){return a?i.onFailure(a):i.associateSecretCode(c.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(a,c){return a?i.onFailure(a):(r.Session=c.Session,i.associateSecretCode(c.SecretCode))})},e.verifySoftwareToken=function(i,r,a){var c=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:i,FriendlyDeviceName:r},function(l,d){return l?a.onFailure(l):a.onSuccess(d)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:i,FriendlyDeviceName:r},function(l,d){if(l)return a.onFailure(l);c.Session=d.Session;var f={};f.USERNAME=c.username;var m={ChallengeName:"MFA_SETUP",ClientId:c.pool.getClientId(),ChallengeResponses:f,Session:c.Session};c.getUserContextData()&&(m.UserContextData=c.getUserContextData()),c.client.request("RespondToAuthChallenge",m,function(p,v){return p?a.onFailure(p):(c.signInUserSession=c.getCognitoUserSession(v.AuthenticationResult),c.cacheTokens(),a.onSuccess(c.signInUserSession))})})},t}();function Z3(t,e){return e=e||{},new Promise(function(n,i){var r=new XMLHttpRequest,a=[],c=[],l={},d=function(){return{ok:(r.status/100|0)==2,statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:d,headers:{keys:function(){return a},entries:function(){return c},get:function(m){return l[m.toLowerCase()]},has:function(m){return m.toLowerCase()in l}}}};for(var f in r.open(e.method||"get",t,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(m,p,v){a.push(p=p.toLowerCase()),c.push([p,v]),l[p]=l[p]?l[p]+","+v:v}),n(d())},r.onerror=i,r.withCredentials=e.credentials=="include",e.headers)r.setRequestHeader(f,e.headers[f]);r.send(e.body||null)})}const J3=Object.freeze(Object.defineProperty({__proto__:null,default:Z3},Symbol.toStringTag,{value:"Module"})),_1=x0(J3);var Op,P1;function Q3(){return P1||(P1=1,Op=self.fetch||(self.fetch=_1.default||_1)),Op}Q3();function Ro(){}Ro.prototype.userAgent=K3();var eL=function(e){var n=Ro.category?" "+Ro.category:"",i=Ro.framework?" framework/"+Ro.framework:"",r=""+Ro.prototype.userAgent+n+i;return r};function tL(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,zl(t,e)}function Xg(t){var e=typeof Map=="function"?new Map:void 0;return Xg=function(i){if(i===null||!iL(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return nL(i,arguments,Zg(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),zl(r,i)},Xg(t)}function nL(t,e,n){if(RE())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&zl(r,n.prototype),r}function RE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RE=function(){return!!t})()}function iL(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function zl(t,e){return zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zl(t,e)}function Zg(t){return Zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zg(t)}var rL=function(t){function e(n,i,r,a){var c;return c=t.call(this,n)||this,c.code=i,c.name=r,c.statusCode=a,c}return tL(e,t),e}(Xg(Error)),sL=function(){function t(n,i,r){this.endpoint=i||"https://cognito-idp."+n+".amazonaws.com/";var a=r||{},c=a.credentials;this.fetchOptions=c?{credentials:c}:{}}var e=t.prototype;return e.promisifyRequest=function(i,r){var a=this;return new Promise(function(c,l){a.request(i,r,function(d,f){d?l(new rL(d.message,d.code,d.name,d.statusCode)):c(f)})})},e.requestWithRetry=function(i,r,a){var c=this,l=5*1e3;cL(function(d){return new Promise(function(f,m){c.request(i,d,function(p,v){p?m(p):f(v)})})},[r],l).then(function(d){return a(null,d)}).catch(function(d){return a(d)})},e.request=function(i,r,a){var c={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+i,"X-Amz-User-Agent":eL(),"Cache-Control":"no-store"},l=Object.assign({},this.fetchOptions,{headers:c,method:"POST",mode:"cors",body:JSON.stringify(r)}),d;fetch(this.endpoint,l).then(function(f){return d=f,f},function(f){throw f instanceof TypeError?new Error("Network error"):f}).then(function(f){return f.json().catch(function(){return{}})}).then(function(f){if(d.ok)return a(null,f);var m=(f.__type||f.code).split("#").pop(),p=new Error(f.message||f.Message||null);return p.name=m,p.code=m,a(p)}).catch(function(f){if(d&&d.headers&&d.headers.get("x-amzn-errortype"))try{var m=d.headers.get("x-amzn-errortype").split(":")[0],p=new Error(d.status?d.status.toString():null);return p.code=m,p.name=m,p.statusCode=d.status,a(p)}catch{return a(f)}else f instanceof Error&&f.message==="Network error"&&(f.code="NetworkError");return a(f)})},t}(),Ad={debug:function(){}},aL=function(e){var n="nonRetryable";return e&&e[n]};function AE(t,e,n,i){if(i===void 0&&(i=1),typeof t!="function")throw Error("functionToRetry must be a function");return Ad.debug(t.name+" attempt #"+i+" with args: "+JSON.stringify(e)),t.apply(void 0,e).catch(function(r){if(Ad.debug("error on "+t.name,r),aL(r))throw Ad.debug(t.name+" non retryable error",r),r;var a=n(i,e,r);if(Ad.debug(t.name+" retrying in "+a+" ms"),a!==!1)return new Promise(function(c){return setTimeout(c,a)}).then(function(){return AE(t,e,n,i+1)});throw r})}function oL(t){var e=100,n=100;return function(i){var r=Math.pow(2,i)*e+n*Math.random();return r>t?!1:r}}function cL(t,e,n){return AE(t,e,oL(n))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var lL=55,uL=function(){function t(n,i){var r=n||{},a=r.UserPoolId,c=r.ClientId,l=r.endpoint,d=r.fetchOptions,f=r.AdvancedSecurityDataCollectionFlag;if(!a||!c)throw new Error("Both UserPoolId and ClientId are required.");if(a.length>lL||!/^[\w-]+_[0-9a-zA-Z]+$/.test(a))throw new Error("Invalid UserPoolId format.");var m=a.split("_")[0];this.userPoolId=a,this.clientId=c,this.client=new sL(m,l,d),this.advancedSecurityDataCollectionFlag=f!==!1,this.storage=n.Storage||new EE().getStorage(),i&&(this.wrapRefreshSessionCallback=i)}var e=t.prototype;return e.getUserPoolId=function(){return this.userPoolId},e.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},e.getClientId=function(){return this.clientId},e.signUp=function(i,r,a,c,l,d){var f=this,m={ClientId:this.clientId,Username:i,Password:r,UserAttributes:a,ValidationData:c,ClientMetadata:d};this.getUserContextData(i)&&(m.UserContextData=this.getUserContextData(i)),this.client.request("SignUp",m,function(p,v){if(p)return l(p,null);var b={Username:i,Pool:f,Storage:f.storage},w={user:new $g(b),userConfirmed:v.UserConfirmed,userSub:v.UserSub,codeDeliveryDetails:v.CodeDeliveryDetails};return l(null,w)})},e.getCurrentUser=function(){var i="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",r=this.storage.getItem(i);if(r){var a={Username:r,Pool:this,Storage:this.storage};return new $g(a)}return null},e.getUserContextData=function(i){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var r=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var a=r.getData(i,this.userPoolId,this.clientId);if(a){var c={EncodedData:a};return c}}return{}}},t}(),Ip={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */var D1;function dL(){return D1||(D1=1,function(t,e){(function(n){var i;if(t.exports=n(),i=!0,!i){var r=window.Cookies,a=window.Cookies=n();a.noConflict=function(){return window.Cookies=r,a}}})(function(){function n(){for(var a=0,c={};a<arguments.length;a++){var l=arguments[a];for(var d in l)c[d]=l[d]}return c}function i(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(a){function c(){}function l(f,m,p){if(!(typeof document>"u")){p=n({path:"/"},c.defaults,p),typeof p.expires=="number"&&(p.expires=new Date(new Date*1+p.expires*864e5)),p.expires=p.expires?p.expires.toUTCString():"";try{var v=JSON.stringify(m);/^[\{\[]/.test(v)&&(m=v)}catch{}m=a.write?a.write(m,f):encodeURIComponent(String(m)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),f=encodeURIComponent(String(f)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var b="";for(var w in p)p[w]&&(b+="; "+w,p[w]!==!0&&(b+="="+p[w].split(";")[0]));return document.cookie=f+"="+m+b}}function d(f,m){if(!(typeof document>"u")){for(var p={},v=document.cookie?document.cookie.split("; "):[],b=0;b<v.length;b++){var w=v[b].split("="),S=w.slice(1).join("=");!m&&S.charAt(0)==='"'&&(S=S.slice(1,-1));try{var R=i(w[0]);if(S=(a.read||a)(S,R)||i(S),m)try{S=JSON.parse(S)}catch{}if(p[R]=S,f===R)break}catch{}}return f?p[f]:p}}return c.set=l,c.get=function(f){return d(f,!1)},c.getJSON=function(f){return d(f,!0)},c.remove=function(f,m){l(f,"",n(m,{expires:-1}))},c.defaults={},c.withConverter=r,c}return r(function(){})})}(Ip)),Ip.exports}dL();class fL{debug(e,...n){}info(e,...n){console.info(`[INFO] ${e}`,...n)}warn(e,...n){console.warn(`[WARN] ${e}`,...n)}error(e,...n){console.error(`[ERROR] ${e}`,...n)}}const Ge=new fL;class hL{config;userPool;constructor(e){this.config=e;try{this.userPool=new uL({UserPoolId:e.userPoolId,ClientId:e.clientId}),Ge.info("CognitoUserPool initialized successfully")}catch(n){throw Ge.error("Failed to initialize CognitoUserPool:",n),n}}initiateLogin(e,n){Ge.info("Cognito Config:",this.config),Ge.info("Redirect URI being sent:",this.config.redirectUri);const i=new URLSearchParams({client_id:this.config.clientId,response_type:"code",scope:"openid email profile",redirect_uri:this.config.redirectUri,identity_provider:e});n&&i.set("state",btoa(JSON.stringify(n)));const r=`https://${this.config.domain}/oauth2/authorize?${i.toString()}`;Ge.info("Login URL:",r),window.location.href=r}getCurrentUser(){return this.userPool.getCurrentUser()}async getCurrentSession(){const e=this.getCurrentUser();return e?new Promise((n,i)=>{e.getSession((r,a)=>{r?i(r):n(a)})}):null}async refreshSession(e){const n=this.getCurrentUser();if(!n)throw new Error("No current user found");return new Promise((i,r)=>{n.refreshSession(e,(a,c)=>{a?r(a):c?i(c):r(new Error("Failed to refresh session"))})})}async exchangeCodeForTokens(e){const n=`https://${this.config.domain}/oauth2/token`;Ge.info("Token exchange - Code:",e),Ge.info("Token exchange - Redirect URI:",this.config.redirectUri);const i=new URLSearchParams({grant_type:"authorization_code",client_id:this.config.clientId,code:e,redirect_uri:this.config.redirectUri});Ge.info("Token exchange - Request body:",i.toString()),Ge.info("Token exchange - Endpoint:",n);const r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()});if(Ge.info("Token exchange - Response status:",r.status),!r.ok){const c=await r.text();throw Ge.error("Token exchange - Error response:",c),new Error(`Token exchange failed: ${r.status} ${c}`)}const a=await r.json();return Ge.info("Token exchange - Success:",a),a}async getUserInfo(e){const n=`https://${this.config.domain}/oauth2/userInfo`,i=await fetch(n,{headers:{Authorization:`Bearer ${e}`}});if(!i.ok){const r=await i.text();throw new Error(`Failed to fetch user info: ${i.status} ${r}`)}return i.json()}async getUserInfoFromSession(e){const n=e.getAccessToken().getJwtToken();return this.getUserInfo(n)}async handleOAuthCallback(e){const n=await this.exchangeCodeForTokens(e),r=JSON.parse(atob(n.id_token.split(".")[1])).sub,a=new $g({Username:r,Pool:this.userPool}),c=new Gg({IdToken:n.id_token}),l=new qg({AccessToken:n.access_token}),d=new Yg({RefreshToken:n.refresh_token}),f=new Wg({IdToken:c,AccessToken:l,RefreshToken:d});a.setSignInUserSession(f),window.dispatchEvent(new CustomEvent("tokensChanged",{detail:"saved"}))}signOut(){const e=this.getCurrentUser();e&&e.signOut();const n=new URLSearchParams({client_id:this.config.clientId,logout_uri:this.config.logoutUri}),i=`https://${this.config.domain}/logout?${n.toString()}`;window.location.href=i}}const mL={domain:"auth.test.ladderr.ai",clientId:"1vjqgkgsa283flpnuju0orim4v",userPoolId:"us-west-2_VzuJZzMgD",region:"us-west-2",redirectUri:"https://test.ladderr.ai/auth/callback",logoutUri:"https://test.ladderr.ai/auth/logout"};let Up=null;const au=()=>(Up||(Up=new hL(mL)),Up);class yo extends Error{constructor(e,n,i=!1,r){super(e),this.code=n,this.isRetryable=i,this.originalError=r,this.name="AuthError"}}const N1=(t,e)=>{if(t instanceof yo)return t;const n=t instanceof Error?t.message:String(t);return Ge.error(`Auth error in ${e}:`,t),n.includes("NetworkError")||n.includes("fetch")?new yo("Network error occurred","NETWORK_ERROR",!0,t instanceof Error?t:void 0):n.includes("expired")||n.includes("invalid")?new yo("Authentication token expired","TOKEN_EXPIRED",!1,t instanceof Error?t:void 0):n.includes("unauthorized")||n.includes("401")?new yo("Unauthorized access","UNAUTHORIZED",!1,t instanceof Error?t:void 0):n.includes("forbidden")||n.includes("403")?new yo("Access forbidden","FORBIDDEN",!1,t instanceof Error?t:void 0):new yo("Authentication failed","UNKNOWN_ERROR",!1,t instanceof Error?t:void 0)};class pL{baseURL;constructor(){this.baseURL="https://api-test.ladderr.ai"}async makeRequest(e,n){const{accessToken:i,...r}=n,a={"Content-Type":"application/json",...r.headers};i&&(a.Authorization=`Bearer ${i}`);const c=await fetch(`${this.baseURL}${e}`,{...r,headers:a});if(!c.ok){let l=`API Error: ${c.status} ${c.statusText}`;try{const d=await c.json();l=d.detail||l,Ge.error("API Error:",d)}catch{Ge.error("Failed to parse error response")}throw new Error(l)}return c.json()}async syncUser(e){Ge.info("Syncing user profile with backend");try{const n=await this.makeRequest("/api/users/sync",{method:"POST",accessToken:e});return Ge.info("User sync successful:",n),n}catch(n){throw Ge.error("User sync failed:",n),n}}async getUserFeatures(e){Ge.info("Fetching user feature flags from backend");try{const n=await this.makeRequest("/api/users/features",{method:"GET",accessToken:e});return Ge.info("User features fetched successfully:",n),n}catch(n){throw Ge.error("Failed to fetch user features:",n),n}}}const _E=new pL,PE=T.createContext(void 0),gL=({children:t})=>{const[e,n]=T.useState(null),[i,r]=T.useState(!0),[a,c]=T.useState(!1),l=au(),d=T.useCallback(k=>{if(!k)return!1;try{if(!k.isValid())return!1;const N=k.getAccessToken(),O=k.getIdToken(),I=k.getRefreshToken();return!!(N&&O&&I)}catch(N){return Ge.error("Session validation failed:",N),!1}},[]),f=T.useCallback(async()=>{r(!0);try{const k=await l.getCurrentSession();if(k&&d(k))try{const N=await l.getUserInfoFromSession(k);n({id:N.sub,email:N.email,name:N.name,picture:N.picture,username:N["cognito:username"]})}catch(N){const O=N1(N,"loadUserFromSession");if(Ge.error("Failed to load user info:",O),!O.isRetryable){const I=l.getCurrentUser();I&&I.signOut(),n(null)}}else n(null)}catch(k){const N=N1(k,"getSession");Ge.error("Failed to get session:",N),n(null)}finally{r(!1),c(!0)}},[l,d]),m=T.useCallback(k=>{Ge.info("Session change detected:",k.detail),k.detail==="cleared"?(n(null),r(!1)):k.detail==="saved"&&f()},[f]);T.useEffect(()=>(f(),window.addEventListener("tokensChanged",m),()=>{window.removeEventListener("tokensChanged",m)}),[f,m]);const R={user:e,loading:i,isAuthenticated:a&&!i&&!!e,signInWithProvider:(k,N)=>{l.initiateLogin(k,N)},signOut:()=>{const k=l.getCurrentUser();k&&k.signOut(),l.signOut()},clearLocalTokens:()=>{n(null),r(!1),Ge.info("Local tokens cleared.")},refreshSession:async()=>{r(!0),await f()},handleSuccessfulLogin:async()=>{await f();const k=await l.getCurrentSession();if(k&&d(k)){const N=k.getAccessToken().getJwtToken();try{await _E.syncUser(N),Ge.info("User profile synced successfully after new login")}catch(O){Ge.error("Failed to sync user profile after new login:",O)}}}};return x.jsx(PE.Provider,{value:R,children:t})};class vL extends T.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){Ge.error("Auth error boundary caught an error:",e,n),(e.message.includes("auth")||e.message.includes("token")||e.message.includes("session"))&&Ge.error("Authentication-related error detected:",{error:e.message,stack:e.stack,componentStack:n.componentStack})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:x.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:x.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Authentication Error"}),x.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Something went wrong with the authentication process. Please try refreshing the page."}),x.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Refresh Page"})]})})}):this.props.children}}/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bL=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),M1=t=>{const e=bL(t);return e.charAt(0).toUpperCase()+e.slice(1)},DE=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),SL=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...l},d)=>T.createElement("svg",{ref:d,...TL,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:DE("lucide",r),...!a&&!SL(l)&&{"aria-hidden":"true"},...l},[...c.map(([f,m])=>T.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(t,e)=>{const n=T.forwardRef(({className:i,...r},a)=>T.createElement(xL,{ref:a,iconNode:e,className:DE(`lucide-${yL(M1(t))}`,`lucide-${t}`,i),...r}));return n.displayName=M1(t),n};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],bf=Ct("arrow-left",wL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Sf=Ct("arrow-right",CL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],EL=Ct("circle-check-big",kL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],AL=Ct("database",RL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],PL=Ct("eye",_L);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],NL=Ct("heart",DL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],OL=Ct("house",ML);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],UL=Ct("lightbulb",IL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],jL=Ct("loader-circle",LL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],FL=Ct("lock",BL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],zL=Ct("mail",VL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],qL=Ct("menu",HL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],NE=Ct("message-circle",KL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],YL=Ct("message-square",GL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],$L=Ct("mic-off",WL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],ZL=Ct("mic",XL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["path",{d:"m9 10 3-3 3 3",key:"11gsxs"}],["path",{d:"M12 13V7",key:"h0r20n"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]],QL=Ct("monitor-up",JL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],t6=Ct("phone-off",e6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],O1=Ct("rotate-ccw",n6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],r6=Ct("shield",i6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ME=Ct("sparkles",s6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],o6=Ct("target",a6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],l6=Ct("trending-up",c6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],d6=Ct("triangle-alert",u6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],h6=Ct("users",f6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],p6=Ct("video-off",m6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],v6=Ct("video",g6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],OE=Ct("x",y6),Yr=()=>{const t=T.useContext(PE);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};class b6{cachedFeatures=null;ttl;fetchingPromise=null;constructor(e=600*1e3){this.ttl=e}isCacheValid(){return this.cachedFeatures?Date.now()-this.cachedFeatures.lastFetched<this.ttl:!1}async getUserFeatures(e){return this.isCacheValid()?this.cachedFeatures.features:this.fetchingPromise?this.fetchingPromise:(this.fetchingPromise=(async()=>{try{const n=await _E.getUserFeatures(e);return this.cachedFeatures={features:n.enabled_features,lastFetched:Date.now()},n.enabled_features}catch(n){throw Ge.error("Failed to fetch user features:",n),n}finally{this.fetchingPromise=null}})(),this.fetchingPromise)}isFeatureEnabled(e,n){return e.includes(n)}async checkFeature(e,n){try{const i=await this.getUserFeatures(e);return this.isFeatureEnabled(i,n)}catch(i){return Ge.error(`Failed to check feature '${n}':`,i),!1}}clearCache(){this.cachedFeatures=null,this.fetchingPromise=null}}const vl=new b6,O0=()=>{const{user:t,isAuthenticated:e}=Yr(),[n,i]=T.useState([]),[r,a]=T.useState(!0),[c,l]=T.useState(null),d=au();return T.useEffect(()=>{(async()=>{if(!e||!t){i([]),a(!1),l(null);return}a(!0),l(null);try{const b=await d.getCurrentSession();if(!b){i([]),a(!1);return}const w=b.getAccessToken().getJwtToken(),S=await vl.getUserFeatures(w);i(S)}catch(b){const w=b instanceof Error?b.message:"Failed to fetch feature flags";l(w),Ge.error("Feature flag fetch error:",b),i([])}finally{a(!1)}})()},[e,t,d]),{isFeatureEnabled:v=>vl.isFeatureEnabled(n,v),checkFeature:async v=>{if(!e||!t)return!1;try{const b=await d.getCurrentSession();if(!b)return!1;const w=b.getAccessToken().getJwtToken();return await vl.checkFeature(w,v)}catch(b){return Ge.error(`Failed to check feature '${v}':`,b),!1}},features:n,loading:r,error:c,refetch:async()=>{if(!e||!t){i([]),a(!1),l(null);return}vl.clearCache(),a(!0),l(null);try{const v=await d.getCurrentSession();if(!v){i([]),a(!1);return}const b=v.getAccessToken().getJwtToken(),w=await vl.getUserFeatures(b);i(w)}catch(v){const b=v instanceof Error?v.message:"Failed to fetch feature flags";l(b),Ge.error("Feature flag fetch error:",v),i([])}finally{a(!1)}}}},S6=({onStartCoaching:t})=>{const{loading:e,isAuthenticated:n,signOut:i}=Yr(),{loading:r}=O0(),[a,c]=T.useState(!1),d=Hi().pathname==="/session",f=e||r,m=async()=>{await i()},p=()=>{c(!a)};return x.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm relative",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(cn,{to:"/",className:"flex items-center space-x-3",children:[x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),x.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[x.jsx("a",{href:"#capabilities",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Capabilities"}),x.jsx("a",{href:"#testimonials",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Success Stories"}),x.jsx(cn,{to:"/contact",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Contact"}),f?x.jsx("div",{className:"w-32 h-10 bg-gray-200 animate-pulse rounded-full"}):n?x.jsxs("div",{className:"flex items-center space-x-4",children:[!d&&x.jsx(cn,{to:"/session",className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Start Session"}),x.jsx("button",{onClick:m,className:"bg-gradient-to-r from-slate-800 to-slate-900 hover:from-slate-900 hover:to-black text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Logout"})]}):x.jsx("button",{onClick:t,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Sign Up / Sign In"})]}),x.jsx("button",{onClick:p,className:"md:hidden p-2 rounded-lg hover:bg-slate-100 transition-colors","aria-label":"Toggle menu",children:a?x.jsx(OE,{size:24}):x.jsx(qL,{size:24})})]}),a&&x.jsx("div",{className:"absolute top-full left-0 right-0 md:hidden border-t border-slate-100 bg-white/95 backdrop-blur-md shadow-lg z-50",children:x.jsxs("nav",{className:"px-6 py-4 space-y-4",children:[x.jsx("a",{href:"#capabilities",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>c(!1),children:"Capabilities"}),x.jsx("a",{href:"#testimonials",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>c(!1),children:"Success Stories"}),x.jsx(cn,{to:"/contact",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>c(!1),children:"Contact"}),x.jsx("div",{className:"pt-2",children:f?x.jsx("div",{className:"w-full h-12 bg-gray-200 animate-pulse rounded-full"}):n?x.jsxs("div",{className:"space-y-3",children:[!d&&x.jsx(cn,{to:"/session",onClick:()=>c(!1),className:"block w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg text-center",children:"Start Session"}),x.jsx("button",{onClick:()=>{m(),c(!1)},className:"w-full bg-gradient-to-r from-slate-800 to-slate-900 hover:from-slate-900 hover:to-black text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg",children:"Logout"})]}):x.jsx("button",{onClick:()=>{t(),c(!1)},className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg",children:"Sign Up / Sign In"})})]})})]})})},T6=({onStartCoaching:t})=>{const e=Ls(),{isAuthenticated:n,loading:i}=Yr(),r=()=>{n?e("/session"):t()},c=i?{text:"Loading...",icon:x.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),disabled:!0,className:"group bg-neutral-400 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm cursor-not-allowed"}:n?{text:"Begin Your Climb",icon:x.jsx(Sf,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"}),disabled:!1,className:"group bg-neutral-900 hover:bg-neutral-800 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm shadow-lg hover:shadow-xl"}:{text:"Begin Your Climb",icon:x.jsx(Sf,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"}),disabled:!1,className:"group bg-neutral-900 hover:bg-neutral-800 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm shadow-lg hover:shadow-xl"};return x.jsxs("section",{className:"relative min-h-screen flex items-center justify-center px-6 bg-neutral-50",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50"}),x.jsxs("div",{className:"relative max-w-4xl mx-auto text-center",children:[x.jsxs("div",{className:"inline-flex items-center gap-2 text-neutral-600 text-sm font-medium mb-8",children:[x.jsx(ME,{className:"w-4 h-4"}),"Voice-First AI Career Coach"]}),x.jsxs("h1",{className:"text-5xl md:text-7xl font-light mb-6 tracking-tight text-neutral-900",children:["Own Your",x.jsx("br",{}),x.jsx("span",{className:"font-medium",children:"Career"})]}),x.jsx("p",{className:"text-lg md:text-xl text-neutral-600 mb-12 max-w-2xl mx-auto font-light leading-relaxed",children:"AI-powered career coaching that adapts to your goals and style"}),x.jsx("div",{className:"mt-16 mb-8",children:x.jsx("div",{className:"relative group",children:x.jsxs("button",{onClick:r,disabled:c.disabled,className:c.className,children:[!i&&x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),c.text,c.icon]})})})]})]})},x6=[{icon:NL,title:"Workplace Confidence",description:"Build self-assurance for meetings, presentations, and difficult conversations through role-playing and reflection"},{icon:h6,title:"Conflict Resolution",description:"Navigate workplace tensions, manage difficult colleagues, and turn conflicts into productive conversations"},{icon:l6,title:"Self-Advocacy",description:"Learn to sell yourself, communicate your value, and position your achievements for recognition and advancement"},{icon:YL,title:"Communication Polish",description:"Refine your business English, presentation skills, and professional speaking to command respect"},{icon:o6,title:"Goal Accountability",description:"Stay on track with career objectives, break through barriers, and maintain momentum toward your aspirations"},{icon:UL,title:"Blind Spot Discovery",description:"Uncover hidden opportunities, challenge your assumptions, and explore career possibilities you hadn't considered"}],w6=()=>x.jsx("section",{id:"capabilities",className:"py-20 bg-white",children:x.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[x.jsxs("div",{className:"mb-16",children:[x.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-neutral-900 mb-4 text-center",children:"How we'll help you"}),x.jsx("p",{className:"text-neutral-600 text-center max-w-2xl mx-auto",children:"Your AI career coach, here to listen, reflect, and guide your professional growth"})]}),x.jsx("div",{className:"grid md:grid-cols-2 gap-x-16 gap-y-12",children:x6.map((t,e)=>{const n=t.icon;return x.jsxs("div",{className:"flex gap-4",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(n,{className:"w-6 h-6 text-neutral-700 mt-1"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:t.title}),x.jsx("p",{className:"text-neutral-600 leading-relaxed",children:t.description})]})]},e)})})]})}),C6=[{text:"It's like having a mentor who actually gets it. Helped me navigate a difficult conversation with my manager.",context:"Product Manager"},{text:"Finally understood why I wasn't getting promoted. The AI helped me see my blind spots.",context:"Software Engineer"},{text:"Practiced my presentation pitch until I felt confident. Got the buy-in I needed.",context:"Marketing Director"},{text:"Talked through my career anxiety. It really listens and asks the right questions.",context:"Operations Lead"}],k6=()=>x.jsx("section",{id:"testimonials",className:"py-20 bg-white border-t border-neutral-100",children:x.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[x.jsx("h2",{className:"text-2xl md:text-3xl font-light text-neutral-900 mb-12 text-center",children:"Early feedback"}),x.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:C6.map((t,e)=>x.jsxs("div",{className:"border-l-2 border-neutral-200 pl-6",children:[x.jsxs("p",{className:"text-neutral-700 mb-3 leading-relaxed",children:['"',t.text,'"']}),x.jsx("p",{className:"text-sm text-neutral-500",children:t.context})]},e))}),x.jsx("div",{className:"mt-16 text-center",children:x.jsx("p",{className:"text-sm text-neutral-400",children:"From our alpha testers"})})]})}),E6=()=>x.jsx("footer",{className:"bg-slate-900 text-white border-t border-slate-800",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[x.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[x.jsxs("div",{className:"md:col-span-2",children:[x.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[x.jsx("img",{src:"/logo-footer.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-bold",children:"Ladderr.ai"}),x.jsx("p",{className:"text-slate-400 text-sm",children:"Voice-First AI Career Coach"})]})]}),x.jsx("p",{className:"text-slate-400 mb-6 max-w-md",children:"Your AI career coach, here to listen, reflect, and guide your professional growth."}),x.jsx("p",{className:"text-sm text-slate-500",children:"Ladderr is currently invite-only. We're limiting access to ensure every user gets a high-quality coaching experience."})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),x.jsxs("ul",{className:"space-y-3 text-slate-400",children:[x.jsx("li",{children:x.jsx("a",{href:"#capabilities",className:"hover:text-white transition-colors",children:"Capabilities"})}),x.jsx("li",{children:x.jsx("a",{href:"#testimonials",className:"hover:text-white transition-colors",children:"Success Stories"})}),x.jsx("li",{children:x.jsx("button",{className:"hover:text-white transition-colors text-left",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Join Waitlist"})})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),x.jsxs("ul",{className:"space-y-3 text-slate-400",children:[x.jsx("li",{children:x.jsx(cn,{to:"/contact",className:"hover:text-white transition-colors",children:"Contact"})}),x.jsx("li",{children:x.jsx(cn,{to:"/privacy",className:"hover:text-white transition-colors",children:"Privacy"})}),x.jsx("li",{children:x.jsx(cn,{to:"/terms",className:"hover:text-white transition-colors",children:"Terms"})})]})]})]}),x.jsx("div",{className:"border-t border-slate-800 mt-12 pt-8 text-center text-slate-400",children:x.jsx("p",{children:" 2025 Ladderr.ai. All rights reserved."})})]})}),IE=({onClose:t,context:e})=>{const[n,i]=T.useState(!1),[r,a]=T.useState(!1),[c,l]=T.useState(null),{signInWithProvider:d}=Yr(),f=()=>{i(!0),l(null);try{d("Google",e)}catch{l("An unexpected error occurred. Please try again."),i(!1)}},m=()=>{a(!0),l(null);try{d("LinkedIn",e)}catch{l("An unexpected error occurred. Please try again."),a(!1)}};return x.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative",children:[x.jsx("button",{onClick:t,className:"absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors",children:x.jsx(OE,{className:"w-6 h-6"})}),x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("img",{src:"/logo-modal.png",alt:"Ladderr.ai Logo",className:"w-16 h-16 object-contain mx-auto mb-6"}),x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Sign Up / Sign In"}),x.jsx("p",{className:"text-slate-600",children:"Sign in to check your early access status and begin your climb"})]}),c&&x.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("button",{onClick:f,disabled:n||r,className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-slate-200 hover:border-slate-300 hover:bg-slate-50 text-slate-700 py-4 rounded-full font-semibold transition-all duration-300 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[n?x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-slate-400"}):x.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[x.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),x.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),x.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),x.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Continue with Google"]}),x.jsxs("button",{onClick:m,disabled:n||r,className:"w-full flex items-center justify-center gap-3 bg-[#0077B5] hover:bg-[#005885] text-white py-4 rounded-full font-semibold transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r?x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),r?"Signing in...":"Continue with LinkedIn"]})]}),x.jsxs("p",{className:"text-xs text-slate-500 text-center mt-6",children:["By continuing, you agree to our"," ",x.jsx(cn,{to:"/terms",className:"text-indigo-600 hover:text-indigo-700 underline",children:"Terms of Service"})," ","and"," ",x.jsx(cn,{to:"/privacy",className:"text-indigo-600 hover:text-indigo-700 underline",children:"Privacy Policy"})]})]})})},R6=()=>{const t=Ls(),[e]=cU(),[n,i]=T.useState(null),[r,a]=T.useState(!0),{handleSuccessfulLogin:c}=Yr();return T.useEffect(()=>{let l=!0,d;const f=async()=>{const p=e.get("code"),v=e.get("error"),b=e.get("state");if(Ge.info("AuthCallback - Processing:",{code:p?.substring(0,8)+"...",error:v,state:b}),v){l&&(i("Authentication failed"),a(!1),d=setTimeout(()=>t("/"),3e3));return}if(!p){l&&(i("No authorization code received"),a(!1),d=setTimeout(()=>t("/"),3e3));return}const w="processed_auth_codes",S=JSON.parse(localStorage.getItem(w)||"[]");if(S.includes(p)){Ge.info("Authorization code already processed, skipping...");const k=S.slice(-9);localStorage.setItem(w,JSON.stringify(k));return}const R="auth_processing";if(localStorage.getItem(R)===p){Ge.info("Token exchange already in progress, waiting...");return}localStorage.setItem(R,p);try{if(Ge.info("Starting OAuth callback processing for code:",p.substring(0,8)+"..."),await au().handleOAuthCallback(p),c(),!l){Ge.info("Component unmounted, aborting...");return}Ge.info("OAuth callback processing successful"),S.push(p),localStorage.setItem(w,JSON.stringify(S.slice(-10))),setTimeout(()=>{let N=null;if(b)try{N=JSON.parse(atob(b))}catch(O){Ge.error("Failed to parse state parameter:",O)}N&&N.returnTo?(Ge.info("Redirecting to state destination:",N.returnTo),t(N.returnTo)):t("/")},1e3)}catch(k){Ge.error("Token exchange failed:",k),l&&(i("Authentication failed"),a(!1),d=setTimeout(()=>t("/"),3e3))}finally{localStorage.removeItem(R),Ge.info("Token exchange process completed")}},m=setTimeout(()=>{l&&f()},100);return()=>{l=!1,clearTimeout(m),d&&clearTimeout(d)}},[e,t,c]),n?x.jsx("div",{className:"min-h-screen flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-red-600 mb-4",children:n}),x.jsx("p",{className:"text-slate-600",children:"Redirecting to home..."})]})}):r?x.jsx("div",{className:"min-h-screen flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),x.jsx("p",{className:"text-slate-600",children:"Completing sign in..."})]})}):null},A6=()=>{const t=Ls(),{clearLocalTokens:e}=Yr();return T.useEffect(()=>{e();const i=au().getCurrentUser();i&&i.signOut(),setTimeout(()=>{t("/")},1e3)},[t,e]),x.jsx("div",{className:"min-h-screen flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),x.jsx("p",{className:"text-slate-600",children:"Signing you out..."})]})})},_6=({children:t})=>{const{isAuthenticated:e,loading:n}=Yr(),[i,r]=T.useState(!1),a=Hi();return T.useEffect(()=>{!n&&!e&&r(!0)},[e,n]),n?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:x.jsx("div",{className:"animate-pulse text-lg text-gray-600",children:"Loading..."})}):e?x.jsx(x.Fragment,{children:t}):x.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white px-4",children:[x.jsxs("div",{className:"max-w-md text-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),x.jsx("p",{className:"text-gray-600 mb-8",children:"You need to be logged in to access this page. Please sign in to continue."})]}),i&&x.jsx(IE,{context:{returnTo:a.pathname},onClose:()=>{r(!1),window.location.href="/"}})]})},P6=()=>x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:x.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(cn,{to:"/",className:"flex items-center space-x-3",children:[x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),x.jsxs(cn,{to:"/",className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[x.jsx(bf,{className:"w-4 h-4"}),"Back to Home"]})]})})}),x.jsx("div",{className:"py-20",children:x.jsxs("div",{className:"max-w-2xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-16",children:[x.jsx("h1",{className:"text-5xl font-bold text-slate-900 mb-6",children:"Get in Touch"}),x.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Have questions about Ladderr.ai or interested in an enterprise solution? We'd love to hear from you."})]}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-3xl p-8 border border-indigo-100 text-center",children:[x.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:x.jsx(zL,{className:"w-8 h-8 text-white"})}),x.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Email Us"}),x.jsx("p",{className:"text-slate-600 mt-2 mb-4",children:"For all inquiries, including enterprise solutions, please email us at"}),x.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-bold text-lg",children:"hello@ladderr.ai"})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8",children:[x.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6 text-center",children:"Frequently Asked Questions"}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"How does early access work?"}),x.jsx("p",{className:"text-slate-600",children:"We're gradually onboarding users to ensure a high-quality coaching experience. You can join the waitlist from our homepage."})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"What about mobile apps or other languages?"}),x.jsxs("p",{className:"text-slate-600",children:["Our current focus is on a web-based, English-only experience. However, our roadmap is driven by user feedback. If you need a mobile app or another language, please email us at ",x.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-medium",children:"hello@ladderr.ai"}),"."]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Do you offer an enterprise version?"}),x.jsxs("p",{className:"text-slate-600",children:["Yes, we can deploy Ladderr.ai for wider corporate use. For more information on enterprise solutions, please contact us at ",x.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-medium",children:"hello@ladderr.ai"}),"."]})]})]})]})]})]})})]}),D6=()=>x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:x.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(cn,{to:"/",className:"flex items-center space-x-3",children:[x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),x.jsxs(cn,{to:"/",className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[x.jsx(bf,{className:"w-4 h-4"}),"Back to Home"]})]})})}),x.jsx("div",{className:"py-20",children:x.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-16",children:[x.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:x.jsx(r6,{className:"w-8 h-8 text-white"})}),x.jsx("h1",{className:"text-5xl font-bold text-slate-900 mb-6",children:"Privacy Policy"}),x.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Your privacy and data security are fundamental to everything we do at Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"Last updated: August 2025"})]}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-16",children:[x.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100",children:[x.jsx(FL,{className:"w-8 h-8 text-indigo-600 mx-auto mb-4"}),x.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"End-to-End Encryption"}),x.jsx("p",{className:"text-slate-600 text-sm",children:"All coaching sessions are encrypted and secure"})]}),x.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl border border-purple-100",children:[x.jsx(PL,{className:"w-8 h-8 text-purple-600 mx-auto mb-4"}),x.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"Responsible Data Handling"}),x.jsx("p",{className:"text-slate-600 text-sm",children:"We use some providers like OpenAI but we never sell your data."})]}),x.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl border border-pink-100",children:[x.jsx(AL,{className:"w-8 h-8 text-pink-600 mx-auto mb-4"}),x.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"Data Minimization"}),x.jsx("p",{className:"text-slate-600 text-sm",children:"We only collect what's necessary for coaching"})]})]}),x.jsxs("div",{className:"prose prose-slate max-w-none",children:[x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Our Commitment to Your Privacy"}),x.jsx("p",{className:"text-slate-600 mb-4",children:'Ladderr.ai ("we", "us", "our") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and protect your personal data. Ladderr.ai is the data controller for your information under the UK General Data Protection Regulation (UK GDPR).'})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Information We Collect"}),x.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Account Information"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"When you create an account, we collect basic information such as your name and email address to create and manage your account."}),x.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Coaching Session Data"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"During coaching sessions, we process voice data and conversation content to provide the service. As we are in an MVP phase, we may also use this data to analyze and improve our service. By using the service, you consent to this use."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"How and Why We Use Your Information (Lawful Basis)"}),x.jsxs("ul",{className:"space-y-3 text-slate-600",children:[x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),x.jsxs("span",{children:[x.jsx("strong",{children:"To Provide Our Service:"})," We process your data to fulfill our contract with you, i.e., to provide AI coaching."]})]}),x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),x.jsxs("span",{children:[x.jsx("strong",{children:"To Improve Our Service:"})," We use your anonymized session data based on our legitimate interest to improve our AI and for product development. You provide your consent to this when you agree to our Terms of Service."]})]}),x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),x.jsxs("span",{children:[x.jsx("strong",{children:"To Communicate with You:"})," We may send you important updates about your account."]})]})]})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Third-Party Services & Data Transfers"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"We use third-party services, such as OpenAI, to provide our AI coaching services. This means your data may be transferred and processed outside of the United Kingdom. We take steps to ensure that any such transfers are compliant with UK GDPR and that your data is protected by appropriate safeguards."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Data Security & Retention"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"We implement reasonable security measures to protect your personal information in transit. However, no system is completely secure, and we cannot guarantee the security of data at rest. We will retain your data only for as long as necessary to provide the service and fulfill the purposes outlined in this policy."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Your Rights Under UK GDPR"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"You have rights over your personal data. To exercise these rights, or if you have a complaint, please contact us. You also have the right to lodge a complaint with the Information Commissioner's Office (ICO), the UK's data protection regulator."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Data from Minors"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"Our service is not intended for individuals under the age of 18. We do not knowingly collect personal data from minors. If we become aware that a minor has provided us with personal data, we will take steps to delete such information."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Changes to This Policy"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page. You are advised to review this Privacy Policy periodically for any changes."})]}),x.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-3xl p-8 border border-indigo-100",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Contact Us"}),x.jsx("p",{className:"text-slate-600 mb-6",children:"If you have any questions about this Privacy Policy, please contact us."}),x.jsxs(cn,{to:"/contact",className:"inline-flex items-center gap-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:["Contact Us",x.jsx(bf,{className:"w-4 h-4 rotate-180"})]})]})]})]})})]}),N6=()=>x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:x.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(cn,{to:"/",className:"flex items-center space-x-3",children:[x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),x.jsxs(cn,{to:"/",className:"flex items-center space-x-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[x.jsx(bf,{className:"w-4 h-4"}),x.jsx("span",{children:"Back to Home"})]})]})})}),x.jsx("main",{className:"max-w-4xl mx-auto px-6 py-16",children:x.jsxs("div",{className:"prose prose-slate max-w-none",children:[x.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Terms of Service"}),x.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6 mb-8",children:[x.jsxs("p",{className:"text-slate-600 mb-2",children:[x.jsx("strong",{children:"Last updated:"})," August 2025"]}),x.jsx("p",{className:"text-slate-600",children:"These terms apply to the alpha version of Ladderr.ai. By accessing our service, you agree to these terms."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"1. Introduction and Acceptance of Terms"}),x.jsx("p",{className:"text-slate-700 mb-4",children:'These Terms of Service ("Terms") govern your use of the Ladderr.ai alpha service ("Service"). By using the Service, you agree to be bound by these Terms. If you do not agree to these Terms, you may not use the Service.'})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"2. Alpha Service"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"The Service is an alpha version and is provided for testing and feedback purposes only. It may contain bugs, errors, and other problems. The features and availability of the Service may change at any time without notice."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"3. Disclaimer of Warranties and Limitation of Liability"}),x.jsx("p",{className:"text-slate-700 mb-4",children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT ANY WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. TO THE FULLEST EXTENT PERMITTED BY LAW, WE DISCLAIM ALL WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT. IN NO EVENT SHALL LADDERR.AI BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES, RESULTING FROM YOUR ACCESS TO OR USE OF OR INABILITY TO ACCESS OR USE THE SERVICE. IN NO EVENT SHALL OUR AGGREGATE LIABILITY FOR ALL CLAIMS RELATING TO THE SERVICE EXCEED ONE HUNDRED POUNDS STERLING (100).'})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"4. AI Content Disclaimer"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"The content and advice provided by the Service are generated by an AI and are for informational purposes only. They do not constitute professional advice. You should not rely on any information provided by the Service without seeking independent professional advice."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"5. Intellectual Property and Data License"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"You retain ownership of the data you provide to the Service. However, you grant us a worldwide, non-exclusive, royalty-free license to use, copy, reproduce, process, adapt, modify, publish, transmit, display and distribute your anonymized data for the purposes of providing and improving the Service."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"6. Indemnification"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"You agree to defend, indemnify, and hold harmless Ladderr.ai, its officers, directors, employees, and agents, from and against any claims, liabilities, damages, losses, and expenses, including, without limitation, reasonable legal and accounting fees, arising out of or in any way connected with your access to or use of the Service, or your violation of these Terms."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"7. Governing Law and Jurisdiction"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"These Terms shall be governed by the laws of England and Wales, without respect to its conflict of laws principles. You agree to submit to the personal jurisdiction of the courts located in London, England for any actions for which we retain the right to seek injunctive or other equitable relief in a court of competent jurisdiction to prevent the actual or threatened infringement, misappropriation or violation of a our copyrights, trademarks, trade secrets, patents, or other intellectual property or proprietary rights, as set forth in the Arbitration provision below."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"8. Contact"}),x.jsxs("p",{className:"text-slate-700",children:["For questions about these terms, please contact us through our"," ",x.jsx(cn,{to:"/contact",className:"text-indigo-600 hover:text-indigo-700 underline",children:"contact page"}),"."]})]})]})})]});var I1={};function M6(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var O6=Object.defineProperty,I6=(t,e,n)=>e in t?O6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U1=(t,e,n)=>I6(t,typeof e!="symbol"?e+"":e,n);let Un=class{constructor(){U1(this,"_locking"),U1(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(r=>e=()=>{this._locks-=1,r()}),i=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),i}};function qt(t,e){if(!t)throw new Error(e)}const U6=34028234663852886e22,L6=-34028234663852886e22,j6=4294967295,B6=2147483647,F6=-2147483648;function $d(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>B6||t<F6)throw new Error("invalid int 32: "+t)}function Jg(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>j6||t<0)throw new Error("invalid uint 32: "+t)}function UE(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>U6||t<L6))throw new Error("invalid float 32: "+t)}const LE=Symbol("@bufbuild/protobuf/enum-type");function V6(t){const e=t[LE];return qt(e,"missing enum type on enum object"),e}function jE(t,e,n,i){t[LE]=BE(e,n.map(r=>({no:r.no,name:r.name,localName:t[r.no]})))}function BE(t,e,n){const i=Object.create(null),r=Object.create(null),a=[];for(const c of e){const l=FE(c);a.push(l),i[c.name]=l,r[c.no]=l}return{typeName:t,values:a,findName(c){return i[c]},findNumber(c){return r[c]}}}function z6(t,e,n){const i={};for(const r of e){const a=FE(r);i[a.localName]=a.no,i[a.no]=a.localName}return jE(i,t,e),i}function FE(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class I0{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const i=this.getType(),r=i.runtime.bin,a=r.makeReadOptions(n);return r.readMessage(this,a.readerFactory(e),e.byteLength,a),this}fromJson(e,n){const i=this.getType(),r=i.runtime.json,a=r.makeReadOptions(n);return r.readMessage(i,e,a,this),this}fromJsonString(e,n){let i;try{i=JSON.parse(e)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(i,n)}toBinary(e){const n=this.getType(),i=n.runtime.bin,r=i.makeWriteOptions(e),a=r.writerFactory();return i.writeMessage(this,a,r),a.finish()}toJson(e){const n=this.getType(),i=n.runtime.json,r=i.makeWriteOptions(e);return i.writeMessage(this,r)}toJsonString(e){var n;const i=this.toJson(e);return JSON.stringify(i,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function H6(t,e,n,i){var r;const a=(r=i?.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),c={[a]:function(l){t.util.initFields(this),t.util.initPartial(l,this)}}[a];return Object.setPrototypeOf(c.prototype,new I0),Object.assign(c,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(l,d){return new c().fromBinary(l,d)},fromJson(l,d){return new c().fromJson(l,d)},fromJsonString(l,d){return new c().fromJsonString(l,d)},equals(l,d){return t.util.equals(c,l,d)}}),c}function q6(){let t=0,e=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Lp(t,e,n){for(let a=0;a<28;a=a+7){const c=t>>>a,l=!(!(c>>>7)&&e==0),d=(l?c|128:c)&255;if(n.push(d),!l)return}const i=t>>>28&15|(e&7)<<4,r=e>>3!=0;if(n.push((r?i|128:i)&255),!!r){for(let a=3;a<31;a=a+7){const c=e>>>a,l=!!(c>>>7),d=(l?c|128:c)&255;if(n.push(d),!l)return}n.push(e>>>31&1)}}const Xd=4294967296;function L1(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let i=0,r=0;function a(c,l){const d=Number(t.slice(c,l));r*=n,i=i*n+d,i>=Xd&&(r=r+(i/Xd|0),i=i%Xd)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),e?zE(i,r):U0(i,r)}function K6(t,e){let n=U0(t,e);const i=n.hi&2147483648;i&&(n=zE(n.lo,n.hi));const r=VE(n.lo,n.hi);return i?"-"+r:r}function VE(t,e){if({lo:t,hi:e}=G6(t,e),e<=2097151)return String(Xd*e+t);const n=t&16777215,i=(t>>>24|e<<8)&16777215,r=e>>16&65535;let a=n+i*6777216+r*6710656,c=i+r*8147497,l=r*2;const d=1e7;return a>=d&&(c+=Math.floor(a/d),a%=d),c>=d&&(l+=Math.floor(c/d),c%=d),l.toString()+j1(c)+j1(a)}function G6(t,e){return{lo:t>>>0,hi:e>>>0}}function U0(t,e){return{lo:t|0,hi:e|0}}function zE(t,e){return e=~e,t?t=~t+1:e+=1,U0(t,e)}const j1=t=>{const e=String(t);return"0000000".slice(e.length)+e};function B1(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function Y6(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function W6(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof I1!="object"||I1.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),c=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(d){const f=typeof d=="bigint"?d:BigInt(d);if(f>a||f<r)throw new Error("int64 invalid: ".concat(d));return f},uParse(d){const f=typeof d=="bigint"?d:BigInt(d);if(f>l||f<c)throw new Error("uint64 invalid: ".concat(d));return f},enc(d){return t.setBigInt64(0,this.parse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(d){return t.setBigInt64(0,this.uParse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(d,f){return t.setInt32(0,d,!0),t.setInt32(4,f,!0),t.getBigInt64(0,!0)},uDec(d,f){return t.setInt32(0,d,!0),t.setInt32(4,f,!0),t.getBigUint64(0,!0)}}}const n=r=>qt(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),i=r=>qt(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),L1(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),L1(r)},dec(r,a){return K6(r,a)},uDec(r,a){return VE(r,a)}}}const Ot=W6();var xe;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(xe||(xe={}));var Ds;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Ds||(Ds={}));function ys(t,e,n){if(e===n)return!0;if(t==xe.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}switch(t){case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return e==n}return!1}function Go(t,e){switch(t){case xe.BOOL:return!1;case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return e==0?Ot.zero:"0";case xe.DOUBLE:case xe.FLOAT:return 0;case xe.BYTES:return new Uint8Array(0);case xe.STRING:return"";default:return 0}}function HE(t,e){switch(t){case xe.BOOL:return e===!1;case xe.STRING:return e==="";case xe.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var en;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(en||(en={}));class $6{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Jg(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return $d(e),B1(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){UE(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Jg(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){$d(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return $d(e),e=(e<<1^e>>31)>>>0,B1(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=Ot.enc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=Ot.uEnc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=Ot.enc(e);return Lp(n.lo,n.hi,this.buf),this}sint64(e){let n=Ot.enc(e),i=n.hi>>31,r=n.lo<<1^i,a=(n.hi<<1|n.lo>>>31)^i;return Lp(r,a,this.buf),this}uint64(e){let n=Ot.uEnc(e);return Lp(n.lo,n.hi,this.buf),this}}class X6{constructor(e,n){this.varint64=q6,this.uint32=Y6,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,i=e&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(e,n){let i=this.pos;switch(e){case en.Varint:for(;this.buf[this.pos++]&128;);break;case en.Bit64:this.pos+=4;case en.Bit32:this.pos+=4;break;case en.LengthDelimited:let r=this.uint32();this.pos+=r;break;case en.StartGroup:for(;;){const[a,c]=this.tag();if(c===en.EndGroup){if(n!==void 0&&a!==n)throw new Error("invalid end group tag");break}this.skip(c,a)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Ot.dec(...this.varint64())}uint64(){return Ot.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),i=-(e&1);return e=(e>>>1|(n&1)<<31)^i,n=n>>>1^i,Ot.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ot.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ot.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function Z6(t,e,n,i){let r;return{typeName:e,extendee:n,get field(){if(!r){const a=typeof i=="function"?i():i;a.name=e.split(".").pop(),a.jsonName="[".concat(e,"]"),r=t.util.newFieldList([a]).list()[0]}return r},runtime:t}}function qE(t){const e=t.field.localName,n=Object.create(null);return n[e]=J6(t),[n,()=>n[e]]}function J6(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Go(e.T,e.L);case"message":const n=e.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function Q6(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Gf=[];for(let t=0;t<Or.length;t++)Gf[Or[t].charCodeAt(0)]=t;Gf[45]=Or.indexOf("+");Gf[95]=Or.indexOf("/");const KE={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),i=0,r=0,a,c=0;for(let l=0;l<t.length;l++){if(a=Gf[t.charCodeAt(l)],a===void 0)switch(t[l]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:c=a,r=1;break;case 1:n[i++]=c<<2|(a&48)>>4,c=a,r=2;break;case 2:n[i++]=(c&15)<<4|(a&60)>>2,c=a,r=3;break;case 3:n[i++]=(c&3)<<6|a,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(t){let e="",n=0,i,r=0;for(let a=0;a<t.length;a++)switch(i=t[a],n){case 0:e+=Or[i>>2],r=(i&3)<<4,n=1;break;case 1:e+=Or[r|i>>4],r=(i&15)<<2,n=2;break;case 2:e+=Or[r|i>>6],e+=Or[i&63],n=0;break}return n&&(e+=Or[r],e+="=",n==1&&(e+="=")),e}};function e4(t,e,n){YE(e,t);const i=e.runtime.bin.makeReadOptions(n),r=Q6(t.getType().runtime.bin.listUnknownFields(t),e.field),[a,c]=qE(e);for(const l of r)e.runtime.bin.readField(a,i.readerFactory(l.data),e.field,l.wireType,i);return c()}function t4(t,e,n,i){YE(e,t);const r=e.runtime.bin.makeReadOptions(i),a=e.runtime.bin.makeWriteOptions(i);if(GE(t,e)){const f=t.getType().runtime.bin.listUnknownFields(t).filter(m=>m.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const m of f)t.getType().runtime.bin.onUnknownField(t,m.no,m.wireType,m.data)}const c=a.writerFactory();let l=e.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(l,n,c,a);const d=r.readerFactory(c.finish());for(;d.pos<d.len;){const[f,m]=d.tag(),p=d.skip(m,f);t.getType().runtime.bin.onUnknownField(t,f,m,p)}}function GE(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(i=>i.no==e.field.no)}function YE(t,e){qt(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function WE(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!HE(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function F1(t,e){const n=t.localName,i=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=i?t.T.values[0].no:void 0;break;case"scalar":e[n]=i?Go(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function Ir(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(I0.prototype).every(i=>i in t&&typeof t[i]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function $E(t,e){return Ir(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}xe.DOUBLE,xe.FLOAT,xe.INT64,xe.UINT64,xe.INT32,xe.UINT32,xe.BOOL,xe.STRING,xe.BYTES;const V1={ignoreUnknownFields:!1},z1={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function n4(t){return t?Object.assign(Object.assign({},V1),t):V1}function i4(t){return t?Object.assign(Object.assign({},z1),t):z1}const Tf=Symbol(),Zd=Symbol();function r4(){return{makeReadOptions:n4,makeWriteOptions:i4,readMessage(t,e,n,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(Zi(e)));i=i??new t;const r=new Map,a=n.typeRegistry;for(const[c,l]of Object.entries(e)){const d=t.fields.findJsonName(c);if(d){if(d.oneof){if(l===null&&d.kind=="scalar")continue;const f=r.get(d.oneof);if(f!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(d.oneof.name,'" present: "').concat(f,'", "').concat(c,'"'));r.set(d.oneof,c)}H1(i,l,d,n,t)}else{let f=!1;if(a?.findExtension&&c.startsWith("[")&&c.endsWith("]")){const m=a.findExtension(c.substring(1,c.length-1));if(m&&m.extendee.typeName==t.typeName){f=!0;const[p,v]=qE(m);H1(p,l,m.field,n,m),t4(i,m,v(),n)}}if(!f&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(c,'" is unknown'))}}return i},writeMessage(t,e){const n=t.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!WE(r,t)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!a4(r))continue}const c=r.oneof?t[r.oneof.localName].value:t[r.localName],l=q1(r,c,e);l!==void 0&&(i[e.useProtoFieldName?r.name:r.jsonName]=l)}const a=e.typeRegistry;if(a?.findExtensionFor)for(const c of n.runtime.bin.listUnknownFields(t)){const l=a.findExtensionFor(n.typeName,c.no);if(l&&GE(t,l)){const d=e4(t,l,e),f=q1(l.field,d,e);f!==void 0&&(i[l.field.jsonName]=f)}}}catch(a){const c=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return i},readScalar(t,e,n){return Nl(t,e,n??Ds.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||HE(t,e)))return Jd(t,e)},debug:Zi}}function Zi(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function H1(t,e,n,i,r){let a=n.localName;if(n.repeated){if(qt(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Zi(e)));const c=t[a];for(const l of e){if(l===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Zi(l)));switch(n.kind){case"message":c.push(n.T.fromJson(l,i));break;case"enum":const d=jp(n.T,l,i.ignoreUnknownFields,!0);d!==Zd&&c.push(d);break;case"scalar":try{c.push(Nl(n.T,l,n.L,!0))}catch(f){let m="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Zi(l));throw f instanceof Error&&f.message.length>0&&(m+=": ".concat(f.message)),new Error(m)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Zi(e)));const c=t[a];for(const[l,d]of Object.entries(e)){if(d===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let f;try{f=s4(n.K,l)}catch(m){let p="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Zi(e));throw m instanceof Error&&m.message.length>0&&(p+=": ".concat(m.message)),new Error(p)}switch(n.V.kind){case"message":c[f]=n.V.T.fromJson(d,i);break;case"enum":const m=jp(n.V.T,d,i.ignoreUnknownFields,!0);m!==Zd&&(c[f]=m);break;case"scalar":try{c[f]=Nl(n.V.T,d,Ds.BIGINT,!0)}catch(p){let v="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Zi(e));throw p instanceof Error&&p.message.length>0&&(v+=": ".concat(p.message)),new Error(v)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:a},a="value"),n.kind){case"message":const c=n.T;if(e===null&&c.typeName!="google.protobuf.Value")return;let l=t[a];Ir(l)?l.fromJson(e,i):(t[a]=l=c.fromJson(e,i),c.fieldWrapper&&!n.oneof&&(t[a]=c.fieldWrapper.unwrapField(l)));break;case"enum":const d=jp(n.T,e,i.ignoreUnknownFields,!1);switch(d){case Tf:F1(n,t);break;case Zd:break;default:t[a]=d;break}break;case"scalar":try{const f=Nl(n.T,e,n.L,!1);switch(f){case Tf:F1(n,t);break;default:t[a]=f;break}}catch(f){let m="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Zi(e));throw f instanceof Error&&f.message.length>0&&(m+=": ".concat(f.message)),new Error(m)}break}}function s4(t,e){if(t===xe.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Nl(t,e,Ds.BIGINT,!0).toString()}function Nl(t,e,n,i){if(e===null)return i?Go(t,n):Tf;switch(t){case xe.DOUBLE:case xe.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==xe.FLOAT&&UE(r),r;case xe.INT32:case xe.FIXED32:case xe.SFIXED32:case xe.SINT32:case xe.UINT32:let a;if(typeof e=="number"?a=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(a=Number(e)),a===void 0)break;return t==xe.UINT32||t==xe.FIXED32?Jg(a):$d(a),a;case xe.INT64:case xe.SFIXED64:case xe.SINT64:if(typeof e!="number"&&typeof e!="string")break;const c=Ot.parse(e);return n?c.toString():c;case xe.FIXED64:case xe.UINT64:if(typeof e!="number"&&typeof e!="string")break;const l=Ot.uParse(e);return n?l.toString():l;case xe.BOOL:if(typeof e!="boolean")break;return e;case xe.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case xe.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return KE.dec(e)}throw new Error}function jp(t,e,n,i){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:i?t.values[0].no:Tf;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r!==void 0)return r.no;if(n)return Zd;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Zi(e)))}function a4(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function q1(t,e,n){if(t.kind=="map"){qt(typeof e=="object"&&e!=null);const i={},r=Object.entries(e);switch(t.V.kind){case"scalar":for(const[c,l]of r)i[c.toString()]=Jd(t.V.T,l);break;case"message":for(const[c,l]of r)i[c.toString()]=l.toJson(n);break;case"enum":const a=t.V.T;for(const[c,l]of r)i[c.toString()]=Bp(a,l,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?i:void 0}if(t.repeated){qt(Array.isArray(e));const i=[];switch(t.kind){case"scalar":for(let r=0;r<e.length;r++)i.push(Jd(t.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)i.push(Bp(t.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)i.push(e[r].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(t.kind){case"scalar":return Jd(t.T,e);case"enum":return Bp(t.T,e,n.enumAsInteger);case"message":return $E(t.T,e).toJson(n)}}function Bp(t,e,n){var i;if(qt(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=t.findNumber(e);return(i=r?.name)!==null&&i!==void 0?i:e}function Jd(t,e){switch(t){case xe.INT32:case xe.SFIXED32:case xe.SINT32:case xe.FIXED32:case xe.UINT32:return qt(typeof e=="number"),e;case xe.FLOAT:case xe.DOUBLE:return qt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case xe.STRING:return qt(typeof e=="string"),e;case xe.BOOL:return qt(typeof e=="boolean"),e;case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return qt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case xe.BYTES:return qt(e instanceof Uint8Array),KE.enc(e)}}const bo=Symbol("@bufbuild/protobuf/unknown-fields"),K1={readUnknownFields:!0,readerFactory:t=>new X6(t)},G1={writeUnknownFields:!0,writerFactory:()=>new $6};function o4(t){return t?Object.assign(Object.assign({},K1),t):K1}function c4(t){return t?Object.assign(Object.assign({},G1),t):G1}function l4(){return{makeReadOptions:o4,makeWriteOptions:c4,listUnknownFields(t){var e;return(e=t[bo])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[bo]},writeUnknownFields(t,e){const i=t[bo];if(i)for(const r of i)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(t,e,n,i){const r=t;Array.isArray(r[bo])||(r[bo]=[]),r[bo].push({no:e,wireType:n,data:i})},readMessage(t,e,n,i,r){const a=t.getType(),c=r?e.len:e.pos+n;let l,d;for(;e.pos<c&&([l,d]=e.tag(),!(r===!0&&d==en.EndGroup));){const f=a.fields.find(l);if(!f){const m=e.skip(d,l);i.readUnknownFields&&this.onUnknownField(t,l,d,m);continue}Y1(t,e,f,d,i)}if(r&&(d!=en.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:Y1,writeMessage(t,e,n){const i=t.getType();for(const r of i.fields.byNumber()){if(!WE(r,t)){if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));continue}const a=r.oneof?t[r.oneof.localName].value:t[r.localName];W1(r,a,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,i){e!==void 0&&W1(t,e,n,i)}}}function Y1(t,e,n,i,r){let{repeated:a,localName:c}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=c&&delete t.value,t.case=c,c="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?xe.INT32:n.T;let d=xf;if(n.kind=="scalar"&&n.L>0&&(d=d4),a){let v=t[c];if(i==en.LengthDelimited&&l!=xe.STRING&&l!=xe.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)v.push(d(e,l))}else v.push(d(e,l))}else t[c]=d(e,l);break;case"message":const f=n.T;a?t[c].push(Qd(e,new f,r,n)):Ir(t[c])?Qd(e,t[c],r,n):(t[c]=Qd(e,new f,r,n),f.fieldWrapper&&!n.oneof&&!n.repeated&&(t[c]=f.fieldWrapper.unwrapField(t[c])));break;case"map":let[m,p]=u4(n,e,r);t[c][m]=p;break}}function Qd(t,e,n,i){const r=e.getType().runtime.bin,a=i?.delimited;return r.readMessage(e,t,a?i.no:t.uint32(),n,a),e}function u4(t,e,n){const i=e.uint32(),r=e.pos+i;let a,c;for(;e.pos<r;){const[l]=e.tag();switch(l){case 1:a=xf(e,t.K);break;case 2:switch(t.V.kind){case"scalar":c=xf(e,t.V.T);break;case"enum":c=e.int32();break;case"message":c=Qd(e,new t.V.T,n,void 0);break}break}}if(a===void 0&&(a=Go(t.K,Ds.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),c===void 0)switch(t.V.kind){case"scalar":c=Go(t.V.T,Ds.BIGINT);break;case"enum":c=t.V.T.values[0].no;break;case"message":c=new t.V.T;break}return[a,c]}function d4(t,e){const n=xf(t,e);return typeof n=="bigint"?n.toString():n}function xf(t,e){switch(e){case xe.STRING:return t.string();case xe.BOOL:return t.bool();case xe.DOUBLE:return t.double();case xe.FLOAT:return t.float();case xe.INT32:return t.int32();case xe.INT64:return t.int64();case xe.UINT64:return t.uint64();case xe.FIXED64:return t.fixed64();case xe.BYTES:return t.bytes();case xe.FIXED32:return t.fixed32();case xe.SFIXED32:return t.sfixed32();case xe.SFIXED64:return t.sfixed64();case xe.SINT64:return t.sint64();case xe.UINT32:return t.uint32();case xe.SINT32:return t.sint32()}}function W1(t,e,n,i){qt(e!==void 0);const r=t.repeated;switch(t.kind){case"scalar":case"enum":let a=t.kind=="enum"?xe.INT32:t.T;if(r)if(qt(Array.isArray(e)),t.packed)h4(n,a,t.no,e);else for(const c of e)Ml(n,a,t.no,c);else Ml(n,a,t.no,e);break;case"message":if(r){qt(Array.isArray(e));for(const c of e)$1(n,i,t,c)}else $1(n,i,t,e);break;case"map":qt(typeof e=="object"&&e!=null);for(const[c,l]of Object.entries(e))f4(n,i,t,c,l);break}}function f4(t,e,n,i,r){t.tag(n.no,en.LengthDelimited),t.fork();let a=i;switch(n.K){case xe.INT32:case xe.FIXED32:case xe.UINT32:case xe.SFIXED32:case xe.SINT32:a=Number.parseInt(i);break;case xe.BOOL:qt(i=="true"||i=="false"),a=i=="true";break}switch(Ml(t,n.K,1,a),n.V.kind){case"scalar":Ml(t,n.V.T,2,r);break;case"enum":Ml(t,xe.INT32,2,r);break;case"message":qt(r!==void 0),t.tag(2,en.LengthDelimited).bytes(r.toBinary(e));break}t.join()}function $1(t,e,n,i){const r=$E(n.T,i);n.delimited?t.tag(n.no,en.StartGroup).raw(r.toBinary(e)).tag(n.no,en.EndGroup):t.tag(n.no,en.LengthDelimited).bytes(r.toBinary(e))}function Ml(t,e,n,i){qt(i!==void 0);let[r,a]=XE(e);t.tag(n,r)[a](i)}function h4(t,e,n,i){if(!i.length)return;t.tag(n,en.LengthDelimited).fork();let[,r]=XE(e);for(let a=0;a<i.length;a++)t[r](i[a]);t.join()}function XE(t){let e=en.Varint;switch(t){case xe.BYTES:case xe.STRING:e=en.LengthDelimited;break;case xe.DOUBLE:case xe.FIXED64:case xe.SFIXED64:e=en.Bit64;break;case xe.FIXED32:case xe.SFIXED32:case xe.FLOAT:e=en.Bit32;break}const n=xe[t].toLowerCase();return[e,n]}function m4(){return{setEnumType:jE,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const i of n.fields.byMember()){const r=i.localName,a=e,c=t;if(c[r]!=null)switch(i.kind){case"oneof":const l=c[r].case;if(l===void 0)continue;const d=i.findField(l);let f=c[r].value;d&&d.kind=="message"&&!Ir(f,d.T)?f=new d.T(f):d&&d.kind==="scalar"&&d.T===xe.BYTES&&(f=yl(f)),a[r]={case:l,value:f};break;case"scalar":case"enum":let m=c[r];i.T===xe.BYTES&&(m=i.repeated?m.map(yl):yl(m)),a[r]=m;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===xe.BYTES)for(const[b,w]of Object.entries(c[r]))a[r][b]=yl(w);else Object.assign(a[r],c[r]);break;case"message":const v=i.V.T;for(const b of Object.keys(c[r])){let w=c[r][b];v.fieldWrapper||(w=new v(w)),a[r][b]=w}break}break;case"message":const p=i.T;if(i.repeated)a[r]=c[r].map(v=>Ir(v,p)?v:new p(v));else{const v=c[r];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?a[r]=yl(v):a[r]=v:a[r]=Ir(v,p)?v:new p(v)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(i=>{const r=e[i.localName],a=n[i.localName];if(i.repeated){if(r.length!==a.length)return!1;switch(i.kind){case"message":return r.every((c,l)=>i.T.equals(c,a[l]));case"scalar":return r.every((c,l)=>ys(i.T,c,a[l]));case"enum":return r.every((c,l)=>ys(xe.INT32,c,a[l]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let c=r,l=a;return i.T.fieldWrapper&&(c!==void 0&&!Ir(c)&&(c=i.T.fieldWrapper.wrapField(c)),l!==void 0&&!Ir(l)&&(l=i.T.fieldWrapper.wrapField(l))),i.T.equals(c,l);case"enum":return ys(xe.INT32,r,a);case"scalar":return ys(i.T,r,a);case"oneof":if(r.case!==a.case)return!1;const d=i.findField(r.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(r.value,a.value);case"enum":return ys(xe.INT32,r.value,a.value);case"scalar":return ys(d.T,r.value,a.value)}throw new Error("oneof cannot contain ".concat(d.kind));case"map":const f=Object.keys(r).concat(Object.keys(a));switch(i.V.kind){case"message":const m=i.V.T;return f.every(v=>m.equals(r[v],a[v]));case"enum":return f.every(v=>ys(xe.INT32,r[v],a[v]));case"scalar":const p=i.V.T;return f.every(v=>ys(p,r[v],a[v]))}break}})},clone(t){const e=t.getType(),n=new e,i=n;for(const r of e.fields.byMember()){const a=t[r.localName];let c;if(r.repeated)c=a.map(_d);else if(r.kind=="map"){c=i[r.localName];for(const[l,d]of Object.entries(a))c[l]=_d(d)}else r.kind=="oneof"?c=r.findField(a.case)?{case:a.case,value:_d(a.value)}:{case:void 0}:c=_d(a);i[r.localName]=c}for(const r of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}}function _d(t){if(t===void 0)return t;if(Ir(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function yl(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function p4(t,e,n){return{syntax:t,json:r4(),bin:l4(),util:Object.assign(Object.assign({},m4()),{newFieldList:e,initFields:n}),makeMessageType(i,r,a){return H6(this,i,r,a)},makeEnum:z6,makeEnumType:BE,getEnumType:V6,makeExtension(i,r,a){return Z6(this,i,r,a)}}}class g4{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,e.push(n)):e.push(i)}return this.members}}function ZE(t,e){const n=JE(t);return e?n:x4(T4(n))}function v4(t){return ZE(t,!1)}const y4=JE;function JE(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let r=t.charAt(i);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const b4=new Set(["constructor","toString","toJSON","valueOf"]),S4=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),QE=t=>"".concat(t,"$"),T4=t=>S4.has(t)?QE(t):t,x4=t=>b4.has(t)?QE(t):t;class w4{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=v4(e)}addField(e){qt(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function C4(t,e){var n,i,r,a,c,l;const d=[];let f;for(const m of typeof t=="function"?t():t){const p=m;if(p.localName=ZE(m.name,m.oneof!==void 0),p.jsonName=(n=m.jsonName)!==null&&n!==void 0?n:y4(m.name),p.repeated=(i=m.repeated)!==null&&i!==void 0?i:!1,m.kind=="scalar"&&(p.L=(r=m.L)!==null&&r!==void 0?r:Ds.BIGINT),p.delimited=(a=m.delimited)!==null&&a!==void 0?a:!1,p.req=(c=m.req)!==null&&c!==void 0?c:!1,p.opt=(l=m.opt)!==null&&l!==void 0?l:!1,m.packed===void 0&&(p.packed=m.kind=="enum"||m.kind=="scalar"&&m.T!=xe.BYTES&&m.T!=xe.STRING),m.oneof!==void 0){const v=typeof m.oneof=="string"?m.oneof:m.oneof.name;(!f||f.name!=v)&&(f=new w4(v)),p.oneof=f,f.addField(p)}d.push(p)}return d}const ue=p4("proto3",t=>new g4(t,e=>C4(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,i=t;if(e.repeated){i[n]=[];continue}switch(e.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Go(e.T,e.L);break}}});class Kn extends I0{constructor(e){super(),this.seconds=Ot.zero,this.nanos=0,ue.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(ue.json.debug(e)));const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Ot.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Kn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new Kn({seconds:Ot.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new Kn().fromBinary(e,n)}static fromJson(e,n){return new Kn().fromJson(e,n)}static fromJsonString(e,n){return new Kn().fromJsonString(e,n)}static equals(e,n){return ue.util.equals(Kn,e,n)}}Kn.runtime=ue;Kn.typeName="google.protobuf.Timestamp";Kn.fields=ue.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const k4=ue.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Kn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:E4,repeated:!0},{no:5,name:"events",kind:"message",T:A4,repeated:!0}]),E4=ue.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:R4,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),R4=ue.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Kn},{no:3,name:"value",kind:"scalar",T:2}]),A4=ue.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:Kn},{no:7,name:"normalized_end_timestamp",kind:"message",T:Kn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),eR=ue.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Ii=ue.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),on=ue.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),L0=ue.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Rl=ue.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Hl=ue.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Li=ue.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),So=ue.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),_4=ue.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Tn=ue.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Yf=ue.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:wf,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:hR}]),wf=ue.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),P4=ue.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ue.getEnumType(on),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Sa=ue.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ue.getEnumType(Uo)},{no:4,name:"tracks",kind:"message",T:Ao,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:P4},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ue.getEnumType(Ta)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ue.getEnumType(Li)},{no:18,name:"kind_details",kind:"enum",T:ue.getEnumType(D4),repeated:!0}]),Uo=ue.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Ta=ue.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),D4=ue.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),ri=ue.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),N4=ue.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ga,repeated:!0}]),Ao=ue.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ue.getEnumType(Ii)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ue.getEnumType(on)},{no:10,name:"layers",kind:"message",T:ga,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:N4,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ue.getEnumType(ri)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:hR},{no:19,name:"audio_features",kind:"enum",T:ue.getEnumType(Tn),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ue.getEnumType(eR)}]),ga=ue.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:ue.getEnumType(L0)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),Hn=ue.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:ue.getEnumType(tt)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:nR,oneof:"value"},{no:3,name:"speaker",kind:"message",T:M4,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:iR,oneof:"value"},{no:7,name:"transcription",kind:"message",T:O4,oneof:"value"},{no:8,name:"metrics",kind:"message",T:k4,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Qg,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:rR,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:sR,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:aR,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:tv,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:nv,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:iv,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),tt=ue.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),M4=ue.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:tR,repeated:!0}]),tR=ue.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),nR=ue.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),iR=ue.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),O4=ue.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:I4,repeated:!0}]),I4=ue.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Qg=ue.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),rR=ue.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),sR=ue.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),aR=ue.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:oR,oneof:"value"}]),oR=ue.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),cR=ue.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),lR=ue.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:ue.getEnumType(uR)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),uR=ue.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),U4=ue.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:ue.getEnumType(dR)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),dR=ue.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),fR=ue.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:X1},{no:2,name:"screen",kind:"message",T:X1},{no:3,name:"resume_connection",kind:"enum",T:ue.getEnumType(Hl)},{no:4,name:"disabled_codecs",kind:"message",T:L4},{no:5,name:"force_relay",kind:"enum",T:ue.getEnumType(Hl)}]),X1=ue.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ue.getEnumType(Hl)}]),L4=ue.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:wf,repeated:!0},{no:2,name:"publish",kind:"message",T:wf,repeated:!0}]),hR=ue.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),ev=ue.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),mR=ue.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ue.getEnumType(ev)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),pR=ue.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),tv=ue.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ue.getEnumType(ri)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:mR,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:pR,oneof:"content_header"}],{localName:"DataStream_Header"}),nv=ue.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),iv=ue.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),Ui=ue.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),rv=ue.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),j4=ue.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),B4=ue.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:xa,oneof:"message"},{no:2,name:"answer",kind:"message",T:xa,oneof:"message"},{no:3,name:"trickle",kind:"message",T:j0,oneof:"message"},{no:4,name:"add_track",kind:"message",T:av,oneof:"message"},{no:5,name:"mute",kind:"message",T:B0,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Wf,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:gR,oneof:"message"},{no:8,name:"leave",kind:"message",T:$f,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:yR,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:xR,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:wR,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Xi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:bR,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:ER,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:vR,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:q4,oneof:"message"}]),Z1=ue.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:F4,oneof:"message"},{no:2,name:"answer",kind:"message",T:xa,oneof:"message"},{no:3,name:"offer",kind:"message",T:xa,oneof:"message"},{no:4,name:"trickle",kind:"message",T:j0,oneof:"message"},{no:5,name:"update",kind:"message",T:H4,oneof:"message"},{no:6,name:"track_published",kind:"message",T:F0,oneof:"message"},{no:8,name:"leave",kind:"message",T:$f,oneof:"message"},{no:9,name:"mute",kind:"message",T:B0,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:K4,oneof:"message"},{no:11,name:"room_update",kind:"message",T:G4,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:W4,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:X4,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:J4,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Q4,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:z4,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:V4,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:tj,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:rj,oneof:"message"},{no:22,name:"request_response",kind:"message",T:sj,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:aj,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:ej,oneof:"message"}]),sv=ue.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),av=ue.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ue.getEnumType(Ii)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ue.getEnumType(on)},{no:9,name:"layers",kind:"message",T:ga,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:sv,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ue.getEnumType(ri)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ue.getEnumType(eR)},{no:17,name:"audio_features",kind:"enum",T:ue.getEnumType(Tn),repeated:!0}]),j0=ue.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ue.getEnumType(Ui)},{no:3,name:"final",kind:"scalar",T:8}]),B0=ue.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),F4=ue.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Yf},{no:2,name:"participant",kind:"message",T:Sa},{no:3,name:"other_participants",kind:"message",T:Sa,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:SR,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:fR},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:lR},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:wf,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),V4=ue.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:SR,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:fR},{no:3,name:"server_info",kind:"message",T:lR},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),F0=ue.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Ao}]),z4=ue.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),xa=ue.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),H4=ue.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Sa,repeated:!0}]),Wf=ue.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:cR,repeated:!0}]),gR=ue.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ue.getEnumType(L0)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),vR=ue.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ue.getEnumType(Tn),repeated:!0}]),q4=ue.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),$f=ue.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ue.getEnumType(Li)},{no:3,name:"action",kind:"enum",T:ue.getEnumType(Lo)},{no:4,name:"regions",kind:"message",T:nj}]),Lo=ue.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),yR=ue.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:ga,repeated:!0}]),bR=ue.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),SR=ue.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),K4=ue.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:tR,repeated:!0}]),G4=ue.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Yf}]),Y4=ue.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ue.getEnumType(Rl)},{no:3,name:"score",kind:"scalar",T:2}]),W4=ue.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:Y4,repeated:!0}]),$4=ue.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ue.getEnumType(rv)}]),X4=ue.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:$4,repeated:!0}]),V0=ue.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:ue.getEnumType(L0)},{no:2,name:"enabled",kind:"scalar",T:8}]),Z4=ue.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:V0,repeated:!0}]),J4=ue.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:V0,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Z4,repeated:!0}]),TR=ue.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),xR=ue.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:TR,repeated:!0}]),Q4=ue.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),ej=ue.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Yf},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Sa},{no:4,name:"other_participants",kind:"message",T:Sa,repeated:!0}]),wR=ue.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:xa},{no:2,name:"subscription",kind:"message",T:Wf},{no:3,name:"publish_tracks",kind:"message",T:F0,repeated:!0},{no:4,name:"data_channels",kind:"message",T:kR,repeated:!0},{no:5,name:"offer",kind:"message",T:xa},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:CR,repeated:!0}]),CR=ue.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),kR=ue.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ue.getEnumType(Ui)}]),Xi=ue.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ue.getEnumType(j4),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),ER=ue.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),tj=ue.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),nj=ue.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:ij,repeated:!0}]),ij=ue.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),rj=ue.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ue.getEnumType(_4)}]),sj=ue.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:ue.getEnumType(z0)},{no:3,name:"message",kind:"scalar",T:9}]),z0=ue.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),aj=ue.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function oj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ef={exports:{}},cj=ef.exports,J1;function lj(){return J1||(J1=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(cj,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],a={},c=null;function l(S,R){var k=S[R];if(typeof k.bind=="function")return k.bind(S);try{return Function.prototype.bind.call(k,S)}catch{return function(){return Function.prototype.apply.apply(k,[S,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(S){return S==="debug"&&(S="log"),typeof console===n?!1:S==="trace"&&i?d:console[S]!==void 0?l(console,S):console.log!==void 0?l(console,"log"):e}function m(){for(var S=this.getLevel(),R=0;R<r.length;R++){var k=r[R];this[k]=R<S?e:this.methodFactory(k,S,this.name)}if(this.log=this.debug,typeof console===n&&S<this.levels.SILENT)return"No console available for logging"}function p(S){return function(){typeof console!==n&&(m.call(this),this[S].apply(this,arguments))}}function v(S,R,k){return f(S)||p.apply(this,arguments)}function b(S,R){var k=this,N,O,I,D="loglevel";typeof S=="string"?D+=":"+S:typeof S=="symbol"&&(D=void 0);function j(re){var de=(r[re]||"silent").toUpperCase();if(!(typeof window===n||!D)){try{window.localStorage[D]=de;return}catch{}try{window.document.cookie=encodeURIComponent(D)+"="+de+";"}catch{}}}function H(){var re;if(!(typeof window===n||!D)){try{re=window.localStorage[D]}catch{}if(typeof re===n)try{var de=window.document.cookie,Ee=encodeURIComponent(D),Ae=de.indexOf(Ee+"=");Ae!==-1&&(re=/^([^;]+)/.exec(de.slice(Ae+Ee.length+1))[1])}catch{}return k.levels[re]===void 0&&(re=void 0),re}}function z(){if(!(typeof window===n||!D)){try{window.localStorage.removeItem(D)}catch{}try{window.document.cookie=encodeURIComponent(D)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function G(re){var de=re;if(typeof de=="string"&&k.levels[de.toUpperCase()]!==void 0&&(de=k.levels[de.toUpperCase()]),typeof de=="number"&&de>=0&&de<=k.levels.SILENT)return de;throw new TypeError("log.setLevel() called with invalid level: "+re)}k.name=S,k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.methodFactory=R||v,k.getLevel=function(){return I??O??N},k.setLevel=function(re,de){return I=G(re),de!==!1&&j(I),m.call(k)},k.setDefaultLevel=function(re){O=G(re),H()||k.setLevel(re,!1)},k.resetLevel=function(){I=null,z(),m.call(k)},k.enableAll=function(re){k.setLevel(k.levels.TRACE,re)},k.disableAll=function(re){k.setLevel(k.levels.SILENT,re)},k.rebuild=function(){if(c!==k&&(N=G(c.getLevel())),m.call(k),c===k)for(var re in a)a[re].rebuild()},N=G(c?c.getLevel():"WARN");var ie=H();ie!=null&&(I=G(ie)),m.call(k)}c=new b,c.getLogger=function(R){if(typeof R!="symbol"&&typeof R!="string"||R==="")throw new TypeError("You must supply a name when creating a logger.");var k=a[R];return k||(k=a[R]=new b(R,c.methodFactory)),k};var w=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=w),c},c.getLoggers=function(){return a},c.default=c,c})}(ef)),ef.exports}var Xf=lj(),ov;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(ov||(ov={}));var ji;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(ji||(ji={}));let ot=Xf.getLogger("livekit");Object.values(ji).map(t=>Xf.getLogger(t));ot.setDefaultLevel(ov.info);function Fr(t){const e=Xf.getLogger(t);return e.setDefaultLevel(ot.getLevel()),e}const uj=Xf.getLogger("lk-e2ee"),bl=7e3,dj=[0,300,4*300,9*300,16*300,bl,bl,bl,bl,bl];class fj{constructor(e){this._retryDelays=e!==void 0?[...e]:dj}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function hj(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function K(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,e||[])).next())})}function Q1(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ur(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Q1=="function"?Q1(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}var Pd={exports:{}},ew;function mj(){if(ew)return Pd.exports;ew=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(D,j,H){return Function.prototype.apply.call(D,j,H)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:n=function(D){return Object.getOwnPropertyNames(D)};function i(I){console&&console.warn&&console.warn(I)}var r=Number.isNaN||function(D){return D!==D};function a(){a.init.call(this)}Pd.exports=a,Pd.exports.once=k,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(I){if(typeof I!="number"||I<0||r(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");c=I}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||r(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this};function d(I){return I._maxListeners===void 0?a.defaultMaxListeners:I._maxListeners}a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(D){for(var j=[],H=1;H<arguments.length;H++)j.push(arguments[H]);var z=D==="error",G=this._events;if(G!==void 0)z=z&&G.error===void 0;else if(!z)return!1;if(z){var ie;if(j.length>0&&(ie=j[0]),ie instanceof Error)throw ie;var re=new Error("Unhandled error."+(ie?" ("+ie.message+")":""));throw re.context=ie,re}var de=G[D];if(de===void 0)return!1;if(typeof de=="function")e(de,this,j);else for(var Ee=de.length,Ae=w(de,Ee),H=0;H<Ee;++H)e(Ae[H],this,j);return!0};function f(I,D,j,H){var z,G,ie;if(l(j),G=I._events,G===void 0?(G=I._events=Object.create(null),I._eventsCount=0):(G.newListener!==void 0&&(I.emit("newListener",D,j.listener?j.listener:j),G=I._events),ie=G[D]),ie===void 0)ie=G[D]=j,++I._eventsCount;else if(typeof ie=="function"?ie=G[D]=H?[j,ie]:[ie,j]:H?ie.unshift(j):ie.push(j),z=d(I),z>0&&ie.length>z&&!ie.warned){ie.warned=!0;var re=new Error("Possible EventEmitter memory leak detected. "+ie.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");re.name="MaxListenersExceededWarning",re.emitter=I,re.type=D,re.count=ie.length,i(re)}return I}a.prototype.addListener=function(D,j){return f(this,D,j,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(D,j){return f(this,D,j,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(I,D,j){var H={fired:!1,wrapFn:void 0,target:I,type:D,listener:j},z=m.bind(H);return z.listener=j,H.wrapFn=z,z}a.prototype.once=function(D,j){return l(j),this.on(D,p(this,D,j)),this},a.prototype.prependOnceListener=function(D,j){return l(j),this.prependListener(D,p(this,D,j)),this},a.prototype.removeListener=function(D,j){var H,z,G,ie,re;if(l(j),z=this._events,z===void 0)return this;if(H=z[D],H===void 0)return this;if(H===j||H.listener===j)--this._eventsCount===0?this._events=Object.create(null):(delete z[D],z.removeListener&&this.emit("removeListener",D,H.listener||j));else if(typeof H!="function"){for(G=-1,ie=H.length-1;ie>=0;ie--)if(H[ie]===j||H[ie].listener===j){re=H[ie].listener,G=ie;break}if(G<0)return this;G===0?H.shift():S(H,G),H.length===1&&(z[D]=H[0]),z.removeListener!==void 0&&this.emit("removeListener",D,re||j)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(D){var j,H,z;if(H=this._events,H===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete H[D]),this;if(arguments.length===0){var G=Object.keys(H),ie;for(z=0;z<G.length;++z)ie=G[z],ie!=="removeListener"&&this.removeAllListeners(ie);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(j=H[D],typeof j=="function")this.removeListener(D,j);else if(j!==void 0)for(z=j.length-1;z>=0;z--)this.removeListener(D,j[z]);return this};function v(I,D,j){var H=I._events;if(H===void 0)return[];var z=H[D];return z===void 0?[]:typeof z=="function"?j?[z.listener||z]:[z]:j?R(z):w(z,z.length)}a.prototype.listeners=function(D){return v(this,D,!0)},a.prototype.rawListeners=function(D){return v(this,D,!1)},a.listenerCount=function(I,D){return typeof I.listenerCount=="function"?I.listenerCount(D):b.call(I,D)},a.prototype.listenerCount=b;function b(I){var D=this._events;if(D!==void 0){var j=D[I];if(typeof j=="function")return 1;if(j!==void 0)return j.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(I,D){for(var j=new Array(D),H=0;H<D;++H)j[H]=I[H];return j}function S(I,D){for(;D+1<I.length;D++)I[D]=I[D+1];I.pop()}function R(I){for(var D=new Array(I.length),j=0;j<D.length;++j)D[j]=I[j].listener||I[j];return D}function k(I,D){return new Promise(function(j,H){function z(ie){I.removeListener(D,G),H(ie)}function G(){typeof I.removeListener=="function"&&I.removeListener("error",z),j([].slice.call(arguments))}O(I,D,G,{once:!0}),D!=="error"&&N(I,z,{once:!0})})}function N(I,D,j){typeof I.on=="function"&&O(I,"error",D,j)}function O(I,D,j,H){if(typeof I.on=="function")H.once?I.once(D,j):I.on(D,j);else if(typeof I.addEventListener=="function")I.addEventListener(D,function z(G){H.once&&I.removeEventListener(D,z),j(G)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return Pd.exports}var ur=mj();let RR=!0,AR=!0;function Al(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseFloat(i[n],10)}function Aa(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(c,l){if(c!==e)return r.apply(this,arguments);const d=f=>{const m=n(f);m&&(l.handleEvent?l.handleEvent(m):l(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,d),r.apply(this,[c,d])};const a=i.removeEventListener;i.removeEventListener=function(c,l){if(c!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(l))return a.apply(this,arguments);const d=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[c,d])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function pj(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(RR=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function gj(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(AR=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function _R(){if(typeof window=="object"){if(RR)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function H0(t,e){AR&&console.warn(t+" is deprecated, please use "+e+" instead.")}function vj(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Al(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Al(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Al(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Al(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function tw(t){return Object.prototype.toString.call(t)==="[object Object]"}function PR(t){return tw(t)?Object.keys(t).reduce(function(e,n){const i=tw(t[n]),r=i?PR(t[n]):t[n],a=i&&!Object.keys(r).length;return r===void 0||a?e:Object.assign(e,{[n]:r})},{}):t}function cv(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?cv(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(r=>{cv(t,t.get(r),n)})}))}function nw(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const a=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&a.push(c)}),a.forEach(c=>{t.forEach(l=>{l.type===i&&l.trackId===c.id&&cv(t,l,r)})}),r}const iw=_R;function DR(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const d={};return Object.keys(l).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const m=typeof l[f]=="object"?l[f]:{ideal:l[f]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const p=function(v,b){return v?v+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(m.ideal!==void 0){d.optional=d.optional||[];let v={};typeof m.ideal=="number"?(v[p("min",f)]=m.ideal,d.optional.push(v),v={},v[p("max",f)]=m.ideal,d.optional.push(v)):(v[p("",f)]=m.ideal,d.optional.push(v))}m.exact!==void 0&&typeof m.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[p("",f)]=m.exact):["min","max"].forEach(v=>{m[v]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[p(v,f)]=m[v])})}),l.advanced&&(d.optional=(d.optional||[]).concat(l.advanced)),d},r=function(l,d){if(e.version>=61)return d(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const f=function(m,p,v){p in m&&!(v in m)&&(m[v]=m[p],delete m[p])};l=JSON.parse(JSON.stringify(l)),f(l.audio,"autoGainControl","googAutoGainControl"),f(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=i(l.audio)}if(l&&typeof l.video=="object"){let f=l.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const m=e.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete l.video.facingMode;let p;if(f.exact==="environment"||f.ideal==="environment"?p=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(p=["front"]),p)return n.mediaDevices.enumerateDevices().then(v=>{v=v.filter(w=>w.kind==="videoinput");let b=v.find(w=>p.some(S=>w.label.toLowerCase().includes(S)));return!b&&v.length&&p.includes("back")&&(b=v[v.length-1]),b&&(l.video.deviceId=f.exact?{exact:b.deviceId}:{ideal:b.deviceId}),l.video=i(l.video),iw("chrome: "+JSON.stringify(l)),d(l)})}l.video=i(l.video)}return iw("chrome: "+JSON.stringify(l)),d(l)},a=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(l,d,f){r(l,m=>{n.webkitGetUserMedia(m,d,p=>{f&&f(a(p))})})};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return r(d,f=>l(f).then(m=>{if(f.audio&&!m.getAudioTracks().length||f.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(a(m))))}}}function NR(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function MR(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===r.track.id):a={track:r.track};const c=new Event("track");c.track=r.track,c.receiver=a,c.transceiver={receiver:a},c.streams=[i.stream],this.dispatchEvent(c)}),i.stream.getTracks().forEach(r=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===r.id):a={track:r};const c=new Event("track");c.track=r,c.receiver=a,c.transceiver={receiver:a},c.streams=[i.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Aa(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function OR(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(r,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=r.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:r}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,d){let f=r.apply(this,arguments);return f||(f=e(this,l),this._senders.push(f)),f};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const d=this._senders.indexOf(l);d!==-1&&this._senders.splice(d,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],i.apply(this,[a]),a.getTracks().forEach(c=>{const l=this._senders.find(d=>d.track===c);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function IR(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(c=>c._pc=this),a});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=i.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(c=>nw(c,a.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Aa(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(a=>nw(a,r.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let r,a,c;return this.getSenders().forEach(l=>{l.track===i&&(r?c=!0:r=l)}),this.getReceivers().forEach(l=>(l.track===i&&(a?c=!0:a=l),l.track===i)),c||r&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function UR(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(d)===-1&&this._shimmedLocalStreams[l.id].push(d):this._shimmedLocalStreams[l.id]=[l,d],d};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(f=>{if(this.getSenders().find(p=>p.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(f=>l.indexOf(f)===-1);this._shimmedLocalStreams[c.id]=[c].concat(d)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],i.apply(this,arguments)};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const d=this._shimmedLocalStreams[l].indexOf(c);d!==-1&&this._shimmedLocalStreams[l].splice(d,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),r.apply(this,arguments)}}function LR(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return UR(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(p=>this._reverseStreams[p.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(p=>{if(this.getSenders().find(b=>b.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const p=new t.MediaStream(m.getTracks());this._streams[m.id]=p,this._reverseStreams[p.id]=m,m=p}i.apply(this,[m])};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(S=>S===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const w=this._streams[p.id];if(w)w.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const S=new t.MediaStream([m]);this._streams[p.id]=S,this._reverseStreams[S.id]=p,this.addStream(S)}return this.getSenders().find(S=>S.track===m)};function a(f,m){let p=m.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const b=f._reverseStreams[v],w=f._streams[b.id];p=p.replace(new RegExp(w.id,"g"),b.id)}),new RTCSessionDescription({type:m.type,sdp:p})}function c(f,m){let p=m.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const b=f._reverseStreams[v],w=f._streams[b.id];p=p.replace(new RegExp(b.id,"g"),w.id)}),new RTCSessionDescription({type:m.type,sdp:p})}["createOffer","createAnswer"].forEach(function(f){const m=t.RTCPeerConnection.prototype[f],p={[f](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[w=>{const S=a(this,w);v[0].apply(null,[S])},w=>{v[1]&&v[1].apply(null,w)},arguments[2]]):m.apply(this,arguments).then(w=>a(this,w))}};t.RTCPeerConnection.prototype[f]=p[f]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=c(this,arguments[0]),l.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const f=d.get.apply(this);return f.type===""?f:a(this,f)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(S=>m.track===S)&&(v=this._streams[b])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function lv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=r[n]})}function jR(t,e){Aa(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var rw=Object.freeze({__proto__:null,fixNegotiationNeeded:jR,shimAddTrackRemoveTrack:LR,shimAddTrackRemoveTrackWithNative:UR,shimGetSendersWithDtmf:OR,shimGetUserMedia:DR,shimMediaStream:NR,shimOnTrack:MR,shimPeerConnection:lv,shimSenderReceiverGetStats:IR});function BR(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(r,a,c){H0("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(a,c)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(c,l,d){l in c&&!(d in c)&&(c[d]=c[l],delete c[l])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),r(c.audio,"autoGainControl","mozAutoGainControl"),r(c.audio,"noiseSuppression","mozNoiseSuppression")),a(c)},i&&i.prototype.getSettings){const c=i.prototype.getSettings;i.prototype.getSettings=function(){const l=c.apply(this,arguments);return r(l,"mozAutoGainControl","autoGainControl"),r(l,"mozNoiseSuppression","noiseSuppression"),l}}if(i&&i.prototype.applyConstraints){const c=i.prototype.applyConstraints;i.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),r(l,"autoGainControl","mozAutoGainControl"),r(l,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[l])}}}}function yj(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function FR(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function uv(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const a=t.RTCPeerConnection.prototype[r],c={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=c[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[a,c,l]=arguments;return i.apply(this,[a||null]).then(d=>{if(e.version<53&&!c)try{d.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;d.forEach((m,p)=>{d.set(p,Object.assign({},m,{type:n[m.type]||m.type}))})}return d}).then(c,l)}}function VR(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function zR(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i}),Aa(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function HR(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){H0("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function qR(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function KR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(r){const{sender:c}=a,l=c.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=i,c.sendEncodings=i,this.setParametersPromises.push(c.setParameters(l).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return a})}function GR(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function YR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function WR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var sw=Object.freeze({__proto__:null,shimAddTransceiver:KR,shimCreateAnswer:WR,shimCreateOffer:YR,shimGetDisplayMedia:yj,shimGetParameters:GR,shimGetUserMedia:BR,shimOnTrack:FR,shimPeerConnection:uv,shimRTCDataChannel:qR,shimReceiverGetStats:zR,shimRemoveStream:HR,shimSenderGetStats:VR});function $R(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>e.call(this,r,i)),i.getVideoTracks().forEach(r=>e.call(this,r,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const r=n.getTracks();this.getSenders().forEach(a=>{r.includes(a.track)&&this.removeTrack(a)})})}}function XR(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const a=new Event("addstream");a.stream=r,this.dispatchEvent(a)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(a=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(a)>=0)return;i._remoteStreams.push(a);const c=new Event("addstream");c.stream=a,i.dispatchEvent(c)})}),e.apply(i,arguments)}}}function ZR(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,r=e.setLocalDescription,a=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(f,m){const p=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[p]);return m?(v.then(f,m),Promise.resolve()):v},e.createAnswer=function(f,m){const p=arguments.length>=2?arguments[2]:arguments[0],v=i.apply(this,[p]);return m?(v.then(f,m),Promise.resolve()):v};let l=function(d,f,m){const p=r.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p};e.setLocalDescription=l,l=function(d,f,m){const p=a.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p},e.setRemoteDescription=l,l=function(d,f,m){const p=c.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p},e.addIceCandidate=l}function JR(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=r=>i(QR(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,r,a){e.mediaDevices.getUserMedia(i).then(r,a)}).bind(e))}function QR(t){return t&&t.video!==void 0?Object.assign({},t,{video:PR(t.video)}):t}function eA(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const a=[];for(let c=0;c<i.iceServers.length;c++){let l=i.iceServers[c];l.urls===void 0&&l.url?(H0("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(i.iceServers[c])}i.iceServers=a}return new e(i,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function tA(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function nA(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function iA(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var aw=Object.freeze({__proto__:null,shimAudioContext:iA,shimCallbacksAPI:ZR,shimConstraints:QR,shimCreateOfferLegacy:nA,shimGetUserMedia:JR,shimLocalStreamsAPI:$R,shimRTCIceServerUrls:eA,shimRemoteStreamsAPI:XR,shimTrackEventTransceiver:tA}),Fp={exports:{}},ow;function bj(){return ow||(ow=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((r,a)=>(a>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(r=>r.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let a=8;a<i.length;a+=2)switch(i[a]){case"raddr":r.relatedAddress=i[a+1];break;case"rport":r.relatedPort=parseInt(i[a+1],10);break;case"tcptype":r.tcpType=i[a+1];break;case"ufrag":r.ufrag=i[a+1],r.usernameFragment=i[a+1];break;default:r[i[a]]===void 0&&(r[i[a]]=i[a+1]);break}return r},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const r=n.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const a=n.type;return i.push("typ"),i.push(a),a!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let r;const a=n.substring(n.indexOf(" ")+1).split(";");for(let c=0;c<a.length;c++)r=a[c].trim().split("="),i[r[0].trim()]=r[1];return i},e.writeFmtp=function(n){let i="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const a=[];Object.keys(n.parameters).forEach(c=>{n.parameters[c]!==void 0?a.push(c+"="+n.parameters[c]):a.push(c)}),i+="a=fmtp:"+r+" "+a.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(a=>{i+="a=rtcp-fb:"+r+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,i),10)},a=n.indexOf(":",i);return a>-1?(r.attribute=n.substring(i+1,a),r.value=n.substring(a+1)):r.attribute=n.substring(i+1),r},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let r="a=setup:"+i+`\r
`;return n.fingerprints.forEach(a=>{r+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),r},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const r=e.matchPrefix(n+i,"a=ice-ufrag:")[0],a=e.matchPrefix(n+i,"a=ice-pwd:")[0];return r&&a?{usernameFragment:r.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(n)[0].split(" ");i.profile=a[2];for(let l=3;l<a.length;l++){const d=a[l],f=e.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(f){const m=e.parseRtpMap(f),p=e.matchPrefix(n,"a=fmtp:"+d+" ");switch(m.parameters=p.length?e.parseFmtp(p[0]):{},m.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),i.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(m.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(l=>{i.headerExtensions.push(e.parseExtmap(l))});const c=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(l=>{c.forEach(d=>{l.rtcpFeedback.find(m=>m.type===d.type&&m.parameter===d.parameter)||l.rtcpFeedback.push(d)})}),i},e.writeRtpDescription=function(n,i){let r="";r+="m="+n+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(c=>{r+=e.writeRtpMap(c),r+=e.writeFmtp(c),r+=e.writeRtcpFb(c)});let a=0;return i.codecs.forEach(c=>{c.maxptime>a&&(a=c.maxptime)}),a>0&&(r+="a=maxptime:"+a+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(c=>{r+=e.writeExtmap(c)}),r},e.parseRtpEncodingParameters=function(n){const i=[],r=e.parseRtpParameters(n),a=r.fecMechanisms.indexOf("RED")!==-1,c=r.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(v=>e.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),d=l.length>0&&l[0].ssrc;let f;const m=e.matchPrefix(n,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(w=>parseInt(w,10)));m.length>0&&m[0].length>1&&m[0][0]===d&&(f=m[0][1]),r.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let b={ssrc:d,codecPayloadType:parseInt(v.parameters.apt,10)};d&&f&&(b.rtx={ssrc:f}),i.push(b),a&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:d,mechanism:c?"red+ulpfec":"red"},i.push(b))}}),i.length===0&&d&&i.push({ssrc:d});let p=e.matchPrefix(n,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-2e3*8:p=void 0,i.forEach(v=>{v.maxBitrate=p})),i},e.parseRtcpParameters=function(n){const i={},r=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const a=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=a.length>0,i.compound=a.length===0;const c=e.matchPrefix(n,"a=rtcp-mux");return i.mux=c.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const r=e.matchPrefix(n,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const a=e.matchPrefix(n,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(a.length>0)return i=a[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),r=e.matchPrefix(n,"a=max-message-size:");let a;r.length>0&&(a=parseInt(r[0].substring(19),10)),isNaN(a)&&(a=65536);const c=e.matchPrefix(n,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:i.fmt,maxMessageSize:a};const l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){const d=l[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:a}}},e.writeSctpDescription=function(n,i){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,r){let a;const c=i!==void 0?i:2;return n?a=n:a=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+a+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const r=e.splitLines(n);for(let a=0;a<r.length;a++)switch(r[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[a].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const r=e.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){const r=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},t.exports=e}(Fp)),Fp.exports}var rA=bj(),jo=oj(rA),Sj=M6({__proto__:null,default:jo},[rA]);function tf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new e(i),a=jo.parseCandidate(i.candidate);for(const c in a)c in r||Object.defineProperty(r,c,{value:a[c]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,Aa(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function dv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Aa(t,"icecandidate",e=>{if(e.candidate){const n=jo.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function nf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const d=jo.splitSections(l.sdp);return d.shift(),d.some(f=>{const m=jo.parseMLine(f);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},i=function(l){const d=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const f=parseInt(d[1],10);return f!==f?-1:f},r=function(l){let d=65536;return e.browser==="firefox"&&(e.version<57?l===-1?d=16384:d=2147483637:e.version<60?d=e.version===57?65535:65536:d=2147483637),d},a=function(l,d){let f=65536;e.browser==="firefox"&&e.version===57&&(f=65535);const m=jo.matchPrefix(l.sdp,"a=max-message-size:");return m.length>0?f=parseInt(m[0].substring(19),10):e.browser==="firefox"&&d!==-1&&(f=2147483637),f},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=i(arguments[0]),f=r(d),m=a(arguments[0],d);let p;f===0&&m===0?p=Number.POSITIVE_INFINITY:f===0||m===0?p=Math.max(f,m):p=Math.min(f,m);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return p}}),this._sctp=v}return c.apply(this,arguments)}}function rf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,r){const a=i.send;i.send=function(){const l=arguments[0],d=l.length||l.size||l.byteLength;if(i.readyState==="open"&&r.sctp&&d>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return a.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},Aa(t,"datachannel",i=>(e(i.channel,i.target),i))}function fv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const a=r.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const c=new Event("connectionstatechange",r);a.dispatchEvent(c)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function hv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=r.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&r instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:r.type,sdp:a}):r.sdp=a}return n.apply(this,arguments)}}function sf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function af(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>n.apply(this,[c]))})}var Tj=Object.freeze({__proto__:null,removeExtmapAllowMixed:hv,shimAddIceCandidateNullOrEmpty:sf,shimConnectionState:fv,shimMaxMessageSize:nf,shimParameterlessSetLocalDescription:af,shimRTCIceCandidate:tf,shimRTCIceCandidateRelayProtocol:dv,shimSendThrowTypeError:rf});function xj(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=_R,i=vj(t),r={browserDetails:i,commonShim:Tj,extractVersion:Al,disableLog:pj,disableWarnings:gj,sdp:Sj};switch(i.browser){case"chrome":if(!rw||!lv||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=rw,sf(t,i),af(t),DR(t,i),NR(t),lv(t,i),MR(t),LR(t,i),OR(t),IR(t),jR(t,i),tf(t),dv(t),fv(t),nf(t,i),rf(t),hv(t,i);break;case"firefox":if(!sw||!uv||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=sw,sf(t,i),af(t),BR(t,i),uv(t,i),FR(t),HR(t),VR(t),zR(t),qR(t),KR(t),GR(t),YR(t),WR(t),tf(t),fv(t),nf(t,i),rf(t);break;case"safari":if(!aw||!e.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=aw,sf(t,i),af(t),eA(t),nA(t),ZR(t),$R(t),XR(t),tA(t),JR(t),iA(t),tf(t),dv(t),nf(t,i),rf(t),hv(t,i);break;default:n("Unsupported browser!");break}return r}xj({window:typeof window>"u"?void 0:window});const wj=10,Sl="lk_e2ee",Cj="LKFrameEncryptionKey",kj={sharedKey:!1,ratchetSalt:Cj,ratchetWindowSize:8,failureTolerance:wj,keyringSize:16};var _s;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(_s||(_s={}));var cw;(function(t){t.KeyRatcheted="keyRatcheted"})(cw||(cw={}));var Rs;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Rs||(Rs={}));var lw;(function(t){t.Error="cryptorError"})(lw||(lw={}));function Ej(){return Rj()||mv()}function mv(){return typeof window.RTCRtpScriptTransform<"u"}function Rj(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class tW extends ur.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,r)=>{ot.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},kj),e),this.on(_s.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,i){const r={key:e,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),r),this.emit(_s.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(_s.RatchetRequest,e,n)}}class js extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var lt;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(lt||(lt={}));class Rt extends js{constructor(e,n,i,r){super(1,e),this.name="ConnectionError",this.status=i,this.reason=n,this.context=r,this.reasonName=lt[n]}}class q0 extends js{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Lr extends js{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class Aj extends js{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class pn extends js{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class pv extends js{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class uw extends js{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class dw extends js{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:z0[n]}}var Cf;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Cf||(Cf={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Cf||(Cf={}));var fw;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(fw||(fw={}));var fe;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(fe||(fe={}));var ye;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(ye||(ye={}));var De;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(De||(De={}));var ke;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(ke||(ke={}));function _j(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const Pj=/version\/(\d+(\.?_?\d+)+)/i;let Vp;function oi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Vp===void 0||e){const i=Dj.find(r=>{let{test:a}=r;return a.test(n)});Vp=i?.describe(n)}return Vp}const Dj=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:of(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:zp(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:of(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:zp(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:of(Pj,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:zp(t)}}}];function of(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=e.match(t);return i&&i.length>=n&&i[n]||""}function zp(t){return t.includes("mac os")?of(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var Nj="2.15.4";const Mj=Nj,Oj=16;class An{}An.setTimeout=function(){return setTimeout(...arguments)};An.setInterval=function(){return setInterval(...arguments)};An.clearTimeout=function(){return clearTimeout(...arguments)};An.clearInterval=function(){return clearInterval(...arguments)};const Ij=5e3,Tl=[];var ai;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(ai||(ai={}));class te extends ur.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=te.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=ot,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),Ij):this.handleAppVisibilityChanged()},this.log=Fr((r=i.loggerName)!==null&&r!==void 0?r:ji.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=te.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),st(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===te.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===te.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Tl.forEach(a=>{a.parentElement===null&&!e&&(e=a)}),e&&Tl.splice(Tl.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),_o(this.mediaStreamTrack,e);const i=e.srcObject.getTracks(),r=i.some(a=>a.kind==="audio");return e.play().then(()=>{this.emit(r?ke.AudioPlaybackStarted:ke.VideoPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(r?ke.AudioPlaybackFailed:ke.VideoPlaybackFailed,a):a.name==="AbortError"?ot.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):ot.warn("could not playback ".concat(r?"audio":"video"),a),r&&e&&i.some(c=>c.kind==="video")&&a.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(ke.ElementAttached,e),e}detach(e){try{if(e){Bo(this.mediaStreamTrack,e);const i=this.attachedElements.indexOf(e);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(e),this.emit(ke.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(i=>{Bo(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(ke.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Fr(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Tl.forEach(i=>{i.parentElement||(n=!1)}),n&&Tl.push(e)}}handleAppVisibilityChanged(){return K(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===te.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Gn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Gn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function _o(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let i;t.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(t)||(i.forEach(r=>{n.removeTrack(r)}),n.addTrack(t)),(!wa()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(wa()||Yo())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function Bo(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(f){f.Audio="audio",f.Video="video",f.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(f){f.Camera="camera",f.Microphone="microphone",f.ScreenShare="screen_share",f.ScreenShareAudio="screen_share_audio",f.Unknown="unknown"})(n=t.Source||(t.Source={}));let i;(function(f){f.Active="active",f.Paused="paused",f.Unknown="unknown"})(i=t.StreamState||(t.StreamState={}));function r(f){switch(f){case e.Audio:return Ii.AUDIO;case e.Video:return Ii.VIDEO;default:return Ii.DATA}}t.kindToProto=r;function a(f){switch(f){case Ii.AUDIO:return e.Audio;case Ii.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=a;function c(f){switch(f){case n.Camera:return on.CAMERA;case n.Microphone:return on.MICROPHONE;case n.ScreenShare:return on.SCREEN_SHARE;case n.ScreenShareAudio:return on.SCREEN_SHARE_AUDIO;default:return on.UNKNOWN}}t.sourceToProto=c;function l(f){switch(f){case on.CAMERA:return n.Camera;case on.MICROPHONE:return n.Microphone;case on.SCREEN_SHARE:return n.ScreenShare;case on.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=l;function d(f){switch(f){case rv.ACTIVE:return i.Active;case rv.PAUSED:return i.Paused;default:return i.Unknown}}t.streamStateFromProto=d})(te||(te={}));class wt{constructor(e,n,i,r,a){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&i!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:i,maxFramerate:r,priority:a};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const Uj=["vp8","h264"],Lj=["vp8","h264","vp9","av1","h265"];function jj(t){return!!Uj.find(e=>e===t)}var hw;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(hw||(hw={}));var gv;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(gv||(gv={}));const ql={h90:new wt(160,90,9e4,20),h180:new wt(320,180,16e4,20),h216:new wt(384,216,18e4,20),h360:new wt(640,360,45e4,20),h540:new wt(960,540,8e5,25),h720:new wt(1280,720,17e5,30),h1080:new wt(1920,1080,3e6,30),h1440:new wt(2560,1440,5e6,30),h2160:new wt(3840,2160,8e6,30)},vv={h120:new wt(160,120,7e4,20),h180:new wt(240,180,125e3,20),h240:new wt(320,240,14e4,20),h360:new wt(480,360,33e4,20),h480:new wt(640,480,5e5,20),h540:new wt(720,540,6e5,25),h720:new wt(960,720,13e5,30),h1080:new wt(1440,1080,23e5,30),h1440:new wt(1920,1440,38e5,30)},K0={h360fps3:new wt(640,360,2e5,3,"medium"),h360fps15:new wt(640,360,4e5,15,"medium"),h720fps5:new wt(1280,720,8e5,5,"medium"),h720fps15:new wt(1280,720,15e5,15,"medium"),h720fps30:new wt(1280,720,2e6,30,"medium"),h1080fps15:new wt(1920,1080,25e5,15,"medium"),h1080fps30:new wt(1920,1080,5e6,30,"medium"),original:new wt(0,0,7e6,30,"medium")},Bj="|",mw="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function Fj(t){const e=t.split(Bj);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Wn(t){return K(this,void 0,void 0,function*(){return new Promise(e=>An.setTimeout(e,t))})}function yv(){return"addTransceiver"in RTCPeerConnection.prototype}function bv(){return"addTrack"in RTCPeerConnection.prototype}function Vj(){if(!("getCapabilities"in RTCRtpSender)||wa())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function zj(){if(!("getCapabilities"in RTCRtpSender)||Yo())return!1;if(wa()){const n=oi();if(n?.version&&Bi(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&Bi(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function Ji(t){return t==="av1"||t==="vp9"}function Sv(t){return!document||kf()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function Hj(){return typeof RTCPeerConnection>"u"?!1:yv()||bv()}function Yo(){var t;return((t=oi())===null||t===void 0?void 0:t.name)==="Firefox"}function wa(){var t;return((t=oi())===null||t===void 0?void 0:t.name)==="Safari"}function kf(){const t=oi();return t?.name==="Safari"||t?.os==="iOS"}function qj(){const t=oi();return t?.name==="Safari"&&t.version.startsWith("17.")||t?.os==="iOS"&&!!t?.osVersion&&Bi(t.osVersion,"17")>=0}function Kj(t){return t||(t=oi()),t?.name==="Safari"&&Bi(t.version,"18.3")>0||t?.os==="iOS"&&!!t?.osVersion&&Bi(t.osVersion,"18.3")>0}function sA(){var t,e;return Gn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function Gj(){const t=oi(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Bi(e,t.osVersion)>=0?!0:t.name==="Safari"&&Bi(e,t.version)>=0}function Gn(){return typeof document<"u"}function ar(){return navigator.product=="ReactNative"}function Tv(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function aA(){if(globalThis&&globalThis.LiveKitReactNativeGlobal)return globalThis.LiveKitReactNativeGlobal}function oA(){if(!ar())return;let t=aA();if(t)return t.platform}function pw(){if(Gn())return window.devicePixelRatio;if(ar()){let t=aA();if(t)return t.devicePixelRatio}return 1}function Bi(t,e){const n=t.split("."),i=e.split("."),r=Math.min(n.length,i.length);for(let a=0;a<r;++a){const c=parseInt(n[a],10),l=parseInt(i[a],10);if(c>l)return 1;if(c<l)return-1;if(a===r-1&&c===l)return 0}return t===""&&e!==""?-1:e===""?1:n.length==i.length?0:n.length<i.length?-1:1}function Yj(t){for(const e of t)e.target.handleResize(e)}function Wj(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Hp=null;const gw=()=>(Hp||(Hp=new ResizeObserver(Yj)),Hp);let qp=null;const vw=()=>(qp||(qp=new IntersectionObserver(Wj,{root:null,rootMargin:"0px"})),qp);function $j(){var t;const e=new U4({sdk:dR.JS,protocol:Oj,version:Mj});return ar()&&(e.os=(t=oA())!==null&&t!==void 0?t:""),e}function yw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=t,r.height=e;const a=r.getContext("2d");a?.fillRect(0,0,r.width,r.height),i&&a&&(a.beginPath(),a.arc(t/2,e/2,50,0,Math.PI*2,!0),a.closePath(),a.fillStyle="grey",a.fill());const c=r.captureStream(),[l]=c.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let xl;function Kp(){if(!xl){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const i=t.createMediaStreamDestination();if(e.connect(n),n.connect(i),e.start(),[xl]=i.stream.getAudioTracks(),!xl)throw Error("Could not get empty media stream audio track");xl.enabled=!1}return xl.clone()}class Po{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,r)=>K(this,void 0,void 0,function*(){this.resolve=i,this.reject=r,e&&(yield e(i,r))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function Xj(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),i=Y0();if(!i)throw new Error("Audio Context not supported on this browser");const r=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,a=i.createMediaStreamSource(new MediaStream([r])),c=i.createAnalyser();c.minDecibels=n.minDecibels,c.maxDecibels=n.maxDecibels,c.fftSize=n.fftSize,c.smoothingTimeConstant=n.smoothingTimeConstant,a.connect(c);const l=new Uint8Array(c.frequencyBinCount);return{calculateVolume:()=>{c.getByteFrequencyData(l);let m=0;for(const v of l)m+=Math.pow(v/255,2);return Math.sqrt(m/l.length)},analyser:c,cleanup:()=>K(this,void 0,void 0,function*(){yield i.close(),n.cloneTrack&&r.stop()})}}function Zj(t){return Lj.includes(t)}function Ps(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function Jj(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function xv(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function Qj(t,e){return t.segments.map(n=>{let{id:i,text:r,language:a,startTime:c,endTime:l,final:d}=n;var f;const m=(f=e.get(i))!==null&&f!==void 0?f:Date.now(),p=Date.now();return d?e.delete(i):e.set(i,m),{id:i,text:r,startTime:Number.parseInt(c.toString()),endTime:Number.parseInt(l.toString()),final:d,language:a,firstReceivedTime:m,lastReceivedTime:p}})}function e5(t){const{id:e,timestamp:n,message:i,editTimestamp:r}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}function bw(t){switch(t.reason){case lt.LeaveRequest:return t.context;case lt.Cancelled:return Li.CLIENT_INITIATED;case lt.NotAllowed:return Li.USER_REJECTED;case lt.ServerUnreachable:return Li.JOIN_FAILURE;default:return Li.UNKNOWN_REASON}}function cf(t){return t!==void 0?Number(t):void 0}function da(t){return t!==void 0?BigInt(t):void 0}function Fo(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function tr(t){return!!t&&t.kind==te.Kind.Audio}function _a(t){return!!t&&t.kind==te.Kind.Video}function bs(t){return Fo(t)&&_a(t)}function Nr(t){return Fo(t)&&tr(t)}function wv(t){return!!t&&!t.isLocal}function t5(t){return!!t&&!t.isLocal}function Gp(t){return wv(t)&&_a(t)}function n5(t){return t.isLocal}function i5(t,e){const n=[];let i=new TextEncoder().encode(t);for(;i.length>e;){let r=e;for(;r>0;){const a=i[r];if(a!==void 0&&(a&192)!==128)break;r--}n.push(i.slice(0,r)),i=i.slice(r)}return i.length>0&&n.push(i),n}function cA(t,e,n){var i,r,a,c;const{optionsWithoutProcessor:l,audioProcessor:d,videoProcessor:f}=uA(t??{}),m=e?.processor,p=n?.processor,v=l??{};return v.audio===!0&&(v.audio={}),v.video===!0&&(v.video={}),v.audio&&(Cv(v.audio,e),(i=(a=v.audio).deviceId)!==null&&i!==void 0||(a.deviceId={ideal:"default"}),(d||m)&&(v.audio.processor=d??m)),v.video&&(Cv(v.video,n),(r=(c=v.video).deviceId)!==null&&r!==void 0||(c.deviceId={ideal:"default"}),(f||p)&&(v.video.processor=f??p)),v}function Cv(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function G0(t){var e,n,i,r;const a={};if(t.video)if(typeof t.video=="object"){const c={},l=c,d=t.video;Object.keys(d).forEach(f=>{switch(f){case"resolution":Cv(l,d.resolution);break;default:l[f]=d[f]}}),a.video=c,(e=(i=a.video).deviceId)!==null&&e!==void 0||(i.deviceId={ideal:"default"})}else a.video=t.video?{deviceId:{ideal:"default"}}:!1;else a.video=!1;return t.audio?typeof t.audio=="object"?(a.audio=t.audio,(n=(r=a.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):a.audio={deviceId:{ideal:"default"}}:a.audio=!1,a}function lA(t){return K(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const i=Y0();if(i){const r=i.createAnalyser();r.fftSize=2048;const a=r.frequencyBinCount,c=new Uint8Array(a);i.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(r),yield Wn(n),r.getByteTimeDomainData(c);const d=c.some(f=>f!==128&&f!==0);return i.close(),!d}return!1}()})}function Y0(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const i=()=>K(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(a){console.warn("Error trying to auto-resume audio context",a)}(r=window.document.body)===null||r===void 0||r.removeEventListener("click",i)});window.document.body.addEventListener("click",i)}return n}}function r5(t){return t==="audioinput"?te.Source.Microphone:t==="videoinput"?te.Source.Camera:te.Source.Unknown}function kv(t){return t===te.Source.Microphone?"audioinput":t===te.Source.Camera?"videoinput":void 0}function s5(t){var e,n;let i=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(i=typeof i=="boolean"?{}:i,wa()?i=Object.assign(Object.assign({},i),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:i,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function lf(t){return t.split("/")[1].toLowerCase()}function a5(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new F0({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function st(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?st(t.track):{})}}function o5(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function c5(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const i=[...Object.keys(e),...Object.keys(t)],r={};for(const a of i)t[a]!==e[a]&&(r[a]=(n=e[a])!==null&&n!==void 0?n:"");return r}function uA(t){const e=Object.assign({},t);let n,i;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(i=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:_j(e)}}function l5(t){switch(t){case on.CAMERA:return te.Source.Camera;case on.MICROPHONE:return te.Source.Microphone;case on.SCREEN_SHARE:return te.Source.ScreenShare;case on.SCREEN_SHARE_AUDIO:return te.Source.ScreenShareAudio;default:return te.Source.Unknown}}function Sw(t,e){return t.width*t.height<e.width*e.height}function u5(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(i=>i.quality===e)}class d5 extends ur.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var i,r;const{kind:a,data:c}=n.data;switch(a){case"error":ot.error(c.error.message),this.emit(Rs.EncryptionError,c.error);break;case"initAck":c.enabled&&this.keyProvider.getKeys().forEach(l=>{this.postKey(l)});break;case"enable":if(c.enabled&&this.keyProvider.getKeys().forEach(l=>{this.postKey(l)}),this.encryptionEnabled!==c.enabled&&c.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Rs.ParticipantEncryptionStatusChanged,c.enabled,this.room.localParticipant),this.encryptionEnabled=c.enabled;else if(c.participantIdentity){const l=(r=this.room)===null||r===void 0?void 0:r.getParticipantByIdentity(c.participantIdentity);if(!l)throw TypeError("couldn't set encryption status, participant not found".concat(c.participantIdentity));this.emit(Rs.ParticipantEncryptionStatusChanged,c.enabled,l)}break;case"ratchetKey":this.keyProvider.emit(_s.KeyRatcheted,c.ratchetResult,c.participantIdentity,c.keyIndex);break}},this.onWorkerError=n=>{ot.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Rs.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!Ej())throw new q0("tried to setup end-to-end encryption on an unsupported browser");if(ot.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:uj.getLevel()}};this.worker&&(ot.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){ot.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?ot.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(De.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(fe.TrackPublished,(i,r)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==ri.NONE,r.identity)),e.on(fe.ConnectionStateChanged,i=>{i===at.Connected&&e.remoteParticipants.forEach(r=>{r.trackPublications.forEach(a=>{this.setParticipantCryptorEnabled(a.trackInfo.encryption!==ri.NONE,r.identity)})})}).on(fe.TrackUnsubscribed,(i,r,a)=>{var c;const l={kind:"removeTransform",data:{participantIdentity:a.identity,trackId:i.mediaStreamID}};(c=this.worker)===null||c===void 0||c.postMessage(l)}).on(fe.TrackSubscribed,(i,r,a)=>{this.setupE2EEReceiver(i,a.identity,r.trackInfo)}).on(fe.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(ye.LocalSenderCreated,(i,r)=>K(this,void 0,void 0,function*(){this.setupE2EESender(r,i)})),n.on(_s.SetKey,i=>this.postKey(i)).on(_s.RatchetRequest,(i,r)=>this.postRatchetRequest(i,r))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(i)}postKey(e){let{key:n,participantIdentity:i,keyIndex:r}=e;var a;if(!this.worker)throw Error("could not set key, worker is missing");const c={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((a=this.room)===null||a===void 0?void 0:a.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(c)}postEnable(e,n){if(this.worker){const i={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,i){if(e.receiver){if(!i?.mimeType||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?lf(i.mimeType):void 0)}}setupE2EESender(e,n){if(!Fo(e)||!n){n||ot.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,i,r){return K(this,void 0,void 0,function*(){if(this.worker){if(mv()){const a={kind:"decode",participantIdentity:i,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{if(Sl in e&&r){const d={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:i}};this.worker.postMessage(d);return}let a=e.writableStream,c=e.readableStream;if(!a||!c){const d=e.createEncodedStreams();e.writableStream=d.writable,a=d.writable,e.readableStream=d.readable,c=d.readable}const l={kind:"decode",data:{readableStream:c,writableStream:a,trackId:n,codec:r,participantIdentity:i,isReuse:Sl in e}};this.worker.postMessage(l,[c,a])}e[Sl]=!0}})}handleSender(e,n,i){var r;if(!(Sl in e||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(mv()){ot.info("initialize script transform");const a={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{ot.info("initialize encoded streams");const a=e.createEncodedStreams(),c={kind:"encode",data:{readableStream:a.readable,writableStream:a.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(c,[a.readable,a.writable])}e[Sl]=!0}}}const Yp="default";class xn{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new xn),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;if(((a=xn.userMediaPromiseMap)===null||a===void 0?void 0:a.size)>0){ot.debug("awaiting getUserMedia promise");try{n?yield xn.userMediaPromiseMap.get(n):yield Promise.all(xn.userMediaPromiseMap.values())}catch{ot.warn("error waiting for media permissons")}}let c=yield navigator.mediaDevices.enumerateDevices();if(r&&!(wa()&&i.hasDeviceInUse(n))&&(c.filter(d=>d.kind===n).length===0||c.some(d=>{const f=d.label==="",m=n?d.kind===n:!0;return f&&m}))){const d={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},f=yield navigator.mediaDevices.getUserMedia(d);c=yield navigator.mediaDevices.enumerateDevices(),f.getTracks().forEach(m=>{m.stop()})}return i._previousDevices=c,n&&(c=c.filter(l=>l.kind===n)),c}()})}normalizeDeviceId(e,n,i){return K(this,void 0,void 0,function*(){if(n!==Yp)return n;const r=yield this.getDevices(e),a=r.find(l=>l.deviceId===Yp);if(!a){ot.warn("could not reliably determine default device");return}const c=r.find(l=>l.deviceId!==Yp&&l.groupId===(i??a.groupId));if(!c){ot.warn("could not reliably determine default device");return}return c?.deviceId})}hasDeviceInUse(e){return e?xn.userMediaPromiseMap.has(e):xn.userMediaPromiseMap.size>0}}xn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];xn.userMediaPromiseMap=new Map;var Ol;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Ol||(Ol={}));class f5{constructor(){this.pendingTasks=new Map,this.taskMutex=new Un,this.nextTaskIndex=0}run(e){return K(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Ol.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Ol.RUNNING,yield e()}finally{n.status=Ol.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return K(this,void 0,void 0,function*(){return this.run(()=>K(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function h5(t,e){const n=new URL(Jj(t));return e.forEach((i,r)=>{n.searchParams.set(r,i)}),dA(n,"rtc")}function m5(t){const e=new URL(xv(t));return dA(e,"validate")}function p5(t){return t.endsWith("/")?t:"".concat(t,"/")}function dA(t,e){return t.pathname="".concat(p5(t.pathname)).concat(e),t.toString()}const g5=["syncState","trickle","offer","answer","simulate","leave"];function v5(t){const e=g5.indexOf(t.case)>=0;return ot.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Dt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Dt||(Dt={}));class W0{get currentState(){return this.state}get isDisconnected(){return this.state===Dt.DISCONNECTING||this.state===Dt.DISCONNECTED}get isEstablishingConnection(){return this.state===Dt.CONNECTING||this.state===Dt.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=Dt.DISCONNECTED,this.log=ot,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Fr((i=n.loggerName)!==null&&i!==void 0?i:ji.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new f5,this.queuedRequests=[],this.closingLock=new Un,this.connectionLock=new Un,this.state=Dt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,i,r){return K(this,void 0,void 0,function*(){return this.state=Dt.CONNECTING,this.options=i,yield this.connect(e,n,i,r)})}reconnect(e,n,i,r){return K(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Dt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:r}))})}connect(e,n,i,r){this.connectOptions=i;const a=$j(),c=y5(n,a,i),l=h5(e,c),d=m5(l);return new Promise((f,m)=>K(this,void 0,void 0,function*(){const p=yield this.connectionLock.lock();try{const v=()=>K(this,void 0,void 0,function*(){this.close(),clearTimeout(b),m(new Rt("room connection has been cancelled (signal)",lt.Cancelled))}),b=setTimeout(()=>{this.close(),m(new Rt("room connection has timed out (signal)",lt.ServerUnreachable))},i.websocketTimeout);r?.aborted&&v(),r?.addEventListener("abort",v);const w=new URL(l);w.searchParams.has("access_token")&&w.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(w),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(l),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(b)},this.ws.onerror=S=>K(this,void 0,void 0,function*(){if(this.state!==Dt.CONNECTED){this.state=Dt.DISCONNECTED,clearTimeout(b);try{const R=yield fetch(d);if(R.status.toFixed(0).startsWith("4")){const k=yield R.text();m(new Rt(k,lt.NotAllowed,R.status))}else m(new Rt("Encountered unknown websocket error during connection: ".concat(S.toString()),lt.InternalError,R.status))}catch(R){m(new Rt(R instanceof Error?R.message:"server was not reachable",lt.ServerUnreachable))}return}this.handleWSError(S)}),this.ws.onmessage=S=>K(this,void 0,void 0,function*(){var R,k,N;let O;if(typeof S.data=="string"){const I=JSON.parse(S.data);O=Z1.fromJson(I,{ignoreUnknownFields:!0})}else if(S.data instanceof ArrayBuffer)O=Z1.fromBinary(new Uint8Array(S.data));else{this.log.error("could not decode websocket message: ".concat(typeof S.data),this.logContext);return}if(this.state!==Dt.CONNECTED){let I=!1;if(((R=O.message)===null||R===void 0?void 0:R.case)==="join"?(this.state=Dt.CONNECTED,r?.removeEventListener("abort",v),this.pingTimeoutDuration=O.message.value.pingTimeout,this.pingIntervalDuration=O.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),f(O.message.value)):this.state===Dt.RECONNECTING&&O.message.case!=="leave"?(this.state=Dt.CONNECTED,r?.removeEventListener("abort",v),this.startPingInterval(),((k=O.message)===null||k===void 0?void 0:k.case)==="reconnect"?f(O.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),f(void 0),I=!0)):this.isEstablishingConnection&&O.message.case==="leave"?m(new Rt("Received leave request while trying to (re)connect",lt.LeaveRequest,void 0,O.message.value.reason)):i.reconnect||m(new Rt("did not receive join response, got ".concat((N=O.message)===null||N===void 0?void 0:N.case," instead"),lt.InternalError)),!I)return}this.signalLatency&&(yield Wn(this.signalLatency)),this.handleSignalResponse(O)}),this.ws.onclose=S=>{this.isEstablishingConnection&&m(new Rt("Websocket got closed during a (re)connection attempt",lt.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:S.reason,code:S.code,wasClean:S.wasClean,state:this.state})),this.handleOnClose(S.reason)}}finally{p()}}))}close(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Dt.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const r=new Promise(a=>{e.ws?e.ws.onclose=()=>{a()}:a()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([r,Wn(250)])),e.ws=void 0}}finally{n&&(e.state=Dt.DISCONNECTED),i()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Ef(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Ef(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new j0({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new B0({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return K(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const l=a.getNextRequestId();return yield a.sendRequest({case:"updateMetadata",value:new bR({requestId:l,metadata:i,name:r,attributes:c})}),l}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new yR({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new xR({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Ot.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new ER({timestamp:Ot.parse(Date.now()),rtt:Ot.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new vR({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new $f({reason:Li.CLIENT_INITIATED,action:Lo.DISCONNECT})})}sendRequest(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!r&&!v5(n)&&i.state===Dt.RECONNECTING){i.queuedRequests.push(()=>K(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield i.requestQueue.flush()),i.signalLatency&&(yield Wn(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.ws||i.ws.readyState!==i.ws.OPEN){i.log.error("cannot send signal request before connected, type: ".concat(n?.case),i.logContext);return}const c=new B4({message:n});try{i.useJSON?i.ws.send(c.toJsonString()):i.ws.send(c.toBinary())}catch(l){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:l}))}}()})}handleSignalResponse(e){var n,i;const r=e.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let a=!1;if(r.case==="answer"){const c=Tw(r.value);this.onAnswer&&this.onAnswer(c,r.value.id)}else if(r.case==="offer"){const c=Tw(r.value);this.onOffer&&this.onOffer(c,r.value.id)}else if(r.case==="trickle"){const c=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(c,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=r.value.speakers)!==null&&i!==void 0?i:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),a=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));a||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return K(this,void 0,void 0,function*(){if(this.state===Dt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=An.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&An.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=An.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&An.clearInterval(this.pingInterval)}}function Tw(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Ef(t,e){return new xa({sdp:t.sdp,type:t.type,id:e})}function y5(t,e,n){var i;const r=new URLSearchParams;return r.set("access_token",t),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",ar()?"reactnative":"js"),r.set("version",e.version),r.set("protocol",e.protocol.toString()),e.deviceModel&&r.set("device_model",e.deviceModel),e.os&&r.set("os",e.os),e.osVersion&&r.set("os_version",e.osVersion),e.browser&&r.set("browser",e.browser),e.browserVersion&&r.set("browser_version",e.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&r.set("network",navigator.connection.type),r}class xw{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class b5{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const r=i+this.ttl;return this._map.set(e,{value:n,expiresAt:r}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e(i.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],i=this.asValueMap();for(const[r,a]of i.entries())n.push(e(a,r,i));return n}asValueMap(){const e=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e.set(n,i.value);return e}}var Pi={},Wp={},$p={exports:{}},ww;function $0(){if(ww)return $p.exports;ww=1;var t=$p.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),$p.exports}var Cw;function S5(){return Cw||(Cw=1,function(t){var e=function(l){return String(Number(l))===l?Number(l):l},n=function(l,d,f,m){if(m&&!f)d[m]=e(l[1]);else for(var p=0;p<f.length;p+=1)l[p+1]!=null&&(d[f[p]]=e(l[p+1]))},i=function(l,d,f){var m=l.name&&l.names;l.push&&!d[l.push]?d[l.push]=[]:m&&!d[l.name]&&(d[l.name]={});var p=l.push?{}:m?d[l.name]:d;n(f.match(l.reg),p,l.names,l.name),l.push&&d[l.push].push(p)},r=$0(),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(l){var d={},f=[],m=d;return l.split(/(\r\n|\r|\n)/).filter(a).forEach(function(p){var v=p[0],b=p.slice(2);v==="m"&&(f.push({rtp:[],fmtp:[]}),m=f[f.length-1]);for(var w=0;w<(r[v]||[]).length;w+=1){var S=r[v][w];if(S.reg.test(b))return i(S,m,b)}}),d.media=f,d};var c=function(l,d){var f=d.split(/=(.+)/,2);return f.length===2?l[f[0]]=e(f[1]):f.length===1&&d.length>1&&(l[f[0]]=void 0),l};t.parseParams=function(l){return l.split(/;\s?/).reduce(c,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(l){return l.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(l){for(var d=[],f=l.split(" ").map(e),m=0;m<f.length;m+=3)d.push({component:f[m],ip:f[m+1],port:f[m+2]});return d},t.parseImageAttributes=function(l){return l.split(" ").map(function(d){return d.substring(1,d.length-1).split(",").reduce(c,{})})},t.parseSimulcastStreamList=function(l){return l.split(";").map(function(d){return d.split(",").map(function(f){var m,p=!1;return f[0]!=="~"?m=e(f):(m=e(f.substring(1,f.length)),p=!0),{scid:m,paused:p}})})}}(Wp)),Wp}var Xp,kw;function T5(){if(kw)return Xp;kw=1;var t=$0(),e=/%[sdv%]/g,n=function(c){var l=1,d=arguments,f=d.length;return c.replace(e,function(m){if(l>=f)return m;var p=d[l];switch(l+=1,m){case"%%":return"%";case"%s":return String(p);case"%d":return Number(p);case"%v":return""}})},i=function(c,l,d){var f=l.format instanceof Function?l.format(l.push?d:d[l.name]):l.format,m=[c+"="+f];if(l.names)for(var p=0;p<l.names.length;p+=1){var v=l.names[p];l.name?m.push(d[l.name][v]):m.push(d[l.names[p]])}else m.push(d[l.name]);return n.apply(null,m)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];return Xp=function(c,l){l=l||{},c.version==null&&(c.version=0),c.name==null&&(c.name=" "),c.media.forEach(function(p){p.payloads==null&&(p.payloads="")});var d=l.outerOrder||r,f=l.innerOrder||a,m=[];return d.forEach(function(p){t[p].forEach(function(v){v.name in c&&c[v.name]!=null?m.push(i(p,v,c)):v.push in c&&c[v.push]!=null&&c[v.push].forEach(function(b){m.push(i(p,v,b))})})}),c.media.forEach(function(p){m.push(i("m",t.m[0],p)),f.forEach(function(v){t[v].forEach(function(b){b.name in p&&p[b.name]!=null?m.push(i(v,b,p)):b.push in p&&p[b.push]!=null&&p[b.push].forEach(function(w){m.push(i(v,b,w))})})})}),m.join(`\r
`)+`\r
`},Xp}var Ew;function x5(){if(Ew)return Pi;Ew=1;var t=S5(),e=T5(),n=$0();return Pi.grammar=n,Pi.write=e,Pi.parse=t.parse,Pi.parseParams=t.parseParams,Pi.parseFmtpConfig=t.parseFmtpConfig,Pi.parsePayloads=t.parsePayloads,Pi.parseRemoteCandidates=t.parseRemoteCandidates,Pi.parseImageAttributes=t.parseImageAttributes,Pi.parseSimulcastStreamList=t.parseSimulcastStreamList,Pi}var xs=x5();function X0(t,e,n){var i,r,a;e===void 0&&(e=50),n===void 0&&(n={});var c=(i=n.isImmediate)!=null&&i,l=(r=n.callback)!=null&&r,d=n.maxWait,f=Date.now(),m=[];function p(){if(d!==void 0){var b=Date.now()-f;if(b+e>=d)return d-b}return e}var v=function(){var b=[].slice.call(arguments),w=this;return new Promise(function(S,R){var k=c&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,f=Date.now(),!c){var O=t.apply(w,b);l&&l(O),m.forEach(function(I){return(0,I.resolve)(O)}),m=[]}},p()),k){var N=t.apply(w,b);return l&&l(N),S(N)}m.push({resolve:S,reject:R})})};return v.cancel=function(b){a!==void 0&&clearTimeout(a),m.forEach(function(w){return(0,w.reject)(b)}),m=[]},v}const w5=.7,C5=20,Vo={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class Rw extends ur.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=ot,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=X0(r=>K(this,void 0,void 0,function*(){this.emit(Vo.NegotiationStarted);try{yield this.createAndSendOffer()}catch(a){if(r)r(a);else throw a}}),C5),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Fr((i=n.loggerName)!==null&&i!==void 0?i:ji.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new Un}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},e.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},e.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return K(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return K(this,void 0,void 0,function*(){var i;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(e.type==="offer"){let{stereoMids:a,nackMids:c}=k5(e);this.remoteStereoMids=a,this.remoteNackMids=c}else if(e.type==="answer"){const a=xs.parse((i=e.sdp)!==null&&i!==void 0?i:"");a.media.forEach(c=>{c.type==="audio"&&this.trackBitrates.some(l=>{if(!l.transceiver||c.mid!=l.transceiver.mid)return!1;let d=0;if(c.rtp.some(m=>m.codec.toUpperCase()===l.codec.toUpperCase()?(d=m.payload,!0):!1),d===0)return!0;let f=!1;for(const m of c.fmtp)if(m.payload===d){m.config=m.config.split(";").filter(p=>!p.includes("maxaveragebitrate")).join(";"),l.maxbr>0&&(m.config+=";maxaveragebitrate=".concat(l.maxbr*1e3)),f=!0;break}return f||l.maxbr>0&&c.fmtp.push({payload:d,config:"maxaveragebitrate=".concat(l.maxbr*1e3)}),!0})}),r=xs.write(a)}return yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(a=>{this.pc.addIceCandidate(a)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Vo.NegotiationComplete),e.sdp&&xs.parse(e.sdp).media.forEach(c=>{c.type==="video"&&this.emit(Vo.RTPVideoPayloadTypes,c.rtp)})),!0})}createAndSendOffer(e){return K(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const l=this._pc.remoteDescription;if(e?.iceRestart&&l)yield this._pc.setRemoteDescription(l);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const a=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:a.sdp},this.logContext));const c=xs.parse((n=a.sdp)!==null&&n!==void 0?n:"");if(c.media.forEach(l=>{_w(l),l.type==="audio"?Aw(l,[],[]):l.type==="video"&&this.trackBitrates.some(d=>{if(!l.msid||!d.cid||!l.msid.includes(d.cid))return!1;let f=0;if(l.rtp.some(p=>p.codec.toUpperCase()===d.codec.toUpperCase()?(f=p.payload,!0):!1),f===0||(Ji(d.codec)&&!wa()&&this.ensureVideoDDExtensionForSVC(l,c),d.codec!=="av1"))return!0;const m=Math.round(d.maxbr*w5);for(const p of l.fmtp)if(p.payload===f){p.config.includes("x-google-start-bitrate")||(p.config+=";x-google-start-bitrate=".concat(m));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(a,xs.write(c)),this.onOffer(a,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),i=xs.parse((e=n.sdp)!==null&&e!==void 0?e:"");return i.media.forEach(r=>{_w(r),r.type==="audio"&&Aw(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,xs.write(i)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new pn("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new pn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return K(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const i=new Map,r=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),i.set(l.id,l);break;case"remote-candidate":r.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const c=(e=i.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(c!==void 0)return r.get(c)})}setMungedSDP(e,n,i){return K(this,void 0,void 0,function*(){if(n){const r=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(a){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:a,sdp:n})),e.sdp=r}}try{i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(r){let a="unknown error";r instanceof Error?a=r.message:typeof r=="string"&&(a=r);const c={error:a,sdp:e.sdp};throw!i&&this.pc.remoteDescription&&(c.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:c})),new pv(a)}})}ensureVideoDDExtensionForSVC(e,n){var i,r;if(!((i=e.ext)===null||i===void 0?void 0:i.some(c=>c.uri===mw))){if(this.ddExtID===0){let c=0;n.media.forEach(l=>{var d;l.type==="video"&&((d=l.ext)===null||d===void 0||d.forEach(f=>{f.value>c&&(c=f.value)}))}),this.ddExtID=c+1}(r=e.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:mw})}}}function Aw(t,e,n){let i=0;t.rtp.some(r=>r.codec==="opus"?(i=r.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(r=>r.payload===i&&r.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(r=>r.payload===i?(r.config.includes("stereo=1")||(r.config+=";stereo=1"),!0):!1))}function k5(t){var e;const n=[],i=[],r=xs.parse((e=t.sdp)!==null&&e!==void 0?e:"");let a=0;return r.media.forEach(c=>{var l;c.type==="audio"&&(c.rtp.some(d=>d.codec==="opus"?(a=d.payload,!0):!1),!((l=c.rtcpFb)===null||l===void 0)&&l.some(d=>d.payload===a&&d.type==="nack")&&i.push(c.mid),c.fmtp.some(d=>d.payload===a?(d.config.includes("sprop-stereo=1")&&n.push(c.mid),!0):!1))}),{stereoMids:n,nackMids:i}}function _w(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}const Ev="vp8",E5={audioPreset:gv.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:K0.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Ev,backupCodec:!0,preConnectBuffer:!1},fA={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},hA={deviceId:{ideal:"default"},resolution:ql.h720.resolution},R5={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new fj,disconnectOnPageLeave:!0,webAudioMix:!1},Z0={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var zt;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(zt||(zt={}));class A5{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,i){var r;this.peerConnectionTimeout=Z0.peerConnectionTimeout,this.log=ot,this.updateState=()=>{var a;const c=this.state,l=this.requiredTransports.map(d=>d.getConnectionState());l.every(d=>d==="connected")?this.state=zt.CONNECTED:l.some(d=>d==="failed")?this.state=zt.FAILED:l.some(d=>d==="connecting")?this.state=zt.CONNECTING:l.every(d=>d==="closed")?this.state=zt.CLOSED:l.some(d=>d==="closed")?this.state=zt.CLOSING:l.every(d=>d==="new")&&(this.state=zt.NEW),c!==this.state&&(this.log.debug("pc state change: from ".concat(zt[c]," to ").concat(zt[this.state]),this.logContext),(a=this.onStateChange)===null||a===void 0||a.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Fr((r=i.loggerName)!==null&&r!==void 0?r:ji.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new Rw(e,i),this.subscriber=new Rw(e,i),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=a=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,a,Ui.PUBLISHER)},this.subscriber.onIceCandidate=a=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,a,Ui.SUBSCRIBER)},this.subscriber.onDataChannel=a=>{var c;(c=this.onDataChannel)===null||c===void 0||c.call(this,a)},this.subscriber.onTrack=a=>{var c;(c=this.onTrack)===null||c===void 0||c.call(this,a)},this.publisher.onOffer=(a,c)=>{var l;(l=this.onPublisherOffer)===null||l===void 0||l.call(this,a,c)},this.state=zt.NEW,this.connectionLock=new Un,this.remoteOfferLock=new Un}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return K(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return K(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return K(this,void 0,void 0,function*(){n===Ui.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return K(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const i=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(e,n))?yield this.subscriber.createAndSetAnswer():void 0}finally{i()}})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return K(this,void 0,void 0,function*(){var i;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(a=>this.ensureTransportConnected(a,e,n)))}finally{r()}})}negotiate(e){return K(this,void 0,void 0,function*(){return new Promise((n,i)=>K(this,void 0,void 0,function*(){const r=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),a=()=>{clearTimeout(r),i("negotiation aborted")};e.signal.addEventListener("abort",a),this.publisher.once(Vo.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Vo.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(c=>{clearTimeout(r),i(c)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Ui.PUBLISHER?this.publisher.getConnectedAddress():e===Ui.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return K(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(i.getConnectionState()!=="connected")return new Promise((d,f)=>K(a,void 0,void 0,function*(){const m=()=>{this.log.warn("abort transport connection",this.logContext),An.clearTimeout(p),f(new Rt("room connection has been cancelled",lt.Cancelled))};r?.signal.aborted&&m(),r?.signal.addEventListener("abort",m);const p=An.setTimeout(()=>{r?.signal.removeEventListener("abort",m),f(new Rt("could not establish pc connection",lt.InternalError))},c);for(;this.state!==zt.CONNECTED;)if(yield Wn(50),r?.signal.aborted){f(new Rt("room connection has been cancelled",lt.Cancelled));return}An.clearTimeout(p),r?.signal.removeEventListener("abort",m),d()}))}()})}}class Kt extends Error{constructor(e,n,i){super(n),this.code=e,this.message=Pw(n,Kt.MAX_MESSAGE_BYTES),this.data=i?Pw(i,Kt.MAX_DATA_BYTES):void 0}static fromProto(e){return new Kt(e.code,e.message,e.data)}toProto(){return new oR({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new Kt(Kt.ErrorCode[e],Kt.ErrorMessage[e],n)}}Kt.MAX_MESSAGE_BYTES=256;Kt.MAX_DATA_BYTES=15360;Kt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Kt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const mA=15360;function J0(t){return new TextEncoder().encode(t).length}function Pw(t,e){if(J0(t)<=e)return t;let n=0,i=t.length;const r=new TextEncoder;for(;n<i;){const a=Math.floor((n+i+1)/2);r.encode(t.slice(0,a)).length<=e?n=a:i=a-1}return t.slice(0,n)}const Q0=2e3;function Zf(t,e){if(!e)return 0;let n,i;return"bytesReceived"in t?(n=t.bytesReceived,i=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,i=e.bytesSent),n===void 0||i===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-i)*8*1e3/(t.timestamp-e.timestamp)}const ey=typeof MediaRecorder<"u";class _5{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const P5=ey?MediaRecorder:_5;class D5 extends P5{constructor(e,n){if(!ey)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let i,r;const a=()=>r===void 0,c=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",c),this.removeEventListener("error",l),r?.close(),r=void 0},l=d=>{r?.error(d),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",c),this.removeEventListener("error",l),r=void 0};this.byteStream=new ReadableStream({start:d=>{r=d,i=f=>K(this,void 0,void 0,function*(){let m;if(f.data.arrayBuffer){const p=yield f.data.arrayBuffer();m=new Uint8Array(p)}else if(f.data.byteArray)m=f.data.byteArray;else throw new Error("no data available!");a()||d.enqueue(m)}),this.addEventListener("dataavailable",i)},cancel:()=>{c()}}),this.addEventListener("stop",c),this.addEventListener("error",l)}}function N5(){return ey}const M5=1e3,O5=1e4;class pA extends te{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;super(e,n,a),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=X0(()=>K(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>K(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(ke.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new Un,this.pauseUpstreamLock=new Un,this.processorLock=new Un,this.restartLock=new Un,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==te.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return K(this,void 0,void 0,function*(){var i;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(a=>{Bo(this._mediaStreamTrack,a)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e){const a=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(_o(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}finally{a()}}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(a=>{_o(r??e,a)}))})}waitForDimensions(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M5;return function*(){var i;if(e.kind===te.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=oi())===null||i===void 0?void 0:i.os)==="iOS"&&(yield Wn(10));const r=Date.now();for(;Date.now()-r<n;){const a=e.dimensions;if(a)return a;yield Wn(50)}throw new Lr("unable to get track dimensions after timeout")}()})}setDeviceId(e){return K(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Ps(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Ps(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===te.Source.ScreenShare)return;const{deviceId:i,groupId:r}=e._mediaStreamTrack.getSettings(),a=e.kind===te.Kind.Audio?"audioinput":"videoinput";return n?xn.getInstance().normalizeDeviceId(a,i,r):i}()})}mute(){return K(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return K(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return K(this,void 0,void 0,function*(){if(!this.sender)throw new Lr("unable to replace an unpublished track");let i,r;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,r=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),r&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return K(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:i,facingMode:r}=e,a=hj(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const c={audio:!1,video:!1};this.kind===te.Kind.Video?c.video=i||r?{deviceId:i,facingMode:r}:!0:c.audio=i?{deviceId:i}:!0,this.attachedElements.forEach(f=>{Bo(this.mediaStreamTrack,f)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const d=(yield navigator.mediaDevices.getUserMedia(c)).getTracks()[0];return yield d.applyConstraints(a),d.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(d),this._constraints=e,this.emit(ke.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ke.Muted:ke.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),sA()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(ke.UpstreamPaused,this);const i=oi();if(i?.name==="Safari"&&Bi(i.version,"12.0")<0)throw new q0("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(ke.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return K(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;const c=yield i.processorLock.lock();try{i.log.debug("setting up processor",i.logContext);const l=document.createElement(i.kind),d={kind:i.kind,track:i._mediaStreamTrack,element:l,audioContext:i.audioContext};if(yield n.init(d),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.stopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(_o(i._mediaStreamTrack,l),l.muted=!0,l.play().catch(f=>{f instanceof DOMException&&f.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:f})),setTimeout(()=>{l.play().catch(m=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:m}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:f}))}),i.processor=n,i.processorElement=l,i.processor.processedTrack){for(const f of i.attachedElements)f!==i.processorElement&&r&&(Bo(i._mediaStreamTrack,f),_o(i.processor.processedTrack,f));yield(a=i.sender)===null||a===void 0?void 0:a.replaceTrack(i.processor.processedTrack)}i.emit(ke.TrackProcessorUpdate,i.processor)}finally{c()}}()})}getProcessor(){return this.processor}stopProcessor(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var i,r;e.processor&&(e.log.debug("stopping processor",e.logContext),(i=e.processor.processedTrack)===null||i===void 0||i.stop(),yield e.processor.destroy(),e.processor=void 0,n||((r=e.processorElement)===null||r===void 0||r.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(ke.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!N5()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new D5(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},O5)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class Rf extends pA{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;super(e,te.Kind.Audio,n,i,a),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>K(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let c;try{c=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}c&&this.prevStats&&(this._currentBitrate=Zf(c,this.prevStats)),this.prevStats=c}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(ke.AudioTrackFeatureUpdate,this,Tn.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(ke.AudioTrackFeatureUpdate,this,Tn.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===te.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ps(this._constraints.deviceId);return this.source===te.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return K(this,void 0,void 0,function*(){let n;if(e){const i=G0({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return K(this,void 0,void 0,function*(){const i=yield n.restart.call(this,e);return this.checkForSilence(),i})}startMonitor(){Gn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Q0)))}setProcessor(e){return K(this,void 0,void 0,function*(){var n;const i=yield this.processorLock.lock();try{if(!ar()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(r),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(ke.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return K(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(r=>{r.type==="outbound-rtp"&&(i={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),i})}checkForSilence(){return K(this,void 0,void 0,function*(){const e=yield lA(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(ke.AudioSilenceDetected)),e})}}function I5(t,e,n){switch(t.kind){case"audio":return new Rf(t,e,!1,void 0,n);case"video":return new Af(t,e,!1,n);default:throw new Lr("unsupported track type: ".concat(t.kind))}}const U5=Object.values(ql),L5=Object.values(vv),j5=Object.values(K0),B5=[ql.h180,ql.h360],F5=[vv.h180,vv.h360],V5=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var i,r;return new wt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=t.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,t.encoding.priority)}),Rv=["q","h","f"];function Av(t,e,n,i){var r,a;let c=i?.videoEncoding;t&&(c=i?.screenShareEncoding);const l=i?.simulcast,d=i?.scalabilityMode,f=i?.videoCodec;if(!c&&!l&&!d||!e||!n)return[{}];c||(c=H5(t,e,n,f),ot.debug("using video encoding",c));const m=c.maxFramerate,p=new wt(e,n,c.maxBitrate,c.maxFramerate,c.priority);if(d&&Ji(f)){const w=new gA(d),S=[];if(w.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(d));const R=oi();if(kf()||ar()||R?.name==="Chrome"&&Bi(R?.version,"113")<0){const k=w.suffix=="h"?2:3,N=Kj(R);for(let O=0;O<w.spatial;O+=1)S.push({rid:Rv[2-O],maxBitrate:c.maxBitrate/Math.pow(k,O),maxFramerate:p.encoding.maxFramerate,scaleResolutionDownBy:N?Math.pow(2,O):void 0});S[0].scalabilityMode=d}else S.push({maxBitrate:c.maxBitrate,maxFramerate:p.encoding.maxFramerate,scalabilityMode:d});return p.encoding.priority&&(S[0].priority=p.encoding.priority,S[0].networkPriority=p.encoding.priority),ot.debug("using svc encoding",{encodings:S}),S}if(!l)return[c];let v=[];t?v=(r=Nw(i?.screenShareSimulcastLayers))!==null&&r!==void 0?r:Dw(t,p):v=(a=Nw(i?.videoSimulcastLayers))!==null&&a!==void 0?a:Dw(t,p);let b;if(v.length>0){const w=v[0];v.length>1&&([,b]=v);const S=Math.max(e,n);if(S>=960&&b)return Zp(e,n,[w,b,p],m);if(S>=480)return Zp(e,n,[w,p],m)}return Zp(e,n,[p])}function z5(t,e,n){var i,r,a,c;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&ot.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const l=t.mediaStreamTrack.getSettings(),d=(i=l.width)!==null&&i!==void 0?i:(r=t.dimensions)===null||r===void 0?void 0:r.width,f=(a=l.height)!==null&&a!==void 0?a:(c=t.dimensions)===null||c===void 0?void 0:c.height;return t.source===te.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Av(t.source===te.Source.ScreenShare,d,f,n)}function H5(t,e,n,i){const r=q5(t,e,n);let{encoding:a}=r[0];const c=Math.max(e,n);for(let l=0;l<r.length;l+=1){const d=r[l];if(a=d.encoding,d.width>=c)break}if(i)switch(i){case"av1":case"h265":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.7;break;case"vp9":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.85;break}return a}function q5(t,e,n){if(t)return j5;const i=e>n?e/n:n/e;return Math.abs(i-16/9)<Math.abs(i-4/3)?U5:L5}function Dw(t,e){if(t)return V5(e);const{width:n,height:i}=e,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?B5:F5}function Zp(t,e,n,i){const r=[];if(n.forEach((a,c)=>{if(c>=Rv.length)return;const l=Math.min(t,e),f={rid:Rv[c],scaleResolutionDownBy:Math.max(1,l/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate},m=i&&a.encoding.maxFramerate?Math.min(i,a.encoding.maxFramerate):a.encoding.maxFramerate;m&&(f.maxFramerate=m);const p=Yo()||c===0;a.encoding.priority&&p&&(f.priority=a.encoding.priority,f.networkPriority=a.encoding.priority),r.push(f)}),ar()&&oA()==="ios"){let a;r.forEach(l=>{a?l.maxFramerate&&l.maxFramerate>a&&(a=l.maxFramerate):a=l.maxFramerate});let c=!0;r.forEach(l=>{var d;l.maxFramerate!=a&&(c&&(c=!1,ot.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),ot.info('Setting framerate of encoding "'.concat((d=l.rid)!==null&&d!==void 0?d:"",'" to ').concat(a)),l.maxFramerate=a)})}return r}function Nw(t){if(t)return t.sort((e,n)=>{const{encoding:i}=e,{encoding:r}=n;return i.maxBitrate>r.maxBitrate?1:i.maxBitrate<r.maxBitrate?-1:i.maxBitrate===r.maxBitrate&&i.maxFramerate&&r.maxFramerate?i.maxFramerate>r.maxFramerate?1:-1:0})}class gA{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function K5(t){return t.source===te.Source.ScreenShare||t.constraints.height&&Ps(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const G5=5e3;class Af extends pA{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(e,te.Kind.Video,n,i,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>K(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(d){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:d}));return}const c=new Map(a.map(d=>[d.rid,d])),l=a.some(d=>d.qualityLimitationReason==="cpu");if(l!==this.isCpuConstrained&&(this.isCpuConstrained=l,this.isCpuConstrained&&this.emit(ke.CpuConstrained)),this.prevStats){let d=0;c.forEach((f,m)=>{var p;const v=(p=this.prevStats)===null||p===void 0?void 0:p.get(m);d+=Zf(f,v)}),this._currentBitrate=d}this.prevStats=c}),this.senderLock=new Un}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Gn())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Q0))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return K(this,void 0,void 0,function*(){var n,i,r,a,c;yield e.pauseUpstream.call(this);try{for(var l=!0,d=Ur(this.simulcastCodecs.values()),f;f=yield d.next(),n=f.done,!n;l=!0)a=f.value,l=!1,yield(c=a.sender)===null||c===void 0?void 0:c.replaceTrack(null)}catch(m){i={error:m}}finally{try{!l&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return K(this,void 0,void 0,function*(){var n,i,r,a,c;yield e.resumeUpstream.call(this);try{for(var l=!0,d=Ur(this.simulcastCodecs.values()),f;f=yield d.next(),n=f.done,!n;l=!0){a=f.value,l=!1;const m=a;yield(c=m.sender)===null||c===void 0?void 0:c.replaceTrack(m.mediaStreamTrack)}}catch(m){i={error:m}}finally{try{!l&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===te.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===te.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return K(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(r=>{var a;if(r.type==="outbound-rtp"){const c={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(a=r.rid)!==null&&a!==void 0?a:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},l=i.get(r.remoteId);l&&(c.jitter=l.jitter,c.packetsLost=l.packetsLost,c.roundTripTime=l.roundTripTime),n.push(c)}}),n.sort((r,a)=>{var c,l;return((c=a.frameWidth)!==null&&c!==void 0?c:0)-((l=r.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(e){const n=[];for(let i=ai.LOW;i<=ai.HIGH;i+=1)n.push(new V0({quality:i,enabled:i<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(Ji(this.codec),n)}restartTrack(e){return K(this,void 0,void 0,function*(){var n,i,r,a,c;let l;if(e){const p=G0({video:e});typeof p.video!="boolean"&&(l=p.video)}yield this.restart(l),this.isCpuConstrained=!1;try{for(var d=!0,f=Ur(this.simulcastCodecs.values()),m;m=yield f.next(),n=m.done,!n;d=!0){a=m.value,d=!1;const p=a;p.sender&&((c=p.sender.transport)===null||c===void 0?void 0:c.state)!=="closed"&&(p.mediaStreamTrack=this.mediaStreamTrack.clone(),yield p.sender.replaceTrack(p.mediaStreamTrack))}}catch(p){i={error:p}}finally{try{!d&&!n&&(r=f.return)&&(yield r.call(f))}finally{if(i)throw i.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return K(this,arguments,void 0,function(i){var r=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var c,l,d,f,m,p;if(yield n.setProcessor.call(r,i,a),!((m=r.processor)===null||m===void 0)&&m.processedTrack)try{for(var v=!0,b=Ur(r.simulcastCodecs.values()),w;w=yield b.next(),c=w.done,!c;v=!0)f=w.value,v=!1,yield(p=f.sender)===null||p===void 0?void 0:p.replaceTrack(r.processor.processedTrack)}catch(S){l={error:S}}finally{try{!v&&!c&&(d=b.return)&&(yield d.call(b))}finally{if(l)throw l.error}}}()})}setDegradationPreference(e){return K(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,i),i}setSimulcastTrackSender(e,n){const i=this.simulcastCodecs.get(e);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},G5))}setPublishingCodecs(e){return K(this,void 0,void 0,function*(){var n,i,r,a,c,l,d;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(Ji(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const f=[];try{for(n=!0,i=Ur(e);r=yield i.next(),a=r.done,!a;n=!0){d=r.value,n=!1;const m=d;if(!this.codec||this.codec===m.codec)yield this.setPublishingLayers(Ji(m.codec),m.qualities);else{const p=this.simulcastCodecs.get(m.codec);if(this.log.debug("try setPublishingCodec for ".concat(m.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:p})),!p||!p.sender){for(const v of m.qualities)if(v.enabled){f.push(m.codec);break}}else p.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(m.codec),this.logContext),yield Mw(p.sender,p.encodings,m.qualities,this.senderLock,Ji(m.codec),this.log,this.logContext))}}}catch(m){c={error:m}}finally{try{!n&&!a&&(l=i.return)&&(yield l.call(i))}finally{if(c)throw c.error}}return f})}setPublishingLayers(e,n){return K(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield Mw(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return K(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,r)=>{var a;return Object.assign(Object.assign({},i),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((a=this.mediaStreamTrack.getSettings().height)!==null&&a!==void 0?a:360)/360)),scalabilityMode:r===0&&Ji(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),sA()&&this.isInBackground&&this.source===te.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Mw(t,e,n,i,r,a,c){return K(this,void 0,void 0,function*(){const l=yield i.lock();a.debug("setPublishingLayersForSender",Object.assign(Object.assign({},c),{sender:t,qualities:n,senderEncodings:e}));try{const d=t.getParameters(),{encodings:f}=d;if(!f)return;if(f.length!==e.length){a.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},c),{encodings:f,senderEncodings:e}));return}let m=!1;!1&&f[0].scalabilityMode||(r&&n.some(b=>b.enabled)&&n.forEach(b=>b.enabled=!0),f.forEach((v,b)=>{var w;let S=(w=v.rid)!==null&&w!==void 0?w:"";S===""&&(S="q");const R=vA(S),k=n.find(N=>N.quality===R);k&&v.active!==k.enabled&&(m=!0,v.active=k.enabled,a.debug("setting layer ".concat(k.quality," to ").concat(v.active?"enabled":"disabled"),c),Yo()&&(k.enabled?(v.scaleResolutionDownBy=e[b].scaleResolutionDownBy,v.maxBitrate=e[b].maxBitrate,v.maxFrameRate=e[b].maxFrameRate):(v.scaleResolutionDownBy=4,v.maxBitrate=10,v.maxFrameRate=2)))})),m&&(d.encodings=f,a.debug("setting encodings",Object.assign(Object.assign({},c),{encodings:d.encodings})),yield t.setParameters(d))}finally{l()}})}function vA(t){switch(t){case"f":return ai.HIGH;case"h":return ai.MEDIUM;case"q":return ai.LOW;default:return ai.HIGH}}function Ow(t,e,n,i){if(!n)return[new ga({quality:ai.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(i){const r=n[0].scalabilityMode,a=new gA(r),c=[],l=a.suffix=="h"?1.5:2,d=a.suffix=="h"?2:3;for(let f=0;f<a.spatial;f+=1)c.push(new ga({quality:Math.min(ai.HIGH,a.spatial-1)-f,width:Math.ceil(t/Math.pow(l,f)),height:Math.ceil(e/Math.pow(l,f)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(d,f)):0,ssrc:0}));return c}return n.map(r=>{var a,c,l;const d=(a=r.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let f=vA((c=r.rid)!==null&&c!==void 0?c:"");return new ga({quality:f,width:Math.ceil(t/d),height:Math.ceil(e/d),bitrate:(l=r.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const Iw="_lossy",Uw="_reliable",Y5=2*1e3,Jp="leave-reconnect",W5=3e4;var Di;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Di||(Di={}));class $5 extends ur.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Z0.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Di.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=ot,this.reliableDataSequence=1,this.reliableMessageBuffer=new xw,this.reliableReceivedState=new b5(W5),this.handleDataChannel=i=>K(this,[i],void 0,function(r){var a=this;let{channel:c}=r;return function*(){if(c){if(c.label===Uw)a.reliableDCSub=c;else if(c.label===Iw)a.lossyDCSub=c;else return;a.log.debug("on data channel ".concat(c.id,", ").concat(c.label),a.logContext),c.onmessage=a.handleDataMessage}}()}),this.handleDataMessage=i=>K(this,void 0,void 0,function*(){var r,a;const c=yield this.dataProcessLock.lock();try{let l;if(i.data instanceof ArrayBuffer)l=i.data;else if(i.data instanceof Blob)l=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const d=Hn.fromBinary(new Uint8Array(l));if(d.sequence>0&&d.participantSid!==""){const f=this.reliableReceivedState.get(d.participantSid);if(f&&d.sequence<=f)return;this.reliableReceivedState.set(d.participantSid,d.sequence)}((r=d.value)===null||r===void 0?void 0:r.case)==="speaker"?this.emit(De.ActiveSpeakersUpdate,d.value.value.speakers):(((a=d.value)===null||a===void 0?void 0:a.case)==="user"&&Z5(d,d.value.value),this.emit(De.DataPacketReceived,d))}finally{c()}}),this.handleDataError=i=>{const a=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:c}=i.error;this.log.error("DataChannel error on ".concat(a,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:c}))}else this.log.error("Unknown DataChannel error on ".concat(a),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const a=i.currentTarget.maxRetransmits===0?tt.LOSSY:tt.RELIABLE;this.updateAndEmitDCBufferStatus(a)},this.handleDisconnect=(i,r)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=d=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(d,"ms. giving up"),this.logContext),this.emit(De.Disconnected),this.close()},c=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:c,retryCount:this.reconnectAttempts});if(l===null){a(c);return}i===Jp&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=An.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((i,r)=>{this.pcState===Di.Connected&&i();const a=()=>{this.off(De.Disconnected,c),i()},c=()=>{this.off(De.Restarted,a),r()};this.once(De.Restarted,a),this.once(De.Disconnected,c)}),this.updateAndEmitDCBufferStatus=i=>{const r=this.isBufferStatusLow(i);typeof r<"u"&&r!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,r),this.emit(De.DCBufferStatusChanged,r,i))},this.isBufferStatusLow=i=>{const r=this.dataChannelForKind(i);if(r)return i===tt.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(r.bufferedAmount),r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Dt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(So.RR_SIGNAL_DISCONNECTED))},this.log=Fr((n=e.loggerName)!==null&&n!==void 0?n:ji.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new W0(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Un,this.dataProcessLock=new Un,this.dcBufferStatus=new Map([[tt.LOSSY,!0],[tt.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(De.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(De.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(De.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(De.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(De.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(De.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(De.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(De.SignalRequestResponse,i)}get logContext(){var e,n,i,r,a,c;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(r=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.sid,participant:(c=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||c===void 0?void 0:c.identity,pID:this.participantSid}}join(e,n,i,r){return K(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const a=yield this.client.join(e,n,i,r);return this._isClosed=!1,this.latestJoinResponse=a,this.subscriberPrimary=a.subscriberPrimary,this.pcManager||(yield this.configure(a)),(!this.subscriberPrimary||a.fastPublish)&&this.negotiate(),this.clientConfiguration=a.clientConfiguration,this.emit(De.SignalConnected,a),a}catch(a){if(a instanceof Rt&&a.reason===lt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,i,r);throw a}})}close(){return K(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(De.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return K(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new xw,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return K(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Lr("a track with the same ID has already been published");return new Promise((n,i)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],i(new Rt("publication of local track timed out, no response from server",lt.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:a=>{clearTimeout(r),n(a)},reject:()=>{clearTimeout(r),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return K(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return K(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==zt.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new A5(r,e.subscriberPrimary,this.loggerOptions),this.emit(De.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(a,c)=>{this.client.sendIceCandidate(a,c)},this.pcManager.onPublisherOffer=(a,c)=>{this.client.sendOffer(a,c)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(a,c,l)=>K(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(a),this.logContext),["closed","disconnected","failed"].includes(c)&&(this.publisherConnectionPromise=void 0),a===zt.CONNECTED){const m=this.pcState===Di.New;this.pcState=Di.Connected,m&&this.emit(De.Connected,e)}else a===zt.FAILED&&this.pcState===Di.Connected&&(this.pcState=Di.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?So.RR_SUBSCRIBER_FAILED:So.RR_PUBLISHER_FAILED));const d=this.client.isDisconnected||this.client.currentState===Dt.RECONNECTING,f=[zt.FAILED,zt.CLOSING,zt.CLOSED].includes(a);d&&f&&!this._isClosed&&this.emit(De.Offline)}),this.pcManager.onTrack=a=>{this.emit(De.MediaTrackAdded,a.track,a.streams[0],a.receiver)},X5((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n)=>K(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n)=>K(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:i}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],i(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(De.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(De.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(De.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(De.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(De.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",So.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case Lo.DISCONNECT:this.emit(De.Disconnected,e?.reason),this.close();break;case Lo.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Jp);break;case Lo.RESUME:this.handleDisconnect(Jp)}}}makeRTCConfiguration(e){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),e.iceServers&&!i.iceServers){const r=[];e.iceServers.forEach(a=>{const c={urls:a.urls};a.username&&(c.username=a.username),a.credential&&(c.credential=a.credential),r.push(c)}),i.iceServers=r}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Hl.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Iw,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Uw,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,i){return K(this,void 0,void 0,function*(){if(yv())return yield this.createTransceiverRTCRtpSender(e,n,i);if(bv())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new pn("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,i,r){return K(this,void 0,void 0,function*(){if(yv())return this.createSimulcastTransceiverSender(e,n,i,r);if(bv())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new pn("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,i){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new pn("publisher is closed");const r=[];e.mediaStream&&r.push(e.mediaStream),_a(e)&&(e.codec=n.videoCodec);const a={direction:"sendonly",streams:r};return i&&(a.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,a)).sender})}createSimulcastTransceiverSender(e,n,i,r){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new pn("publisher is closed");const a={direction:"sendonly"};r&&(a.sendEncodings=r);const c=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,a);if(i.videoCodec)return e.setSimulcastTrackSender(i.videoCodec,c.sender),c.sender})}createRTCRtpSender(e){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new pn("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return K(this,void 0,void 0,function*(){var n,i,r;if(!this._isClosed){if(this.attemptingReconnect){ot.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Hl.DISABLED||((r=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&r!==void 0?r:zt.NEW)===zt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(a){this.reconnectAttempts+=1;let c=!0;a instanceof pn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:a})),c=!1):a instanceof To||(this.fullReconnectOnNext=!0),c?this.handleDisconnect("reconnect",So.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(De.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return K(this,void 0,void 0,function*(){var n,i,r;try{if(!this.url||!this.token)throw new pn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(De.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let a;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new To;a=yield this.join(e??this.url,this.token,this.signalOpts)}catch(c){throw c instanceof Rt&&c.reason===lt.NotAllowed?new pn("could not reconnect, token might be expired"):new To}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(De.SignalRestarted,a),yield this.waitForPCReconnected(),this.client.currentState!==Dt.CONNECTED)throw new To("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(De.Restarted)}catch(a){const c=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(c){yield this.restartConnection(c);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),a}})}resumeConnection(e){return K(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new pn("could not reconnect, url or token not saved");if(!this.pcManager)throw new pn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(De.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(r){let a="";throw r instanceof Error&&(a=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof Rt&&r.reason===lt.NotAllowed?new pn("could not reconnect, token might be expired"):r instanceof Rt&&r.reason===lt.LeaveRequest?r:new To(a)}if(this.emit(De.SignalResumed),i){const r=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Dt.CONNECTED)throw new To("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i?.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(De.Resumed)})}waitForPCInitialConnection(e,n){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new pn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return K(this,void 0,void 0,function*(){this.pcState=Di.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Wn(Y5),!this.pcManager)throw new pn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Di.Connected}catch(e){throw this.pcState=Di.Disconnected,new Rt("could not establish PC connection, ".concat(e.message),lt.InternalError)}})}publishRpcResponse(e,n,i,r){return K(this,void 0,void 0,function*(){const a=new Hn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcResponse",value:new aR({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(a,tt.RELIABLE)})}publishRpcAck(e,n){return K(this,void 0,void 0,function*(){const i=new Hn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcAck",value:new sR({requestId:n})}});yield this.sendDataPacket(i,tt.RELIABLE)})}sendDataPacket(e,n){return K(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(n),n===tt.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=e.toBinary(),r=this.dataChannelForKind(n);if(r){if(n===tt.RELIABLE&&this.reliableMessageBuffer.push({data:i,sequence:e.sequence}),this.attemptingReconnect)return;r.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return K(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(tt.RELIABLE);const n=this.dataChannelForKind(tt.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(tt.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,i)=>K(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const r=()=>i("Engine closed");for(this.once(De.Closing,r);!this.dcBufferStatus.get(e);)yield Wn(10);this.off(De.Closing,r),n()}}))}ensureDataTransportConnected(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var a;if(!i.pcManager)throw new pn("PC manager is closed");const c=r?i.pcManager.subscriber:i.pcManager.publisher,l=r?"Subscriber":"Publisher";if(!c)throw new Rt("".concat(l," connection not set"),lt.InternalError);let d=!1;!r&&!i.dataChannelForKind(n,r)&&(i.createDataChannels(),d=!0),!d&&!r&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(d=!0),d&&i.negotiate();const f=i.dataChannelForKind(n,r);if(f?.readyState==="open")return;const m=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<m;){if(c.isICEConnected&&((a=i.dataChannelForKind(n,r))===null||a===void 0?void 0:a.readyState)==="open")return;yield Wn(50)}throw new Rt("could not establish ".concat(l," connection, state: ").concat(c.getICEConnectionState()),lt.InternalError)}()})}ensurePublisherConnected(e){return K(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==zt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return K(this,void 0,void 0,function*(){return new Promise((e,n)=>K(this,void 0,void 0,function*(){if(!this.pcManager){n(new pv("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,r=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(De.Closing,r),this.pcManager.publisher.once(Vo.RTPVideoPayloadTypes,a=>{const c=new Map;a.forEach(l=>{const d=l.codec.toLowerCase();Zj(d)&&c.set(l.payload,d)}),this.emit(De.RTPVideoMapUpdate,c)});try{yield this.pcManager.negotiate(i),e()}catch(a){a instanceof pv&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",So.RR_UNKNOWN),n(a)}finally{this.off(De.Closing,r)}}))})}dataChannelForKind(e,n){if(n){if(e===tt.LOSSY)return this.lossyDCSub;if(e===tt.RELIABLE)return this.reliableDCSub}else{if(e===tt.LOSSY)return this.lossyDC;if(e===tt.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var i,r;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const a=this.pcManager.subscriber.getLocalDescription(),c=this.pcManager.subscriber.getRemoteDescription(),l=(r=(i=this.signalOpts)===null||i===void 0?void 0:i.autoSubscribe)!==null&&r!==void 0?r:!0,d=new Array,f=new Array;e.forEach(m=>{m.isDesired!==l&&d.push(m.trackSid),m.isEnabled||f.push(m.trackSid)}),this.client.sendSyncState(new wR({answer:a?Ef({sdp:a.sdp,type:a.type}):void 0,offer:c?Ef({sdp:c.sdp,type:c.type}):void 0,subscription:new Wf({trackSids:d,subscribe:!l,participantTracks:[]}),publishTracks:a5(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:f,datachannelReceiveStates:this.reliableReceivedState.map((m,p)=>new CR({publisherSid:p,lastSeq:m}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(i,r)=>{i?.id!==void 0&&i.id!==null&&e.push(new kR({label:i.label,id:i.id,target:r}))};return n(this.dataChannelForKind(tt.LOSSY),Ui.PUBLISHER),n(this.dataChannelForKind(tt.RELIABLE),Ui.PUBLISHER),n(this.dataChannelForKind(tt.LOSSY,!0),Ui.SUBSCRIBER),n(this.dataChannelForKind(tt.RELIABLE,!0),Ui.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&An.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Gn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Gn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class To extends Error{}function X5(t){return t!==void 0&&t>13}function Z5(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const i=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=i,e.destinationIdentities=i}class _v{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return Tv(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return K(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(i=>!this.attemptedRegions.find(r=>r.url===i.url));if(n.length>0){const i=n[0];return this.attemptedRegions.push(i),ot.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return K(this,void 0,void 0,function*(){const n=yield fetch("".concat(J5(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const i=yield n.json();return this.lastUpdateAt=Date.now(),i}else throw new Rt("Could not fetch region settings: ".concat(n.statusText),n.status===401?lt.NotAllowed:lt.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function J5(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class yA{get info(){return this._info}constructor(e,n,i){this.reader=n,this.totalByteSize=i,this._info=e,this.bytesReceived=0}}class Q5 extends yA{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength;const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>K(this,void 0,void 0,function*(){try{const{done:n,value:i}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:i.content})}catch{return{done:!0,value:void 0}}}),return(){return K(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return K(this,void 0,void 0,function*(){var e,n,i,r;let a=new Set;try{for(var c=!0,l=Ur(this),d;d=yield l.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const f=r;a.add(f)}}catch(f){n={error:f}}finally{try{!c&&!e&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return Array.from(a)})}}class e8 extends yA{constructor(e,n,i){super(e,n,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const i=cf(e.chunkIndex),r=this.receivedChunks.get(i);if(r&&r.version>e.version)return;this.receivedChunks.set(i,e),this.bytesReceived+=e.content.byteLength;const a=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,a)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder;return{next:()=>K(this,void 0,void 0,function*(){try{const{done:i,value:r}=yield e.read();return i?{done:!0,value:void 0}:(this.handleChunkReceived(r),{done:!1,value:n.decode(r.content)})}catch{return{done:!0,value:void 0}}}),return(){return K(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return K(this,void 0,void 0,function*(){var e,n,i,r;let a="";try{for(var c=!0,l=Ur(this),d;d=yield l.next(),e=d.done,!e;c=!0)r=d.value,c=!1,a+=r}catch(f){n={error:f}}finally{try{!c&&!e&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return a})}}class bA{constructor(e,n,i){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=i,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return K(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class t8 extends bA{}class n8 extends bA{}class SA extends te{constructor(e,n,i,r,a){super(e,i,a),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ke.Muted:ke.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=i=>{i.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(ke.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return K(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Q0)),o5()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:r,rtpTimestamp:a}=i;a&&this.rtpTimestamp!==a&&(this.emit(ke.TimeSyncUpdate,{timestamp:r,rtpTimestamp:a}),this.rtpTimestamp=a)}};e()}}class TA extends SA{constructor(e,n,i,r,a,c){super(e,n,te.Kind.Audio,i,c),this.monitorReceiver=()=>K(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=Zf(l,this.prevStats)),this.prevStats=l}),this.audioContext=r,this.webAudioPluginNodes=[],a&&(this.sinkId=a.deviceId)}setVolume(e){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):i.volume=e;ar()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(ar())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return K(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(Sv(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&Sv(e)&&e.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{i.connect(r),i=r}),this.gainNode=e.createGain(),i.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(ke.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(ke.AudioPlaybackFailed,r)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return K(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const Qp=100;class i8 extends SA{constructor(e,n,i,r,a){super(e,n,te.Kind.Video,i,a),this.elementInfos=[],this.monitorReceiver=()=>K(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const c=yield this.getReceiverStats();c&&this.prevStats&&this.receiver&&(this._currentBitrate=Zf(c,this.prevStats)),this.prevStats=c}),this.debouncedHandleResize=X0(()=>{this.updateDimensions()},Qp),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?Bo(this._mediaStreamTrack,n):_o(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new r8(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===e);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return K(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,i="",r=new Map;return e.forEach(a=>{a.type==="inbound-rtp"?(i=a.codecId,n={type:"video",streamId:a.id,framesDecoded:a.framesDecoded,framesDropped:a.framesDropped,framesReceived:a.framesReceived,packetsReceived:a.packetsReceived,packetsLost:a.packetsLost,frameWidth:a.frameWidth,frameHeight:a.frameHeight,pliCount:a.pliCount,firCount:a.firCount,nackCount:a.nackCount,jitter:a.jitter,timestamp:a.timestamp,bytesReceived:a.bytesReceived,decoderImplementation:a.decoderImplementation}):a.type==="codec"&&r.set(a.id,a)}),n&&i!==""&&r.get(i)&&(n.mimeType=r.get(i).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(i=>i.element===e);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const i=this.elementInfos.reduce((l,d)=>Math.max(l,d.visibilityChangedAt||0),0),r=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,a=this.elementInfos.some(l=>l.pictureInPicture),c=this.elementInfos.some(l=>l.visible)&&!r||a;if(this.lastVisible!==c){if(!c&&Date.now()-i<Qp){An.setTimeout(()=>{this.updateVisibility()},Qp);return}this.lastVisible=c,this.emit(ke.VisibilityChanged,c,this)}}updateDimensions(){var e,n;let i=0,r=0;const a=this.getPixelDensity();for(const c of this.elementInfos){const l=c.width()*a,d=c.height()*a;l+d>i+r&&(i=l,r=d)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:i,height:r},this.emit(ke.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?pw():n||(pw()>2?2:1)}}class r8{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=i=>{var r;const{target:a,isIntersecting:c}=i;a===this.element&&(this.isIntersecting=c,this.isPiP=wl(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var i,r,a;(r=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=wl(this.element),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=wl(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=e,this.isIntersecting=n??Pv(e),this.isPiP=Gn()&&wl(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,i;this.isIntersecting=Pv(this.element),this.isPiP=wl(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,vw().observe(this.element),gw().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,i,r,a;(e=vw())===null||e===void 0||e.unobserve(this.element),(n=gw())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(a=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||a===void 0||a.removeEventListener("pagehide",this.onLeavePiP)}}function wl(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Pv(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function Pv(t,e){const n=e||window;let i=t.offsetTop,r=t.offsetLeft;const a=t.offsetWidth,c=t.offsetHeight,{hidden:l}=t,{display:d}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,i+=t.offsetTop,r+=t.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+c>n.pageYOffset&&r+a>n.pageXOffset&&!l&&d!=="none"}class Mr extends ur.EventEmitter{constructor(e,n,i,r){var a;super(),this.metadataMuted=!1,this.encryption=ri.NONE,this.log=ot,this.handleMuted=()=>{this.emit(ke.Muted)},this.handleUnmuted=()=>{this.emit(ke.Unmuted)},this.log=Fr((a=r?.loggerName)!==null&&a!==void 0?a:ji.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=i,this.source=te.Source.Unknown}setTrack(e){this.track&&(this.track.off(ke.Muted,this.handleMuted),this.track.off(ke.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(ke.Muted,this.handleMuted),e.on(ke.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),st(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==ri.NONE}get audioTrack(){if(tr(this.track))return this.track}get videoTrack(){if(_a(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=te.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===te.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(Mr||(Mr={}));class Dv extends Mr{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(ke.Ended)},this.handleCpuConstrained=()=>{this.track&&_a(this.track)&&this.emit(ke.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(e){this.track&&(this.track.off(ke.Ended,this.handleTrackEnded),this.track.off(ke.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(ke.Ended,this.handleTrackEnded),e.on(ke.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return K(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return K(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return K(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return K(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(tr(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(Tn.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(Tn.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(Tn.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(Tn.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||i.add(Tn.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(Tn.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function Jf(t,e){return K(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:a}=uA(t);let c=a.audio,l=a.video;if(i&&typeof a.audio=="object"&&(a.audio.processor=i),r&&typeof a.video=="object"&&(a.video.processor=r),t.audio&&typeof a.audio=="object"&&typeof a.audio.deviceId=="string"){const p=a.audio.deviceId;a.audio.deviceId={exact:p},n=!0,c=Object.assign(Object.assign({},a.audio),{deviceId:{ideal:p}})}if(a.video&&typeof a.video=="object"&&typeof a.video.deviceId=="string"){const p=a.video.deviceId;a.video.deviceId={exact:p},n=!0,l=Object.assign(Object.assign({},a.video),{deviceId:{ideal:p}})}(a.audio===!0||typeof a.audio=="object"&&!a.audio.deviceId)&&(a.audio={deviceId:"default"}),a.video===!0?a.video={deviceId:"default"}:typeof a.video=="object"&&!a.video.deviceId&&(a.video.deviceId="default");const d=cA(a,fA,hA),f=G0(d),m=navigator.mediaDevices.getUserMedia(f);a.audio&&(xn.userMediaPromiseMap.set("audioinput",m),m.catch(()=>xn.userMediaPromiseMap.delete("audioinput"))),a.video&&(xn.userMediaPromiseMap.set("videoinput",m),m.catch(()=>xn.userMediaPromiseMap.delete("videoinput")));try{const p=yield m;return yield Promise.all(p.getTracks().map(v=>K(this,void 0,void 0,function*(){const b=v.kind==="audio";let w=b?d.audio:d.video;(typeof w=="boolean"||!w)&&(w={});let S;const R=b?f.audio:f.video;typeof R!="boolean"&&(S=R);const k=v.getSettings().deviceId;S?.deviceId&&Ps(S.deviceId)!==k?S.deviceId=k:S||(S={deviceId:k});const N=I5(v,S,e);return N.kind===te.Kind.Video?N.source=te.Source.Camera:N.kind===te.Kind.Audio&&(N.source=te.Source.Microphone),N.mediaStream=p,tr(N)&&i?yield N.setProcessor(i):_a(N)&&r&&(yield N.setProcessor(r)),N})))}catch(p){if(!n)throw p;return Jf(Object.assign(Object.assign({},t),{audio:c,video:l}),e)}})}function s8(t){return K(this,void 0,void 0,function*(){return(yield Jf({audio:!1,video:!0}))[0]})}function a8(t){return K(this,void 0,void 0,function*(){return(yield Jf({audio:!0,video:!1}))[0]})}var ks;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(ks||(ks={}));function o8(t){switch(t){case Rl.EXCELLENT:return ks.Excellent;case Rl.GOOD:return ks.Good;case Rl.POOR:return ks.Poor;case Rl.LOST:return ks.Lost;default:return ks.Unknown}}class xA extends ur.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===Ta.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Uo.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,i,r,a,c){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Ta.STANDARD;var d;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ks.Unknown,this.log=ot,this.log=Fr((d=c?.loggerName)!==null&&d!==void 0?d:ji.Participant),this.loggerOptions=c,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=i,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=l,this._attributes=a??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Po,this.once(ye.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(te.Source.Camera);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(te.Source.Microphone);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(te.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Uo.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Uo.ACTIVE&&this.emit(ye.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(ye.ParticipantMetadataChanged,i)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ye.ParticipantNameChanged,e)}_setAttributes(e){const n=c5(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(ye.AttributesChanged,n)}setPermissions(e){var n,i,r,a,c,l;const d=this.permissions,f=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||e.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||e.hidden!==((a=this.permissions)===null||a===void 0?void 0:a.hidden)||e.recorder!==((c=this.permissions)===null||c===void 0?void 0:c.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((m,p)=>{var v;return m!==((v=this.permissions)===null||v===void 0?void 0:v.canPublishSources[p])})||e.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=e,f&&this.emit(ye.ParticipantPermissionsChanged,d),f}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ye.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=o8(e),n!==this._connectionQuality&&this.emit(ye.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>tr(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(ke.Muted,()=>{this.emit(ye.TrackMuted,e)}),e.on(ke.Unmuted,()=>{this.emit(ye.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case te.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case te.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function c8(t){var e,n,i;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new TR({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=t.allowAll)!==null&&i!==void 0?i:!1,trackSids:t.allowedTrackSids||[]})}const Lw=15e3;class l8 extends xA{constructor(e,n,i,r,a){super(e,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=ri.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Po)},this.handleReconnected=()=>{var c,l;(l=(c=this.reconnectFuture)===null||c===void 0?void 0:c.resolve)===null||l===void 0||l.call(c),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var c,l,d,f,m,p;this.reconnectFuture&&(this.reconnectFuture.promise.catch(v=>this.log.warn(v.message,this.logContext)),(l=(c=this.reconnectFuture)===null||c===void 0?void 0:c.reject)===null||l===void 0||l.call(c,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((f=(d=this.signalConnectedFuture).reject)===null||f===void 0||f.call(d,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(p=(m=this.activeAgentFuture)===null||m===void 0?void 0:m.reject)===null||p===void 0||p.call(m,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=c=>{var l,d;c.participant&&this.updateInfo(c.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Po),(d=(l=this.signalConnectedFuture).resolve)===null||d===void 0||d.call(l)},this.handleSignalRequestResponse=c=>{const{requestId:l,reason:d,message:f}=c,m=this.pendingSignalRequests.get(l);m&&(d!==z0.OK&&m.reject(new dw(f,d)),this.pendingSignalRequests.delete(l))},this.handleDataPacket=c=>{switch(c.value.case){case"rpcResponse":let l=c.value.value,d=null,f=null;l.value.case==="payload"?d=l.value.value:l.value.case==="error"&&(f=Kt.fromProto(l.value.value)),this.handleIncomingRpcResponse(l.requestId,d,f);break;case"rpcAck":let m=c.value.value;this.handleIncomingRpcAck(m.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(c=>c8(c)))},this.onTrackUnmuted=c=>{this.onTrackMuted(c,c.isUpstreamPaused)},this.onTrackMuted=(c,l)=>{if(l===void 0&&(l=!0),!c.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),st(c)));return}this.engine.updateMuteStatus(c.sid,l)},this.onTrackUpstreamPaused=c=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),st(c))),this.onTrackMuted(c,!0)},this.onTrackUpstreamResumed=c=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),st(c))),this.onTrackMuted(c,c.isMuted)},this.onTrackFeatureUpdate=c=>{const l=this.audioTrackPublications.get(c.sid);if(!l){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(c.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(l.trackSid,l.getTrackFeatures())},this.onTrackCpuConstrained=(c,l)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),st(l))),this.emit(ye.LocalTrackCpuConstrained,c,l)},this.handleSubscribedQualityUpdate=c=>K(this,void 0,void 0,function*(){var l,d,f,m,p;if(!(!((p=this.roomOptions)===null||p===void 0)&&p.dynacast))return;const v=this.videoTrackPublications.get(c.trackSid);if(!v){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}if(!v.videoTrack)return;const b=yield v.videoTrack.setPublishingCodecs(c.subscribedCodecs);try{for(var w=!0,S=Ur(b),R;R=yield S.next(),l=R.done,!l;w=!0){m=R.value,w=!1;const k=m;jj(k)&&(this.log.debug("publish ".concat(k," for ").concat(v.videoTrack.sid),Object.assign(Object.assign({},this.logContext),st(v))),yield this.publishAdditionalCodecForTrack(v.videoTrack,k,v.options))}}catch(k){d={error:k}}finally{try{!w&&!l&&(f=S.return)&&(yield f.call(S))}finally{if(d)throw d.error}}}),this.handleLocalTrackUnpublished=c=>{const l=this.trackPublications.get(c.trackSid);if(!l){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}this.unpublishTrack(l.track)},this.handleTrackEnded=c=>K(this,void 0,void 0,function*(){if(c.source===te.Source.ScreenShare||c.source===te.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),st(c))),this.unpublishTrack(c);else if(c.isUserProvided)yield c.mute();else if(Nr(c)||bs(c))try{if(Gn())try{const l=yield navigator?.permissions.query({name:c.source===te.Source.Camera?"camera":"microphone"});if(l&&l.state==="denied")throw this.log.warn("user has revoked access to ".concat(c.source),Object.assign(Object.assign({},this.logContext),st(c))),l.onchange=()=>{l.state!=="denied"&&(c.isMuted||c.restartTrack(),l.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}c.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),st(c))),Nr(c)?yield c.restartTrack({deviceId:"default"}):yield c.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),st(c))),yield c.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=r,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=a}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==ri.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(De.RemoteMute,(i,r)=>{const a=this.trackPublications.get(i);!a||!a.track||(r?a.mute():a.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(De.Connected,this.handleReconnected).on(De.SignalConnected,this.handleSignalConnected).on(De.SignalRestarted,this.handleReconnected).on(De.SignalResumed,this.handleReconnected).on(De.Restarting,this.handleReconnecting).on(De.Resuming,this.handleReconnecting).on(De.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(De.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(De.Closing,this.handleClosing).on(De.SignalRequestResponse,this.handleSignalRequestResponse).on(De.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return K(this,arguments,void 0,function(n){var i=this;let{metadata:r,name:a,attributes:c}=n;return function*(){return new Promise((l,d)=>K(i,void 0,void 0,function*(){var f,m;try{let p=!1;const v=yield this.engine.client.sendUpdateLocalMetadata((f=r??this.metadata)!==null&&f!==void 0?f:"",(m=a??this.name)!==null&&m!==void 0?m:"",c),b=performance.now();for(this.pendingSignalRequests.set(v,{resolve:l,reject:w=>{d(w),p=!0},values:{name:a,metadata:r,attributes:c}});performance.now()-b<5e3&&!p;){if((!a||this.name===a)&&(!r||this.metadata===r)&&(!c||Object.entries(c).every(w=>{let[S,R]=w;return this.attributes[S]===R||R===""&&!this.attributes[S]}))){this.pendingSignalRequests.delete(v),l();return}yield Wn(50)}d(new dw("Request to update local metadata timed out","TimeoutError"))}catch(p){p instanceof Error&&d(p)}}))}()})}setCameraEnabled(e,n,i){return this.setTrackEnabled(te.Source.Camera,e,n,i)}setMicrophoneEnabled(e,n,i){return this.setTrackEnabled(te.Source.Microphone,e,n,i)}setScreenShareEnabled(e,n,i){return this.setTrackEnabled(te.Source.ScreenShare,e,n,i)}setPermissions(e){const n=this.permissions,i=super.setPermissions(e);return i&&n&&this.emit(ye.ParticipantPermissionsChanged,n),i}setE2EEEnabled(e){return K(this,void 0,void 0,function*(){this.encryptionType=e?ri.GCM:ri.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,i,r){return K(this,void 0,void 0,function*(){var a,c;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(e);if(n)if(l)yield l.unmute();else{let d;if(this.pendingPublishing.has(e)){const f=yield this.waitForPendingPublicationOfSource(e);return f||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield f?.unmute(),f}this.pendingPublishing.add(e);try{switch(e){case te.Source.Camera:d=yield this.createTracks({video:(a=i)!==null&&a!==void 0?a:!0});break;case te.Source.Microphone:d=yield this.createTracks({audio:(c=i)!==null&&c!==void 0?c:!0});break;case te.Source.ScreenShare:d=yield this.createScreenTracks(Object.assign({},i));break;default:throw new Lr(e)}}catch(f){throw d?.forEach(m=>{m.stop()}),f instanceof Error&&this.emit(ye.MediaDevicesError,f,kv(e)),this.pendingPublishing.delete(e),f}for(const f of d){const m=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);e===te.Source.Microphone&&tr(f)&&m.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),f.startPreConnectBuffer())}try{const f=[];for(const p of d)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),st(p))),f.push(this.publishTrack(p,r));[l]=yield Promise.all(f)}catch(f){throw d?.forEach(m=>{m.stop()}),f}finally{this.pendingPublishing.delete(e)}}else if(!l?.track&&this.pendingPublishing.has(e)&&(l=yield this.waitForPendingPublicationOfSource(e),l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),l&&l.track)if(e===te.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const d=this.getTrackPublication(te.Source.ScreenShareAudio);d&&d.track&&this.unpublishTrack(d.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return K(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(te.Source.Camera)||this.pendingPublishing.has(te.Source.Microphone))){this.pendingPublishing.add(te.Source.Camera),this.pendingPublishing.add(te.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(te.Source.Camera),this.pendingPublishing.delete(te.Source.Microphone)}}})}createTracks(e){return K(this,void 0,void 0,function*(){var n,i;e??(e={});const r=cA(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield Jf(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(l=>(tr(l)&&(this.microphoneError=void 0,l.setAudioContext(this.audioContext),l.source=te.Source.Microphone,this.emit(ye.AudioStreamAcquired)),_a(l)&&(this.cameraError=void 0,l.source=te.Source.Camera),l))}catch(a){throw a instanceof Error&&(e.audio&&(this.microphoneError=a),e.video&&(this.cameraError=a)),a}})}createScreenTracks(e){return K(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new q0("getDisplayMedia not supported");e.resolution===void 0&&!qj()&&(e.resolution=K0.h1080fps30.resolution);const n=s5(e),i=yield navigator.mediaDevices.getDisplayMedia(n),r=i.getVideoTracks();if(r.length===0)throw new Lr("no video track found");const a=new Af(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=te.Source.ScreenShare,e.contentHint&&(a.mediaStreamTrack.contentHint=e.contentHint);const c=[a];if(i.getAudioTracks().length>0){this.emit(ye.AudioStreamAcquired);const l=new Rf(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=te.Source.ScreenShareAudio,c.push(l)}return c})}publishTrack(e,n){return K(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return K(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var l,d,f,m;Nr(i)&&i.setAudioContext(a.audioContext),yield(l=a.reconnectFuture)===null||l===void 0?void 0:l.promise,a.republishPromise&&!c&&(yield a.republishPromise),Fo(i)&&a.pendingPublishPromises.has(i)&&(yield a.pendingPublishPromises.get(i));let p;if(i instanceof MediaStreamTrack)p=i.getConstraints();else{p=i.constraints;let k;switch(i.source){case te.Source.Microphone:k="audioinput";break;case te.Source.Camera:k="videoinput"}k&&a.activeDeviceMap.has(k)&&(p=Object.assign(Object.assign({},p),{deviceId:a.activeDeviceMap.get(k)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new Rf(i,p,!0,a.audioContext,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;case"video":i=new Af(i,p,!0,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;default:throw new Lr("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});let v;if(a.trackPublications.forEach(k=>{k.track&&k.track===i&&(v=k)}),v)return a.log.warn("track has already been published, skipping",Object.assign(Object.assign({},a.logContext),st(v))),v;const b="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,w=(d=r?.forceStereo)!==null&&d!==void 0?d:b;w&&(r||(r={}),r.dtx===void 0&&a.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},a.logContext),st(i))),r.red===void 0&&a.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(f=r.dtx)!==null&&f!==void 0||(r.dtx=!1),(m=r.red)!==null&&m!==void 0||(r.red=!1));const S=Object.assign(Object.assign({},a.roomOptions.publishDefaults),r);!Gj()&&a.roomOptions.e2ee&&(a.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},a.logContext)),S.simulcast=!1),S.source&&(i.source=S.source);const R=new Promise((k,N)=>K(a,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Dt.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:st(i)}));const O=setTimeout(()=>{N(new uw("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(O);const I=yield this.publish(i,S,w);k(I)}else try{const O=yield this.publish(i,S,w);k(O)}catch(O){N(O)}}catch(O){N(O)}}));a.pendingPublishPromises.set(i,R);try{return yield R}catch(k){throw k}finally{a.pendingPublishPromises.delete(i)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Po),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),st(e))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(r=>l5(r)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),st(e))),!1)}publish(e,n,i){return K(this,void 0,void 0,function*(){var r,a,c,l,d,f,m,p,v,b;if(!this.hasPermissionsToPublish(e))throw new uw("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(G=>Fo(e)&&G.source===e.source)&&e.source!==te.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),st(e))),n.stopMicTrackOnMute&&tr(e)&&(e.stopOnMute=!0),e.source===te.Source.ScreenShare&&Yo()&&(n.simulcast=!1),n.videoCodec==="av1"&&!Vj()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!zj()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Ev),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(G=>n.videoCodec===lf(G.mime))||(n.videoCodec=lf(this.enabledPublishVideoCodecs[0].mime)));const S=n.videoCodec;e.on(ke.Muted,this.onTrackMuted),e.on(ke.Unmuted,this.onTrackUnmuted),e.on(ke.Ended,this.handleTrackEnded),e.on(ke.UpstreamPaused,this.onTrackUpstreamPaused),e.on(ke.UpstreamResumed,this.onTrackUpstreamResumed),e.on(ke.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const R=[],k=!(!((r=n.dtx)!==null&&r!==void 0)||r),N=e.getSourceTrackSettings();N.autoGainControl&&R.push(Tn.TF_AUTO_GAIN_CONTROL),N.echoCancellation&&R.push(Tn.TF_ECHO_CANCELLATION),N.noiseSuppression&&R.push(Tn.TF_NOISE_SUPPRESSION),N.channelCount&&N.channelCount>1&&R.push(Tn.TF_STEREO),k&&R.push(Tn.TF_NO_DTX),Nr(e)&&e.hasPreConnectBuffer&&R.push(Tn.TF_PRECONNECT_BUFFER);const O=new av({cid:e.mediaStreamTrack.id,name:n.name,type:te.kindToProto(e.kind),muted:e.isMuted,source:te.sourceToProto(e.source),disableDtx:k,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((a=n.red)!==null&&a!==void 0)||a),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:R});let I;if(e.kind===te.Kind.Video){let G={width:0,height:0};try{G=yield e.waitForDimensions()}catch{const re=(l=(c=this.roomOptions.videoCaptureDefaults)===null||c===void 0?void 0:c.resolution)!==null&&l!==void 0?l:ql.h720.resolution;G={width:re.width,height:re.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{dims:G}))}O.width=G.width,O.height=G.height,bs(e)&&(Ji(S)&&(e.source===te.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),st(e))))),n.scalabilityMode=(d=n.scalabilityMode)!==null&&d!==void 0?d:"L3T3_KEY"),O.simulcastCodecs=[new sv({codec:S,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Ev}),n.backupCodec&&S!==n.backupCodec.codec&&O.encryption===ri.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),O.simulcastCodecs.push(new sv({codec:n.backupCodec.codec,cid:""})))),I=Av(e.source===te.Source.ScreenShare,O.width,O.height,n),O.layers=Ow(O.width,O.height,I,Ji(n.videoCodec))}else e.kind===te.Kind.Audio&&(I=[{maxBitrate:(f=n.audioPreset)===null||f===void 0?void 0:f.maxBitrate,priority:(p=(m=n.audioPreset)===null||m===void 0?void 0:m.priority)!==null&&p!==void 0?p:"high",networkPriority:(b=(v=n.audioPreset)===null||v===void 0?void 0:v.priority)!==null&&b!==void 0?b:"high"}]);if(!this.engine||this.engine.isClosed)throw new pn("cannot publish track when not connected");const D=()=>K(this,void 0,void 0,function*(){var G,ie,re;if(!this.engine.pcManager)throw new pn("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,I),this.emit(ye.LocalSenderCreated,e.sender,e),bs(e)&&((G=n.degradationPreference)!==null&&G!==void 0||(n.degradationPreference=K5(e)),e.setDegradationPreference(n.degradationPreference)),I)if(Yo()&&e.kind===te.Kind.Audio){let de;for(const Ee of this.engine.pcManager.publisher.getTransceivers())if(Ee.sender===e.sender){de=Ee;break}de&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:de,codec:"opus",maxbr:!((ie=I[0])===null||ie===void 0)&&ie.maxBitrate?I[0].maxBitrate/1e3:0})}else e.codec&&Ji(e.codec)&&(!((re=I[0])===null||re===void 0)&&re.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:O.cid,codec:e.codec,maxbr:I[0].maxBitrate/1e3});yield this.engine.negotiate()});let j;const H=new Promise((G,ie)=>K(this,void 0,void 0,function*(){var re;try{j=yield this.engine.addTrack(O),G(j)}catch(de){e.sender&&(!((re=this.engine.pcManager)===null||re===void 0)&&re.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(Ee=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{error:Ee}))})),ie(de)}}));if(this.enabledPublishVideoCodecs.length>0)j=(yield Promise.all([H,D()]))[0];else{j=yield H;let G;if(j.codecs.forEach(ie=>{G===void 0&&(G=ie.mimeType)}),G&&e.kind===te.Kind.Video){const ie=lf(G);ie!==S&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{codec:ie})),n.videoCodec=ie,I=Av(e.source===te.Source.ScreenShare,O.width,O.height,n))}yield D()}const z=new Dv(e.kind,j,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(z.on(ke.CpuConstrained,G=>this.onTrackCpuConstrained(G,z)),z.options=n,e.sid=j.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:I,trackInfo:j})),bs(e)?e.startMonitor(this.engine.client):Nr(e)&&e.startMonitor(),this.addTrackPublication(z),this.emit(ye.LocalTrackPublished,z),Nr(e)&&j.audioFeatures.includes(Tn.TF_PRECONNECT_BUFFER)){const G=e.getPreConnectBuffer(),ie=e.getPreConnectBufferMimeType();this.on(ye.LocalTrackSubscribed,re=>{if(re.trackSid===j.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),st(e))),e.stopPreConnectBuffer()}}),G&&new Promise((de,Ee)=>K(this,void 0,void 0,function*(){var Ae,Me,Y,se,J,_e;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),st(e)));const le=setTimeout(()=>{Ee(new Error("agent not active within 10 seconds"))},1e4),Te=yield this.waitUntilActiveAgentPresent();clearTimeout(le),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),st(e)));const Ne=yield this.streamBytes({name:"preconnect-buffer",mimeType:ie,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[Te.identity],attributes:{trackId:z.trackSid,sampleRate:String((J=N.sampleRate)!==null&&J!==void 0?J:"48000"),channels:String((_e=N.channelCount)!==null&&_e!==void 0?_e:"1")}});try{for(var V=!0,Q=Ur(G),me;me=yield Q.next(),Ae=me.done,!Ae;V=!0){se=me.value,V=!1;const Pe=se;yield Ne.write(Pe)}}catch(Pe){Me={error:Pe}}finally{try{!V&&!Ae&&(Y=Q.return)&&(yield Y.call(Q))}finally{if(Me)throw Me.error}}yield Ne.close(),de()}catch(le){Ee(le)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),st(e)))}).catch(de=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{error:de}))})}return z})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,i){return K(this,void 0,void 0,function*(){var r;if(this.encryptionType!==ri.NONE)return;let a;if(this.trackPublications.forEach(b=>{b.track&&b.track===e&&(a=b)}),!a)throw new Lr("track is not published");if(!bs(e))throw new Lr("track is not a video track");const c=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),i),l=z5(e,n,c);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),st(e)));return}const d=e.addSimulcastTrack(n,l);if(!d)return;const f=new av({cid:d.mediaStreamTrack.id,type:te.kindToProto(e.kind),muted:e.isMuted,source:te.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:c.videoCodec,cid:d.mediaStreamTrack.id}]});if(f.layers=Ow(f.width,f.height,l),!this.engine||this.engine.isClosed)throw new pn("cannot publish track when not connected");const m=()=>K(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,d,c,l),yield this.engine.negotiate()}),v=(yield Promise.all([this.engine.addTrack(f),m()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:v}))})}unpublishTrack(e,n){return K(this,void 0,void 0,function*(){var i,r;if(Fo(e)){const f=this.pendingPublishPromises.get(e);f&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),st(e))),yield f)}const a=this.getPublicationForTrack(e),c=a?st(a):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),c)),!a||!a.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),c));return}e=a.track,e.off(ke.Muted,this.onTrackMuted),e.off(ke.Unmuted,this.onTrackUnmuted),e.off(ke.Ended,this.handleTrackEnded),e.off(ke.UpstreamPaused,this.onTrackUpstreamPaused),e.off(ke.UpstreamResumed,this.onTrackUpstreamResumed),e.off(ke.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?e.stop():e.stopMonitor();let l=!1;const d=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<zt.FAILED&&d)try{for(const f of this.engine.pcManager.publisher.getTransceivers())f.sender===d&&(f.direction="inactive",l=!0);if(this.engine.removeTrack(d)&&(l=!0),bs(e)){for(const[,f]of e.simulcastCodecs)f.sender&&(this.engine.removeTrack(f.sender)&&(l=!0),f.sender=void 0);e.simulcastCodecs.clear()}}catch(f){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),c),{error:f}))}switch(this.trackPublications.delete(a.trackSid),a.kind){case te.Kind.Audio:this.audioTrackPublications.delete(a.trackSid);break;case te.Kind.Video:this.videoTrackPublications.delete(a.trackSid);break}return this.emit(ye.LocalTrackUnpublished,a),a.setTrack(void 0),l&&(yield this.engine.negotiate()),a})}unpublishTracks(e){return K(this,void 0,void 0,function*(){return(yield Promise.all(e.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((a,c)=>K(i,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(d=>{d.track&&(n&&(d.options=Object.assign(Object.assign({},d.options),n)),l.push(d))}),yield Promise.all(l.map(d=>K(this,void 0,void 0,function*(){const f=d.track;yield this.unpublishTrack(f,!1),r&&!f.isMuted&&f.source!==te.Source.ScreenShare&&f.source!==te.Source.ScreenShareAudio&&(Nr(f)||bs(f))&&!f.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:d.trackSid})),yield f.restartTrack()),yield this.publishOrRepublishTrack(f,d.options,!0)}))),a()}catch(l){c(l)}finally{this.republishPromise=void 0}})),yield i.republishPromise}()})}publishData(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const a=r.reliable?tt.RELIABLE:tt.LOSSY,c=r.destinationIdentities,l=r.topic,d=new Hn({kind:a,value:{case:"user",value:new nR({participantIdentity:i.identity,payload:n,destinationIdentities:c,topic:l})}});yield i.engine.sendDataPacket(d,a)}()})}publishDtmf(e,n){return K(this,void 0,void 0,function*(){const i=new Hn({kind:tt.RELIABLE,value:{case:"sipDtmf",value:new iR({code:e,digit:n})}});yield this.engine.sendDataPacket(i,tt.RELIABLE)})}sendChatMessage(e,n){return K(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n?.attachments},r=new Hn({value:{case:"chatMessage",value:new Qg(Object.assign(Object.assign({},i),{timestamp:Ot.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(r,tt.RELIABLE),this.emit(ye.ChatMessage,i),i})}editChatMessage(e,n){return K(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),r=new Hn({value:{case:"chatMessage",value:new Qg(Object.assign(Object.assign({},i),{timestamp:Ot.parse(i.timestamp),editTimestamp:Ot.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,tt.RELIABLE),this.emit(ye.ChatMessage,i),i})}sendText(e,n){return K(this,void 0,void 0,function*(){var i;const r=crypto.randomUUID(),c=new TextEncoder().encode(e).byteLength,l=(i=n?.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),d=new Array(l?l.length+1:1).fill(0),f=(p,v)=>{var b;d[v]=p;const w=d.reduce((S,R)=>S+R,0);(b=n?.onProgress)===null||b===void 0||b.call(n,w)},m=yield this.streamText({streamId:r,totalSize:c,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:l,attributes:n?.attributes});return yield m.write(e),f(1,0),yield m.close(),n?.attachments&&l&&(yield Promise.all(n.attachments.map((p,v)=>K(this,void 0,void 0,function*(){return this._sendFile(l[v],p,{topic:n.topic,mimeType:p.type,onProgress:b=>{f(b,v+1)}})})))),m.info})}streamText(e){return K(this,void 0,void 0,function*(){var n,i;const r=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),a={id:r,mimeType:"text/plain",timestamp:Date.now(),topic:(i=e?.topic)!==null&&i!==void 0?i:"",size:e?.totalSize,attributes:e?.attributes},c=new tv({streamId:r,mimeType:a.mimeType,topic:a.topic,timestamp:da(a.timestamp),totalLength:da(e?.totalSize),attributes:a.attributes,contentHeader:{case:"textHeader",value:new mR({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?ev.UPDATE:ev.CREATE})}}),l=e?.destinationIdentities,d=new Hn({destinationIdentities:l,value:{case:"streamHeader",value:c}});yield this.engine.sendDataPacket(d,tt.RELIABLE);let f=0;const m=this,p=new WritableStream({write(w){return K(this,void 0,void 0,function*(){for(const S of i5(w,Lw)){yield m.engine.waitForBufferStatusLow(tt.RELIABLE);const R=new nv({content:S,streamId:r,chunkIndex:da(f)}),k=new Hn({destinationIdentities:l,value:{case:"streamChunk",value:R}});yield m.engine.sendDataPacket(k,tt.RELIABLE),f+=1}})},close(){return K(this,void 0,void 0,function*(){const w=new iv({streamId:r}),S=new Hn({destinationIdentities:l,value:{case:"streamTrailer",value:w}});yield m.engine.sendDataPacket(S,tt.RELIABLE)})},abort(w){console.log("Sink error:",w)}});let v=()=>K(this,void 0,void 0,function*(){yield b.close()});m.engine.once(De.Closing,v);const b=new t8(p,a,()=>this.engine.off(De.Closing,v));return b})}sendFile(e,n){return K(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,e,n),{id:i}})}_sendFile(e,n,i){return K(this,void 0,void 0,function*(){var r;const a=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(r=i?.mimeType)!==null&&r!==void 0?r:n.type,topic:i?.topic,destinationIdentities:i?.destinationIdentities}),c=n.stream().getReader();for(;;){const{done:l,value:d}=yield c.read();if(l)break;yield a.write(d)}return yield a.close(),a.info})}streamBytes(e){return K(this,void 0,void 0,function*(){var n,i,r,a,c;const l=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),d=e?.destinationIdentities,f={id:l,mimeType:(i=e?.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(r=e?.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:e?.attributes,size:e?.totalSize,name:(a=e?.name)!==null&&a!==void 0?a:"unknown"},m=new tv({totalLength:da((c=f.size)!==null&&c!==void 0?c:0),mimeType:f.mimeType,streamId:l,topic:f.topic,timestamp:da(Date.now()),attributes:f.attributes,contentHeader:{case:"byteHeader",value:new pR({name:f.name})}}),p=new Hn({destinationIdentities:d,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(p,tt.RELIABLE);let v=0;const b=new Un,w=this.engine,S=this.log,R=new WritableStream({write(N){return K(this,void 0,void 0,function*(){const O=yield b.lock();let I=0;try{for(;I<N.byteLength;){const D=N.slice(I,I+Lw);yield w.waitForBufferStatusLow(tt.RELIABLE);const j=new Hn({destinationIdentities:d,value:{case:"streamChunk",value:new nv({content:D,streamId:l,chunkIndex:da(v)})}});yield w.sendDataPacket(j,tt.RELIABLE),v+=1,I+=D.byteLength}}finally{O()}})},close(){return K(this,void 0,void 0,function*(){const N=new iv({streamId:l}),O=new Hn({destinationIdentities:d,value:{case:"streamTrailer",value:N}});yield w.sendDataPacket(O,tt.RELIABLE)})},abort(N){S.error("Sink error:",N)}});return new n8(R,f)})}performRpc(e){return K(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:r,method:a,payload:c,responseTimeout:l=1e4}=n;return function*(){return new Promise((f,m)=>K(i,void 0,void 0,function*(){var p,v,b,w;if(J0(c)>mA){m(Kt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((v=(p=this.engine.latestJoinResponse)===null||p===void 0?void 0:p.serverInfo)===null||v===void 0)&&v.version&&Bi((w=(b=this.engine.latestJoinResponse)===null||b===void 0?void 0:b.serverInfo)===null||w===void 0?void 0:w.version,"1.8.0")<0){m(Kt.builtIn("UNSUPPORTED_SERVER"));return}const S=crypto.randomUUID();yield this.publishRpcRequest(r,S,a,c,l-2e3);const R=setTimeout(()=>{this.pendingAcks.delete(S),m(Kt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(S),clearTimeout(k)},2e3);this.pendingAcks.set(S,{resolve:()=>{clearTimeout(R)},participantIdentity:r});const k=setTimeout(()=>{this.pendingResponses.delete(S),m(Kt.builtIn("RESPONSE_TIMEOUT"))},l);this.pendingResponses.set(S,{resolve:(N,O)=>{clearTimeout(k),this.pendingAcks.has(S)&&(console.warn("RPC response received before ack",S),this.pendingAcks.delete(S),clearTimeout(R)),O?m(O):f(N??"")},participantIdentity:r})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,i){const r=this.pendingResponses.get(e);r?(r.resolve(n,i),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,i,r,a){return K(this,void 0,void 0,function*(){const c=new Hn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcRequest",value:new rR({id:n,method:i,payload:r,responseTimeoutMs:a,version:1})}});yield this.engine.sendDataPacket(c,tt.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:r}]of this.pendingResponses)i===e&&(r(null,Kt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var i,r;const a=this.trackPublications.get(n.sid);if(a){const c=a.isMuted||((r=(i=a.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&r!==void 0?r:!1);c!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),st(a)),{mutedOnServer:c})),this.engine.client.sendMuteTrack(n.sid,c))}}),!0):!1}setActiveAgent(e){var n,i,r,a;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,e):(a=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||a===void 0||a.call(r,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Po),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(i=>{const r=i.track;r&&(e instanceof MediaStreamTrack?(Nr(r)||bs(r))&&r.mediaStreamTrack===e&&(n=i):e===r&&(n=i))}),n}waitForPendingPublicationOfSource(e){return K(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(a=>{let[c]=a;return c.source===e});if(r)return r[1];yield Wn(20)}})}}class _f extends Mr{constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=a=>{this.setTrack(void 0),this.emit(ke.Ended,a)},this.handleVisibilityChange=a=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),this.logContext),this.visible=a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{this.log.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),this.logContext),this.videoDimensionsAdaptiveStream=a,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const r=new Wf({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new cR({participantSid:"",trackSids:[this.trackSid]})]});this.emit(ke.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?Mr.SubscriptionStatus.Unsubscribed:super.isSubscribed?Mr.SubscriptionStatus.Subscribed:Mr.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Mr.PermissionStatus.Allowed:Mr.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===e.height||(Gp(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Gp(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:ai.HIGH}setTrack(e){const n=this.subscriptionStatus,i=this.permissionStatus,r=this.track;r!==e&&(r&&(r.off(ke.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(ke.VisibilityChanged,this.handleVisibilityChange),r.off(ke.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(ke.Unsubscribed,r)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(ke.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(ke.VisibilityChanged,this.handleVisibilityChange),e.on(ke.Ended,this.handleEnded),this.emit(ke.Subscribed,e)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(ke.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?ke.Muted:ke.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(ke.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(ke.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Gp(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new gR({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===te.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)Sw(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=u5(this.trackInfo,this.requestedMaxQuality);i&&Sw(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:ai.HIGH})),e.quality=ai.HIGH)}this.emit(ke.UpdateSettings,e)}}class Pf extends xA{static fromParticipantInfo(e,n,i){return new Pf(e,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,i,r,a,c,l){let d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Ta.STANDARD;super(n,i||"",r,a,c,l,d),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(ke.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(ke.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(ke.SubscriptionPermissionChanged,n=>{this.emit(ye.TrackSubscriptionPermissionChanged,e,n)}),e.on(ke.SubscriptionStatusChanged,n=>{this.emit(ye.TrackSubscriptionStatusChanged,e,n)}),e.on(ke.Subscribed,n=>{this.emit(ye.TrackSubscribed,n,e)}),e.on(ke.Unsubscribed,n=>{this.emit(ye.TrackUnsubscribed,n,e)}),e.on(ke.SubscriptionFailed,n=>{this.emit(ye.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.Source.Microphone;this.volumeMap.set(n,e);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,i,r,a,c){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(m=>{!l&&e.kind===m.kind.toString()&&(l=m)}),!l){if(c===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ye.TrackSubscriptionFailed,n);return}c===void 0&&(c=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,r,a,c-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),st(l))),this.emit(ye.TrackSubscriptionFailed,n);return}const d=e.kind==="video";let f;return d?f=new i8(e,n,r,a):f=new TA(e,n,r,this.audioContext,this.audioOutput),f.source=l.source,f.isMuted=l.isMuted,f.setMediaStream(i),f.start(),l.setTrack(f),this.volumeMap.has(l.source)&&wv(f)&&tr(f)&&f.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,i=new Map;return e.tracks.forEach(r=>{var a,c;let l=this.getTrackPublicationBySid(r.sid);if(l)l.updateInfo(r);else{const d=te.kindFromProto(r.type);if(!d)return;l=new _f(d,r,(a=this.signalClient.connectOptions)===null||a===void 0?void 0:a.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(c=this.loggerOptions)===null||c===void 0?void 0:c.loggerName}),l.updateInfo(r),i.set(r.sid,l);const f=Array.from(this.trackPublications.values()).find(m=>m.source===l?.source);f&&l.source!==te.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:st(f),newTrack:st(l)})),this.addTrackPublication(l)}n.set(r.sid,l)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),st(r))),this.unpublishTrack(r.trackSid,!0))}),i.forEach(r=>{this.emit(ye.TrackPublished,r)}),!0}unpublishTrack(e,n){const i=this.trackPublications.get(e);if(!i)return;const{track:r}=i;switch(r&&(r.stop(),i.setTrack(void 0)),this.trackPublications.delete(e),i.kind){case te.Kind.Audio:this.audioTrackPublications.delete(e);break;case te.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(ye.TrackUnpublished,i)}setAudioOutput(e){return K(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(i=>{var r;tr(i.track)&&wv(i.track)&&n.push(i.track.setSinkId((r=e.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:i})),super.emit(e,...i)}}var at;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(at||(at={}));const u8=4*1e3;class Vr extends ur.EventEmitter{constructor(e){var n,i,r,a;if(super(),n=this,this.state=at.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=ot,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(c,l,d)=>K(this,void 0,void 0,function*(){var f;if(!Hj())throw ar()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const m=yield this.disconnectLock.lock();if(this.state===at.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),m(),Promise.resolve();if(this.connectFuture)return m(),this.connectFuture.promise;this.setAndEmitConnectionState(at.Connecting),((f=this.regionUrlProvider)===null||f===void 0?void 0:f.getServerUrl().toString())!==c&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Tv(new URL(c))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new _v(c,l):this.regionUrlProvider.updateToken(l),this.regionUrlProvider.fetchRegionSettings().then(b=>{var w;(w=this.regionUrlProvider)===null||w===void 0||w.setServerReportedRegions(b)}).catch(b=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:b}))}));const p=(b,w,S)=>K(this,void 0,void 0,function*(){var R,k;this.abortController&&this.abortController.abort();const N=new AbortController;this.abortController=N,m?.();try{yield this.attemptConnection(S??c,l,d,N),this.abortController=void 0,b()}catch(O){if(this.regionUrlProvider&&O instanceof Rt&&O.reason!==lt.Cancelled&&O.reason!==lt.NotAllowed){let I=null;try{I=yield this.regionUrlProvider.getNextBestRegionUrl((R=this.abortController)===null||R===void 0?void 0:R.signal)}catch(D){if(D instanceof Rt&&(D.status===401||D.reason===lt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),w(D);return}}I&&!(!((k=this.abortController)===null||k===void 0)&&k.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(O.message,". Retrying with another region: ").concat(I),this.logContext),this.recreateEngine(),yield p(b,w,I)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,bw(O)),w(O))}else{let I=Li.UNKNOWN_REASON;O instanceof Rt&&(I=bw(O)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,I),w(O)}}}),v=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Po((b,w)=>{p(b,w,v)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(c,l,d,f,m,p)=>K(this,void 0,void 0,function*(){var v,b,w;const S=yield d.join(c,l,{autoSubscribe:f.autoSubscribe,adaptiveStream:typeof m.adaptiveStream=="object"?!0:m.adaptiveStream,maxRetries:f.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:f.websocketTimeout},p.signal);let R=S.serverInfo;if(R||(R={version:S.serverVersion,region:S.serverRegion}),this.serverInfo=R,this.log.debug("connected to Livekit Server ".concat(Object.entries(R).map(k=>{let[N,O]=k;return"".concat(N,": ").concat(O)}).join(", ")),{room:(v=S.room)===null||v===void 0?void 0:v.name,roomSid:(b=S.room)===null||b===void 0?void 0:b.sid,identity:(w=S.participant)===null||w===void 0?void 0:w.identity}),!R.version)throw new Aj("unknown server version");return R.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),m.dynacast=!1),S}),this.applyJoinResponse=c=>{const l=c.participant;if(this.localParticipant.sid=l.sid,this.localParticipant.identity=l.identity,this.localParticipant.setEnabledPublishCodecs(c.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(c.sifTrailer)}catch(d){this.log.error(d instanceof Error?d.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:d}))}this.handleParticipantUpdates([l,...c.otherParticipants]),c.room&&this.handleRoomUpdate(c.room)},this.attemptConnection=(c,l,d,f)=>K(this,void 0,void 0,function*(){var m,p;this.state===at.Reconnecting||this.isResuming||!((m=this.engine)===null||m===void 0)&&m.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((p=this.regionUrlProvider)===null||p===void 0)&&p.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Z0),d),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const v=yield this.connectSignal(c,l,this.engine,this.connOptions,this.options,f);this.applyJoinResponse(v),this.setupLocalParticipantEvents(),this.emit(fe.SignalConnected)}catch(v){yield this.engine.close(),this.recreateEngine();const b=new Rt("could not establish signal connection",lt.ServerUnreachable);throw v instanceof Error&&(b.message="".concat(b.message,": ").concat(v.message)),v instanceof Rt&&(b.reason=v.reason,b.status=v.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:v})),b}if(f.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Rt("Connection attempt aborted",lt.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,f)}catch(v){throw yield this.engine.close(),this.recreateEngine(),v}Gn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Gn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(at.Connected),this.emit(fe.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return K(n,[...l],void 0,function(){var f=this;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var p,v,b,w;const S=yield f.disconnectLock.lock();try{if(f.state===at.Disconnected){f.log.debug("already disconnected",f.logContext);return}f.log.info("disconnect from room",Object.assign({},f.logContext)),(f.state===at.Connecting||f.state===at.Reconnecting||f.isResuming)&&(f.log.warn("abort connection attempt",f.logContext),(p=f.abortController)===null||p===void 0||p.abort(),(b=(v=f.connectFuture)===null||v===void 0?void 0:v.reject)===null||b===void 0||b.call(v,new Rt("Client initiated disconnect",lt.Cancelled)),f.connectFuture=void 0),!((w=f.engine)===null||w===void 0)&&w.client.isDisconnected||(yield f.engine.client.sendLeave()),f.engine&&(yield f.engine.close()),f.handleDisconnect(m,Li.CLIENT_INITIATED),f.engine=void 0}finally{S()}}()})},this.onPageLeave=()=>K(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>K(this,void 0,void 0,function*(){const c=[],l=oi();if(l&&l.os==="iOS"){const d="livekit-dummy-audio-el";let f=document.getElementById(d);if(!f){f=document.createElement("audio"),f.id=d,f.autoplay=!0,f.hidden=!0;const m=Kp();m.enabled=!0;const p=new MediaStream([m]);f.srcObject=p,document.addEventListener("visibilitychange",()=>{f&&(f.srcObject=document.hidden?null:p,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(f),this.once(fe.Disconnected,()=>{f?.remove(),f=null})}c.push(f)}this.remoteParticipants.forEach(d=>{d.audioTrackPublications.forEach(f=>{f.track&&f.track.attachedElements.forEach(m=>{c.push(m)})})});try{yield Promise.all([this.acquireAudioContext(),...c.map(d=>(d.muted=!1,d.play()))]),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}),this.startVideo=()=>K(this,void 0,void 0,function*(){const c=[];for(const l of this.remoteParticipants.values())l.videoTrackPublications.forEach(d=>{var f;(f=d.track)===null||f===void 0||f.attachedElements.forEach(m=>{c.includes(m)||c.push(m)})});yield Promise.all(c.map(l=>l.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(l=>{l.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const c of this.remoteParticipants.values())this.handleParticipantDisconnected(c.identity,c);this.setAndEmitConnectionState(at.Reconnecting)&&this.emit(fe.Reconnecting)},this.handleSignalRestarted=c=>K(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(c.serverRegion),Object.assign(Object.assign({},this.logContext),{region:c.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(c);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(l){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:l}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:c.serverRegion}))}catch{return}this.setAndEmitConnectionState(at.Connected),this.emit(fe.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=c=>{c.forEach(l=>{var d;if(l.identity===this.localParticipant.identity){this.localParticipant.updateInfo(l);return}l.identity===""&&(l.identity=(d=this.sidToIdentity.get(l.sid))!==null&&d!==void 0?d:"");let f=this.remoteParticipants.get(l.identity);l.state===Uo.DISCONNECTED?this.handleParticipantDisconnected(l.identity,f):f=this.getOrCreateParticipant(l.identity,l)})},this.handleActiveSpeakersUpdate=c=>{const l=[],d={};c.forEach(f=>{if(d[f.sid]=!0,f.sid===this.localParticipant.sid)this.localParticipant.audioLevel=f.level,this.localParticipant.setIsSpeaking(!0),l.push(this.localParticipant);else{const m=this.getRemoteParticipantBySid(f.sid);m&&(m.audioLevel=f.level,m.setIsSpeaking(!0),l.push(m))}}),d[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(f=>{d[f.sid]||(f.audioLevel=0,f.setIsSpeaking(!1))}),this.activeSpeakers=l,this.emitWhenConnected(fe.ActiveSpeakersChanged,l)},this.handleSpeakersChanged=c=>{const l=new Map;this.activeSpeakers.forEach(f=>{const m=this.remoteParticipants.get(f.identity);m&&m.sid!==f.sid||l.set(f.sid,f)}),c.forEach(f=>{let m=this.getRemoteParticipantBySid(f.sid);f.sid===this.localParticipant.sid&&(m=this.localParticipant),m&&(m.audioLevel=f.level,m.setIsSpeaking(f.active),f.active?l.set(f.sid,m):l.delete(f.sid))});const d=Array.from(l.values());d.sort((f,m)=>m.audioLevel-f.audioLevel),this.activeSpeakers=d,this.emitWhenConnected(fe.ActiveSpeakersChanged,d)},this.handleStreamStateUpdate=c=>{c.streamStates.forEach(l=>{const d=this.getRemoteParticipantBySid(l.participantSid);if(!d)return;const f=d.getTrackPublicationBySid(l.trackSid);if(!f||!f.track)return;const m=te.streamStateFromProto(l.state);m!==f.track.streamState&&(f.track.streamState=m,d.emit(ye.TrackStreamStateChanged,f,f.track.streamState),this.emitWhenConnected(fe.TrackStreamStateChanged,f,f.track.streamState,d))})},this.handleSubscriptionPermissionUpdate=c=>{const l=this.getRemoteParticipantBySid(c.participantSid);if(!l)return;const d=l.getTrackPublicationBySid(c.trackSid);d&&d.setAllowed(c.allowed)},this.handleSubscriptionError=c=>{const l=Array.from(this.remoteParticipants.values()).find(f=>f.trackPublications.has(c.trackSid));if(!l)return;const d=l.getTrackPublicationBySid(c.trackSid);d&&d.setSubscriptionError(c.err)},this.handleDataPacket=c=>{const l=this.remoteParticipants.get(c.participantIdentity);if(c.value.case==="user")this.handleUserPacket(l,c.value.value,c.kind);else if(c.value.case==="transcription")this.handleTranscription(l,c.value.value);else if(c.value.case==="sipDtmf")this.handleSipDtmf(l,c.value.value);else if(c.value.case==="chatMessage")this.handleChatMessage(l,c.value.value);else if(c.value.case==="metrics")this.handleMetrics(c.value.value,l);else if(c.value.case==="streamHeader")this.handleStreamHeader(c.value.value,c.participantIdentity);else if(c.value.case==="streamChunk")this.handleStreamChunk(c.value.value);else if(c.value.case==="streamTrailer")this.handleStreamTrailer(c.value.value);else if(c.value.case==="rpcRequest"){const d=c.value.value;this.handleIncomingRpcRequest(c.participantIdentity,d.id,d.method,d.payload,d.responseTimeoutMs,d.version)}},this.handleUserPacket=(c,l,d)=>{this.emit(fe.DataReceived,l.payload,c,d,l.topic),c?.emit(ye.DataReceived,l.payload,d)},this.handleSipDtmf=(c,l)=>{this.emit(fe.SipDTMFReceived,l,c),c?.emit(ye.SipDTMFReceived,l)},this.bufferedSegments=new Map,this.handleTranscription=(c,l)=>{const d=l.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(l.transcribedParticipantIdentity),f=d?.trackPublications.get(l.trackId),m=Qj(l,this.transcriptionReceivedTimes);f?.emit(ke.TranscriptionReceived,m),d?.emit(ye.TranscriptionReceived,m,f),this.emit(fe.TranscriptionReceived,m,d,f)},this.handleChatMessage=(c,l)=>{const d=e5(l);this.emit(fe.ChatMessage,d,c)},this.handleMetrics=(c,l)=>{this.emit(fe.MetricsReceived,c,l)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(fe.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=c=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:c})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(fe.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(fe.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(fe.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>K(this,void 0,void 0,function*(){var c;((c=oi())===null||c===void 0?void 0:c.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(fe.MediaDevicesChanged)}),this.handleRoomUpdate=c=>{const l=this.roomInfo;this.roomInfo=c,l&&l.metadata!==c.metadata&&this.emitWhenConnected(fe.RoomMetadataChanged,c.metadata),l?.activeRecording!==c.activeRecording&&this.emitWhenConnected(fe.RecordingStatusChanged,c.activeRecording)},this.handleConnectionQualityUpdate=c=>{c.updates.forEach(l=>{if(l.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(l.quality);return}const d=this.getRemoteParticipantBySid(l.participantSid);d&&d.setConnectionQuality(l.quality)})},this.onLocalParticipantMetadataChanged=c=>{this.emit(fe.ParticipantMetadataChanged,c,this.localParticipant)},this.onLocalParticipantNameChanged=c=>{this.emit(fe.ParticipantNameChanged,c,this.localParticipant)},this.onLocalAttributesChanged=c=>{this.emit(fe.ParticipantAttributesChanged,c,this.localParticipant)},this.onLocalTrackMuted=c=>{this.emit(fe.TrackMuted,c,this.localParticipant)},this.onLocalTrackUnmuted=c=>{this.emit(fe.TrackUnmuted,c,this.localParticipant)},this.onTrackProcessorUpdate=c=>{var l;(l=c?.onPublish)===null||l===void 0||l.call(c,this)},this.onLocalTrackPublished=c=>K(this,void 0,void 0,function*(){var l,d,f,m,p,v;(l=c.track)===null||l===void 0||l.on(ke.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=c.track)===null||d===void 0||d.on(ke.Restarted,this.onLocalTrackRestarted),(p=(m=(f=c.track)===null||f===void 0?void 0:f.getProcessor())===null||m===void 0?void 0:m.onPublish)===null||p===void 0||p.call(m,this),this.emit(fe.LocalTrackPublished,c,this.localParticipant),Nr(c.track)&&(yield c.track.checkForSilence())&&this.emit(fe.LocalAudioSilenceDetected,c);const b=yield(v=c.track)===null||v===void 0?void 0:v.getDeviceId(!1),w=kv(c.source);w&&b&&b!==this.localParticipant.activeDeviceMap.get(w)&&(this.localParticipant.activeDeviceMap.set(w,b),this.emit(fe.ActiveDeviceChanged,w,b))}),this.onLocalTrackUnpublished=c=>{var l,d;(l=c.track)===null||l===void 0||l.off(ke.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=c.track)===null||d===void 0||d.off(ke.Restarted,this.onLocalTrackRestarted),this.emit(fe.LocalTrackUnpublished,c,this.localParticipant)},this.onLocalTrackRestarted=c=>K(this,void 0,void 0,function*(){const l=yield c.getDeviceId(!1),d=kv(c.source);d&&l&&l!==this.localParticipant.activeDeviceMap.get(d)&&(this.log.debug("local track restarted, setting ".concat(d," ").concat(l," active"),this.logContext),this.localParticipant.activeDeviceMap.set(d,l),this.emit(fe.ActiveDeviceChanged,d,l))}),this.onLocalConnectionQualityChanged=c=>{this.emit(fe.ConnectionQualityChanged,c,this.localParticipant)},this.onMediaDevicesError=(c,l)=>{this.emit(fe.MediaDevicesError,c,l)},this.onLocalParticipantPermissionsChanged=c=>{this.emit(fe.ParticipantPermissionsChanged,c,this.localParticipant)},this.onLocalChatMessageSent=c=>{this.emit(fe.ChatMessage,c,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},R5),e),this.log=Fr((i=this.options.loggerName)!==null&&i!==void 0?i:ji.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},fA),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},hA),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},E5),e?.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Un,this.localParticipant=new l8("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ps(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ps(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",Ps(this.options.audioOutput.deviceId)).catch(c=>this.log.warn("Could not set audio output: ".concat(c.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),Gn()){const c=new AbortController;(a=navigator.mediaDevices)===null||a===void 0||a.addEventListener("devicechange",this.handleDeviceChange,{signal:c.signal}),Vr.cleanupRegistry&&Vr.cleanupRegistry.register(this,()=>{c.abort()})}}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,n,i,r,a,c){return K(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),c!==1){yield this.engine.publishRpcResponse(e,n,null,Kt.builtIn("UNSUPPORTED_VERSION"));return}const l=this.rpcHandlers.get(i);if(!l){yield this.engine.publishRpcResponse(e,n,null,Kt.builtIn("UNSUPPORTED_METHOD"));return}let d=null,f=null;try{const m=yield l({requestId:n,callerIdentity:e,payload:r,responseTimeout:a});J0(m)>mA?(d=Kt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):f=m}catch(m){m instanceof Kt?d=m:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),m),d=Kt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,f,d)})}setE2EEEnabled(e){return K(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new d5(this.options.e2ee),this.e2eeManager.on(Rs.ParticipantEncryptionStatusChanged,(n,i)=>{n5(i)&&(this.isE2EEEnabled=n),this.emit(fe.ParticipantEncryptionStatusChanged,n,i)}),this.e2eeManager.on(Rs.EncryptionError,n=>this.emit(fe.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return K(this,void 0,void 0,function*(){return this.state===at.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const i=r=>{r.sid!==""&&(this.engine.off(De.RoomUpdate,i),e(r.sid))};this.engine.on(De.RoomUpdate,i),this.once(fe.Disconnected,()=>{this.engine.off(De.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new $5(this.options),this.engine.on(De.ParticipantUpdate,this.handleParticipantUpdates).on(De.RoomUpdate,this.handleRoomUpdate).on(De.SpeakersChanged,this.handleSpeakersChanged).on(De.StreamStateChanged,this.handleStreamStateUpdate).on(De.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(De.SubscriptionError,this.handleSubscriptionError).on(De.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(De.MediaTrackAdded,(e,n,i)=>{this.onTrackAdded(e,n,i)}).on(De.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(De.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(De.DataPacketReceived,this.handleDataPacket).on(De.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(at.SignalReconnecting)&&this.emit(fe.SignalReconnecting)}).on(De.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(at.Connected)&&this.emit(fe.Reconnected)}).on(De.SignalResumed,()=>{this.bufferedEvents=[],(this.state===at.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(De.Restarting,this.handleRestarting).on(De.SignalRestarted,this.handleSignalRestarted).on(De.Offline,()=>{this.setAndEmitConnectionState(at.Reconnecting)&&this.emit(fe.Reconnecting)}).on(De.DCBufferStatusChanged,(e,n)=>{this.emit(fe.DCBufferStatusChanged,e,n)}).on(De.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:r}=i;return r===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ye.LocalTrackSubscribed,n),this.emitWhenConnected(fe.LocalTrackSubscribed,n,this.localParticipant)}).on(De.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(fe.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return xn.getInstance().getDevices(e,n)}prepareConnection(e,n){return K(this,void 0,void 0,function*(){if(this.state===at.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Tv(new URL(e))&&n){this.regionUrlProvider=new _v(e,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===at.Disconnected&&(this.regionUrl=i,yield fetch(xv(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(xv(e),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return K(this,void 0,void 0,function*(){let i=()=>{},r;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new Xi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new Xi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new Xi({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new Xi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>K(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Xi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>K(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Xi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new Xi({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),i=()=>K(this,void 0,void 0,function*(){const a=this.engine.client.onLeave;a&&a(new $f({reason:Li.CLIENT_INITIATED,action:Lo.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new Xi({scenario:{case:"subscriberBandwidth",value:da(n)}});break;case"leave-full-reconnect":r=new Xi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return K(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var l,d,f,m,p,v,b;let w=!0,S=!1;const R=c?{exact:r}:r;if(i==="audioinput"){S=a.localParticipant.audioTrackPublications.size===0;const k=(l=a.getActiveDevice(i))!==null&&l!==void 0?l:a.options.audioCaptureDefaults.deviceId;a.options.audioCaptureDefaults.deviceId=R;const N=Array.from(a.localParticipant.audioTrackPublications.values()).filter(I=>I.source===te.Source.Microphone);try{w=(yield Promise.all(N.map(I=>{var D;return(D=I.audioTrack)===null||D===void 0?void 0:D.setDeviceId(R)}))).every(I=>I===!0)}catch(I){throw a.options.audioCaptureDefaults.deviceId=k,I}const O=N.some(I=>{var D,j;return(j=(D=I.track)===null||D===void 0?void 0:D.isMuted)!==null&&j!==void 0?j:!1});w&&O&&(S=!0)}else if(i==="videoinput"){S=a.localParticipant.videoTrackPublications.size===0;const k=(d=a.getActiveDevice(i))!==null&&d!==void 0?d:a.options.videoCaptureDefaults.deviceId;a.options.videoCaptureDefaults.deviceId=R;const N=Array.from(a.localParticipant.videoTrackPublications.values()).filter(I=>I.source===te.Source.Camera);try{w=(yield Promise.all(N.map(I=>{var D;return(D=I.videoTrack)===null||D===void 0?void 0:D.setDeviceId(R)}))).every(I=>I===!0)}catch(I){throw a.options.videoCaptureDefaults.deviceId=k,I}const O=N.some(I=>{var D,j;return(j=(D=I.track)===null||D===void 0?void 0:D.isMuted)!==null&&j!==void 0?j:!1});w&&O&&(S=!0)}else if(i==="audiooutput"){if(S=!0,!Sv()&&!a.options.webAudioMix||a.options.webAudioMix&&a.audioContext&&!("setSinkId"in a.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");a.options.webAudioMix&&(r=(f=yield xn.getInstance().normalizeDeviceId("audiooutput",r))!==null&&f!==void 0?f:""),(m=(b=a.options).audioOutput)!==null&&m!==void 0||(b.audioOutput={});const k=(p=a.getActiveDevice(i))!==null&&p!==void 0?p:a.options.audioOutput.deviceId;a.options.audioOutput.deviceId=r;try{a.options.webAudioMix&&((v=a.audioContext)===null||v===void 0||v.setSinkId(r)),yield Promise.all(Array.from(a.remoteParticipants.values()).map(N=>N.setAudioOutput({deviceId:r})))}catch(N){throw a.options.audioOutput.deviceId=k,N}}return S&&(a.localParticipant.activeDeviceMap.set(i,r),a.emit(fe.ActiveDeviceChanged,i,r)),w}()})}setupLocalParticipantEvents(){this.localParticipant.on(ye.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ye.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ye.AttributesChanged,this.onLocalAttributesChanged).on(ye.TrackMuted,this.onLocalTrackMuted).on(ye.TrackUnmuted,this.onLocalTrackUnmuted).on(ye.LocalTrackPublished,this.onLocalTrackPublished).on(ye.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ye.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ye.MediaDevicesError,this.onMediaDevicesError).on(ye.AudioStreamAcquired,this.startAudio).on(ye.ChatMessage,this.onLocalChatMessageSent).on(ye.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,i){if(this.state===at.Connecting||this.state===at.Reconnecting){const m=()=>{this.onTrackAdded(e,n,i),p()},p=()=>{this.off(fe.Reconnected,m),this.off(fe.Connected,m),this.off(fe.Disconnected,p)};this.once(fe.Reconnected,m),this.once(fe.Connected,m),this.once(fe.Disconnected,p);return}if(this.state===at.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=Fj(n.id),a=r[0];let c=r[1],l=e.id;if(c&&c.startsWith("TR")&&(l=c),a===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const d=Array.from(this.remoteParticipants.values()).find(m=>m.sid===a);if(!d){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(a),this.logContext);return}let f;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?f=this.options.adaptiveStream:f={}),d.addSubscribedMediaTrack(e,l,n,i,f)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==at.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(a=>{r.unpublishTrack(a.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var a,c,l;r.track&&this.localParticipant.unpublishTrack(r.track,e),e?((a=r.track)===null||a===void 0||a.detach(),(c=r.track)===null||c===void 0||c.stop()):(l=r.track)===null||l===void 0||l.stopMonitor()}),this.localParticipant.off(ye.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ye.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ye.AttributesChanged,this.onLocalAttributesChanged).off(ye.TrackMuted,this.onLocalTrackMuted).off(ye.TrackUnmuted,this.onLocalTrackUnmuted).off(ye.LocalTrackPublished,this.onLocalTrackPublished).off(ye.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ye.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ye.MediaDevicesError,this.onMediaDevicesError).off(ye.AudioStreamAcquired,this.startAudio).off(ye.ChatMessage,this.onLocalChatMessageSent).off(ye.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Gn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(at.Disconnected),this.emit(fe.Disconnected,n)}}}handleParticipantDisconnected(e,n){var i;this.remoteParticipants.delete(e),n&&(n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(fe.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleStreamHeader(e,n){return K(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const r=this.byteStreamHandlers.get(e.topic);if(!r){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let a;const c={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:cf(e.timestamp),attributes:e.attributes},l=new ReadableStream({start:d=>{a=d,this.byteStreamControllers.set(e.streamId,{info:c,controller:a,startTime:Date.now()})}});r(new Q5(c,l,cf(e.totalLength)),{identity:n})}else if(e.contentHeader.case==="textHeader"){const r=this.textStreamHandlers.get(e.topic);if(!r){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let a;const c={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},l=new ReadableStream({start:d=>{a=d,this.textStreamControllers.set(e.streamId,{info:c,controller:a,startTime:Date.now()})}});r(new e8(c,l,cf(e.totalLength)),{identity:n})}})}handleStreamChunk(e){const n=this.byteStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e);const i=this.textStreamControllers.get(e.streamId);i&&e.content.length>0&&i.controller.enqueue(e)}handleStreamTrailer(e){const n=this.textStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.textStreamControllers.delete(e.streamId));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.byteStreamControllers.delete(e.streamId))}selectDefaultDevices(){return K(this,void 0,void 0,function*(){var e,n,i;const r=xn.getInstance().previousDevices,a=yield xn.getInstance().getDevices(void 0,!1),c=oi();if(c?.name==="Chrome"&&c.os!=="iOS")for(let d of a){const f=r.find(m=>m.deviceId===d.deviceId);f&&f.label!==""&&f.kind===d.kind&&f.label!==d.label&&this.getActiveDevice(d.kind)==="default"&&this.emit(fe.ActiveDeviceChanged,d.kind,d.deviceId)}const l=["audiooutput","audioinput","videoinput"];for(let d of l){const f=r5(d),m=this.localParticipant.getTrackPublication(f);if(m&&(!((e=m.track)===null||e===void 0)&&e.isUserProvided))continue;const p=a.filter(b=>b.kind===d),v=this.getActiveDevice(d);if(v===((n=r.filter(b=>b.kind===d)[0])===null||n===void 0?void 0:n.deviceId)&&p.length>0&&((i=p[0])===null||i===void 0?void 0:i.deviceId)!==v){yield this.switchActiveDevice(d,p[0].deviceId);continue}d==="audioinput"&&!kf()||d==="videoinput"||p.length>0&&!p.find(b=>b.deviceId===this.getActiveDevice(d))&&(d!=="audiooutput"||!kf())&&(yield this.switchActiveDevice(d,p[0].deviceId))}})}acquireAudioContext(){return K(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=Y0())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),Wn(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(fe.AudioPlaybackStatusChanged,i))})}createParticipant(e,n){var i;let r;return n?r=Pf.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new Pf(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),r}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const r=this.remoteParticipants.get(e);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const i=this.createParticipant(e,n);return this.remoteParticipants.set(e,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(fe.ParticipantConnected,i),i.on(ye.TrackPublished,r=>{this.emitWhenConnected(fe.TrackPublished,r,i)}).on(ye.TrackSubscribed,(r,a)=>{r.kind===te.Kind.Audio?(r.on(ke.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(ke.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===te.Kind.Video&&(r.on(ke.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(ke.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(fe.TrackSubscribed,r,a,i)}).on(ye.TrackUnpublished,r=>{this.emit(fe.TrackUnpublished,r,i)}).on(ye.TrackUnsubscribed,(r,a)=>{this.emit(fe.TrackUnsubscribed,r,a,i)}).on(ye.TrackMuted,r=>{this.emitWhenConnected(fe.TrackMuted,r,i)}).on(ye.TrackUnmuted,r=>{this.emitWhenConnected(fe.TrackUnmuted,r,i)}).on(ye.ParticipantMetadataChanged,r=>{this.emitWhenConnected(fe.ParticipantMetadataChanged,r,i)}).on(ye.ParticipantNameChanged,r=>{this.emitWhenConnected(fe.ParticipantNameChanged,r,i)}).on(ye.AttributesChanged,r=>{this.emitWhenConnected(fe.ParticipantAttributesChanged,r,i)}).on(ye.ConnectionQualityChanged,r=>{this.emitWhenConnected(fe.ConnectionQualityChanged,r,i)}).on(ye.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(fe.ParticipantPermissionsChanged,r,i)}).on(ye.TrackSubscriptionStatusChanged,(r,a)=>{this.emitWhenConnected(fe.TrackSubscriptionStatusChanged,r,a,i)}).on(ye.TrackSubscriptionFailed,(r,a)=>{this.emit(fe.TrackSubscriptionFailed,r,i,a)}).on(ye.TrackSubscriptionPermissionChanged,(r,a)=>{this.emitWhenConnected(fe.TrackSubscriptionPermissionChanged,r,a,i)}).on(ye.Active,()=>{this.emitWhenConnected(fe.ParticipantActive,i),i.kind===Ta.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((i,r)=>(i.push(...r.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&t5(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=An.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Li.STATE_MISMATCH))):e=0},u8)}clearConnectionReconcile(){this.connectionReconcileInterval&&An.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(fe.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,i]=e;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.state===at.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,i]);else if(this.state===at.Connected)return this.emit(e,...i);return!1}simulateParticipants(e){return K(this,void 0,void 0,function*(){var n,i;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),a=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Yf({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Ot.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Sa({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(fe.SignalConnected),this.emit(fe.Connected),this.setAndEmitConnectionState(at.Connected),r.video){const c=new Dv(te.Kind.Video,new Ao({source:on.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ii.AUDIO,name:"video-dummy"}),new Af(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:yw(160*((n=a.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(ye.LocalTrackPublished,c)}if(r.audio){const c=new Dv(te.Kind.Audio,new Ao({source:on.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ii.AUDIO}),new Rf(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Kp(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(ye.LocalTrackPublished,c)}for(let c=0;c<a.count-1;c+=1){let l=new Sa({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(c),state:Uo.ACTIVE,tracks:[],joinedAt:Ot.parse(Date.now())});const d=this.getOrCreateParticipant(l.identity,l);if(a.video){const f=yw(160*((i=a.aspectRatios[c%a.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),m=new Ao({source:on.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ii.AUDIO});d.addSubscribedMediaTrack(f,m.sid,new MediaStream([f]),new RTCRtpReceiver),l.tracks=[...l.tracks,m]}if(a.audio){const f=Kp(),m=new Ao({source:on.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ii.AUDIO});d.addSubscribedMediaTrack(f,m.sid,new MediaStream([f]),new RTCRtpReceiver),l.tracks=[...l.tracks,m]}d.updateInfo(l)}})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e!==fe.ActiveSpeakersChanged&&e!==fe.TranscriptionReceived){const a=wA(i).filter(c=>c!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:a}))}return super.emit(e,...i)}}Vr.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function wA(t){return t.map(e=>{if(e)return Array.isArray(e)?wA(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var Oi;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Oi||(Oi={}));class Bs extends ur.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Oi.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Vr(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(e){return K(this,void 0,void 0,function*(){if(this.status!==Oi.IDLE)throw Error("check is running already");this.setStatus(Oi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Oi.SKIPPED&&this.setStatus(this.isSuccess()?Oi.SUCCESS:Oi.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return K(this,void 0,void 0,function*(){return this.room.state===at.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return K(this,void 0,void 0,function*(){this.room&&this.room.state!==at.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Oi.SKIPPED)}switchProtocol(e){return K(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(fe.Reconnecting,()=>{n=!0}),this.room.once(fe.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(a=>setTimeout(a,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(i)return;yield Wn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class d8 extends Bs{get description(){return"Cloud regions"}perform(){return K(this,void 0,void 0,function*(){const e=new _v(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],i=new Set;for(let a=0;a<3;a++){const c=yield e.getNextBestRegionUrl();if(!c)break;if(i.has(c))continue;i.add(c);const l=yield this.checkCloudRegion(c);this.appendMessage("".concat(l.region," RTT: ").concat(l.rtt,"ms, duration: ").concat(l.duration,"ms")),n.push(l)}n.sort((a,c)=>(a.duration-c.duration)*.5+(a.rtt-c.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return K(this,void 0,void 0,function*(){var n,i;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const a=yield this.room.localParticipant.streamText({topic:"test"}),c=1e3,d=1e6/c,f="A".repeat(c),m=Date.now();for(let w=0;w<d;w++)yield a.write(f);yield a.close();const p=Date.now(),v=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),b={region:r,rtt:1e4,duration:p-m};return v?.forEach(w=>{w.type==="candidate-pair"&&w.nominated&&(b.rtt=w.currentRoundTripTime*1e3)}),yield this.disconnect(),b})}}const eg=1e4;class f8 extends Bs{get description(){return"Connection via UDP vs TCP"}perform(){return K(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(eg/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(eg/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return K(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=0;const a=()=>{r=(r+1)%360,i.fillStyle="hsl(".concat(r,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(a)};a();const l=n.captureStream(30).getVideoTracks()[0],f=(yield this.room.localParticipant.publishTrack(l,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,m={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},p=setInterval(()=>K(this,void 0,void 0,function*(){const v=yield f.getRTCStatsReport();v?.forEach(b=>{b.type==="outbound-rtp"?(m.packetsSent=b.packetsSent,m.qualityLimitationDurations=b.qualityLimitationDurations,m.bitrateTotal+=b.targetBitrate,m.count++):b.type==="remote-inbound-rtp"&&(m.packetsLost=b.packetsLost,m.rttTotal+=b.roundTripTime,m.jitterTotal+=b.jitter)})}),1e3);return yield new Promise(v=>setTimeout(v,eg)),clearInterval(p),l.stop(),n.remove(),yield this.disconnect(),m})}}class h8 extends Bs{get description(){return"Can publish audio"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield a8();if(yield lA(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(l=>setTimeout(l,3e3));const a=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!a)throw new Error("Could not get RTCStats");let c=0;if(a.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="audio"||!l.kind&&l.mediaType==="audio")&&(c=l.packetsSent)}),c===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(c," audio packets"))})}}class m8 extends Bs{get description(){return"Can publish video"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield s8();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(c=>setTimeout(c,5e3));const r=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!r)throw new Error("Could not get RTCStats");let a=0;if(r.forEach(c=>{c.type==="outbound-rtp"&&(c.kind==="video"||!c.kind&&c.mediaType==="video")&&(a+=c.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," video packets"))})}checkForVideo(e){return K(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,yield new Promise(r=>{i.onplay=()=>{setTimeout(()=>{var a,c,l,d;const f=document.createElement("canvas"),m=e.getSettings(),p=(c=(a=m.width)!==null&&a!==void 0?a:i.videoWidth)!==null&&c!==void 0?c:1280,v=(d=(l=m.height)!==null&&l!==void 0?l:i.videoHeight)!==null&&d!==void 0?d:720;f.width=p,f.height=v;const b=f.getContext("2d");b.drawImage(i,0,0);const S=b.getImageData(0,0,f.width,f.height).data;let R=!0;for(let k=0;k<S.length;k+=4)if(S[k]!==0||S[k+1]!==0||S[k+2]!==0){R=!1;break}R?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},i.play()}),n.getTracks().forEach(r=>r.stop()),i.remove()})}}class p8 extends Bs{get description(){return"Resuming connection after interruption"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect();let i=!1,r=!1,a;const c=new Promise(f=>{setTimeout(f,5e3),a=f}),l=()=>{i=!0};n.on(fe.SignalReconnecting,l).on(fe.Reconnecting,l).on(fe.Reconnected,()=>{r=!0,a(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const d=n.engine.client.onClose;if(d&&d(""),yield c,i){if(!r||n.state!==at.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class g8 extends Bs{get description(){return"Can connect via TURN"}perform(){return K(this,void 0,void 0,function*(){var e,n;const i=new W0,r=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let a=!1,c=!1,l=!1;for(let d of r.iceServers)for(let f of d.urls)f.startsWith("turn:")?(c=!0,l=!0):f.startsWith("turns:")&&(c=!0,l=!0,a=!0),f.startsWith("stun:")&&(l=!0);l?c&&!a&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||c?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class v8 extends Bs{get description(){return"Establishing WebRTC connection"}perform(){return K(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(fe.SignalConnected,()=>{const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(r,a)=>{if(r.candidate){const c=new RTCIceCandidate(r);let l="".concat(c.protocol," ").concat(c.address,":").concat(c.port," ").concat(c.type);c.address&&(y8(c.address)?l+=" (private)":c.protocol==="tcp"&&c.tcpType==="passive"?(e=!0,l+=" (passive)"):c.protocol==="udp"&&(n=!0)),this.appendMessage(l)}i&&i(r,a)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=r=>{r instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(r.errorCode," ").concat(r.errorText," ").concat(r.url))})});try{yield this.connect(),ot.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function y8(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class b8 extends Bs{get description(){return"Connecting to signal connection via WebSocket"}perform(){return K(this,void 0,void 0,function*(){var e,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new W0;const a=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(a.serverVersion,".")),((e=a.serverInfo)===null||e===void 0?void 0:e.edition)===uR.Cloud&&(!((n=a.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=a.serverInfo)===null||i===void 0?void 0:i.region)),yield r.close()})}}class nW extends ur.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=i}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Oi.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Oi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return K(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new e(this.url,this.token,this.options),r=c=>{this.updateCheck(n,c)};i.on("update",r);const a=yield i.run();return i.off("update",r),a})}checkWebsocket(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(b8)})}checkWebRTC(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(v8)})}checkTURN(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(g8)})}checkReconnect(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(p8)})}checkPublishAudio(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(h8)})}checkPublishVideo(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(m8)})}checkConnectionProtocol(){return K(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(f8);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(d8)})}}const ty=T.createContext({});function ny(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const iy=typeof window<"u",CA=iy?T.useLayoutEffect:T.useEffect,Qf=T.createContext(null);function ry(t,e){t.indexOf(e)===-1&&t.push(e)}function sy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const zr=(t,e,n)=>n>e?e:n<t?t:n;let ay=()=>{};const Hr={},kA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function EA(t){return typeof t=="object"&&t!==null}const RA=t=>/^0[^.\s]+$/u.test(t);function oy(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ci=t=>t,S8=(t,e)=>n=>e(t(n)),ou=(...t)=>t.reduce(S8),Kl=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class cy{constructor(){this.subscriptions=[]}add(e){return ry(this.subscriptions,e),()=>sy(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let a=0;a<r;a++){const c=this.subscriptions[a];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const nr=t=>t*1e3,ir=t=>t/1e3;function AA(t,e){return e?t*(1e3/e):0}const _A=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,T8=1e-7,x8=12;function w8(t,e,n,i,r){let a,c,l=0;do c=e+(n-e)/2,a=_A(c,i,r)-t,a>0?n=c:e=c;while(Math.abs(a)>T8&&++l<x8);return c}function cu(t,e,n,i){if(t===e&&n===i)return Ci;const r=a=>w8(a,0,1,t,n);return a=>a===0||a===1?a:_A(r(a),e,i)}const PA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,DA=t=>e=>1-t(1-e),NA=cu(.33,1.53,.69,.99),ly=DA(NA),MA=PA(ly),OA=t=>(t*=2)<1?.5*ly(t):.5*(2-Math.pow(2,-10*(t-1))),uy=t=>1-Math.sin(Math.acos(t)),IA=DA(uy),UA=PA(uy),C8=cu(.42,0,1,1),k8=cu(0,0,.58,1),LA=cu(.42,0,.58,1),E8=t=>Array.isArray(t)&&typeof t[0]!="number",jA=t=>Array.isArray(t)&&typeof t[0]=="number",R8={linear:Ci,easeIn:C8,easeInOut:LA,easeOut:k8,circIn:uy,circInOut:UA,circOut:IA,backIn:ly,backInOut:MA,backOut:NA,anticipate:OA},A8=t=>typeof t=="string",jw=t=>{if(jA(t)){ay(t.length===4);const[e,n,i,r]=t;return cu(e,n,i,r)}else if(A8(t))return R8[t];return t},Dd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function _8(t,e){let n=new Set,i=new Set,r=!1,a=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(m){c.has(m)&&(f.schedule(m),t()),m(l)}const f={schedule:(m,p=!1,v=!1)=>{const w=v&&r?n:i;return p&&c.add(m),w.has(m)||w.add(m),m},cancel:m=>{i.delete(m),c.delete(m)},process:m=>{if(l=m,r){a=!0;return}r=!0,[n,i]=[i,n],n.forEach(d),n.clear(),r=!1,a&&(a=!1,f.process(m))}};return f}const P8=40;function BA(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=Dd.reduce((O,I)=>(O[I]=_8(a),O),{}),{setup:l,read:d,resolveKeyframes:f,preUpdate:m,update:p,preRender:v,render:b,postRender:w}=c,S=()=>{const O=Hr.useManualTiming?r.timestamp:performance.now();n=!1,Hr.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(O-r.timestamp,P8),1)),r.timestamp=O,r.isProcessing=!0,l.process(r),d.process(r),f.process(r),m.process(r),p.process(r),v.process(r),b.process(r),w.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(S))},R=()=>{n=!0,i=!0,r.isProcessing||t(S)};return{schedule:Dd.reduce((O,I)=>{const D=c[I];return O[I]=(j,H=!1,z=!1)=>(n||R(),D.schedule(j,H,z)),O},{}),cancel:O=>{for(let I=0;I<Dd.length;I++)c[Dd[I]].cancel(O)},state:r,steps:c}}const{schedule:It,cancel:Ns,state:Rn,steps:tg}=BA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ci,!0);let uf;function D8(){uf=void 0}const Yn={now:()=>(uf===void 0&&Yn.set(Rn.isProcessing||Hr.useManualTiming?Rn.timestamp:performance.now()),uf),set:t=>{uf=t,queueMicrotask(D8)}},FA=t=>e=>typeof e=="string"&&e.startsWith(t),dy=FA("--"),N8=FA("var(--"),fy=t=>N8(t)?M8.test(t.split("/*")[0].trim()):!1,M8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ic={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Gl={...ic,transform:t=>zr(0,1,t)},Nd={...ic,default:1},Il=t=>Math.round(t*1e5)/1e5,hy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function O8(t){return t==null}const I8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,my=(t,e)=>n=>!!(typeof n=="string"&&I8.test(n)&&n.startsWith(t)||e&&!O8(n)&&Object.prototype.hasOwnProperty.call(n,e)),VA=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,a,c,l]=i.match(hy);return{[t]:parseFloat(r),[e]:parseFloat(a),[n]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},U8=t=>zr(0,255,t),ng={...ic,transform:t=>Math.round(U8(t))},ma={test:my("rgb","red"),parse:VA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+ng.transform(t)+", "+ng.transform(e)+", "+ng.transform(n)+", "+Il(Gl.transform(i))+")"};function L8(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Nv={test:my("#"),parse:L8,transform:ma.transform},lu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ws=lu("deg"),rr=lu("%"),He=lu("px"),j8=lu("vh"),B8=lu("vw"),Bw={...rr,parse:t=>rr.parse(t)/100,transform:t=>rr.transform(t*100)},Do={test:my("hsl","hue"),parse:VA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+rr.transform(Il(e))+", "+rr.transform(Il(n))+", "+Il(Gl.transform(i))+")"},an={test:t=>ma.test(t)||Nv.test(t)||Do.test(t),parse:t=>ma.test(t)?ma.parse(t):Do.test(t)?Do.parse(t):Nv.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ma.transform(t):Do.transform(t),getAnimatableNone:t=>{const e=an.parse(t);return e.alpha=0,an.transform(e)}},F8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function V8(t){return isNaN(t)&&typeof t=="string"&&(t.match(hy)?.length||0)+(t.match(F8)?.length||0)>0}const zA="number",HA="color",z8="var",H8="var(",Fw="${}",q8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yl(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let a=0;const l=e.replace(q8,d=>(an.test(d)?(i.color.push(a),r.push(HA),n.push(an.parse(d))):d.startsWith(H8)?(i.var.push(a),r.push(z8),n.push(d)):(i.number.push(a),r.push(zA),n.push(parseFloat(d))),++a,Fw)).split(Fw);return{values:n,split:l,indexes:i,types:r}}function qA(t){return Yl(t).values}function KA(t){const{split:e,types:n}=Yl(t),i=e.length;return r=>{let a="";for(let c=0;c<i;c++)if(a+=e[c],r[c]!==void 0){const l=n[c];l===zA?a+=Il(r[c]):l===HA?a+=an.transform(r[c]):a+=r[c]}return a}}const K8=t=>typeof t=="number"?0:an.test(t)?an.getAnimatableNone(t):t;function G8(t){const e=qA(t);return KA(t)(e.map(K8))}const Ms={test:V8,parse:qA,createTransformer:KA,getAnimatableNone:G8};function ig(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Y8({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,a=0,c=0;if(!e)r=a=c=n;else{const l=n<.5?n*(1+e):n+e-n*e,d=2*n-l;r=ig(d,l,t+1/3),a=ig(d,l,t),c=ig(d,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:i}}function Df(t,e){return n=>n>0?e:t}const Bt=(t,e,n)=>t+(e-t)*n,rg=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},W8=[Nv,ma,Do],$8=t=>W8.find(e=>e.test(t));function Vw(t){const e=$8(t);if(!e)return!1;let n=e.parse(t);return e===Do&&(n=Y8(n)),n}const zw=(t,e)=>{const n=Vw(t),i=Vw(e);if(!n||!i)return Df(t,e);const r={...n};return a=>(r.red=rg(n.red,i.red,a),r.green=rg(n.green,i.green,a),r.blue=rg(n.blue,i.blue,a),r.alpha=Bt(n.alpha,i.alpha,a),ma.transform(r))},Mv=new Set(["none","hidden"]);function X8(t,e){return Mv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Z8(t,e){return n=>Bt(t,e,n)}function py(t){return typeof t=="number"?Z8:typeof t=="string"?fy(t)?Df:an.test(t)?zw:eB:Array.isArray(t)?GA:typeof t=="object"?an.test(t)?zw:J8:Df}function GA(t,e){const n=[...t],i=n.length,r=t.map((a,c)=>py(a)(a,e[c]));return a=>{for(let c=0;c<i;c++)n[c]=r[c](a);return n}}function J8(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=py(t[r])(t[r],e[r]));return r=>{for(const a in i)n[a]=i[a](r);return n}}function Q8(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],c=t.indexes[a][i[a]],l=t.values[c]??0;n[r]=l,i[a]++}return n}const eB=(t,e)=>{const n=Ms.createTransformer(e),i=Yl(t),r=Yl(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Mv.has(t)&&!r.values.length||Mv.has(e)&&!i.values.length?X8(t,e):ou(GA(Q8(i,r),r.values),n):Df(t,e)};function YA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Bt(t,e,n):py(t)(t,e)}const tB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>It.update(e,n),stop:()=>Ns(e),now:()=>Rn.isProcessing?Rn.timestamp:Yn.now()}},WA=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let a=0;a<r;a++)i+=Math.round(t(a/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Nf=2e4;function gy(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Nf;)e+=n,i=t.next(e);return e>=Nf?1/0:e}function nB(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(gy(i),Nf);return{type:"keyframes",ease:a=>i.next(r*a).value/e,duration:ir(r)}}const iB=5;function $A(t,e,n){const i=Math.max(e-iB,0);return AA(n-t(i),e-i)}const Ht={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sg=.001;function rB({duration:t=Ht.duration,bounce:e=Ht.bounce,velocity:n=Ht.velocity,mass:i=Ht.mass}){let r,a,c=1-e;c=zr(Ht.minDamping,Ht.maxDamping,c),t=zr(Ht.minDuration,Ht.maxDuration,ir(t)),c<1?(r=f=>{const m=f*c,p=m*t,v=m-n,b=Ov(f,c),w=Math.exp(-p);return sg-v/b*w},a=f=>{const p=f*c*t,v=p*n+n,b=Math.pow(c,2)*Math.pow(f,2)*t,w=Math.exp(-p),S=Ov(Math.pow(f,2),c);return(-r(f)+sg>0?-1:1)*((v-b)*w)/S}):(r=f=>{const m=Math.exp(-f*t),p=(f-n)*t+1;return-sg+m*p},a=f=>{const m=Math.exp(-f*t),p=(n-f)*(t*t);return m*p});const l=5/t,d=aB(r,a,l);if(t=nr(t),isNaN(d))return{stiffness:Ht.stiffness,damping:Ht.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:c*2*Math.sqrt(i*f),duration:t}}}const sB=12;function aB(t,e,n){let i=n;for(let r=1;r<sB;r++)i=i-t(i)/e(i);return i}function Ov(t,e){return t*Math.sqrt(1-e*e)}const oB=["duration","bounce"],cB=["stiffness","damping","mass"];function Hw(t,e){return e.some(n=>t[n]!==void 0)}function lB(t){let e={velocity:Ht.velocity,stiffness:Ht.stiffness,damping:Ht.damping,mass:Ht.mass,isResolvedFromDuration:!1,...t};if(!Hw(t,cB)&&Hw(t,oB))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,a=2*zr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Ht.mass,stiffness:r,damping:a}}else{const n=rB(t);e={...e,...n,mass:Ht.mass},e.isResolvedFromDuration=!0}return e}function Mf(t=Ht.visualDuration,e=Ht.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:p,velocity:v,isResolvedFromDuration:b}=lB({...n,velocity:-ir(n.velocity||0)}),w=v||0,S=f/(2*Math.sqrt(d*m)),R=c-a,k=ir(Math.sqrt(d/m)),N=Math.abs(R)<5;i||(i=N?Ht.restSpeed.granular:Ht.restSpeed.default),r||(r=N?Ht.restDelta.granular:Ht.restDelta.default);let O;if(S<1){const D=Ov(k,S);O=j=>{const H=Math.exp(-S*k*j);return c-H*((w+S*k*R)/D*Math.sin(D*j)+R*Math.cos(D*j))}}else if(S===1)O=D=>c-Math.exp(-k*D)*(R+(w+k*R)*D);else{const D=k*Math.sqrt(S*S-1);O=j=>{const H=Math.exp(-S*k*j),z=Math.min(D*j,300);return c-H*((w+S*k*R)*Math.sinh(z)+D*R*Math.cosh(z))/D}}const I={calculatedDuration:b&&p||null,next:D=>{const j=O(D);if(b)l.done=D>=p;else{let H=D===0?w:0;S<1&&(H=D===0?nr(w):$A(O,D,j));const z=Math.abs(H)<=i,G=Math.abs(c-j)<=r;l.done=z&&G}return l.value=l.done?c:j,l},toString:()=>{const D=Math.min(gy(I),Nf),j=WA(H=>I.next(D*H).value,D,30);return D+"ms "+j},toTransition:()=>{}};return I}Mf.applyToOptions=t=>{const e=nB(t,100,Mf);return t.ease=e.ease,t.duration=nr(e.duration),t.type="keyframes",t};function Iv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:c,min:l,max:d,restDelta:f=.5,restSpeed:m}){const p=t[0],v={done:!1,value:p},b=z=>l!==void 0&&z<l||d!==void 0&&z>d,w=z=>l===void 0?d:d===void 0||Math.abs(l-z)<Math.abs(d-z)?l:d;let S=n*e;const R=p+S,k=c===void 0?R:c(R);k!==R&&(S=k-p);const N=z=>-S*Math.exp(-z/i),O=z=>k+N(z),I=z=>{const G=N(z),ie=O(z);v.done=Math.abs(G)<=f,v.value=v.done?k:ie};let D,j;const H=z=>{b(v.value)&&(D=z,j=Mf({keyframes:[v.value,w(v.value)],velocity:$A(O,z,v.value),damping:r,stiffness:a,restDelta:f,restSpeed:m}))};return H(0),{calculatedDuration:null,next:z=>{let G=!1;return!j&&D===void 0&&(G=!0,I(z),H(z)),D!==void 0&&z>=D?j.next(z-D):(!G&&I(z),v)}}}function uB(t,e,n){const i=[],r=n||Hr.mix||YA,a=t.length-1;for(let c=0;c<a;c++){let l=r(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||Ci:e;l=ou(d,l)}i.push(l)}return i}function dB(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const a=t.length;if(ay(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=uB(e,i,r),d=l.length,f=m=>{if(c&&m<t[0])return e[0];let p=0;if(d>1)for(;p<t.length-2&&!(m<t[p+1]);p++);const v=Kl(t[p],t[p+1],m);return l[p](v)};return n?m=>f(zr(t[0],t[a-1],m)):f}function fB(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Kl(0,e,i);t.push(Bt(n,1,r))}}function hB(t){const e=[0];return fB(e,t.length-1),e}function mB(t,e){return t.map(n=>n*e)}function pB(t,e){return t.map(()=>e||LA).splice(0,t.length-1)}function Ul({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=E8(i)?i.map(jw):jw(i),a={done:!1,value:e[0]},c=mB(n&&n.length===e.length?n:hB(e),t),l=dB(c,e,{ease:Array.isArray(r)?r:pB(e,r)});return{calculatedDuration:t,next:d=>(a.value=l(d),a.done=d>=t,a)}}const gB=t=>t!==null;function vy(t,{repeat:e,repeatType:n="loop"},i,r=1){const a=t.filter(gB),l=r<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||i===void 0?a[l]:i}const vB={decay:Iv,inertia:Iv,tween:Ul,keyframes:Ul,spring:Mf};function XA(t){typeof t.type=="string"&&(t.type=vB[t.type])}class yy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const yB=t=>t/100;class by extends yy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Yn.now()&&this.tick(Yn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;XA(e);const{type:n=Ul,repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:c=0}=e;let{keyframes:l}=e;const d=n||Ul;d!==Ul&&typeof l[0]!="number"&&(this.mixKeyframes=ou(yB,YA(l[0],l[1])),l=[0,100]);const f=d({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...l].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=gy(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:m,repeat:p,repeatType:v,repeatDelay:b,type:w,onUpdate:S,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const k=this.currentTime-f*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?k<0:k>r;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let O=this.currentTime,I=i;if(p){const z=Math.min(this.currentTime,r)/l;let G=Math.floor(z),ie=z%1;!ie&&z>=1&&(ie=1),ie===1&&G--,G=Math.min(G,p+1),!!(G%2)&&(v==="reverse"?(ie=1-ie,b&&(ie-=b/l)):v==="mirror"&&(I=c)),O=zr(0,1,ie)*l}const D=N?{done:!1,value:m[0]}:I.next(O);a&&(D.value=a(D.value));let{done:j}=D;!N&&d!==null&&(j=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return H&&w!==Iv&&(D.value=vy(m,this.options,R,this.speed)),S&&S(D.value),H&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return ir(this.calculatedDuration)}get time(){return ir(this.currentTime)}set time(e){e=nr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ir(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=tB,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function bB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const pa=t=>t*180/Math.PI,Uv=t=>{const e=pa(Math.atan2(t[1],t[0]));return Lv(e)},SB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Uv,rotateZ:Uv,skewX:t=>pa(Math.atan(t[1])),skewY:t=>pa(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Lv=t=>(t=t%360,t<0&&(t+=360),t),qw=Uv,Kw=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Gw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),TB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Kw,scaleY:Gw,scale:t=>(Kw(t)+Gw(t))/2,rotateX:t=>Lv(pa(Math.atan2(t[6],t[5]))),rotateY:t=>Lv(pa(Math.atan2(-t[2],t[0]))),rotateZ:qw,rotate:qw,skewX:t=>pa(Math.atan(t[4])),skewY:t=>pa(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function jv(t){return t.includes("scale")?1:0}function Bv(t,e){if(!t||t==="none")return jv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=TB,r=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=SB,r=l}if(!r)return jv(e);const a=i[e],c=r[1].split(",").map(wB);return typeof a=="function"?a(c):c[a]}const xB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Bv(n,e)};function wB(t){return parseFloat(t.trim())}const rc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sc=new Set(rc),Yw=t=>t===ic||t===He,CB=new Set(["x","y","z"]),kB=rc.filter(t=>!CB.has(t));function EB(t){const e=[];return kB.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const va={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Bv(e,"x"),y:(t,{transform:e})=>Bv(e,"y")};va.translateX=va.x;va.translateY=va.y;const ya=new Set;let Fv=!1,Vv=!1,zv=!1;function ZA(){if(Vv){const t=Array.from(ya).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=EB(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([a,c])=>{i.getValue(a)?.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Vv=!1,Fv=!1,ya.forEach(t=>t.complete(zv)),ya.clear()}function JA(){ya.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Vv=!0)})}function RB(){zv=!0,JA(),ZA(),zv=!1}class Sy{constructor(e,n,i,r,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(ya.add(this),Fv||(Fv=!0,It.read(JA),It.resolveKeyframes(ZA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const a=r?.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,c);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=c),r&&a===void 0&&r.set(e[0])}bB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ya.delete(this)}cancel(){this.state==="scheduled"&&(ya.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const AB=t=>t.startsWith("--");function _B(t,e,n){AB(e)?t.style.setProperty(e,n):t.style[e]=n}const PB=oy(()=>window.ScrollTimeline!==void 0),DB={};function NB(t,e){const n=oy(t);return()=>DB[e]??n()}const QA=NB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_l=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Ww={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_l([0,.65,.55,1]),circOut:_l([.55,0,1,.45]),backIn:_l([.31,.01,.66,-.59]),backOut:_l([.33,1.53,.69,.99])};function e_(t,e){if(t)return typeof t=="function"?QA()?WA(t,e):"ease-out":jA(t)?_l(t):Array.isArray(t)?t.map(n=>e_(n,e)||Ww.easeOut):Ww[t]}function MB(t,e,n,{delay:i=0,duration:r=300,repeat:a=0,repeatType:c="loop",ease:l="easeOut",times:d}={},f=void 0){const m={[e]:n};d&&(m.offset=d);const p=e_(l,r);Array.isArray(p)&&(m.easing=p);const v={delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(m,v)}function t_(t){return typeof t=="function"&&"applyToOptions"in t}function OB({type:t,...e}){return t_(t)&&QA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class IB extends yy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:l,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,ay(typeof e.type!="string");const f=OB(e);this.animation=MB(n,i,r,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=vy(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):_B(n,i,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ir(Number(e))}get time(){return ir(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=nr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&PB()?(this.animation.timeline=e,Ci):n(this)}}const n_={anticipate:OA,backInOut:MA,circInOut:UA};function UB(t){return t in n_}function LB(t){typeof t.ease=="string"&&UB(t.ease)&&(t.ease=n_[t.ease])}const $w=10;class jB extends IB{constructor(e){LB(e),XA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:a,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new by({...c,autoplay:!1}),d=nr(this.finishedTime??this.time);n.setWithVelocity(l.sample(d-$w).value,l.sample(d).value,$w),l.stop()}}const Xw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ms.test(t)||t==="0")&&!t.startsWith("url("));function BB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function FB(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],c=Xw(r,e),l=Xw(a,e);return!c||!l?!1:BB(t)||(n==="spring"||t_(n))&&i}function Hv(t){t.duration=0,t.type}const VB=new Set(["opacity","clipPath","filter","transform"]),zB=oy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function HB(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:a,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return zB()&&n&&VB.has(n)&&(n!=="transform"||!f)&&!d&&!i&&r!=="mirror"&&a!==0&&c!=="inertia"}const qB=40;class KB extends yy{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:c="loop",keyframes:l,name:d,motionValue:f,element:m,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Yn.now();const v={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:a,repeatType:c,name:d,motionValue:f,element:m,...p},b=m?.KeyframeResolver||Sy;this.keyframeResolver=new b(l,(w,S,R)=>this.onKeyframesResolved(w,S,v,!R),d,f,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:a,type:c,velocity:l,delay:d,isHandoff:f,onUpdate:m}=i;this.resolvedAt=Yn.now(),FB(e,a,c,l)||((Hr.instantAnimations||!d)&&m?.(vy(e,i,n)),e[0]=e[e.length-1],Hv(i),i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>qB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},b=!f&&HB(v)?new jB({...v,element:v.motionValue.owner.current}):new by(v);b.finished.then(()=>this.notifyFinished()).catch(Ci),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),RB()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const GB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function YB(t){const e=GB.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function i_(t,e,n=1){const[i,r]=YB(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const c=a.trim();return kA(c)?parseFloat(c):c}return fy(r)?i_(r,e,n+1):r}function Ty(t,e){return t?.[e]??t?.default??t}const r_=new Set(["width","height","top","left","right","bottom",...rc]),WB={test:t=>t==="auto",parse:t=>t},s_=t=>e=>e.test(t),a_=[ic,He,rr,ws,B8,j8,WB],Zw=t=>a_.find(s_(t));function $B(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||RA(t):!0}const XB=new Set(["brightness","contrast","saturate","opacity"]);function ZB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(hy)||[];if(!i)return t;const r=n.replace(i,"");let a=XB.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+r+")"}const JB=/\b([a-z-]*)\(.*?\)/gu,qv={...Ms,getAnimatableNone:t=>{const e=t.match(JB);return e?e.map(ZB).join(" "):t}},Jw={...ic,transform:Math.round},QB={rotate:ws,rotateX:ws,rotateY:ws,rotateZ:ws,scale:Nd,scaleX:Nd,scaleY:Nd,scaleZ:Nd,skew:ws,skewX:ws,skewY:ws,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:Gl,originX:Bw,originY:Bw,originZ:He},xy={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,backgroundPositionX:He,backgroundPositionY:He,...QB,zIndex:Jw,fillOpacity:Gl,strokeOpacity:Gl,numOctaves:Jw},e2={...xy,color:an,backgroundColor:an,outlineColor:an,fill:an,stroke:an,borderColor:an,borderTopColor:an,borderRightColor:an,borderBottomColor:an,borderLeftColor:an,filter:qv,WebkitFilter:qv},o_=t=>e2[t];function c_(t,e){let n=o_(t);return n!==qv&&(n=Ms),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const t2=new Set(["auto","none","0"]);function n2(t,e,n){let i=0,r;for(;i<t.length&&!r;){const a=t[i];typeof a=="string"&&!t2.has(a)&&Yl(a).values.length&&(r=t[i]),i++}if(r&&n)for(const a of e)t[a]=c_(n,r)}class i2 extends Sy{constructor(e,n,i,r,a){super(e,n,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),fy(f))){const m=i_(f,n.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!r_.has(i)||e.length!==2)return;const[r,a]=e,c=Zw(r),l=Zw(a);if(c!==l)if(Yw(c)&&Yw(l))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else va[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||$B(e[r]))&&i.push(r);i.length&&n2(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=va[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,c=i[a];i[a]=va[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,d])=>{e.getValue(l).set(d)}),this.resolveNoneKeyframes()}}function r2(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=n?.[t]??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const l_=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function u_(t){return EA(t)&&"offsetHeight"in t}const Qw=30,s2=t=>!isNaN(parseFloat(t));class a2{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Yn.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=s2(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new cy);const i=this.events[e].add(n);return e==="change"?()=>{i(),It.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Qw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Qw);return AA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wo(t,e){return new a2(t,e)}const{schedule:wy}=BA(queueMicrotask,!1),Ni={x:!1,y:!1};function d_(){return Ni.x||Ni.y}function o2(t){return t==="x"||t==="y"?Ni[t]?null:(Ni[t]=!0,()=>{Ni[t]=!1}):Ni.x||Ni.y?null:(Ni.x=Ni.y=!0,()=>{Ni.x=Ni.y=!1})}function f_(t,e){const n=r2(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function eC(t){return!(t.pointerType==="touch"||d_())}function c2(t,e,n={}){const[i,r,a]=f_(t,n),c=l=>{if(!eC(l))return;const{target:d}=l,f=e(d,l);if(typeof f!="function"||!d)return;const m=p=>{eC(p)&&(f(p),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,r)};return i.forEach(l=>{l.addEventListener("pointerenter",c,r)}),a}const h_=(t,e)=>e?t===e?!0:h_(t,e.parentElement):!1,Cy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,l2=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function u2(t){return l2.has(t.tagName)||t.tabIndex!==-1}const df=new WeakSet;function tC(t){return e=>{e.key==="Enter"&&t(e)}}function ag(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const d2=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=tC(()=>{if(df.has(n))return;ag(n,"down");const r=tC(()=>{ag(n,"up")}),a=()=>ag(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function nC(t){return Cy(t)&&!d_()}function f2(t,e,n={}){const[i,r,a]=f_(t,n),c=l=>{const d=l.currentTarget;if(!nC(l))return;df.add(d);const f=e(d,l),m=(b,w)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",v),df.has(d)&&df.delete(d),nC(b)&&typeof f=="function"&&f(b,{success:w})},p=b=>{m(b,d===window||d===document||n.useGlobalTarget||h_(d,b.target))},v=b=>{m(b,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",v,r)};return i.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",c,r),u_(l)&&(l.addEventListener("focus",f=>d2(f,r)),!u2(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function m_(t){return EA(t)&&"ownerSVGElement"in t}function h2(t){return m_(t)&&t.tagName==="svg"}const Nn=t=>!!(t&&t.getVelocity),m2=[...a_,an,Ms],p2=t=>m2.find(s_(t)),ky=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class g2 extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=u_(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function v2({children:t,isPresent:e,anchorX:n,root:i}){const r=T.useId(),a=T.useRef(null),c=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=T.useContext(ky);return T.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:p,right:v}=c.current;if(e||!a.current||!d||!f)return;const b=n==="left"?`left: ${p}`:`right: ${v}`;a.current.dataset.motionPopId=r;const w=document.createElement("style");l&&(w.nonce=l);const S=i??document.head;return S.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${m}px !important;
          }
        `),()=>{S.contains(w)&&S.removeChild(w)}},[e]),x.jsx(g2,{isPresent:e,childRef:a,sizeRef:c,children:T.cloneElement(t,{ref:a})})}const y2=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:c,anchorX:l,root:d})=>{const f=ny(b2),m=T.useId();let p=!0,v=T.useMemo(()=>(p=!1,{id:m,initial:e,isPresent:n,custom:r,onExitComplete:b=>{f.set(b,!0);for(const w of f.values())if(!w)return;i&&i()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,i]);return a&&p&&(v={...v}),T.useMemo(()=>{f.forEach((b,w)=>f.set(w,!1))},[n]),T.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),c==="popLayout"&&(t=x.jsx(v2,{isPresent:n,anchorX:l,root:d,children:t})),x.jsx(Qf.Provider,{value:v,children:t})};function b2(){return new Map}function p_(t=!0){const e=T.useContext(Qf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,a=T.useId();T.useEffect(()=>{if(t)return r(a)},[t]);const c=T.useCallback(()=>t&&i&&i(a),[a,i,t]);return!n&&i?[!1,c]:[!0]}const Md=t=>t.key||"";function iC(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const Kv=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:c=!1,anchorX:l="left",root:d})=>{const[f,m]=p_(c),p=T.useMemo(()=>iC(t),[t]),v=c&&!f?[]:p.map(Md),b=T.useRef(!0),w=T.useRef(p),S=ny(()=>new Map),[R,k]=T.useState(p),[N,O]=T.useState(p);CA(()=>{b.current=!1,w.current=p;for(let j=0;j<N.length;j++){const H=Md(N[j]);v.includes(H)?S.delete(H):S.get(H)!==!0&&S.set(H,!1)}},[N,v.length,v.join("-")]);const I=[];if(p!==R){let j=[...p];for(let H=0;H<N.length;H++){const z=N[H],G=Md(z);v.includes(G)||(j.splice(H,0,z),I.push(z))}return a==="wait"&&I.length&&(j=I),O(iC(j)),k(p),null}const{forceRender:D}=T.useContext(ty);return x.jsx(x.Fragment,{children:N.map(j=>{const H=Md(j),z=c&&!f?!1:p===N||v.includes(H),G=()=>{if(S.has(H))S.set(H,!0);else return;let ie=!0;S.forEach(re=>{re||(ie=!1)}),ie&&(D?.(),O(w.current),c&&m?.(),i&&i())};return x.jsx(y2,{isPresent:z,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,root:d,onExitComplete:z?void 0:G,anchorX:l,children:j},H)})})},g_=T.createContext({strict:!1}),rC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$o={};for(const t in rC)$o[t]={isEnabled:e=>rC[t].some(n=>!!e[n])};function S2(t){for(const e in t)$o[e]={...$o[e],...t[e]}}const T2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Of(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||T2.has(t)}let v_=t=>!Of(t);function x2(t){typeof t=="function"&&(v_=e=>e.startsWith("on")?!Of(e):t(e))}try{x2(require("@emotion/is-prop-valid").default)}catch{}function w2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(v_(r)||n===!0&&Of(r)||!e&&!Of(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const eh=T.createContext({});function th(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Wl(t){return typeof t=="string"||Array.isArray(t)}const Ey=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ry=["initial",...Ey];function nh(t){return th(t.animate)||Ry.some(e=>Wl(t[e]))}function y_(t){return!!(nh(t)||t.variants)}function C2(t,e){if(nh(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Wl(n)?n:void 0,animate:Wl(i)?i:void 0}}return t.inherit!==!1?e:{}}function k2(t){const{initial:e,animate:n}=C2(t,T.useContext(eh));return T.useMemo(()=>({initial:e,animate:n}),[sC(e),sC(n)])}function sC(t){return Array.isArray(t)?t.join(" "):t}const $l={};function E2(t){for(const e in t)$l[e]=t[e],dy(e)&&($l[e].isCSSVariable=!0)}function b_(t,{layout:e,layoutId:n}){return sc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!$l[t]||t==="opacity")}const R2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},A2=rc.length;function _2(t,e,n){let i="",r=!0;for(let a=0;a<A2;a++){const c=rc[a],l=t[c];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(c.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||n){const f=l_(l,xy[c]);if(!d){r=!1;const m=R2[c]||c;i+=`${m}(${f}) `}n&&(e[c]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Ay(t,e,n){const{style:i,vars:r,transformOrigin:a}=t;let c=!1,l=!1;for(const d in e){const f=e[d];if(sc.has(d)){c=!0;continue}else if(dy(d)){r[d]=f;continue}else{const m=l_(f,xy[d]);d.startsWith("origin")?(l=!0,a[d]=m):i[d]=m}}if(e.transform||(c||n?i.transform=_2(e,t.transform,n):i.transform&&(i.transform="none")),l){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;i.transformOrigin=`${d} ${f} ${m}`}}const _y=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function S_(t,e,n){for(const i in e)!Nn(e[i])&&!b_(i,n)&&(t[i]=e[i])}function P2({transformTemplate:t},e){return T.useMemo(()=>{const n=_y();return Ay(n,e,t),Object.assign({},n.vars,n.style)},[e])}function D2(t,e){const n=t.style||{},i={};return S_(i,n,t),Object.assign(i,P2(t,e)),i}function N2(t,e){const n={},i=D2(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const M2={offset:"stroke-dashoffset",array:"stroke-dasharray"},O2={offset:"strokeDashoffset",array:"strokeDasharray"};function I2(t,e,n=1,i=0,r=!0){t.pathLength=1;const a=r?M2:O2;t[a.offset]=He.transform(-i);const c=He.transform(e),l=He.transform(n);t[a.array]=`${c} ${l}`}function T_(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:a=1,pathOffset:c=0,...l},d,f,m){if(Ay(t,l,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:v}=t;p.transform&&(v.transform=p.transform,delete p.transform),(v.transform||p.transformOrigin)&&(v.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),v.transform&&(v.transformBox=m?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),i!==void 0&&(p.scale=i),r!==void 0&&I2(p,r,a,c,!1)}const x_=()=>({..._y(),attrs:{}}),w_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function U2(t,e,n,i){const r=T.useMemo(()=>{const a=x_();return T_(a,e,w_(i),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};S_(a,t.style,t),r.style={...a,...r.style}}return r}const L2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Py(t){return typeof t!="string"||t.includes("-")?!1:!!(L2.indexOf(t)>-1||/[A-Z]/u.test(t))}function j2(t,e,n,{latestValues:i},r,a=!1){const l=(Py(t)?U2:N2)(e,i,r,t),d=w2(e,typeof t=="string",a),f=t!==T.Fragment?{...d,...l,ref:n}:{},{children:m}=e,p=T.useMemo(()=>Nn(m)?m.get():m,[m]);return T.createElement(t,{...f,children:p})}function aC(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Dy(t,e,n,i){if(typeof e=="function"){const[r,a]=aC(i);e=e(n!==void 0?n:t.custom,r,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,a]=aC(i);e=e(n!==void 0?n:t.custom,r,a)}return e}function ff(t){return Nn(t)?t.get():t}function B2({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:F2(n,i,r,t),renderState:e()}}function F2(t,e,n,i){const r={},a=i(t,{});for(const v in a)r[v]=ff(a[v]);let{initial:c,animate:l}=t;const d=nh(t),f=y_(t);e&&f&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),l===void 0&&(l=e.animate));let m=n?n.initial===!1:!1;m=m||c===!1;const p=m?l:c;if(p&&typeof p!="boolean"&&!th(p)){const v=Array.isArray(p)?p:[p];for(let b=0;b<v.length;b++){const w=Dy(t,v[b]);if(w){const{transitionEnd:S,transition:R,...k}=w;for(const N in k){let O=k[N];if(Array.isArray(O)){const I=m?O.length-1:0;O=O[I]}O!==null&&(r[N]=O)}for(const N in S)r[N]=S[N]}}}return r}const C_=t=>(e,n)=>{const i=T.useContext(eh),r=T.useContext(Qf),a=()=>B2(t,e,i,r);return n?a():ny(a)};function Ny(t,e,n){const{style:i}=t,r={};for(const a in i)(Nn(i[a])||e.style&&Nn(e.style[a])||b_(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(r[a]=i[a]);return r}const V2=C_({scrapeMotionValuesFromProps:Ny,createRenderState:_y});function k_(t,e,n){const i=Ny(t,e,n);for(const r in t)if(Nn(t[r])||Nn(e[r])){const a=rc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=t[r]}return i}const z2=C_({scrapeMotionValuesFromProps:k_,createRenderState:x_}),H2=Symbol.for("motionComponentSymbol");function No(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function q2(t,e,n){return T.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):No(n)&&(n.current=i))},[e])}const My=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),K2="framerAppearId",E_="data-"+My(K2),R_=T.createContext({});function G2(t,e,n,i,r){const{visualElement:a}=T.useContext(eh),c=T.useContext(g_),l=T.useContext(Qf),d=T.useContext(ky).reducedMotion,f=T.useRef(null);i=i||c.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,p=T.useContext(R_);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&Y2(f.current,n,r,p);const v=T.useRef(!1);T.useInsertionEffect(()=>{m&&v.current&&m.update(n,l)});const b=n[E_],w=T.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return CA(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),w.current&&m.animationState&&m.animationState.animateChanges())}),T.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),w.current=!1),m.enteringChildren=void 0)}),m}function Y2(t,e,n,i){const{layoutId:r,layout:a,drag:c,dragConstraints:l,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:A_(t.parent)),t.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!c||l&&No(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:d,layoutRoot:f})}function A_(t){if(t)return t.options.allowProjection!==!1?t.projection:A_(t.parent)}function og(t,{forwardMotionProps:e=!1}={},n,i){n&&S2(n);const r=Py(t)?z2:V2;function a(l,d){let f;const m={...T.useContext(ky),...l,layoutId:W2(l)},{isStatic:p}=m,v=k2(l),b=r(l,p);if(!p&&iy){$2();const w=X2(m);f=w.MeasureLayout,v.visualElement=G2(t,b,m,i,w.ProjectionNode)}return x.jsxs(eh.Provider,{value:v,children:[f&&v.visualElement?x.jsx(f,{visualElement:v.visualElement,...m}):null,j2(t,l,q2(b,v.visualElement,d),b,p,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=T.forwardRef(a);return c[H2]=t,c}function W2({layoutId:t}){const e=T.useContext(ty).id;return e&&t!==void 0?e+"-"+t:t}function $2(t,e){T.useContext(g_).strict}function X2(t){const{drag:e,layout:n}=$o;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Z2(t,e){if(typeof Proxy>"u")return og;const n=new Map,i=(a,c)=>og(a,c,t,e),r=(a,c)=>i(a,c);return new Proxy(r,{get:(a,c)=>c==="create"?i:(n.has(c)||n.set(c,og(c,void 0,t,e)),n.get(c))})}function __({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function J2({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Q2(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function cg(t){return t===void 0||t===1}function Gv({scale:t,scaleX:e,scaleY:n}){return!cg(t)||!cg(e)||!cg(n)}function fa(t){return Gv(t)||P_(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function P_(t){return oC(t.x)||oC(t.y)}function oC(t){return t&&t!=="0%"}function If(t,e,n){const i=t-n,r=e*i;return n+r}function cC(t,e,n,i,r){return r!==void 0&&(t=If(t,r,i)),If(t,n,i)+e}function Yv(t,e=0,n=1,i,r){t.min=cC(t.min,e,n,i,r),t.max=cC(t.max,e,n,i,r)}function D_(t,{x:e,y:n}){Yv(t.x,e.translate,e.scale,e.originPoint),Yv(t.y,n.translate,n.scale,n.originPoint)}const lC=.999999999999,uC=1.0000000000001;function eF(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let a,c;for(let l=0;l<r;l++){a=n[l],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Oo(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,D_(t,c)),i&&fa(a.latestValues)&&Oo(t,a.latestValues))}e.x<uC&&e.x>lC&&(e.x=1),e.y<uC&&e.y>lC&&(e.y=1)}function Mo(t,e){t.min=t.min+e,t.max=t.max+e}function dC(t,e,n,i,r=.5){const a=Bt(t.min,t.max,r);Yv(t,e,n,a,i)}function Oo(t,e){dC(t.x,e.x,e.scaleX,e.scale,e.originX),dC(t.y,e.y,e.scaleY,e.scale,e.originY)}function N_(t,e){return __(Q2(t.getBoundingClientRect(),e))}function tF(t,e,n){const i=N_(t,n),{scroll:r}=e;return r&&(Mo(i.x,r.offset.x),Mo(i.y,r.offset.y)),i}const fC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Io=()=>({x:fC(),y:fC()}),hC=()=>({min:0,max:0}),Jt=()=>({x:hC(),y:hC()}),Wv={current:null},M_={current:!1};function nF(){if(M_.current=!0,!!iy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Wv.current=t.matches;t.addEventListener("change",e),e()}else Wv.current=!1}const iF=new WeakMap;function rF(t,e,n){for(const i in e){const r=e[i],a=n[i];if(Nn(r))t.addValue(i,r);else if(Nn(a))t.addValue(i,Wo(r,{owner:t}));else if(a!==r)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(r):c.hasAnimated||c.set(r)}else{const c=t.getStaticValue(i);t.addValue(i,Wo(c!==void 0?c:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const mC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sF{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Sy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Yn.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,It.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=nh(n),this.isVariantNode=y_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in p){const b=p[v];d[v]!==void 0&&Nn(b)&&b.set(d[v])}}mount(e){this.current=e,iF.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),M_.current||nF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Wv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ns(this.notifyUpdate),Ns(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=sc.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&It.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in $o){const n=$o[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Jt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<mC.length;i++){const r=mC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,c=e[a];c&&(this.propEventSubscriptions[r]=this.on(r,c))}this.prevMotionValues=rF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Wo(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(kA(i)||RA(i))?i=parseFloat(i):!p2(i)&&Ms.test(n)&&(i=c_(e,n)),this.setBaseTarget(e,Nn(i)?i.get():i)),Nn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=Dy(this.props,n,this.presenceContext?.custom);a&&(i=a[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Nn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new cy),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){wy.render(this.render)}}class O_ extends sF{constructor(){super(...arguments),this.KeyframeResolver=i2}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function I_(t,{style:e,vars:n},i,r){const a=t.style;let c;for(c in e)a[c]=e[c];r?.applyProjectionStyles(a,i);for(c in n)a.setProperty(c,n[c])}function aF(t){return window.getComputedStyle(t)}class oF extends O_{constructor(){super(...arguments),this.type="html",this.renderInstance=I_}readValueFromInstance(e,n){if(sc.has(n))return this.projection?.isProjecting?jv(n):xB(e,n);{const i=aF(e),r=(dy(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return N_(e,n)}build(e,n,i){Ay(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Ny(e,n,i)}}const U_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cF(t,e,n,i){I_(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(U_.has(r)?r:My(r),e.attrs[r])}class lF extends O_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Jt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(sc.has(n)){const i=o_(n);return i&&i.default||0}return n=U_.has(n)?n:My(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return k_(e,n,i)}build(e,n,i){T_(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){cF(e,n,i,r)}mount(e){this.isSVGTag=w_(e.tagName),super.mount(e)}}const uF=(t,e)=>Py(t)?new lF(e):new oF(e,{allowProjection:t!==T.Fragment});function zo(t,e,n){const i=t.getProps();return Dy(i,e,n!==void 0?n:i.custom,t)}const $v=t=>Array.isArray(t);function dF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Wo(n))}function fF(t){return $v(t)?t[t.length-1]||0:t}function hF(t,e){const n=zo(t,e);let{transitionEnd:i={},transition:r={},...a}=n||{};a={...a,...i};for(const c in a){const l=fF(a[c]);dF(t,c,l)}}function mF(t){return!!(Nn(t)&&t.add)}function Xv(t,e){const n=t.getValue("willChange");if(mF(n))return n.add(e);if(!n&&Hr.WillChange){const i=new Hr.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function L_(t){return t.props[E_]}const pF=t=>t!==null;function gF(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(pF),a=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[a]}const vF={type:"spring",stiffness:500,damping:25,restSpeed:10},yF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),bF={type:"keyframes",duration:.8},SF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TF=(t,{keyframes:e})=>e.length>2?bF:sc.has(t)?t.startsWith("scale")?yF(e[1]):vF:SF;function xF({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:c,repeatDelay:l,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const Oy=(t,e,n,i={},r,a)=>c=>{const l=Ty(i,t)||{},d=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-nr(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:r};xF(l)||Object.assign(m,TF(t,m)),m.duration&&(m.duration=nr(m.duration)),m.repeatDelay&&(m.repeatDelay=nr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let p=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Hv(m),m.delay===0&&(p=!0)),(Hr.instantAnimations||Hr.skipAnimations)&&(p=!0,Hv(m),m.delay=0),m.allowFlatten=!l.type&&!l.ease,p&&!a&&e.get()!==void 0){const v=gF(m.keyframes,l);if(v!==void 0){It.update(()=>{m.onUpdate(v),m.onComplete()});return}}return l.isSync?new by(m):new KB(m)};function wF({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function j_(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:c,...l}=e;i&&(a=i);const d=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const m in l){const p=t.getValue(m,t.latestValues[m]??null),v=l[m];if(v===void 0||f&&wF(f,m))continue;const b={delay:n,...Ty(a||{},m)},w=p.get();if(w!==void 0&&!p.isAnimating&&!Array.isArray(v)&&v===w&&!b.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const k=L_(t);if(k){const N=window.MotionHandoffAnimation(k,m,It);N!==null&&(b.startTime=N,S=!0)}}Xv(t,m),p.start(Oy(m,p,v,t.shouldReduceMotion&&r_.has(m)?{type:!1}:b,t,S));const R=p.animation;R&&d.push(R)}return c&&Promise.all(d).then(()=>{It.update(()=>{c&&hF(t,c)})}),d}function B_(t,e,n,i=0,r=1){const a=Array.from(t).sort((f,m)=>f.sortNodePosition(m)).indexOf(e),c=t.size,l=(c-1)*i;return typeof n=="function"?n(a,c):r===1?a*i:l-a*i}function Zv(t,e,n={}){const i=zo(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const a=i?()=>Promise.all(j_(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:p}=r;return CF(t,e,d,f,m,p,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[d,f]=l==="beforeChildren"?[a,c]:[c,a];return d().then(()=>f())}else return Promise.all([a(),c(n.delay)])}function CF(t,e,n=0,i=0,r=0,a=1,c){const l=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),l.push(Zv(d,e,{...c,delay:n+(typeof i=="function"?0:i)+B_(t.variantChildren,d,i,r,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(l)}function kF(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>Zv(t,a,n));i=Promise.all(r)}else if(typeof e=="string")i=Zv(t,e,n);else{const r=typeof e=="function"?zo(t,e,n.custom):e;i=Promise.all(j_(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function F_(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const EF=Ry.length;function V_(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?V_(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<EF;n++){const i=Ry[n],r=t.props[i];(Wl(r)||r===!1)&&(e[i]=r)}return e}const RF=[...Ey].reverse(),AF=Ey.length;function _F(t){return e=>Promise.all(e.map(({animation:n,options:i})=>kF(t,n,i)))}function PF(t){let e=_F(t),n=pC(),i=!0;const r=d=>(f,m)=>{const p=zo(t,m,d==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:v,transitionEnd:b,...w}=p;f={...f,...w,...b}}return f};function a(d){e=d(t)}function c(d){const{props:f}=t,m=V_(t.parent)||{},p=[],v=new Set;let b={},w=1/0;for(let R=0;R<AF;R++){const k=RF[R],N=n[k],O=f[k]!==void 0?f[k]:m[k],I=Wl(O),D=k===d?N.isActive:null;D===!1&&(w=R);let j=O===m[k]&&O!==f[k]&&I;if(j&&i&&t.manuallyAnimateOnMount&&(j=!1),N.protectedKeys={...b},!N.isActive&&D===null||!O&&!N.prevProp||th(O)||typeof O=="boolean")continue;const H=DF(N.prevProp,O);let z=H||k===d&&N.isActive&&!j&&I||R>w&&I,G=!1;const ie=Array.isArray(O)?O:[O];let re=ie.reduce(r(k),{});D===!1&&(re={});const{prevResolvedValues:de={}}=N,Ee={...de,...re},Ae=se=>{z=!0,v.has(se)&&(G=!0,v.delete(se)),N.needsAnimating[se]=!0;const J=t.getValue(se);J&&(J.liveStyle=!1)};for(const se in Ee){const J=re[se],_e=de[se];if(b.hasOwnProperty(se))continue;let V=!1;$v(J)&&$v(_e)?V=!F_(J,_e):V=J!==_e,V?J!=null?Ae(se):v.add(se):J!==void 0&&v.has(se)?Ae(se):N.protectedKeys[se]=!0}N.prevProp=O,N.prevResolvedValues=re,N.isActive&&(b={...b,...re}),i&&t.blockInitialAnimation&&(z=!1);const Me=j&&H;z&&(!Me||G)&&p.push(...ie.map(se=>{const J={type:k};if(typeof se=="string"&&i&&!Me&&t.manuallyAnimateOnMount&&t.parent){const{parent:_e}=t,V=zo(_e,se);if(_e.enteringChildren&&V){const{delayChildren:Q}=V.transition||{};J.delay=B_(_e.enteringChildren,t,Q)}}return{animation:se,options:J}}))}if(v.size){const R={};if(typeof f.initial!="boolean"){const k=zo(t,Array.isArray(f.initial)?f.initial[0]:f.initial);k&&k.transition&&(R.transition=k.transition)}v.forEach(k=>{const N=t.getBaseTarget(k),O=t.getValue(k);O&&(O.liveStyle=!0),R[k]=N??null}),p.push({animation:R})}let S=!!p.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(p):Promise.resolve()}function l(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(d,f)),n[d].isActive=f;const m=c(d);for(const p in n)n[p].protectedKeys={};return m}return{animateChanges:c,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=pC(),i=!0}}}function DF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!F_(e,t):!1}function la(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function pC(){return{animate:la(!0),whileInView:la(),whileHover:la(),whileTap:la(),whileDrag:la(),whileFocus:la(),exit:la()}}class Fs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NF extends Fs{constructor(e){super(e),e.animationState||(e.animationState=PF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();th(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let MF=0;class OF extends Fs{constructor(){super(...arguments),this.id=MF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const IF={animation:{Feature:NF},exit:{Feature:OF}};function Xl(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function uu(t){return{point:{x:t.pageX,y:t.pageY}}}const UF=t=>e=>Cy(e)&&t(e,uu(e));function Ll(t,e,n,i){return Xl(t,e,UF(n),i)}const z_=1e-4,LF=1-z_,jF=1+z_,H_=.01,BF=0-H_,FF=0+H_;function Ln(t){return t.max-t.min}function VF(t,e,n){return Math.abs(t-e)<=n}function gC(t,e,n,i=.5){t.origin=i,t.originPoint=Bt(e.min,e.max,t.origin),t.scale=Ln(n)/Ln(e),t.translate=Bt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=LF&&t.scale<=jF||isNaN(t.scale))&&(t.scale=1),(t.translate>=BF&&t.translate<=FF||isNaN(t.translate))&&(t.translate=0)}function jl(t,e,n,i){gC(t.x,e.x,n.x,i?i.originX:void 0),gC(t.y,e.y,n.y,i?i.originY:void 0)}function vC(t,e,n){t.min=n.min+e.min,t.max=t.min+Ln(e)}function zF(t,e,n){vC(t.x,e.x,n.x),vC(t.y,e.y,n.y)}function yC(t,e,n){t.min=e.min-n.min,t.max=t.min+Ln(e)}function Bl(t,e,n){yC(t.x,e.x,n.x),yC(t.y,e.y,n.y)}function Ti(t){return[t("x"),t("y")]}const q_=({current:t})=>t?t.ownerDocument.defaultView:null,bC=(t,e)=>Math.abs(t-e);function HF(t,e){const n=bC(t.x,e.x),i=bC(t.y,e.y);return Math.sqrt(n**2+i**2)}class K_{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=ug(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=HF(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:S}=v,{timestamp:R}=Rn;this.history.push({...S,timestamp:R});const{onStart:k,onMove:N}=this.handlers;b||(k&&k(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=lg(b,this.transformPagePoint),It.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:w,onSessionEnd:S,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=ug(v.type==="pointercancel"?this.lastMoveEventInfo:lg(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,k),S&&S(v,k)},!Cy(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=r||window;const l=uu(e),d=lg(l,this.transformPagePoint),{point:f}=d,{timestamp:m}=Rn;this.history=[{...f,timestamp:m}];const{onSessionStart:p}=n;p&&p(e,ug(d,this.history)),this.removeListeners=ou(Ll(this.contextWindow,"pointermove",this.handlePointerMove),Ll(this.contextWindow,"pointerup",this.handlePointerUp),Ll(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ns(this.updatePoint)}}function lg(t,e){return e?{point:e(t.point)}:t}function SC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ug({point:t},e){return{point:t,delta:SC(t,G_(e)),offset:SC(t,qF(e)),velocity:KF(e,.1)}}function qF(t){return t[0]}function G_(t){return t[t.length-1]}function KF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=G_(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>nr(e)));)n--;if(!i)return{x:0,y:0};const a=ir(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const c={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function GF(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Bt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Bt(n,t,i.max):Math.min(t,n)),t}function TC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function YF(t,{top:e,left:n,bottom:i,right:r}){return{x:TC(t.x,n,r),y:TC(t.y,e,i)}}function xC(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function WF(t,e){return{x:xC(t.x,e.x),y:xC(t.y,e.y)}}function $F(t,e){let n=.5;const i=Ln(t),r=Ln(e);return r>i?n=Kl(e.min,e.max-i,t.min):i>r&&(n=Kl(t.min,t.max-r,e.min)),zr(0,1,n)}function XF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Jv=.35;function ZF(t=Jv){return t===!1?t=0:t===!0&&(t=Jv),{x:wC(t,"left","right"),y:wC(t,"top","bottom")}}function wC(t,e,n){return{min:CC(t,e),max:CC(t,n)}}function CC(t,e){return typeof t=="number"?t:t[e]||0}const JF=new WeakMap;class QF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(uu(p).point)},c=(p,v)=>{const{drag:b,dragPropagation:w,onDragStart:S}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=o2(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ti(k=>{let N=this.getAxisMotionValue(k).get()||0;if(rr.test(N)){const{projection:O}=this.visualElement;if(O&&O.layout){const I=O.layout.layoutBox[k];I&&(N=Ln(I)*(parseFloat(N)/100))}}this.originPoint[k]=N}),S&&It.postRender(()=>S(p,v)),Xv(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},l=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:S,onDrag:R}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:k}=v;if(w&&this.currentDirection===null){this.currentDirection=eV(k),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,k),this.updateAxis("y",v.point,k),this.visualElement.render(),R&&R(p,v)},d=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v,this.stop(p,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Ti(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new K_(e,{onSessionStart:a,onStart:c,onMove:l,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:i,contextWindow:q_(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!i)return;const{velocity:c}=r;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&It.postRender(()=>l(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Od(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=GF(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&No(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=YF(i.layoutBox,e):this.constraints=!1,this.elastic=ZF(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ti(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=XF(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!No(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=tF(i,r.root,this.visualElement.getTransformPagePoint());let c=WF(r.layout.layoutBox,a);if(n){const l=n(J2(c));this.hasMutatedConstraints=!!l,l&&(c=__(l))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},f=Ti(m=>{if(!Od(m,n,this.currentDirection))return;let p=d&&d[m]||{};c&&(p={min:0,max:0});const v=r?200:1e6,b=r?40:1e7,w={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(m,w)});return Promise.all(f).then(l)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Xv(this.visualElement,e),i.start(Oy(e,i,0,n,this.visualElement,!1))}stopAnimation(){Ti(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ti(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ti(n=>{const{drag:i}=this.getProps();if(!Od(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(n);if(r&&r.layout){const{min:c,max:l}=r.layout.layoutBox[n];a.set(e[n]-Bt(c,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!No(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ti(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const d=l.get();r[c]=$F({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ti(c=>{if(!Od(c,e,null))return;const l=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];l.set(Bt(d,f,r[c]))})}addListeners(){if(!this.visualElement.current)return;JF.set(this.visualElement,this);const e=this.visualElement.current,n=Ll(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();No(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),It.read(i);const c=Xl(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ti(m=>{const p=this.getAxisMotionValue(m);p&&(this.originPoint[m]+=d[m].translate,p.set(p.get()+d[m].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:c=Jv,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:c,dragMomentum:l}}}function Od(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function eV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class tV extends Fs{constructor(e){super(e),this.removeGroupControls=Ci,this.removeListeners=Ci,this.controls=new QF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ci}unmount(){this.removeGroupControls(),this.removeListeners()}}const kC=t=>(e,n)=>{t&&It.postRender(()=>t(e,n))};class nV extends Fs{constructor(){super(...arguments),this.removePointerDownListener=Ci}onPointerDown(e){this.session=new K_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:q_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:kC(e),onStart:kC(n),onMove:i,onEnd:(a,c)=>{delete this.session,r&&It.postRender(()=>r(a,c))}}}mount(){this.removePointerDownListener=Ll(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function EC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(He.test(t))t=parseFloat(t);else return t;const n=EC(t,e.target.x),i=EC(t,e.target.y);return`${n}% ${i}%`}},iV={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Ms.parse(t);if(r.length>5)return i;const a=Ms.createTransformer(t),c=typeof r[0]!="number"?1:0,l=n.x.scale*e.x,d=n.y.scale*e.y;r[0+c]/=l,r[1+c]/=d;const f=Bt(l,d,.5);return typeof r[2+c]=="number"&&(r[2+c]/=f),typeof r[3+c]=="number"&&(r[3+c]/=f),a(r)}};let dg=!1;class rV extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;E2(sV),a&&(n.group&&n.group.add(a),i&&i.register&&r&&i.register(a),dg&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),hf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:a}=this.props,{projection:c}=i;return c&&(c.isPresent=a,dg=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||It.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;dg=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Y_(t){const[e,n]=p_(),i=T.useContext(ty);return x.jsx(rV,{...t,layoutGroup:i,switchLayoutGroup:T.useContext(R_),isPresent:e,safeToRemove:n})}const sV={borderRadius:{...Cl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cl,borderTopRightRadius:Cl,borderBottomLeftRadius:Cl,borderBottomRightRadius:Cl,boxShadow:iV};function aV(t,e,n){const i=Nn(t)?t:Wo(t);return i.start(Oy("",i,e,n)),i.animation}const oV=(t,e)=>t.depth-e.depth;class cV{constructor(){this.children=[],this.isDirty=!1}add(e){ry(this.children,e),this.isDirty=!0}remove(e){sy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oV),this.isDirty=!1,this.children.forEach(e)}}function lV(t,e){const n=Yn.now(),i=({timestamp:r})=>{const a=r-n;a>=e&&(Ns(i),t(a-e))};return It.setup(i,!0),()=>Ns(i)}const W_=["TopLeft","TopRight","BottomLeft","BottomRight"],uV=W_.length,RC=t=>typeof t=="string"?parseFloat(t):t,AC=t=>typeof t=="number"||He.test(t);function dV(t,e,n,i,r,a){r?(t.opacity=Bt(0,n.opacity??1,fV(i)),t.opacityExit=Bt(e.opacity??1,0,hV(i))):a&&(t.opacity=Bt(e.opacity??1,n.opacity??1,i));for(let c=0;c<uV;c++){const l=`border${W_[c]}Radius`;let d=_C(e,l),f=_C(n,l);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||AC(d)===AC(f)?(t[l]=Math.max(Bt(RC(d),RC(f),i),0),(rr.test(f)||rr.test(d))&&(t[l]+="%")):t[l]=f}(e.rotate||n.rotate)&&(t.rotate=Bt(e.rotate||0,n.rotate||0,i))}function _C(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const fV=$_(0,.5,IA),hV=$_(.5,.95,Ci);function $_(t,e,n){return i=>i<t?0:i>e?1:n(Kl(t,e,i))}function PC(t,e){t.min=e.min,t.max=e.max}function Si(t,e){PC(t.x,e.x),PC(t.y,e.y)}function DC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function NC(t,e,n,i,r){return t-=e,t=If(t,1/n,i),r!==void 0&&(t=If(t,1/r,i)),t}function mV(t,e=0,n=1,i=.5,r,a=t,c=t){if(rr.test(e)&&(e=parseFloat(e),e=Bt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let l=Bt(a.min,a.max,i);t===a&&(l-=e),t.min=NC(t.min,e,n,l,r),t.max=NC(t.max,e,n,l,r)}function MC(t,e,[n,i,r],a,c){mV(t,e[n],e[i],e[r],e.scale,a,c)}const pV=["x","scaleX","originX"],gV=["y","scaleY","originY"];function OC(t,e,n,i){MC(t.x,e,pV,n?n.x:void 0,i?i.x:void 0),MC(t.y,e,gV,n?n.y:void 0,i?i.y:void 0)}function IC(t){return t.translate===0&&t.scale===1}function X_(t){return IC(t.x)&&IC(t.y)}function UC(t,e){return t.min===e.min&&t.max===e.max}function vV(t,e){return UC(t.x,e.x)&&UC(t.y,e.y)}function LC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Z_(t,e){return LC(t.x,e.x)&&LC(t.y,e.y)}function jC(t){return Ln(t.x)/Ln(t.y)}function BC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class yV{constructor(){this.members=[]}add(e){ry(this.members,e),e.scheduleRender()}remove(e){if(sy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bV(t,e,n){let i="";const r=t.x.translate/e.x,a=t.y.translate/e.y,c=n?.z||0;if((r||a||c)&&(i=`translate3d(${r}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:p,rotateY:v,skewX:b,skewY:w}=n;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),p&&(i+=`rotateX(${p}deg) `),v&&(i+=`rotateY(${v}deg) `),b&&(i+=`skewX(${b}deg) `),w&&(i+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,d=t.y.scale*e.y;return(l!==1||d!==1)&&(i+=`scale(${l}, ${d})`),i||"none"}const fg=["","X","Y","Z"],SV=1e3;let TV=0;function hg(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function J_(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=L_(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",It,!(r||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&J_(i)}function Q_({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(c={},l=e?.()){this.id=TV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(CV),this.nodes.forEach(AV),this.nodes.forEach(_V),this.nodes.forEach(kV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new cV)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new cy),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const d=this.eventHandlers.get(c);d&&d.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=m_(c)&&!h2(c),this.instance=c;const{layoutId:l,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),t){let m,p=0;const v=()=>this.root.updateBlockedByResize=!1;It.read(()=>{p=window.innerWidth}),t(c,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,m&&m(),m=lV(v,250),hf.hasAnimatedSinceResize&&(hf.hasAnimatedSinceResize=!1,this.nodes.forEach(zC)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||OV,{onLayoutAnimationStart:S,onLayoutAnimationComplete:R}=f.getProps(),k=!this.targetLayout||!Z_(this.targetLayout,b),N=!p&&v;if(this.options.layoutRoot||this.resumeFrom||N||p&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...Ty(w,"layout"),onPlay:S,onComplete:R};(f.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(m,N)}else p||zC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ns(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PV),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&J_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const p=this.path[m];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(FC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(VC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(RV),this.nodes.forEach(xV),this.nodes.forEach(wV)):this.nodes.forEach(VC),this.clearAllSnapshots();const l=Yn.now();Rn.delta=zr(0,1e3/60,l-Rn.timestamp),Rn.timestamp=l,Rn.isProcessing=!0,tg.update.process(Rn),tg.preRender.process(Rn),tg.render.process(Rn),Rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(EV),this.sharedNodes.forEach(DV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,It.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){It.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ln(this.snapshot.measuredBox.x)&&!Ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!X_(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;c&&this.instance&&(l||fa(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return c&&(d=this.removeTransform(d)),IV(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Jt();const l=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(UV))){const{scroll:f}=this.root;f&&(Mo(l.x,f.offset.x),Mo(l.y,f.offset.y))}return l}removeElementScroll(c){const l=Jt();if(Si(l,c),this.scroll?.wasRoot)return l;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:p}=f;f!==this.root&&m&&p.layoutScroll&&(m.wasRoot&&Si(l,c),Mo(l.x,m.offset.x),Mo(l.y,m.offset.y))}return l}applyTransform(c,l=!1){const d=Jt();Si(d,c);for(let f=0;f<this.path.length;f++){const m=this.path[f];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Oo(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),fa(m.latestValues)&&Oo(d,m.latestValues)}return fa(this.latestValues)&&Oo(d,this.latestValues),d}removeTransform(c){const l=Jt();Si(l,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!fa(f.latestValues))continue;Gv(f.latestValues)&&f.updateSnapshot();const m=Jt(),p=f.measurePageBox();Si(m,p),OC(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return fa(this.latestValues)&&OC(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:p}=this.options;if(!(!this.layout||!(m||p))){if(this.resolvedRelativeTargetAt=Rn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jt(),this.relativeTargetOrigin=Jt(),Bl(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Jt(),this.targetWithTransforms=Jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Si(this.target,this.layout.layoutBox),D_(this.target,this.targetDelta)):Si(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Jt(),this.relativeTargetOrigin=Jt(),Bl(this.relativeTargetOrigin,this.target,v.target),Si(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Gv(this.parent.latestValues)||P_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),l=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Rn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;Si(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;eF(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Jt());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DC(this.prevProjectionDelta.x,this.projectionDelta.x),DC(this.prevProjectionDelta.y,this.projectionDelta.y)),jl(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!BC(this.projectionDelta.x,this.prevProjectionDelta.x)||!BC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Io(),this.projectionDelta=Io(),this.projectionDeltaWithTransform=Io()}setAnimationOrigin(c,l=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},p=Io();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Jt(),b=d?d.source:void 0,w=this.layout?this.layout.source:void 0,S=b!==w,R=this.getStack(),k=!R||R.members.length<=1,N=!!(S&&!k&&this.options.crossfade===!0&&!this.path.some(MV));this.animationProgress=0;let O;this.mixTargetDelta=I=>{const D=I/1e3;HC(p.x,c.x,D),HC(p.y,c.y,D),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bl(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),NV(this.relativeTarget,this.relativeTargetOrigin,v,D),O&&vV(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Jt()),Si(O,this.relativeTarget)),S&&(this.animationValues=m,dV(m,f,this.latestValues,D,N,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ns(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=It.update(()=>{hf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wo(0)),this.currentAnimation=aV(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),c.onUpdate&&c.onUpdate(l)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:d,layout:f,latestValues:m}=c;if(!(!l||!d||!f)){if(this!==c&&this.layout&&f&&eP(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Jt();const p=Ln(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+p;const v=Ln(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+v}Si(l,d),Oo(l,m),jl(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new yV),this.sharedNodes.get(c).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const f={};d.z&&hg("z",c,f,this.animationValues);for(let m=0;m<fg.length;m++)hg(`rotate${fg[m]}`,c,f,this.animationValues),hg(`skew${fg[m]}`,c,f,this.animationValues);c.render();for(const m in f)c.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=ff(l?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=ff(l?.pointerEvents)||""),this.hasProjected&&!fa(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=bV(this.projectionDeltaWithTransform,this.treeScale,m);d&&(p=d(m,p)),c.transform=p;const{x:v,y:b}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?c.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in $l){if(m[w]===void 0)continue;const{correct:S,applyTo:R,isCSSVariable:k}=$l[w],N=p==="none"?m[w]:S(m[w],f);if(R){const O=R.length;for(let I=0;I<O;I++)c[R[I]]=N}else k?this.options.visualElement.renderState.vars[w]=N:c[w]=N}this.options.layoutId&&(c.pointerEvents=f===this?ff(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(FC),this.root.sharedNodes.clear()}}}function xV(t){t.updateLayout()}function wV(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,a=e.source!==t.layout.source;r==="size"?Ti(m=>{const p=a?e.measuredBox[m]:e.layoutBox[m],v=Ln(p);p.min=n[m].min,p.max=p.min+v}):eP(r,e.layoutBox,n)&&Ti(m=>{const p=a?e.measuredBox[m]:e.layoutBox[m],v=Ln(n[m]);p.max=p.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+v)});const c=Io();jl(c,n,e.layoutBox);const l=Io();a?jl(l,t.applyTransform(i,!0),e.measuredBox):jl(l,n,e.layoutBox);const d=!X_(c);let f=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:v}=m;if(p&&v){const b=Jt();Bl(b,e.layoutBox,p.layoutBox);const w=Jt();Bl(w,n,v.layoutBox),Z_(b,w)||(f=!0),m.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=b,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function CV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function kV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function EV(t){t.clearSnapshot()}function FC(t){t.clearMeasurements()}function VC(t){t.isLayoutDirty=!1}function RV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function zC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function AV(t){t.resolveTargetDelta()}function _V(t){t.calcProjection()}function PV(t){t.resetSkewAndRotation()}function DV(t){t.removeLeadSnapshot()}function HC(t,e,n){t.translate=Bt(e.translate,0,n),t.scale=Bt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function qC(t,e,n,i){t.min=Bt(e.min,n.min,i),t.max=Bt(e.max,n.max,i)}function NV(t,e,n,i){qC(t.x,e.x,n.x,i),qC(t.y,e.y,n.y,i)}function MV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const OV={duration:.45,ease:[.4,0,.1,1]},KC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),GC=KC("applewebkit/")&&!KC("chrome/")?Math.round:Ci;function YC(t){t.min=GC(t.min),t.max=GC(t.max)}function IV(t){YC(t.x),YC(t.y)}function eP(t,e,n){return t==="position"||t==="preserve-aspect"&&!VF(jC(e),jC(n),.2)}function UV(t){return t!==t.root&&t.scroll?.wasRoot}const LV=Q_({attachResizeListener:(t,e)=>Xl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),mg={current:void 0},tP=Q_({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!mg.current){const t=new LV({});t.mount(window),t.setOptions({layoutScroll:!0}),mg.current=t}return mg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),jV={pan:{Feature:nV},drag:{Feature:tV,ProjectionNode:tP,MeasureLayout:Y_}};function WC(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,a=i[r];a&&It.postRender(()=>a(e,uu(e)))}class BV extends Fs{mount(){const{current:e}=this.node;e&&(this.unmount=c2(e,(n,i)=>(WC(this.node,i,"Start"),r=>WC(this.node,r,"End"))))}unmount(){}}class FV extends Fs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ou(Xl(this.node.current,"focus",()=>this.onFocus()),Xl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $C(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),a=i[r];a&&It.postRender(()=>a(e,uu(e)))}class VV extends Fs{mount(){const{current:e}=this.node;e&&(this.unmount=f2(e,(n,i)=>($C(this.node,i,"Start"),(r,{success:a})=>$C(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qv=new WeakMap,pg=new WeakMap,zV=t=>{const e=Qv.get(t.target);e&&e(t)},HV=t=>{t.forEach(zV)};function qV({root:t,...e}){const n=t||document;pg.has(n)||pg.set(n,{});const i=pg.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(HV,{root:t,...e})),i[r]}function KV(t,e,n){const i=qV(e);return Qv.set(t,n),i.observe(t),()=>{Qv.delete(t),i.unobserve(t)}}const GV={some:0,all:1};class YV extends Fs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:GV[r]},l=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:p}=this.node.getProps(),v=f?m:p;v&&v(d)};return KV(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(WV(e,n))&&this.startObserver()}unmount(){}}function WV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $V={inView:{Feature:YV},tap:{Feature:VV},focus:{Feature:FV},hover:{Feature:BV}},XV={layout:{ProjectionNode:tP,MeasureLayout:Y_}},ZV={...IF,...$V,...jV,...XV},pt=Z2(ZV,uF);var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function nP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e0={exports:{}},JV=e0.exports,XC;function QV(){return XC||(XC=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(JV,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],a={},c=null;function l(S,R){var k=S[R];if(typeof k.bind=="function")return k.bind(S);try{return Function.prototype.bind.call(k,S)}catch{return function(){return Function.prototype.apply.apply(k,[S,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(S){return S==="debug"&&(S="log"),typeof console===n?!1:S==="trace"&&i?d:console[S]!==void 0?l(console,S):console.log!==void 0?l(console,"log"):e}function m(){for(var S=this.getLevel(),R=0;R<r.length;R++){var k=r[R];this[k]=R<S?e:this.methodFactory(k,S,this.name)}if(this.log=this.debug,typeof console===n&&S<this.levels.SILENT)return"No console available for logging"}function p(S){return function(){typeof console!==n&&(m.call(this),this[S].apply(this,arguments))}}function v(S,R,k){return f(S)||p.apply(this,arguments)}function b(S,R){var k=this,N,O,I,D="loglevel";typeof S=="string"?D+=":"+S:typeof S=="symbol"&&(D=void 0);function j(re){var de=(r[re]||"silent").toUpperCase();if(!(typeof window===n||!D)){try{window.localStorage[D]=de;return}catch{}try{window.document.cookie=encodeURIComponent(D)+"="+de+";"}catch{}}}function H(){var re;if(!(typeof window===n||!D)){try{re=window.localStorage[D]}catch{}if(typeof re===n)try{var de=window.document.cookie,Ee=encodeURIComponent(D),Ae=de.indexOf(Ee+"=");Ae!==-1&&(re=/^([^;]+)/.exec(de.slice(Ae+Ee.length+1))[1])}catch{}return k.levels[re]===void 0&&(re=void 0),re}}function z(){if(!(typeof window===n||!D)){try{window.localStorage.removeItem(D)}catch{}try{window.document.cookie=encodeURIComponent(D)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function G(re){var de=re;if(typeof de=="string"&&k.levels[de.toUpperCase()]!==void 0&&(de=k.levels[de.toUpperCase()]),typeof de=="number"&&de>=0&&de<=k.levels.SILENT)return de;throw new TypeError("log.setLevel() called with invalid level: "+re)}k.name=S,k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.methodFactory=R||v,k.getLevel=function(){return I??O??N},k.setLevel=function(re,de){return I=G(re),de!==!1&&j(I),m.call(k)},k.setDefaultLevel=function(re){O=G(re),H()||k.setLevel(re,!1)},k.resetLevel=function(){I=null,z(),m.call(k)},k.enableAll=function(re){k.setLevel(k.levels.TRACE,re)},k.disableAll=function(re){k.setLevel(k.levels.SILENT,re)},k.rebuild=function(){if(c!==k&&(N=G(c.getLevel())),m.call(k),c===k)for(var re in a)a[re].rebuild()},N=G(c?c.getLevel():"WARN");var ie=H();ie!=null&&(I=G(ie)),m.call(k)}c=new b,c.getLogger=function(S){if(typeof S!="symbol"&&typeof S!="string"||S==="")throw new TypeError("You must supply a name when creating a logger.");var R=a[S];return R||(R=a[S]=new b(S,c.methodFactory)),R};var w=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=w),c},c.getLoggers=function(){return a},c.default=c,c})}(e0)),e0.exports}var e9=QV();const t9=nP(e9);var t0=function(t,e){return t0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},t0(t,e)};function Wr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function n9(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,[])).next())})}function iP(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=l(0),c.throw=l(1),c.return=l(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(m){return d([f,m])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(n=0)),n;)try{if(i=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],r=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Xo(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zl(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,a=[],c;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(l){c={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return a}function Jl(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}function Ho(t){return this instanceof Ho?(this.v=t,this):new Ho(t)}function i9(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(b){return function(w){return Promise.resolve(w).then(b,p)}}function l(b,w){i[b]&&(r[b]=function(S){return new Promise(function(R,k){a.push([b,S,R,k])>1||d(b,S)})},w&&(r[b]=w(r[b])))}function d(b,w){try{f(i[b](w))}catch(S){v(a[0][3],S)}}function f(b){b.value instanceof Ho?Promise.resolve(b.value.v).then(m,p):v(a[0][2],b)}function m(b){d("next",b)}function p(b){d("throw",b)}function v(b,w){b(w),a.shift(),a.length&&d(a[0][0],a[0][1])}}function r9(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Xo=="function"?Xo(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}function ln(t){return typeof t=="function"}function Iy(t){var e=function(i){Error.call(i),i.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gg=Iy(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Uf(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var du=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,i,r,a;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=Xo(c),d=l.next();!d.done;d=l.next()){var f=d.value;f.remove(this)}}catch(S){e={error:S}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}else c.remove(this);var m=this.initialTeardown;if(ln(m))try{m()}catch(S){a=S instanceof gg?S.errors:[S]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var v=Xo(p),b=v.next();!b.done;b=v.next()){var w=b.value;try{ZC(w)}catch(S){a=a??[],S instanceof gg?a=Jl(Jl([],Zl(a)),Zl(S.errors)):a.push(S)}}}catch(S){i={error:S}}finally{try{b&&!b.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}if(a)throw new gg(a)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)ZC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Uf(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Uf(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),rP=du.EMPTY;function sP(t){return t instanceof du||t&&"closed"in t&&ln(t.remove)&&ln(t.add)&&ln(t.unsubscribe)}function ZC(t){ln(t)?t():t.unsubscribe()}var s9={Promise:void 0},a9={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,Jl([t,e],Zl(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function aP(t){a9.setTimeout(function(){throw t})}function n0(){}function mf(t){t()}var Uy=function(t){Wr(e,t);function e(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,sP(n)&&n.add(i)):i.destination=l9,i}return e.create=function(n,i,r){return new Ql(n,i,r)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(du),o9=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(i){Ud(i)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(i){Ud(i)}else Ud(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Ud(n)}},t}(),Ql=function(t){Wr(e,t);function e(n,i,r){var a=t.call(this)||this,c;return ln(n)||!n?c={next:n??void 0,error:i??void 0,complete:r??void 0}:c=n,a.destination=new o9(c),a}return e}(Uy);function Ud(t){aP(t)}function c9(t){throw t}var l9={closed:!0,next:n0,error:c9,complete:n0},Ly=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function jy(t){return t}function u9(t){return t.length===0?jy:t.length===1?t[0]:function(e){return t.reduce(function(n,i){return i(n)},e)}}var tn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,i){var r=this,a=f9(e)?e:new Ql(e,n,i);return mf(function(){var c=r,l=c.operator,d=c.source;a.add(l?l.call(a,d):d?r._subscribe(a):r._trySubscribe(a))}),a},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var i=this;return n=JC(n),new n(function(r,a){var c=new Ql({next:function(l){try{e(l)}catch(d){a(d),c.unsubscribe()}},error:a,complete:r});i.subscribe(c)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Ly]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return u9(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=JC(e),new e(function(i,r){var a;n.subscribe(function(c){return a=c},function(c){return r(c)},function(){return i(a)})})},t.create=function(e){return new t(e)},t}();function JC(t){var e;return(e=t??s9.Promise)!==null&&e!==void 0?e:Promise}function d9(t){return t&&ln(t.next)&&ln(t.error)&&ln(t.complete)}function f9(t){return t&&t instanceof Uy||d9(t)&&sP(t)}function h9(t){return ln(t?.lift)}function dr(t){return function(e){if(h9(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Os(t,e,n,i,r){return new m9(t,e,n,i,r)}var m9=function(t){Wr(e,t);function e(n,i,r,a,c,l){var d=t.call(this,n)||this;return d.onFinalize=c,d.shouldUnsubscribe=l,d._next=i?function(f){try{i(f)}catch(m){n.error(m)}}:t.prototype._next,d._error=a?function(f){try{a(f)}catch(m){n.error(m)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=r?function(){try{r()}catch(f){n.error(f)}finally{this.unsubscribe()}}:t.prototype._complete,d}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Uy),p9=Iy(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),qr=function(t){Wr(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var i=new QC(this,this);return i.operator=n,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new p9},e.prototype.next=function(n){var i=this;mf(function(){var r,a;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var c=Xo(i.currentObservers),l=c.next();!l.done;l=c.next()){var d=l.value;d.next(n)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}}})},e.prototype.error=function(n){var i=this;mf(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var r=i.observers;r.length;)r.shift().error(n)}})},e.prototype.complete=function(){var n=this;mf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var i=this,r=this,a=r.hasError,c=r.isStopped,l=r.observers;return a||c?rP:(this.currentObservers=null,l.push(n),new du(function(){i.currentObservers=null,Uf(l,n)}))},e.prototype._checkFinalizedStatuses=function(n){var i=this,r=i.hasError,a=i.thrownError,c=i.isStopped;r?n.error(a):c&&n.complete()},e.prototype.asObservable=function(){var n=new tn;return n.source=this,n},e.create=function(n,i){return new QC(n,i)},e}(tn),QC=function(t){Wr(e,t);function e(n,i){var r=t.call(this)||this;return r.destination=n,r.source=i,r}return e.prototype.next=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.next)===null||r===void 0||r.call(i,n)},e.prototype.error=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.error)===null||r===void 0||r.call(i,n)},e.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},e.prototype._subscribe=function(n){var i,r;return(r=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&r!==void 0?r:rP},e}(qr),oP=function(t){Wr(e,t);function e(n){var i=t.call(this)||this;return i._value=n,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var i=t.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},e.prototype.getValue=function(){var n=this,i=n.hasError,r=n.thrownError,a=n._value;if(i)throw r;return this._throwIfClosed(),a},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(qr),g9={now:function(){return Date.now()}},v9=function(t){Wr(e,t);function e(n,i){return t.call(this)||this}return e.prototype.schedule=function(n,i){return this},e}(du),ek={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,Jl([t,e],Zl(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},y9=function(t){Wr(e,t);function e(n,i){var r=t.call(this,n,i)||this;return r.scheduler=n,r.work=i,r.pending=!1,r}return e.prototype.schedule=function(n,i){var r;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var a=this.id,c=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(c,a,i)),this.pending=!0,this.delay=i,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(c,this.id,i),this},e.prototype.requestAsyncId=function(n,i,r){return r===void 0&&(r=0),ek.setInterval(n.flush.bind(n,this),r)},e.prototype.recycleAsyncId=function(n,i,r){if(r===void 0&&(r=0),r!=null&&this.delay===r&&this.pending===!1)return i;i!=null&&ek.clearInterval(i)},e.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(n,i);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,i){var r=!1,a;try{this.work(n)}catch(c){r=!0,a=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,r=n.scheduler,a=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Uf(a,this),i!=null&&(this.id=this.recycleAsyncId(r,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(v9),tk=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(i,n)},t.now=g9.now,t}(),b9=function(t){Wr(e,t);function e(n,i){i===void 0&&(i=tk.now);var r=t.call(this,n,i)||this;return r.actions=[],r._active=!1,r}return e.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,r){for(;n=i.shift();)n.unsubscribe();throw r}},e}(tk);new b9(y9);function S9(t){return t&&ln(t.schedule)}function T9(t){return t[t.length-1]}function cP(t){return S9(T9(t))?t.pop():void 0}var lP=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function uP(t){return ln(t?.then)}function dP(t){return ln(t[Ly])}function fP(t){return Symbol.asyncIterator&&ln(t?.[Symbol.asyncIterator])}function hP(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function x9(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var mP=x9();function pP(t){return ln(t?.[mP])}function gP(t){return i9(this,arguments,function(){var e,n,i,r;return iP(this,function(a){switch(a.label){case 0:e=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Ho(e.read())];case 3:return n=a.sent(),i=n.value,r=n.done,r?[4,Ho(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Ho(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function vP(t){return ln(t?.getReader)}function Vs(t){if(t instanceof tn)return t;if(t!=null){if(dP(t))return w9(t);if(lP(t))return C9(t);if(uP(t))return k9(t);if(fP(t))return yP(t);if(pP(t))return E9(t);if(vP(t))return R9(t)}throw hP(t)}function w9(t){return new tn(function(e){var n=t[Ly]();if(ln(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function C9(t){return new tn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function k9(t){return new tn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,aP)})}function E9(t){return new tn(function(e){var n,i;try{for(var r=Xo(t),a=r.next();!a.done;a=r.next()){var c=a.value;if(e.next(c),e.closed)return}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}e.complete()})}function yP(t){return new tn(function(e){A9(t,e).catch(function(n){return e.error(n)})})}function R9(t){return yP(gP(t))}function A9(t,e){var n,i,r,a;return n9(this,void 0,void 0,function(){var c,l;return iP(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=r9(t),d.label=1;case 1:return[4,n.next()];case 2:if(i=d.sent(),!!i.done)return[3,4];if(c=i.value,e.next(c),e.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),r={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),i&&!i.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function ba(t,e,n,i,r){i===void 0&&(i=0),r===void 0&&(r=!1);var a=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function bP(t,e){return e===void 0&&(e=0),dr(function(n,i){n.subscribe(Os(i,function(r){return ba(i,t,function(){return i.next(r)},e)},function(){return ba(i,t,function(){return i.complete()},e)},function(r){return ba(i,t,function(){return i.error(r)},e)}))})}function SP(t,e){return e===void 0&&(e=0),dr(function(n,i){i.add(t.schedule(function(){return n.subscribe(i)},e))})}function _9(t,e){return Vs(t).pipe(SP(e),bP(e))}function P9(t,e){return Vs(t).pipe(SP(e),bP(e))}function D9(t,e){return new tn(function(n){var i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function N9(t,e){return new tn(function(n){var i;return ba(n,e,function(){i=t[mP](),ba(n,e,function(){var r,a,c;try{r=i.next(),a=r.value,c=r.done}catch(l){n.error(l);return}c?n.complete():n.next(a)},0,!0)}),function(){return ln(i?.return)&&i.return()}})}function TP(t,e){if(!t)throw new Error("Iterable cannot be null");return new tn(function(n){ba(n,e,function(){var i=t[Symbol.asyncIterator]();ba(n,e,function(){i.next().then(function(r){r.done?n.complete():n.next(r.value)})},0,!0)})})}function M9(t,e){return TP(gP(t),e)}function O9(t,e){if(t!=null){if(dP(t))return _9(t,e);if(lP(t))return D9(t,e);if(uP(t))return P9(t,e);if(fP(t))return TP(t,e);if(pP(t))return N9(t,e);if(vP(t))return M9(t,e)}throw hP(t)}function By(t,e){return e?O9(t,e):Vs(t)}Iy(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function Mn(t,e){return dr(function(n,i){var r=0;n.subscribe(Os(i,function(a){i.next(t.call(e,a,r++))}))})}function I9(t,e,n,i,r,a,c,l){var d=[],f=0,m=0,p=!1,v=function(){p&&!d.length&&!f&&e.complete()},b=function(S){return f<i?w(S):d.push(S)},w=function(S){f++;var R=!1;Vs(n(S,m++)).subscribe(Os(e,function(k){e.next(k)},function(){R=!0},void 0,function(){if(R)try{f--;for(var k=function(){var N=d.shift();c||w(N)};d.length&&f<i;)k();v()}catch(N){e.error(N)}}))};return t.subscribe(Os(e,b,function(){p=!0,v()})),function(){}}function xP(t,e,n){return n===void 0&&(n=1/0),ln(e)?xP(function(i,r){return Mn(function(a,c){return e(i,a,r,c)})(Vs(t(i,r)))},n):(typeof e=="number"&&(n=e),dr(function(i,r){return I9(i,r,t,n)}))}function U9(t){return xP(jy,t)}function L9(){return U9(1)}function i0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L9()(By(t,cP(t)))}function Fy(t,e){return dr(function(n,i){var r=0;n.subscribe(Os(i,function(a){return t.call(e,a,r++)&&i.next(a)}))})}function j9(t,e,n,i,r){return function(a,c){var l=n,d=e,f=0;a.subscribe(Os(c,function(m){var p=f++;d=l?t(d,m,p):(l=!0,m),c.next(d)},r))}}function r0(t,e){return dr(j9(t,e,arguments.length>=2,!0))}function B9(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new qr}:e,i=t.resetOnError,r=i===void 0?!0:i,a=t.resetOnComplete,c=a===void 0?!0:a,l=t.resetOnRefCountZero,d=l===void 0?!0:l;return function(f){var m,p,v,b=0,w=!1,S=!1,R=function(){p?.unsubscribe(),p=void 0},k=function(){R(),m=v=void 0,w=S=!1},N=function(){var O=m;k(),O?.unsubscribe()};return dr(function(O,I){b++,!S&&!w&&R();var D=v=v??n();I.add(function(){b--,b===0&&!S&&!w&&(p=vg(N,d))}),D.subscribe(I),!m&&b>0&&(m=new Ql({next:function(j){return D.next(j)},error:function(j){S=!0,R(),p=vg(k,r,j),D.error(j)},complete:function(){w=!0,R(),p=vg(k,c),D.complete()}}),Vs(O).subscribe(m))})(f)}}function vg(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(e===!0){t();return}if(e!==!1){var r=new Ql({next:function(){r.unsubscribe(),t()}});return Vs(e.apply(void 0,Jl([],Zl(n)))).subscribe(r)}}function fr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=cP(t);return dr(function(i,r){(n?i0(t,i,n):i0(t,i)).subscribe(r)})}function nk(t){return dr(function(e,n){Vs(t).subscribe(Os(n,function(){return n.complete()},n0)),!n.closed&&e.subscribe(n)})}function F9(t,e,n){var i=ln(t)||e||n?{next:t,error:e,complete:n}:t;return i?dr(function(r,a){var c;(c=i.subscribe)===null||c===void 0||c.call(i);var l=!0;r.subscribe(Os(a,function(d){var f;(f=i.next)===null||f===void 0||f.call(i,d),a.next(d)},function(){var d;l=!1,(d=i.complete)===null||d===void 0||d.call(i),a.complete()},function(d){var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,d),a.error(d)},function(){var d,f;l&&((d=i.unsubscribe)===null||d===void 0||d.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):jy}var V9=Object.defineProperty,z9=Object.defineProperties,H9=Object.getOwnPropertyDescriptors,ik=Object.getOwnPropertySymbols,q9=Object.prototype.hasOwnProperty,K9=Object.prototype.propertyIsEnumerable,rk=(t,e,n)=>e in t?V9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qi=(t,e)=>{for(var n in e||(e={}))q9.call(e,n)&&rk(t,n,e[n]);if(ik)for(var n of ik(e))K9.call(e,n)&&rk(t,n,e[n]);return t},ha=(t,e)=>z9(t,H9(e)),or=(t,e,n)=>new Promise((i,r)=>{var a=d=>{try{l(n.next(d))}catch(f){r(f)}},c=d=>{try{l(n.throw(d))}catch(f){r(f)}},l=d=>d.done?i(d.value):Promise.resolve(d.value).then(a,c);l((n=n.apply(t,e)).next())}),wP="lk";function Vy(t){return typeof t>"u"?!1:G9(t)||Y9(t)}function G9(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function Y9(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function W9(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function CP(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(W9(t))return`${t.participant.identity}_${t.source}_placeholder`;if(Vy(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}var $9=[fe.ConnectionStateChanged,fe.RoomMetadataChanged,fe.ActiveSpeakersChanged,fe.ConnectionQualityChanged,fe.ParticipantConnected,fe.ParticipantDisconnected,fe.ParticipantPermissionsChanged,fe.ParticipantMetadataChanged,fe.ParticipantNameChanged,fe.ParticipantAttributesChanged,fe.TrackMuted,fe.TrackUnmuted,fe.TrackPublished,fe.TrackUnpublished,fe.TrackStreamStateChanged,fe.TrackSubscriptionFailed,fe.TrackSubscriptionPermissionChanged,fe.TrackSubscriptionStatusChanged],kP=[...$9,fe.LocalTrackPublished,fe.LocalTrackUnpublished],X9=[ye.TrackPublished,ye.TrackUnpublished,ye.TrackMuted,ye.TrackUnmuted,ye.TrackStreamStateChanged,ye.TrackSubscribed,ye.TrackUnsubscribed,ye.TrackSubscriptionPermissionChanged,ye.TrackSubscriptionFailed,ye.LocalTrackPublished,ye.LocalTrackUnpublished],Z9=[ye.ConnectionQualityChanged,ye.IsSpeakingChanged,ye.ParticipantMetadataChanged,ye.ParticipantPermissionsChanged,ye.TrackMuted,ye.TrackUnmuted,ye.TrackPublished,ye.TrackUnpublished,ye.TrackStreamStateChanged,ye.TrackSubscriptionFailed,ye.TrackSubscriptionPermissionChanged,ye.TrackSubscriptionStatusChanged];[...Z9,ye.LocalTrackPublished,ye.LocalTrackUnpublished];var un=t9.getLogger("lk-components-js");un.setDefaultLevel("WARN");function J9(t,e){var n;return ha(Qi({},t),{receivedAtMediaTimestamp:(n=e.rtpTimestamp)!=null?n:0,receivedAt:e.timestamp})}function Q9(t,e,n){return[...t,...e].reduceRight((i,r)=>(i.find(a=>a.id===r.id)||i.unshift(r),i),[]).slice(0-n)}function EP(t){return typeof t=="object"}function RP(t){return Array.isArray(t)&&t.filter(EP).length>0}function fu(t){return`${wP}-${t}`}function e7(t){const e=s0(t),n=Hy(t.participant).pipe(Mn(()=>s0(t)),fr(e));return{className:fu(t.source===te.Source.Camera||t.source===te.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function s0(t){if(Vy(t))return t.publication;{const{source:e,name:n,participant:i}=t;if(e&&n)return i.getTrackPublications().find(r=>r.source===e&&r.trackName===n);if(n)return i.getTrackPublicationByName(n);if(e)return i.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function ih(t,...e){return new tn(n=>{const i=()=>{n.next(t)};return e.forEach(r=>{t.on(r,i)}),()=>{e.forEach(r=>{t.off(r,i)})}}).pipe(fr(t))}function zy(t,e){return new tn(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function t7(t){return zy(t,fe.ConnectionStateChanged).pipe(Mn(([e])=>e),fr(t.state))}function n7(t){return ih(t,fe.RoomMetadataChanged,fe.ConnectionStateChanged).pipe(Mn(e=>({name:e.name,metadata:e.metadata})))}function i7(t,e,n=!0){const i=new tn(a=>{Vr.getLocalDevices(t,n).then(c=>{a.next(c),a.complete()}).catch(c=>{e?.(c),a.next([]),a.complete()})}),r=new tn(a=>{var c;const l=()=>or(this,null,function*(){try{const d=yield Vr.getLocalDevices(t,n);a.next(d)}catch(d){e?.(d)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(c=navigator?.mediaDevices)==null||c.addEventListener("devicechange",l)}return()=>{var d;(d=navigator?.mediaDevices)==null||d.removeEventListener("devicechange",l)}});return i0(i,r)}function r7(t){return zy(t,fe.DataReceived)}function s7(t){return ih(t,fe.AudioPlaybackStatusChanged).pipe(Mn(e=>({canPlayAudio:e.canPlaybackAudio})))}function a7(t,e){return zy(t,fe.ActiveDeviceChanged).pipe(Fy(([n])=>n===e),Mn(([n,i])=>(un.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:i}),i)))}function AP(t,...e){return new tn(n=>{const i=()=>{n.next(t)};return e.forEach(r=>{t.on(r,i)}),()=>{e.forEach(r=>{t.off(r,i)})}}).pipe(fr(t))}function Hy(t){return AP(t,ye.TrackMuted,ye.TrackUnmuted,ye.ParticipantPermissionsChanged,ye.TrackPublished,ye.TrackUnpublished,ye.LocalTrackPublished,ye.LocalTrackUnpublished,ye.MediaDevicesError,ye.TrackSubscriptionStatusChanged).pipe(Mn(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:i,isScreenShareEnabled:r}=e,a=e.getTrackPublication(te.Source.Microphone),c=e.getTrackPublication(te.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:n,isScreenShareEnabled:r,cameraTrack:c,microphoneTrack:a,participant:e}}))}function _P(t,e){return new tn(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function o7(t,e={}){var n;let i;const r=new tn(d=>(i=d,()=>l.unsubscribe())).pipe(fr(Array.from(t.remoteParticipants.values()))),a=(n=e.additionalRoomEvents)!=null?n:kP,c=Array.from(new Set([fe.ParticipantConnected,fe.ParticipantDisconnected,fe.ConnectionStateChanged,...a])),l=ih(t,...c).subscribe(d=>i?.next(Array.from(d.remoteParticipants.values())));return t.remoteParticipants.size>0&&i?.next(Array.from(t.remoteParticipants.values())),r}function c7(t){return _P(t,ye.ParticipantPermissionsChanged).pipe(Mn(()=>t.permissions),fr(t.permissions))}function sk(t){return typeof t>"u"?new tn:_P(t,ye.AttributesChanged).pipe(Mn(([e])=>({changed:e,attributes:t.attributes})),fr({changed:t.attributes,attributes:t.attributes}))}function l7(t,e,n,i,r){const{localParticipant:a}=e,c=(m,p)=>{let v=!1;switch(m){case te.Source.Camera:v=p.isCameraEnabled;break;case te.Source.Microphone:v=p.isMicrophoneEnabled;break;case te.Source.ScreenShare:v=p.isScreenShareEnabled;break}return v},l=Hy(a).pipe(Mn(m=>c(t,m.participant)),fr(c(t,a))),d=new qr,f=(m,p)=>or(this,null,function*(){try{switch(p??(p=n),d.next(!0),t){case te.Source.Camera:return yield a.setCameraEnabled(m??!a.isCameraEnabled,p,i),a.isCameraEnabled;case te.Source.Microphone:return yield a.setMicrophoneEnabled(m??!a.isMicrophoneEnabled,p,i),a.isMicrophoneEnabled;case te.Source.ScreenShare:return yield a.setScreenShareEnabled(m??!a.isScreenShareEnabled,p,i),a.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(v){if(r&&v instanceof Error){r?.(v);return}else throw v}finally{d.next(!1)}});return{className:fu("button"),toggle:f,enabledObserver:l,pendingObserver:d.asObservable()}}function u7(){let t=!1;const e=new qr,n=new qr,i=r=>or(this,null,function*(){n.next(!0),t=r??!t,e.next(t),n.next(!1)});return{className:fu("button"),toggle:i,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function d7(t,e,n){const i=new oP(void 0),r=a7(e,t),a=(c,...l)=>or(this,[c,...l],function*(d,f={}){var m,p,v;if(e){un.debug(`Switching active device of kind "${t}" with id ${d}.`),yield e.switchActiveDevice(t,d,f.exact);const b=(m=e.getActiveDevice(t))!=null?m:d;b!==d&&d!=="default"&&un.info(`We tried to select the device with id (${d}), but the browser decided to select the device with id (${b}) instead.`);let w;t==="audioinput"?w=(p=e.localParticipant.getTrackPublication(te.Source.Microphone))==null?void 0:p.track:t==="videoinput"&&(w=(v=e.localParticipant.getTrackPublication(te.Source.Camera))==null?void 0:v.track);const S=d==="default"&&!w||d==="default"&&w?.mediaStreamTrack.label.startsWith("Default");i.next(S?d:b)}});return{className:fu("media-device-select"),activeDeviceObservable:r,setActiveMediaDevice:a}}var PP={CHAT:"lk.chat",TRANSCRIPTION:"lk.transcription"},f7={CHAT:"lk-chat-topic"};function DP(t,e){return or(this,arguments,function*(n,i,r={}){const{reliable:a,destinationIdentities:c,topic:l}=r;yield n.publishData(i,{destinationIdentities:c,topic:l,reliable:a})})}function h7(t,e,n){const i=Array.isArray(e)?e:[e],r=r7(t).pipe(Fy(([,,,l])=>e===void 0||l!==void 0&&i.includes(l)),Mn(([l,d,,f])=>({payload:l,topic:f,from:d})));let a;const c=new tn(l=>{a=l});return{messageObservable:r,isSendingObservable:c,send:(l,...d)=>or(this,[l,...d],function*(f,m={}){a.next(!0);try{yield DP(t.localParticipant,f,Qi({topic:i[0]},m))}finally{a.next(!1)}})}}var Ld=new WeakMap;function m7(t){return t.ignoreLegacy==!0}var p7=t=>JSON.parse(new TextDecoder().decode(t)),g7=t=>new TextEncoder().encode(JSON.stringify(t));function v7(t,e){var n,i,r,a,c,l;const d=()=>{var D,j,H;return((D=t.serverInfo)==null?void 0:D.edition)===1||!!((j=t.serverInfo)!=null&&j.version)&&Bi((H=t.serverInfo)==null?void 0:H.version,"1.8.2")>0},f=new qr,m=(n=void 0)!=null?n:PP.CHAT,p=(i=void 0)!=null?i:f7.CHAT;let v=!1;Ld.has(t)||(v=!0);const b=(r=Ld.get(t))!=null?r:new Map,w=(a=b.get(m))!=null?a:new qr;b.set(m,w),Ld.set(t,b);const S=(c=void 0)!=null?c:p7;if(v){t.registerTextStreamHandler(m,(j,H)=>or(this,null,function*(){const{id:z,timestamp:G}=j.info;By(j).pipe(r0((ie,re)=>ie+re),Mn(ie=>({id:z,timestamp:G,message:ie,from:t.getParticipantByIdentity(H.identity)}))).subscribe({next:ie=>w.next(ie)})}));const{messageObservable:D}=h7(t,[p]);D.pipe(Mn(j=>{const H=S(j.payload);return m7(H)?void 0:ha(Qi({},H),{from:j.from})}),Fy(j=>!!j),nk(f)).subscribe(w)}const R=w.pipe(r0((D,j)=>{if("id"in j&&D.find(H=>{var z,G;return((z=H.from)==null?void 0:z.identity)===((G=j.from)==null?void 0:G.identity)&&H.id===j.id})){const H=D.findIndex(z=>z.id===j.id);if(H>-1){const z=D[H];D[H]=ha(Qi({},j),{timestamp:z.timestamp,editTimestamp:j.timestamp})}return[...D]}return[...D,j]},[]),nk(f)),k=new oP(!1),N=(l=void 0)!=null?l:g7,O=(D,j)=>or(this,null,function*(){j||(j={}),j.topic!=null||(j.topic=m),k.next(!0);try{const H={id:(yield t.localParticipant.sendText(D,j)).id,timestamp:Date.now(),message:D},z=ha(Qi({},H),{attachedFiles:j.attachments}),G=ha(Qi({},z),{from:t.localParticipant,attributes:j.attributes});w.next(G);const ie=N(ha(Qi({},H),{ignoreLegacy:d()}));try{yield DP(t.localParticipant,ie,{reliable:!0,topic:p})}catch(re){un.info("could not send message in legacy chat format",re)}return G}finally{k.next(!1)}});function I(){f.next(),f.complete(),w.complete(),Ld.delete(t),t.unregisterTextStreamHandler(m)}return t.once(fe.Disconnected,I),{messageObservable:R,isSendingObservable:k,send:O}}function y7(){const t=e=>or(this,null,function*(){un.info("Start Audio for room: ",e),yield e.startAudio()});return{className:fu("start-audio-button"),roomAudioPlaybackAllowedObservable:s7,handleStartAudioPlayback:t}}function ak(t,e,n=!0){const i=[t.localParticipant,...Array.from(t.remoteParticipants.values())],r=[];return i.forEach(a=>{e.forEach(c=>{const l=Array.from(a.trackPublications.values()).filter(d=>d.source===c&&(!n||d.track)).map(d=>({participant:a,publication:d,source:d.source}));r.push(...l)})}),{trackReferences:r,participants:i}}function ok(t,e,n=!1){const{sources:i,kind:r,name:a}=e;return Array.from(t.trackPublications.values()).filter(c=>(!i||i.includes(c.source))&&(!r||c.kind===r)&&(!a||c.trackName===a)&&(!n||c.track)).map(c=>({participant:t,publication:c,source:c.source}))}function b7(t,e,n){var i,r;const a=(i=n.additionalRoomEvents)!=null?i:kP,c=(r=n.onlySubscribed)!=null?r:!0,l=Array.from(new Set([fe.ParticipantConnected,fe.ParticipantDisconnected,fe.ConnectionStateChanged,fe.LocalTrackPublished,fe.LocalTrackUnpublished,fe.TrackPublished,fe.TrackUnpublished,fe.TrackSubscriptionStatusChanged,...a]).values());return ih(t,...l).pipe(Mn(d=>{const f=ak(d,e,c);return un.debug(`TrackReference[] was updated. (length ${f.trackReferences.length})`,f),f}),fr(ak(t,e,c)))}function S7(t,e){return AP(t,...X9).pipe(Mn(n=>{const i=ok(n,e);return un.debug(`TrackReference[] was updated. (length ${i.length})`,i),i}),fr(ok(t,e)))}function NP(t,e){return new tn(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function T7(t){return NP(t,ke.TranscriptionReceived)}function x7(t){return NP(t,ke.TimeSyncUpdate).pipe(Mn(([e])=>e))}function w7(t,e){if(typeof localStorage>"u"){un.error("Local storage is not available.");return}try{if(e){const n=Object.fromEntries(Object.entries(e).filter(([,i])=>i!==""));localStorage.setItem(t,JSON.stringify(n))}}catch(n){un.error(`Error setting item to local storage: ${n}`)}}function C7(t){if(typeof localStorage>"u"){un.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){un.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){un.error(`Error getting item from local storage: ${e}`);return}}function k7(t){return{load:()=>C7(t),save:e=>w7(t,e)}}var E7=`${wP}-user-choices`,kl={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:R7,save:A7}=k7(E7);function _7(t,e=!1){e!==!0&&A7(t)}function P7(t,e=!1){var n,i,r,a,c;const l={videoEnabled:(n=t?.videoEnabled)!=null?n:kl.videoEnabled,audioEnabled:(i=t?.audioEnabled)!=null?i:kl.audioEnabled,videoDeviceId:(r=t?.videoDeviceId)!=null?r:kl.videoDeviceId,audioDeviceId:(a=t?.audioDeviceId)!=null?a:kl.audioDeviceId,username:(c=t?.username)!=null?c:kl.username};if(e)return l;{const d=R7();return Qi(Qi({},l),d??{})}}var yg=null,bg=null,D7=0;function ck(){return yg||(yg=new Map),yg}function N7(){return bg||(bg=new WeakMap),bg}function M7(t,e){const n=N7();let i=n.get(t);return i||(i=`room_${D7++}`,n.set(t,i)),`${i}:${e}`}function O7(t,e){const n=M7(t,e),i=ck(),r=i.get(n);if(r)return r;const a=new qr;let c=[];const l="lk.segment_id",d=a.pipe(F9({subscribe:()=>{t.registerTextStreamHandler(e,(f,m)=>or(this,null,function*(){var p;const v=By(f).pipe(r0((w,S)=>w+S,"")),b=!!((p=f.info.attributes)!=null&&p[l]);v.subscribe(w=>{const S=c.findIndex(R=>{var k,N;return R.streamInfo.id===f.info.id||b&&((k=R.streamInfo.attributes)==null?void 0:k[l])===((N=f.info.attributes)==null?void 0:N[l])});S!==-1?(c[S]=ha(Qi({},c[S]),{text:w}),a.next([...c])):(c.push({text:w,participantInfo:m,streamInfo:f.info}),a.next([...c]))})}))},finalize:()=>{t.unregisterTextStreamHandler(e)}}),B9());return i.set(n,d),t.on(fe.Disconnected,()=>{ck().delete(n),c=[],a.next([])}),d}T.createContext(void 0);const I7=T.createContext(void 0);function MP(){return T.useContext(I7)}function OP(t){const e=MP(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const U7=T.createContext(void 0);function IP(){return T.useContext(U7)}const qy=T.createContext(void 0);function Pa(){const t=T.useContext(qy);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function rh(){return T.useContext(qy)}function ac(t){const e=rh(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}T.createContext(void 0);function UP(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=UP(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function LP(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=UP(t))&&(i&&(i+=" "),i+=e);return i}function L7(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(i){console.error(i)}}}function Ky(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const i=t[n];for(const r in i){const a=e[r],c=i[r];typeof a=="function"&&typeof c=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?e[r]=L7(a,c):(r==="className"||r==="UNSAFE_className")&&typeof a=="string"&&typeof c=="string"?e[r]=LP(a,c):e[r]=c!==void 0?c:a}}return e}function j7(t){return t!==void 0}function jP(...t){return Ky(...t.filter(j7))}function B7(t,e,n){return T.Children.map(t,i=>T.isValidElement(i)&&T.Children.only(t)?(i.props.className&&(e??(e={}),e.className=LP(i.props.className,e.className),e.style={...i.props.style,...e.style}),T.cloneElement(i,{...e,key:n})):i)}function li(t,e,n=!0){const[i,r]=T.useState(e);return T.useEffect(()=>{if(n&&r(e),typeof window>"u"||!t)return;const a=t.subscribe(r);return()=>a.unsubscribe()},[t,n]),i}function Gy(t){const e=ac(t),n=T.useMemo(()=>t7(e),[e]);return li(n,e.state)}function BP(t={}){const e=ac(t.room),[n,i]=T.useState(e.localParticipant),[r,a]=T.useState(n.isMicrophoneEnabled),[c,l]=T.useState(n.isCameraEnabled),[d,f]=T.useState(n.isScreenShareEnabled),[m,p]=T.useState(n.lastMicrophoneError),[v,b]=T.useState(n.lastCameraError),[w,S]=T.useState(void 0),[R,k]=T.useState(void 0),N=O=>{l(O.isCameraEnabled),a(O.isMicrophoneEnabled),f(O.isScreenShareEnabled),k(O.cameraTrack),S(O.microphoneTrack),p(O.participant.lastMicrophoneError),b(O.participant.lastCameraError),i(O.participant)};return T.useEffect(()=>{const O=Hy(e.localParticipant).subscribe(N);return()=>O.unsubscribe()},[e]),{isMicrophoneEnabled:r,isScreenShareEnabled:d,isCameraEnabled:c,microphoneTrack:w,cameraTrack:R,lastMicrophoneError:m,lastCameraError:v,localParticipant:n}}function F7(){const t=Pa(),e=T.useMemo(()=>c7(t.localParticipant),[t]);return li(e,t.localParticipant.permissions)}function V7({kind:t,room:e,track:n,requestPermissions:i,onError:r}){const a=rh(),c=T.useMemo(()=>e??a??new Vr,[e,a]),l=T.useMemo(()=>i7(t,r,i),[t,i,r]),d=li(l,[]),[f,m]=T.useState(c?.getActiveDevice(t)??"default"),{className:p,activeDeviceObservable:v,setActiveMediaDevice:b}=T.useMemo(()=>d7(t,c),[t,c,n]);return T.useEffect(()=>{const w=v.subscribe(S=>{S&&(un.info("setCurrentDeviceId",S),m(S))});return()=>{w?.unsubscribe()}},[v]),{devices:d,className:p,activeDeviceId:f,setActiveMediaDevice:b}}function Yy(t={}){const e=ac(t.room),[n,i]=T.useState([]);return T.useEffect(()=>{const r=o7(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(i);return()=>r.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function z7(t={}){const e=ac(t.room),n=T.useMemo(()=>n7(e),[e]),{name:i,metadata:r}=li(n,{name:e.name,metadata:e.metadata});return{name:i,metadata:r}}function H7({room:t,props:e}){const n=ac(t),{className:i,roomAudioPlaybackAllowedObservable:r,handleStartAudioPlayback:a}=T.useMemo(()=>y7(),[]),c=T.useMemo(()=>r(n),[n,r]),{canPlayAudio:l}=li(c,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:T.useMemo(()=>Ky(e,{className:i,onClick:()=>{a(n)},style:{display:l?"none":"block"}}),[e,i,l,a,n]),canPlayAudio:l}}function Sg({source:t,onChange:e,initialState:n,captureOptions:i,publishOptions:r,onDeviceError:a,...c}){var l;const d=rh(),f=(l=d?.localParticipant)==null?void 0:l.getTrackPublication(t),m=T.useRef(!1),{toggle:p,className:v,pendingObserver:b,enabledObserver:w}=T.useMemo(()=>d?l7(t,d,i,r,a):u7(),[d,t,JSON.stringify(i),r]),S=li(b,!1),R=li(w,n??!!(f!=null&&f.isEnabled));T.useEffect(()=>{e?.(R,m.current),m.current=!1},[R,e]),T.useEffect(()=>{n!==void 0&&(un.debug("forcing initial toggle state",t,n),p(n))},[]);const k=T.useMemo(()=>Ky(c,{className:v}),[c,v]),N=T.useCallback(O=>{var I;m.current=!0,p().catch(()=>m.current=!1),(I=c.onClick)==null||I.call(c,O)},[c,p]);return{toggle:p,enabled:R,pending:S,track:f,buttonProps:{...k,"aria-pressed":R,"data-lk-source":t,"data-lk-enabled":R,disabled:S,onClick:N}}}function FP(t=[te.Source.Camera,te.Source.Microphone,te.Source.ScreenShare,te.Source.ScreenShareAudio,te.Source.Unknown],e={}){const n=ac(e.room),[i,r]=T.useState([]),[a,c]=T.useState([]),l=T.useMemo(()=>t.map(d=>EP(d)?d.source:d),[JSON.stringify(t)]);return T.useEffect(()=>{const d=b7(n,l,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:f,participants:m})=>{un.debug("setting track bundles",f,m),r(f),c(m)});return()=>d.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),T.useMemo(()=>{if(RP(t)){const d=K7(t,a),f=Array.from(i);return a.forEach(m=>{d.has(m.identity)&&(d.get(m.identity)??[]).forEach(p=>{if(i.find(({participant:b,publication:w})=>m.identity===b.identity&&w.source===p))return;un.debug(`Add ${p} placeholder for participant ${m.identity}.`);const v={participant:m,source:p};f.push(v)})}),f}else return i},[i,a,t])}function q7(t,e){const n=new Set(t);for(const i of e)n.delete(i);return n}function K7(t,e){const n=new Map;if(RP(t)){const i=t.filter(r=>r.withPlaceholder).map(r=>r.source);e.forEach(r=>{const a=r.getTrackPublications().map(l=>{var d;return(d=l.track)==null?void 0:d.source}).filter(l=>l!==void 0),c=Array.from(q7(new Set(i),new Set(a)));c.length>0&&n.set(r.identity,c)})}return n}function G7(t){const e=Pa(),n=Gy(e),i=T.useMemo(()=>n===at.Disconnected,[n]),r=T.useMemo(()=>v7(e),[e,t,i]),a=li(r.isSendingObservable,!1),c=li(r.messageObservable,[]);return{send:r.send,chatMessages:c,isSending:a}}function Y7(t={}){const[e,n]=T.useState(P7(t.defaults,t.preventLoad??!1)),i=T.useCallback(d=>{n(f=>({...f,audioEnabled:d}))},[]),r=T.useCallback(d=>{n(f=>({...f,videoEnabled:d}))},[]),a=T.useCallback(d=>{n(f=>({...f,audioDeviceId:d}))},[]),c=T.useCallback(d=>{n(f=>({...f,videoDeviceId:d}))},[]),l=T.useCallback(d=>{n(f=>({...f,username:d}))},[]);return T.useEffect(()=>{_7(e,t.preventSave??!1)},[e,t.preventSave]),{userChoices:e,saveAudioInputEnabled:i,saveVideoInputEnabled:r,saveAudioInputDeviceId:a,saveVideoInputDeviceId:c,saveUsername:l}}const W7=t=>{const e=n=>{let i=1-Math.max(-100,Math.min(-10,n))*-1/100;return i=Math.sqrt(i),i};return t.map(n=>n===-1/0?0:e(n))},$7={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};function X7(t,e={}){var n;const i=t instanceof te?t:(n=t?.publication)==null?void 0:n.track,r={...$7,...e},[a,c]=T.useState(new Array(r.bands).fill(0));return T.useEffect(()=>{if(!i||!(i!=null&&i.mediaStream))return;const{analyser:l,cleanup:d}=Xj(i,r.analyserOptions),f=l.frequencyBinCount,m=new Float32Array(f),p=setInterval(()=>{l.getFloatFrequencyData(m);let v=new Float32Array(m.length);for(let R=0;R<m.length;R++)v[R]=m[R];v=v.slice(e.loPass,e.hiPass);const b=W7(v),w=Math.ceil(b.length/r.bands),S=[];for(let R=0;R<r.bands;R++){const k=b.slice(R*w,(R+1)*w).reduce((N,O)=>N+=O,0);S.push(k/w)}c(S)},r.updateInterval);return()=>{d(),clearInterval(p)}},[i,i?.mediaStream,JSON.stringify(e)]),a}function lk(t,e){const n=IP(),i=Yy({updateOnlyOn:[]}),r=T.useMemo(()=>e?i.find(c=>c.identity===e):n,[e,i,n]),a=T.useMemo(()=>{if(r)return S7(r,{sources:t})},[r,JSON.stringify(t)]);return li(a,[])}function Z7(t){var e,n,i;const r=T.useMemo(()=>{var a;return(a=t?.publication)!=null&&a.track?x7(t?.publication.track):void 0},[(e=t?.publication)==null?void 0:e.track]);return li(r,{timestamp:Date.now(),rtpTimestamp:(i=(n=t?.publication)==null?void 0:n.track)==null?void 0:i.rtpTimestamp})}const J7={bufferSize:100};function Q7(t,e){const n={...J7,...e},[i,r]=T.useState([]),a=Z7(t),c=l=>{var d;(d=n.onTranscription)==null||d.call(n,l),r(f=>Q9(f,l.map(m=>J9(m,a)),n.bufferSize))};return T.useEffect(()=>{if(!(t!=null&&t.publication))return;const l=T7(t.publication).subscribe(d=>{c(...d)});return()=>{l.unsubscribe()}},[t&&CP(t),c]),{segments:i}}function ez(t={}){const e=IP(),n=t.participant??e,i=T.useMemo(()=>sk(n),[n]);return li(i,{attributes:n?.attributes})}const uk="lk.agent.state";function Wy(){const t=Yy(),e=t.find(p=>p.kind===Ta.AGENT&&!("lk.publish_on_behalf"in p.attributes)),n=t.find(p=>p.kind===Ta.AGENT&&p.attributes["lk.publish_on_behalf"]===e?.identity),i=lk([te.Source.Microphone,te.Source.Camera],e?.identity),r=lk([te.Source.Microphone,te.Source.Camera],n?.identity),a=i.find(p=>p.source===te.Source.Microphone)??r.find(p=>p.source===te.Source.Microphone),c=i.find(p=>p.source===te.Source.Camera)??r.find(p=>p.source===te.Source.Camera),{segments:l}=Q7(a),d=Gy(),{attributes:f}=ez({participant:e}),m=T.useMemo(()=>d===at.Disconnected?"disconnected":d===at.Connecting||!e||!(f!=null&&f[uk])?"connecting":f[uk],[f,e,d]);return{agent:e,state:m,audioTrack:a,videoTrack:c,agentTranscriptions:l,agentAttributes:f}}function tz(t){const e=Pa(),n=Gy(e)===at.Disconnected,i=T.useMemo(()=>O7(e,t),[e,t]);return{textStreams:li(n?void 0:i,[])}}function nz(t){const{participantIdentities:e,trackSids:n}={},{textStreams:i}=tz(PP.TRANSCRIPTION);return T.useMemo(()=>i.filter(r=>e?e.includes(r.participantInfo.identity):!0).filter(r=>{var a;return n?n.includes(((a=r.streamInfo.attributes)==null?void 0:a["lk.transcribed_track_id"])??""):!0}),[i,e,n])}const iz=T.forwardRef(function({label:t="Allow Audio",...e},n){const i=Pa(),{mergedProps:r}=H7({room:i,props:e});return T.createElement("button",{ref:n,...r},t)});function VP(t,e={}){const[n,i]=T.useState(s0(t)),[r,a]=T.useState(n?.isMuted),[c,l]=T.useState(n?.isSubscribed),[d,f]=T.useState(n?.track),[m,p]=T.useState("landscape"),v=T.useRef(),{className:b,trackObserver:w}=T.useMemo(()=>e7(t),[t.participant.sid??t.participant.identity,t.source,Vy(t)&&t.publication.trackSid]);return T.useEffect(()=>{const S=w.subscribe(R=>{un.debug("update track",R),i(R),a(R?.isMuted),l(R?.isSubscribed),f(R?.track)});return()=>S?.unsubscribe()},[w]),T.useEffect(()=>{var S,R;return d&&(v.current&&d.detach(v.current),(S=e.element)!=null&&S.current&&!(t.participant.isLocal&&d?.kind==="audio")&&d.attach(e.element.current)),v.current=(R=e.element)==null?void 0:R.current,()=>{v.current&&d?.detach(v.current)}},[d,e.element]),T.useEffect(()=>{var S,R;if(typeof((S=n?.dimensions)==null?void 0:S.width)=="number"&&typeof((R=n?.dimensions)==null?void 0:R.height)=="number"){const k=n.dimensions.width>n.dimensions.height?"landscape":"portrait";p(k)}},[n]),{publication:n,isMuted:r,isSubscribed:c,track:d,elementProps:jP(e.props,{className:b,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":m}})}}var Tg,dk;function rz(){if(dk)return Tg;dk=1;var t="Expected a function",e=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,d=typeof Id=="object"&&Id&&Id.Object===Object&&Id,f=typeof self=="object"&&self&&self.Object===Object&&self,m=d||f||Function("return this")(),p=Object.prototype,v=p.toString,b=Math.max,w=Math.min,S=function(){return m.Date.now()};function R(D,j,H){var z,G,ie,re,de,Ee,Ae=0,Me=!1,Y=!1,se=!0;if(typeof D!="function")throw new TypeError(t);j=I(j)||0,k(H)&&(Me=!!H.leading,Y="maxWait"in H,ie=Y?b(I(H.maxWait)||0,j):ie,se="trailing"in H?!!H.trailing:se);function J(be){var Ce=z,Ve=G;return z=G=void 0,Ae=be,re=D.apply(Ve,Ce),re}function _e(be){return Ae=be,de=setTimeout(me,j),Me?J(be):re}function V(be){var Ce=be-Ee,Ve=be-Ae,qe=j-Ce;return Y?w(qe,ie-Ve):qe}function Q(be){var Ce=be-Ee,Ve=be-Ae;return Ee===void 0||Ce>=j||Ce<0||Y&&Ve>=ie}function me(){var be=S();if(Q(be))return le(be);de=setTimeout(me,V(be))}function le(be){return de=void 0,se&&z?J(be):(z=G=void 0,re)}function Te(){de!==void 0&&clearTimeout(de),Ae=0,z=Ee=G=de=void 0}function Ne(){return de===void 0?re:le(S())}function Pe(){var be=S(),Ce=Q(be);if(z=arguments,G=this,Ee=be,Ce){if(de===void 0)return _e(Ee);if(Y)return de=setTimeout(me,j),J(Ee)}return de===void 0&&(de=setTimeout(me,j)),re}return Pe.cancel=Te,Pe.flush=Ne,Pe}function k(D){var j=typeof D;return!!D&&(j=="object"||j=="function")}function N(D){return!!D&&typeof D=="object"}function O(D){return typeof D=="symbol"||N(D)&&v.call(D)==n}function I(D){if(typeof D=="number")return D;if(O(D))return e;if(k(D)){var j=typeof D.valueOf=="function"?D.valueOf():D;D=k(j)?j+"":j}if(typeof D!="string")return D===0?D:+D;D=D.replace(i,"");var H=a.test(D);return H||c.test(D)?l(D.slice(2),H?2:8):r.test(D)?e:+D}return Tg=R,Tg}var sz=rz();const fk=nP(sz);function az(t){const e=T.useRef(t);e.current=t,T.useEffect(()=>()=>{e.current()},[])}function oz(t,e=500,n){const i=T.useRef();az(()=>{i.current&&i.current.cancel()});const r=T.useMemo(()=>{const a=fk(t,e,n),c=(...l)=>a(...l);return c.cancel=()=>{a.cancel()},c.isPending=()=>!!i.current,c.flush=()=>a.flush(),c},[t,e,n]);return T.useEffect(()=>{i.current=fk(t,e,n)},[t,e,n]),r}function cz(t,e,n){const i=(f,m)=>f===m,r=t instanceof Function?t():t,[a,c]=T.useState(r),l=T.useRef(r),d=oz(c,e,n);return i(l.current,r)||(d(r),l.current=r),[a,d]}function lz({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:i=!1,initialIsIntersecting:r=!1,onChange:a}={}){var c;const[l,d]=T.useState(null),[f,m]=T.useState(()=>({isIntersecting:r,entry:void 0})),p=T.useRef();p.current=a;const v=((c=f.entry)==null?void 0:c.isIntersecting)&&i;T.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||v)return;const S=new IntersectionObserver(R=>{const k=Array.isArray(S.thresholds)?S.thresholds:[S.thresholds];R.forEach(N=>{const O=N.isIntersecting&&k.some(I=>N.intersectionRatio>=I);m({isIntersecting:O,entry:N}),p.current&&p.current(O,N)})},{threshold:t,root:e,rootMargin:n});return S.observe(l),()=>{S.disconnect()}},[l,JSON.stringify(t),e,n,v,i]);const b=T.useRef(null);T.useEffect(()=>{var S;!l&&(S=f.entry)!=null&&S.target&&!i&&!v&&b.current!==f.entry.target&&(b.current=f.entry.target,m({isIntersecting:r,entry:void 0}))},[l,f.entry,i,v,r]);const w=[d,!!f.isIntersecting,f.entry];return w.ref=w[0],w.isIntersecting=w[1],w.entry=w[2],w}const zP=T.forwardRef(function({onTrackClick:t,onClick:e,onSubscriptionStatusChanged:n,trackRef:i,manageSubscription:r,...a},c){const l=OP(i),d=T.useRef(null);T.useImperativeHandle(c,()=>d.current);const f=lz({root:d.current}),[m]=cz(f,3e3);T.useEffect(()=>{r&&l.publication instanceof _f&&m?.isIntersecting===!1&&f?.isIntersecting===!1&&l.publication.setSubscribed(!1)},[m,l,r]),T.useEffect(()=>{r&&l.publication instanceof _f&&f?.isIntersecting===!0&&l.publication.setSubscribed(!0)},[f,l,r]);const{elementProps:p,publication:v,isSubscribed:b}=VP(l,{element:d,props:a});T.useEffect(()=>{n?.(!!b)},[b,n]);const w=S=>{e?.(S),t?.({participant:l?.participant,track:v})};return T.createElement("video",{ref:d,...p,muted:!0,onClick:w})}),uz=T.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...i},r){const a=OP(t),c=T.useRef(null);T.useImperativeHandle(r,()=>c.current);const{elementProps:l,isSubscribed:d,track:f,publication:m}=VP(a,{element:c,props:i});return T.useEffect(()=>{e?.(!!d)},[d,e]),T.useEffect(()=>{f===void 0||n===void 0||(f instanceof TA?f.setVolume(n):un.warn("Volume can only be set on remote audio tracks."))},[n,f]),T.useEffect(()=>{m===void 0||i.muted===void 0||(m instanceof _f?m.setEnabled(!i.muted):un.warn("Can only call setEnabled on remote track publications."))},[i.muted,m,f]),T.createElement("audio",{ref:c,...l})});function dz({volume:t,muted:e}){const n=FP([te.Source.Microphone,te.Source.ScreenShareAudio,te.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(i=>!i.participant.isLocal&&i.publication.kind===te.Kind.Audio);return T.createElement("div",{style:{display:"none"}},n.map(i=>T.createElement(uz,{key:CP(i),trackRef:i,volume:t,muted:e})))}const fz=t=>{const e=[];for(let n=0;n<t;n++)e.push([n,t-1-n]);return e},hk=t=>[[Math.floor(t/2)],[-1]],hz=(t,e,n)=>{const[i,r]=T.useState(0),[a,c]=T.useState([[]]);T.useEffect(()=>{if(t==="thinking")c(hk(e));else if(t==="connecting"||t==="initializing"){const d=[...fz(e)];c(d)}else c(t==="listening"?hk(e):t===void 0||t==="speaking"?[new Array(e).fill(0).map((d,f)=>f)]:[[]]);r(0)},[t,e]);const l=T.useRef(null);return T.useEffect(()=>{let d=performance.now();const f=m=>{m-d>=n&&(r(p=>p+1),d=m),l.current=requestAnimationFrame(f)};return l.current=requestAnimationFrame(f),()=>{l.current!==null&&cancelAnimationFrame(l.current)}},[n,e,t,a.length]),a[i%a.length]},mz=new Map([["connecting",2e3],["initializing",2e3],["listening",500],["thinking",150]]),pz=(t,e)=>{if(t===void 0)return 1e3;let n=mz.get(t);if(n)switch(t){case"connecting":n/=e;break}return n},HP=T.forwardRef(function({state:t,options:e,barCount:n=15,trackRef:i,children:r,...a},c){const l=jP(a,{className:"lk-audio-bar-visualizer"});let d=MP();i&&(d=i);const f=X7(d,{bands:n,loPass:100,hiPass:200}),m=e?.minHeight??20,p=e?.maxHeight??100,v=hz(t,n,pz(t,n)??100);return T.createElement("div",{ref:c,...l,"data-lk-va-state":t},f.map((b,w)=>r?B7(r,{"data-lk-highlighted":v.includes(w),"data-lk-bar-index":w,className:"lk-audio-bar",style:{height:`${Math.min(p,Math.max(m,b*100+5))}%`}}):T.createElement("span",{key:w,"data-lk-highlighted":v.includes(w),"data-lk-bar-index":w,className:`lk-audio-bar ${v.includes(w)&&"lk-highlighted"}`,style:{height:`${Math.min(p,Math.max(m,b*100+5))}%`}})))});function gz(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const vz=t=>{switch(t){case"success":return Sz;case"info":return xz;case"warning":return Tz;case"error":return wz;default:return null}},yz=Array(12).fill(0),bz=({visible:t,className:e})=>Re.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Re.createElement("div",{className:"sonner-spinner"},yz.map((n,i)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),Sz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Tz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),xz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),wz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Cz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),kz=()=>{const[t,e]=Re.useState(document.hidden);return Re.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let a0=1;class Ez{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:i,...r}=e,a=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:a0++,c=this.toasts.find(d=>d.id===a),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),c?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...e,id:a,title:i}),{...d,...e,id:a,dismissible:l,title:i}):d):this.addToast({title:i,...r,dismissible:l,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let a=i!==void 0,c;const l=r.then(async f=>{if(c=["resolve",f],Re.isValidElement(f))a=!1,this.create({id:i,type:"default",message:f});else if(Az(f)&&!f.ok){a=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,w=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:v,...w})}else if(f instanceof Error){a=!1;const p=typeof n.error=="function"?await n.error(f):n.error,v=typeof n.description=="function"?await n.description(f):n.description,w=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:v,...w})}else if(n.success!==void 0){a=!1;const p=typeof n.success=="function"?await n.success(f):n.success,v=typeof n.description=="function"?await n.description(f):n.description,w=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"success",description:v,...w})}}).catch(async f=>{if(c=["reject",f],n.error!==void 0){a=!1;const m=typeof n.error=="function"?await n.error(f):n.error,p=typeof n.description=="function"?await n.description(f):n.description,b=typeof m=="object"&&!Re.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:p,...b})}}).finally(()=>{a&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,m)=>l.then(()=>c[0]==="reject"?m(c[1]):f(c[1])).catch(m));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(e,n)=>{const i=n?.id||a0++;return this.create({jsx:e(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const qn=new Ez,Rz=(t,e)=>{const n=e?.id||a0++;return qn.addToast({title:t,...e,id:n}),n},Az=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",_z=Rz,Pz=()=>qn.toasts,Dz=()=>qn.getActiveToasts(),Nz=Object.assign(_z,{success:qn.success,info:qn.info,warning:qn.warning,error:qn.error,custom:qn.custom,message:qn.message,promise:qn.promise,dismiss:qn.dismiss,loading:qn.loading},{getHistory:Pz,getToasts:Dz});gz("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jd(t){return t.label!==void 0}const Mz=3,Oz="24px",Iz="16px",mk=4e3,Uz=356,Lz=14,jz=45,Bz=200;function $i(...t){return t.filter(Boolean).join(" ")}function Fz(t){const[e,n]=t.split("-"),i=[];return e&&i.push(e),n&&i.push(n),i}const Vz=t=>{var e,n,i,r,a,c,l,d,f;const{invert:m,toast:p,unstyled:v,interacting:b,setHeights:w,visibleToasts:S,heights:R,index:k,toasts:N,expanded:O,removeToast:I,defaultRichColors:D,closeButton:j,style:H,cancelButtonStyle:z,actionButtonStyle:G,className:ie="",descriptionClassName:re="",duration:de,position:Ee,gap:Ae,expandByDefault:Me,classNames:Y,icons:se,closeButtonAriaLabel:J="Close toast"}=t,[_e,V]=Re.useState(null),[Q,me]=Re.useState(null),[le,Te]=Re.useState(!1),[Ne,Pe]=Re.useState(!1),[be,Ce]=Re.useState(!1),[Ve,qe]=Re.useState(!1),[Xe,Ye]=Re.useState(!1),[kt,Lt]=Re.useState(0),[ui,On]=Re.useState(0),At=Re.useRef(p.duration||de||mk),B=Re.useRef(null),A=Re.useRef(null),_=k===0,F=k+1<=S,X=p.type,pe=p.dismissible!==!1,we=p.className||"",Ke=p.descriptionClassName||"",Je=Re.useMemo(()=>R.findIndex($e=>$e.toastId===p.id)||0,[R,p.id]),M=Re.useMemo(()=>{var $e;return($e=p.closeButton)!=null?$e:j},[p.closeButton,j]),C=Re.useMemo(()=>p.duration||de||mk,[p.duration,de]),E=Re.useRef(0),L=Re.useRef(0),$=Re.useRef(0),ae=Re.useRef(null),[ge,We]=Ee.split("-"),ut=Re.useMemo(()=>R.reduce(($e,Yt,nn)=>nn>=Je?$e:$e+Yt.height,0),[R,Je]),ht=kz(),vt=p.invert||m,dt=X==="loading";L.current=Re.useMemo(()=>Je*Ae+ut,[Je,ut]),Re.useEffect(()=>{At.current=C},[C]),Re.useEffect(()=>{Te(!0)},[]),Re.useEffect(()=>{const $e=A.current;if($e){const Yt=$e.getBoundingClientRect().height;return On(Yt),w(nn=>[{toastId:p.id,height:Yt,position:p.position},...nn]),()=>w(nn=>nn.filter(wn=>wn.toastId!==p.id))}},[w,p.id]),Re.useLayoutEffect(()=>{if(!le)return;const $e=A.current,Yt=$e.style.height;$e.style.height="auto";const nn=$e.getBoundingClientRect().height;$e.style.height=Yt,On(nn),w(wn=>wn.find(dn=>dn.toastId===p.id)?wn.map(dn=>dn.toastId===p.id?{...dn,height:nn}:dn):[{toastId:p.id,height:nn,position:p.position},...wn])},[le,p.title,p.description,w,p.id,p.jsx,p.action,p.cancel]);const Ei=Re.useCallback(()=>{Pe(!0),Lt(L.current),w($e=>$e.filter(Yt=>Yt.toastId!==p.id)),setTimeout(()=>{I(p)},Bz)},[p,I,w,L]);Re.useEffect(()=>{if(p.promise&&X==="loading"||p.duration===1/0||p.type==="loading")return;let $e;return O||b||ht?(()=>{if($.current<E.current){const wn=new Date().getTime()-E.current;At.current=At.current-wn}$.current=new Date().getTime()})():(()=>{At.current!==1/0&&(E.current=new Date().getTime(),$e=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Ei()},At.current))})(),()=>clearTimeout($e)},[O,b,p,X,ht,Ei]),Re.useEffect(()=>{p.delete&&(Ei(),p.onDismiss==null||p.onDismiss.call(p,p))},[Ei,p.delete]);function mu(){var $e;if(se?.loading){var Yt;return Re.createElement("div",{className:$i(Y?.loader,p==null||(Yt=p.classNames)==null?void 0:Yt.loader,"sonner-loader"),"data-visible":X==="loading"},se.loading)}return Re.createElement(bz,{className:$i(Y?.loader,p==null||($e=p.classNames)==null?void 0:$e.loader),visible:X==="loading"})}const fc=p.icon||se?.[X]||vz(X);var $r,pu;return Re.createElement("li",{tabIndex:0,ref:A,className:$i(ie,we,Y?.toast,p==null||(e=p.classNames)==null?void 0:e.toast,Y?.default,Y?.[X],p==null||(n=p.classNames)==null?void 0:n[X]),"data-sonner-toast":"","data-rich-colors":($r=p.richColors)!=null?$r:D,"data-styled":!(p.jsx||p.unstyled||v),"data-mounted":le,"data-promise":!!p.promise,"data-swiped":Xe,"data-removed":Ne,"data-visible":F,"data-y-position":ge,"data-x-position":We,"data-index":k,"data-front":_,"data-swiping":be,"data-dismissible":pe,"data-type":X,"data-invert":vt,"data-swipe-out":Ve,"data-swipe-direction":Q,"data-expanded":!!(O||Me&&le),"data-testid":p.testId,style:{"--index":k,"--toasts-before":k,"--z-index":N.length-k,"--offset":`${Ne?kt:L.current}px`,"--initial-height":Me?"auto":`${ui}px`,...H,...p.style},onDragEnd:()=>{Ce(!1),V(null),ae.current=null},onPointerDown:$e=>{$e.button!==2&&(dt||!pe||(B.current=new Date,Lt(L.current),$e.target.setPointerCapture($e.pointerId),$e.target.tagName!=="BUTTON"&&(Ce(!0),ae.current={x:$e.clientX,y:$e.clientY})))},onPointerUp:()=>{var $e,Yt,nn;if(Ve||!pe)return;ae.current=null;const wn=Number((($e=A.current)==null?void 0:$e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qs=Number(((Yt=A.current)==null?void 0:Yt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),dn=new Date().getTime()-((nn=B.current)==null?void 0:nn.getTime()),Wt=_e==="x"?wn:qs,$t=Math.abs(Wt)/dn;if(Math.abs(Wt)>=jz||$t>.11){Lt(L.current),p.onDismiss==null||p.onDismiss.call(p,p),me(_e==="x"?wn>0?"right":"left":qs>0?"down":"up"),Ei(),qe(!0);return}else{var _t,gn;(_t=A.current)==null||_t.style.setProperty("--swipe-amount-x","0px"),(gn=A.current)==null||gn.style.setProperty("--swipe-amount-y","0px")}Ye(!1),Ce(!1),V(null)},onPointerMove:$e=>{var Yt,nn,wn;if(!ae.current||!pe||((Yt=window.getSelection())==null?void 0:Yt.toString().length)>0)return;const dn=$e.clientY-ae.current.y,Wt=$e.clientX-ae.current.x;var $t;const _t=($t=t.swipeDirections)!=null?$t:Fz(Ee);!_e&&(Math.abs(Wt)>1||Math.abs(dn)>1)&&V(Math.abs(Wt)>Math.abs(dn)?"x":"y");let gn={x:0,y:0};const Da=mr=>1/(1.5+Math.abs(mr)/20);if(_e==="y"){if(_t.includes("top")||_t.includes("bottom"))if(_t.includes("top")&&dn<0||_t.includes("bottom")&&dn>0)gn.y=dn;else{const mr=dn*Da(dn);gn.y=Math.abs(mr)<Math.abs(dn)?mr:dn}}else if(_e==="x"&&(_t.includes("left")||_t.includes("right")))if(_t.includes("left")&&Wt<0||_t.includes("right")&&Wt>0)gn.x=Wt;else{const mr=Wt*Da(Wt);gn.x=Math.abs(mr)<Math.abs(Wt)?mr:Wt}(Math.abs(gn.x)>0||Math.abs(gn.y)>0)&&Ye(!0),(nn=A.current)==null||nn.style.setProperty("--swipe-amount-x",`${gn.x}px`),(wn=A.current)==null||wn.style.setProperty("--swipe-amount-y",`${gn.y}px`)}},M&&!p.jsx&&X!=="loading"?Re.createElement("button",{"aria-label":J,"data-disabled":dt,"data-close-button":!0,onClick:dt||!pe?()=>{}:()=>{Ei(),p.onDismiss==null||p.onDismiss.call(p,p)},className:$i(Y?.closeButton,p==null||(i=p.classNames)==null?void 0:i.closeButton)},(pu=se?.close)!=null?pu:Cz):null,(X||p.icon||p.promise)&&p.icon!==null&&(se?.[X]!==null||p.icon)?Re.createElement("div",{"data-icon":"",className:$i(Y?.icon,p==null||(r=p.classNames)==null?void 0:r.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||mu():null,p.type!=="loading"?fc:null):null,Re.createElement("div",{"data-content":"",className:$i(Y?.content,p==null||(a=p.classNames)==null?void 0:a.content)},Re.createElement("div",{"data-title":"",className:$i(Y?.title,p==null||(c=p.classNames)==null?void 0:c.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?Re.createElement("div",{"data-description":"",className:$i(re,Ke,Y?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),Re.isValidElement(p.cancel)?p.cancel:p.cancel&&jd(p.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||z,onClick:$e=>{jd(p.cancel)&&pe&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,$e),Ei())},className:$i(Y?.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,Re.isValidElement(p.action)?p.action:p.action&&jd(p.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||G,onClick:$e=>{jd(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,$e),!$e.defaultPrevented&&Ei())},className:$i(Y?.actionButton,p==null||(f=p.classNames)==null?void 0:f.actionButton)},p.action.label):null)};function pk(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function zz(t,e){const n={};return[t,e].forEach((i,r)=>{const a=r===1,c=a?"--mobile-offset":"--offset",l=a?Iz:Oz;function d(f){["top","right","bottom","left"].forEach(m=>{n[`${c}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(f=>{i[f]===void 0?n[`${c}-${f}`]=l:n[`${c}-${f}`]=typeof i[f]=="number"?`${i[f]}px`:i[f]}):d(l)}),n}const Hz=Re.forwardRef(function(e,n){const{id:i,invert:r,position:a="bottom-right",hotkey:c=["altKey","KeyT"],expand:l,closeButton:d,className:f,offset:m,mobileOffset:p,theme:v="light",richColors:b,duration:w,style:S,visibleToasts:R=Mz,toastOptions:k,dir:N=pk(),gap:O=Lz,icons:I,containerAriaLabel:D="Notifications"}=e,[j,H]=Re.useState([]),z=Re.useMemo(()=>i?j.filter(le=>le.toasterId===i):j.filter(le=>!le.toasterId),[j,i]),G=Re.useMemo(()=>Array.from(new Set([a].concat(z.filter(le=>le.position).map(le=>le.position)))),[z,a]),[ie,re]=Re.useState([]),[de,Ee]=Re.useState(!1),[Ae,Me]=Re.useState(!1),[Y,se]=Re.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=Re.useRef(null),_e=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=Re.useRef(null),Q=Re.useRef(!1),me=Re.useCallback(le=>{H(Te=>{var Ne;return(Ne=Te.find(Pe=>Pe.id===le.id))!=null&&Ne.delete||qn.dismiss(le.id),Te.filter(({id:Pe})=>Pe!==le.id)})},[]);return Re.useEffect(()=>qn.subscribe(le=>{if(le.dismiss){requestAnimationFrame(()=>{H(Te=>Te.map(Ne=>Ne.id===le.id?{...Ne,delete:!0}:Ne))});return}setTimeout(()=>{SE.flushSync(()=>{H(Te=>{const Ne=Te.findIndex(Pe=>Pe.id===le.id);return Ne!==-1?[...Te.slice(0,Ne),{...Te[Ne],...le},...Te.slice(Ne+1)]:[le,...Te]})})})}),[j]),Re.useEffect(()=>{if(v!=="system"){se(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;const le=window.matchMedia("(prefers-color-scheme: dark)");try{le.addEventListener("change",({matches:Te})=>{se(Te?"dark":"light")})}catch{le.addListener(({matches:Ne})=>{try{se(Ne?"dark":"light")}catch(Pe){console.error(Pe)}})}},[v]),Re.useEffect(()=>{j.length<=1&&Ee(!1)},[j]),Re.useEffect(()=>{const le=Te=>{var Ne;if(c.every(Ce=>Te[Ce]||Te.code===Ce)){var be;Ee(!0),(be=J.current)==null||be.focus()}Te.code==="Escape"&&(document.activeElement===J.current||(Ne=J.current)!=null&&Ne.contains(document.activeElement))&&Ee(!1)};return document.addEventListener("keydown",le),()=>document.removeEventListener("keydown",le)},[c]),Re.useEffect(()=>{if(J.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,Q.current=!1)}},[J.current]),Re.createElement("section",{ref:n,"aria-label":`${D} ${_e}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},G.map((le,Te)=>{var Ne;const[Pe,be]=le.split("-");return z.length?Re.createElement("ol",{key:le,dir:N==="auto"?pk():N,tabIndex:-1,ref:J,className:f,"data-sonner-toaster":!0,"data-sonner-theme":Y,"data-y-position":Pe,"data-x-position":be,style:{"--front-toast-height":`${((Ne=ie[0])==null?void 0:Ne.height)||0}px`,"--width":`${Uz}px`,"--gap":`${O}px`,...S,...zz(m,p)},onBlur:Ce=>{Q.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(Q.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,V.current=Ce.relatedTarget)},onMouseEnter:()=>Ee(!0),onMouseMove:()=>Ee(!0),onMouseLeave:()=>{Ae||Ee(!1)},onDragEnd:()=>Ee(!1),onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Me(!0)},onPointerUp:()=>Me(!1)},z.filter(Ce=>!Ce.position&&Te===0||Ce.position===le).map((Ce,Ve)=>{var qe,Xe;return Re.createElement(Vz,{key:Ce.id,icons:I,index:Ve,toast:Ce,defaultRichColors:b,duration:(qe=k?.duration)!=null?qe:w,className:k?.className,descriptionClassName:k?.descriptionClassName,invert:r,visibleToasts:R,closeButton:(Xe=k?.closeButton)!=null?Xe:d,interacting:Ae,position:le,style:k?.style,unstyled:k?.unstyled,classNames:k?.classNames,cancelButtonStyle:k?.cancelButtonStyle,actionButtonStyle:k?.actionButtonStyle,closeButtonAriaLabel:k?.closeButtonAriaLabel,removeToast:me,toasts:z.filter(Ye=>Ye.position==Ce.position),heights:ie.filter(Ye=>Ye.position==Ce.position),setHeights:re,expandByDefault:l,gap:O,expanded:de,swipeDirections:e.swipeDirections})})):null}))});function o0({title:t,description:e}){Nz.error(t,{description:e})}function gk(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function qP(...t){return e=>{let n=!1;const i=t.map(r=>{const a=gk(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():gk(t[r],null)}}}}function _n(...t){return T.useCallback(qP(...t),t)}function eu(t){const e=Kz(t),n=T.forwardRef((i,r)=>{const{children:a,...c}=i,l=T.Children.toArray(a),d=l.find(Yz);if(d){const f=d.props.children,m=l.map(p=>p===d?T.Children.count(f)>1?T.Children.only(null):T.isValidElement(f)?f.props.children:null:p);return x.jsx(e,{...c,ref:r,children:T.isValidElement(f)?T.cloneElement(f,void 0,m):null})}return x.jsx(e,{...c,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}var qz=eu("Slot");function Kz(t){const e=T.forwardRef((n,i)=>{const{children:r,...a}=n;if(T.isValidElement(r)){const c=$z(r),l=Wz(a,r.props);return r.type!==T.Fragment&&(l.ref=i?qP(i,c):c),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Gz=Symbol("radix.slottable");function Yz(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Gz}function Wz(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...l)=>{const d=a(...l);return r(...l),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function $z(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function KP(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=KP(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function GP(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=KP(t))&&(i&&(i+=" "),i+=e);return i}const $y="-",Xz=t=>{const e=Jz(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:c=>{const l=c.split($y);return l[0]===""&&l.length!==1&&l.shift(),YP(l,e)||Zz(c)},getConflictingClassGroupIds:(c,l)=>{const d=n[c]||[];return l&&i[c]?[...d,...i[c]]:d}}},YP=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),r=i?YP(t.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const a=t.join($y);return e.validators.find(({validator:c})=>c(a))?.classGroupId},vk=/^\[(.+)\]$/,Zz=t=>{if(vk.test(t)){const e=vk.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Jz=t=>{const{theme:e,classGroups:n}=t,i={nextPart:new Map,validators:[]};for(const r in n)c0(n[r],i,r,e);return i},c0=(t,e,n,i)=>{t.forEach(r=>{if(typeof r=="string"){const a=r===""?e:yk(e,r);a.classGroupId=n;return}if(typeof r=="function"){if(Qz(r)){c0(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([a,c])=>{c0(c,yk(e,a),n,i)})})},yk=(t,e)=>{let n=t;return e.split($y).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},Qz=t=>t.isThemeGetter,eH=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const r=(a,c)=>{n.set(a,c),e++,e>t&&(e=0,i=n,n=new Map)};return{get(a){let c=n.get(a);if(c!==void 0)return c;if((c=i.get(a))!==void 0)return r(a,c),c},set(a,c){n.has(a)?n.set(a,c):r(a,c)}}},l0="!",u0=":",tH=u0.length,nH=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=r=>{const a=[];let c=0,l=0,d=0,f;for(let w=0;w<r.length;w++){let S=r[w];if(c===0&&l===0){if(S===u0){a.push(r.slice(d,w)),d=w+tH;continue}if(S==="/"){f=w;continue}}S==="["?c++:S==="]"?c--:S==="("?l++:S===")"&&l--}const m=a.length===0?r:r.substring(d),p=iH(m),v=p!==m,b=f&&f>d?f-d:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:b}};if(e){const r=e+u0,a=i;i=c=>c.startsWith(r)?a(c.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const r=i;i=a=>n({className:a,parseClassName:r})}return i},iH=t=>t.endsWith(l0)?t.substring(0,t.length-1):t.startsWith(l0)?t.substring(1):t,rH=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const r=[];let a=[];return i.forEach(c=>{c[0]==="["||e[c]?(r.push(...a.sort(),c),a=[]):a.push(c)}),r.push(...a.sort()),r}},sH=t=>({cache:eH(t.cacheSize),parseClassName:nH(t),sortModifiers:rH(t),...Xz(t)}),aH=/\s+/,oH=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:a}=e,c=[],l=t.trim().split(aH);let d="";for(let f=l.length-1;f>=0;f-=1){const m=l[f],{isExternal:p,modifiers:v,hasImportantModifier:b,baseClassName:w,maybePostfixModifierPosition:S}=n(m);if(p){d=m+(d.length>0?" "+d:d);continue}let R=!!S,k=i(R?w.substring(0,S):w);if(!k){if(!R){d=m+(d.length>0?" "+d:d);continue}if(k=i(w),!k){d=m+(d.length>0?" "+d:d);continue}R=!1}const N=a(v).join(":"),O=b?N+l0:N,I=O+k;if(c.includes(I))continue;c.push(I);const D=r(k,R);for(let j=0;j<D.length;++j){const H=D[j];c.push(O+H)}d=m+(d.length>0?" "+d:d)}return d};function cH(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=WP(e))&&(i&&(i+=" "),i+=n);return i}const WP=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=WP(t[i]))&&(n&&(n+=" "),n+=e);return n};function lH(t,...e){let n,i,r,a=c;function c(d){const f=e.reduce((m,p)=>p(m),t());return n=sH(f),i=n.cache.get,r=n.cache.set,a=l,l(d)}function l(d){const f=i(d);if(f)return f;const m=oH(d,n);return r(d,m),m}return function(){return a(cH.apply(null,arguments))}}const mn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},$P=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,XP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,uH=/^\d+\/\d+$/,dH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,mH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xo=t=>uH.test(t),et=t=>!!t&&!Number.isNaN(Number(t)),Ss=t=>!!t&&Number.isInteger(Number(t)),xg=t=>t.endsWith("%")&&et(t.slice(0,-1)),Pr=t=>dH.test(t),gH=()=>!0,vH=t=>fH.test(t)&&!hH.test(t),ZP=()=>!1,yH=t=>mH.test(t),bH=t=>pH.test(t),SH=t=>!Ue(t)&&!Le(t),TH=t=>oc(t,eD,ZP),Ue=t=>$P.test(t),ua=t=>oc(t,tD,vH),wg=t=>oc(t,EH,et),bk=t=>oc(t,JP,ZP),xH=t=>oc(t,QP,bH),Bd=t=>oc(t,nD,yH),Le=t=>XP.test(t),El=t=>cc(t,tD),wH=t=>cc(t,RH),Sk=t=>cc(t,JP),CH=t=>cc(t,eD),kH=t=>cc(t,QP),Fd=t=>cc(t,nD,!0),oc=(t,e,n)=>{const i=$P.exec(t);return i?i[1]?e(i[1]):n(i[2]):!1},cc=(t,e,n=!1)=>{const i=XP.exec(t);return i?i[1]?e(i[1]):n:!1},JP=t=>t==="position"||t==="percentage",QP=t=>t==="image"||t==="url",eD=t=>t==="length"||t==="size"||t==="bg-size",tD=t=>t==="length",EH=t=>t==="number",RH=t=>t==="family-name",nD=t=>t==="shadow",AH=()=>{const t=mn("color"),e=mn("font"),n=mn("text"),i=mn("font-weight"),r=mn("tracking"),a=mn("leading"),c=mn("breakpoint"),l=mn("container"),d=mn("spacing"),f=mn("radius"),m=mn("shadow"),p=mn("inset-shadow"),v=mn("text-shadow"),b=mn("drop-shadow"),w=mn("blur"),S=mn("perspective"),R=mn("aspect"),k=mn("ease"),N=mn("animate"),O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...I(),Le,Ue],j=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto","contain","none"],z=()=>[Le,Ue,d],G=()=>[xo,"full","auto",...z()],ie=()=>[Ss,"none","subgrid",Le,Ue],re=()=>["auto",{span:["full",Ss,Le,Ue]},Ss,Le,Ue],de=()=>[Ss,"auto",Le,Ue],Ee=()=>["auto","min","max","fr",Le,Ue],Ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Me=()=>["start","end","center","stretch","center-safe","end-safe"],Y=()=>["auto",...z()],se=()=>[xo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],J=()=>[t,Le,Ue],_e=()=>[...I(),Sk,bk,{position:[Le,Ue]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",CH,TH,{size:[Le,Ue]}],me=()=>[xg,El,ua],le=()=>["","none","full",f,Le,Ue],Te=()=>["",et,El,ua],Ne=()=>["solid","dashed","dotted","double"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[et,xg,Sk,bk],Ce=()=>["","none",w,Le,Ue],Ve=()=>["none",et,Le,Ue],qe=()=>["none",et,Le,Ue],Xe=()=>[et,Le,Ue],Ye=()=>[xo,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Pr],breakpoint:[Pr],color:[gH],container:[Pr],"drop-shadow":[Pr],ease:["in","out","in-out"],font:[SH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Pr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Pr],shadow:[Pr],spacing:["px",et],text:[Pr],"text-shadow":[Pr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xo,Ue,Le,R]}],container:["container"],columns:[{columns:[et,Ue,Le,l]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[Ss,"auto",Le,Ue]}],basis:[{basis:[xo,"full","auto",l,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,xo,"auto","initial","none",Ue]}],grow:[{grow:["",et,Le,Ue]}],shrink:[{shrink:["",et,Le,Ue]}],order:[{order:[Ss,"first","last","none",Le,Ue]}],"grid-cols":[{"grid-cols":ie()}],"col-start-end":[{col:re()}],"col-start":[{"col-start":de()}],"col-end":[{"col-end":de()}],"grid-rows":[{"grid-rows":ie()}],"row-start-end":[{row:re()}],"row-start":[{"row-start":de()}],"row-end":[{"row-end":de()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ee()}],"auto-rows":[{"auto-rows":Ee()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...Ae(),"normal"]}],"justify-items":[{"justify-items":[...Me(),"normal"]}],"justify-self":[{"justify-self":["auto",...Me()]}],"align-content":[{content:["normal",...Ae()]}],"align-items":[{items:[...Me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Me(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ae()}],"place-items":[{"place-items":[...Me(),"baseline"]}],"place-self":[{"place-self":["auto",...Me()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:Y()}],mx:[{mx:Y()}],my:[{my:Y()}],ms:[{ms:Y()}],me:[{me:Y()}],mt:[{mt:Y()}],mr:[{mr:Y()}],mb:[{mb:Y()}],ml:[{ml:Y()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:se()}],w:[{w:[l,"screen",...se()]}],"min-w":[{"min-w":[l,"screen","none",...se()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[c]},...se()]}],h:[{h:["screen","lh",...se()]}],"min-h":[{"min-h":["screen","lh","none",...se()]}],"max-h":[{"max-h":["screen","lh",...se()]}],"font-size":[{text:["base",n,El,ua]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Le,wg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",xg,Ue]}],"font-family":[{font:[wH,Ue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Le,Ue]}],"line-clamp":[{"line-clamp":[et,"none",Le,wg]}],leading:[{leading:[a,...z()]}],"list-image":[{"list-image":["none",Le,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",Le,ua]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[et,"auto",Le,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_e()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ss,Le,Ue],radial:["",Le,Ue],conic:[Ss,Le,Ue]},kH,xH]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:me()}],"gradient-via-pos":[{via:me()}],"gradient-to-pos":[{to:me()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:le()}],"rounded-s":[{"rounded-s":le()}],"rounded-e":[{"rounded-e":le()}],"rounded-t":[{"rounded-t":le()}],"rounded-r":[{"rounded-r":le()}],"rounded-b":[{"rounded-b":le()}],"rounded-l":[{"rounded-l":le()}],"rounded-ss":[{"rounded-ss":le()}],"rounded-se":[{"rounded-se":le()}],"rounded-ee":[{"rounded-ee":le()}],"rounded-es":[{"rounded-es":le()}],"rounded-tl":[{"rounded-tl":le()}],"rounded-tr":[{"rounded-tr":le()}],"rounded-br":[{"rounded-br":le()}],"rounded-bl":[{"rounded-bl":le()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ne(),"hidden","none"]}],"divide-style":[{divide:[...Ne(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...Ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,Le,Ue]}],"outline-w":[{outline:["",et,El,ua]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",m,Fd,Bd]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",p,Fd,Bd]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[et,ua]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",v,Fd,Bd]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[et,Le,Ue]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[Le,Ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_e()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Ue]}],filter:[{filter:["","none",Le,Ue]}],blur:[{blur:Ce()}],brightness:[{brightness:[et,Le,Ue]}],contrast:[{contrast:[et,Le,Ue]}],"drop-shadow":[{"drop-shadow":["","none",b,Fd,Bd]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",et,Le,Ue]}],"hue-rotate":[{"hue-rotate":[et,Le,Ue]}],invert:[{invert:["",et,Le,Ue]}],saturate:[{saturate:[et,Le,Ue]}],sepia:[{sepia:["",et,Le,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Ue]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[et,Le,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[et,Le,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,Le,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,Le,Ue]}],"backdrop-invert":[{"backdrop-invert":["",et,Le,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[et,Le,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[et,Le,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",et,Le,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",Le,Ue]}],ease:[{ease:["linear","initial",k,Le,Ue]}],delay:[{delay:[et,Le,Ue]}],animate:[{animate:["none",N,Le,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Le,Ue]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:Ve()}],"rotate-x":[{"rotate-x":Ve()}],"rotate-y":[{"rotate-y":Ve()}],"rotate-z":[{"rotate-z":Ve()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:Xe()}],"skew-x":[{"skew-x":Xe()}],"skew-y":[{"skew-y":Xe()}],transform:[{transform:[Le,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ye()}],"translate-x":[{"translate-x":Ye()}],"translate-y":[{"translate-y":Ye()}],"translate-z":[{"translate-z":Ye()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Ue]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[et,El,ua,wg]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},_H=lH(AH);function ft(...t){return _H(GP(t))}function PH(t,e){return{id:t.streamInfo.id,timestamp:t.streamInfo.timestamp,message:t.text,from:t.participantInfo.identity===e.localParticipant.identity?e.localParticipant:Array.from(e.remoteParticipants.values()).find(n=>n.identity===t.participantInfo.identity)}}const iD="(prefers-color-scheme: dark)";function Tk(){const t=document.documentElement;t.classList.remove("dark","light"),window.matchMedia(iD).matches?t.classList.add("dark"):t.classList.add("light")}const xk=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,wk=GP,Xy=(t,e)=>n=>{var i;if(e?.variants==null)return wk(t,n?.class,n?.className);const{variants:r,defaultVariants:a}=e,c=Object.keys(r).map(f=>{const m=n?.[f],p=a?.[f];if(m===null)return null;const v=xk(m)||xk(p);return r[f][v]}),l=n&&Object.entries(n).reduce((f,m)=>{let[p,v]=m;return v===void 0||(f[p]=v),f},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((f,m)=>{let{class:p,className:v,...b}=m;return Object.entries(b).every(w=>{let[S,R]=w;return Array.isArray(R)?R.includes({...a,...l}[S]):{...a,...l}[S]===R})?[...f,p,v]:f},[]);return wk(t,c,d,n?.class,n?.className)},DH=Xy(["text-xs font-bold tracking-wider uppercase whitespace-nowrap","inline-flex items-center justify-center gap-2 shrink-0 rounded-full cursor-pointer outline-none transition-colors duration-300","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:pointer-events-none disabled:opacity-50","aria-invalid:ring-destructive/20 aria-invalid:border-destructive dark:aria-invalid:ring-destructive/40 ","[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0"],{variants:{variant:{default:"bg-button text-button-foreground hover:bg-muted focus:bg-muted",destructive:["bg-destructive text-destructive-foreground","hover:bg-destructive-hover focus:bg-destructive-hover focus-visible:ring-destructive-foreground/20","dark:focus-visible:ring-destructive-foreground/40"],outline:["border bg-background","hover:bg-accent hover:text-accent-foreground","dark:bg-input/30 dark:border-input dark:hover:bg-input/50"],primary:"bg-primary text-primary-foreground hover:bg-primary-hover focus:bg-primary-hover",secondary:"bg-secondary text-secondary-foregroun hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function rD({className:t,variant:e,size:n,asChild:i=!1,...r}){const a=i?qz:"button";return x.jsx(a,{"data-slot":"button",className:ft(DH({variant:e,size:n,className:t})),...r})}function NH({onSend:t,className:e,disabled:n,...i}){const r=T.useRef(null),[a,c]=T.useState(""),l=f=>{f.preventDefault(),i.onSubmit?.(f),t?.(a),c("")},d=n||a.trim().length===0;return T.useEffect(()=>{n||r.current?.focus()},[n]),x.jsxs("form",{...i,onSubmit:l,className:ft("flex items-center gap-2 rounded-md pl-1 text-sm",e),children:[x.jsx("input",{autoFocus:!0,ref:r,type:"text",value:a,disabled:n,placeholder:"Type something...",onChange:f=>c(f.target.value),className:"flex-1 bg-transparent text-foreground placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"}),x.jsx(rD,{size:"sm",type:"submit",variant:d?"secondary":"primary",disabled:d,className:"font-mono",children:"SEND"})]})}function Qt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}var $n=globalThis?.document?T.useLayoutEffect:()=>{},MH=nE[" useInsertionEffect ".trim().toString()]||$n;function d0({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,a,c]=OH({defaultProp:e,onChange:n}),l=t!==void 0,d=l?t:r;{const m=T.useRef(t!==void 0);T.useEffect(()=>{const p=m.current;p!==l&&console.warn(`${i} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,i])}const f=T.useCallback(m=>{if(l){const p=IH(m)?m(t):m;p!==t&&c.current?.(p)}else a(m)},[l,t,a,c]);return[d,f]}function OH({defaultProp:t,onChange:e}){const[n,i]=T.useState(t),r=T.useRef(n),a=T.useRef(e);return MH(()=>{a.current=e},[e]),T.useEffect(()=>{r.current!==n&&(a.current?.(n),r.current=n)},[n,r]),[n,i,a]}function IH(t){return typeof t=="function"}var UH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gt=UH.reduce((t,e)=>{const n=eu(`Primitive.${e}`),i=T.forwardRef((r,a)=>{const{asChild:c,...l}=r,d=c?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(d,{...l,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function LH(t,e){t&&su.flushSync(()=>t.dispatchEvent(e))}var sD="Toggle",aD=T.forwardRef((t,e)=>{const{pressed:n,defaultPressed:i,onPressedChange:r,...a}=t,[c,l]=d0({prop:n,onChange:r,defaultProp:i??!1,caller:sD});return x.jsx(Gt.button,{type:"button","aria-pressed":c,"data-state":c?"on":"off","data-disabled":t.disabled?"":void 0,...a,ref:e,onClick:Qt(t.onClick,()=>{t.disabled||l(!c)})})});aD.displayName=sD;var jH=aD;const BH=Xy(["inline-flex items-center justify-center gap-2 rounded-full","text-sm font-medium whitespace-nowrap","cursor-pointer outline-none transition-[color,border,background-color]","focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:border-ring","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","disabled:pointer-events-none disabled:opacity-50 disabled:not-allowed","data-[state=on]:bg-button-selected data-[state=on]:border-button-border-selected","[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0"],{variants:{variant:{default:"bg-button hover:bg-muted focus:bg-muted hover:text-muted-foreground focus:text-muted-foreground",primary:"text-fg1 data-[state=on]:bg-button hover:data-[state=on]:bg-button-hover focus:data-[state=on]:bg-button-hover data-[state=off]:bg-button-primary hover:data-[state=off]:bg-destructive-hover data-[state=off]:text-button-primary-foreground",secondary:"text-fg1 bg-button hover:bg-button-hover data-[state=on]:bg-button-secondary hover:data-[state=on]:bg-button-secondary/80 data-[state=on]:text-button-secondary-foreground",outline:["border border-button-border bg-button text-button-foreground","hover:bg-background focus:bg-background"]},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function oD({className:t,variant:e,size:n,...i}){return x.jsx(jH,{"data-slot":"toggle",className:ft(BH({variant:e,size:n,className:t})),...i})}const sh=T.forwardRef((t,e)=>{const{alt:n,color:i="currentColor",size:r="1em",weight:a="regular",mirrored:c=!1,children:l,weights:d,...f}=t;return T.createElement("svg",{ref:e,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,fill:i,viewBox:"0 0 256 256",transform:c?"scale(-1, 1)":void 0,...f},!!n&&T.createElement("title",null,n),l,d.get(a))});sh.displayName="SSRBase";const FH=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M208,96l-80,80L48,96Z",opacity:"0.2"}),T.createElement("path",{d:"M215.39,92.94A8,8,0,0,0,208,88H48a8,8,0,0,0-5.66,13.66l80,80a8,8,0,0,0,11.32,0l80-80A8,8,0,0,0,215.39,92.94ZM128,164.69,67.31,104H188.69Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,48,88H208a8,8,0,0,1,5.66,13.66Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M212.24,100.24l-80,80a6,6,0,0,1-8.48,0l-80-80a6,6,0,0,1,8.48-8.48L128,167.51l75.76-75.75a6,6,0,0,1,8.48,8.48Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M210.83,98.83l-80,80a4,4,0,0,1-5.66,0l-80-80a4,4,0,0,1,5.66-5.66L128,170.34l77.17-77.17a4,4,0,1,1,5.66,5.66Z"}))]]),Zy=T.forwardRef((t,e)=>T.createElement(sh,{ref:e,...t,weights:FH}));Zy.displayName="CaretDownIcon";const VH=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216.49,168.49a12,12,0,0,1-17,0L128,97,56.49,168.49a12,12,0,0,1-17-17l80-80a12,12,0,0,1,17,0l80,80A12,12,0,0,1,216.49,168.49Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M208,160H48l80-80Z",opacity:"0.2"}),T.createElement("path",{d:"M213.66,154.34l-80-80a8,8,0,0,0-11.32,0l-80,80A8,8,0,0,0,48,168H208a8,8,0,0,0,5.66-13.66ZM67.31,152,128,91.31,188.69,152Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M215.39,163.06A8,8,0,0,1,208,168H48a8,8,0,0,1-5.66-13.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,215.39,163.06Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M212.24,164.24a6,6,0,0,1-8.48,0L128,88.49,52.24,164.24a6,6,0,0,1-8.48-8.48l80-80a6,6,0,0,1,8.48,0l80,80A6,6,0,0,1,212.24,164.24Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,165.66a8,8,0,0,1-11.32,0L128,91.31,53.66,165.66a8,8,0,0,1-11.32-11.32l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,213.66,165.66Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M210.83,162.83a4,4,0,0,1-5.66,0L128,85.66,50.83,162.83a4,4,0,0,1-5.66-5.66l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,210.83,162.83Z"}))]]),cD=T.forwardRef((t,e)=>T.createElement(sh,{ref:e,...t,weights:VH}));cD.displayName="CaretUpIcon";const zH=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M232.49,80.49l-128,128a12,12,0,0,1-17,0l-56-56a12,12,0,1,1,17-17L96,183,215.51,63.51a12,12,0,0,1,17,17Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Z",opacity:"0.2"}),T.createElement("path",{d:"M205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M228.24,76.24l-128,128a6,6,0,0,1-8.48,0l-56-56a6,6,0,0,1,8.48-8.48L96,191.51,219.76,67.76a6,6,0,0,1,8.48,8.48Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M226.83,74.83l-128,128a4,4,0,0,1-5.66,0l-56-56a4,4,0,0,1,5.66-5.66L96,194.34,221.17,69.17a4,4,0,1,1,5.66,5.66Z"}))]]),lD=T.forwardRef((t,e)=>T.createElement(sh,{ref:e,...t,weights:zH}));lD.displayName="CheckIcon";function Ck(t,[e,n]){return Math.min(n,Math.max(e,t))}function Jy(t,e=[]){let n=[];function i(a,c){const l=T.createContext(c),d=n.length;n=[...n,c];const f=p=>{const{scope:v,children:b,...w}=p,S=v?.[t]?.[d]||l,R=T.useMemo(()=>w,Object.values(w));return x.jsx(S.Provider,{value:R,children:b})};f.displayName=a+"Provider";function m(p,v){const b=v?.[t]?.[d]||l,w=T.useContext(b);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[f,m]}const r=()=>{const a=n.map(c=>T.createContext(c));return function(l){const d=l?.[t]||a;return T.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return r.scopeName=t,[i,HH(r,...e)]}function HH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const c=i.reduce((l,{useScope:d,scopeName:f})=>{const p=d(a)[`__scope${f}`];return{...l,...p}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}function qH(t){const e=t+"CollectionProvider",[n,i]=Jy(e),[r,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=S=>{const{scope:R,children:k}=S,N=Re.useRef(null),O=Re.useRef(new Map).current;return x.jsx(r,{scope:R,itemMap:O,collectionRef:N,children:k})};c.displayName=e;const l=t+"CollectionSlot",d=eu(l),f=Re.forwardRef((S,R)=>{const{scope:k,children:N}=S,O=a(l,k),I=_n(R,O.collectionRef);return x.jsx(d,{ref:I,children:N})});f.displayName=l;const m=t+"CollectionItemSlot",p="data-radix-collection-item",v=eu(m),b=Re.forwardRef((S,R)=>{const{scope:k,children:N,...O}=S,I=Re.useRef(null),D=_n(R,I),j=a(m,k);return Re.useEffect(()=>(j.itemMap.set(I,{ref:I,...O}),()=>void j.itemMap.delete(I))),x.jsx(v,{[p]:"",ref:D,children:N})});b.displayName=m;function w(S){const R=a(t+"CollectionConsumer",S);return Re.useCallback(()=>{const N=R.collectionRef.current;if(!N)return[];const O=Array.from(N.querySelectorAll(`[${p}]`));return Array.from(R.itemMap.values()).sort((j,H)=>O.indexOf(j.ref.current)-O.indexOf(H.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:c,Slot:f,ItemSlot:b},w,i]}var KH=T.createContext(void 0);function GH(t){const e=T.useContext(KH);return t||e||"ltr"}function Ca(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>e.current?.(...n),[])}function YH(t,e=globalThis?.document){const n=Ca(t);T.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var WH="DismissableLayer",f0="dismissableLayer.update",$H="dismissableLayer.pointerDownOutside",XH="dismissableLayer.focusOutside",kk,uD=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dD=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:c,onDismiss:l,...d}=t,f=T.useContext(uD),[m,p]=T.useState(null),v=m?.ownerDocument??globalThis?.document,[,b]=T.useState({}),w=_n(e,H=>p(H)),S=Array.from(f.layers),[R]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),k=S.indexOf(R),N=m?S.indexOf(m):-1,O=f.layersWithOutsidePointerEventsDisabled.size>0,I=N>=k,D=QH(H=>{const z=H.target,G=[...f.branches].some(ie=>ie.contains(z));!I||G||(r?.(H),c?.(H),H.defaultPrevented||l?.())},v),j=eq(H=>{const z=H.target;[...f.branches].some(ie=>ie.contains(z))||(a?.(H),c?.(H),H.defaultPrevented||l?.())},v);return YH(H=>{N===f.layers.size-1&&(i?.(H),!H.defaultPrevented&&l&&(H.preventDefault(),l()))},v),T.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(kk=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),Ek(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=kk)}},[m,v,n,f]),T.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),Ek())},[m,f]),T.useEffect(()=>{const H=()=>b({});return document.addEventListener(f0,H),()=>document.removeEventListener(f0,H)},[]),x.jsx(Gt.div,{...d,ref:w,style:{pointerEvents:O?I?"auto":"none":void 0,...t.style},onFocusCapture:Qt(t.onFocusCapture,j.onFocusCapture),onBlurCapture:Qt(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Qt(t.onPointerDownCapture,D.onPointerDownCapture)})});dD.displayName=WH;var ZH="DismissableLayerBranch",JH=T.forwardRef((t,e)=>{const n=T.useContext(uD),i=T.useRef(null),r=_n(e,i);return T.useEffect(()=>{const a=i.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),x.jsx(Gt.div,{...t,ref:r})});JH.displayName=ZH;function QH(t,e=globalThis?.document){const n=Ca(t),i=T.useRef(!1),r=T.useRef(()=>{});return T.useEffect(()=>{const a=l=>{if(l.target&&!i.current){let d=function(){fD($H,n,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);i.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function eq(t,e=globalThis?.document){const n=Ca(t),i=T.useRef(!1);return T.useEffect(()=>{const r=a=>{a.target&&!i.current&&fD(XH,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Ek(){const t=new CustomEvent(f0);document.dispatchEvent(t)}function fD(t,e,n,{discrete:i}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?LH(r,a):r.dispatchEvent(a)}var Cg=0;function tq(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Rk()),document.body.insertAdjacentElement("beforeend",t[1]??Rk()),Cg++,()=>{Cg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Cg--}},[])}function Rk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var kg="focusScope.autoFocusOnMount",Eg="focusScope.autoFocusOnUnmount",Ak={bubbles:!1,cancelable:!0},nq="FocusScope",hD=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...c}=t,[l,d]=T.useState(null),f=Ca(r),m=Ca(a),p=T.useRef(null),v=_n(e,S=>d(S)),b=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(i){let S=function(O){if(b.paused||!l)return;const I=O.target;l.contains(I)?p.current=I:Cs(p.current,{select:!0})},R=function(O){if(b.paused||!l)return;const I=O.relatedTarget;I!==null&&(l.contains(I)||Cs(p.current,{select:!0}))},k=function(O){if(document.activeElement===document.body)for(const D of O)D.removedNodes.length>0&&Cs(l)};document.addEventListener("focusin",S),document.addEventListener("focusout",R);const N=new MutationObserver(k);return l&&N.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",R),N.disconnect()}}},[i,l,b.paused]),T.useEffect(()=>{if(l){Pk.add(b);const S=document.activeElement;if(!l.contains(S)){const k=new CustomEvent(kg,Ak);l.addEventListener(kg,f),l.dispatchEvent(k),k.defaultPrevented||(iq(cq(mD(l)),{select:!0}),document.activeElement===S&&Cs(l))}return()=>{l.removeEventListener(kg,f),setTimeout(()=>{const k=new CustomEvent(Eg,Ak);l.addEventListener(Eg,m),l.dispatchEvent(k),k.defaultPrevented||Cs(S??document.body,{select:!0}),l.removeEventListener(Eg,m),Pk.remove(b)},0)}}},[l,f,m,b]);const w=T.useCallback(S=>{if(!n&&!i||b.paused)return;const R=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,k=document.activeElement;if(R&&k){const N=S.currentTarget,[O,I]=rq(N);O&&I?!S.shiftKey&&k===I?(S.preventDefault(),n&&Cs(O,{select:!0})):S.shiftKey&&k===O&&(S.preventDefault(),n&&Cs(I,{select:!0})):k===N&&S.preventDefault()}},[n,i,b.paused]);return x.jsx(Gt.div,{tabIndex:-1,...c,ref:v,onKeyDown:w})});hD.displayName=nq;function iq(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Cs(i,{select:e}),document.activeElement!==n)return}function rq(t){const e=mD(t),n=_k(e,t),i=_k(e.reverse(),t);return[n,i]}function mD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _k(t,e){for(const n of t)if(!sq(n,{upTo:e}))return n}function sq(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function aq(t){return t instanceof HTMLInputElement&&"select"in t}function Cs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&aq(t)&&e&&t.select()}}var Pk=oq();function oq(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=Dk(t,e),t.unshift(e)},remove(e){t=Dk(t,e),t[0]?.resume()}}}function Dk(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function cq(t){return t.filter(e=>e.tagName!=="A")}var lq=nE[" useId ".trim().toString()]||(()=>{}),uq=0;function Qy(t){const[e,n]=T.useState(lq());return $n(()=>{n(i=>i??String(uq++))},[t]),t||(e?`radix-${e}`:"")}const dq=["top","right","bottom","left"],Is=Math.min,si=Math.max,Lf=Math.round,Vd=Math.floor,sr=t=>({x:t,y:t}),fq={left:"right",right:"left",bottom:"top",top:"bottom"},hq={start:"end",end:"start"};function h0(t,e,n){return si(t,Is(e,n))}function Kr(t,e){return typeof t=="function"?t(e):t}function Gr(t){return t.split("-")[0]}function lc(t){return t.split("-")[1]}function eb(t){return t==="x"?"y":"x"}function tb(t){return t==="y"?"height":"width"}const mq=new Set(["top","bottom"]);function er(t){return mq.has(Gr(t))?"y":"x"}function nb(t){return eb(er(t))}function pq(t,e,n){n===void 0&&(n=!1);const i=lc(t),r=nb(t),a=tb(r);let c=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=jf(c)),[c,jf(c)]}function gq(t){const e=jf(t);return[m0(t),e,m0(e)]}function m0(t){return t.replace(/start|end/g,e=>hq[e])}const Nk=["left","right"],Mk=["right","left"],vq=["top","bottom"],yq=["bottom","top"];function bq(t,e,n){switch(t){case"top":case"bottom":return n?e?Mk:Nk:e?Nk:Mk;case"left":case"right":return e?vq:yq;default:return[]}}function Sq(t,e,n,i){const r=lc(t);let a=bq(Gr(t),n==="start",i);return r&&(a=a.map(c=>c+"-"+r),e&&(a=a.concat(a.map(m0)))),a}function jf(t){return t.replace(/left|right|bottom|top/g,e=>fq[e])}function Tq(t){return{top:0,right:0,bottom:0,left:0,...t}}function pD(t){return typeof t!="number"?Tq(t):{top:t,right:t,bottom:t,left:t}}function Bf(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function Ok(t,e,n){let{reference:i,floating:r}=t;const a=er(e),c=nb(e),l=tb(c),d=Gr(e),f=a==="y",m=i.x+i.width/2-r.width/2,p=i.y+i.height/2-r.height/2,v=i[l]/2-r[l]/2;let b;switch(d){case"top":b={x:m,y:i.y-r.height};break;case"bottom":b={x:m,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y:p};break;case"left":b={x:i.x-r.width,y:p};break;default:b={x:i.x,y:i.y}}switch(lc(e)){case"start":b[c]-=v*(n&&f?-1:1);break;case"end":b[c]+=v*(n&&f?-1:1);break}return b}const xq=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:c}=n,l=a.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:p}=Ok(f,i,d),v=i,b={},w=0;for(let S=0;S<l.length;S++){const{name:R,fn:k}=l[S],{x:N,y:O,data:I,reset:D}=await k({x:m,y:p,initialPlacement:i,placement:v,strategy:r,middlewareData:b,rects:f,platform:c,elements:{reference:t,floating:e}});m=N??m,p=O??p,b={...b,[R]:{...b[R],...I}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(f=D.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:r}):D.rects),{x:m,y:p}=Ok(f,v,d)),S=-1)}return{x:m,y:p,placement:v,strategy:r,middlewareData:b}};async function tu(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:c,elements:l,strategy:d}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:p="floating",altBoundary:v=!1,padding:b=0}=Kr(e,t),w=pD(b),R=l[v?p==="floating"?"reference":"floating":p],k=Bf(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(R)))==null||n?R:R.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:f,rootBoundary:m,strategy:d})),N=p==="floating"?{x:i,y:r,width:c.floating.width,height:c.floating.height}:c.reference,O=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),I=await(a.isElement==null?void 0:a.isElement(O))?await(a.getScale==null?void 0:a.getScale(O))||{x:1,y:1}:{x:1,y:1},D=Bf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:N,offsetParent:O,strategy:d}):N);return{top:(k.top-D.top+w.top)/I.y,bottom:(D.bottom-k.bottom+w.bottom)/I.y,left:(k.left-D.left+w.left)/I.x,right:(D.right-k.right+w.right)/I.x}}const wq=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:c,elements:l,middlewareData:d}=e,{element:f,padding:m=0}=Kr(t,e)||{};if(f==null)return{};const p=pD(m),v={x:n,y:i},b=nb(r),w=tb(b),S=await c.getDimensions(f),R=b==="y",k=R?"top":"left",N=R?"bottom":"right",O=R?"clientHeight":"clientWidth",I=a.reference[w]+a.reference[b]-v[b]-a.floating[w],D=v[b]-a.reference[b],j=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let H=j?j[O]:0;(!H||!await(c.isElement==null?void 0:c.isElement(j)))&&(H=l.floating[O]||a.floating[w]);const z=I/2-D/2,G=H/2-S[w]/2-1,ie=Is(p[k],G),re=Is(p[N],G),de=ie,Ee=H-S[w]-re,Ae=H/2-S[w]/2+z,Me=h0(de,Ae,Ee),Y=!d.arrow&&lc(r)!=null&&Ae!==Me&&a.reference[w]/2-(Ae<de?ie:re)-S[w]/2<0,se=Y?Ae<de?Ae-de:Ae-Ee:0;return{[b]:v[b]+se,data:{[b]:Me,centerOffset:Ae-Me-se,...Y&&{alignmentOffset:se}},reset:Y}}}),Cq=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:a,rects:c,initialPlacement:l,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,...R}=Kr(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const k=Gr(r),N=er(l),O=Gr(l)===l,I=await(d.isRTL==null?void 0:d.isRTL(f.floating)),D=v||(O||!S?[jf(l)]:gq(l)),j=w!=="none";!v&&j&&D.push(...Sq(l,S,w,I));const H=[l,...D],z=await tu(e,R),G=[];let ie=((i=a.flip)==null?void 0:i.overflows)||[];if(m&&G.push(z[k]),p){const Ae=pq(r,c,I);G.push(z[Ae[0]],z[Ae[1]])}if(ie=[...ie,{placement:r,overflows:G}],!G.every(Ae=>Ae<=0)){var re,de;const Ae=(((re=a.flip)==null?void 0:re.index)||0)+1,Me=H[Ae];if(Me&&(!(p==="alignment"?N!==er(Me):!1)||ie.every(J=>er(J.placement)===N?J.overflows[0]>0:!0)))return{data:{index:Ae,overflows:ie},reset:{placement:Me}};let Y=(de=ie.filter(se=>se.overflows[0]<=0).sort((se,J)=>se.overflows[1]-J.overflows[1])[0])==null?void 0:de.placement;if(!Y)switch(b){case"bestFit":{var Ee;const se=(Ee=ie.filter(J=>{if(j){const _e=er(J.placement);return _e===N||_e==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(_e=>_e>0).reduce((_e,V)=>_e+V,0)]).sort((J,_e)=>J[1]-_e[1])[0])==null?void 0:Ee[0];se&&(Y=se);break}case"initialPlacement":Y=l;break}if(r!==Y)return{reset:{placement:Y}}}return{}}}};function Ik(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Uk(t){return dq.some(e=>t[e]>=0)}const kq=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Kr(t,e);switch(i){case"referenceHidden":{const a=await tu(e,{...r,elementContext:"reference"}),c=Ik(a,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Uk(c)}}}case"escaped":{const a=await tu(e,{...r,altBoundary:!0}),c=Ik(a,n.floating);return{data:{escapedOffsets:c,escaped:Uk(c)}}}default:return{}}}}},gD=new Set(["left","top"]);async function Eq(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),c=Gr(n),l=lc(n),d=er(n)==="y",f=gD.has(c)?-1:1,m=a&&d?-1:1,p=Kr(e,t);let{mainAxis:v,crossAxis:b,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof w=="number"&&(b=l==="end"?w*-1:w),d?{x:b*m,y:v*f}:{x:v*f,y:b*m}}const Rq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:c,middlewareData:l}=e,d=await Eq(e,t);return c===((n=l.offset)==null?void 0:n.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:r+d.x,y:a+d.y,data:{...d,placement:c}}}}},Aq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:l={fn:R=>{let{x:k,y:N}=R;return{x:k,y:N}}},...d}=Kr(t,e),f={x:n,y:i},m=await tu(e,d),p=er(Gr(r)),v=eb(p);let b=f[v],w=f[p];if(a){const R=v==="y"?"top":"left",k=v==="y"?"bottom":"right",N=b+m[R],O=b-m[k];b=h0(N,b,O)}if(c){const R=p==="y"?"top":"left",k=p==="y"?"bottom":"right",N=w+m[R],O=w-m[k];w=h0(N,w,O)}const S=l.fn({...e,[v]:b,[p]:w});return{...S,data:{x:S.x-n,y:S.y-i,enabled:{[v]:a,[p]:c}}}}}},_q=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:a,middlewareData:c}=e,{offset:l=0,mainAxis:d=!0,crossAxis:f=!0}=Kr(t,e),m={x:n,y:i},p=er(r),v=eb(p);let b=m[v],w=m[p];const S=Kr(l,e),R=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(d){const O=v==="y"?"height":"width",I=a.reference[v]-a.floating[O]+R.mainAxis,D=a.reference[v]+a.reference[O]-R.mainAxis;b<I?b=I:b>D&&(b=D)}if(f){var k,N;const O=v==="y"?"width":"height",I=gD.has(Gr(r)),D=a.reference[p]-a.floating[O]+(I&&((k=c.offset)==null?void 0:k[p])||0)+(I?0:R.crossAxis),j=a.reference[p]+a.reference[O]+(I?0:((N=c.offset)==null?void 0:N[p])||0)-(I?R.crossAxis:0);w<D?w=D:w>j&&(w=j)}return{[v]:b,[p]:w}}}},Pq=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:a,platform:c,elements:l}=e,{apply:d=()=>{},...f}=Kr(t,e),m=await tu(e,f),p=Gr(r),v=lc(r),b=er(r)==="y",{width:w,height:S}=a.floating;let R,k;p==="top"||p==="bottom"?(R=p,k=v===(await(c.isRTL==null?void 0:c.isRTL(l.floating))?"start":"end")?"left":"right"):(k=p,R=v==="end"?"top":"bottom");const N=S-m.top-m.bottom,O=w-m.left-m.right,I=Is(S-m[R],N),D=Is(w-m[k],O),j=!e.middlewareData.shift;let H=I,z=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(z=O),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(H=N),j&&!v){const ie=si(m.left,0),re=si(m.right,0),de=si(m.top,0),Ee=si(m.bottom,0);b?z=w-2*(ie!==0||re!==0?ie+re:si(m.left,m.right)):H=S-2*(de!==0||Ee!==0?de+Ee:si(m.top,m.bottom))}await d({...e,availableWidth:z,availableHeight:H});const G=await c.getDimensions(l.floating);return w!==G.width||S!==G.height?{reset:{rects:!0}}:{}}}};function ah(){return typeof window<"u"}function uc(t){return vD(t)?(t.nodeName||"").toLowerCase():"#document"}function ci(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function hr(t){var e;return(e=(vD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vD(t){return ah()?t instanceof Node||t instanceof ci(t).Node:!1}function Fi(t){return ah()?t instanceof Element||t instanceof ci(t).Element:!1}function cr(t){return ah()?t instanceof HTMLElement||t instanceof ci(t).HTMLElement:!1}function Lk(t){return!ah()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ci(t).ShadowRoot}const Dq=new Set(["inline","contents"]);function hu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Vi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Dq.has(r)}const Nq=new Set(["table","td","th"]);function Mq(t){return Nq.has(uc(t))}const Oq=[":popover-open",":modal"];function oh(t){return Oq.some(e=>{try{return t.matches(e)}catch{return!1}})}const Iq=["transform","translate","scale","rotate","perspective"],Uq=["transform","translate","scale","rotate","perspective","filter"],Lq=["paint","layout","strict","content"];function ib(t){const e=rb(),n=Fi(t)?Vi(t):t;return Iq.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Uq.some(i=>(n.willChange||"").includes(i))||Lq.some(i=>(n.contain||"").includes(i))}function jq(t){let e=Us(t);for(;cr(e)&&!Zo(e);){if(ib(e))return e;if(oh(e))return null;e=Us(e)}return null}function rb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Bq=new Set(["html","body","#document"]);function Zo(t){return Bq.has(uc(t))}function Vi(t){return ci(t).getComputedStyle(t)}function ch(t){return Fi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Us(t){if(uc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Lk(t)&&t.host||hr(t);return Lk(e)?e.host:e}function yD(t){const e=Us(t);return Zo(e)?t.ownerDocument?t.ownerDocument.body:t.body:cr(e)&&hu(e)?e:yD(e)}function nu(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=yD(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),c=ci(r);if(a){const l=p0(c);return e.concat(c,c.visualViewport||[],hu(r)?r:[],l&&n?nu(l):[])}return e.concat(r,nu(r,[],n))}function p0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function bD(t){const e=Vi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=cr(t),a=r?t.offsetWidth:n,c=r?t.offsetHeight:i,l=Lf(n)!==a||Lf(i)!==c;return l&&(n=a,i=c),{width:n,height:i,$:l}}function sb(t){return Fi(t)?t:t.contextElement}function qo(t){const e=sb(t);if(!cr(e))return sr(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=bD(e);let c=(a?Lf(n.width):n.width)/i,l=(a?Lf(n.height):n.height)/r;return(!c||!Number.isFinite(c))&&(c=1),(!l||!Number.isFinite(l))&&(l=1),{x:c,y:l}}const Fq=sr(0);function SD(t){const e=ci(t);return!rb()||!e.visualViewport?Fq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ci(t)?!1:e}function ka(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=sb(t);let c=sr(1);e&&(i?Fi(i)&&(c=qo(i)):c=qo(t));const l=Vq(a,n,i)?SD(a):sr(0);let d=(r.left+l.x)/c.x,f=(r.top+l.y)/c.y,m=r.width/c.x,p=r.height/c.y;if(a){const v=ci(a),b=i&&Fi(i)?ci(i):i;let w=v,S=p0(w);for(;S&&i&&b!==w;){const R=qo(S),k=S.getBoundingClientRect(),N=Vi(S),O=k.left+(S.clientLeft+parseFloat(N.paddingLeft))*R.x,I=k.top+(S.clientTop+parseFloat(N.paddingTop))*R.y;d*=R.x,f*=R.y,m*=R.x,p*=R.y,d+=O,f+=I,w=ci(S),S=p0(w)}}return Bf({width:m,height:p,x:d,y:f})}function ab(t,e){const n=ch(t).scrollLeft;return e?e.left+n:ka(hr(t)).left+n}function TD(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:ab(t,i)),a=i.top+e.scrollTop;return{x:r,y:a}}function zq(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",c=hr(i),l=e?oh(e.floating):!1;if(i===c||l&&a)return n;let d={scrollLeft:0,scrollTop:0},f=sr(1);const m=sr(0),p=cr(i);if((p||!p&&!a)&&((uc(i)!=="body"||hu(c))&&(d=ch(i)),cr(i))){const b=ka(i);f=qo(i),m.x=b.x+i.clientLeft,m.y=b.y+i.clientTop}const v=c&&!p&&!a?TD(c,d,!0):sr(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+m.x+v.x,y:n.y*f.y-d.scrollTop*f.y+m.y+v.y}}function Hq(t){return Array.from(t.getClientRects())}function qq(t){const e=hr(t),n=ch(t),i=t.ownerDocument.body,r=si(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=si(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let c=-n.scrollLeft+ab(t);const l=-n.scrollTop;return Vi(i).direction==="rtl"&&(c+=si(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:c,y:l}}function Kq(t,e){const n=ci(t),i=hr(t),r=n.visualViewport;let a=i.clientWidth,c=i.clientHeight,l=0,d=0;if(r){a=r.width,c=r.height;const f=rb();(!f||f&&e==="fixed")&&(l=r.offsetLeft,d=r.offsetTop)}return{width:a,height:c,x:l,y:d}}const Gq=new Set(["absolute","fixed"]);function Yq(t,e){const n=ka(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=cr(t)?qo(t):sr(1),c=t.clientWidth*a.x,l=t.clientHeight*a.y,d=r*a.x,f=i*a.y;return{width:c,height:l,x:d,y:f}}function jk(t,e,n){let i;if(e==="viewport")i=Kq(t,n);else if(e==="document")i=qq(hr(t));else if(Fi(e))i=Yq(e,n);else{const r=SD(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Bf(i)}function xD(t,e){const n=Us(t);return n===e||!Fi(n)||Zo(n)?!1:Vi(n).position==="fixed"||xD(n,e)}function Wq(t,e){const n=e.get(t);if(n)return n;let i=nu(t,[],!1).filter(l=>Fi(l)&&uc(l)!=="body"),r=null;const a=Vi(t).position==="fixed";let c=a?Us(t):t;for(;Fi(c)&&!Zo(c);){const l=Vi(c),d=ib(c);!d&&l.position==="fixed"&&(r=null),(a?!d&&!r:!d&&l.position==="static"&&!!r&&Gq.has(r.position)||hu(c)&&!d&&xD(t,c))?i=i.filter(m=>m!==c):r=l,c=Us(c)}return e.set(t,i),i}function $q(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const c=[...n==="clippingAncestors"?oh(e)?[]:Wq(e,this._c):[].concat(n),i],l=c[0],d=c.reduce((f,m)=>{const p=jk(e,m,r);return f.top=si(p.top,f.top),f.right=Is(p.right,f.right),f.bottom=Is(p.bottom,f.bottom),f.left=si(p.left,f.left),f},jk(e,l,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Xq(t){const{width:e,height:n}=bD(t);return{width:e,height:n}}function Zq(t,e,n){const i=cr(e),r=hr(e),a=n==="fixed",c=ka(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const d=sr(0);function f(){d.x=ab(r)}if(i||!i&&!a)if((uc(e)!=="body"||hu(r))&&(l=ch(e)),i){const b=ka(e,!0,a,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else r&&f();a&&!i&&r&&f();const m=r&&!i&&!a?TD(r,l):sr(0),p=c.left+l.scrollLeft-d.x-m.x,v=c.top+l.scrollTop-d.y-m.y;return{x:p,y:v,width:c.width,height:c.height}}function Rg(t){return Vi(t).position==="static"}function Bk(t,e){if(!cr(t)||Vi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return hr(t)===n&&(n=n.ownerDocument.body),n}function wD(t,e){const n=ci(t);if(oh(t))return n;if(!cr(t)){let r=Us(t);for(;r&&!Zo(r);){if(Fi(r)&&!Rg(r))return r;r=Us(r)}return n}let i=Bk(t,e);for(;i&&Mq(i)&&Rg(i);)i=Bk(i,e);return i&&Zo(i)&&Rg(i)&&!ib(i)?n:i||jq(t)||n}const Jq=async function(t){const e=this.getOffsetParent||wD,n=this.getDimensions,i=await n(t.floating);return{reference:Zq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Qq(t){return Vi(t).direction==="rtl"}const eK={convertOffsetParentRelativeRectToViewportRelativeRect:zq,getDocumentElement:hr,getClippingRect:$q,getOffsetParent:wD,getElementRects:Jq,getClientRects:Hq,getDimensions:Xq,getScale:qo,isElement:Fi,isRTL:Qq};function CD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function tK(t,e){let n=null,i;const r=hr(t);function a(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function c(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),a();const f=t.getBoundingClientRect(),{left:m,top:p,width:v,height:b}=f;if(l||e(),!v||!b)return;const w=Vd(p),S=Vd(r.clientWidth-(m+v)),R=Vd(r.clientHeight-(p+b)),k=Vd(m),O={rootMargin:-w+"px "+-S+"px "+-R+"px "+-k+"px",threshold:si(0,Is(1,d))||1};let I=!0;function D(j){const H=j[0].intersectionRatio;if(H!==d){if(!I)return c();H?c(!1,H):i=setTimeout(()=>{c(!1,1e-7)},1e3)}H===1&&!CD(f,t.getBoundingClientRect())&&c(),I=!1}try{n=new IntersectionObserver(D,{...O,root:r.ownerDocument})}catch{n=new IntersectionObserver(D,O)}n.observe(t)}return c(!0),a}function nK(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,f=sb(t),m=r||a?[...f?nu(f):[],...nu(e)]:[];m.forEach(k=>{r&&k.addEventListener("scroll",n,{passive:!0}),a&&k.addEventListener("resize",n)});const p=f&&l?tK(f,n):null;let v=-1,b=null;c&&(b=new ResizeObserver(k=>{let[N]=k;N&&N.target===f&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var O;(O=b)==null||O.observe(e)})),n()}),f&&!d&&b.observe(f),b.observe(e));let w,S=d?ka(t):null;d&&R();function R(){const k=ka(t);S&&!CD(S,k)&&n(),S=k,w=requestAnimationFrame(R)}return n(),()=>{var k;m.forEach(N=>{r&&N.removeEventListener("scroll",n),a&&N.removeEventListener("resize",n)}),p?.(),(k=b)==null||k.disconnect(),b=null,d&&cancelAnimationFrame(w)}}const iK=Rq,rK=Aq,sK=Cq,aK=Pq,oK=kq,Fk=wq,cK=_q,lK=(t,e,n)=>{const i=new Map,r={platform:eK,...n},a={...r.platform,_c:i};return xq(t,e,{...r,platform:a})};var uK=typeof document<"u",dK=function(){},pf=uK?T.useLayoutEffect:dK;function Ff(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Ff(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!(a==="_owner"&&t.$$typeof)&&!Ff(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function kD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Vk(t,e){const n=kD(t);return Math.round(e*n)/n}function Ag(t){const e=T.useRef(t);return pf(()=>{e.current=t}),e}function fK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:c}={},transform:l=!0,whileElementsMounted:d,open:f}=t,[m,p]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=T.useState(i);Ff(v,i)||b(i);const[w,S]=T.useState(null),[R,k]=T.useState(null),N=T.useCallback(J=>{J!==j.current&&(j.current=J,S(J))},[]),O=T.useCallback(J=>{J!==H.current&&(H.current=J,k(J))},[]),I=a||w,D=c||R,j=T.useRef(null),H=T.useRef(null),z=T.useRef(m),G=d!=null,ie=Ag(d),re=Ag(r),de=Ag(f),Ee=T.useCallback(()=>{if(!j.current||!H.current)return;const J={placement:e,strategy:n,middleware:v};re.current&&(J.platform=re.current),lK(j.current,H.current,J).then(_e=>{const V={..._e,isPositioned:de.current!==!1};Ae.current&&!Ff(z.current,V)&&(z.current=V,su.flushSync(()=>{p(V)}))})},[v,e,n,re,de]);pf(()=>{f===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,p(J=>({...J,isPositioned:!1})))},[f]);const Ae=T.useRef(!1);pf(()=>(Ae.current=!0,()=>{Ae.current=!1}),[]),pf(()=>{if(I&&(j.current=I),D&&(H.current=D),I&&D){if(ie.current)return ie.current(I,D,Ee);Ee()}},[I,D,Ee,ie,G]);const Me=T.useMemo(()=>({reference:j,floating:H,setReference:N,setFloating:O}),[N,O]),Y=T.useMemo(()=>({reference:I,floating:D}),[I,D]),se=T.useMemo(()=>{const J={position:n,left:0,top:0};if(!Y.floating)return J;const _e=Vk(Y.floating,m.x),V=Vk(Y.floating,m.y);return l?{...J,transform:"translate("+_e+"px, "+V+"px)",...kD(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_e,top:V}},[n,l,Y.floating,m.x,m.y]);return T.useMemo(()=>({...m,update:Ee,refs:Me,elements:Y,floatingStyles:se}),[m,Ee,Me,Y,se])}const hK=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?Fk({element:i.current,padding:r}).fn(n):{}:i?Fk({element:i,padding:r}).fn(n):{}}}},mK=(t,e)=>({...iK(t),options:[t,e]}),pK=(t,e)=>({...rK(t),options:[t,e]}),gK=(t,e)=>({...cK(t),options:[t,e]}),vK=(t,e)=>({...sK(t),options:[t,e]}),yK=(t,e)=>({...aK(t),options:[t,e]}),bK=(t,e)=>({...oK(t),options:[t,e]}),SK=(t,e)=>({...hK(t),options:[t,e]});var TK="Arrow",ED=T.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...a}=t;return x.jsx(Gt.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});ED.displayName=TK;var xK=ED;function wK(t){const[e,n]=T.useState(void 0);return $n(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let c,l;if("borderBoxSize"in a){const d=a.borderBoxSize,f=Array.isArray(d)?d[0]:d;c=f.inlineSize,l=f.blockSize}else c=t.offsetWidth,l=t.offsetHeight;n({width:c,height:l})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var ob="Popper",[RD,AD]=Jy(ob),[CK,_D]=RD(ob),PD=t=>{const{__scopePopper:e,children:n}=t,[i,r]=T.useState(null);return x.jsx(CK,{scope:e,anchor:i,onAnchorChange:r,children:n})};PD.displayName=ob;var DD="PopperAnchor",ND=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,a=_D(DD,n),c=T.useRef(null),l=_n(e,c);return T.useEffect(()=>{a.onAnchorChange(i?.current||c.current)}),i?null:x.jsx(Gt.div,{...r,ref:l})});ND.displayName=DD;var cb="PopperContent",[kK,EK]=RD(cb),MD=T.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:c=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:w,...S}=t,R=_D(cb,n),[k,N]=T.useState(null),O=_n(e,be=>N(be)),[I,D]=T.useState(null),j=wK(I),H=j?.width??0,z=j?.height??0,G=i+(a!=="center"?"-"+a:""),ie=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},re=Array.isArray(f)?f:[f],de=re.length>0,Ee={padding:ie,boundary:re.filter(AK),altBoundary:de},{refs:Ae,floatingStyles:Me,placement:Y,isPositioned:se,middlewareData:J}=fK({strategy:"fixed",placement:G,whileElementsMounted:(...be)=>nK(...be,{animationFrame:b==="always"}),elements:{reference:R.anchor},middleware:[mK({mainAxis:r+z,alignmentAxis:c}),d&&pK({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?gK():void 0,...Ee}),d&&vK({...Ee}),yK({...Ee,apply:({elements:be,rects:Ce,availableWidth:Ve,availableHeight:qe})=>{const{width:Xe,height:Ye}=Ce.reference,kt=be.floating.style;kt.setProperty("--radix-popper-available-width",`${Ve}px`),kt.setProperty("--radix-popper-available-height",`${qe}px`),kt.setProperty("--radix-popper-anchor-width",`${Xe}px`),kt.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),I&&SK({element:I,padding:l}),_K({arrowWidth:H,arrowHeight:z}),v&&bK({strategy:"referenceHidden",...Ee})]}),[_e,V]=UD(Y),Q=Ca(w);$n(()=>{se&&Q?.()},[se,Q]);const me=J.arrow?.x,le=J.arrow?.y,Te=J.arrow?.centerOffset!==0,[Ne,Pe]=T.useState();return $n(()=>{k&&Pe(window.getComputedStyle(k).zIndex)},[k]),x.jsx("div",{ref:Ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...Me,transform:se?Me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[J.transformOrigin?.x,J.transformOrigin?.y].join(" "),...J.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(kK,{scope:n,placedSide:_e,onArrowChange:D,arrowX:me,arrowY:le,shouldHideArrow:Te,children:x.jsx(Gt.div,{"data-side":_e,"data-align":V,...S,ref:O,style:{...S.style,animation:se?void 0:"none"}})})})});MD.displayName=cb;var OD="PopperArrow",RK={top:"bottom",right:"left",bottom:"top",left:"right"},ID=T.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,a=EK(OD,i),c=RK[a.placedSide];return x.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:x.jsx(xK,{...r,ref:n,style:{...r.style,display:"block"}})})});ID.displayName=OD;function AK(t){return t!==null}var _K=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,c=r.arrow?.centerOffset!==0,l=c?0:t.arrowWidth,d=c?0:t.arrowHeight,[f,m]=UD(n),p={start:"0%",center:"50%",end:"100%"}[m],v=(r.arrow?.x??0)+l/2,b=(r.arrow?.y??0)+d/2;let w="",S="";return f==="bottom"?(w=c?p:`${v}px`,S=`${-d}px`):f==="top"?(w=c?p:`${v}px`,S=`${i.floating.height+d}px`):f==="right"?(w=`${-d}px`,S=c?p:`${b}px`):f==="left"&&(w=`${i.floating.width+d}px`,S=c?p:`${b}px`),{data:{x:w,y:S}}}});function UD(t){const[e,n="center"]=t.split("-");return[e,n]}var PK=PD,DK=ND,NK=MD,MK=ID,OK="Portal",LD=T.forwardRef((t,e)=>{const{container:n,...i}=t,[r,a]=T.useState(!1);$n(()=>a(!0),[]);const c=n||r&&globalThis?.document?.body;return c?SE.createPortal(x.jsx(Gt.div,{...i,ref:e}),c):null});LD.displayName=OK;function IK(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var jD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),UK="VisuallyHidden",LK=T.forwardRef((t,e)=>x.jsx(Gt.span,{...t,ref:e,style:{...jD,...t.style}}));LK.displayName=UK;var jK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},wo=new WeakMap,zd=new WeakMap,Hd={},_g=0,BD=function(t){return t&&(t.host||BD(t.parentNode))},BK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=BD(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},FK=function(t,e,n,i){var r=BK(e,Array.isArray(t)?t:[t]);Hd[n]||(Hd[n]=new WeakMap);var a=Hd[n],c=[],l=new Set,d=new Set(r),f=function(p){!p||l.has(p)||(l.add(p),f(p.parentNode))};r.forEach(f);var m=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(v){if(l.has(v))m(v);else try{var b=v.getAttribute(i),w=b!==null&&b!=="false",S=(wo.get(v)||0)+1,R=(a.get(v)||0)+1;wo.set(v,S),a.set(v,R),c.push(v),S===1&&w&&zd.set(v,!0),R===1&&v.setAttribute(n,"true"),w||v.setAttribute(i,"true")}catch(k){console.error("aria-hidden: cannot operate on ",v,k)}})};return m(e),l.clear(),_g++,function(){c.forEach(function(p){var v=wo.get(p)-1,b=a.get(p)-1;wo.set(p,v),a.set(p,b),v||(zd.has(p)||p.removeAttribute(i),zd.delete(p)),b||p.removeAttribute(n)}),_g--,_g||(wo=new WeakMap,wo=new WeakMap,zd=new WeakMap,Hd={})}},VK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=jK(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),FK(i,r,n,"aria-hidden")):function(){return null}},Es=function(){return Es=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Es.apply(this,arguments)};function zK(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function HK(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var gf="right-scroll-bar-position",vf="width-before-scroll-bar",qK="with-scroll-bars-hidden",KK="--removed-body-scroll-bar-size";function Pg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function GK(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var YK=typeof window<"u"?T.useLayoutEffect:T.useEffect,zk=new WeakMap;function WK(t,e){var n=GK(null,function(i){return t.forEach(function(r){return Pg(r,i)})});return YK(function(){var i=zk.get(n);if(i){var r=new Set(i),a=new Set(t),c=n.current;r.forEach(function(l){a.has(l)||Pg(l,null)}),a.forEach(function(l){r.has(l)||Pg(l,c)})}zk.set(n,t)},[t]),n}var Vf=function(){return Vf=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vf.apply(this,arguments)};function $K(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function XK(t){return t}function ZK(t,e){e===void 0&&(e=XK);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var c=e(a,i);return n.push(c),function(){n=n.filter(function(l){return l!==c})}},assignSyncMedium:function(a){for(i=!0;n.length;){var c=n;n=[],c.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){i=!0;var c=[];if(n.length){var l=n;n=[],l.forEach(a),c=n}var d=function(){var m=c;c=[],m.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(m){c.push(m),f()},filter:function(m){return c=c.filter(m),n}}}};return r}function JK(t){t===void 0&&(t={});var e=ZK(null);return e.options=Vf({async:!0,ssr:!1},t),e}var FD=function(t){var e=t.sideCar,n=$K(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return T.createElement(i,Vf({},n))};FD.isSideCarExport=!0;function QK(t,e){return t.useMedium(e),FD}var VD=JK(),Dg=function(){},lh=T.forwardRef(function(t,e){var n=T.useRef(null),i=T.useState({onScrollCapture:Dg,onWheelCapture:Dg,onTouchMoveCapture:Dg}),r=i[0],a=i[1],c=t.forwardProps,l=t.children,d=t.className,f=t.removeScrollBar,m=t.enabled,p=t.shards,v=t.sideCar,b=t.noRelative,w=t.noIsolation,S=t.inert,R=t.allowPinchZoom,k=t.as,N=k===void 0?"div":k,O=t.gapMode,I=zK(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=v,j=WK([n,e]),H=Es(Es({},I),r);return T.createElement(T.Fragment,null,m&&T.createElement(D,{sideCar:VD,removeScrollBar:f,shards:p,noRelative:b,noIsolation:w,inert:S,setCallbacks:a,allowPinchZoom:!!R,lockRef:n,gapMode:O}),c?T.cloneElement(T.Children.only(l),Es(Es({},H),{ref:j})):T.createElement(N,Es({},H,{className:d,ref:j}),l))});lh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};lh.classNames={fullWidth:vf,zeroRight:gf};var eG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function tG(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=eG();return e&&t.setAttribute("nonce",e),t}function nG(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function iG(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var rG=function(){var t=0,e=null;return{add:function(n){t==0&&(e=tG())&&(nG(e,n),iG(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},sG=function(){var t=rG();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},zD=function(){var t=sG(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},aG={left:0,top:0,right:0,gap:0},Ng=function(t){return parseInt(t||"",10)||0},oG=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Ng(n),Ng(i),Ng(r)]},cG=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return aG;var e=oG(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},lG=zD(),Ko="data-scroll-locked",uG=function(t,e,n,i){var r=t.left,a=t.top,c=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(qK,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(l,"px ").concat(i,`;
  }
  body[`).concat(Ko,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(gf,` {
    right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(vf,` {
    margin-right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(gf," .").concat(gf,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(vf," .").concat(vf,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Ko,`] {
    `).concat(KK,": ").concat(l,`px;
  }
`)},Hk=function(){var t=parseInt(document.body.getAttribute(Ko)||"0",10);return isFinite(t)?t:0},dG=function(){T.useEffect(function(){return document.body.setAttribute(Ko,(Hk()+1).toString()),function(){var t=Hk()-1;t<=0?document.body.removeAttribute(Ko):document.body.setAttribute(Ko,t.toString())}},[])},fG=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;dG();var a=T.useMemo(function(){return cG(r)},[r]);return T.createElement(lG,{styles:uG(a,!e,r,n?"":"!important")})},g0=!1;if(typeof window<"u")try{var qd=Object.defineProperty({},"passive",{get:function(){return g0=!0,!0}});window.addEventListener("test",qd,qd),window.removeEventListener("test",qd,qd)}catch{g0=!1}var Co=g0?{passive:!1}:!1,hG=function(t){return t.tagName==="TEXTAREA"},HD=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!hG(t)&&n[e]==="visible")},mG=function(t){return HD(t,"overflowY")},pG=function(t){return HD(t,"overflowX")},qk=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=qD(t,i);if(r){var a=KD(t,i),c=a[1],l=a[2];if(c>l)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},gG=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},vG=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},qD=function(t,e){return t==="v"?mG(e):pG(e)},KD=function(t,e){return t==="v"?gG(e):vG(e)},yG=function(t,e){return t==="h"&&e==="rtl"?-1:1},bG=function(t,e,n,i,r){var a=yG(t,window.getComputedStyle(e).direction),c=a*i,l=n.target,d=e.contains(l),f=!1,m=c>0,p=0,v=0;do{if(!l)break;var b=KD(t,l),w=b[0],S=b[1],R=b[2],k=S-R-a*w;(w||k)&&qD(t,l)&&(p+=k,v+=w);var N=l.parentNode;l=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(m&&Math.abs(p)<1||!m&&Math.abs(v)<1)&&(f=!0),f},Kd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Kk=function(t){return[t.deltaX,t.deltaY]},Gk=function(t){return t&&"current"in t?t.current:t},SG=function(t,e){return t[0]===e[0]&&t[1]===e[1]},TG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},xG=0,ko=[];function wG(t){var e=T.useRef([]),n=T.useRef([0,0]),i=T.useRef(),r=T.useState(xG++)[0],a=T.useState(zD)[0],c=T.useRef(t);T.useEffect(function(){c.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var S=HK([t.lockRef.current],(t.shards||[]).map(Gk),!0).filter(Boolean);return S.forEach(function(R){return R.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),S.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var l=T.useCallback(function(S,R){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!c.current.allowPinchZoom;var k=Kd(S),N=n.current,O="deltaX"in S?S.deltaX:N[0]-k[0],I="deltaY"in S?S.deltaY:N[1]-k[1],D,j=S.target,H=Math.abs(O)>Math.abs(I)?"h":"v";if("touches"in S&&H==="h"&&j.type==="range")return!1;var z=qk(H,j);if(!z)return!0;if(z?D=H:(D=H==="v"?"h":"v",z=qk(H,j)),!z)return!1;if(!i.current&&"changedTouches"in S&&(O||I)&&(i.current=D),!D)return!0;var G=i.current||D;return bG(G,R,S,G==="h"?O:I)},[]),d=T.useCallback(function(S){var R=S;if(!(!ko.length||ko[ko.length-1]!==a)){var k="deltaY"in R?Kk(R):Kd(R),N=e.current.filter(function(D){return D.name===R.type&&(D.target===R.target||R.target===D.shadowParent)&&SG(D.delta,k)})[0];if(N&&N.should){R.cancelable&&R.preventDefault();return}if(!N){var O=(c.current.shards||[]).map(Gk).filter(Boolean).filter(function(D){return D.contains(R.target)}),I=O.length>0?l(R,O[0]):!c.current.noIsolation;I&&R.cancelable&&R.preventDefault()}}},[]),f=T.useCallback(function(S,R,k,N){var O={name:S,delta:R,target:k,should:N,shadowParent:CG(k)};e.current.push(O),setTimeout(function(){e.current=e.current.filter(function(I){return I!==O})},1)},[]),m=T.useCallback(function(S){n.current=Kd(S),i.current=void 0},[]),p=T.useCallback(function(S){f(S.type,Kk(S),S.target,l(S,t.lockRef.current))},[]),v=T.useCallback(function(S){f(S.type,Kd(S),S.target,l(S,t.lockRef.current))},[]);T.useEffect(function(){return ko.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",d,Co),document.addEventListener("touchmove",d,Co),document.addEventListener("touchstart",m,Co),function(){ko=ko.filter(function(S){return S!==a}),document.removeEventListener("wheel",d,Co),document.removeEventListener("touchmove",d,Co),document.removeEventListener("touchstart",m,Co)}},[]);var b=t.removeScrollBar,w=t.inert;return T.createElement(T.Fragment,null,w?T.createElement(a,{styles:TG(r)}):null,b?T.createElement(fG,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function CG(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const kG=QK(VD,wG);var GD=T.forwardRef(function(t,e){return T.createElement(lh,Es({},t,{ref:e,sideCar:kG}))});GD.classNames=lh.classNames;var EG=[" ","Enter","ArrowUp","ArrowDown"],RG=[" ","Enter"],Ea="Select",[uh,dh,AG]=qH(Ea),[dc,rW]=Jy(Ea,[AG,AD]),fh=AD(),[_G,zs]=dc(Ea),[PG,DG]=dc(Ea),YD=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:a,value:c,defaultValue:l,onValueChange:d,dir:f,name:m,autoComplete:p,disabled:v,required:b,form:w}=t,S=fh(e),[R,k]=T.useState(null),[N,O]=T.useState(null),[I,D]=T.useState(!1),j=GH(f),[H,z]=d0({prop:i,defaultProp:r??!1,onChange:a,caller:Ea}),[G,ie]=d0({prop:c,defaultProp:l,onChange:d,caller:Ea}),re=T.useRef(null),de=R?w||!!R.closest("form"):!0,[Ee,Ae]=T.useState(new Set),Me=Array.from(Ee).map(Y=>Y.props.value).join(";");return x.jsx(PK,{...S,children:x.jsxs(_G,{required:b,scope:e,trigger:R,onTriggerChange:k,valueNode:N,onValueNodeChange:O,valueNodeHasChildren:I,onValueNodeHasChildrenChange:D,contentId:Qy(),value:G,onValueChange:ie,open:H,onOpenChange:z,dir:j,triggerPointerDownPosRef:re,disabled:v,children:[x.jsx(uh.Provider,{scope:e,children:x.jsx(PG,{scope:t.__scopeSelect,onNativeOptionAdd:T.useCallback(Y=>{Ae(se=>new Set(se).add(Y))},[]),onNativeOptionRemove:T.useCallback(Y=>{Ae(se=>{const J=new Set(se);return J.delete(Y),J})},[]),children:n})}),de?x.jsxs(pN,{"aria-hidden":!0,required:b,tabIndex:-1,name:m,autoComplete:p,value:G,onChange:Y=>ie(Y.target.value),disabled:v,form:w,children:[G===void 0?x.jsx("option",{value:""}):null,Array.from(Ee)]},Me):null]})})};YD.displayName=Ea;var WD="SelectTrigger",$D=T.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,a=fh(n),c=zs(WD,n),l=c.disabled||i,d=_n(e,c.onTriggerChange),f=dh(n),m=T.useRef("touch"),[p,v,b]=vN(S=>{const R=f().filter(O=>!O.disabled),k=R.find(O=>O.value===c.value),N=yN(R,S,k);N!==void 0&&c.onValueChange(N.value)}),w=S=>{l||(c.onOpenChange(!0),b()),S&&(c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return x.jsx(DK,{asChild:!0,...a,children:x.jsx(Gt.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":gN(c.value)?"":void 0,...r,ref:d,onClick:Qt(r.onClick,S=>{S.currentTarget.focus(),m.current!=="mouse"&&w(S)}),onPointerDown:Qt(r.onPointerDown,S=>{m.current=S.pointerType;const R=S.target;R.hasPointerCapture(S.pointerId)&&R.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(w(S),S.preventDefault())}),onKeyDown:Qt(r.onKeyDown,S=>{const R=p.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&v(S.key),!(R&&S.key===" ")&&EG.includes(S.key)&&(w(),S.preventDefault())})})})});$D.displayName=WD;var XD="SelectValue",ZD=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:a,placeholder:c="",...l}=t,d=zs(XD,n),{onValueNodeHasChildrenChange:f}=d,m=a!==void 0,p=_n(e,d.onValueNodeChange);return $n(()=>{f(m)},[f,m]),x.jsx(Gt.span,{...l,ref:p,style:{pointerEvents:"none"},children:gN(d.value)?x.jsx(x.Fragment,{children:c}):a})});ZD.displayName=XD;var NG="SelectIcon",JD=T.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return x.jsx(Gt.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});JD.displayName=NG;var MG="SelectPortal",QD=t=>x.jsx(LD,{asChild:!0,...t});QD.displayName=MG;var Ra="SelectContent",eN=T.forwardRef((t,e)=>{const n=zs(Ra,t.__scopeSelect),[i,r]=T.useState();if($n(()=>{r(new DocumentFragment)},[]),!n.open){const a=i;return a?su.createPortal(x.jsx(tN,{scope:t.__scopeSelect,children:x.jsx(uh.Slot,{scope:t.__scopeSelect,children:x.jsx("div",{children:t.children})})}),a):null}return x.jsx(nN,{...t,ref:e})});eN.displayName=Ra;var Mi=10,[tN,Hs]=dc(Ra),OG="SelectContentImpl",IG=eu("SelectContent.RemoveScroll"),nN=T.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:a,onPointerDownOutside:c,side:l,sideOffset:d,align:f,alignOffset:m,arrowPadding:p,collisionBoundary:v,collisionPadding:b,sticky:w,hideWhenDetached:S,avoidCollisions:R,...k}=t,N=zs(Ra,n),[O,I]=T.useState(null),[D,j]=T.useState(null),H=_n(e,be=>I(be)),[z,G]=T.useState(null),[ie,re]=T.useState(null),de=dh(n),[Ee,Ae]=T.useState(!1),Me=T.useRef(!1);T.useEffect(()=>{if(O)return VK(O)},[O]),tq();const Y=T.useCallback(be=>{const[Ce,...Ve]=de().map(Ye=>Ye.ref.current),[qe]=Ve.slice(-1),Xe=document.activeElement;for(const Ye of be)if(Ye===Xe||(Ye?.scrollIntoView({block:"nearest"}),Ye===Ce&&D&&(D.scrollTop=0),Ye===qe&&D&&(D.scrollTop=D.scrollHeight),Ye?.focus(),document.activeElement!==Xe))return},[de,D]),se=T.useCallback(()=>Y([z,O]),[Y,z,O]);T.useEffect(()=>{Ee&&se()},[Ee,se]);const{onOpenChange:J,triggerPointerDownPosRef:_e}=N;T.useEffect(()=>{if(O){let be={x:0,y:0};const Ce=qe=>{be={x:Math.abs(Math.round(qe.pageX)-(_e.current?.x??0)),y:Math.abs(Math.round(qe.pageY)-(_e.current?.y??0))}},Ve=qe=>{be.x<=10&&be.y<=10?qe.preventDefault():O.contains(qe.target)||J(!1),document.removeEventListener("pointermove",Ce),_e.current=null};return _e.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",Ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",Ve,{capture:!0})}}},[O,J,_e]),T.useEffect(()=>{const be=()=>J(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[J]);const[V,Q]=vN(be=>{const Ce=de().filter(Xe=>!Xe.disabled),Ve=Ce.find(Xe=>Xe.ref.current===document.activeElement),qe=yN(Ce,be,Ve);qe&&setTimeout(()=>qe.ref.current.focus())}),me=T.useCallback((be,Ce,Ve)=>{const qe=!Me.current&&!Ve;(N.value!==void 0&&N.value===Ce||qe)&&(G(be),qe&&(Me.current=!0))},[N.value]),le=T.useCallback(()=>O?.focus(),[O]),Te=T.useCallback((be,Ce,Ve)=>{const qe=!Me.current&&!Ve;(N.value!==void 0&&N.value===Ce||qe)&&re(be)},[N.value]),Ne=i==="popper"?v0:iN,Pe=Ne===v0?{side:l,sideOffset:d,align:f,alignOffset:m,arrowPadding:p,collisionBoundary:v,collisionPadding:b,sticky:w,hideWhenDetached:S,avoidCollisions:R}:{};return x.jsx(tN,{scope:n,content:O,viewport:D,onViewportChange:j,itemRefCallback:me,selectedItem:z,onItemLeave:le,itemTextRefCallback:Te,focusSelectedItem:se,selectedItemText:ie,position:i,isPositioned:Ee,searchRef:V,children:x.jsx(GD,{as:IG,allowPinchZoom:!0,children:x.jsx(hD,{asChild:!0,trapped:N.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:Qt(r,be=>{N.trigger?.focus({preventScroll:!0}),be.preventDefault()}),children:x.jsx(dD,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:x.jsx(Ne,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:be=>be.preventDefault(),...k,...Pe,onPlaced:()=>Ae(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:Qt(k.onKeyDown,be=>{const Ce=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!Ce&&be.key.length===1&&Q(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let qe=de().filter(Xe=>!Xe.disabled).map(Xe=>Xe.ref.current);if(["ArrowUp","End"].includes(be.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Xe=be.target,Ye=qe.indexOf(Xe);qe=qe.slice(Ye+1)}setTimeout(()=>Y(qe)),be.preventDefault()}})})})})})})});nN.displayName=OG;var UG="SelectItemAlignedPosition",iN=T.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,a=zs(Ra,n),c=Hs(Ra,n),[l,d]=T.useState(null),[f,m]=T.useState(null),p=_n(e,H=>m(H)),v=dh(n),b=T.useRef(!1),w=T.useRef(!0),{viewport:S,selectedItem:R,selectedItemText:k,focusSelectedItem:N}=c,O=T.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&f&&S&&R&&k){const H=a.trigger.getBoundingClientRect(),z=f.getBoundingClientRect(),G=a.valueNode.getBoundingClientRect(),ie=k.getBoundingClientRect();if(a.dir!=="rtl"){const Xe=ie.left-z.left,Ye=G.left-Xe,kt=H.left-Ye,Lt=H.width+kt,ui=Math.max(Lt,z.width),On=window.innerWidth-Mi,At=Ck(Ye,[Mi,Math.max(Mi,On-ui)]);l.style.minWidth=Lt+"px",l.style.left=At+"px"}else{const Xe=z.right-ie.right,Ye=window.innerWidth-G.right-Xe,kt=window.innerWidth-H.right-Ye,Lt=H.width+kt,ui=Math.max(Lt,z.width),On=window.innerWidth-Mi,At=Ck(Ye,[Mi,Math.max(Mi,On-ui)]);l.style.minWidth=Lt+"px",l.style.right=At+"px"}const re=v(),de=window.innerHeight-Mi*2,Ee=S.scrollHeight,Ae=window.getComputedStyle(f),Me=parseInt(Ae.borderTopWidth,10),Y=parseInt(Ae.paddingTop,10),se=parseInt(Ae.borderBottomWidth,10),J=parseInt(Ae.paddingBottom,10),_e=Me+Y+Ee+J+se,V=Math.min(R.offsetHeight*5,_e),Q=window.getComputedStyle(S),me=parseInt(Q.paddingTop,10),le=parseInt(Q.paddingBottom,10),Te=H.top+H.height/2-Mi,Ne=de-Te,Pe=R.offsetHeight/2,be=R.offsetTop+Pe,Ce=Me+Y+be,Ve=_e-Ce;if(Ce<=Te){const Xe=re.length>0&&R===re[re.length-1].ref.current;l.style.bottom="0px";const Ye=f.clientHeight-S.offsetTop-S.offsetHeight,kt=Math.max(Ne,Pe+(Xe?le:0)+Ye+se),Lt=Ce+kt;l.style.height=Lt+"px"}else{const Xe=re.length>0&&R===re[0].ref.current;l.style.top="0px";const kt=Math.max(Te,Me+S.offsetTop+(Xe?me:0)+Pe)+Ve;l.style.height=kt+"px",S.scrollTop=Ce-Te+S.offsetTop}l.style.margin=`${Mi}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=de+"px",i?.(),requestAnimationFrame(()=>b.current=!0)}},[v,a.trigger,a.valueNode,l,f,S,R,k,a.dir,i]);$n(()=>O(),[O]);const[I,D]=T.useState();$n(()=>{f&&D(window.getComputedStyle(f).zIndex)},[f]);const j=T.useCallback(H=>{H&&w.current===!0&&(O(),N?.(),w.current=!1)},[O,N]);return x.jsx(jG,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:b,onScrollButtonChange:j,children:x.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:x.jsx(Gt.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});iN.displayName=UG;var LG="SelectPopperPosition",v0=T.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Mi,...a}=t,c=fh(n);return x.jsx(NK,{...c,...a,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});v0.displayName=LG;var[jG,lb]=dc(Ra,{}),y0="SelectViewport",rN=T.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,a=Hs(y0,n),c=lb(y0,n),l=_n(e,a.onViewportChange),d=T.useRef(0);return x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),x.jsx(uh.Slot,{scope:n,children:x.jsx(Gt.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Qt(r.onScroll,f=>{const m=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=c;if(v?.current&&p){const b=Math.abs(d.current-m.scrollTop);if(b>0){const w=window.innerHeight-Mi*2,S=parseFloat(p.style.minHeight),R=parseFloat(p.style.height),k=Math.max(S,R);if(k<w){const N=k+b,O=Math.min(w,N),I=N-O;p.style.height=O+"px",p.style.bottom==="0px"&&(m.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});rN.displayName=y0;var sN="SelectGroup",[BG,FG]=dc(sN),VG=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Qy();return x.jsx(BG,{scope:n,id:r,children:x.jsx(Gt.div,{role:"group","aria-labelledby":r,...i,ref:e})})});VG.displayName=sN;var aN="SelectLabel",zG=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=FG(aN,n);return x.jsx(Gt.div,{id:r.id,...i,ref:e})});zG.displayName=aN;var zf="SelectItem",[HG,oN]=dc(zf),cN=T.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:a,...c}=t,l=zs(zf,n),d=Hs(zf,n),f=l.value===i,[m,p]=T.useState(a??""),[v,b]=T.useState(!1),w=_n(e,N=>d.itemRefCallback?.(N,i,r)),S=Qy(),R=T.useRef("touch"),k=()=>{r||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return x.jsx(HG,{scope:n,value:i,disabled:r,textId:S,isSelected:f,onItemTextChange:T.useCallback(N=>{p(O=>O||(N?.textContent??"").trim())},[]),children:x.jsx(uh.ItemSlot,{scope:n,value:i,disabled:r,textValue:m,children:x.jsx(Gt.div,{role:"option","aria-labelledby":S,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:w,onFocus:Qt(c.onFocus,()=>b(!0)),onBlur:Qt(c.onBlur,()=>b(!1)),onClick:Qt(c.onClick,()=>{R.current!=="mouse"&&k()}),onPointerUp:Qt(c.onPointerUp,()=>{R.current==="mouse"&&k()}),onPointerDown:Qt(c.onPointerDown,N=>{R.current=N.pointerType}),onPointerMove:Qt(c.onPointerMove,N=>{R.current=N.pointerType,r?d.onItemLeave?.():R.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Qt(c.onPointerLeave,N=>{N.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Qt(c.onKeyDown,N=>{d.searchRef?.current!==""&&N.key===" "||(RG.includes(N.key)&&k(),N.key===" "&&N.preventDefault())})})})})});cN.displayName=zf;var Pl="SelectItemText",lN=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...a}=t,c=zs(Pl,n),l=Hs(Pl,n),d=oN(Pl,n),f=DG(Pl,n),[m,p]=T.useState(null),v=_n(e,k=>p(k),d.onItemTextChange,k=>l.itemTextRefCallback?.(k,d.value,d.disabled)),b=m?.textContent,w=T.useMemo(()=>x.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:S,onNativeOptionRemove:R}=f;return $n(()=>(S(w),()=>R(w)),[S,R,w]),x.jsxs(x.Fragment,{children:[x.jsx(Gt.span,{id:d.textId,...a,ref:v}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?su.createPortal(a.children,c.valueNode):null]})});lN.displayName=Pl;var uN="SelectItemIndicator",dN=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return oN(uN,n).isSelected?x.jsx(Gt.span,{"aria-hidden":!0,...i,ref:e}):null});dN.displayName=uN;var b0="SelectScrollUpButton",fN=T.forwardRef((t,e)=>{const n=Hs(b0,t.__scopeSelect),i=lb(b0,t.__scopeSelect),[r,a]=T.useState(!1),c=_n(e,i.onScrollButtonChange);return $n(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollTop>0;a(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?x.jsx(mN,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});fN.displayName=b0;var S0="SelectScrollDownButton",hN=T.forwardRef((t,e)=>{const n=Hs(S0,t.__scopeSelect),i=lb(S0,t.__scopeSelect),[r,a]=T.useState(!1),c=_n(e,i.onScrollButtonChange);return $n(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;a(m)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?x.jsx(mN,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});hN.displayName=S0;var mN=T.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,a=Hs("SelectScrollButton",n),c=T.useRef(null),l=dh(n),d=T.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return T.useEffect(()=>()=>d(),[d]),$n(()=>{l().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),x.jsx(Gt.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:Qt(r.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:Qt(r.onPointerMove,()=>{a.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:Qt(r.onPointerLeave,()=>{d()})})}),qG="SelectSeparator",KG=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return x.jsx(Gt.div,{"aria-hidden":!0,...i,ref:e})});KG.displayName=qG;var T0="SelectArrow",GG=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=fh(n),a=zs(T0,n),c=Hs(T0,n);return a.open&&c.position==="popper"?x.jsx(MK,{...r,...i,ref:e}):null});GG.displayName=T0;var YG="SelectBubbleInput",pN=T.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=T.useRef(null),a=_n(i,r),c=IK(e);return T.useEffect(()=>{const l=r.current;if(!l)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==e&&m){const p=new Event("change",{bubbles:!0});m.call(l,e),l.dispatchEvent(p)}},[c,e]),x.jsx(Gt.select,{...n,style:{...jD,...n.style},ref:a,defaultValue:e})});pN.displayName=YG;function gN(t){return t===""||t===void 0}function vN(t){const e=Ca(t),n=T.useRef(""),i=T.useRef(0),r=T.useCallback(c=>{const l=n.current+c;e(l),function d(f){n.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),a=T.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,a]}function yN(t,e,n){const r=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let c=WG(t,Math.max(a,0));r.length===1&&(c=c.filter(f=>f!==n));const d=c.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function WG(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var $G=YD,XG=$D,ZG=ZD,JG=JD,QG=QD,eY=eN,tY=rN,nY=cN,iY=lN,rY=dN,sY=fN,aY=hN;function oY({...t}){return x.jsx($G,{"data-slot":"select",...t})}function cY({...t}){return x.jsx(ZG,{"data-slot":"select-value",...t})}function lY({className:t,size:e="default",children:n,...i}){return x.jsxs(XG,{"data-slot":"select-trigger","data-size":e,className:ft(["flex w-fit cursor-pointer items-center justify-between gap-2","rounded-full px-3 py-2 text-sm whitespace-nowrap","bg-button transition-[color,border,background-color]","disabled:cursor-not-allowed disabled:opacity-50","hover:bg-muted focus:bg-muted hover:text-muted-foreground focus:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 outline-none focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","data-[placeholder]:text-muted-foreground","data-[size=default]:h-9 data-[size=sm]:h-8","*:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2","[&:not([class*='text-'])_svg:not([class*='text-'])]:text-muted-foreground","[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"],t),...i,children:[n,x.jsx(JG,{asChild:!0,children:x.jsx(Zy,{weight:"bold",className:"size-4 transition-colors"})})]})}function uY({className:t,children:e,position:n="popper",...i}){return x.jsx(QG,{children:x.jsxs(eY,{"data-slot":"select-content",className:ft(["bg-popover text-popover-foreground relative z-50 overflow-x-hidden overflow-y-auto rounded-md border drop-shadow-xl/5","max-h-(--radix-select-content-available-height) min-w-[8rem]","origin-(--radix-select-content-transform-origin)","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95","data-[side=top]:slide-in-from-bottom-2","data-[side=right]:slide-in-from-left-2","data-[side=bottom]:slide-in-from-top-2","data-[side=left]:slide-in-from-right-2"],n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[x.jsx(fY,{}),x.jsx(tY,{className:ft("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),x.jsx(hY,{})]})})}function dY({className:t,children:e,...n}){return x.jsxs(nY,{"data-slot":"select-item",className:ft(["relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none","cursor-pointer disabled:cursor-not-allowed","focus:bg-accent focus:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50","*:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2","[&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"],t),...n,children:[x.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:x.jsx(rY,{children:x.jsx(lD,{className:"size-4",weight:"bold"})})}),x.jsx(iY,{children:e})]})}function fY({className:t,...e}){return x.jsx(sY,{"data-slot":"select-scroll-up-button",className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(cD,{className:"size-4",weight:"bold"})})}function hY({className:t,...e}){return x.jsx(aY,{"data-slot":"select-scroll-down-button",className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(Zy,{className:"size-4",weight:"bold"})})}const mY=Xy(["w-full rounded-full px-3 py-2 text-sm cursor-pointer","disabled:not-allowed","hover:bg-button-hover focus:bg-button-hover","data-[state=open]:bg-button-hover data-[state=open]:text-muted-foreground","peer-data-[state=off]/track:bg-button-primary hover:peer-data-[state=off]/track:bg-destructive-hover","peer-data-[state=off]/track:data-[state=open]:bg-destructive-hover"],{variants:{size:{default:"w-[180px]",sm:"w-auto"}},defaultVariants:{size:"default"}});function Yk({kind:t,track:e,requestPermissions:n,onMediaDeviceError:i,onActiveDeviceChange:r,onDeviceListChange:a,...c}){const l=c.size||"default",[d,f]=T.useState(!1),m=T.useRef(null),p=rh(),{devices:v,activeDeviceId:b,setActiveMediaDevice:w}=V7({kind:t,room:p,track:e,requestPermissions:n,onError:i});T.useEffect(()=>{if(v.length>0&&!d){let k=v.find(N=>N.label.toLowerCase().includes("default"));k||(k=v.find(N=>{const O=N.label.toLowerCase();return O.includes("airpod")||O.includes("headphone")||O.includes("bluetooth")||O.includes("external")||O.includes("wireless")})),k&&k.deviceId!==b?w(k.deviceId):b||w(v[0].deviceId)}},[v,b,w,d]),T.useEffect(()=>{if(v.length>0&&!v.some(N=>N.deviceId===b)){let N=v.find(O=>O.label.toLowerCase().includes("default"));N||(N=v.find(O=>{const I=O.label.toLowerCase();return I.includes("airpod")||I.includes("headphone")||I.includes("bluetooth")||I.includes("external")||I.includes("wireless")})),w(N?N.deviceId:v[0].deviceId),f(!1)}},[v,b,w]);const S=T.useCallback(k=>{w(k),f(!0),r?.(k)},[w,r]),R=T.useCallback(k=>{k||setTimeout(()=>{m.current?.blur()},0)},[]);return T.useEffect(()=>{a?.(v)},[v,a]),x.jsxs(oY,{value:b||"",onValueChange:S,onOpenChange:R,children:[x.jsx(lY,{ref:m,className:ft(mY({size:l}),c.className),children:l!=="sm"&&x.jsx(cY,{className:"font-mono text-sm",placeholder:`Select a ${t}`})}),x.jsx(uY,{children:v.map(k=>x.jsx(dY,{value:k.deviceId,className:"font-mono text-xs",children:k.label},k.deviceId))})]})}function pY(t,e,n=!1){if(n)return jL;switch(t){case te.Source.Microphone:return e?ZL:$L;case te.Source.Camera:return e?v6:p6;case te.Source.ScreenShare:return QL;default:return T.Fragment}}function Mg({source:t,pressed:e,pending:n,className:i,...r}){const a=pY(t,e??!1,n);return x.jsxs(oD,{pressed:e,"aria-label":`Toggle ${t}`,className:ft(i),...r,children:[x.jsx(a,{className:ft("h-4 w-4",n&&"animate-spin")}),r.children]})}const gY=t=>{switch(t){case te.Source.Camera:return 1;case te.Source.Microphone:return 2;case te.Source.ScreenShare:return 3;default:return 0}};function vY(){const t=F7(),e=n=>!!t?.canPublish&&(t.canPublishSources.length===0||t.canPublishSources.includes(gY(n)));return{camera:e(te.Source.Camera),microphone:e(te.Source.Microphone),screenShare:e(te.Source.ScreenShare),data:t?.canPublishData??!1}}function yY(t={}){const{controls:e,saveUserChoices:n=!0}=t,i={leave:!0,...e},{microphoneTrack:r,localParticipant:a}=BP(),c=vY(),l=Pa(),d=Sg({source:te.Source.Microphone,onDeviceError:D=>t.onDeviceError?.({source:te.Source.Microphone,error:D})}),f=Sg({source:te.Source.Camera,onDeviceError:D=>t.onDeviceError?.({source:te.Source.Camera,error:D})}),m=Sg({source:te.Source.ScreenShare,onDeviceError:D=>t.onDeviceError?.({source:te.Source.ScreenShare,error:D})}),p=T.useMemo(()=>({participant:a,source:te.Source.Microphone,publication:r}),[a,r]);i.microphone??=c.microphone,i.screenShare??=c.screenShare,i.camera??=c.camera,i.chat??=c.data;const{saveAudioInputEnabled:v,saveVideoInputEnabled:b,saveVideoInputDeviceId:w}=Y7({preventSave:!n}),S=T.useCallback(async()=>{l&&await l.disconnect()},[l]),R=T.useCallback(()=>{},[]),k=T.useCallback(D=>{w(D??"default")},[w]),N=T.useCallback(async D=>{m.enabled&&m.toggle(!1),await f.toggle(D),b(!f.enabled)},[f,m,b]),O=T.useCallback(async D=>{await d.toggle(D),v(!d.enabled)},[d,v]),I=T.useCallback(async D=>{f.enabled&&f.toggle(!1),await m.toggle(D)},[m,f]);return{micTrackRef:p,visibleControls:i,cameraToggle:{...f,toggle:N},microphoneToggle:{...d,toggle:O},screenShareToggle:{...m,toggle:I},handleDisconnect:S,handleAudioDeviceChange:R,handleVideoDeviceChange:k}}function bY({controls:t,saveUserChoices:e=!0,capabilities:n,className:i,chatOpen:r,onSendMessage:a,onChatOpenChange:c,onDisconnect:l,onUserDisconnect:d,onDeviceError:f,...m}){const p=Yy(),[v,b]=T.useState(!1),w=p.some(Ae=>Ae.isAgent),S=!r||!w||v,[R,k]=T.useState(!1),{micTrackRef:N,visibleControls:O,cameraToggle:I,microphoneToggle:D,screenShareToggle:j,handleAudioDeviceChange:H,handleVideoDeviceChange:z,handleDisconnect:G}=yY({controls:t,saveUserChoices:e}),ie=async Ae=>{b(!0);try{await a?.(Ae)}finally{b(!1)}},re=async()=>{k(!0),d?.(),await G(),k(!1),l?.()},de=T.useCallback(Ae=>{f?.({source:te.Source.Microphone,error:Ae})},[f]),Ee=T.useCallback(Ae=>{f?.({source:te.Source.Camera,error:Ae})},[f]);return x.jsxs("div",{"aria-label":"Voice assistant controls",className:ft("bg-background border-bg2 dark:border-separator1 flex flex-col rounded-[31px] border p-3 drop-shadow-md/3",i),...m,children:[n.supportsChatInput&&x.jsxs("div",{inert:!r,className:ft("overflow-hidden transition-[height] duration-300 ease-out",r?"h-[57px]":"h-0"),children:[x.jsx("div",{className:"flex h-8 w-full",children:x.jsx(NH,{onSend:ie,disabled:S,className:"w-full"})}),x.jsx("hr",{className:"border-bg2 my-3"})]}),x.jsxs("div",{className:"flex flex-row justify-between gap-1",children:[x.jsxs("div",{className:"flex gap-1",children:[O.microphone&&x.jsxs("div",{className:"flex items-center gap-0",children:[x.jsx(Mg,{variant:"primary",source:te.Source.Microphone,pressed:D.enabled,disabled:D.pending,onPressedChange:D.toggle,className:"peer/track group/track relative w-auto pr-3 pl-3 md:rounded-r-none md:border-r-0 md:pr-2",children:x.jsx(HP,{barCount:3,trackRef:N,options:{minHeight:5},className:"flex h-full w-auto items-center justify-center gap-0.5",children:x.jsx("span",{className:ft(["h-full w-0.5 origin-center rounded-2xl","group-data-[state=on]/track:bg-fg1 group-data-[state=off]/track:bg-destructive-foreground","data-lk-muted:bg-muted"])})})}),x.jsx("hr",{className:"bg-separator1 peer-data-[state=off]/track:bg-separatorSerious relative z-10 -mr-px hidden h-4 w-px md:block"}),x.jsx(Yk,{size:"sm",kind:"audioinput",onMediaDeviceError:de,onActiveDeviceChange:H,className:ft(["pl-2","peer-data-[state=off]/track:text-destructive-foreground","hover:text-fg1 focus:text-fg1","hover:peer-data-[state=off]/track:text-destructive-foreground focus:peer-data-[state=off]/track:text-destructive-foreground","hidden rounded-l-none md:block"])})]}),n.supportsVideoInput&&O.camera&&x.jsxs("div",{className:"flex items-center gap-0",children:[x.jsx(Mg,{variant:"primary",source:te.Source.Camera,pressed:I.enabled,pending:I.pending,disabled:I.pending,onPressedChange:I.toggle,className:"peer/track relative w-auto rounded-r-none pr-3 pl-3 disabled:opacity-100 md:border-r-0 md:pr-2"}),x.jsx("hr",{className:"bg-separator1 peer-data-[state=off]/track:bg-separatorSerious relative z-10 -mr-px hidden h-4 w-px md:block"}),x.jsx(Yk,{size:"sm",kind:"videoinput",onMediaDeviceError:Ee,onActiveDeviceChange:z,className:ft(["pl-2","peer-data-[state=off]/track:text-destructive-foreground","hover:text-fg1 focus:text-fg1","hover:peer-data-[state=off]/track:text-destructive-foreground focus:peer-data-[state=off]/track:text-destructive-foreground","rounded-l-none"])})]}),n.supportsScreenShare&&O.screenShare&&x.jsx("div",{className:"flex items-center gap-0",children:x.jsx(Mg,{variant:"secondary",source:te.Source.ScreenShare,pressed:j.enabled,disabled:j.pending,onPressedChange:j.toggle,className:"relative w-auto"})}),O.chat&&x.jsx(oD,{variant:"secondary","aria-label":"Toggle chat",pressed:r,onPressedChange:c,disabled:!w,className:"aspect-square h-full",children:x.jsx(NE,{className:"h-4 w-4"})})]}),O.leave&&x.jsxs(rD,{variant:"destructive",onClick:re,disabled:R,className:"font-mono",children:[x.jsx(t6,{className:"h-4 w-4"}),x.jsx("span",{className:"hidden md:inline",children:"END CALL"}),x.jsx("span",{className:"inline md:hidden",children:"END"})]})]})]})}function SY(t,e){const n=e?.(t.message)||t.message,i=new Date(t.timestamp),r="en-US",a=t.from?.name||t.from?.identity||"Unknown";return{message:n,hasBeenEdited:!1,time:i,locale:r,name:a}}const TY=({entry:t,messageFormatter:e,hideName:n,hideTimestamp:i,className:r,...a})=>{const{message:c,hasBeenEdited:l,time:d,locale:f,name:m}=SY(t,e),p=t.from?.isLocal??!1,v=p?"remote":"local";return x.jsxs("li",{"data-lk-message-origin":v,className:ft("group flex flex-col gap-0.5",r),...a,children:[(!i||!n||l)&&x.jsxs("span",{className:"text-muted-foreground flex text-sm",children:[!n&&x.jsx("strong",{className:"mt-2",children:m}),!i&&x.jsxs("span",{className:ft("align-self-end font-mono text-xs opacity-0 transition-opacity ease-linear group-hover:opacity-100",p?"ml-auto":"mr-auto"),children:[l&&"*",d.toLocaleTimeString(f,{timeStyle:"short"})]})]}),x.jsx("span",{className:ft("max-w-4/5 rounded-[10px] p-2",p?"bg-muted ml-auto":"mr-auto"),children:c})]})};function xY(t){T.useEffect(()=>{function e(){const{scrollingElement:n}=document;n&&(n.scrollTop=n.scrollHeight)}if(t.current){const n=new ResizeObserver(e);return n.observe(t.current),e(),()=>n.disconnect()}},[t])}const bN=({className:t,children:e,...n})=>{const i=T.useRef(null);return xY(i),x.jsx("div",{ref:i,className:ft("flex flex-col justify-end",t),...n,children:e})};bN.displayName="ChatMessageView";const wY={listening:"Listening",thinking:"Thinking",speaking:"Speaking",connecting:"Joining",initializing:"Joining",disconnected:"Disconnected"},CY=()=>x.jsxs("span",{className:"inline-flex",children:[x.jsx("span",{className:"animate-pulse",style:{animationDelay:"0ms",animationDuration:"1.4s"},children:"."}),x.jsx("span",{className:"animate-pulse",style:{animationDelay:"200ms",animationDuration:"1.4s"},children:"."}),x.jsx("span",{className:"animate-pulse",style:{animationDelay:"400ms",animationDuration:"1.4s"},children:"."})]}),SN=T.forwardRef(({state:t,audioTrack:e,className:n,...i},r)=>{const a=wY[t];return x.jsxs("div",{ref:r,className:ft("flex flex-col items-center gap-3",n),...i,children:[x.jsx(HP,{barCount:5,state:t,options:{minHeight:5},trackRef:e,className:ft("flex aspect-video w-40 items-center justify-center gap-1"),children:x.jsx("span",{className:ft(["bg-muted min-h-4 w-4 rounded-full","origin-center transition-colors duration-250 ease-linear","data-[lk-highlighted=true]:bg-foreground data-[lk-muted=true]:bg-muted"])})}),a&&x.jsxs("p",{className:"text-[10px] text-gray-400 font-light pointer-events-none",children:[a,t!=="disconnected"&&x.jsx(CY,{})]})]})});SN.displayName="AgentTile";const TN=T.forwardRef(({videoTrack:t,className:e,...n},i)=>!t||t.publication.isMuted?null:x.jsxs("div",{ref:i,className:ft("relative overflow-hidden rounded-lg bg-gray-900",e),...n,children:[x.jsx(zP,{trackRef:t,className:"h-full w-full object-cover"}),x.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"AI Agent"})]}));TN.displayName="AvatarTile";const xN=T.forwardRef(({trackRef:t,className:e,...n},i)=>!t||t.publication.isMuted?null:x.jsxs("div",{ref:i,className:ft("relative overflow-hidden rounded-lg bg-gray-900",e),...n,children:[x.jsx(zP,{trackRef:t,className:"h-full w-full object-cover"}),t.source===te.Source.ScreenShare&&x.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"Screen Share"}),t.source===te.Source.Camera&&x.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"Camera"})]}));xN.displayName="VideoTile";function kY(t){const{localParticipant:e}=BP(),n=e.getTrackPublication(t);return T.useMemo(()=>n?{source:t,participant:e,publication:n}:void 0,[t,n,e])}const Wk=pt.create(xN),EY=pt.create(SN),RY=pt.create(TN),Dr={initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{type:"spring",stiffness:675,damping:75,mass:1}},Eo={grid:["h-full w-full","grid gap-x-2 place-content-center","grid-cols-[1fr_1fr] grid-rows-[90px_1fr_90px]"],agentChatOpenWithSecondTile:["col-start-1 row-start-1","self-center justify-self-end"],agentChatOpenWithoutSecondTile:["col-start-1 row-start-1","col-span-2","place-content-center"],agentChatClosed:["col-start-1 row-start-1","col-span-2 row-span-3","place-content-center"],secondTileChatOpen:["col-start-2 row-start-1","self-center justify-self-start"],secondTileChatClosed:["col-start-2 row-start-3","place-content-end"]};function AY({chatOpen:t}){const{state:e,audioTrack:n,videoTrack:i}=Wy(),[r]=FP([te.Source.ScreenShare]),a=kY(te.Source.Camera),c=a&&!a.publication.isMuted,l=r&&!r.publication.isMuted,d=c||l,f={...Dr.transition,delay:t?0:.15},m={...Dr.animate,scale:t?1:3,transition:f},p={...Dr.animate,transition:f},v=f,b=f,w=i!==void 0;return x.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-8 bottom-32 z-50 md:top-12 md:bottom-40",children:x.jsx("div",{className:"relative mx-auto h-full max-w-2xl px-4 md:px-0",children:x.jsxs("div",{className:ft(Eo.grid),children:[x.jsx("div",{className:ft(["grid",!t&&Eo.agentChatClosed,t&&d&&Eo.agentChatOpenWithSecondTile,t&&!d&&Eo.agentChatOpenWithoutSecondTile]),children:x.jsxs(Kv,{mode:"popLayout",children:[!w&&x.jsx(EY,{layoutId:"agent",...Dr,animate:m,transition:v,state:e,audioTrack:n,className:ft(t?"h-[90px]":"h-auto w-full")},"agent"),w&&x.jsx(RY,{layoutId:"avatar",...Dr,animate:p,transition:b,videoTrack:i,className:ft(t?"h-[90px] [&>video]:h-[90px] [&>video]:w-auto":"h-auto w-full")},"avatar")]})}),x.jsx("div",{className:ft(["grid",t&&Eo.secondTileChatOpen,!t&&Eo.secondTileChatClosed]),children:x.jsxs(Kv,{children:[a&&c&&x.jsx(Wk,{layout:"position",layoutId:"camera",...Dr,trackRef:a,transition:{...Dr.transition,delay:t?0:.15},className:"h-[90px]"},"camera"),l&&x.jsx(Wk,{layout:"position",layoutId:"screen",...Dr,trackRef:r,transition:{...Dr.transition,delay:t?0:.15},className:"h-[90px]"},"screen")]})})]})})})}function _Y(){const t=nz(),e=G7(),n=Pa();return{messages:T.useMemo(()=>[...t.map(a=>PH(a,n)),...e.chatMessages].sort((a,c)=>a.timestamp-c.timestamp),[t,e.chatMessages,n]),send:e.send}}function PY(){const t=z7();T.useEffect(()=>{},[t])}function DY(t){return t=="listening"||t=="thinking"||t=="speaking"}const NY=({appConfig:t,disabled:e,sessionStarted:n,onUserDisconnect:i,ref:r})=>{const{state:a}=Wy(),[c,l]=T.useState(!0),{messages:d,send:f}=_Y(),m=Pa();PY();async function p(R){await f(R)}T.useEffect(()=>{if(n){const R=setTimeout(()=>{if(!DY(a)){const k=a==="connecting"?"Agent did not join the room. ":"Agent connected but did not complete initializing. ";o0({title:"Session ended",description:x.jsxs("p",{className:"w-full",children:[k,x.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.livekit.io/agents/start/voice-ai/",className:"whitespace-nowrap underline",children:"See quickstart guide"}),"."]})}),m.disconnect()}},1e4);return()=>clearTimeout(R)}},[a,n,m]);const{supportsChatInput:v,supportsVideoInput:b,supportsScreenShare:w}=t,S={supportsChatInput:v,supportsVideoInput:b,supportsScreenShare:w};return x.jsxs("main",{ref:r,inert:e,className:ft(!c&&"max-h-svh overflow-hidden"),children:[x.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"absolute top-4 left-4 z-50",children:x.jsx("img",{src:"/full-size-logo-white.png",alt:"Ladderr AI Logo",className:"h-8"})}),x.jsx(bN,{className:ft("mx-auto min-h-svh w-full max-w-2xl px-3 pt-32 pb-40 transition-[opacity,translate] duration-300 ease-out md:px-0 md:pt-36 md:pb-48",c?"translate-y-0 opacity-100 delay-200":"translate-y-20 opacity-0"),children:x.jsx("div",{className:"space-y-3 whitespace-pre-wrap",children:x.jsx(Kv,{children:d.map(R=>x.jsx(pt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:1,height:"auto",translateY:.001},transition:{duration:.5,ease:"easeOut"},children:x.jsx(TY,{hideName:!0,entry:R},R.id)},R.id))})})}),x.jsx("div",{className:"bg-background fixed top-0 right-0 left-0 h-32 md:h-36",children:x.jsx("div",{className:"from-background absolute bottom-0 left-0 h-12 w-full translate-y-full bg-gradient-to-b to-transparent"})}),x.jsx(AY,{chatOpen:c}),x.jsx("div",{className:"bg-background fixed right-0 bottom-0 left-0 z-50 px-3 pt-2 pb-3 md:px-12 md:pb-12",children:x.jsxs(pt.div,{initial:{opacity:0,translateY:"100%"},animate:{opacity:n?1:0,translateY:n?"0%":"100%"},transition:{duration:.3,delay:n?.5:0,ease:"easeOut"},children:[x.jsx("div",{className:"relative z-10 mx-auto w-full max-w-2xl",children:x.jsx(bY,{capabilities:S,chatOpen:c,onChatOpenChange:l,onSendMessage:p,onUserDisconnect:i})}),x.jsx("div",{className:"from-background border-background absolute top-0 left-0 h-12 w-full -translate-y-full bg-gradient-to-t to-transparent"})]},"control-bar")})]})};function MY(t){return t==="listening"||t==="thinking"||t==="speaking"}function OY(){const{state:t}=Wy(),e=T.useRef(null),[n,i]=T.useState(0),[r,a]=T.useState(!1);T.useEffect(()=>{const l=e.current!==null,d=MY(t);!l&&d&&(e.current=Date.now(),a(!0),console.log("Session started - agent became available"))},[t]),T.useEffect(()=>{if(e.current===null)return;const l=setInterval(()=>{const d=(Date.now()-e.current)/1e3;i(d)},1e3);return()=>clearInterval(l)},[]);const c=()=>e.current===null?0:(Date.now()-e.current)/1e3;return{sessionDuration:n,agentConnected:r,getSessionDuration:c,isSessionLongEnough:()=>c()>=1}}const IY=({sessionState:t,onAgentConnected:e,onAgentTimeout:n,children:i})=>{const{agentConnected:r,getSessionDuration:a,isSessionLongEnough:c}=OY();return T.useEffect(()=>{r&&t==="waiting"&&e()},[r,t,e]),T.useEffect(()=>{if(t!=="waiting")return;const l=setTimeout(()=>{r||n()},1e4);return()=>clearTimeout(l)},[t,r,n]),T.useEffect(()=>(window.__sessionInfo={getSessionDuration:a,isSessionLongEnough:c,agentConnected:r},()=>{delete window.__sessionInfo}),[a,c,r]),x.jsx(x.Fragment,{children:i})},UY=({onGoHome:t,autoRedirectDelay:e=5})=>{const n=Ls(),[i,r]=T.useState(e),a=T.useCallback(()=>{t?t():n("/")},[t,n]);return T.useEffect(()=>{const c=setInterval(()=>{r(l=>l<=1?0:l-1)},1e3);return()=>clearInterval(c)},[]),T.useEffect(()=>{i===0&&a()},[i,a]),x.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-slate-900 flex items-center justify-center px-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900/50"}),x.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((c,l)=>x.jsx(pt.div,{className:"absolute w-1 h-1 bg-neutral-300/40 dark:bg-slate-600/40 rounded-full",animate:{x:[0,100,-50,0],y:[0,-100,50,0],opacity:[.4,.8,.2,.4]},transition:{duration:20+l*2,repeat:1/0,ease:"linear"},style:{left:`${20+l*15}%`,top:`${30+l*10}%`}},l))}),x.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto text-center",children:[x.jsx(pt.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"backOut"},className:"flex items-center justify-center mb-8",children:x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-neutral-100 to-neutral-50 dark:from-slate-800 dark:to-slate-700 rounded-full flex items-center justify-center shadow-lg",children:x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"})}),x.jsx(pt.div,{className:"absolute inset-0 border-2 border-emerald-200 dark:border-emerald-700 rounded-full",animate:{scale:[1,1.3,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0}})]})}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"inline-flex items-center gap-2 text-neutral-600 dark:text-slate-400 text-sm font-medium mb-8",children:[x.jsx(EL,{className:"w-4 h-4"}),"Session Complete"]}),x.jsxs(pt.h1,{className:"text-5xl md:text-6xl font-light mb-6 tracking-tight text-neutral-900 dark:text-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:["Thanks for trusting",x.jsx("br",{}),x.jsx("span",{className:"font-bold bg-gradient-to-r from-neutral-900 via-neutral-700 to-neutral-600 dark:from-white dark:via-slate-200 dark:to-slate-300 bg-clip-text text-transparent",children:"Ladderr"})]}),x.jsx(pt.p,{className:"text-lg md:text-xl text-neutral-600 dark:text-slate-400 mb-12 max-w-xl mx-auto font-light leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Climb your career ladder, with Ladderr by your side."}),x.jsx(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-8",children:x.jsxs("button",{onClick:a,className:"group bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:hover:bg-neutral-100 text-white dark:text-neutral-900 px-10 py-4 text-base font-medium transition-all duration-300 inline-flex items-center gap-3 rounded-sm shadow-lg hover:shadow-xl transform hover:scale-105",children:[x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),"Back to Home",x.jsx(Sf,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"})]})}),x.jsxs(pt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex items-center justify-center gap-3 text-sm text-neutral-500 dark:text-slate-500",children:[x.jsx("div",{className:"w-2 h-2 bg-neutral-300 dark:bg-slate-600 rounded-full animate-pulse"}),x.jsxs("span",{children:["Redirecting automatically in ",i," second",i!==1?"s":""]})]})]})]})};function LY(t){const i=30*Math.pow(2,t-1);return Math.min(i,600)}function jY(t){const e=Math.floor(t/60),n=t%60;return e>0?`${e}:${n.toString().padStart(2,"0")}`:`${n}s`}const $k=({onRetry:t,onGoHome:e,retryAttempt:n=1,initialDelaySeconds:i})=>{const r=i??LY(n),[a,c]=T.useState(r),[l,d]=T.useState(!1),f=T.useCallback(async()=>{d(!0);try{await t()}finally{d(!1)}},[t]);T.useEffect(()=>{if(a<=0)return;const p=setTimeout(()=>{c(v=>v-1)},1e3);return()=>clearTimeout(p)},[a]),T.useEffect(()=>{a<=0&&f()},[a,f]);const m=()=>{c(0)};return x.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-slate-900 flex items-center justify-center px-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900/50"}),x.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((p,v)=>x.jsx(pt.div,{className:"absolute w-1 h-1 bg-neutral-300/40 dark:bg-slate-600/40 rounded-full",animate:{x:[0,100,-50,0],y:[0,-100,50,0],opacity:[.4,.8,.2,.4]},transition:{duration:20+v*2,repeat:1/0,ease:"linear"},style:{left:`${20+v*15}%`,top:`${30+v*10}%`}},v))}),x.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto text-center",children:[x.jsx(pt.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"backOut"},className:"flex items-center justify-center mb-8",children:x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-orange-50 dark:from-orange-900/30 dark:to-orange-800/20 rounded-full flex items-center justify-center shadow-lg",children:x.jsx(d6,{className:"w-10 h-10 text-orange-600 dark:text-orange-400"})}),x.jsx(pt.div,{className:"absolute inset-0 border-2 border-orange-200 dark:border-orange-700 rounded-full",animate:{scale:[1,1.3,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0}})]})}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"inline-flex items-center gap-2 text-neutral-600 dark:text-slate-400 text-sm font-medium mb-8",children:[x.jsx(O1,{className:"w-4 h-4"}),"Connection Issue"]}),x.jsx(pt.h1,{className:"text-5xl md:text-6xl font-light mb-6 tracking-tight text-neutral-900 dark:text-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:"Something went wrong"}),x.jsx(pt.p,{className:"text-lg md:text-xl text-neutral-600 dark:text-slate-400 mb-12 max-w-xl mx-auto font-light leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Your AI coach is preparing to connect. We'll have you climbing again in moments."}),x.jsxs(pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:"mb-8",children:[x.jsx("div",{className:"flex items-center justify-center mb-4",children:x.jsx(pt.div,{animate:{rotate:-360},transition:{duration:2,repeat:1/0,ease:"linear"},children:x.jsx(O1,{className:"w-6 h-6 text-orange-500 dark:text-orange-400"})})}),x.jsx("div",{className:"text-4xl md:text-5xl font-mono font-bold text-neutral-900 dark:text-white mb-2",children:jY(a)}),x.jsx("p",{className:"text-neutral-600 dark:text-slate-400 font-medium",children:"Reconnecting automatically"})]}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-4 mb-8",children:[x.jsxs("button",{onClick:m,disabled:l||a<=0,className:"group bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:hover:bg-neutral-100 text-white dark:text-neutral-900 px-10 py-4 text-base font-medium transition-all duration-300 inline-flex items-center justify-center gap-3 rounded-sm shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:transform-none disabled:hover:scale-100 flex-1",children:[!l&&x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),l?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),"Connecting..."]}):x.jsx(x.Fragment,{children:"Try Now"})]}),x.jsxs("button",{onClick:e,disabled:l,className:"group bg-neutral-200 hover:bg-neutral-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-neutral-700 dark:text-slate-300 px-6 py-4 text-base font-medium transition-all duration-300 inline-flex items-center justify-center gap-3 rounded-sm shadow-lg hover:shadow-xl disabled:opacity-50",children:[x.jsx(OL,{className:"w-4 h-4"}),"Go Home"]})]}),x.jsxs(pt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex items-center justify-center gap-3 text-sm text-neutral-500 dark:text-slate-500",children:[x.jsx("div",{className:"w-2 h-2 bg-orange-400 dark:bg-orange-500 rounded-full animate-pulse"}),x.jsx("span",{children:"Preparing your coaching session"})]})]})]})},BY=({onTakeSurvey:t,onGoHome:e,autoStartDelay:n=10})=>{const[i,r]=T.useState(n),a=T.useCallback(()=>{t()},[t]),c=T.useCallback(()=>{e()},[e]);return T.useEffect(()=>{const l=setInterval(()=>{r(d=>d<=1?0:d-1)},1e3);return()=>clearInterval(l)},[]),T.useEffect(()=>{i===0&&a()},[i,a]),x.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-slate-900 flex items-center justify-center px-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900/50"}),x.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((l,d)=>x.jsx(pt.div,{className:"absolute w-1 h-1 bg-neutral-300/40 dark:bg-slate-600/40 rounded-full",animate:{x:[0,100,-50,0],y:[0,-100,50,0],opacity:[.4,.8,.2,.4]},transition:{duration:20+d*2,repeat:1/0,ease:"linear"},style:{left:`${20+d*15}%`,top:`${30+d*10}%`}},d))}),x.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto text-center",children:[x.jsx(pt.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"backOut"},className:"flex items-center justify-center mb-8",children:x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-neutral-100 to-neutral-50 dark:from-slate-800 dark:to-slate-700 rounded-full flex items-center justify-center shadow-lg",children:x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"})}),x.jsx(pt.div,{className:"absolute inset-0 border-2 border-blue-200 dark:border-blue-700 rounded-full",animate:{scale:[1,1.3,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0}})]})}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"inline-flex items-center gap-2 text-neutral-600 dark:text-slate-400 text-sm font-medium mb-8",children:[x.jsx(NE,{className:"w-4 h-4"}),"Help Us Improve"]}),x.jsxs(pt.h1,{className:"text-5xl md:text-6xl font-light mb-6 tracking-tight text-neutral-900 dark:text-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:["Your Voice",x.jsx("br",{}),x.jsx("span",{className:"font-bold bg-gradient-to-r from-neutral-900 via-neutral-700 to-neutral-600 dark:from-white dark:via-slate-200 dark:to-slate-300 bg-clip-text text-transparent",children:"Matters"})]}),x.jsx(pt.p,{className:"text-lg md:text-xl text-neutral-600 dark:text-slate-400 mb-12 max-w-xl mx-auto font-light leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Your feedback drives every improvement we make to Ladderr."}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-4 mb-8 justify-center",children:[x.jsxs("button",{onClick:a,className:"group bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:hover:bg-neutral-100 text-white dark:text-neutral-900 px-10 py-4 text-base font-medium transition-all duration-300 inline-flex items-center justify-center gap-3 rounded-sm shadow-lg hover:shadow-xl transform hover:scale-105",children:[x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),"Share Your Experience",x.jsx(Sf,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"})]}),x.jsxs("button",{onClick:c,className:"group bg-neutral-200 hover:bg-neutral-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-neutral-700 dark:text-slate-300 px-10 py-4 text-base font-medium transition-all duration-300 inline-flex items-center justify-center gap-3 rounded-sm shadow-lg hover:shadow-xl",children:["Maybe Later",x.jsx(ME,{className:"w-4 h-4"})]})]}),x.jsxs(pt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex items-center justify-center gap-3 text-sm text-neutral-500 dark:text-slate-500",children:[x.jsx("div",{className:"w-2 h-2 bg-blue-400 dark:bg-blue-500 rounded-full animate-pulse"}),x.jsxs("span",{children:["Starting survey in ",i," second",i!==1?"s":""]})]})]})]})};class FY{baseUrl;constructor(){this.baseUrl="https://api-test.ladderr.ai"}async getJoinToken(e,n){const i=new URL(`${this.baseUrl}/api/conversation/join-token`);n?.intent&&i.searchParams.set("intent",n.intent),n?.referenceRoomId&&i.searchParams.set("reference-room-id",n.referenceRoomId);const r=await fetch(i.toString(),{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to get join token: ${r.status} ${r.statusText}`);return{token:(await r.json()).token}}extractRoomIdFromToken(e){try{const n=JSON.parse(atob(e.split(".")[1]));console.log("Token payload:",n);const i=n.video?.room||null;return console.log("Extracted room ID:",i),i}catch(n){return console.error("Failed to extract room ID from token:",n),null}}}const Xk=new FY;function VY(t){const{user:e}=Yr(),[n,i]=T.useState(null),[r,a]=T.useState(!0),[c,l]=T.useState(null),d=T.useRef(!1),[f,m]=T.useState(null),p=T.useCallback(async b=>{if(!(!e||d.current)){d.current=!0,i(null),a(!0),l(null);try{const S=await au().getCurrentSession();if(!S)throw new Error("No active session found");const R=S.getAccessToken().getJwtToken();let k=b;!b&&t&&(k={intent:t});const N=await Xk.getJoinToken(R,k),O="wss://ladderr-test-0rikzfmg.livekit.cloud",I=Xk.extractRoomIdFromToken(N.token);I&&m(I),i({serverUrl:O,participantToken:N.token,participantName:"user",roomName:I||`voice_assistant_room_${Math.floor(Math.random()*1e4)}`})}catch(w){console.error("Error fetching connection details:",w),l(w instanceof Error?w.message:"Failed to connect to service")}finally{a(!1),d.current=!1}}},[e,t]),v=T.useCallback(async()=>f?(console.log("Reconnecting with NPS intent for room:",f),p({intent:"nps",referenceRoomId:f})):(console.warn("No room ID available for NPS reconnection, falling back to regular reconnection"),p()),[f,p]);return T.useEffect(()=>{p()},[p]),{connectionDetails:n,refreshConnectionDetails:p,reconnectWithNPS:v,currentRoomId:f,loading:r,error:c}}function zY(){T.useEffect(()=>{Tk();const t=window.matchMedia(iD),e=()=>{Tk()};if(t.addEventListener)return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)};if(t.addListener)return t.addListener(e),()=>{t.removeListener(e)}},[])}const HY=pt.create(NY);function qY({appConfig:t,sessionIntent:e}){zY();const n=Ls(),{isFeatureEnabled:i}=O0(),r=T.useMemo(()=>new Vr,[]),[a,c]=T.useState("connecting"),[l,d]=T.useState(1),[f,m]=T.useState(!1),{connectionDetails:p,refreshConnectionDetails:v,reconnectWithNPS:b,loading:w,error:S}=VY(e),R=T.useCallback(()=>{const G=window.__sessionInfo;return{duration:G?.getSessionDuration()||0,isLongSession:G?.isSessionLongEnough()||!1,agentConnected:G?.agentConnected||!1}},[]),k=T.useCallback((G,ie,re)=>{if(console.log("Session ended:",{reason:G,duration:ie,wasLongSession:re,isNPSSession:f}),r.disconnect(),f){console.log("NPS session ended, showing thanks"),m(!1),c("thanks");return}const de=i("alpha-access");console.log("Alpha access check:",{hasAlphaAccess:de}),G==="user-hangup"?re&&de?(console.log("User hangup after long session, showing NPS invitation"),c("nps-invitation")):(console.log("Skipping NPS - either short session or no alpha access"),c("thanks")):G==="server-hangup"?re&&de?(console.log("Server hangup after long session, showing NPS invitation"),c("nps-invitation")):(console.log("Skipping NPS - either short session or no alpha access"),c("thanks")):G==="agent-timeout"&&c("failed")},[r,f,i]);T.useEffect(()=>{let G=!1;return a==="connecting"&&r.state==="disconnected"&&p&&(c("waiting"),Promise.all([r.localParticipant.setMicrophoneEnabled(!0,void 0,{preConnectBuffer:t.isPreConnectBufferEnabled}),r.connect(p.serverUrl,p.participantToken)]).catch(ie=>{G||(console.error("Connection error:",ie),c("failed"),o0({title:"Connection failed",description:`${ie.name}: ${ie.message}`}))})),()=>{G=!0}},[r,a,p,t.isPreConnectBufferEnabled]),T.useEffect(()=>{const G=re=>{if(console.log("Room disconnected with reason:",re),a==="active"){const de=R();k("server-hangup",de.duration,de.isLongSession)}},ie=re=>{o0({title:"Encountered an error with your media devices",description:`${re.name}: ${re.message}`})};return r.on(fe.MediaDevicesError,ie),r.on(fe.Disconnected,G),()=>{r.off(fe.Disconnected,G),r.off(fe.MediaDevicesError,ie)}},[r,a,R,k]);const N=T.useCallback(()=>{const G=R();k("user-hangup",G.duration,G.isLongSession)},[R,k]),O=T.useCallback(()=>{c("active")},[]),I=T.useCallback(()=>{const G=R();k("agent-timeout",G.duration,G.isLongSession)},[R,k]),D=T.useCallback(async()=>{d(G=>G+1),await v(),c("connecting")},[v]),j=T.useCallback(()=>{n("/")},[n]),H=T.useCallback(()=>{console.log("Starting NPS session"),m(!0),b().then(()=>{c("connecting")}).catch(G=>{console.error("NPS reconnection failed:",G),m(!1),c("thanks")})},[b]),z=T.useCallback(()=>{c("thanks")},[]);if(w)return x.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),x.jsx("p",{className:"text-lg text-muted-foreground",children:"Setting up your session..."})]})});if(S)return x.jsx($k,{onRetry:v,onGoHome:j,retryAttempt:1});switch(a){case"nps-invitation":return x.jsx(BY,{onTakeSurvey:H,onGoHome:z});case"thanks":return x.jsx(UY,{onGoHome:j});case"failed":return x.jsx($k,{onRetry:D,onGoHome:j,retryAttempt:l});default:return x.jsxs(x.Fragment,{children:[x.jsxs(qy.Provider,{value:r,children:[x.jsx(dz,{}),x.jsx(iz,{label:"Start Audio"}),x.jsx(IY,{sessionState:a,onAgentConnected:O,onAgentTimeout:I,children:x.jsx(HY,{appConfig:t,disabled:!1,sessionStarted:!0,onUserDisconnect:N,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeOut"}},"session-view")})]}),x.jsx(Hz,{})]})}}const KY={pageTitle:"Ladderr AI Coach",pageDescription:"Voice-first AI career coaching",companyName:"Ladderr",supportsChatInput:!0,supportsVideoInput:!1,supportsScreenShare:!1,isPreConnectBufferEnabled:!0,logo:"",startButtonText:"Start Coaching Session"},GY=()=>{const{isAuthenticated:t,loading:e}=Yr(),{isFeatureEnabled:n,features:i,loading:r}=O0();if(e||r)return x.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(console.log("Session Debug:",{isAuthenticated:t,hasAlphaAccess:n("alpha-access"),features:i,authLoading:e,featureLoading:r}),!t)return console.log("Redirecting: Not authenticated"),x.jsx(DI,{to:"/",replace:!0});const c=n("alpha-access")?void 0:"ladderr_customer_interview";return x.jsx(qY,{appConfig:KY,sessionIntent:c})};function YY(){const[t,e]=T.useState(!1),n=()=>{e(!0)},i=()=>{e(!1)};return x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx(S6,{onStartCoaching:n}),x.jsx(T6,{onStartCoaching:n}),x.jsx(w6,{}),x.jsx(k6,{}),x.jsx(E6,{}),t&&x.jsx(IE,{onClose:i})]})}function WY(){return x.jsx(vL,{children:x.jsx(gL,{children:x.jsx(iU,{children:x.jsxs(MI,{children:[x.jsx(Ts,{path:"/",element:x.jsx(YY,{})}),x.jsx(Ts,{path:"/contact",element:x.jsx(P6,{})}),x.jsx(Ts,{path:"/privacy",element:x.jsx(D6,{})}),x.jsx(Ts,{path:"/terms",element:x.jsx(N6,{})}),x.jsx(Ts,{path:"/session",element:x.jsx(_6,{children:x.jsx(GY,{})})}),x.jsx(Ts,{path:"/auth/callback",element:x.jsx(R6,{})}),x.jsx(Ts,{path:"/auth/logout",element:x.jsx(A6,{})})]})})})})}var Gd={},Zk;function $Y(){if(Zk)return Gd;Zk=1,Object.defineProperty(Gd,"__esModule",{value:!0});var t=function(n){console.warn("[react-gtm]",n)};return Gd.default=t,Gd}var Og,Jk;function XY(){if(Jk)return Og;Jk=1;var t=$Y(),e=n(t);function n(r){return r&&r.__esModule?r:{default:r}}var i={tags:function(a){var c=a.id,l=a.events,d=a.dataLayer,f=a.dataLayerName,m=a.preview,p=a.auth,v="&gtm_auth="+p,b="&gtm_preview="+m;c||(0,e.default)("GTM Id is required");var w=`
      <iframe src="https://www.googletagmanager.com/ns.html?id=`+c+v+b+`&gtm_cookies_win=x"
        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>`,S=`
      (function(w,d,s,l,i){w[l]=w[l]||[];
        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', `+JSON.stringify(l).slice(1,-1)+`});
        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'`+v+b+`&gtm_cookies_win=x';
        f.parentNode.insertBefore(j,f);
      })(window,document,'script','`+f+"','"+c+"');",R=this.dataLayer(d,f);return{iframe:w,script:S,dataLayerVar:R}},dataLayer:function(a,c){return`
      window.`+c+" = window."+c+` || [];
      window.`+c+".push("+JSON.stringify(a)+")"}};return Og=i,Og}var Ig,Qk;function ZY(){if(Qk)return Ig;Qk=1;var t=XY(),e=n(t);function n(r){return r&&r.__esModule?r:{default:r}}var i={dataScript:function(a){var c=document.createElement("script");return c.innerHTML=a,c},gtm:function(a){var c=e.default.tags(a),l=function(){var p=document.createElement("noscript");return p.innerHTML=c.iframe,p},d=function(){var p=document.createElement("script");return p.innerHTML=c.script,p},f=this.dataScript(c.dataLayerVar);return{noScript:l,script:d,dataScript:f}},initialize:function(a){var c=a.gtmId,l=a.events,d=l===void 0?{}:l,f=a.dataLayer,m=a.dataLayerName,p=m===void 0?"dataLayer":m,v=a.auth,b=v===void 0?"":v,w=a.preview,S=w===void 0?"":w,R=this.gtm({id:c,events:d,dataLayer:f||void 0,dataLayerName:p,auth:b,preview:S});f&&document.head.appendChild(R.dataScript),document.head.insertBefore(R.script(),document.head.childNodes[0]),document.body.insertBefore(R.noScript(),document.body.childNodes[0])},dataLayer:function(a){var c=a.dataLayer,l=a.dataLayerName,d=l===void 0?"dataLayer":l;if(window[d])return window[d].push(c);var f=e.default.dataLayer(c,d),m=this.dataScript(f);document.head.insertBefore(m,document.head.childNodes[0])}};return Ig=i,Ig}var Ug,eE;function JY(){if(eE)return Ug;eE=1;var t=ZY(),e=n(t);function n(i){return i&&i.__esModule?i:{default:i}}return Ug=e.default,Ug}JY();window.Buffer=zO.Buffer;FO.createRoot(document.getElementById("root")).render(x.jsx(T.StrictMode,{children:x.jsx(WY,{})}));
