function CI(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Lk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function j0(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var Pp={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b1;function EI(){if(b1)return ml;b1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:c,ref:r!==void 0?r:null,props:a}}return ml.Fragment=e,ml.jsx=n,ml.jsxs=n,ml}var S1;function kI(){return S1||(S1=1,Pp.exports=EI()),Pp.exports}var x=kI(),Dp={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1;function RI(){if(T1)return Ze;T1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function R(F,Z,de){this.props=F,this.context=Z,this.refs=S,this.updater=de||b}R.prototype.isReactComponent={},R.prototype.setState=function(F,Z){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Z,"setState")},R.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function E(){}E.prototype=R.prototype;function N(F,Z,de){this.props=F,this.context=Z,this.refs=S,this.updater=de||b}var M=N.prototype=new E;M.constructor=N,w(M,R.prototype),M.isPureReactComponent=!0;var I=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function z(F,Z,de,le,Te,Me){return de=Me.ref,{$$typeof:t,type:F,key:Z,ref:de!==void 0?de:null,props:Me}}function H(F,Z){return z(F.type,Z,void 0,void 0,void 0,F.props)}function W(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function re(F){var Z={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(de){return Z[de]})}var se=/\/+/g;function fe(F,Z){return typeof F=="object"&&F!==null&&F.key!=null?re(""+F.key):Z.toString(36)}function Ee(){}function Ae(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Ee,Ee):(F.status="pending",F.then(function(Z){F.status==="pending"&&(F.status="fulfilled",F.value=Z)},function(Z){F.status==="pending"&&(F.status="rejected",F.reason=Z)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function Pe(F,Z,de,le,Te){var Me=typeof F;(Me==="undefined"||Me==="boolean")&&(F=null);var De=!1;if(F===null)De=!0;else switch(Me){case"bigint":case"string":case"number":De=!0;break;case"object":switch(F.$$typeof){case t:case e:De=!0;break;case m:return De=F._init,Pe(De(F._payload),Z,de,le,Te)}}if(De)return Te=Te(F),De=le===""?"."+fe(F,0):le,I(Te)?(de="",De!=null&&(de=De.replace(se,"$&/")+"/"),Pe(Te,Z,de,"",function(Ve){return Ve})):Te!=null&&(W(Te)&&(Te=H(Te,de+(Te.key==null||F&&F.key===Te.key?"":(""+Te.key).replace(se,"$&/")+"/")+De)),Z.push(Te)),1;De=0;var be=le===""?".":le+":";if(I(F))for(var Ce=0;Ce<F.length;Ce++)le=F[Ce],Me=be+fe(le,Ce),De+=Pe(le,Z,de,Me,Te);else if(Ce=v(F),typeof Ce=="function")for(F=Ce.call(F),Ce=0;!(le=F.next()).done;)le=le.value,Me=be+fe(le,Ce++),De+=Pe(le,Z,de,Me,Te);else if(Me==="object"){if(typeof F.then=="function")return Pe(Ae(F),Z,de,le,Te);throw Z=String(F),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return De}function K(F,Z,de){if(F==null)return F;var le=[],Te=0;return Pe(F,le,"","",function(Me){return Z.call(de,Me,Te++)}),le}function ie(F){if(F._status===-1){var Z=F._result;Z=Z(),Z.then(function(de){(F._status===0||F._status===-1)&&(F._status=1,F._result=de)},function(de){(F._status===0||F._status===-1)&&(F._status=2,F._result=de)}),F._status===-1&&(F._status=0,F._result=Z)}if(F._status===1)return F._result.default;throw F._result}var J=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function _e(){}return Ze.Children={map:K,forEach:function(F,Z,de){K(F,function(){Z.apply(this,arguments)},de)},count:function(F){var Z=0;return K(F,function(){Z++}),Z},toArray:function(F){return K(F,function(Z){return Z})||[]},only:function(F){if(!W(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ze.Component=R,Ze.Fragment=n,Ze.Profiler=r,Ze.PureComponent=N,Ze.StrictMode=i,Ze.Suspense=d,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(F){return A.H.useMemoCache(F)}},Ze.cache=function(F){return function(){return F.apply(null,arguments)}},Ze.cloneElement=function(F,Z,de){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var le=w({},F.props),Te=F.key,Me=void 0;if(Z!=null)for(De in Z.ref!==void 0&&(Me=void 0),Z.key!==void 0&&(Te=""+Z.key),Z)!L.call(Z,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&Z.ref===void 0||(le[De]=Z[De]);var De=arguments.length-2;if(De===1)le.children=de;else if(1<De){for(var be=Array(De),Ce=0;Ce<De;Ce++)be[Ce]=arguments[Ce+2];le.children=be}return z(F.type,Te,void 0,void 0,Me,le)},Ze.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Ze.createElement=function(F,Z,de){var le,Te={},Me=null;if(Z!=null)for(le in Z.key!==void 0&&(Me=""+Z.key),Z)L.call(Z,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Te[le]=Z[le]);var De=arguments.length-2;if(De===1)Te.children=de;else if(1<De){for(var be=Array(De),Ce=0;Ce<De;Ce++)be[Ce]=arguments[Ce+2];Te.children=be}if(F&&F.defaultProps)for(le in De=F.defaultProps,De)Te[le]===void 0&&(Te[le]=De[le]);return z(F,Me,void 0,void 0,null,Te)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(F){return{$$typeof:l,render:F}},Ze.isValidElement=W,Ze.lazy=function(F){return{$$typeof:m,_payload:{_status:-1,_result:F},_init:ie}},Ze.memo=function(F,Z){return{$$typeof:f,type:F,compare:Z===void 0?null:Z}},Ze.startTransition=function(F){var Z=A.T,de={};A.T=de;try{var le=F(),Te=A.S;Te!==null&&Te(de,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(_e,J)}catch(Me){J(Me)}finally{A.T=Z}},Ze.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ze.use=function(F){return A.H.use(F)},Ze.useActionState=function(F,Z,de){return A.H.useActionState(F,Z,de)},Ze.useCallback=function(F,Z){return A.H.useCallback(F,Z)},Ze.useContext=function(F){return A.H.useContext(F)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(F,Z){return A.H.useDeferredValue(F,Z)},Ze.useEffect=function(F,Z,de){var le=A.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(F,Z)},Ze.useId=function(){return A.H.useId()},Ze.useImperativeHandle=function(F,Z,de){return A.H.useImperativeHandle(F,Z,de)},Ze.useInsertionEffect=function(F,Z){return A.H.useInsertionEffect(F,Z)},Ze.useLayoutEffect=function(F,Z){return A.H.useLayoutEffect(F,Z)},Ze.useMemo=function(F,Z){return A.H.useMemo(F,Z)},Ze.useOptimistic=function(F,Z){return A.H.useOptimistic(F,Z)},Ze.useReducer=function(F,Z,de){return A.H.useReducer(F,Z,de)},Ze.useRef=function(F){return A.H.useRef(F)},Ze.useState=function(F){return A.H.useState(F)},Ze.useSyncExternalStore=function(F,Z,de){return A.H.useSyncExternalStore(F,Z,de)},Ze.useTransition=function(){return A.H.useTransition()},Ze.version="19.1.1",Ze}var x1;function B0(){return x1||(x1=1,Dp.exports=RI()),Dp.exports}var T=B0();const Re=Lk(T),jk=CI({__proto__:null,default:Re},[T]);/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var w1="popstate";function AI(t={}){function e(i,r){let{pathname:a,search:c,hash:l}=i.location;return Jg("",{pathname:a,search:c,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:$l(r)}return PI(e,n,null,t)}function Lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ri(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _I(){return Math.random().toString(36).substring(2,10)}function C1(t,e){return{usr:t.state,key:t.key,idx:e}}function Jg(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?sc(e):e,state:n,key:e&&e.key||i||_I()}}function $l({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function sc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function PI(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,c=r.history,l="POP",d=null,f=m();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function m(){return(c.state||{idx:null}).idx}function p(){l="POP";let R=m(),E=R==null?null:R-f;f=R,d&&d({action:l,location:S.location,delta:E})}function v(R,E){l="PUSH";let N=Jg(S.location,R,E);f=m()+1;let M=C1(N,f),I=S.createHref(N);try{c.pushState(M,"",I)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;r.location.assign(I)}a&&d&&d({action:l,location:S.location,delta:1})}function b(R,E){l="REPLACE";let N=Jg(S.location,R,E);f=m();let M=C1(N,f),I=S.createHref(N);c.replaceState(M,"",I),a&&d&&d({action:l,location:S.location,delta:0})}function w(R){return DI(R)}let S={get action(){return l},get location(){return t(r,c)},listen(R){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(w1,p),d=R,()=>{r.removeEventListener(w1,p),d=null}},createHref(R){return e(r,R)},createURL:w,encodeLocation(R){let E=w(R);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:b,go(R){return c.go(R)}};return S}function DI(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:$l(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Bk(t,e,n="/"){return NI(t,e,n,!1)}function NI(t,e,n,i){let r=typeof e=="string"?sc(e):e,a=zr(r.pathname||"/",n);if(a==null)return null;let c=Fk(t);MI(c);let l=null;for(let d=0;l==null&&d<c.length;++d){let f=qI(a);l=zI(c[d],f,i)}return l}function Fk(t,e=[],n=[],i=""){let r=(a,c,l)=>{let d={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(Lt(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let f=Vr([i,d.relativePath]),m=n.concat(d);a.children&&a.children.length>0&&(Lt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Fk(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:FI(f,a.index),routesMeta:m})};return t.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))r(a,c);else for(let l of Vk(a.path))r(a,c,l)}),e}function Vk(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let c=Vk(i.join("/")),l=[];return l.push(...c.map(d=>d===""?a:[a,d].join("/"))),r&&l.push(...c),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function MI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:VI(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var OI=/^:[\w-]+$/,II=3,UI=2,LI=1,jI=10,BI=-2,E1=t=>t==="*";function FI(t,e){let n=t.split("/"),i=n.length;return n.some(E1)&&(i+=BI),e&&(i+=UI),n.filter(r=>!E1(r)).reduce((r,a)=>r+(OI.test(a)?II:a===""?LI:jI),i)}function VI(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function zI(t,e,n=!1){let{routesMeta:i}=t,r={},a="/",c=[];for(let l=0;l<i.length;++l){let d=i[l],f=l===i.length-1,m=a==="/"?e:e.slice(a.length)||"/",p=kf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),v=d.route;if(!p&&f&&n&&!i[i.length-1].route.index&&(p=kf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!p)return null;Object.assign(r,p.params),c.push({params:r,pathname:Vr([a,p.pathname]),pathnameBase:$I(Vr([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=Vr([a,p.pathnameBase]))}return c}function kf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=HI(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],c=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((f,{paramName:m,isOptional:p},v)=>{if(m==="*"){let w=l[v]||"";c=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const b=l[v];return p&&!b?f[m]=void 0:f[m]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function HI(t,e=!1,n=!0){Ri(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,l,d)=>(i.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function qI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ri(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function zr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function GI(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?sc(t):t;return{pathname:n?n.startsWith("/")?n:KI(n,e):e,search:WI(i),hash:XI(r)}}function KI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Np(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function F0(t){let e=YI(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function V0(t,e,n,i=!1){let r;typeof t=="string"?r=sc(t):(r={...t},Lt(!r.pathname||!r.pathname.includes("?"),Np("?","pathname","search",r)),Lt(!r.pathname||!r.pathname.includes("#"),Np("#","pathname","hash",r)),Lt(!r.search||!r.search.includes("#"),Np("#","search","hash",r)));let a=t===""||r.pathname==="",c=a?"/":r.pathname,l;if(c==null)l=n;else{let p=e.length-1;if(!i&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),p-=1;r.pathname=v.join("/")}l=p>=0?e[p]:"/"}let d=GI(r,l),f=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var Vr=t=>t.join("/").replace(/\/\/+/g,"/"),$I=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var zk=["POST","PUT","PATCH","DELETE"];new Set(zk);var JI=["GET",...zk];new Set(JI);var ac=T.createContext(null);ac.displayName="DataRouter";var Zf=T.createContext(null);Zf.displayName="DataRouterState";T.createContext(!1);var Hk=T.createContext({isTransitioning:!1});Hk.displayName="ViewTransition";var QI=T.createContext(new Map);QI.displayName="Fetchers";var eU=T.createContext(null);eU.displayName="Await";var qi=T.createContext(null);qi.displayName="Navigation";var du=T.createContext(null);du.displayName="Location";var fr=T.createContext({outlet:null,matches:[],isDataRoute:!1});fr.displayName="Route";var z0=T.createContext(null);z0.displayName="RouteError";function tU(t,{relative:e}={}){Lt(oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=T.useContext(qi),{hash:r,pathname:a,search:c}=fu(t,{relative:e}),l=a;return n!=="/"&&(l=a==="/"?n:Vr([n,a])),i.createHref({pathname:l,search:c,hash:r})}function oc(){return T.useContext(du)!=null}function Gi(){return Lt(oc(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(du).location}var qk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gk(t){T.useContext(qi).static||T.useLayoutEffect(t)}function Fs(){let{isDataRoute:t}=T.useContext(fr);return t?mU():nU()}function nU(){Lt(oc(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(ac),{basename:e,navigator:n}=T.useContext(qi),{matches:i}=T.useContext(fr),{pathname:r}=Gi(),a=JSON.stringify(F0(i)),c=T.useRef(!1);return Gk(()=>{c.current=!0}),T.useCallback((d,f={})=>{if(Ri(c.current,qk),!c.current)return;if(typeof d=="number"){n.go(d);return}let m=V0(d,JSON.parse(a),r,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Vr([e,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[e,n,a,r,t])}T.createContext(null);function fu(t,{relative:e}={}){let{matches:n}=T.useContext(fr),{pathname:i}=Gi(),r=JSON.stringify(F0(n));return T.useMemo(()=>V0(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function iU(t,e){return Kk(t,e)}function Kk(t,e,n,i){Lt(oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=T.useContext(qi),{matches:a}=T.useContext(fr),c=a[a.length-1],l=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let E=m&&m.path||"";Yk(d,!m||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=Gi(),v;if(e){let E=typeof e=="string"?sc(e):e;Lt(f==="/"||E.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),v=E}else v=p;let b=v.pathname||"/",w=b;if(f!=="/"){let E=f.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=Bk(t,{pathname:w});Ri(m||S!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ri(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let R=cU(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},l,E.params),pathname:Vr([f,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:Vr([f,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),a,n,i);return e&&R?T.createElement(du.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},R):R}function rU(){let t=hU(),e=ZI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=T.createElement(T.Fragment,null,T.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:r},n):null,c)}var sU=T.createElement(rU,null),aU=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?T.createElement(fr.Provider,{value:this.props.routeContext},T.createElement(z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function oU({routeContext:t,match:e,children:n}){let i=T.useContext(ac);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(fr.Provider,{value:t},n)}function cU(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,a=n?.errors;if(a!=null){let d=r.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);Lt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let c=!1,l=-1;if(n)for(let d=0;d<r.length;d++){let f=r[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=d),f.route.id){let{loaderData:m,errors:p}=n,v=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){c=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((d,f,m)=>{let p,v=!1,b=null,w=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||sU,c&&(l<0&&m===0?(Yk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):l===m&&(v=!0,w=f.route.hydrateFallbackElement||null)));let S=e.concat(r.slice(0,m+1)),R=()=>{let E;return p?E=b:v?E=w:f.route.Component?E=T.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=d,T.createElement(oU,{match:f,routeContext:{outlet:d,matches:S,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?T.createElement(aU,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:R(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):R()},null)}function H0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lU(t){let e=T.useContext(ac);return Lt(e,H0(t)),e}function uU(t){let e=T.useContext(Zf);return Lt(e,H0(t)),e}function dU(t){let e=T.useContext(fr);return Lt(e,H0(t)),e}function q0(t){let e=dU(t),n=e.matches[e.matches.length-1];return Lt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function fU(){return q0("useRouteId")}function hU(){let t=T.useContext(z0),e=uU("useRouteError"),n=q0("useRouteError");return t!==void 0?t:e.errors?.[n]}function mU(){let{router:t}=lU("useNavigate"),e=q0("useNavigate"),n=T.useRef(!1);return Gk(()=>{n.current=!0}),T.useCallback(async(r,a={})=>{Ri(n.current,qk),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var k1={};function Yk(t,e,n){!e&&!k1[t]&&(k1[t]=!0,Ri(!1,n))}T.memo(pU);function pU({routes:t,future:e,state:n}){return Kk(t,void 0,n,e)}function gU({to:t,replace:e,state:n,relative:i}){Lt(oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=T.useContext(qi);Ri(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(fr),{pathname:c}=Gi(),l=Fs(),d=V0(t,F0(a),c,i==="path"),f=JSON.stringify(d);return T.useEffect(()=>{l(JSON.parse(f),{replace:e,state:n,relative:i})},[l,f,i,e,n]),null}function Cs(t){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function vU({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:a=!1}){Lt(!oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:c,navigator:r,static:a,future:{}}),[c,r,a]);typeof n=="string"&&(n=sc(n));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:v="default"}=n,b=T.useMemo(()=>{let w=zr(d,c);return w==null?null:{location:{pathname:w,search:f,hash:m,state:p,key:v},navigationType:i}},[c,d,f,m,p,v,i]);return Ri(b!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:T.createElement(qi.Provider,{value:l},T.createElement(du.Provider,{children:e,value:b}))}function yU({children:t,location:e}){return iU(Qg(t),e)}function Qg(t,e=[]){let n=[];return T.Children.forEach(t,(i,r)=>{if(!T.isValidElement(i))return;let a=[...e,r];if(i.type===T.Fragment){n.push.apply(n,Qg(i.props.children,a));return}Lt(i.type===Cs,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Qg(i.props.children,a)),n.push(c)}),n}var tf="get",nf="application/x-www-form-urlencoded";function Jf(t){return t!=null&&typeof t.tagName=="string"}function bU(t){return Jf(t)&&t.tagName.toLowerCase()==="button"}function SU(t){return Jf(t)&&t.tagName.toLowerCase()==="form"}function TU(t){return Jf(t)&&t.tagName.toLowerCase()==="input"}function xU(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wU(t,e){return t.button===0&&(!e||e==="_self")&&!xU(t)}function ev(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function CU(t,e){let n=ev(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(a=>{n.append(r,a)})}),n}var Od=null;function EU(){if(Od===null)try{new FormData(document.createElement("form"),0),Od=!1}catch{Od=!0}return Od}var kU=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mp(t){return t!=null&&!kU.has(t)?(Ri(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nf}"`),null):t}function RU(t,e){let n,i,r,a,c;if(SU(t)){let l=t.getAttribute("action");i=l?zr(l,e):null,n=t.getAttribute("method")||tf,r=Mp(t.getAttribute("enctype"))||nf,a=new FormData(t)}else if(bU(t)||TU(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||l.getAttribute("action");if(i=d?zr(d,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||tf,r=Mp(t.getAttribute("formenctype"))||Mp(l.getAttribute("enctype"))||nf,a=new FormData(l,t),!EU()){let{name:f,type:m,value:p}=t;if(m==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,p)}}else{if(Jf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tf,i=null,r=nf,c=t}return a&&r==="text/plain"&&(c=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function G0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AU(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&zr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function _U(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function PU(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function DU(t,e,n){let i=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let c=await _U(a,n);return c.links?c.links():[]}return[]}));return IU(i.flat(1).filter(PU).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function R1(t,e,n,i,r,a){let c=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,l=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>c(d,f)||l(d,f)):a==="data"?e.filter((d,f)=>{let m=i.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,f)||l(d,f))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function NU(t,e,{includeHydrateFallback:n}={}){return MU(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function MU(t){return[...new Set(t)]}function OU(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function IU(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let a=JSON.stringify(OU(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function $k(){let t=T.useContext(ac);return G0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function UU(){let t=T.useContext(Zf);return G0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var K0=T.createContext(void 0);K0.displayName="FrameworkContext";function Wk(){let t=T.useContext(K0);return G0(t,"You must render this element inside a <HydratedRouter> element"),t}function LU(t,e){let n=T.useContext(K0),[i,r]=T.useState(!1),[a,c]=T.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:p}=e,v=T.useRef(null);T.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let S=E=>{E.forEach(N=>{c(N.isIntersecting)})},R=new IntersectionObserver(S,{threshold:.5});return v.current&&R.observe(v.current),()=>{R.disconnect()}}},[t]),T.useEffect(()=>{if(i){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[i]);let b=()=>{r(!0)},w=()=>{r(!1),c(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:pl(l,b),onBlur:pl(d,w),onMouseEnter:pl(f,b),onMouseLeave:pl(m,w),onTouchStart:pl(p,b)}]:[!1,v,{}]}function pl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function jU({page:t,...e}){let{router:n}=$k(),i=T.useMemo(()=>Bk(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?T.createElement(FU,{page:t,matches:i,...e}):null}function BU(t){let{manifest:e,routeModules:n}=Wk(),[i,r]=T.useState([]);return T.useEffect(()=>{let a=!1;return DU(t,e,n).then(c=>{a||r(c)}),()=>{a=!0}},[t,e,n]),i}function FU({page:t,matches:e,...n}){let i=Gi(),{manifest:r,routeModules:a}=Wk(),{basename:c}=$k(),{loaderData:l,matches:d}=UU(),f=T.useMemo(()=>R1(t,e,d,r,i,"data"),[t,e,d,r,i]),m=T.useMemo(()=>R1(t,e,d,r,i,"assets"),[t,e,d,r,i]),p=T.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let w=new Set,S=!1;if(e.forEach(E=>{let N=r.routes[E.route.id];!N||!N.hasLoader||(!f.some(M=>M.route.id===E.route.id)&&E.route.id in l&&a[E.route.id]?.shouldRevalidate||N.hasClientLoader?S=!0:w.add(E.route.id))}),w.size===0)return[];let R=AU(t,c,"data");return S&&w.size>0&&R.searchParams.set("_routes",e.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[R.pathname+R.search]},[c,l,i,r,f,e,t,a]),v=T.useMemo(()=>NU(m,r),[m,r]),b=BU(m);return T.createElement(T.Fragment,null,p.map(w=>T.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>T.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:S})=>T.createElement("link",{key:w,...S})))}function VU(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Xk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xk&&(window.__reactRouterVersion="7.7.1")}catch{}function zU({basename:t,children:e,window:n}){let i=T.useRef();i.current==null&&(i.current=AI({window:n,v5Compat:!0}));let r=i.current,[a,c]=T.useState({action:r.action,location:r.location}),l=T.useCallback(d=>{T.startTransition(()=>c(d))},[c]);return T.useLayoutEffect(()=>r.listen(l),[r,l]),T.createElement(vU,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r})}var Zk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ln=T.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:c,state:l,target:d,to:f,preventScrollReset:m,viewTransition:p,...v},b){let{basename:w}=T.useContext(qi),S=typeof f=="string"&&Zk.test(f),R,E=!1;if(typeof f=="string"&&S&&(R=f,Xk))try{let W=new URL(window.location.href),re=f.startsWith("//")?new URL(W.protocol+f):new URL(f),se=zr(re.pathname,w);re.origin===W.origin&&se!=null?f=se+re.search+re.hash:E=!0}catch{Ri(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=tU(f,{relative:r}),[M,I,A]=LU(i,v),L=KU(f,{replace:c,state:l,target:d,preventScrollReset:m,relative:r,viewTransition:p});function z(W){e&&e(W),W.defaultPrevented||L(W)}let H=T.createElement("a",{...v,...A,href:R||N,onClick:E||a?e:z,ref:VU(b,I),target:d,"data-discover":!S&&n==="render"?"true":void 0});return M&&!S?T.createElement(T.Fragment,null,H,T.createElement(jU,{page:N})):H});ln.displayName="Link";var HU=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:c,viewTransition:l,children:d,...f},m){let p=fu(c,{relative:f.relative}),v=Gi(),b=T.useContext(Zf),{navigator:w,basename:S}=T.useContext(qi),R=b!=null&&JU(p)&&l===!0,E=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,N=v.pathname,M=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(N=N.toLowerCase(),M=M?M.toLowerCase():null,E=E.toLowerCase()),M&&S&&(M=zr(M,S)||M);const I=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let A=N===E||!r&&N.startsWith(E)&&N.charAt(I)==="/",L=M!=null&&(M===E||!r&&M.startsWith(E)&&M.charAt(E.length)==="/"),z={isActive:A,isPending:L,isTransitioning:R},H=A?e:void 0,W;typeof i=="function"?W=i(z):W=[i,A?"active":null,L?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let re=typeof a=="function"?a(z):a;return T.createElement(ln,{...f,"aria-current":H,className:W,ref:m,style:re,to:c,viewTransition:l},typeof d=="function"?d(z):d)});HU.displayName="NavLink";var qU=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:a,method:c=tf,action:l,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:p,...v},b)=>{let w=XU(),S=ZU(l,{relative:f}),R=c.toLowerCase()==="get"?"get":"post",E=typeof l=="string"&&Zk.test(l),N=M=>{if(d&&d(M),M.defaultPrevented)return;M.preventDefault();let I=M.nativeEvent.submitter,A=I?.getAttribute("formmethod")||c;w(I||M.currentTarget,{fetcherKey:e,method:A,navigate:n,replace:r,state:a,relative:f,preventScrollReset:m,viewTransition:p})};return T.createElement("form",{ref:b,method:R,action:S,onSubmit:i?d:N,...v,"data-discover":!E&&t==="render"?"true":void 0})});qU.displayName="Form";function GU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jk(t){let e=T.useContext(ac);return Lt(e,GU(t)),e}function KU(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:c}={}){let l=Fs(),d=Gi(),f=fu(t,{relative:a});return T.useCallback(m=>{if(wU(m,e)){m.preventDefault();let p=n!==void 0?n:$l(d)===$l(f);l(t,{replace:p,state:i,preventScrollReset:r,relative:a,viewTransition:c})}},[d,l,f,n,i,e,t,r,a,c])}function YU(t){Ri(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(ev(t)),n=T.useRef(!1),i=Gi(),r=T.useMemo(()=>CU(i.search,n.current?null:e.current),[i.search]),a=Fs(),c=T.useCallback((l,d)=>{const f=ev(typeof l=="function"?l(new URLSearchParams(r)):l);n.current=!0,a("?"+f,d)},[a,r]);return[r,c]}var $U=0,WU=()=>`__${String(++$U)}__`;function XU(){let{router:t}=Jk("useSubmit"),{basename:e}=T.useContext(qi),n=fU();return T.useCallback(async(i,r={})=>{let{action:a,method:c,encType:l,formData:d,body:f}=RU(i,e);if(r.navigate===!1){let m=r.fetcherKey||WU();await t.fetch(m,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||c,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||c,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function ZU(t,{relative:e}={}){let{basename:n}=T.useContext(qi),i=T.useContext(fr);Lt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...fu(t||".",{relative:e})},c=Gi();if(t==null){a.search=c.search;let l=new URLSearchParams(a.search),d=l.getAll("index");if(d.some(m=>m==="")){l.delete("index"),d.filter(p=>p).forEach(p=>l.append("index",p));let m=l.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Vr([n,a.pathname])),$l(a)}function JU(t,{relative:e}={}){let n=T.useContext(Hk);Lt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Jk("useViewTransitionState"),r=fu(t,{relative:e});if(!n.isTransitioning)return!1;let a=zr(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=zr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return kf(r.pathname,c)!=null||kf(r.pathname,a)!=null}var Op={exports:{}},Nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A1;function QU(){if(A1)return Nn;A1=1;var t=B0();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(d,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:d,containerInfo:f,implementation:m}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Nn.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},Nn.flushSync=function(d){var f=c.T,m=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=m,i.d.f()}},Nn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Nn.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Nn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,p=l(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:b}):m==="script"&&i.d.X(d,{crossOrigin:p,integrity:v,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Nn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Nn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=l(m,f.crossOrigin);i.d.L(d,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Nn.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=l(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Nn.requestFormReset=function(d){i.d.r(d)},Nn.unstable_batchedUpdates=function(d,f){return d(f)},Nn.useFormState=function(d,f,m){return c.H.useFormState(d,f,m)},Nn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Nn.version="19.1.1",Nn}var _1;function Qk(){if(_1)return Op.exports;_1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Op.exports=QU(),Op.exports}var hu=Qk();const eR=Lk(hu);var Ip={},gl={},P1;function tR(){if(P1)return gl;P1=1,gl.byteLength=l,gl.toByteArray=f,gl.fromByteArray=v;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=i.length;r<a;++r)t[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function c(b){var w=b.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var S=b.indexOf("=");S===-1&&(S=w);var R=S===w?0:4-S%4;return[S,R]}function l(b){var w=c(b),S=w[0],R=w[1];return(S+R)*3/4-R}function d(b,w,S){return(w+S)*3/4-S}function f(b){var w,S=c(b),R=S[0],E=S[1],N=new n(d(b,R,E)),M=0,I=E>0?R-4:R,A;for(A=0;A<I;A+=4)w=e[b.charCodeAt(A)]<<18|e[b.charCodeAt(A+1)]<<12|e[b.charCodeAt(A+2)]<<6|e[b.charCodeAt(A+3)],N[M++]=w>>16&255,N[M++]=w>>8&255,N[M++]=w&255;return E===2&&(w=e[b.charCodeAt(A)]<<2|e[b.charCodeAt(A+1)]>>4,N[M++]=w&255),E===1&&(w=e[b.charCodeAt(A)]<<10|e[b.charCodeAt(A+1)]<<4|e[b.charCodeAt(A+2)]>>2,N[M++]=w>>8&255,N[M++]=w&255),N}function m(b){return t[b>>18&63]+t[b>>12&63]+t[b>>6&63]+t[b&63]}function p(b,w,S){for(var R,E=[],N=w;N<S;N+=3)R=(b[N]<<16&16711680)+(b[N+1]<<8&65280)+(b[N+2]&255),E.push(m(R));return E.join("")}function v(b){for(var w,S=b.length,R=S%3,E=[],N=16383,M=0,I=S-R;M<I;M+=N)E.push(p(b,M,M+N>I?I:M+N));return R===1?(w=b[S-1],E.push(t[w>>2]+t[w<<4&63]+"==")):R===2&&(w=(b[S-2]<<8)+b[S-1],E.push(t[w>>10]+t[w>>4&63]+t[w<<2&63]+"=")),E.join("")}return gl}var Id={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var D1;function nR(){return D1||(D1=1,Id.read=function(t,e,n,i,r){var a,c,l=r*8-i-1,d=(1<<l)-1,f=d>>1,m=-7,p=n?r-1:0,v=n?-1:1,b=t[e+p];for(p+=v,a=b&(1<<-m)-1,b>>=-m,m+=l;m>0;a=a*256+t[e+p],p+=v,m-=8);for(c=a&(1<<-m)-1,a>>=-m,m+=i;m>0;c=c*256+t[e+p],p+=v,m-=8);if(a===0)a=1-f;else{if(a===d)return c?NaN:(b?-1:1)*(1/0);c=c+Math.pow(2,i),a=a-f}return(b?-1:1)*c*Math.pow(2,a-i)},Id.write=function(t,e,n,i,r,a){var c,l,d,f=a*8-r-1,m=(1<<f)-1,p=m>>1,v=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:a-1,w=i?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,c=m):(c=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-c))<1&&(c--,d*=2),c+p>=1?e+=v/d:e+=v*Math.pow(2,1-p),e*d>=2&&(c++,d/=2),c+p>=m?(l=0,c=m):c+p>=1?(l=(e*d-1)*Math.pow(2,r),c=c+p):(l=e*Math.pow(2,p-1)*Math.pow(2,r),c=0));r>=8;t[n+b]=l&255,b+=w,l/=256,r-=8);for(c=c<<r|l,f+=r;f>0;t[n+b]=c&255,b+=w,c/=256,f-=8);t[n+b-w]|=S*128}),Id}var Up,N1;function eL(){if(N1)return Up;N1=1;var t={}.toString;return Up=Array.isArray||function(e){return t.call(e)=="[object Array]"},Up}var M1;function tL(){return M1||(M1=1,function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var e=tR(),n=nR(),i=eL();t.Buffer=l,t.SlowBuffer=E,t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=a();function r(){try{var B=new Uint8Array(1);return B.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},B.foo()===42&&typeof B.subarray=="function"&&B.subarray(1,1).byteLength===0}catch{return!1}}function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(B,_){if(a()<_)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(B=new Uint8Array(_),B.__proto__=l.prototype):(B===null&&(B=new l(_)),B.length=_),B}function l(B,_,P){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(B,_,P);if(typeof B=="number"){if(typeof _=="string")throw new Error("If encoding is specified then the first argument must be a string");return p(this,B)}return d(this,B,_,P)}l.poolSize=8192,l._augment=function(B){return B.__proto__=l.prototype,B};function d(B,_,P,V){if(typeof _=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&_ instanceof ArrayBuffer?w(B,_,P,V):typeof _=="string"?v(B,_,P):S(B,_)}l.from=function(B,_,P){return d(null,B,_,P)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0}));function f(B){if(typeof B!="number")throw new TypeError('"size" argument must be a number');if(B<0)throw new RangeError('"size" argument must not be negative')}function m(B,_,P,V){return f(_),_<=0?c(B,_):P!==void 0?typeof V=="string"?c(B,_).fill(P,V):c(B,_).fill(P):c(B,_)}l.alloc=function(B,_,P){return m(null,B,_,P)};function p(B,_){if(f(_),B=c(B,_<0?0:R(_)|0),!l.TYPED_ARRAY_SUPPORT)for(var P=0;P<_;++P)B[P]=0;return B}l.allocUnsafe=function(B){return p(null,B)},l.allocUnsafeSlow=function(B){return p(null,B)};function v(B,_,P){if((typeof P!="string"||P==="")&&(P="utf8"),!l.isEncoding(P))throw new TypeError('"encoding" must be a valid string encoding');var V=N(_,P)|0;B=c(B,V);var X=B.write(_,P);return X!==V&&(B=B.slice(0,X)),B}function b(B,_){var P=_.length<0?0:R(_.length)|0;B=c(B,P);for(var V=0;V<P;V+=1)B[V]=_[V]&255;return B}function w(B,_,P,V){if(_.byteLength,P<0||_.byteLength<P)throw new RangeError("'offset' is out of bounds");if(_.byteLength<P+(V||0))throw new RangeError("'length' is out of bounds");return P===void 0&&V===void 0?_=new Uint8Array(_):V===void 0?_=new Uint8Array(_,P):_=new Uint8Array(_,P,V),l.TYPED_ARRAY_SUPPORT?(B=_,B.__proto__=l.prototype):B=b(B,_),B}function S(B,_){if(l.isBuffer(_)){var P=R(_.length)|0;return B=c(B,P),B.length===0||_.copy(B,0,0,P),B}if(_){if(typeof ArrayBuffer<"u"&&_.buffer instanceof ArrayBuffer||"length"in _)return typeof _.length!="number"||_t(_.length)?c(B,0):b(B,_);if(_.type==="Buffer"&&i(_.data))return b(B,_.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function R(B){if(B>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return B|0}function E(B){return+B!=B&&(B=0),l.alloc(+B)}l.isBuffer=function(_){return!!(_!=null&&_._isBuffer)},l.compare=function(_,P){if(!l.isBuffer(_)||!l.isBuffer(P))throw new TypeError("Arguments must be Buffers");if(_===P)return 0;for(var V=_.length,X=P.length,pe=0,we=Math.min(V,X);pe<we;++pe)if(_[pe]!==P[pe]){V=_[pe],X=P[pe];break}return V<X?-1:X<V?1:0},l.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(_,P){if(!i(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return l.alloc(0);var V;if(P===void 0)for(P=0,V=0;V<_.length;++V)P+=_[V].length;var X=l.allocUnsafe(P),pe=0;for(V=0;V<_.length;++V){var we=_[V];if(!l.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy(X,pe),pe+=we.length}return X};function N(B,_){if(l.isBuffer(B))return B.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(B)||B instanceof ArrayBuffer))return B.byteLength;typeof B!="string"&&(B=""+B);var P=B.length;if(P===0)return 0;for(var V=!1;;)switch(_){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":case void 0:return Ye(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return di(B).length;default:if(V)return Ye(B).length;_=(""+_).toLowerCase(),V=!0}}l.byteLength=N;function M(B,_,P){var V=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,_>>>=0,P<=_))return"";for(B||(B="utf8");;)switch(B){case"hex":return _e(this,_,P);case"utf8":case"utf-8":return Ae(this,_,P);case"ascii":return ie(this,_,P);case"latin1":case"binary":return J(this,_,P);case"base64":return Ee(this,_,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,_,P);default:if(V)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),V=!0}}l.prototype._isBuffer=!0;function I(B,_,P){var V=B[_];B[_]=B[P],B[P]=V}l.prototype.swap16=function(){var _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var P=0;P<_;P+=2)I(this,P,P+1);return this},l.prototype.swap32=function(){var _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var P=0;P<_;P+=4)I(this,P,P+3),I(this,P+1,P+2);return this},l.prototype.swap64=function(){var _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var P=0;P<_;P+=8)I(this,P,P+7),I(this,P+1,P+6),I(this,P+2,P+5),I(this,P+3,P+4);return this},l.prototype.toString=function(){var _=this.length|0;return _===0?"":arguments.length===0?Ae(this,0,_):M.apply(this,arguments)},l.prototype.equals=function(_){if(!l.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:l.compare(this,_)===0},l.prototype.inspect=function(){var _="",P=t.INSPECT_MAX_BYTES;return this.length>0&&(_=this.toString("hex",0,P).match(/.{2}/g).join(" "),this.length>P&&(_+=" ... ")),"<Buffer "+_+">"},l.prototype.compare=function(_,P,V,X,pe){if(!l.isBuffer(_))throw new TypeError("Argument must be a Buffer");if(P===void 0&&(P=0),V===void 0&&(V=_?_.length:0),X===void 0&&(X=0),pe===void 0&&(pe=this.length),P<0||V>_.length||X<0||pe>this.length)throw new RangeError("out of range index");if(X>=pe&&P>=V)return 0;if(X>=pe)return-1;if(P>=V)return 1;if(P>>>=0,V>>>=0,X>>>=0,pe>>>=0,this===_)return 0;for(var we=pe-X,Ge=V-P,Je=Math.min(we,Ge),O=this.slice(X,pe),C=_.slice(P,V),k=0;k<Je;++k)if(O[k]!==C[k]){we=O[k],Ge=C[k];break}return we<Ge?-1:Ge<we?1:0};function A(B,_,P,V,X){if(B.length===0)return-1;if(typeof P=="string"?(V=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,isNaN(P)&&(P=X?0:B.length-1),P<0&&(P=B.length+P),P>=B.length){if(X)return-1;P=B.length-1}else if(P<0)if(X)P=0;else return-1;if(typeof _=="string"&&(_=l.from(_,V)),l.isBuffer(_))return _.length===0?-1:L(B,_,P,V,X);if(typeof _=="number")return _=_&255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?X?Uint8Array.prototype.indexOf.call(B,_,P):Uint8Array.prototype.lastIndexOf.call(B,_,P):L(B,[_],P,V,X);throw new TypeError("val must be string, number or Buffer")}function L(B,_,P,V,X){var pe=1,we=B.length,Ge=_.length;if(V!==void 0&&(V=String(V).toLowerCase(),V==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(B.length<2||_.length<2)return-1;pe=2,we/=2,Ge/=2,P/=2}function Je($,ae){return pe===1?$[ae]:$.readUInt16BE(ae*pe)}var O;if(X){var C=-1;for(O=P;O<we;O++)if(Je(B,O)===Je(_,C===-1?0:O-C)){if(C===-1&&(C=O),O-C+1===Ge)return C*pe}else C!==-1&&(O-=O-C),C=-1}else for(P+Ge>we&&(P=we-Ge),O=P;O>=0;O--){for(var k=!0,j=0;j<Ge;j++)if(Je(B,O+j)!==Je(_,j)){k=!1;break}if(k)return O}return-1}l.prototype.includes=function(_,P,V){return this.indexOf(_,P,V)!==-1},l.prototype.indexOf=function(_,P,V){return A(this,_,P,V,!0)},l.prototype.lastIndexOf=function(_,P,V){return A(this,_,P,V,!1)};function z(B,_,P,V){P=Number(P)||0;var X=B.length-P;V?(V=Number(V),V>X&&(V=X)):V=X;var pe=_.length;if(pe%2!==0)throw new TypeError("Invalid hex string");V>pe/2&&(V=pe/2);for(var we=0;we<V;++we){var Ge=parseInt(_.substr(we*2,2),16);if(isNaN(Ge))return we;B[P+we]=Ge}return we}function H(B,_,P,V){return In(Ye(_,B.length-P),B,P,V)}function W(B,_,P,V){return In(kt(_),B,P,V)}function re(B,_,P,V){return W(B,_,P,V)}function se(B,_,P,V){return In(di(_),B,P,V)}function fe(B,_,P,V){return In(jt(_,B.length-P),B,P,V)}l.prototype.write=function(_,P,V,X){if(P===void 0)X="utf8",V=this.length,P=0;else if(V===void 0&&typeof P=="string")X=P,V=this.length,P=0;else if(isFinite(P))P=P|0,isFinite(V)?(V=V|0,X===void 0&&(X="utf8")):(X=V,V=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var pe=this.length-P;if((V===void 0||V>pe)&&(V=pe),_.length>0&&(V<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");X||(X="utf8");for(var we=!1;;)switch(X){case"hex":return z(this,_,P,V);case"utf8":case"utf-8":return H(this,_,P,V);case"ascii":return W(this,_,P,V);case"latin1":case"binary":return re(this,_,P,V);case"base64":return se(this,_,P,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,_,P,V);default:if(we)throw new TypeError("Unknown encoding: "+X);X=(""+X).toLowerCase(),we=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ee(B,_,P){return _===0&&P===B.length?e.fromByteArray(B):e.fromByteArray(B.slice(_,P))}function Ae(B,_,P){P=Math.min(B.length,P);for(var V=[],X=_;X<P;){var pe=B[X],we=null,Ge=pe>239?4:pe>223?3:pe>191?2:1;if(X+Ge<=P){var Je,O,C,k;switch(Ge){case 1:pe<128&&(we=pe);break;case 2:Je=B[X+1],(Je&192)===128&&(k=(pe&31)<<6|Je&63,k>127&&(we=k));break;case 3:Je=B[X+1],O=B[X+2],(Je&192)===128&&(O&192)===128&&(k=(pe&15)<<12|(Je&63)<<6|O&63,k>2047&&(k<55296||k>57343)&&(we=k));break;case 4:Je=B[X+1],O=B[X+2],C=B[X+3],(Je&192)===128&&(O&192)===128&&(C&192)===128&&(k=(pe&15)<<18|(Je&63)<<12|(O&63)<<6|C&63,k>65535&&k<1114112&&(we=k))}}we===null?(we=65533,Ge=1):we>65535&&(we-=65536,V.push(we>>>10&1023|55296),we=56320|we&1023),V.push(we),X+=Ge}return K(V)}var Pe=4096;function K(B){var _=B.length;if(_<=Pe)return String.fromCharCode.apply(String,B);for(var P="",V=0;V<_;)P+=String.fromCharCode.apply(String,B.slice(V,V+=Pe));return P}function ie(B,_,P){var V="";P=Math.min(B.length,P);for(var X=_;X<P;++X)V+=String.fromCharCode(B[X]&127);return V}function J(B,_,P){var V="";P=Math.min(B.length,P);for(var X=_;X<P;++X)V+=String.fromCharCode(B[X]);return V}function _e(B,_,P){var V=B.length;(!_||_<0)&&(_=0),(!P||P<0||P>V)&&(P=V);for(var X="",pe=_;pe<P;++pe)X+=Xe(B[pe]);return X}function F(B,_,P){for(var V=B.slice(_,P),X="",pe=0;pe<V.length;pe+=2)X+=String.fromCharCode(V[pe]+V[pe+1]*256);return X}l.prototype.slice=function(_,P){var V=this.length;_=~~_,P=P===void 0?V:~~P,_<0?(_+=V,_<0&&(_=0)):_>V&&(_=V),P<0?(P+=V,P<0&&(P=0)):P>V&&(P=V),P<_&&(P=_);var X;if(l.TYPED_ARRAY_SUPPORT)X=this.subarray(_,P),X.__proto__=l.prototype;else{var pe=P-_;X=new l(pe,void 0);for(var we=0;we<pe;++we)X[we]=this[we+_]}return X};function Z(B,_,P){if(B%1!==0||B<0)throw new RangeError("offset is not uint");if(B+_>P)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function(_,P,V){_=_|0,P=P|0,V||Z(_,P,this.length);for(var X=this[_],pe=1,we=0;++we<P&&(pe*=256);)X+=this[_+we]*pe;return X},l.prototype.readUIntBE=function(_,P,V){_=_|0,P=P|0,V||Z(_,P,this.length);for(var X=this[_+--P],pe=1;P>0&&(pe*=256);)X+=this[_+--P]*pe;return X},l.prototype.readUInt8=function(_,P){return P||Z(_,1,this.length),this[_]},l.prototype.readUInt16LE=function(_,P){return P||Z(_,2,this.length),this[_]|this[_+1]<<8},l.prototype.readUInt16BE=function(_,P){return P||Z(_,2,this.length),this[_]<<8|this[_+1]},l.prototype.readUInt32LE=function(_,P){return P||Z(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},l.prototype.readUInt32BE=function(_,P){return P||Z(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},l.prototype.readIntLE=function(_,P,V){_=_|0,P=P|0,V||Z(_,P,this.length);for(var X=this[_],pe=1,we=0;++we<P&&(pe*=256);)X+=this[_+we]*pe;return pe*=128,X>=pe&&(X-=Math.pow(2,8*P)),X},l.prototype.readIntBE=function(_,P,V){_=_|0,P=P|0,V||Z(_,P,this.length);for(var X=P,pe=1,we=this[_+--X];X>0&&(pe*=256);)we+=this[_+--X]*pe;return pe*=128,we>=pe&&(we-=Math.pow(2,8*P)),we},l.prototype.readInt8=function(_,P){return P||Z(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},l.prototype.readInt16LE=function(_,P){P||Z(_,2,this.length);var V=this[_]|this[_+1]<<8;return V&32768?V|4294901760:V},l.prototype.readInt16BE=function(_,P){P||Z(_,2,this.length);var V=this[_+1]|this[_]<<8;return V&32768?V|4294901760:V},l.prototype.readInt32LE=function(_,P){return P||Z(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},l.prototype.readInt32BE=function(_,P){return P||Z(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},l.prototype.readFloatLE=function(_,P){return P||Z(_,4,this.length),n.read(this,_,!0,23,4)},l.prototype.readFloatBE=function(_,P){return P||Z(_,4,this.length),n.read(this,_,!1,23,4)},l.prototype.readDoubleLE=function(_,P){return P||Z(_,8,this.length),n.read(this,_,!0,52,8)},l.prototype.readDoubleBE=function(_,P){return P||Z(_,8,this.length),n.read(this,_,!1,52,8)};function de(B,_,P,V,X,pe){if(!l.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>X||_<pe)throw new RangeError('"value" argument is out of bounds');if(P+V>B.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function(_,P,V,X){if(_=+_,P=P|0,V=V|0,!X){var pe=Math.pow(2,8*V)-1;de(this,_,P,V,pe,0)}var we=1,Ge=0;for(this[P]=_&255;++Ge<V&&(we*=256);)this[P+Ge]=_/we&255;return P+V},l.prototype.writeUIntBE=function(_,P,V,X){if(_=+_,P=P|0,V=V|0,!X){var pe=Math.pow(2,8*V)-1;de(this,_,P,V,pe,0)}var we=V-1,Ge=1;for(this[P+we]=_&255;--we>=0&&(Ge*=256);)this[P+we]=_/Ge&255;return P+V},l.prototype.writeUInt8=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,1,255,0),l.TYPED_ARRAY_SUPPORT||(_=Math.floor(_)),this[P]=_&255,P+1};function le(B,_,P,V){_<0&&(_=65535+_+1);for(var X=0,pe=Math.min(B.length-P,2);X<pe;++X)B[P+X]=(_&255<<8*(V?X:1-X))>>>(V?X:1-X)*8}l.prototype.writeUInt16LE=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[P]=_&255,this[P+1]=_>>>8):le(this,_,P,!0),P+2},l.prototype.writeUInt16BE=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[P]=_>>>8,this[P+1]=_&255):le(this,_,P,!1),P+2};function Te(B,_,P,V){_<0&&(_=4294967295+_+1);for(var X=0,pe=Math.min(B.length-P,4);X<pe;++X)B[P+X]=_>>>(V?X:3-X)*8&255}l.prototype.writeUInt32LE=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[P+3]=_>>>24,this[P+2]=_>>>16,this[P+1]=_>>>8,this[P]=_&255):Te(this,_,P,!0),P+4},l.prototype.writeUInt32BE=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[P]=_>>>24,this[P+1]=_>>>16,this[P+2]=_>>>8,this[P+3]=_&255):Te(this,_,P,!1),P+4},l.prototype.writeIntLE=function(_,P,V,X){if(_=+_,P=P|0,!X){var pe=Math.pow(2,8*V-1);de(this,_,P,V,pe-1,-pe)}var we=0,Ge=1,Je=0;for(this[P]=_&255;++we<V&&(Ge*=256);)_<0&&Je===0&&this[P+we-1]!==0&&(Je=1),this[P+we]=(_/Ge>>0)-Je&255;return P+V},l.prototype.writeIntBE=function(_,P,V,X){if(_=+_,P=P|0,!X){var pe=Math.pow(2,8*V-1);de(this,_,P,V,pe-1,-pe)}var we=V-1,Ge=1,Je=0;for(this[P+we]=_&255;--we>=0&&(Ge*=256);)_<0&&Je===0&&this[P+we+1]!==0&&(Je=1),this[P+we]=(_/Ge>>0)-Je&255;return P+V},l.prototype.writeInt8=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,1,127,-128),l.TYPED_ARRAY_SUPPORT||(_=Math.floor(_)),_<0&&(_=255+_+1),this[P]=_&255,P+1},l.prototype.writeInt16LE=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[P]=_&255,this[P+1]=_>>>8):le(this,_,P,!0),P+2},l.prototype.writeInt16BE=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[P]=_>>>8,this[P+1]=_&255):le(this,_,P,!1),P+2},l.prototype.writeInt32LE=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[P]=_&255,this[P+1]=_>>>8,this[P+2]=_>>>16,this[P+3]=_>>>24):Te(this,_,P,!0),P+4},l.prototype.writeInt32BE=function(_,P,V){return _=+_,P=P|0,V||de(this,_,P,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),l.TYPED_ARRAY_SUPPORT?(this[P]=_>>>24,this[P+1]=_>>>16,this[P+2]=_>>>8,this[P+3]=_&255):Te(this,_,P,!1),P+4};function Me(B,_,P,V,X,pe){if(P+V>B.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function De(B,_,P,V,X){return X||Me(B,_,P,4),n.write(B,_,P,V,23,4),P+4}l.prototype.writeFloatLE=function(_,P,V){return De(this,_,P,!0,V)},l.prototype.writeFloatBE=function(_,P,V){return De(this,_,P,!1,V)};function be(B,_,P,V,X){return X||Me(B,_,P,8),n.write(B,_,P,V,52,8),P+8}l.prototype.writeDoubleLE=function(_,P,V){return be(this,_,P,!0,V)},l.prototype.writeDoubleBE=function(_,P,V){return be(this,_,P,!1,V)},l.prototype.copy=function(_,P,V,X){if(V||(V=0),!X&&X!==0&&(X=this.length),P>=_.length&&(P=_.length),P||(P=0),X>0&&X<V&&(X=V),X===V||_.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(V<0||V>=this.length)throw new RangeError("sourceStart out of bounds");if(X<0)throw new RangeError("sourceEnd out of bounds");X>this.length&&(X=this.length),_.length-P<X-V&&(X=_.length-P+V);var pe=X-V,we;if(this===_&&V<P&&P<X)for(we=pe-1;we>=0;--we)_[we+P]=this[we+V];else if(pe<1e3||!l.TYPED_ARRAY_SUPPORT)for(we=0;we<pe;++we)_[we+P]=this[we+V];else Uint8Array.prototype.set.call(_,this.subarray(V,V+pe),P);return pe},l.prototype.fill=function(_,P,V,X){if(typeof _=="string"){if(typeof P=="string"?(X=P,P=0,V=this.length):typeof V=="string"&&(X=V,V=this.length),_.length===1){var pe=_.charCodeAt(0);pe<256&&(_=pe)}if(X!==void 0&&typeof X!="string")throw new TypeError("encoding must be a string");if(typeof X=="string"&&!l.isEncoding(X))throw new TypeError("Unknown encoding: "+X)}else typeof _=="number"&&(_=_&255);if(P<0||this.length<P||this.length<V)throw new RangeError("Out of range index");if(V<=P)return this;P=P>>>0,V=V===void 0?this.length:V>>>0,_||(_=0);var we;if(typeof _=="number")for(we=P;we<V;++we)this[we]=_;else{var Ge=l.isBuffer(_)?_:Ye(new l(_,X).toString()),Je=Ge.length;for(we=0;we<V-P;++we)this[we+P]=Ge[we%Je]}return this};var Ce=/[^+\/0-9A-Za-z-_]/g;function Ve(B){if(B=qe(B).replace(Ce,""),B.length<2)return"";for(;B.length%4!==0;)B=B+"=";return B}function qe(B){return B.trim?B.trim():B.replace(/^\s+|\s+$/g,"")}function Xe(B){return B<16?"0"+B.toString(16):B.toString(16)}function Ye(B,_){_=_||1/0;for(var P,V=B.length,X=null,pe=[],we=0;we<V;++we){if(P=B.charCodeAt(we),P>55295&&P<57344){if(!X){if(P>56319){(_-=3)>-1&&pe.push(239,191,189);continue}else if(we+1===V){(_-=3)>-1&&pe.push(239,191,189);continue}X=P;continue}if(P<56320){(_-=3)>-1&&pe.push(239,191,189),X=P;continue}P=(X-55296<<10|P-56320)+65536}else X&&(_-=3)>-1&&pe.push(239,191,189);if(X=null,P<128){if((_-=1)<0)break;pe.push(P)}else if(P<2048){if((_-=2)<0)break;pe.push(P>>6|192,P&63|128)}else if(P<65536){if((_-=3)<0)break;pe.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((_-=4)<0)break;pe.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return pe}function kt(B){for(var _=[],P=0;P<B.length;++P)_.push(B.charCodeAt(P)&255);return _}function jt(B,_){for(var P,V,X,pe=[],we=0;we<B.length&&!((_-=2)<0);++we)P=B.charCodeAt(we),V=P>>8,X=P%256,pe.push(X),pe.push(V);return pe}function di(B){return e.toByteArray(Ve(B))}function In(B,_,P,V){for(var X=0;X<V&&!(X+P>=_.length||X>=B.length);++X)_[X+P]=B[X];return X}function _t(B){return B!==B}}(Ip)),Ip}var Mt=tL(),wi;typeof window<"u"&&window.crypto&&(wi=window.crypto);!wi&&typeof window<"u"&&window.msCrypto&&(wi=window.msCrypto);!wi&&typeof globalThis<"u"&&globalThis.crypto&&(wi=globalThis.crypto);if(!wi&&typeof require=="function")try{wi=require("crypto")}catch{}function nL(){if(wi){if(typeof wi.getRandomValues=="function")try{return wi.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof wi.randomBytes=="function")try{return wi.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function iL(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((a&15).toString(16))}return i.join("")}var rL=function(){function t(n,i){n=this.words=n||[],i!=null?this.sigBytes=i:this.sigBytes=n.length*4}var e=t.prototype;return e.random=function(i){for(var r=[],a=0;a<i;a+=4)r.push(nL());return new t(r,i)},e.toString=function(){return iL(this)},t}(),Lp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tv=function(t,e){return tv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])},tv(t,e)};function sL(t,e){tv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var nv=function(){return nv=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nv.apply(this,arguments)};function aL(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function oL(t,e,n,i){var r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(a=(r<3?c(a):r>3?c(e,n,a):c(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function cL(t,e){return function(n,i){e(n,i,t)}}function lL(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function uL(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,e||[])).next())})}function dL(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(m){return d([f,m])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],r=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function fL(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}function hL(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function iv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function iR(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,a=[],c;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(l){c={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return a}function mL(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(iR(arguments[e]));return t}function pL(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var a=arguments[e],c=0,l=a.length;c<l;c++,r++)i[r]=a[c];return i}function Wl(t){return this instanceof Wl?(this.v=t,this):new Wl(t)}function gL(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(v){i[v]&&(r[v]=function(b){return new Promise(function(w,S){a.push([v,b,w,S])>1||l(v,b)})})}function l(v,b){try{d(i[v](b))}catch(w){p(a[0][3],w)}}function d(v){v.value instanceof Wl?Promise.resolve(v.value.v).then(f,m):p(a[0][2],v)}function f(v){l("next",v)}function m(v){l("throw",v)}function p(v,b){v(b),a.shift(),a.length&&l(a[0][0],a[0][1])}}function vL(t){var e,n;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,a){e[r]=t[r]?function(c){return(n=!n)?{value:Wl(t[r](c)),done:r==="return"}:a?a(c):c}:a}}function yL(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iv=="function"?iv(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}function bL(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function SL(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function TL(t){return t&&t.__esModule?t:{default:t}}function xL(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function wL(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const CL=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return nv},__asyncDelegator:vL,__asyncGenerator:gL,__asyncValues:yL,__await:Wl,__awaiter:uL,__classPrivateFieldGet:xL,__classPrivateFieldSet:wL,__createBinding:fL,__decorate:oL,__exportStar:hL,__extends:sL,__generator:dL,__importDefault:TL,__importStar:SL,__makeTemplateObject:bL,__metadata:lL,__param:cL,__read:iR,__rest:aL,__spread:mL,__spreadArrays:pL,__values:iv},Symbol.toStringTag,{value:"Module"})),rR=j0(CL);var vl={},ri={},O1;function sR(){return O1||(O1=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.MAX_HASHABLE_LENGTH=ri.INIT=ri.KEY=ri.DIGEST_LENGTH=ri.BLOCK_SIZE=void 0,ri.BLOCK_SIZE=64,ri.DIGEST_LENGTH=32,ri.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ri.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ri.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),ri}var yl={},I1;function EL(){if(I1)return yl;I1=1,Object.defineProperty(yl,"__esModule",{value:!0}),yl.RawSha256=void 0;var t=sR(),e=function(){function n(){this.state=Int32Array.from(t.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(i){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,a=i.byteLength;if(this.bytesHashed+=a,this.bytesHashed*8>t.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;a>0;)this.buffer[this.bufferLength++]=i[r++],a--,this.bufferLength===t.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var i=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),a=this.bufferLength;if(r.setUint8(this.bufferLength++,128),a%t.BLOCK_SIZE>=t.BLOCK_SIZE-8){for(var c=this.bufferLength;c<t.BLOCK_SIZE;c++)r.setUint8(c,0);this.hashBuffer(),this.bufferLength=0}for(var c=this.bufferLength;c<t.BLOCK_SIZE-8;c++)r.setUint8(c,0);r.setUint32(t.BLOCK_SIZE-8,Math.floor(i/4294967296),!0),r.setUint32(t.BLOCK_SIZE-4,i),this.hashBuffer(),this.finished=!0}for(var l=new Uint8Array(t.DIGEST_LENGTH),c=0;c<8;c++)l[c*4]=this.state[c]>>>24&255,l[c*4+1]=this.state[c]>>>16&255,l[c*4+2]=this.state[c]>>>8&255,l[c*4+3]=this.state[c]>>>0&255;return l},n.prototype.hashBuffer=function(){for(var i=this,r=i.buffer,a=i.state,c=a[0],l=a[1],d=a[2],f=a[3],m=a[4],p=a[5],v=a[6],b=a[7],w=0;w<t.BLOCK_SIZE;w++){if(w<16)this.temp[w]=(r[w*4]&255)<<24|(r[w*4+1]&255)<<16|(r[w*4+2]&255)<<8|r[w*4+3]&255;else{var S=this.temp[w-2],R=(S>>>17|S<<15)^(S>>>19|S<<13)^S>>>10;S=this.temp[w-15];var E=(S>>>7|S<<25)^(S>>>18|S<<14)^S>>>3;this.temp[w]=(R+this.temp[w-7]|0)+(E+this.temp[w-16]|0)}var N=(((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&p^~m&v)|0)+(b+(t.KEY[w]+this.temp[w]|0)|0)|0,M=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&l^c&d^l&d)|0;b=v,v=p,p=m,m=f+N|0,f=d,d=l,l=c,c=N+M|0}a[0]+=c,a[1]+=l,a[2]+=d,a[3]+=f,a[4]+=m,a[5]+=p,a[6]+=v,a[7]+=b},n}();return yl.RawSha256=e,yl}var jp={},bl={};const kL=t=>{const e=[];for(let n=0,i=t.length;n<i;n++){const r=t.charCodeAt(n);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192,r&63|128);else if(n+1<t.length&&(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320){const a=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023);e.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else e.push(r>>12|224,r>>6&63|128,r&63|128)}return Uint8Array.from(e)},RL=t=>{let e="";for(let n=0,i=t.length;n<i;n++){const r=t[n];if(r<128)e+=String.fromCharCode(r);else if(192<=r&&r<224){const a=t[++n];e+=String.fromCharCode((r&31)<<6|a&63)}else if(240<=r&&r<365){const c="%"+[r,t[++n],t[++n],t[++n]].map(l=>l.toString(16)).join("%");e+=decodeURIComponent(c)}else e+=String.fromCharCode((r&15)<<12|(t[++n]&63)<<6|t[++n]&63)}return e};function AL(t){return new TextEncoder().encode(t)}function _L(t){return new TextDecoder("utf-8").decode(t)}const PL=t=>typeof TextEncoder=="function"?AL(t):kL(t),DL=t=>typeof TextDecoder=="function"?_L(t):RL(t),NL=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:PL,toUtf8:DL},Symbol.toStringTag,{value:"Module"})),ML=j0(NL);var U1;function OL(){if(U1)return bl;U1=1,Object.defineProperty(bl,"__esModule",{value:!0}),bl.convertToBuffer=void 0;var t=ML,e=typeof Buffer<"u"&&Buffer.from?function(i){return Buffer.from(i,"utf8")}:t.fromUtf8;function n(i){return i instanceof Uint8Array?i:typeof i=="string"?e(i):ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(i)}return bl.convertToBuffer=n,bl}var Sl={},L1;function IL(){if(L1)return Sl;L1=1,Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.isEmptyData=void 0;function t(e){return typeof e=="string"?e.length===0:e.byteLength===0}return Sl.isEmptyData=t,Sl}var Tl={},j1;function UL(){if(j1)return Tl;j1=1,Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.numToUint8=void 0;function t(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}return Tl.numToUint8=t,Tl}var xl={},B1;function LL(){if(B1)return xl;B1=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.uint32ArrayFrom=void 0;function t(e){if(!Array.from){for(var n=new Uint32Array(e.length),i=0;i<e.length;)n[i]=e[i];return n}return Uint32Array.from(e)}return xl.uint32ArrayFrom=t,xl}var F1;function jL(){return F1||(F1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var e=OL();Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=IL();Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var i=UL();Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return i.numToUint8}});var r=LL();Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})}(jp)),jp}var V1;function BL(){if(V1)return vl;V1=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.Sha256=void 0;var t=rR,e=sR(),n=EL(),i=jL(),r=function(){function c(l){if(this.hash=new n.RawSha256,l){this.outer=new n.RawSha256;var d=a(l),f=new Uint8Array(e.BLOCK_SIZE);f.set(d);for(var m=0;m<e.BLOCK_SIZE;m++)d[m]^=54,f[m]^=92;this.hash.update(d),this.outer.update(f);for(var m=0;m<d.byteLength;m++)d[m]=0}}return c.prototype.update=function(l){if(!((0,i.isEmptyData)(l)||this.error))try{this.hash.update((0,i.convertToBuffer)(l))}catch(d){this.error=d}},c.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},c.prototype.digest=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(l){return[2,this.digestSync()]})})},c}();vl.Sha256=r;function a(c){var l=(0,i.convertToBuffer)(c);if(l.byteLength>e.BLOCK_SIZE){var d=new n.RawSha256;d.update(l),l=d.digest()}var f=new Uint8Array(e.BLOCK_SIZE);return f.set(l),f}return vl}var z1;function FL(){return z1||(z1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=rR;(0,e.__exportStar)(BL(),t)}(Lp)),Lp}var jl=FL();function Oe(t,e){t!=null&&this.fromString(t,e)}function Bn(){return new Oe(null)}var Ds,VL=0xdeadbeefcafe,H1=(VL&16777215)==15715070;function zL(t,e,n,i,r,a){for(;--a>=0;){var c=e*this[t++]+n[i]+r;r=Math.floor(c/67108864),n[i++]=c&67108863}return r}function HL(t,e,n,i,r,a){for(var c=e&32767,l=e>>15;--a>=0;){var d=this[t]&32767,f=this[t++]>>15,m=l*d+f*c;d=c*d+((m&32767)<<15)+n[i]+(r&1073741823),r=(d>>>30)+(m>>>15)+l*f+(r>>>30),n[i++]=d&1073741823}return r}function qL(t,e,n,i,r,a){for(var c=e&16383,l=e>>14;--a>=0;){var d=this[t]&16383,f=this[t++]>>14,m=l*d+f*c;d=c*d+((m&16383)<<14)+n[i]+r,r=(d>>28)+(m>>14)+l*f,n[i++]=d&268435455}return r}var q1=typeof navigator<"u";q1&&H1&&navigator.appName=="Microsoft Internet Explorer"?(Oe.prototype.am=HL,Ds=30):q1&&H1&&navigator.appName!="Netscape"?(Oe.prototype.am=zL,Ds=26):(Oe.prototype.am=qL,Ds=28);Oe.prototype.DB=Ds;Oe.prototype.DM=(1<<Ds)-1;Oe.prototype.DV=1<<Ds;var Y0=52;Oe.prototype.FV=Math.pow(2,Y0);Oe.prototype.F1=Y0-Ds;Oe.prototype.F2=2*Ds-Y0;var GL="0123456789abcdefghijklmnopqrstuvwxyz",Qf=new Array,cc,Ci;cc=48;for(Ci=0;Ci<=9;++Ci)Qf[cc++]=Ci;cc=97;for(Ci=10;Ci<36;++Ci)Qf[cc++]=Ci;cc=65;for(Ci=10;Ci<36;++Ci)Qf[cc++]=Ci;function G1(t){return GL.charAt(t)}function KL(t,e){var n=Qf[t.charCodeAt(e)];return n??-1}function YL(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function $L(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function $0(t){var e=Bn();return e.fromInt(t),e}function WL(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var i=t.length,r=!1,a=0;--i>=0;){var c=KL(t,i);if(c<0){t.charAt(i)=="-"&&(r=!0);continue}r=!1,a==0?this[this.t++]=c:a+n>this.DB?(this[this.t-1]|=(c&(1<<this.DB-a)-1)<<a,this[this.t++]=c>>this.DB-a):this[this.t-1]|=c<<a,a+=n,a>=this.DB&&(a-=this.DB)}this.clamp(),r&&Oe.ZERO.subTo(this,this)}function XL(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function ZL(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var n=(1<<e)-1,i,r=!1,a="",c=this.t,l=this.DB-c*this.DB%e;if(c-- >0)for(l<this.DB&&(i=this[c]>>l)>0&&(r=!0,a=G1(i));c>=0;)l<e?(i=(this[c]&(1<<l)-1)<<e-l,i|=this[--c]>>(l+=this.DB-e)):(i=this[c]>>(l-=e)&n,l<=0&&(l+=this.DB,--c)),i>0&&(r=!0),r&&(a+=G1(i));return r?a:"0"}function JL(){var t=Bn();return Oe.ZERO.subTo(this,t),t}function QL(){return this.s<0?this.negate():this}function e3(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this[n]-t[n])!=0)return e;return 0}function W0(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}function t3(){return this.t<=0?0:this.DB*(this.t-1)+W0(this[this.t-1]^this.s&this.DM)}function n3(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function i3(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function r3(t,e){var n=t%this.DB,i=this.DB-n,r=(1<<i)-1,a=Math.floor(t/this.DB),c=this.s<<n&this.DM,l;for(l=this.t-1;l>=0;--l)e[l+a+1]=this[l]>>i|c,c=(this[l]&r)<<n;for(l=a-1;l>=0;--l)e[l]=0;e[a]=c,e.t=this.t+a+1,e.s=this.s,e.clamp()}function s3(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var i=t%this.DB,r=this.DB-i,a=(1<<i)-1;e[0]=this[n]>>i;for(var c=n+1;c<this.t;++c)e[c-n-1]|=(this[c]&a)<<r,e[c-n]=this[c]>>i;i>0&&(e[this.t-n-1]|=(this.s&a)<<r),e.t=this.t-n,e.clamp()}function a3(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]-t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i-=t[n],e[n++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[n++]=this.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()}function o3(t,e){var n=this.abs(),i=t.abs(),r=n.t;for(e.t=r+i.t;--r>=0;)e[r]=0;for(r=0;r<i.t;++r)e[r+n.t]=n.am(0,i[r],e,r,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&Oe.ZERO.subTo(e,e)}function c3(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function l3(t,e,n){var i=t.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=Bn());var a=Bn(),c=this.s,l=t.s,d=this.DB-W0(i[i.t-1]);d>0?(i.lShiftTo(d,a),r.lShiftTo(d,n)):(i.copyTo(a),r.copyTo(n));var f=a.t,m=a[f-1];if(m!=0){var p=m*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),v=this.FV/p,b=(1<<this.F1)/p,w=1<<this.F2,S=n.t,R=S-f,E=e??Bn();for(a.dlShiftTo(R,E),n.compareTo(E)>=0&&(n[n.t++]=1,n.subTo(E,n)),Oe.ONE.dlShiftTo(f,E),E.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--R>=0;){var N=n[--S]==m?this.DM:Math.floor(n[S]*v+(n[S-1]+w)*b);if((n[S]+=a.am(0,N,n,R,0,f))<N)for(a.dlShiftTo(R,E),n.subTo(E,n);n[S]<--N;)n.subTo(E,n)}e!=null&&(n.drShiftTo(f,e),c!=l&&Oe.ZERO.subTo(e,e)),n.t=f,n.clamp(),d>0&&n.rShiftTo(d,n),c<0&&Oe.ZERO.subTo(n,n)}}}function u3(t){var e=Bn();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Oe.ZERO)>0&&t.subTo(e,e),e}function d3(){if(this.t<1)return 0;var t=this[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function f3(t){return this.compareTo(t)==0}function h3(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]+t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i+=t[n],e[n++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e[n++]=i:i<-1&&(e[n++]=this.DV+i),e.t=n,e.clamp()}function m3(t){var e=Bn();return this.addTo(t,e),e}function p3(t){var e=Bn();return this.subTo(t,e),e}function g3(t){var e=Bn();return this.multiplyTo(t,e),e}function v3(t){var e=Bn();return this.divRemTo(t,e,null),e}function lc(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function y3(t){var e=Bn();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Oe.ZERO)>0&&this.m.subTo(e,e),e}function b3(t){var e=Bn();return t.copyTo(e),this.reduce(e),e}function S3(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t[e]&32767,i=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,i,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function T3(t,e){t.squareTo(e),this.reduce(e)}function x3(t,e,n){t.multiplyTo(e,n),this.reduce(n)}lc.prototype.convert=y3;lc.prototype.revert=b3;lc.prototype.reduce=S3;lc.prototype.mulTo=x3;lc.prototype.sqrTo=T3;function w3(t,e,n){var i=t.bitLength(),r,a=$0(1),c=new lc(e);if(i<=0)return a;i<18?r=1:i<48?r=3:i<144?r=4:i<768?r=5:r=6;var l=new Array,d=3,f=r-1,m=(1<<r)-1;if(l[1]=c.convert(this),r>1){var p=Bn();for(c.sqrTo(l[1],p);d<=m;)l[d]=Bn(),c.mulTo(p,l[d-2],l[d]),d+=2}var v=t.t-1,b,w=!0,S=Bn(),R;for(i=W0(t[v])-1;v>=0;){for(i>=f?b=t[v]>>i-f&m:(b=(t[v]&(1<<i+1)-1)<<f-i,v>0&&(b|=t[v-1]>>this.DB+i-f)),d=r;(b&1)==0;)b>>=1,--d;if((i-=d)<0&&(i+=this.DB,--v),w)l[b].copyTo(a),w=!1;else{for(;d>1;)c.sqrTo(a,S),c.sqrTo(S,a),d-=2;d>0?c.sqrTo(a,S):(R=a,a=S,S=R),c.mulTo(S,l[b],a)}for(;v>=0&&(t[v]&1<<i)==0;)c.sqrTo(a,S),R=a,a=S,S=R,--i<0&&(i=this.DB-1,--v)}var E=c.revert(a);return n(null,E),E}Oe.prototype.copyTo=YL;Oe.prototype.fromInt=$L;Oe.prototype.fromString=WL;Oe.prototype.clamp=XL;Oe.prototype.dlShiftTo=n3;Oe.prototype.drShiftTo=i3;Oe.prototype.lShiftTo=r3;Oe.prototype.rShiftTo=s3;Oe.prototype.subTo=a3;Oe.prototype.multiplyTo=o3;Oe.prototype.squareTo=c3;Oe.prototype.divRemTo=l3;Oe.prototype.invDigit=d3;Oe.prototype.addTo=h3;Oe.prototype.toString=ZL;Oe.prototype.negate=JL;Oe.prototype.abs=QL;Oe.prototype.compareTo=e3;Oe.prototype.bitLength=t3;Oe.prototype.mod=u3;Oe.prototype.equals=f3;Oe.prototype.add=m3;Oe.prototype.subtract=p3;Oe.prototype.multiply=g3;Oe.prototype.divide=v3;Oe.prototype.modPow=w3;Oe.ZERO=$0(0);Oe.ONE=$0(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function Bp(t){return Mt.Buffer.from(new rL().random(t).toString(),"hex")}var C3=/^[89a-f]/i,E3="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",k3="userAttributes.",So=function(){function t(n){this.N=new Oe(E3,16),this.g=new Oe("2",16),this.k=new Oe(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=Mt.Buffer.from("Caldera Derived Key","utf8"),this.poolName=n}var e=t.prototype;return e.getSmallAValue=function(){return this.smallAValue},e.getLargeAValue=function(i){var r=this;this.largeAValue?i(null,this.largeAValue):this.calculateA(this.smallAValue,function(a,c){a&&i(a,null),r.largeAValue=c,i(null,r.largeAValue)})},e.generateRandomSmallA=function(){var i=Bp(128).toString("hex"),r=new Oe(i,16);return r},e.generateRandomString=function(){return Bp(40).toString("base64")},e.getRandomPassword=function(){return this.randomPassword},e.getSaltDevices=function(){return this.SaltToHashDevices},e.getVerifierDevices=function(){return this.verifierDevices},e.generateHashDevice=function(i,r,a){var c=this;this.randomPassword=this.generateRandomString();var l=""+i+r+":"+this.randomPassword,d=this.hash(l),f=Bp(16).toString("hex");this.SaltToHashDevices=this.padHex(new Oe(f,16)),this.g.modPow(new Oe(this.hexHash(this.SaltToHashDevices+d),16),this.N,function(m,p){m&&a(m,null),c.verifierDevices=c.padHex(p),a(null,null)})},e.calculateA=function(i,r){var a=this;this.g.modPow(i,this.N,function(c,l){c&&r(c,null),l.mod(a.N).equals(Oe.ZERO)&&r(new Error("Illegal paramater. A mod N cannot be 0."),null),r(null,l)})},e.calculateU=function(i,r){this.UHexHash=this.hexHash(this.padHex(i)+this.padHex(r));var a=new Oe(this.UHexHash,16);return a},e.hash=function(i){var r=new jl.Sha256;r.update(i);var a=r.digestSync(),c=Mt.Buffer.from(a).toString("hex");return new Array(64-c.length).join("0")+c},e.hexHash=function(i){return this.hash(Mt.Buffer.from(i,"hex"))},e.computehkdf=function(i,r){var a=Mt.Buffer.concat([this.infoBits,Mt.Buffer.from("","utf8")]),c=new jl.Sha256(r);c.update(i);var l=c.digestSync(),d=new jl.Sha256(l);d.update(a);var f=d.digestSync(),m=f,p=m.slice(0,16);return p},e.getPasswordAuthenticationKey=function(i,r,a,c,l){var d=this;if(a.mod(this.N).equals(Oe.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,a),this.UValue.equals(Oe.ZERO))throw new Error("U cannot be zero.");var f=""+this.poolName+i+":"+r,m=this.hash(f),p=new Oe(this.hexHash(this.padHex(c)+m),16);this.calculateS(p,a,function(v,b){v&&l(v,null);var w=d.computehkdf(Mt.Buffer.from(d.padHex(b),"hex"),Mt.Buffer.from(d.padHex(d.UValue),"hex"));l(null,w)})},e.calculateS=function(i,r,a){var c=this;this.g.modPow(i,this.N,function(l,d){l&&a(l,null);var f=r.subtract(c.k.multiply(d));f.modPow(c.smallAValue.add(c.UValue.multiply(i)),c.N,function(m,p){m&&a(m,null),a(null,p.mod(c.N))})})},e.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return k3},e.padHex=function(i){if(!(i instanceof Oe))throw new Error("Not a BigInteger");var r=i.compareTo(Oe.ZERO)<0,a=i.abs().toString(16);if(a=a.length%2!==0?"0"+a:a,a=C3.test(a)?"00"+a:a,r){var c=a.split("").map(function(d){var f=~parseInt(d,16)&15;return"0123456789ABCDEF".charAt(f)}).join(""),l=new Oe(c,16).add(Oe.ONE);a=l.toString(16),a.toUpperCase().startsWith("FF8")&&(a=a.substring(2))}return a},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var aR=function(){function t(n){this.jwtToken=n||"",this.payload=this.decodePayload()}var e=t.prototype;return e.getJwtToken=function(){return this.jwtToken},e.getExpiration=function(){return this.payload.exp},e.getIssuedAt=function(){return this.payload.iat},e.decodePayload=function(){var i=this.jwtToken.split(".")[1];try{return JSON.parse(Mt.Buffer.from(i,"base64").toString("utf8"))}catch{return{}}},t}();function R3(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,rv(t,e)}function rv(t,e){return rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rv(t,e)}var sv=function(t){function e(n){var i=n===void 0?{}:n,r=i.AccessToken;return t.call(this,r||"")||this}return R3(e,t),e}(aR);function A3(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,av(t,e)}function av(t,e){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},av(t,e)}var ov=function(t){function e(n){var i=n===void 0?{}:n,r=i.IdToken;return t.call(this,r||"")||this}return A3(e,t),e}(aR);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var cv=function(){function t(n){var i=n===void 0?{}:n,r=i.RefreshToken;this.token=r||""}var e=t.prototype;return e.getToken=function(){return this.token},t}(),_3="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var P3="aws-amplify/"+_3,oR={userAgent:P3,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},D3=function(){return oR.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var lv=function(){function t(n){var i=n===void 0?{}:n,r=i.IdToken,a=i.RefreshToken,c=i.AccessToken,l=i.ClockDrift;if(c==null||r==null)throw new Error("Id token and Access Token must be present.");this.idToken=r,this.refreshToken=a,this.accessToken=c,this.clockDrift=l===void 0?this.calculateClockDrift():l}var e=t.prototype;return e.getIdToken=function(){return this.idToken},e.getRefreshToken=function(){return this.refreshToken},e.getAccessToken=function(){return this.accessToken},e.getClockDrift=function(){return this.clockDrift},e.calculateClockDrift=function(){var i=Math.floor(new Date/1e3),r=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return i-r},e.isValid=function(){var i=Math.floor(new Date/1e3),r=i-this.clockDrift;return r<this.accessToken.getExpiration()&&r<this.idToken.getExpiration()},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var N3=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],M3=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],K1=function(){function t(){}var e=t.prototype;return e.getNowString=function(){var i=new Date,r=M3[i.getUTCDay()],a=N3[i.getUTCMonth()],c=i.getUTCDate(),l=i.getUTCHours();l<10&&(l="0"+l);var d=i.getUTCMinutes();d<10&&(d="0"+d);var f=i.getUTCSeconds();f<10&&(f="0"+f);var m=i.getUTCFullYear(),p=r+" "+a+" "+c+" "+l+":"+d+":"+f+" UTC "+m;return p},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var O3=function(){function t(n){var i=n===void 0?{}:n,r=i.Name,a=i.Value;this.Name=r||"",this.Value=a||""}var e=t.prototype;return e.getValue=function(){return this.Value},e.setValue=function(i){return this.Value=i,this},e.getName=function(){return this.Name},e.setName=function(i){return this.Name=i,this},e.toString=function(){return JSON.stringify(this)},e.toJSON=function(){return{Name:this.Name,Value:this.Value}},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var da={},I3=function(){function t(){}return t.setItem=function(n,i){return da[n]=i,da[n]},t.getItem=function(n){return Object.prototype.hasOwnProperty.call(da,n)?da[n]:void 0},t.removeItem=function(n){return delete da[n]},t.clear=function(){return da={},da},t}(),cR=function(){function t(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=I3}}var e=t.prototype;return e.getStorage=function(){return this.storageWindow},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var U3=typeof navigator<"u",Y1=U3?oR.isReactNative?"react-native":navigator.userAgent:"nodejs",uv=function(){function t(n){if(n==null||n.Username==null||n.Pool==null)throw new Error("Username and Pool information are required.");this.username=n.Username||"",this.pool=n.Pool,this.Session=null,this.client=n.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=n.Storage||new cR().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var e=t.prototype;return e.setSignInUserSession=function(i){this.clearCachedUserData(),this.signInUserSession=i,this.cacheTokens()},e.getSignInUserSession=function(){return this.signInUserSession},e.getUsername=function(){return this.username},e.getAuthenticationFlowType=function(){return this.authenticationFlowType},e.setAuthenticationFlowType=function(i){this.authenticationFlowType=i},e.initiateAuth=function(i,r){var a=this,c=i.getAuthParameters();c.USERNAME=this.username;var l=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),d={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:c,ClientMetadata:l};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",d,function(f,m){if(f)return r.onFailure(f);var p=m.ChallengeName,v=m.ChallengeParameters;return p==="CUSTOM_CHALLENGE"?(a.Session=m.Session,r.customChallenge(v)):(a.signInUserSession=a.getCognitoUserSession(m.AuthenticationResult),a.cacheTokens(),r.onSuccess(a.signInUserSession))})},e.authenticateUser=function(i,r){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(i,r):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(i,r):r.onFailure(new Error("Authentication flow type is invalid."))},e.authenticateUserDefaultAuth=function(i,r){var a=this,c=new So(this.pool.getUserPoolName()),l=new K1,d,f,m={};this.deviceKey!=null&&(m.DEVICE_KEY=this.deviceKey),m.USERNAME=this.username,c.getLargeAValue(function(p,v){p&&r.onFailure(p),m.SRP_A=v.toString(16),a.authenticationFlowType==="CUSTOM_AUTH"&&(m.CHALLENGE_NAME="SRP_A");var b=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),w={AuthFlow:a.authenticationFlowType,ClientId:a.pool.getClientId(),AuthParameters:m,ClientMetadata:b};a.getUserContextData(a.username)&&(w.UserContextData=a.getUserContextData(a.username)),a.client.request("InitiateAuth",w,function(S,R){if(S)return r.onFailure(S);var E=R.ChallengeParameters;a.username=E.USER_ID_FOR_SRP,a.userDataKey=a.keyPrefix+"."+a.username+".userData",d=new Oe(E.SRP_B,16),f=new Oe(E.SALT,16),a.getCachedDeviceKeyAndPassword(),c.getPasswordAuthenticationKey(a.username,i.getPassword(),d,f,function(N,M){N&&r.onFailure(N);var I=l.getNowString(),A=Mt.Buffer.concat([Mt.Buffer.from(a.pool.getUserPoolName(),"utf8"),Mt.Buffer.from(a.username,"utf8"),Mt.Buffer.from(E.SECRET_BLOCK,"base64"),Mt.Buffer.from(I,"utf8")]),L=new jl.Sha256(M);L.update(A);var z=L.digestSync(),H=Mt.Buffer.from(z).toString("base64"),W={};W.USERNAME=a.username,W.PASSWORD_CLAIM_SECRET_BLOCK=E.SECRET_BLOCK,W.TIMESTAMP=I,W.PASSWORD_CLAIM_SIGNATURE=H,a.deviceKey!=null&&(W.DEVICE_KEY=a.deviceKey);var re=function(Ee,Ae){return a.client.request("RespondToAuthChallenge",Ee,function(Pe,K){return Pe&&Pe.code==="ResourceNotFoundException"&&Pe.message.toLowerCase().indexOf("device")!==-1?(W.DEVICE_KEY=null,a.deviceKey=null,a.randomPassword=null,a.deviceGroupKey=null,a.clearCachedDeviceKeyAndPassword(),re(Ee,Ae)):Ae(Pe,K)})},se={ChallengeName:"PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:W,Session:R.Session,ClientMetadata:b};a.getUserContextData()&&(se.UserContextData=a.getUserContextData()),re(se,function(fe,Ee){return fe?r.onFailure(fe):a.authenticateUserInternal(Ee,c,r)})})})})},e.authenticateUserPlainUsernamePassword=function(i,r){var a=this,c={};if(c.USERNAME=this.username,c.PASSWORD=i.getPassword(),!c.PASSWORD){r.onFailure(new Error("PASSWORD parameter is required"));return}var l=new So(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(c.DEVICE_KEY=this.deviceKey);var d=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),f={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:c,ClientMetadata:d};this.getUserContextData(this.username)&&(f.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",f,function(m,p){return m?r.onFailure(m):a.authenticateUserInternal(p,l,r)})},e.authenticateUserInternal=function(i,r,a){var c=this,l=i.ChallengeName,d=i.ChallengeParameters;if(l==="SMS_MFA")return this.Session=i.Session,a.mfaRequired(l,d);if(l==="SELECT_MFA_TYPE")return this.Session=i.Session,a.selectMFAType(l,d);if(l==="MFA_SETUP")return this.Session=i.Session,a.mfaSetup(l,d);if(l==="SOFTWARE_TOKEN_MFA")return this.Session=i.Session,a.totpRequired(l,d);if(l==="CUSTOM_CHALLENGE")return this.Session=i.Session,a.customChallenge(d);if(l==="NEW_PASSWORD_REQUIRED"){this.Session=i.Session;var f=null,m=null,p=[],v=r.getNewPasswordRequiredChallengeUserAttributePrefix();if(d&&(f=JSON.parse(i.ChallengeParameters.userAttributes),m=JSON.parse(i.ChallengeParameters.requiredAttributes)),m)for(var b=0;b<m.length;b++)p[b]=m[b].substr(v.length);return a.newPasswordRequired(f,p)}if(l==="DEVICE_SRP_AUTH"){this.Session=i.Session,this.getDeviceResponse(a);return}this.signInUserSession=this.getCognitoUserSession(i.AuthenticationResult),this.challengeName=l,this.cacheTokens();var w=i.AuthenticationResult.NewDeviceMetadata;if(w==null)return a.onSuccess(this.signInUserSession);r.generateHashDevice(i.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(S){if(S)return a.onFailure(S);var R={Salt:Mt.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Mt.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};c.verifierDevices=R.PasswordVerifier,c.deviceGroupKey=w.DeviceGroupKey,c.randomPassword=r.getRandomPassword(),c.client.request("ConfirmDevice",{DeviceKey:w.DeviceKey,AccessToken:c.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:R,DeviceName:Y1},function(E,N){return E?a.onFailure(E):(c.deviceKey=i.AuthenticationResult.NewDeviceMetadata.DeviceKey,c.cacheDeviceKeyAndPassword(),N.UserConfirmationNecessary===!0?a.onSuccess(c.signInUserSession,N.UserConfirmationNecessary):a.onSuccess(c.signInUserSession))})})},e.completeNewPasswordChallenge=function(i,r,a,c){var l=this;if(!i)return a.onFailure(new Error("New password is required."));var d=new So(this.pool.getUserPoolName()),f=d.getNewPasswordRequiredChallengeUserAttributePrefix(),m={};r&&Object.keys(r).forEach(function(v){m[f+v]=r[v]}),m.NEW_PASSWORD=i,m.USERNAME=this.username;var p={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:m,Session:this.Session,ClientMetadata:c};this.getUserContextData()&&(p.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",p,function(v,b){return v?a.onFailure(v):l.authenticateUserInternal(b,d,a)})},e.getDeviceResponse=function(i,r){var a=this,c=new So(this.deviceGroupKey),l=new K1,d={};d.USERNAME=this.username,d.DEVICE_KEY=this.deviceKey,c.getLargeAValue(function(f,m){f&&i.onFailure(f),d.SRP_A=m.toString(16);var p={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a.pool.getClientId(),ChallengeResponses:d,ClientMetadata:r,Session:a.Session};a.getUserContextData()&&(p.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",p,function(v,b){if(v)return i.onFailure(v);var w=b.ChallengeParameters,S=new Oe(w.SRP_B,16),R=new Oe(w.SALT,16);c.getPasswordAuthenticationKey(a.deviceKey,a.randomPassword,S,R,function(E,N){if(E)return i.onFailure(E);var M=l.getNowString(),I=Mt.Buffer.concat([Mt.Buffer.from(a.deviceGroupKey,"utf8"),Mt.Buffer.from(a.deviceKey,"utf8"),Mt.Buffer.from(w.SECRET_BLOCK,"base64"),Mt.Buffer.from(M,"utf8")]),A=new jl.Sha256(N);A.update(I);var L=A.digestSync(),z=Mt.Buffer.from(L).toString("base64"),H={};H.USERNAME=a.username,H.PASSWORD_CLAIM_SECRET_BLOCK=w.SECRET_BLOCK,H.TIMESTAMP=M,H.PASSWORD_CLAIM_SIGNATURE=z,H.DEVICE_KEY=a.deviceKey;var W={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:H,Session:b.Session};a.getUserContextData()&&(W.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",W,function(re,se){return re?i.onFailure(re):(a.signInUserSession=a.getCognitoUserSession(se.AuthenticationResult),a.cacheTokens(),i.onSuccess(a.signInUserSession))})})})})},e.confirmRegistration=function(i,r,a,c){var l={ClientId:this.pool.getClientId(),ConfirmationCode:i,Username:this.username,ForceAliasCreation:r,ClientMetadata:c};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",l,function(d){return d?a(d,null):a(null,"SUCCESS")})},e.sendCustomChallengeAnswer=function(i,r,a){var c=this,l={};l.USERNAME=this.username,l.ANSWER=i;var d=new So(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(l.DEVICE_KEY=this.deviceKey);var f={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:l,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(m,p){return m?r.onFailure(m):c.authenticateUserInternal(p,d,r)})},e.sendMFACode=function(i,r,a,c){var l=this,d={};d.USERNAME=this.username,d.SMS_MFA_CODE=i;var f=a||"SMS_MFA";f==="SOFTWARE_TOKEN_MFA"&&(d.SOFTWARE_TOKEN_MFA_CODE=i),this.deviceKey!=null&&(d.DEVICE_KEY=this.deviceKey);var m={ChallengeName:f,ChallengeResponses:d,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:c};this.getUserContextData()&&(m.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",m,function(p,v){if(p)return r.onFailure(p);var b=v.ChallengeName;if(b==="DEVICE_SRP_AUTH"){l.getDeviceResponse(r);return}if(l.signInUserSession=l.getCognitoUserSession(v.AuthenticationResult),l.cacheTokens(),v.AuthenticationResult.NewDeviceMetadata==null)return r.onSuccess(l.signInUserSession);var w=new So(l.pool.getUserPoolName());w.generateHashDevice(v.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,v.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(S){if(S)return r.onFailure(S);var R={Salt:Mt.Buffer.from(w.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:Mt.Buffer.from(w.getVerifierDevices(),"hex").toString("base64")};l.verifierDevices=R.PasswordVerifier,l.deviceGroupKey=v.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,l.randomPassword=w.getRandomPassword(),l.client.request("ConfirmDevice",{DeviceKey:v.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:l.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:R,DeviceName:Y1},function(E,N){return E?r.onFailure(E):(l.deviceKey=v.AuthenticationResult.NewDeviceMetadata.DeviceKey,l.cacheDeviceKeyAndPassword(),N.UserConfirmationNecessary===!0?r.onSuccess(l.signInUserSession,N.UserConfirmationNecessary):r.onSuccess(l.signInUserSession))})})})},e.changePassword=function(i,r,a,c){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return a(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:i,ProposedPassword:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:c},function(l){return l?a(l,null):a(null,"SUCCESS")})},e.enableMFA=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);var r=[],a={DeliveryMedium:"SMS",AttributeName:"phone_number"};r.push(a),this.client.request("SetUserSettings",{MFAOptions:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?i(c,null):i(null,"SUCCESS")})},e.setUserMfaPreference=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:i,SoftwareTokenMfaSettings:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?a(c,null):a(null,"SUCCESS")})},e.disableMFA=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);var r=[];this.client.request("SetUserSettings",{MFAOptions:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i(a,null):i(null,"SUCCESS")})},e.deleteUser=function(i,r){var a=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(c){return c?i(c,null):(a.clearCachedUser(),i(null,"SUCCESS"))})},e.updateAttributes=function(i,r,a){var c=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:i,ClientMetadata:a},function(l,d){return l?r(l,null):c.getUserData(function(){return r(null,"SUCCESS",d)},{bypassCache:!0})})},e.getUserAttributes=function(i){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,a){if(r)return i(r,null);for(var c=[],l=0;l<a.UserAttributes.length;l++){var d={Name:a.UserAttributes[l].Name,Value:a.UserAttributes[l].Value},f=new O3(d);c.push(f)}return i(null,c)})},e.getMFAOptions=function(i){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,a){return r?i(r,null):i(null,a.MFAOptions)})},e.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},e.refreshSessionIfPossible=function(i){var r=this;return i===void 0&&(i={}),new Promise(function(a){var c=r.signInUserSession.getRefreshToken();c&&c.getToken()?r.refreshSession(c,a,i.clientMetadata):a()})},e.getUserData=function(i,r){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),i(new Error("User is not authenticated"),null);var c=this.getUserDataFromCache();if(!c){this.fetchUserData().then(function(l){i(null,l)}).catch(i);return}if(this.isFetchUserDataAndTokenRequired(r)){this.fetchUserData().then(function(l){return a.refreshSessionIfPossible(r).then(function(){return l})}).then(function(l){return i(null,l)}).catch(i);return}try{i(null,JSON.parse(c));return}catch(l){this.clearCachedUserData(),i(l,null);return}},e.getUserDataFromCache=function(){var i=this.storage.getItem(this.userDataKey);return i},e.isFetchUserDataAndTokenRequired=function(i){var r=i||{},a=r.bypassCache,c=a===void 0?!1:a;return c},e.fetchUserData=function(){var i=this;return this.createGetUserRequest().then(function(r){return i.cacheUserData(r),r})},e.deleteAttributes=function(i,r){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?r(c,null):a.getUserData(function(){return r(null,"SUCCESS")},{bypassCache:!0})})},e.resendConfirmationCode=function(i,r){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:r};this.client.request("ResendConfirmationCode",a,function(c,l){return c?i(c,null):i(null,l)})},e.getSession=function(i,r){if(r===void 0&&(r={}),this.username==null)return i(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return i(null,this.signInUserSession);var a="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,c=a+".idToken",l=a+".accessToken",d=a+".refreshToken",f=a+".clockDrift";if(this.storage.getItem(c)){var m=new ov({IdToken:this.storage.getItem(c)}),p=new sv({AccessToken:this.storage.getItem(l)}),v=new cv({RefreshToken:this.storage.getItem(d)}),b=parseInt(this.storage.getItem(f),0)||0,w={IdToken:m,AccessToken:p,RefreshToken:v,ClockDrift:b},S=new lv(w);if(S.isValid())return this.signInUserSession=S,i(null,this.signInUserSession);if(!v.getToken())return i(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(v,i,r.clientMetadata)}else i(new Error("Local storage is missing an ID Token, Please authenticate"),null)},e.refreshSession=function(i,r,a){var c=this,l=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(r):r,d={};d.REFRESH_TOKEN=i.getToken();var f="CognitoIdentityServiceProvider."+this.pool.getClientId(),m=f+".LastAuthUser";if(this.storage.getItem(m)){this.username=this.storage.getItem(m);var p=f+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(p),d.DEVICE_KEY=this.deviceKey}var v={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:d,ClientMetadata:a};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.requestWithRetry("InitiateAuth",v,function(b,w){if(b)return b.code==="NotAuthorizedException"&&c.clearCachedUser(),l(b,null);if(w){var S=w.AuthenticationResult;return Object.prototype.hasOwnProperty.call(S,"RefreshToken")||(S.RefreshToken=i.getToken()),c.signInUserSession=c.getCognitoUserSession(S),c.cacheTokens(),l(null,c.signInUserSession)}})},e.cacheTokens=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId(),r=i+"."+this.username+".idToken",a=i+"."+this.username+".accessToken",c=i+"."+this.username+".refreshToken",l=i+"."+this.username+".clockDrift",d=i+".LastAuthUser";this.storage.setItem(r,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(c,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(l,""+this.signInUserSession.getClockDrift()),this.storage.setItem(d,this.username)},e.cacheUserData=function(i){this.storage.setItem(this.userDataKey,JSON.stringify(i))},e.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},e.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},e.cacheDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.setItem(r,this.deviceKey),this.storage.setItem(a,this.randomPassword),this.storage.setItem(c,this.deviceGroupKey)},e.getCachedDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.getItem(r)&&(this.deviceKey=this.storage.getItem(r),this.randomPassword=this.storage.getItem(a),this.deviceGroupKey=this.storage.getItem(c))},e.clearCachedDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.removeItem(r),this.storage.removeItem(a),this.storage.removeItem(c)},e.clearCachedTokens=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId(),r=i+"."+this.username+".idToken",a=i+"."+this.username+".accessToken",c=i+"."+this.username+".refreshToken",l=i+".LastAuthUser",d=i+"."+this.username+".clockDrift";this.storage.removeItem(r),this.storage.removeItem(a),this.storage.removeItem(c),this.storage.removeItem(l),this.storage.removeItem(d)},e.getCognitoUserSession=function(i){var r=new ov(i),a=new sv(i),c=new cv(i),l={IdToken:r,AccessToken:a,RefreshToken:c};return new lv(l)},e.forgotPassword=function(i,r){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",a,function(c,l){return c?i.onFailure(c):typeof i.inputVerificationCode=="function"?i.inputVerificationCode(l):i.onSuccess(l)})},e.confirmPassword=function(i,r,a,c){var l={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:i,Password:r,ClientMetadata:c};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",l,function(d){return d?a.onFailure(d):a.onSuccess("SUCCESS")})},e.getAttributeVerificationCode=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(c,l){return c?r.onFailure(c):typeof r.inputVerificationCode=="function"?r.inputVerificationCode(l):r.onSuccess("SUCCESS")})},e.verifyAttribute=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:i,Code:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?a.onFailure(c):a.onSuccess("SUCCESS")})},e.getDevice=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(r,a){return r?i.onFailure(r):i.onSuccess(a)})},e.forgetSpecificDevice=function(i,r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:i},function(a){return a?r.onFailure(a):r.onSuccess("SUCCESS")})},e.forgetDevice=function(i){var r=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:i.onFailure,onSuccess:function(c){return r.deviceKey=null,r.deviceGroupKey=null,r.randomPassword=null,r.clearCachedDeviceKeyAndPassword(),i.onSuccess(c)}})},e.setDeviceStatusRemembered=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(r){return r?i.onFailure(r):i.onSuccess("SUCCESS")})},e.setDeviceStatusNotRemembered=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(r){return r?i.onFailure(r):i.onSuccess("SUCCESS")})},e.listDevices=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));var c={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:i};r&&(c.PaginationToken=r),this.client.request("ListDevices",c,function(l,d){return l?a.onFailure(l):a.onSuccess(d)})},e.globalSignOut=function(i){var r=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i.onFailure(a):(r.clearCachedUser(),i.onSuccess("SUCCESS"))})},e.signOut=function(i){var r=this;if(!i||typeof i!="function"){this.cleanClientData();return}this.getSession(function(a,c){if(a)return i(a);r.revokeTokens(function(l){r.cleanClientData(),i(l)})})},e.revokeTokens=function(i){if(i===void 0&&(i=function(){}),typeof i!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var r=new Error("User is not authenticated");return i(r)}if(!this.signInUserSession.getAccessToken()){var a=new Error("No Access token available");return i(a)}var c=this.signInUserSession.getRefreshToken().getToken(),l=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(l)&&c)return this.revokeToken({token:c,callback:i});i()},e.isSessionRevocable=function(i){if(i&&typeof i.decodePayload=="function")try{var r=i.decodePayload(),a=r.origin_jti;return!!a}catch{}return!1},e.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},e.revokeToken=function(i){var r=i.token,a=i.callback;this.client.requestWithRetry("RevokeToken",{Token:r,ClientId:this.pool.getClientId()},function(c){if(c)return a(c);a()})},e.sendMFASelectionAnswer=function(i,r){var a=this,c={};c.USERNAME=this.username,c.ANSWER=i;var l={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:c,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",l,function(d,f){if(d)return r.onFailure(d);if(a.Session=f.Session,i==="SMS_MFA")return r.mfaRequired(f.ChallengeName,f.ChallengeParameters);if(i==="SOFTWARE_TOKEN_MFA")return r.totpRequired(f.ChallengeName,f.ChallengeParameters)})},e.getUserContextData=function(){var i=this.pool;return i.getUserContextData(this.username)},e.associateSoftwareToken=function(i){var r=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a,c){return a?i.onFailure(a):i.associateSecretCode(c.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(a,c){return a?i.onFailure(a):(r.Session=c.Session,i.associateSecretCode(c.SecretCode))})},e.verifySoftwareToken=function(i,r,a){var c=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:i,FriendlyDeviceName:r},function(l,d){return l?a.onFailure(l):a.onSuccess(d)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:i,FriendlyDeviceName:r},function(l,d){if(l)return a.onFailure(l);c.Session=d.Session;var f={};f.USERNAME=c.username;var m={ChallengeName:"MFA_SETUP",ClientId:c.pool.getClientId(),ChallengeResponses:f,Session:c.Session};c.getUserContextData()&&(m.UserContextData=c.getUserContextData()),c.client.request("RespondToAuthChallenge",m,function(p,v){return p?a.onFailure(p):(c.signInUserSession=c.getCognitoUserSession(v.AuthenticationResult),c.cacheTokens(),a.onSuccess(c.signInUserSession))})})},t}();function L3(t,e){return e=e||{},new Promise(function(n,i){var r=new XMLHttpRequest,a=[],c=[],l={},d=function(){return{ok:(r.status/100|0)==2,statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:d,headers:{keys:function(){return a},entries:function(){return c},get:function(m){return l[m.toLowerCase()]},has:function(m){return m.toLowerCase()in l}}}};for(var f in r.open(e.method||"get",t,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(m,p,v){a.push(p=p.toLowerCase()),c.push([p,v]),l[p]=l[p]?l[p]+","+v:v}),n(d())},r.onerror=i,r.withCredentials=e.credentials=="include",e.headers)r.setRequestHeader(f,e.headers[f]);r.send(e.body||null)})}const j3=Object.freeze(Object.defineProperty({__proto__:null,default:L3},Symbol.toStringTag,{value:"Module"})),$1=j0(j3);var Fp,W1;function B3(){return W1||(W1=1,Fp=self.fetch||(self.fetch=$1.default||$1)),Fp}B3();function Do(){}Do.prototype.userAgent=D3();var F3=function(e){var n=Do.category?" "+Do.category:"",i=Do.framework?" framework/"+Do.framework:"",r=""+Do.prototype.userAgent+n+i;return r};function V3(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Xl(t,e)}function dv(t){var e=typeof Map=="function"?new Map:void 0;return dv=function(i){if(i===null||!H3(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return z3(i,arguments,fv(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Xl(r,i)},dv(t)}function z3(t,e,n){if(lR())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&Xl(r,n.prototype),r}function lR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lR=function(){return!!t})()}function H3(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function Xl(t,e){return Xl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Xl(t,e)}function fv(t){return fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fv(t)}var q3=function(t){function e(n,i,r,a){var c;return c=t.call(this,n)||this,c.code=i,c.name=r,c.statusCode=a,c}return V3(e,t),e}(dv(Error)),G3=function(){function t(n,i,r){this.endpoint=i||"https://cognito-idp."+n+".amazonaws.com/";var a=r||{},c=a.credentials;this.fetchOptions=c?{credentials:c}:{}}var e=t.prototype;return e.promisifyRequest=function(i,r){var a=this;return new Promise(function(c,l){a.request(i,r,function(d,f){d?l(new q3(d.message,d.code,d.name,d.statusCode)):c(f)})})},e.requestWithRetry=function(i,r,a){var c=this,l=5*1e3;$3(function(d){return new Promise(function(f,m){c.request(i,d,function(p,v){p?m(p):f(v)})})},[r],l).then(function(d){return a(null,d)}).catch(function(d){return a(d)})},e.request=function(i,r,a){var c={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+i,"X-Amz-User-Agent":F3(),"Cache-Control":"no-store"},l=Object.assign({},this.fetchOptions,{headers:c,method:"POST",mode:"cors",body:JSON.stringify(r)}),d;fetch(this.endpoint,l).then(function(f){return d=f,f},function(f){throw f instanceof TypeError?new Error("Network error"):f}).then(function(f){return f.json().catch(function(){return{}})}).then(function(f){if(d.ok)return a(null,f);var m=(f.__type||f.code).split("#").pop(),p=new Error(f.message||f.Message||null);return p.name=m,p.code=m,a(p)}).catch(function(f){if(d&&d.headers&&d.headers.get("x-amzn-errortype"))try{var m=d.headers.get("x-amzn-errortype").split(":")[0],p=new Error(d.status?d.status.toString():null);return p.code=m,p.name=m,p.statusCode=d.status,a(p)}catch{return a(f)}else f instanceof Error&&f.message==="Network error"&&(f.code="NetworkError");return a(f)})},t}(),Ud={debug:function(){}},K3=function(e){var n="nonRetryable";return e&&e[n]};function uR(t,e,n,i){if(i===void 0&&(i=1),typeof t!="function")throw Error("functionToRetry must be a function");return Ud.debug(t.name+" attempt #"+i+" with args: "+JSON.stringify(e)),t.apply(void 0,e).catch(function(r){if(Ud.debug("error on "+t.name,r),K3(r))throw Ud.debug(t.name+" non retryable error",r),r;var a=n(i,e,r);if(Ud.debug(t.name+" retrying in "+a+" ms"),a!==!1)return new Promise(function(c){return setTimeout(c,a)}).then(function(){return uR(t,e,n,i+1)});throw r})}function Y3(t){var e=100,n=100;return function(i){var r=Math.pow(2,i)*e+n*Math.random();return r>t?!1:r}}function $3(t,e,n){return uR(t,e,Y3(n))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var W3=55,X3=function(){function t(n,i){var r=n||{},a=r.UserPoolId,c=r.ClientId,l=r.endpoint,d=r.fetchOptions,f=r.AdvancedSecurityDataCollectionFlag;if(!a||!c)throw new Error("Both UserPoolId and ClientId are required.");if(a.length>W3||!/^[\w-]+_[0-9a-zA-Z]+$/.test(a))throw new Error("Invalid UserPoolId format.");var m=a.split("_")[0];this.userPoolId=a,this.clientId=c,this.client=new G3(m,l,d),this.advancedSecurityDataCollectionFlag=f!==!1,this.storage=n.Storage||new cR().getStorage(),i&&(this.wrapRefreshSessionCallback=i)}var e=t.prototype;return e.getUserPoolId=function(){return this.userPoolId},e.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},e.getClientId=function(){return this.clientId},e.signUp=function(i,r,a,c,l,d){var f=this,m={ClientId:this.clientId,Username:i,Password:r,UserAttributes:a,ValidationData:c,ClientMetadata:d};this.getUserContextData(i)&&(m.UserContextData=this.getUserContextData(i)),this.client.request("SignUp",m,function(p,v){if(p)return l(p,null);var b={Username:i,Pool:f,Storage:f.storage},w={user:new uv(b),userConfirmed:v.UserConfirmed,userSub:v.UserSub,codeDeliveryDetails:v.CodeDeliveryDetails};return l(null,w)})},e.getCurrentUser=function(){var i="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",r=this.storage.getItem(i);if(r){var a={Username:r,Pool:this,Storage:this.storage};return new uv(a)}return null},e.getUserContextData=function(i){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var r=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var a=r.getData(i,this.userPoolId,this.clientId);if(a){var c={EncodedData:a};return c}}return{}}},t}(),Vp={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */var X1;function Z3(){return X1||(X1=1,function(t,e){(function(n){var i;if(t.exports=n(),i=!0,!i){var r=window.Cookies,a=window.Cookies=n();a.noConflict=function(){return window.Cookies=r,a}}})(function(){function n(){for(var a=0,c={};a<arguments.length;a++){var l=arguments[a];for(var d in l)c[d]=l[d]}return c}function i(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(a){function c(){}function l(f,m,p){if(!(typeof document>"u")){p=n({path:"/"},c.defaults,p),typeof p.expires=="number"&&(p.expires=new Date(new Date*1+p.expires*864e5)),p.expires=p.expires?p.expires.toUTCString():"";try{var v=JSON.stringify(m);/^[\{\[]/.test(v)&&(m=v)}catch{}m=a.write?a.write(m,f):encodeURIComponent(String(m)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),f=encodeURIComponent(String(f)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var b="";for(var w in p)p[w]&&(b+="; "+w,p[w]!==!0&&(b+="="+p[w].split(";")[0]));return document.cookie=f+"="+m+b}}function d(f,m){if(!(typeof document>"u")){for(var p={},v=document.cookie?document.cookie.split("; "):[],b=0;b<v.length;b++){var w=v[b].split("="),S=w.slice(1).join("=");!m&&S.charAt(0)==='"'&&(S=S.slice(1,-1));try{var R=i(w[0]);if(S=(a.read||a)(S,R)||i(S),m)try{S=JSON.parse(S)}catch{}if(p[R]=S,f===R)break}catch{}}return f?p[f]:p}}return c.set=l,c.get=function(f){return d(f,!1)},c.getJSON=function(f){return d(f,!0)},c.remove=function(f,m){l(f,"",n(m,{expires:-1}))},c.defaults={},c.withConverter=r,c}return r(function(){})})}(Vp)),Vp.exports}Z3();const Bl="8.55.0",cr=globalThis;function X0(t,e,n){const i=n||cr,r=i.__SENTRY__=i.__SENTRY__||{},a=r[Bl]=r[Bl]||{};return a[t]||(a[t]=e())}const Z0=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,J3="Sentry Logger ",Z1=["debug","info","warn","error","log","assert","trace"],J1={};function J0(t){if(!("console"in cr))return t();const e=cr.console,n={},i=Object.keys(J1);i.forEach(r=>{const a=J1[r];n[r]=e[r],e[r]=a});try{return t()}finally{i.forEach(r=>{e[r]=n[r]})}}function Q3(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return Z0?Z1.forEach(n=>{e[n]=(...i)=>{t&&J0(()=>{cr.console[n](`${J3}[${n}]:`,...i)})}}):Z1.forEach(n=>{e[n]=()=>{}}),e}const Ei=X0("logger",Q3);function eh(){return Q0(cr),cr}function Q0(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||Bl,e[Bl]=e[Bl]||{}}const dR=Object.prototype.toString;function e6(t){switch(dR.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return r6(t,Error)}}function t6(t,e){return dR.call(t)===`[object ${e}]`}function n6(t){return t6(t,"Object")}function i6(t){return!!(t&&t.then&&typeof t.then=="function")}function r6(t,e){try{return t instanceof e}catch{return!1}}function s6(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{Z0&&Ei.log(`Failed to add non-enumerable property "${e}" to object`,t)}}const fR=1e3;function ey(){return Date.now()/fR}function a6(){const{performance:t}=cr;if(!t||!t.now)return ey;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/fR}const o6=a6();(()=>{const{performance:t}=cr;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),i=Date.now(),r=t.timeOrigin?Math.abs(t.timeOrigin+n-i):e,a=r<e,c=t.timing&&t.timing.navigationStart,d=typeof c=="number"?Math.abs(c+n-i):e,f=d<e;return a||f?r<=d?t.timeOrigin:c:i})();function Fo(){const t=cr,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const i=new Uint8Array(1);return e.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function c6(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||o6(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Fo()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function Q1(){return Fo()}function ew(){return Fo().substring(16)}function hR(t,e,n=2){if(!e||typeof e!="object"||n<=0)return e;if(t&&e&&Object.keys(e).length===0)return t;const i={...t};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=hR(i[r],e[r],n-1));return i}const hv="_sentrySpan";function tw(t,e){e?s6(t,hv,e):delete t[hv]}function nw(t){return t[hv]}const l6=100;class ty{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Q1(),spanId:ew()}}clone(){const e=new ty;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,tw(e,nw(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&c6(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const n=typeof e=="function"?e(this):e,[i,r]=n instanceof Zo?[n.getScopeData(),n.getRequestSession()]:n6(n)?[e,e.requestSession]:[],{tags:a,extra:c,user:l,contexts:d,level:f,fingerprint:m=[],propagationContext:p}=i||{};return this._tags={...this._tags,...a},this._extra={...this._extra,...c},this._contexts={...this._contexts,...d},l&&Object.keys(l).length&&(this._user=l),f&&(this._level=f),m.length&&(this._fingerprint=m),p&&(this._propagationContext=p),r&&(this._requestSession=r),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,tw(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Q1()}),this._notifyScopeListeners(),this}addBreadcrumb(e,n){const i=typeof n=="number"?n:l6;if(i<=0)return this;const r={timestamp:ey(),...e};return this._breadcrumbs.push(r),this._breadcrumbs.length>i&&(this._breadcrumbs=this._breadcrumbs.slice(-i),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:nw(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=hR(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:ew(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,n){const i=n&&n.event_id?n.event_id:Fo();if(!this._client)return Ei.warn("No client configured on scope - will not capture exception!"),i;const r=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:r,...n,event_id:i},this),i}captureMessage(e,n,i){const r=i&&i.event_id?i.event_id:Fo();if(!this._client)return Ei.warn("No client configured on scope - will not capture message!"),r;const a=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:a,...i,event_id:r},this),r}captureEvent(e,n){const i=n&&n.event_id?n.event_id:Fo();return this._client?(this._client.captureEvent(e,{...n,event_id:i},this),i):(Ei.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Zo=ty;function u6(){return X0("defaultCurrentScope",()=>new Zo)}function d6(){return X0("defaultIsolationScope",()=>new Zo)}class f6{constructor(e,n){let i;e?i=e:i=new Zo;let r;n?r=n:r=new Zo,this._stack=[{scope:i}],this._isolationScope=r}withScope(e){const n=this._pushScope();let i;try{i=e(n)}catch(r){throw this._popScope(),r}return i6(i)?i.then(r=>(this._popScope(),r),r=>{throw this._popScope(),r}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Jo(){const t=eh(),e=Q0(t);return e.stack=e.stack||new f6(u6(),d6())}function h6(t){return Jo().withScope(t)}function m6(t,e){const n=Jo();return n.withScope(()=>(n.getStackTop().scope=t,e(t)))}function iw(t){return Jo().withScope(()=>t(Jo().getIsolationScope()))}function p6(){return{withIsolationScope:iw,withScope:h6,withSetScope:m6,withSetIsolationScope:(t,e)=>iw(e),getCurrentScope:()=>Jo().getScope(),getIsolationScope:()=>Jo().getIsolationScope()}}function ny(t){const e=Q0(t);return e.acs?e.acs:p6()}function th(){const t=eh();return ny(t).getCurrentScope()}function mR(){const t=eh();return ny(t).getIsolationScope()}function pR(...t){const e=eh(),n=ny(e);if(t.length===2){const[i,r]=t;return i?n.withSetScope(i,r):n.withScope(r)}return n.withScope(t[0])}function iy(){return th().getClient()}const g6=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function v6(t){return t==="http"||t==="https"}function y6(t,e=!1){const{host:n,path:i,pass:r,port:a,projectId:c,protocol:l,publicKey:d}=t;return`${l}://${d}${e&&r?`:${r}`:""}@${n}${a?`:${a}`:""}/${i&&`${i}/`}${c}`}function b6(t){const e=g6.exec(t);if(!e){J0(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,i,r="",a="",c="",l=""]=e.slice(1);let d="",f=l;const m=f.split("/");if(m.length>1&&(d=m.slice(0,-1).join("/"),f=m.pop()),f){const p=f.match(/^\d+/);p&&(f=p[0])}return gR({host:a,pass:r,path:d,projectId:f,port:c,protocol:n,publicKey:i})}function gR(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function S6(t){if(!Z0)return!0;const{port:e,projectId:n,protocol:i}=t;return["protocol","publicKey","host","projectId"].find(c=>t[c]?!1:(Ei.error(`Invalid Sentry Dsn: ${c} missing`),!0))?!1:n.match(/^\d+$/)?v6(i)?e&&isNaN(parseInt(e,10))?(Ei.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(Ei.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):(Ei.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function T6(t){const e=typeof t=="string"?b6(t):gR(t);if(!(!e||!S6(e)))return e}function x6(t){if(t)return w6(t)?{captureContext:t}:E6(t)?{captureContext:t}:t}function w6(t){return t instanceof Zo||typeof t=="function"}const C6=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function E6(t){return Object.keys(t).some(e=>C6.includes(e))}function vR(t,e){return th().captureException(t,x6(e))}function k6(t,e){const n=e;return th().captureMessage(t,n,void 0)}function R6(){return mR().lastEventId()}function A6(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function _6(t,e){const n=T6(t);if(!n)return"";const i=`${A6(n)}embed/error-page/`;let r=`dsn=${y6(n)}`;for(const a in e)if(a!=="dsn"&&a!=="onClose")if(a==="user"){const c=e.user;if(!c)continue;c.name&&(r+=`&name=${encodeURIComponent(c.name)}`),c.email&&(r+=`&email=${encodeURIComponent(c.email)}`)}else r+=`&${encodeURIComponent(a)}=${encodeURIComponent(e[a])}`;return`${i}?${r}`}const P6=100;function D6(t,e){const n=iy(),i=mR();if(!n)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:a=P6}=n.getOptions();if(a<=0)return;const l={timestamp:ey(),...t},d=r?J0(()=>r(l,e)):l;d!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",d,e),i.addBreadcrumb(d,a))}const To=cr,zp=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function rw(t={}){if(!To.document){zp&&Ei.error("Global document not defined in showReportDialog call");return}const e=th(),n=e.getClient(),i=n&&n.getDsn();if(!i){zp&&Ei.error("DSN not configured for showReportDialog call");return}if(e&&(t.user={...e.getUser(),...t.user}),!t.eventId){const l=R6();l&&(t.eventId=l)}const r=To.document.createElement("script");r.async=!0,r.crossOrigin="anonymous",r.src=_6(i,t),t.onLoad&&(r.onload=t.onLoad);const{onClose:a}=t;if(a){const l=d=>{if(d.data==="__sentry_reportdialog_closed__")try{a()}finally{To.removeEventListener("message",l)}};To.addEventListener("message",l)}const c=To.document.head||To.document.body;c?c.appendChild(r):zp&&Ei.error("Not injecting report dialog. No injection point found in HTML")}function N6(t){const e=t.match(/^([^.]+)/);return e!==null&&parseInt(e[0])>=17}function M6(t,e){const n=new WeakSet;function i(r,a){if(!n.has(r)){if(r.cause)return n.add(r),i(r.cause,a);r.cause=a}}i(t,e)}function yR(t,{componentStack:e},n){if(N6(T.version)&&e6(t)&&e){const i=new Error(t.message);i.name=`React ErrorBoundary ${t.name}`,i.stack=e,M6(t,i)}return vR(t,{...n,captureContext:{contexts:{react:{componentStack:e}}}})}function Hp(t){return(e,n)=>{const i=yR(e,n);t&&t(e,n,i)}}var qp={exports:{}},yt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function O6(){if(sw)return yt;sw=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,r=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,l=t?Symbol.for("react.context"):60110,d=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,m=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,v=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,w=t?Symbol.for("react.lazy"):60116,S=t?Symbol.for("react.block"):60121,R=t?Symbol.for("react.fundamental"):60117,E=t?Symbol.for("react.responder"):60118,N=t?Symbol.for("react.scope"):60119;function M(A){if(typeof A=="object"&&A!==null){var L=A.$$typeof;switch(L){case e:switch(A=A.type,A){case d:case f:case i:case a:case r:case p:return A;default:switch(A=A&&A.$$typeof,A){case l:case m:case w:case b:case c:return A;default:return L}}case n:return L}}}function I(A){return M(A)===f}return yt.AsyncMode=d,yt.ConcurrentMode=f,yt.ContextConsumer=l,yt.ContextProvider=c,yt.Element=e,yt.ForwardRef=m,yt.Fragment=i,yt.Lazy=w,yt.Memo=b,yt.Portal=n,yt.Profiler=a,yt.StrictMode=r,yt.Suspense=p,yt.isAsyncMode=function(A){return I(A)||M(A)===d},yt.isConcurrentMode=I,yt.isContextConsumer=function(A){return M(A)===l},yt.isContextProvider=function(A){return M(A)===c},yt.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===e},yt.isForwardRef=function(A){return M(A)===m},yt.isFragment=function(A){return M(A)===i},yt.isLazy=function(A){return M(A)===w},yt.isMemo=function(A){return M(A)===b},yt.isPortal=function(A){return M(A)===n},yt.isProfiler=function(A){return M(A)===a},yt.isStrictMode=function(A){return M(A)===r},yt.isSuspense=function(A){return M(A)===p},yt.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===i||A===f||A===a||A===r||A===p||A===v||typeof A=="object"&&A!==null&&(A.$$typeof===w||A.$$typeof===b||A.$$typeof===c||A.$$typeof===l||A.$$typeof===m||A.$$typeof===R||A.$$typeof===E||A.$$typeof===N||A.$$typeof===S)},yt.typeOf=M,yt}var aw;function I6(){return aw||(aw=1,qp.exports=O6()),qp.exports}var Gp,ow;function U6(){if(ow)return Gp;ow=1;var t=I6(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};a[t.ForwardRef]=i,a[t.Memo]=r;function c(w){return t.isMemo(w)?r:a[w.$$typeof]||e}var l=Object.defineProperty,d=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,m=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,v=Object.prototype;function b(w,S,R){if(typeof S!="string"){if(v){var E=p(S);E&&E!==v&&b(w,E,R)}var N=d(S);f&&(N=N.concat(f(S)));for(var M=c(w),I=c(S),A=0;A<N.length;++A){var L=N[A];if(!n[L]&&!(R&&R[L])&&!(I&&I[L])&&!(M&&M[L])){var z=m(S,L);try{l(w,L,z)}catch{}}}}return w}return Gp=b,Gp}U6();const L6=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,cw={componentStack:null,error:null,eventId:null};class ry extends T.Component{constructor(e){super(e),ry.prototype.__init.call(this),this.state=cw,this._openFallbackReportDialog=!0;const n=iy();n&&e.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=n.on("afterSendEvent",i=>{!i.type&&this._lastEventId&&i.event_id===this._lastEventId&&rw({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,n){const{componentStack:i}=n,r=i??void 0,{beforeCapture:a,onError:c,showDialog:l,dialogOptions:d}=this.props;pR(f=>{a&&a(f,e,r);const m=this.props.handled!=null?this.props.handled:!!this.props.fallback,p=yR(e,n,{mechanism:{handled:m}});c&&c(e,r,p),l&&(this._lastEventId=p,this._openFallbackReportDialog&&rw({...d,eventId:p})),this.setState({error:e,componentStack:i,eventId:p})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:n,eventId:i}=this.state,{onUnmount:r}=this.props;r&&r(e,n,i),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}__init(){this.resetErrorBoundary=()=>{const{onReset:e}=this.props,{error:n,componentStack:i,eventId:r}=this.state;e&&e(n,i,r),this.setState(cw)}}render(){const{fallback:e,children:n}=this.props,i=this.state;if(i.error){let r;return typeof e=="function"?r=T.createElement(e,{error:i.error,componentStack:i.componentStack,resetError:this.resetErrorBoundary,eventId:i.eventId}):r=e,T.isValidElement(r)?r:(e&&L6&&Ei.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}const bR=()=>!!iy(),SR=t=>{if(t instanceof Error)return{name:t.name,message:t.message,stack:t.stack};if(typeof t=="object"&&t!==null)try{return JSON.parse(JSON.stringify(t))}catch(e){return{description:String(t),serializationError:e instanceof Error?e.message:e}}return t},Kp=(t,e,n)=>{bR()&&D6({type:"default",category:"logger",level:t,message:e,data:{args:n.map(SR)}})},j6=(t,e)=>{if(!bR())return;const n=e.find(i=>i instanceof Error);pR(i=>{i.setLevel("error"),i.setContext("logger",{message:t,arguments:e.map(SR)}),n?vR(n):k6(t,"error")})};class B6{debug(e,...n){}info(e,...n){console.info(`[INFO] ${e}`,...n),Kp("info",e,n)}warn(e,...n){console.warn(`[WARN] ${e}`,...n),Kp("warning",e,n)}error(e,...n){console.error(`[ERROR] ${e}`,...n),Kp("error",e,n),j6(e,n)}}const Ke=new B6;class F6{config;userPool;constructor(e){this.config=e;try{this.userPool=new X3({UserPoolId:e.userPoolId,ClientId:e.clientId}),Ke.info("CognitoUserPool initialized successfully")}catch(n){throw Ke.error("Failed to initialize CognitoUserPool:",n),n}}initiateLogin(e,n){Ke.info("Cognito Config:",this.config),Ke.info("Redirect URI being sent:",this.config.redirectUri);const i=new URLSearchParams({client_id:this.config.clientId,response_type:"code",scope:"openid email profile",redirect_uri:this.config.redirectUri,identity_provider:e});n&&i.set("state",btoa(JSON.stringify(n)));const r=`https://${this.config.domain}/oauth2/authorize?${i.toString()}`;Ke.info("Login URL:",r),window.location.href=r}getCurrentUser(){return this.userPool.getCurrentUser()}async getCurrentSession(){const e=this.getCurrentUser();return e?new Promise((n,i)=>{e.getSession((r,a)=>{r?i(r):n(a)})}):null}async refreshSession(e){const n=this.getCurrentUser();if(!n)throw new Error("No current user found");return new Promise((i,r)=>{n.refreshSession(e,(a,c)=>{a?r(a):c?i(c):r(new Error("Failed to refresh session"))})})}async exchangeCodeForTokens(e){const n=`https://${this.config.domain}/oauth2/token`,i=new URLSearchParams({grant_type:"authorization_code",client_id:this.config.clientId,code:e,redirect_uri:this.config.redirectUri}),r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()});if(Ke.info("Token exchange response received",{status:r.status}),!r.ok){const c=await r.text();throw Ke.error("Token exchange - Error response:",c),new Error(`Token exchange failed: ${r.status} ${c}`)}return await r.json()}async getUserInfo(e){const n=`https://${this.config.domain}/oauth2/userInfo`,i=await fetch(n,{headers:{Authorization:`Bearer ${e}`}});if(!i.ok){const r=await i.text();throw new Error(`Failed to fetch user info: ${i.status} ${r}`)}return i.json()}async getUserInfoFromSession(e){const n=e.getAccessToken().getJwtToken();return this.getUserInfo(n)}async handleOAuthCallback(e){const n=await this.exchangeCodeForTokens(e),r=JSON.parse(atob(n.id_token.split(".")[1])).sub,a=new uv({Username:r,Pool:this.userPool}),c=new ov({IdToken:n.id_token}),l=new sv({AccessToken:n.access_token}),d=new cv({RefreshToken:n.refresh_token}),f=new lv({IdToken:c,AccessToken:l,RefreshToken:d});a.setSignInUserSession(f),window.dispatchEvent(new CustomEvent("tokensChanged",{detail:"saved"}))}signOut(){const e=this.getCurrentUser();e&&e.signOut();const n=new URLSearchParams({client_id:this.config.clientId,logout_uri:this.config.logoutUri}),i=`https://${this.config.domain}/logout?${n.toString()}`;window.location.href=i}}const V6={domain:"auth.test.ladderr.ai",clientId:"1vjqgkgsa283flpnuju0orim4v",userPoolId:"us-west-2_VzuJZzMgD",region:"us-west-2",redirectUri:"https://test.ladderr.ai/auth/callback",logoutUri:"https://test.ladderr.ai/auth/logout"};let Yp=null;const mu=()=>(Yp||(Yp=new F6(V6)),Yp);class xo extends Error{constructor(e,n,i=!1,r){super(e),this.code=n,this.isRetryable=i,this.originalError=r,this.name="AuthError"}}const lw=(t,e)=>{if(t instanceof xo)return t;const n=t instanceof Error?t.message:String(t);return Ke.error(`Auth error in ${e}:`,t),n.includes("NetworkError")||n.includes("fetch")?new xo("Network error occurred","NETWORK_ERROR",!0,t instanceof Error?t:void 0):n.includes("expired")||n.includes("invalid")?new xo("Authentication token expired","TOKEN_EXPIRED",!1,t instanceof Error?t:void 0):n.includes("unauthorized")||n.includes("401")?new xo("Unauthorized access","UNAUTHORIZED",!1,t instanceof Error?t:void 0):n.includes("forbidden")||n.includes("403")?new xo("Access forbidden","FORBIDDEN",!1,t instanceof Error?t:void 0):new xo("Authentication failed","UNKNOWN_ERROR",!1,t instanceof Error?t:void 0)};class z6{baseURL;constructor(){this.baseURL="https://api-test.ladderr.ai"}async makeRequest(e,n){const{accessToken:i,...r}=n,a={"Content-Type":"application/json",...r.headers};i&&(a.Authorization=`Bearer ${i}`);const c=await fetch(`${this.baseURL}${e}`,{...r,headers:a});if(!c.ok){let l=`API Error: ${c.status} ${c.statusText}`;try{const d=await c.json();l=d.detail||l,Ke.error("API Error:",d)}catch{Ke.error("Failed to parse error response")}throw new Error(l)}return c.json()}async syncUser(e){Ke.info("Syncing user profile with backend");try{const n=await this.makeRequest("/api/users/sync",{method:"POST",accessToken:e});return Ke.info("User sync successful:",n),n}catch(n){throw Ke.error("User sync failed:",n),n}}async getUserFeatures(e){Ke.info("Fetching user feature flags from backend");try{const n=await this.makeRequest("/api/users/features",{method:"GET",accessToken:e});return Ke.info("User features fetched successfully:",n),n}catch(n){throw Ke.error("Failed to fetch user features:",n),n}}}const TR=new z6,xR=T.createContext(void 0),H6=({children:t})=>{const[e,n]=T.useState(null),[i,r]=T.useState(!0),[a,c]=T.useState(!1),l=mu(),d=T.useCallback(E=>{if(!E)return!1;try{if(!E.isValid())return!1;const N=E.getAccessToken(),M=E.getIdToken(),I=E.getRefreshToken();return!!(N&&M&&I)}catch(N){return Ke.error("Session validation failed:",N),!1}},[]),f=T.useCallback(async()=>{r(!0);try{const E=await l.getCurrentSession();if(E&&d(E))try{const N=await l.getUserInfoFromSession(E);n({id:N.sub,email:N.email,name:N.name,picture:N.picture,username:N["cognito:username"]})}catch(N){const M=lw(N,"loadUserFromSession");if(Ke.error("Failed to load user info:",M),!M.isRetryable){const I=l.getCurrentUser();I&&I.signOut(),n(null)}}else n(null)}catch(E){const N=lw(E,"getSession");Ke.error("Failed to get session:",N),n(null)}finally{r(!1),c(!0)}},[l,d]),m=T.useCallback(E=>{Ke.info("Session change detected:",E.detail),E.detail==="cleared"?(n(null),r(!1)):E.detail==="saved"&&f()},[f]);T.useEffect(()=>(f(),window.addEventListener("tokensChanged",m),()=>{window.removeEventListener("tokensChanged",m)}),[f,m]);const R={user:e,loading:i,isAuthenticated:a&&!i&&!!e,signInWithProvider:(E,N)=>{l.initiateLogin(E,N)},signOut:()=>{const E=l.getCurrentUser();E&&E.signOut(),l.signOut()},clearLocalTokens:()=>{n(null),r(!1),Ke.info("Local tokens cleared.")},refreshSession:async()=>{r(!0),await f()},handleSuccessfulLogin:async()=>{await f();const E=await l.getCurrentSession();if(E&&d(E)){const N=E.getAccessToken().getJwtToken();try{await TR.syncUser(N),Ke.info("User profile synced successfully after new login")}catch(M){Ke.error("Failed to sync user profile after new login:",M)}}}};return x.jsx(xR.Provider,{value:R,children:t})};class q6 extends T.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){Ke.error("Auth error boundary caught an error:",e,n),(e.message.includes("auth")||e.message.includes("token")||e.message.includes("session"))&&Ke.error("Authentication-related error detected:",{error:e.message,stack:e.stack,componentStack:n.componentStack})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:x.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:x.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Authentication Error"}),x.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Something went wrong with the authentication process. Please try refreshing the page."}),x.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Refresh Page"})]})})}):this.props.children}}/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),K6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),uw=t=>{const e=K6(t);return e.charAt(0).toUpperCase()+e.slice(1)},wR=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),Y6=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...l},d)=>T.createElement("svg",{ref:d,...$6,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:wR("lucide",r),...!a&&!Y6(l)&&{"aria-hidden":"true"},...l},[...c.map(([f,m])=>T.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(t,e)=>{const n=T.forwardRef(({className:i,...r},a)=>T.createElement(W6,{ref:a,iconNode:e,className:wR(`lucide-${G6(uw(t))}`,`lucide-${t}`,i),...r}));return n.displayName=uw(t),n};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Rf=Et("arrow-left",X6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Af=Et("arrow-right",Z6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Q6=Et("circle-check-big",J6);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],t4=Et("database",e4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],i4=Et("eye",n4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],s4=Et("heart",r4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],o4=Et("house",a4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],l4=Et("lightbulb",c4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],d4=Et("loader-circle",u4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],h4=Et("lock",f4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],p4=Et("mail",m4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],v4=Et("menu",g4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],CR=Et("message-circle",y4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],S4=Et("message-square",b4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],x4=Et("mic-off",T4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],C4=Et("mic",w4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"m9 10 3-3 3 3",key:"11gsxs"}],["path",{d:"M12 13V7",key:"h0r20n"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]],k4=Et("monitor-up",E4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],A4=Et("phone-off",R4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],dw=Et("rotate-ccw",_4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],D4=Et("shield",P4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ER=Et("sparkles",N4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],O4=Et("target",M4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],U4=Et("trending-up",I4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],j4=Et("triangle-alert",L4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],F4=Et("users",B4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],z4=Et("video-off",V4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],q4=Et("video",H4);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],kR=Et("x",G4),Xr=()=>{const t=T.useContext(xR);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};class K4{cachedFeatures=null;ttl;fetchingPromise=null;constructor(e=600*1e3){this.ttl=e}isCacheValid(){return this.cachedFeatures?Date.now()-this.cachedFeatures.lastFetched<this.ttl:!1}async getUserFeatures(e){return this.isCacheValid()?this.cachedFeatures.features:this.fetchingPromise?this.fetchingPromise:(this.fetchingPromise=(async()=>{try{const n=await TR.getUserFeatures(e);return this.cachedFeatures={features:n.enabled_features,lastFetched:Date.now()},n.enabled_features}catch(n){throw Ke.error("Failed to fetch user features:",n),n}finally{this.fetchingPromise=null}})(),this.fetchingPromise)}isFeatureEnabled(e,n){return e.includes(n)}async checkFeature(e,n){try{const i=await this.getUserFeatures(e);return this.isFeatureEnabled(i,n)}catch(i){return Ke.error(`Failed to check feature '${n}':`,i),!1}}clearCache(){this.cachedFeatures=null,this.fetchingPromise=null}}const wl=new K4,RR=()=>{const{user:t,isAuthenticated:e}=Xr(),[n,i]=T.useState([]),[r,a]=T.useState(!0),[c,l]=T.useState(null),d=mu();return T.useEffect(()=>{(async()=>{if(!e||!t){i([]),a(!1),l(null);return}a(!0),l(null);try{const b=await d.getCurrentSession();if(!b){i([]),a(!1);return}const w=b.getAccessToken().getJwtToken(),S=await wl.getUserFeatures(w);i(S)}catch(b){const w=b instanceof Error?b.message:"Failed to fetch feature flags";l(w),Ke.error("Feature flag fetch error:",b),i([])}finally{a(!1)}})()},[e,t,d]),{isFeatureEnabled:v=>wl.isFeatureEnabled(n,v),checkFeature:async v=>{if(!e||!t)return!1;try{const b=await d.getCurrentSession();if(!b)return!1;const w=b.getAccessToken().getJwtToken();return await wl.checkFeature(w,v)}catch(b){return Ke.error(`Failed to check feature '${v}':`,b),!1}},features:n,loading:r,error:c,refetch:async()=>{if(!e||!t){i([]),a(!1),l(null);return}wl.clearCache(),a(!0),l(null);try{const v=await d.getCurrentSession();if(!v){i([]),a(!1);return}const b=v.getAccessToken().getJwtToken(),w=await wl.getUserFeatures(b);i(w)}catch(v){const b=v instanceof Error?v.message:"Failed to fetch feature flags";l(b),Ke.error("Feature flag fetch error:",v),i([])}finally{a(!1)}}}},Y4=({onStartCoaching:t})=>{const{loading:e,isAuthenticated:n,signOut:i}=Xr(),{loading:r}=RR(),[a,c]=T.useState(!1),d=Gi().pathname==="/session",f=e||r,m=async()=>{await i()},p=()=>{c(!a)};return x.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm relative",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(ln,{to:"/",className:"flex items-center space-x-3",children:[x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),x.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[x.jsx("a",{href:"#capabilities",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Capabilities"}),x.jsx("a",{href:"#testimonials",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Success Stories"}),x.jsx(ln,{to:"/contact",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Contact"}),f?x.jsx("div",{className:"w-32 h-10 bg-gray-200 animate-pulse rounded-full"}):n?x.jsxs("div",{className:"flex items-center space-x-4",children:[!d&&x.jsx(ln,{to:"/session",className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Start Session"}),x.jsx("button",{onClick:m,className:"bg-gradient-to-r from-slate-800 to-slate-900 hover:from-slate-900 hover:to-black text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Logout"})]}):x.jsx("button",{onClick:t,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Sign Up / Sign In"})]}),x.jsx("button",{onClick:p,className:"md:hidden p-2 rounded-lg hover:bg-slate-100 transition-colors","aria-label":"Toggle menu",children:a?x.jsx(kR,{size:24}):x.jsx(v4,{size:24})})]}),a&&x.jsx("div",{className:"absolute top-full left-0 right-0 md:hidden border-t border-slate-100 bg-white/95 backdrop-blur-md shadow-lg z-50",children:x.jsxs("nav",{className:"px-6 py-4 space-y-4",children:[x.jsx("a",{href:"#capabilities",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>c(!1),children:"Capabilities"}),x.jsx("a",{href:"#testimonials",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>c(!1),children:"Success Stories"}),x.jsx(ln,{to:"/contact",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>c(!1),children:"Contact"}),x.jsx("div",{className:"pt-2",children:f?x.jsx("div",{className:"w-full h-12 bg-gray-200 animate-pulse rounded-full"}):n?x.jsxs("div",{className:"space-y-3",children:[!d&&x.jsx(ln,{to:"/session",onClick:()=>c(!1),className:"block w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg text-center",children:"Start Session"}),x.jsx("button",{onClick:()=>{m(),c(!1)},className:"w-full bg-gradient-to-r from-slate-800 to-slate-900 hover:from-slate-900 hover:to-black text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg",children:"Logout"})]}):x.jsx("button",{onClick:()=>{t(),c(!1)},className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg",children:"Sign Up / Sign In"})})]})})]})})},$4=({onStartCoaching:t})=>{const e=Fs(),{isAuthenticated:n,loading:i}=Xr(),r=()=>{n?e("/session"):t()},c=i?{text:"Loading...",icon:x.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),disabled:!0,className:"group bg-neutral-400 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm cursor-not-allowed"}:n?{text:"Begin Your Climb",icon:x.jsx(Af,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"}),disabled:!1,className:"group bg-neutral-900 hover:bg-neutral-800 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm shadow-lg hover:shadow-xl"}:{text:"Begin Your Climb",icon:x.jsx(Af,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"}),disabled:!1,className:"group bg-neutral-900 hover:bg-neutral-800 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm shadow-lg hover:shadow-xl"};return x.jsxs("section",{className:"relative min-h-screen flex items-center justify-center px-6 bg-neutral-50",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50"}),x.jsxs("div",{className:"relative max-w-4xl mx-auto text-center",children:[x.jsxs("div",{className:"inline-flex items-center gap-2 text-neutral-600 text-sm font-medium mb-8",children:[x.jsx(ER,{className:"w-4 h-4"}),"Voice-First AI Career Coach"]}),x.jsxs("h1",{className:"text-5xl md:text-7xl font-light mb-6 tracking-tight text-neutral-900",children:["Own Your",x.jsx("br",{}),x.jsx("span",{className:"font-medium",children:"Career"})]}),x.jsx("p",{className:"text-lg md:text-xl text-neutral-600 mb-12 max-w-2xl mx-auto font-light leading-relaxed",children:"AI-powered career coaching that adapts to your goals and style"}),x.jsx("div",{className:"mt-16 mb-8",children:x.jsx("div",{className:"relative group",children:x.jsxs("button",{onClick:r,disabled:c.disabled,className:c.className,children:[!i&&x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),c.text,c.icon]})})})]})]})},W4=[{icon:s4,title:"Workplace Confidence",description:"Build self-assurance for meetings, presentations, and difficult conversations through role-playing and reflection"},{icon:F4,title:"Conflict Resolution",description:"Navigate workplace tensions, manage difficult colleagues, and turn conflicts into productive conversations"},{icon:U4,title:"Self-Advocacy",description:"Learn to sell yourself, communicate your value, and position your achievements for recognition and advancement"},{icon:S4,title:"Communication Polish",description:"Refine your business English, presentation skills, and professional speaking to command respect"},{icon:O4,title:"Goal Accountability",description:"Stay on track with career objectives, break through barriers, and maintain momentum toward your aspirations"},{icon:l4,title:"Blind Spot Discovery",description:"Uncover hidden opportunities, challenge your assumptions, and explore career possibilities you hadn't considered"}],X4=()=>x.jsx("section",{id:"capabilities",className:"py-20 bg-white",children:x.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[x.jsxs("div",{className:"mb-16",children:[x.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-neutral-900 mb-4 text-center",children:"How we'll help you"}),x.jsx("p",{className:"text-neutral-600 text-center max-w-2xl mx-auto",children:"Your AI career coach, here to listen, reflect, and guide your professional growth"})]}),x.jsx("div",{className:"grid md:grid-cols-2 gap-x-16 gap-y-12",children:W4.map((t,e)=>{const n=t.icon;return x.jsxs("div",{className:"flex gap-4",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(n,{className:"w-6 h-6 text-neutral-700 mt-1"})}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:t.title}),x.jsx("p",{className:"text-neutral-600 leading-relaxed",children:t.description})]})]},e)})})]})}),Z4=[{text:"It's like having a mentor who actually gets it. Helped me navigate a difficult conversation with my manager.",context:"Product Manager"},{text:"Finally understood why I wasn't getting promoted. The AI helped me see my blind spots.",context:"Software Engineer"},{text:"Practiced my presentation pitch until I felt confident. Got the buy-in I needed.",context:"Marketing Director"},{text:"Talked through my career anxiety. It really listens and asks the right questions.",context:"Operations Lead"}],J4=()=>x.jsx("section",{id:"testimonials",className:"py-20 bg-white border-t border-neutral-100",children:x.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[x.jsx("h2",{className:"text-2xl md:text-3xl font-light text-neutral-900 mb-12 text-center",children:"Early feedback"}),x.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:Z4.map((t,e)=>x.jsxs("div",{className:"border-l-2 border-neutral-200 pl-6",children:[x.jsxs("p",{className:"text-neutral-700 mb-3 leading-relaxed",children:['"',t.text,'"']}),x.jsx("p",{className:"text-sm text-neutral-500",children:t.context})]},e))}),x.jsx("div",{className:"mt-16 text-center",children:x.jsx("p",{className:"text-sm text-neutral-400",children:"From our alpha testers"})})]})}),Q4=()=>x.jsx("footer",{className:"bg-slate-900 text-white border-t border-slate-800",children:x.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[x.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[x.jsxs("div",{className:"md:col-span-2",children:[x.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[x.jsx("img",{src:"/logo-footer.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-2xl font-bold",children:"Ladderr.ai"}),x.jsx("p",{className:"text-slate-400 text-sm",children:"Voice-First AI Career Coach"})]})]}),x.jsx("p",{className:"text-slate-400 mb-6 max-w-md",children:"Your AI career coach, here to listen, reflect, and guide your professional growth."}),x.jsx("p",{className:"text-sm text-slate-500",children:"Ladderr is currently invite-only. We're limiting access to ensure every user gets a high-quality coaching experience."})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),x.jsxs("ul",{className:"space-y-3 text-slate-400",children:[x.jsx("li",{children:x.jsx("a",{href:"#capabilities",className:"hover:text-white transition-colors",children:"Capabilities"})}),x.jsx("li",{children:x.jsx("a",{href:"#testimonials",className:"hover:text-white transition-colors",children:"Success Stories"})}),x.jsx("li",{children:x.jsx("button",{className:"hover:text-white transition-colors text-left",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Join Waitlist"})})]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),x.jsxs("ul",{className:"space-y-3 text-slate-400",children:[x.jsx("li",{children:x.jsx(ln,{to:"/contact",className:"hover:text-white transition-colors",children:"Contact"})}),x.jsx("li",{children:x.jsx(ln,{to:"/privacy",className:"hover:text-white transition-colors",children:"Privacy"})}),x.jsx("li",{children:x.jsx(ln,{to:"/terms",className:"hover:text-white transition-colors",children:"Terms"})})]})]})]}),x.jsx("div",{className:"border-t border-slate-800 mt-12 pt-8 text-center text-slate-400",children:x.jsx("p",{children:"Â© 2025 Ladderr.ai. All rights reserved."})})]})}),AR=({onClose:t,context:e})=>{const[n,i]=T.useState(!1),[r,a]=T.useState(!1),[c,l]=T.useState(null),{signInWithProvider:d}=Xr(),f=()=>{i(!0),l(null);try{d("Google",e)}catch{l("An unexpected error occurred. Please try again."),i(!1)}},m=()=>{a(!0),l(null);try{d("LinkedIn",e)}catch{l("An unexpected error occurred. Please try again."),a(!1)}};return x.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:x.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative",children:[x.jsx("button",{onClick:t,className:"absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors",children:x.jsx(kR,{className:"w-6 h-6"})}),x.jsxs("div",{className:"text-center mb-8",children:[x.jsx("img",{src:"/logo-modal.png",alt:"Ladderr.ai Logo",className:"w-16 h-16 object-contain mx-auto mb-6"}),x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Sign Up / Sign In"}),x.jsx("p",{className:"text-slate-600",children:"Sign in to check your early access status and begin your climb"})]}),c&&x.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:c}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("button",{onClick:f,disabled:n||r,className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-slate-200 hover:border-slate-300 hover:bg-slate-50 text-slate-700 py-4 rounded-full font-semibold transition-all duration-300 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[n?x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-slate-400"}):x.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[x.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),x.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),x.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),x.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n?"Signing in...":"Continue with Google"]}),x.jsxs("button",{onClick:m,disabled:n||r,className:"w-full flex items-center justify-center gap-3 bg-[#0077B5] hover:bg-[#005885] text-white py-4 rounded-full font-semibold transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[r?x.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),r?"Signing in...":"Continue with LinkedIn"]})]}),x.jsxs("p",{className:"text-xs text-slate-500 text-center mt-6",children:["By continuing, you agree to our"," ",x.jsx(ln,{to:"/terms",className:"text-indigo-600 hover:text-indigo-700 underline",children:"Terms of Service"})," ","and"," ",x.jsx(ln,{to:"/privacy",className:"text-indigo-600 hover:text-indigo-700 underline",children:"Privacy Policy"})]})]})})},ej=()=>{const t=Fs(),[e]=YU(),[n,i]=T.useState(null),[r,a]=T.useState(!0),{handleSuccessfulLogin:c}=Xr();return T.useEffect(()=>{let l=!0,d;const f=async()=>{const p=e.get("code"),v=e.get("error"),b=e.get("state");if(Ke.info("AuthCallback - Processing:",{code:p?.substring(0,8)+"...",error:v,state:b}),v){l&&(i("Authentication failed"),a(!1),d=setTimeout(()=>t("/"),3e3));return}if(!p){l&&(i("No authorization code received"),a(!1),d=setTimeout(()=>t("/"),3e3));return}const w="processed_auth_codes",S=JSON.parse(localStorage.getItem(w)||"[]");if(S.includes(p)){Ke.info("Authorization code already processed, skipping...");const E=S.slice(-9);localStorage.setItem(w,JSON.stringify(E));return}const R="auth_processing";if(localStorage.getItem(R)===p){Ke.info("Token exchange already in progress, waiting...");return}localStorage.setItem(R,p);try{if(Ke.info("Starting OAuth callback processing for code:",p.substring(0,8)+"..."),await mu().handleOAuthCallback(p),c(),!l){Ke.info("Component unmounted, aborting...");return}Ke.info("OAuth callback processing successful"),S.push(p),localStorage.setItem(w,JSON.stringify(S.slice(-10))),setTimeout(()=>{let N=null;if(b)try{N=JSON.parse(atob(b))}catch(M){Ke.error("Failed to parse state parameter:",M)}N&&N.returnTo?(Ke.info("Redirecting to state destination:",N.returnTo),t(N.returnTo)):t("/")},1e3)}catch(E){Ke.error("Token exchange failed:",E),l&&(i("Authentication failed"),a(!1),d=setTimeout(()=>t("/"),3e3))}finally{localStorage.removeItem(R),Ke.info("Token exchange process completed")}},m=setTimeout(()=>{l&&f()},100);return()=>{l=!1,clearTimeout(m),d&&clearTimeout(d)}},[e,t,c]),n?x.jsx("div",{className:"min-h-screen flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-red-600 mb-4",children:n}),x.jsx("p",{className:"text-slate-600",children:"Redirecting to home..."})]})}):r?x.jsx("div",{className:"min-h-screen flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),x.jsx("p",{className:"text-slate-600",children:"Completing sign in..."})]})}):null},tj=()=>{const t=Fs(),{clearLocalTokens:e}=Xr();return T.useEffect(()=>{e();const i=mu().getCurrentUser();i&&i.signOut(),setTimeout(()=>{t("/")},1e3)},[t,e]),x.jsx("div",{className:"min-h-screen flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),x.jsx("p",{className:"text-slate-600",children:"Signing you out..."})]})})},nj=({children:t})=>{const{isAuthenticated:e,loading:n}=Xr(),[i,r]=T.useState(!1),a=Gi();return T.useEffect(()=>{!n&&!e&&r(!0)},[e,n]),n?x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:x.jsx("div",{className:"animate-pulse text-lg text-gray-600",children:"Loading..."})}):e?x.jsx(x.Fragment,{children:t}):x.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white px-4",children:[x.jsxs("div",{className:"max-w-md text-center",children:[x.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),x.jsx("p",{className:"text-gray-600 mb-8",children:"You need to be logged in to access this page. Please sign in to continue."})]}),i&&x.jsx(AR,{context:{returnTo:a.pathname},onClose:()=>{r(!1),window.location.href="/"}})]})},ij=()=>x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:x.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(ln,{to:"/",className:"flex items-center space-x-3",children:[x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),x.jsxs(ln,{to:"/",className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[x.jsx(Rf,{className:"w-4 h-4"}),"Back to Home"]})]})})}),x.jsx("div",{className:"py-20",children:x.jsxs("div",{className:"max-w-2xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-16",children:[x.jsx("h1",{className:"text-5xl font-bold text-slate-900 mb-6",children:"Get in Touch"}),x.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Have questions about Ladderr.ai or interested in an enterprise solution? We'd love to hear from you."})]}),x.jsxs("div",{className:"space-y-8",children:[x.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-3xl p-8 border border-indigo-100 text-center",children:[x.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:x.jsx(p4,{className:"w-8 h-8 text-white"})}),x.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Email Us"}),x.jsx("p",{className:"text-slate-600 mt-2 mb-4",children:"For all inquiries, including enterprise solutions, please email us at"}),x.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-bold text-lg",children:"hello@ladderr.ai"})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8",children:[x.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6 text-center",children:"Frequently Asked Questions"}),x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"How does early access work?"}),x.jsx("p",{className:"text-slate-600",children:"We're gradually onboarding users to ensure a high-quality coaching experience. You can join the waitlist from our homepage."})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"What about mobile apps or other languages?"}),x.jsxs("p",{className:"text-slate-600",children:["Our current focus is on a web-based, English-only experience. However, our roadmap is driven by user feedback. If you need a mobile app or another language, please email us at ",x.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-medium",children:"hello@ladderr.ai"}),"."]})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Do you offer an enterprise version?"}),x.jsxs("p",{className:"text-slate-600",children:["Yes, we can deploy Ladderr.ai for wider corporate use. For more information on enterprise solutions, please contact us at ",x.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-medium",children:"hello@ladderr.ai"}),"."]})]})]})]})]})]})})]}),rj=()=>x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:x.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(ln,{to:"/",className:"flex items-center space-x-3",children:[x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),x.jsxs(ln,{to:"/",className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[x.jsx(Rf,{className:"w-4 h-4"}),"Back to Home"]})]})})}),x.jsx("div",{className:"py-20",children:x.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[x.jsxs("div",{className:"text-center mb-16",children:[x.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:x.jsx(D4,{className:"w-8 h-8 text-white"})}),x.jsx("h1",{className:"text-5xl font-bold text-slate-900 mb-6",children:"Privacy Policy"}),x.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Your privacy and data security are fundamental to everything we do at Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"Last updated: August 2025"})]}),x.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-16",children:[x.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100",children:[x.jsx(h4,{className:"w-8 h-8 text-indigo-600 mx-auto mb-4"}),x.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"End-to-End Encryption"}),x.jsx("p",{className:"text-slate-600 text-sm",children:"All coaching sessions are encrypted and secure"})]}),x.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl border border-purple-100",children:[x.jsx(i4,{className:"w-8 h-8 text-purple-600 mx-auto mb-4"}),x.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"Responsible Data Handling"}),x.jsx("p",{className:"text-slate-600 text-sm",children:"We use some providers like OpenAI but we never sell your data."})]}),x.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl border border-pink-100",children:[x.jsx(t4,{className:"w-8 h-8 text-pink-600 mx-auto mb-4"}),x.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"Data Minimization"}),x.jsx("p",{className:"text-slate-600 text-sm",children:"We only collect what's necessary for coaching"})]})]}),x.jsxs("div",{className:"prose prose-slate max-w-none",children:[x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Our Commitment to Your Privacy"}),x.jsx("p",{className:"text-slate-600 mb-4",children:'Ladderr.ai ("we", "us", "our") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and protect your personal data. Ladderr.ai is the data controller for your information under the UK General Data Protection Regulation (UK GDPR).'})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Information We Collect"}),x.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Account Information"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"When you create an account, we collect basic information such as your name and email address to create and manage your account."}),x.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Coaching Session Data"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"During coaching sessions, we process voice data and conversation content to provide the service. As we are in an MVP phase, we may also use this data to analyze and improve our service. By using the service, you consent to this use."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"How and Why We Use Your Information (Lawful Basis)"}),x.jsxs("ul",{className:"space-y-3 text-slate-600",children:[x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),x.jsxs("span",{children:[x.jsx("strong",{children:"To Provide Our Service:"})," We process your data to fulfill our contract with you, i.e., to provide AI coaching."]})]}),x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),x.jsxs("span",{children:[x.jsx("strong",{children:"To Improve Our Service:"})," We use your anonymized session data based on our legitimate interest to improve our AI and for product development. You provide your consent to this when you agree to our Terms of Service."]})]}),x.jsxs("li",{className:"flex items-start gap-3",children:[x.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),x.jsxs("span",{children:[x.jsx("strong",{children:"To Communicate with You:"})," We may send you important updates about your account."]})]})]})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Third-Party Services & Data Transfers"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"We use third-party services, such as OpenAI, to provide our AI coaching services. This means your data may be transferred and processed outside of the United Kingdom. We take steps to ensure that any such transfers are compliant with UK GDPR and that your data is protected by appropriate safeguards."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Data Security & Retention"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"We implement reasonable security measures to protect your personal information in transit. However, no system is completely secure, and we cannot guarantee the security of data at rest. We will retain your data only for as long as necessary to provide the service and fulfill the purposes outlined in this policy."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Your Rights Under UK GDPR"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"You have rights over your personal data. To exercise these rights, or if you have a complaint, please contact us. You also have the right to lodge a complaint with the Information Commissioner's Office (ICO), the UK's data protection regulator."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Data from Minors"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"Our service is not intended for individuals under the age of 18. We do not knowingly collect personal data from minors. If we become aware that a minor has provided us with personal data, we will take steps to delete such information."})]}),x.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Changes to This Policy"}),x.jsx("p",{className:"text-slate-600 mb-4",children:"We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page. You are advised to review this Privacy Policy periodically for any changes."})]}),x.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-3xl p-8 border border-indigo-100",children:[x.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Contact Us"}),x.jsx("p",{className:"text-slate-600 mb-6",children:"If you have any questions about this Privacy Policy, please contact us."}),x.jsxs(ln,{to:"/contact",className:"inline-flex items-center gap-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:["Contact Us",x.jsx(Rf,{className:"w-4 h-4 rotate-180"})]})]})]})]})})]}),sj=()=>x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:x.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs(ln,{to:"/",className:"flex items-center space-x-3",children:[x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),x.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),x.jsxs(ln,{to:"/",className:"flex items-center space-x-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[x.jsx(Rf,{className:"w-4 h-4"}),x.jsx("span",{children:"Back to Home"})]})]})})}),x.jsx("main",{className:"max-w-4xl mx-auto px-6 py-16",children:x.jsxs("div",{className:"prose prose-slate max-w-none",children:[x.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Terms of Service"}),x.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6 mb-8",children:[x.jsxs("p",{className:"text-slate-600 mb-2",children:[x.jsx("strong",{children:"Last updated:"})," August 2025"]}),x.jsx("p",{className:"text-slate-600",children:"These terms apply to the alpha version of Ladderr.ai. By accessing our service, you agree to these terms."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"1. Introduction and Acceptance of Terms"}),x.jsx("p",{className:"text-slate-700 mb-4",children:'These Terms of Service ("Terms") govern your use of the Ladderr.ai alpha service ("Service"). By using the Service, you agree to be bound by these Terms. If you do not agree to these Terms, you may not use the Service.'})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"2. Alpha Service"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"The Service is an alpha version and is provided for testing and feedback purposes only. It may contain bugs, errors, and other problems. The features and availability of the Service may change at any time without notice."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"3. Disclaimer of Warranties and Limitation of Liability"}),x.jsx("p",{className:"text-slate-700 mb-4",children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT ANY WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. TO THE FULLEST EXTENT PERMITTED BY LAW, WE DISCLAIM ALL WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT. IN NO EVENT SHALL LADDERR.AI BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES, RESULTING FROM YOUR ACCESS TO OR USE OF OR INABILITY TO ACCESS OR USE THE SERVICE. IN NO EVENT SHALL OUR AGGREGATE LIABILITY FOR ALL CLAIMS RELATING TO THE SERVICE EXCEED ONE HUNDRED POUNDS STERLING (Â£100).'})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"4. AI Content Disclaimer"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"The content and advice provided by the Service are generated by an AI and are for informational purposes only. They do not constitute professional advice. You should not rely on any information provided by the Service without seeking independent professional advice."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"5. Intellectual Property and Data License"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"You retain ownership of the data you provide to the Service. However, you grant us a worldwide, non-exclusive, royalty-free license to use, copy, reproduce, process, adapt, modify, publish, transmit, display and distribute your anonymized data for the purposes of providing and improving the Service."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"6. Indemnification"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"You agree to defend, indemnify, and hold harmless Ladderr.ai, its officers, directors, employees, and agents, from and against any claims, liabilities, damages, losses, and expenses, including, without limitation, reasonable legal and accounting fees, arising out of or in any way connected with your access to or use of the Service, or your violation of these Terms."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"7. Governing Law and Jurisdiction"}),x.jsx("p",{className:"text-slate-700 mb-4",children:"These Terms shall be governed by the laws of England and Wales, without respect to its conflict of laws principles. You agree to submit to the personal jurisdiction of the courts located in London, England for any actions for which we retain the right to seek injunctive or other equitable relief in a court of competent jurisdiction to prevent the actual or threatened infringement, misappropriation or violation of a our copyrights, trademarks, trade secrets, patents, or other intellectual property or proprietary rights, as set forth in the Arbitration provision below."})]}),x.jsxs("section",{className:"mb-8",children:[x.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"8. Contact"}),x.jsxs("p",{className:"text-slate-700",children:["For questions about these terms, please contact us through our"," ",x.jsx(ln,{to:"/contact",className:"text-indigo-600 hover:text-indigo-700 underline",children:"contact page"}),"."]})]})]})})]});var fw={};function aj(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var oj=Object.defineProperty,cj=(t,e,n)=>e in t?oj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hw=(t,e,n)=>cj(t,typeof e!="symbol"?e+"":e,n);let Ln=class{constructor(){hw(this,"_locking"),hw(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(r=>e=()=>{this._locks-=1,r()}),i=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),i}};function Gt(t,e){if(!t)throw new Error(e)}const lj=34028234663852886e22,uj=-34028234663852886e22,dj=4294967295,fj=2147483647,hj=-2147483648;function rf(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>fj||t<hj)throw new Error("invalid int 32: "+t)}function mv(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>dj||t<0)throw new Error("invalid uint 32: "+t)}function _R(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>lj||t<uj))throw new Error("invalid float 32: "+t)}const PR=Symbol("@bufbuild/protobuf/enum-type");function mj(t){const e=t[PR];return Gt(e,"missing enum type on enum object"),e}function DR(t,e,n,i){t[PR]=NR(e,n.map(r=>({no:r.no,name:r.name,localName:t[r.no]})))}function NR(t,e,n){const i=Object.create(null),r=Object.create(null),a=[];for(const c of e){const l=MR(c);a.push(l),i[c.name]=l,r[c.no]=l}return{typeName:t,values:a,findName(c){return i[c]},findNumber(c){return r[c]}}}function pj(t,e,n){const i={};for(const r of e){const a=MR(r);i[a.localName]=a.no,i[a.no]=a.localName}return DR(i,t,e),i}function MR(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class sy{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const i=this.getType(),r=i.runtime.bin,a=r.makeReadOptions(n);return r.readMessage(this,a.readerFactory(e),e.byteLength,a),this}fromJson(e,n){const i=this.getType(),r=i.runtime.json,a=r.makeReadOptions(n);return r.readMessage(i,e,a,this),this}fromJsonString(e,n){let i;try{i=JSON.parse(e)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(i,n)}toBinary(e){const n=this.getType(),i=n.runtime.bin,r=i.makeWriteOptions(e),a=r.writerFactory();return i.writeMessage(this,a,r),a.finish()}toJson(e){const n=this.getType(),i=n.runtime.json,r=i.makeWriteOptions(e);return i.writeMessage(this,r)}toJsonString(e){var n;const i=this.toJson(e);return JSON.stringify(i,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function gj(t,e,n,i){var r;const a=(r=i?.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),c={[a]:function(l){t.util.initFields(this),t.util.initPartial(l,this)}}[a];return Object.setPrototypeOf(c.prototype,new sy),Object.assign(c,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(l,d){return new c().fromBinary(l,d)},fromJson(l,d){return new c().fromJson(l,d)},fromJsonString(l,d){return new c().fromJsonString(l,d)},equals(l,d){return t.util.equals(c,l,d)}}),c}function vj(){let t=0,e=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function $p(t,e,n){for(let a=0;a<28;a=a+7){const c=t>>>a,l=!(!(c>>>7)&&e==0),d=(l?c|128:c)&255;if(n.push(d),!l)return}const i=t>>>28&15|(e&7)<<4,r=e>>3!=0;if(n.push((r?i|128:i)&255),!!r){for(let a=3;a<31;a=a+7){const c=e>>>a,l=!!(c>>>7),d=(l?c|128:c)&255;if(n.push(d),!l)return}n.push(e>>>31&1)}}const sf=4294967296;function mw(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let i=0,r=0;function a(c,l){const d=Number(t.slice(c,l));r*=n,i=i*n+d,i>=sf&&(r=r+(i/sf|0),i=i%sf)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),e?IR(i,r):ay(i,r)}function yj(t,e){let n=ay(t,e);const i=n.hi&2147483648;i&&(n=IR(n.lo,n.hi));const r=OR(n.lo,n.hi);return i?"-"+r:r}function OR(t,e){if({lo:t,hi:e}=bj(t,e),e<=2097151)return String(sf*e+t);const n=t&16777215,i=(t>>>24|e<<8)&16777215,r=e>>16&65535;let a=n+i*6777216+r*6710656,c=i+r*8147497,l=r*2;const d=1e7;return a>=d&&(c+=Math.floor(a/d),a%=d),c>=d&&(l+=Math.floor(c/d),c%=d),l.toString()+pw(c)+pw(a)}function bj(t,e){return{lo:t>>>0,hi:e>>>0}}function ay(t,e){return{lo:t|0,hi:e|0}}function IR(t,e){return e=~e,t?t=~t+1:e+=1,ay(t,e)}const pw=t=>{const e=String(t);return"0000000".slice(e.length)+e};function gw(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function Sj(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function Tj(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof fw!="object"||fw.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),c=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(d){const f=typeof d=="bigint"?d:BigInt(d);if(f>a||f<r)throw new Error("int64 invalid: ".concat(d));return f},uParse(d){const f=typeof d=="bigint"?d:BigInt(d);if(f>l||f<c)throw new Error("uint64 invalid: ".concat(d));return f},enc(d){return t.setBigInt64(0,this.parse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(d){return t.setBigInt64(0,this.uParse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(d,f){return t.setInt32(0,d,!0),t.setInt32(4,f,!0),t.getBigInt64(0,!0)},uDec(d,f){return t.setInt32(0,d,!0),t.setInt32(4,f,!0),t.getBigUint64(0,!0)}}}const n=r=>Gt(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),i=r=>Gt(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),mw(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),mw(r)},dec(r,a){return yj(r,a)},uDec(r,a){return OR(r,a)}}}const It=Tj();var xe;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(xe||(xe={}));var Os;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Os||(Os={}));function Ts(t,e,n){if(e===n)return!0;if(t==xe.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}switch(t){case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return e==n}return!1}function Qo(t,e){switch(t){case xe.BOOL:return!1;case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return e==0?It.zero:"0";case xe.DOUBLE:case xe.FLOAT:return 0;case xe.BYTES:return new Uint8Array(0);case xe.STRING:return"";default:return 0}}function UR(t,e){switch(t){case xe.BOOL:return e===!1;case xe.STRING:return e==="";case xe.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var tn;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(tn||(tn={}));class xj{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(mv(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return rf(e),gw(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){_R(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){mv(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){rf(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return rf(e),e=(e<<1^e>>31)>>>0,gw(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=It.enc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=It.uEnc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=It.enc(e);return $p(n.lo,n.hi,this.buf),this}sint64(e){let n=It.enc(e),i=n.hi>>31,r=n.lo<<1^i,a=(n.hi<<1|n.lo>>>31)^i;return $p(r,a,this.buf),this}uint64(e){let n=It.uEnc(e);return $p(n.lo,n.hi,this.buf),this}}class wj{constructor(e,n){this.varint64=vj,this.uint32=Sj,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,i=e&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(e,n){let i=this.pos;switch(e){case tn.Varint:for(;this.buf[this.pos++]&128;);break;case tn.Bit64:this.pos+=4;case tn.Bit32:this.pos+=4;break;case tn.LengthDelimited:let r=this.uint32();this.pos+=r;break;case tn.StartGroup:for(;;){const[a,c]=this.tag();if(c===tn.EndGroup){if(n!==void 0&&a!==n)throw new Error("invalid end group tag");break}this.skip(c,a)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return It.dec(...this.varint64())}uint64(){return It.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),i=-(e&1);return e=(e>>>1|(n&1)<<31)^i,n=n>>>1^i,It.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return It.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return It.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function Cj(t,e,n,i){let r;return{typeName:e,extendee:n,get field(){if(!r){const a=typeof i=="function"?i():i;a.name=e.split(".").pop(),a.jsonName="[".concat(e,"]"),r=t.util.newFieldList([a]).list()[0]}return r},runtime:t}}function LR(t){const e=t.field.localName,n=Object.create(null);return n[e]=Ej(t),[n,()=>n[e]]}function Ej(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Qo(e.T,e.L);case"message":const n=e.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function kj(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Lr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),nh=[];for(let t=0;t<Lr.length;t++)nh[Lr[t].charCodeAt(0)]=t;nh[45]=Lr.indexOf("+");nh[95]=Lr.indexOf("/");const jR={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),i=0,r=0,a,c=0;for(let l=0;l<t.length;l++){if(a=nh[t.charCodeAt(l)],a===void 0)switch(t[l]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:c=a,r=1;break;case 1:n[i++]=c<<2|(a&48)>>4,c=a,r=2;break;case 2:n[i++]=(c&15)<<4|(a&60)>>2,c=a,r=3;break;case 3:n[i++]=(c&3)<<6|a,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(t){let e="",n=0,i,r=0;for(let a=0;a<t.length;a++)switch(i=t[a],n){case 0:e+=Lr[i>>2],r=(i&3)<<4,n=1;break;case 1:e+=Lr[r|i>>4],r=(i&15)<<2,n=2;break;case 2:e+=Lr[r|i>>6],e+=Lr[i&63],n=0;break}return n&&(e+=Lr[r],e+="=",n==1&&(e+="=")),e}};function Rj(t,e,n){FR(e,t);const i=e.runtime.bin.makeReadOptions(n),r=kj(t.getType().runtime.bin.listUnknownFields(t),e.field),[a,c]=LR(e);for(const l of r)e.runtime.bin.readField(a,i.readerFactory(l.data),e.field,l.wireType,i);return c()}function Aj(t,e,n,i){FR(e,t);const r=e.runtime.bin.makeReadOptions(i),a=e.runtime.bin.makeWriteOptions(i);if(BR(t,e)){const f=t.getType().runtime.bin.listUnknownFields(t).filter(m=>m.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const m of f)t.getType().runtime.bin.onUnknownField(t,m.no,m.wireType,m.data)}const c=a.writerFactory();let l=e.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(l,n,c,a);const d=r.readerFactory(c.finish());for(;d.pos<d.len;){const[f,m]=d.tag(),p=d.skip(m,f);t.getType().runtime.bin.onUnknownField(t,f,m,p)}}function BR(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(i=>i.no==e.field.no)}function FR(t,e){Gt(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function VR(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!UR(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function vw(t,e){const n=t.localName,i=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=i?t.T.values[0].no:void 0;break;case"scalar":e[n]=i?Qo(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function jr(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(sy.prototype).every(i=>i in t&&typeof t[i]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function zR(t,e){return jr(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}xe.DOUBLE,xe.FLOAT,xe.INT64,xe.UINT64,xe.INT32,xe.UINT32,xe.BOOL,xe.STRING,xe.BYTES;const yw={ignoreUnknownFields:!1},bw={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function _j(t){return t?Object.assign(Object.assign({},yw),t):yw}function Pj(t){return t?Object.assign(Object.assign({},bw),t):bw}const _f=Symbol(),af=Symbol();function Dj(){return{makeReadOptions:_j,makeWriteOptions:Pj,readMessage(t,e,n,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(Qi(e)));i=i??new t;const r=new Map,a=n.typeRegistry;for(const[c,l]of Object.entries(e)){const d=t.fields.findJsonName(c);if(d){if(d.oneof){if(l===null&&d.kind=="scalar")continue;const f=r.get(d.oneof);if(f!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(d.oneof.name,'" present: "').concat(f,'", "').concat(c,'"'));r.set(d.oneof,c)}Sw(i,l,d,n,t)}else{let f=!1;if(a?.findExtension&&c.startsWith("[")&&c.endsWith("]")){const m=a.findExtension(c.substring(1,c.length-1));if(m&&m.extendee.typeName==t.typeName){f=!0;const[p,v]=LR(m);Sw(p,l,m.field,n,m),Aj(i,m,v(),n)}}if(!f&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(c,'" is unknown'))}}return i},writeMessage(t,e){const n=t.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!VR(r,t)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!Mj(r))continue}const c=r.oneof?t[r.oneof.localName].value:t[r.localName],l=Tw(r,c,e);l!==void 0&&(i[e.useProtoFieldName?r.name:r.jsonName]=l)}const a=e.typeRegistry;if(a?.findExtensionFor)for(const c of n.runtime.bin.listUnknownFields(t)){const l=a.findExtensionFor(n.typeName,c.no);if(l&&BR(t,l)){const d=Rj(t,l,e),f=Tw(l.field,d,e);f!==void 0&&(i[l.field.jsonName]=f)}}}catch(a){const c=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return i},readScalar(t,e,n){return Fl(t,e,n??Os.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||UR(t,e)))return of(t,e)},debug:Qi}}function Qi(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function Sw(t,e,n,i,r){let a=n.localName;if(n.repeated){if(Gt(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Qi(e)));const c=t[a];for(const l of e){if(l===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Qi(l)));switch(n.kind){case"message":c.push(n.T.fromJson(l,i));break;case"enum":const d=Wp(n.T,l,i.ignoreUnknownFields,!0);d!==af&&c.push(d);break;case"scalar":try{c.push(Fl(n.T,l,n.L,!0))}catch(f){let m="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Qi(l));throw f instanceof Error&&f.message.length>0&&(m+=": ".concat(f.message)),new Error(m)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Qi(e)));const c=t[a];for(const[l,d]of Object.entries(e)){if(d===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let f;try{f=Nj(n.K,l)}catch(m){let p="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Qi(e));throw m instanceof Error&&m.message.length>0&&(p+=": ".concat(m.message)),new Error(p)}switch(n.V.kind){case"message":c[f]=n.V.T.fromJson(d,i);break;case"enum":const m=Wp(n.V.T,d,i.ignoreUnknownFields,!0);m!==af&&(c[f]=m);break;case"scalar":try{c[f]=Fl(n.V.T,d,Os.BIGINT,!0)}catch(p){let v="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Qi(e));throw p instanceof Error&&p.message.length>0&&(v+=": ".concat(p.message)),new Error(v)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:a},a="value"),n.kind){case"message":const c=n.T;if(e===null&&c.typeName!="google.protobuf.Value")return;let l=t[a];jr(l)?l.fromJson(e,i):(t[a]=l=c.fromJson(e,i),c.fieldWrapper&&!n.oneof&&(t[a]=c.fieldWrapper.unwrapField(l)));break;case"enum":const d=Wp(n.T,e,i.ignoreUnknownFields,!1);switch(d){case _f:vw(n,t);break;case af:break;default:t[a]=d;break}break;case"scalar":try{const f=Fl(n.T,e,n.L,!1);switch(f){case _f:vw(n,t);break;default:t[a]=f;break}}catch(f){let m="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Qi(e));throw f instanceof Error&&f.message.length>0&&(m+=": ".concat(f.message)),new Error(m)}break}}function Nj(t,e){if(t===xe.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Fl(t,e,Os.BIGINT,!0).toString()}function Fl(t,e,n,i){if(e===null)return i?Qo(t,n):_f;switch(t){case xe.DOUBLE:case xe.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==xe.FLOAT&&_R(r),r;case xe.INT32:case xe.FIXED32:case xe.SFIXED32:case xe.SINT32:case xe.UINT32:let a;if(typeof e=="number"?a=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(a=Number(e)),a===void 0)break;return t==xe.UINT32||t==xe.FIXED32?mv(a):rf(a),a;case xe.INT64:case xe.SFIXED64:case xe.SINT64:if(typeof e!="number"&&typeof e!="string")break;const c=It.parse(e);return n?c.toString():c;case xe.FIXED64:case xe.UINT64:if(typeof e!="number"&&typeof e!="string")break;const l=It.uParse(e);return n?l.toString():l;case xe.BOOL:if(typeof e!="boolean")break;return e;case xe.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case xe.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return jR.dec(e)}throw new Error}function Wp(t,e,n,i){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:i?t.values[0].no:_f;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r!==void 0)return r.no;if(n)return af;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Qi(e)))}function Mj(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function Tw(t,e,n){if(t.kind=="map"){Gt(typeof e=="object"&&e!=null);const i={},r=Object.entries(e);switch(t.V.kind){case"scalar":for(const[c,l]of r)i[c.toString()]=of(t.V.T,l);break;case"message":for(const[c,l]of r)i[c.toString()]=l.toJson(n);break;case"enum":const a=t.V.T;for(const[c,l]of r)i[c.toString()]=Xp(a,l,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?i:void 0}if(t.repeated){Gt(Array.isArray(e));const i=[];switch(t.kind){case"scalar":for(let r=0;r<e.length;r++)i.push(of(t.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)i.push(Xp(t.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)i.push(e[r].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(t.kind){case"scalar":return of(t.T,e);case"enum":return Xp(t.T,e,n.enumAsInteger);case"message":return zR(t.T,e).toJson(n)}}function Xp(t,e,n){var i;if(Gt(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=t.findNumber(e);return(i=r?.name)!==null&&i!==void 0?i:e}function of(t,e){switch(t){case xe.INT32:case xe.SFIXED32:case xe.SINT32:case xe.FIXED32:case xe.UINT32:return Gt(typeof e=="number"),e;case xe.FLOAT:case xe.DOUBLE:return Gt(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case xe.STRING:return Gt(typeof e=="string"),e;case xe.BOOL:return Gt(typeof e=="boolean"),e;case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return Gt(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case xe.BYTES:return Gt(e instanceof Uint8Array),jR.enc(e)}}const wo=Symbol("@bufbuild/protobuf/unknown-fields"),xw={readUnknownFields:!0,readerFactory:t=>new wj(t)},ww={writeUnknownFields:!0,writerFactory:()=>new xj};function Oj(t){return t?Object.assign(Object.assign({},xw),t):xw}function Ij(t){return t?Object.assign(Object.assign({},ww),t):ww}function Uj(){return{makeReadOptions:Oj,makeWriteOptions:Ij,listUnknownFields(t){var e;return(e=t[wo])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[wo]},writeUnknownFields(t,e){const i=t[wo];if(i)for(const r of i)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(t,e,n,i){const r=t;Array.isArray(r[wo])||(r[wo]=[]),r[wo].push({no:e,wireType:n,data:i})},readMessage(t,e,n,i,r){const a=t.getType(),c=r?e.len:e.pos+n;let l,d;for(;e.pos<c&&([l,d]=e.tag(),!(r===!0&&d==tn.EndGroup));){const f=a.fields.find(l);if(!f){const m=e.skip(d,l);i.readUnknownFields&&this.onUnknownField(t,l,d,m);continue}Cw(t,e,f,d,i)}if(r&&(d!=tn.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:Cw,writeMessage(t,e,n){const i=t.getType();for(const r of i.fields.byNumber()){if(!VR(r,t)){if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));continue}const a=r.oneof?t[r.oneof.localName].value:t[r.localName];Ew(r,a,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,i){e!==void 0&&Ew(t,e,n,i)}}}function Cw(t,e,n,i,r){let{repeated:a,localName:c}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=c&&delete t.value,t.case=c,c="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?xe.INT32:n.T;let d=Pf;if(n.kind=="scalar"&&n.L>0&&(d=jj),a){let v=t[c];if(i==tn.LengthDelimited&&l!=xe.STRING&&l!=xe.BYTES){let w=e.uint32()+e.pos;for(;e.pos<w;)v.push(d(e,l))}else v.push(d(e,l))}else t[c]=d(e,l);break;case"message":const f=n.T;a?t[c].push(cf(e,new f,r,n)):jr(t[c])?cf(e,t[c],r,n):(t[c]=cf(e,new f,r,n),f.fieldWrapper&&!n.oneof&&!n.repeated&&(t[c]=f.fieldWrapper.unwrapField(t[c])));break;case"map":let[m,p]=Lj(n,e,r);t[c][m]=p;break}}function cf(t,e,n,i){const r=e.getType().runtime.bin,a=i?.delimited;return r.readMessage(e,t,a?i.no:t.uint32(),n,a),e}function Lj(t,e,n){const i=e.uint32(),r=e.pos+i;let a,c;for(;e.pos<r;){const[l]=e.tag();switch(l){case 1:a=Pf(e,t.K);break;case 2:switch(t.V.kind){case"scalar":c=Pf(e,t.V.T);break;case"enum":c=e.int32();break;case"message":c=cf(e,new t.V.T,n,void 0);break}break}}if(a===void 0&&(a=Qo(t.K,Os.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),c===void 0)switch(t.V.kind){case"scalar":c=Qo(t.V.T,Os.BIGINT);break;case"enum":c=t.V.T.values[0].no;break;case"message":c=new t.V.T;break}return[a,c]}function jj(t,e){const n=Pf(t,e);return typeof n=="bigint"?n.toString():n}function Pf(t,e){switch(e){case xe.STRING:return t.string();case xe.BOOL:return t.bool();case xe.DOUBLE:return t.double();case xe.FLOAT:return t.float();case xe.INT32:return t.int32();case xe.INT64:return t.int64();case xe.UINT64:return t.uint64();case xe.FIXED64:return t.fixed64();case xe.BYTES:return t.bytes();case xe.FIXED32:return t.fixed32();case xe.SFIXED32:return t.sfixed32();case xe.SFIXED64:return t.sfixed64();case xe.SINT64:return t.sint64();case xe.UINT32:return t.uint32();case xe.SINT32:return t.sint32()}}function Ew(t,e,n,i){Gt(e!==void 0);const r=t.repeated;switch(t.kind){case"scalar":case"enum":let a=t.kind=="enum"?xe.INT32:t.T;if(r)if(Gt(Array.isArray(e)),t.packed)Fj(n,a,t.no,e);else for(const c of e)Vl(n,a,t.no,c);else Vl(n,a,t.no,e);break;case"message":if(r){Gt(Array.isArray(e));for(const c of e)kw(n,i,t,c)}else kw(n,i,t,e);break;case"map":Gt(typeof e=="object"&&e!=null);for(const[c,l]of Object.entries(e))Bj(n,i,t,c,l);break}}function Bj(t,e,n,i,r){t.tag(n.no,tn.LengthDelimited),t.fork();let a=i;switch(n.K){case xe.INT32:case xe.FIXED32:case xe.UINT32:case xe.SFIXED32:case xe.SINT32:a=Number.parseInt(i);break;case xe.BOOL:Gt(i=="true"||i=="false"),a=i=="true";break}switch(Vl(t,n.K,1,a),n.V.kind){case"scalar":Vl(t,n.V.T,2,r);break;case"enum":Vl(t,xe.INT32,2,r);break;case"message":Gt(r!==void 0),t.tag(2,tn.LengthDelimited).bytes(r.toBinary(e));break}t.join()}function kw(t,e,n,i){const r=zR(n.T,i);n.delimited?t.tag(n.no,tn.StartGroup).raw(r.toBinary(e)).tag(n.no,tn.EndGroup):t.tag(n.no,tn.LengthDelimited).bytes(r.toBinary(e))}function Vl(t,e,n,i){Gt(i!==void 0);let[r,a]=HR(e);t.tag(n,r)[a](i)}function Fj(t,e,n,i){if(!i.length)return;t.tag(n,tn.LengthDelimited).fork();let[,r]=HR(e);for(let a=0;a<i.length;a++)t[r](i[a]);t.join()}function HR(t){let e=tn.Varint;switch(t){case xe.BYTES:case xe.STRING:e=tn.LengthDelimited;break;case xe.DOUBLE:case xe.FIXED64:case xe.SFIXED64:e=tn.Bit64;break;case xe.FIXED32:case xe.SFIXED32:case xe.FLOAT:e=tn.Bit32;break}const n=xe[t].toLowerCase();return[e,n]}function Vj(){return{setEnumType:DR,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const i of n.fields.byMember()){const r=i.localName,a=e,c=t;if(c[r]!=null)switch(i.kind){case"oneof":const l=c[r].case;if(l===void 0)continue;const d=i.findField(l);let f=c[r].value;d&&d.kind=="message"&&!jr(f,d.T)?f=new d.T(f):d&&d.kind==="scalar"&&d.T===xe.BYTES&&(f=Cl(f)),a[r]={case:l,value:f};break;case"scalar":case"enum":let m=c[r];i.T===xe.BYTES&&(m=i.repeated?m.map(Cl):Cl(m)),a[r]=m;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===xe.BYTES)for(const[b,w]of Object.entries(c[r]))a[r][b]=Cl(w);else Object.assign(a[r],c[r]);break;case"message":const v=i.V.T;for(const b of Object.keys(c[r])){let w=c[r][b];v.fieldWrapper||(w=new v(w)),a[r][b]=w}break}break;case"message":const p=i.T;if(i.repeated)a[r]=c[r].map(v=>jr(v,p)?v:new p(v));else{const v=c[r];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?a[r]=Cl(v):a[r]=v:a[r]=jr(v,p)?v:new p(v)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(i=>{const r=e[i.localName],a=n[i.localName];if(i.repeated){if(r.length!==a.length)return!1;switch(i.kind){case"message":return r.every((c,l)=>i.T.equals(c,a[l]));case"scalar":return r.every((c,l)=>Ts(i.T,c,a[l]));case"enum":return r.every((c,l)=>Ts(xe.INT32,c,a[l]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let c=r,l=a;return i.T.fieldWrapper&&(c!==void 0&&!jr(c)&&(c=i.T.fieldWrapper.wrapField(c)),l!==void 0&&!jr(l)&&(l=i.T.fieldWrapper.wrapField(l))),i.T.equals(c,l);case"enum":return Ts(xe.INT32,r,a);case"scalar":return Ts(i.T,r,a);case"oneof":if(r.case!==a.case)return!1;const d=i.findField(r.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(r.value,a.value);case"enum":return Ts(xe.INT32,r.value,a.value);case"scalar":return Ts(d.T,r.value,a.value)}throw new Error("oneof cannot contain ".concat(d.kind));case"map":const f=Object.keys(r).concat(Object.keys(a));switch(i.V.kind){case"message":const m=i.V.T;return f.every(v=>m.equals(r[v],a[v]));case"enum":return f.every(v=>Ts(xe.INT32,r[v],a[v]));case"scalar":const p=i.V.T;return f.every(v=>Ts(p,r[v],a[v]))}break}})},clone(t){const e=t.getType(),n=new e,i=n;for(const r of e.fields.byMember()){const a=t[r.localName];let c;if(r.repeated)c=a.map(Ld);else if(r.kind=="map"){c=i[r.localName];for(const[l,d]of Object.entries(a))c[l]=Ld(d)}else r.kind=="oneof"?c=r.findField(a.case)?{case:a.case,value:Ld(a.value)}:{case:void 0}:c=Ld(a);i[r.localName]=c}for(const r of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}}function Ld(t){if(t===void 0)return t;if(jr(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Cl(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function zj(t,e,n){return{syntax:t,json:Dj(),bin:Uj(),util:Object.assign(Object.assign({},Vj()),{newFieldList:e,initFields:n}),makeMessageType(i,r,a){return gj(this,i,r,a)},makeEnum:pj,makeEnumType:NR,getEnumType:mj,makeExtension(i,r,a){return Cj(this,i,r,a)}}}class Hj{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,e.push(n)):e.push(i)}return this.members}}function qR(t,e){const n=GR(t);return e?n:Wj($j(n))}function qj(t){return qR(t,!1)}const Gj=GR;function GR(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let r=t.charAt(i);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const Kj=new Set(["constructor","toString","toJSON","valueOf"]),Yj=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),KR=t=>"".concat(t,"$"),$j=t=>Yj.has(t)?KR(t):t,Wj=t=>Kj.has(t)?KR(t):t;class Xj{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=qj(e)}addField(e){Gt(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function Zj(t,e){var n,i,r,a,c,l;const d=[];let f;for(const m of typeof t=="function"?t():t){const p=m;if(p.localName=qR(m.name,m.oneof!==void 0),p.jsonName=(n=m.jsonName)!==null&&n!==void 0?n:Gj(m.name),p.repeated=(i=m.repeated)!==null&&i!==void 0?i:!1,m.kind=="scalar"&&(p.L=(r=m.L)!==null&&r!==void 0?r:Os.BIGINT),p.delimited=(a=m.delimited)!==null&&a!==void 0?a:!1,p.req=(c=m.req)!==null&&c!==void 0?c:!1,p.opt=(l=m.opt)!==null&&l!==void 0?l:!1,m.packed===void 0&&(p.packed=m.kind=="enum"||m.kind=="scalar"&&m.T!=xe.BYTES&&m.T!=xe.STRING),m.oneof!==void 0){const v=typeof m.oneof=="string"?m.oneof:m.oneof.name;(!f||f.name!=v)&&(f=new Xj(v)),p.oneof=f,f.addField(p)}d.push(p)}return d}const ue=zj("proto3",t=>new Hj(t,e=>Zj(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,i=t;if(e.repeated){i[n]=[];continue}switch(e.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Qo(e.T,e.L);break}}});class Kn extends sy{constructor(e){super(),this.seconds=It.zero,this.nanos=0,ue.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(ue.json.debug(e)));const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=It.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Kn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new Kn({seconds:It.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new Kn().fromBinary(e,n)}static fromJson(e,n){return new Kn().fromJson(e,n)}static fromJsonString(e,n){return new Kn().fromJsonString(e,n)}static equals(e,n){return ue.util.equals(Kn,e,n)}}Kn.runtime=ue;Kn.typeName="google.protobuf.Timestamp";Kn.fields=ue.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const Jj=ue.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Kn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:Qj,repeated:!0},{no:5,name:"events",kind:"message",T:t5,repeated:!0}]),Qj=ue.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:e5,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),e5=ue.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:Kn},{no:3,name:"value",kind:"scalar",T:2}]),t5=ue.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:Kn},{no:7,name:"normalized_end_timestamp",kind:"message",T:Kn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),YR=ue.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Li=ue.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),cn=ue.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),oy=ue.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Ol=ue.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Zl=ue.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Bi=ue.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),Co=ue.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),n5=ue.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),xn=ue.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),ih=ue.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Df,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:aA}]),Df=ue.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),i5=ue.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ue.getEnumType(cn),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),wa=ue.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ue.getEnumType(Vo)},{no:4,name:"tracks",kind:"message",T:No,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:i5},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ue.getEnumType(Ca)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ue.getEnumType(Bi)},{no:18,name:"kind_details",kind:"enum",T:ue.getEnumType(r5),repeated:!0}]),Vo=ue.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),Ca=ue.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),r5=ue.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),si=ue.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),s5=ue.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ba,repeated:!0}]),No=ue.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ue.getEnumType(Li)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ue.getEnumType(cn)},{no:10,name:"layers",kind:"message",T:ba,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:s5,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ue.getEnumType(si)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:aA},{no:19,name:"audio_features",kind:"enum",T:ue.getEnumType(xn),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ue.getEnumType(YR)}]),ba=ue.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:ue.getEnumType(oy)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),qn=ue.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:ue.getEnumType(tt)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:WR,oneof:"value"},{no:3,name:"speaker",kind:"message",T:a5,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:XR,oneof:"value"},{no:7,name:"transcription",kind:"message",T:o5,oneof:"value"},{no:8,name:"metrics",kind:"message",T:Jj,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:pv,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:ZR,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:JR,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:QR,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:vv,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:yv,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:bv,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),tt=ue.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),a5=ue.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:$R,repeated:!0}]),$R=ue.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),WR=ue.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),XR=ue.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),o5=ue.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:c5,repeated:!0}]),c5=ue.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),pv=ue.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),ZR=ue.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),JR=ue.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),QR=ue.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:eA,oneof:"value"}]),eA=ue.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),tA=ue.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),nA=ue.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:ue.getEnumType(iA)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),iA=ue.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),l5=ue.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:ue.getEnumType(rA)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),rA=ue.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),sA=ue.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:Rw},{no:2,name:"screen",kind:"message",T:Rw},{no:3,name:"resume_connection",kind:"enum",T:ue.getEnumType(Zl)},{no:4,name:"disabled_codecs",kind:"message",T:u5},{no:5,name:"force_relay",kind:"enum",T:ue.getEnumType(Zl)}]),Rw=ue.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ue.getEnumType(Zl)}]),u5=ue.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Df,repeated:!0},{no:2,name:"publish",kind:"message",T:Df,repeated:!0}]),aA=ue.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),gv=ue.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),oA=ue.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ue.getEnumType(gv)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),cA=ue.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),vv=ue.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ue.getEnumType(si)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:oA,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:cA,oneof:"content_header"}],{localName:"DataStream_Header"}),yv=ue.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),bv=ue.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),ji=ue.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),Sv=ue.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),d5=ue.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),f5=ue.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Ea,oneof:"message"},{no:2,name:"answer",kind:"message",T:Ea,oneof:"message"},{no:3,name:"trickle",kind:"message",T:cy,oneof:"message"},{no:4,name:"add_track",kind:"message",T:xv,oneof:"message"},{no:5,name:"mute",kind:"message",T:ly,oneof:"message"},{no:6,name:"subscription",kind:"message",T:rh,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:lA,oneof:"message"},{no:8,name:"leave",kind:"message",T:sh,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:dA,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:pA,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:gA,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Ji,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:fA,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:bA,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:uA,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:v5,oneof:"message"}]),Aw=ue.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:h5,oneof:"message"},{no:2,name:"answer",kind:"message",T:Ea,oneof:"message"},{no:3,name:"offer",kind:"message",T:Ea,oneof:"message"},{no:4,name:"trickle",kind:"message",T:cy,oneof:"message"},{no:5,name:"update",kind:"message",T:g5,oneof:"message"},{no:6,name:"track_published",kind:"message",T:uy,oneof:"message"},{no:8,name:"leave",kind:"message",T:sh,oneof:"message"},{no:9,name:"mute",kind:"message",T:ly,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:y5,oneof:"message"},{no:11,name:"room_update",kind:"message",T:b5,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:T5,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:w5,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:E5,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:k5,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:p5,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:m5,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:A5,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:D5,oneof:"message"},{no:22,name:"request_response",kind:"message",T:N5,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:M5,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:R5,oneof:"message"}]),Tv=ue.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),xv=ue.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ue.getEnumType(Li)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ue.getEnumType(cn)},{no:9,name:"layers",kind:"message",T:ba,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Tv,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ue.getEnumType(si)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ue.getEnumType(YR)},{no:17,name:"audio_features",kind:"enum",T:ue.getEnumType(xn),repeated:!0}]),cy=ue.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ue.getEnumType(ji)},{no:3,name:"final",kind:"scalar",T:8}]),ly=ue.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),h5=ue.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:ih},{no:2,name:"participant",kind:"message",T:wa},{no:3,name:"other_participants",kind:"message",T:wa,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:hA,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:sA},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:nA},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Df,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),m5=ue.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:hA,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:sA},{no:3,name:"server_info",kind:"message",T:nA},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),uy=ue.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:No}]),p5=ue.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Ea=ue.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),g5=ue.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:wa,repeated:!0}]),rh=ue.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:tA,repeated:!0}]),lA=ue.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ue.getEnumType(oy)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),uA=ue.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ue.getEnumType(xn),repeated:!0}]),v5=ue.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),sh=ue.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ue.getEnumType(Bi)},{no:3,name:"action",kind:"enum",T:ue.getEnumType(zo)},{no:4,name:"regions",kind:"message",T:_5}]),zo=ue.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),dA=ue.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:ba,repeated:!0}]),fA=ue.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),hA=ue.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),y5=ue.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:$R,repeated:!0}]),b5=ue.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:ih}]),S5=ue.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ue.getEnumType(Ol)},{no:3,name:"score",kind:"scalar",T:2}]),T5=ue.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:S5,repeated:!0}]),x5=ue.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ue.getEnumType(Sv)}]),w5=ue.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:x5,repeated:!0}]),dy=ue.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:ue.getEnumType(oy)},{no:2,name:"enabled",kind:"scalar",T:8}]),C5=ue.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:dy,repeated:!0}]),E5=ue.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:dy,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:C5,repeated:!0}]),mA=ue.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),pA=ue.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:mA,repeated:!0}]),k5=ue.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),R5=ue.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:ih},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:wa},{no:4,name:"other_participants",kind:"message",T:wa,repeated:!0}]),gA=ue.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Ea},{no:2,name:"subscription",kind:"message",T:rh},{no:3,name:"publish_tracks",kind:"message",T:uy,repeated:!0},{no:4,name:"data_channels",kind:"message",T:yA,repeated:!0},{no:5,name:"offer",kind:"message",T:Ea},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:vA,repeated:!0}]),vA=ue.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),yA=ue.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ue.getEnumType(ji)}]),Ji=ue.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ue.getEnumType(d5),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),bA=ue.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),A5=ue.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),_5=ue.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:P5,repeated:!0}]),P5=ue.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),D5=ue.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ue.getEnumType(n5)}]),N5=ue.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:ue.getEnumType(fy)},{no:3,name:"message",kind:"scalar",T:9}]),fy=ue.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),M5=ue.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function O5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lf={exports:{}},I5=lf.exports,_w;function U5(){return _w||(_w=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(I5,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],a={},c=null;function l(S,R){var E=S[R];if(typeof E.bind=="function")return E.bind(S);try{return Function.prototype.bind.call(E,S)}catch{return function(){return Function.prototype.apply.apply(E,[S,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(S){return S==="debug"&&(S="log"),typeof console===n?!1:S==="trace"&&i?d:console[S]!==void 0?l(console,S):console.log!==void 0?l(console,"log"):e}function m(){for(var S=this.getLevel(),R=0;R<r.length;R++){var E=r[R];this[E]=R<S?e:this.methodFactory(E,S,this.name)}if(this.log=this.debug,typeof console===n&&S<this.levels.SILENT)return"No console available for logging"}function p(S){return function(){typeof console!==n&&(m.call(this),this[S].apply(this,arguments))}}function v(S,R,E){return f(S)||p.apply(this,arguments)}function b(S,R){var E=this,N,M,I,A="loglevel";typeof S=="string"?A+=":"+S:typeof S=="symbol"&&(A=void 0);function L(se){var fe=(r[se]||"silent").toUpperCase();if(!(typeof window===n||!A)){try{window.localStorage[A]=fe;return}catch{}try{window.document.cookie=encodeURIComponent(A)+"="+fe+";"}catch{}}}function z(){var se;if(!(typeof window===n||!A)){try{se=window.localStorage[A]}catch{}if(typeof se===n)try{var fe=window.document.cookie,Ee=encodeURIComponent(A),Ae=fe.indexOf(Ee+"=");Ae!==-1&&(se=/^([^;]+)/.exec(fe.slice(Ae+Ee.length+1))[1])}catch{}return E.levels[se]===void 0&&(se=void 0),se}}function H(){if(!(typeof window===n||!A)){try{window.localStorage.removeItem(A)}catch{}try{window.document.cookie=encodeURIComponent(A)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function W(se){var fe=se;if(typeof fe=="string"&&E.levels[fe.toUpperCase()]!==void 0&&(fe=E.levels[fe.toUpperCase()]),typeof fe=="number"&&fe>=0&&fe<=E.levels.SILENT)return fe;throw new TypeError("log.setLevel() called with invalid level: "+se)}E.name=S,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=R||v,E.getLevel=function(){return I??M??N},E.setLevel=function(se,fe){return I=W(se),fe!==!1&&L(I),m.call(E)},E.setDefaultLevel=function(se){M=W(se),z()||E.setLevel(se,!1)},E.resetLevel=function(){I=null,H(),m.call(E)},E.enableAll=function(se){E.setLevel(E.levels.TRACE,se)},E.disableAll=function(se){E.setLevel(E.levels.SILENT,se)},E.rebuild=function(){if(c!==E&&(N=W(c.getLevel())),m.call(E),c===E)for(var se in a)a[se].rebuild()},N=W(c?c.getLevel():"WARN");var re=z();re!=null&&(I=W(re)),m.call(E)}c=new b,c.getLogger=function(R){if(typeof R!="symbol"&&typeof R!="string"||R==="")throw new TypeError("You must supply a name when creating a logger.");var E=a[R];return E||(E=a[R]=new b(R,c.methodFactory)),E};var w=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=w),c},c.getLoggers=function(){return a},c.default=c,c})}(lf)),lf.exports}var ah=U5(),wv;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(wv||(wv={}));var Fi;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Fi||(Fi={}));let ot=ah.getLogger("livekit");Object.values(Fi).map(t=>ah.getLogger(t));ot.setDefaultLevel(wv.info);function Hr(t){const e=ah.getLogger(t);return e.setDefaultLevel(ot.getLevel()),e}const L5=ah.getLogger("lk-e2ee"),El=7e3,j5=[0,300,4*300,9*300,16*300,El,El,El,El,El];class B5{constructor(e){this._retryDelays=e!==void 0?[...e]:j5}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function F5(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function G(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,e||[])).next())})}function Pw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Br(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Pw=="function"?Pw(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}var jd={exports:{}},Dw;function V5(){if(Dw)return jd.exports;Dw=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(A,L,z){return Function.prototype.apply.call(A,L,z)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:n=function(A){return Object.getOwnPropertyNames(A)};function i(I){console&&console.warn&&console.warn(I)}var r=Number.isNaN||function(A){return A!==A};function a(){a.init.call(this)}jd.exports=a,jd.exports.once=E,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(I){if(typeof I!="number"||I<0||r(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");c=I}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||r(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function d(I){return I._maxListeners===void 0?a.defaultMaxListeners:I._maxListeners}a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(A){for(var L=[],z=1;z<arguments.length;z++)L.push(arguments[z]);var H=A==="error",W=this._events;if(W!==void 0)H=H&&W.error===void 0;else if(!H)return!1;if(H){var re;if(L.length>0&&(re=L[0]),re instanceof Error)throw re;var se=new Error("Unhandled error."+(re?" ("+re.message+")":""));throw se.context=re,se}var fe=W[A];if(fe===void 0)return!1;if(typeof fe=="function")e(fe,this,L);else for(var Ee=fe.length,Ae=w(fe,Ee),z=0;z<Ee;++z)e(Ae[z],this,L);return!0};function f(I,A,L,z){var H,W,re;if(l(L),W=I._events,W===void 0?(W=I._events=Object.create(null),I._eventsCount=0):(W.newListener!==void 0&&(I.emit("newListener",A,L.listener?L.listener:L),W=I._events),re=W[A]),re===void 0)re=W[A]=L,++I._eventsCount;else if(typeof re=="function"?re=W[A]=z?[L,re]:[re,L]:z?re.unshift(L):re.push(L),H=d(I),H>0&&re.length>H&&!re.warned){re.warned=!0;var se=new Error("Possible EventEmitter memory leak detected. "+re.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");se.name="MaxListenersExceededWarning",se.emitter=I,se.type=A,se.count=re.length,i(se)}return I}a.prototype.addListener=function(A,L){return f(this,A,L,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(A,L){return f(this,A,L,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(I,A,L){var z={fired:!1,wrapFn:void 0,target:I,type:A,listener:L},H=m.bind(z);return H.listener=L,z.wrapFn=H,H}a.prototype.once=function(A,L){return l(L),this.on(A,p(this,A,L)),this},a.prototype.prependOnceListener=function(A,L){return l(L),this.prependListener(A,p(this,A,L)),this},a.prototype.removeListener=function(A,L){var z,H,W,re,se;if(l(L),H=this._events,H===void 0)return this;if(z=H[A],z===void 0)return this;if(z===L||z.listener===L)--this._eventsCount===0?this._events=Object.create(null):(delete H[A],H.removeListener&&this.emit("removeListener",A,z.listener||L));else if(typeof z!="function"){for(W=-1,re=z.length-1;re>=0;re--)if(z[re]===L||z[re].listener===L){se=z[re].listener,W=re;break}if(W<0)return this;W===0?z.shift():S(z,W),z.length===1&&(H[A]=z[0]),H.removeListener!==void 0&&this.emit("removeListener",A,se||L)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(A){var L,z,H;if(z=this._events,z===void 0)return this;if(z.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):z[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete z[A]),this;if(arguments.length===0){var W=Object.keys(z),re;for(H=0;H<W.length;++H)re=W[H],re!=="removeListener"&&this.removeAllListeners(re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(L=z[A],typeof L=="function")this.removeListener(A,L);else if(L!==void 0)for(H=L.length-1;H>=0;H--)this.removeListener(A,L[H]);return this};function v(I,A,L){var z=I._events;if(z===void 0)return[];var H=z[A];return H===void 0?[]:typeof H=="function"?L?[H.listener||H]:[H]:L?R(H):w(H,H.length)}a.prototype.listeners=function(A){return v(this,A,!0)},a.prototype.rawListeners=function(A){return v(this,A,!1)},a.listenerCount=function(I,A){return typeof I.listenerCount=="function"?I.listenerCount(A):b.call(I,A)},a.prototype.listenerCount=b;function b(I){var A=this._events;if(A!==void 0){var L=A[I];if(typeof L=="function")return 1;if(L!==void 0)return L.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(I,A){for(var L=new Array(A),z=0;z<A;++z)L[z]=I[z];return L}function S(I,A){for(;A+1<I.length;A++)I[A]=I[A+1];I.pop()}function R(I){for(var A=new Array(I.length),L=0;L<A.length;++L)A[L]=I[L].listener||I[L];return A}function E(I,A){return new Promise(function(L,z){function H(re){I.removeListener(A,W),z(re)}function W(){typeof I.removeListener=="function"&&I.removeListener("error",H),L([].slice.call(arguments))}M(I,A,W,{once:!0}),A!=="error"&&N(I,H,{once:!0})})}function N(I,A,L){typeof I.on=="function"&&M(I,"error",A,L)}function M(I,A,L,z){if(typeof I.on=="function")z.once?I.once(A,L):I.on(A,L);else if(typeof I.addEventListener=="function")I.addEventListener(A,function H(W){z.once&&I.removeEventListener(A,H),L(W)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return jd.exports}var hr=V5();let SA=!0,TA=!0;function Il(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseFloat(i[n],10)}function Da(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(c,l){if(c!==e)return r.apply(this,arguments);const d=f=>{const m=n(f);m&&(l.handleEvent?l.handleEvent(m):l(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,d),r.apply(this,[c,d])};const a=i.removeEventListener;i.removeEventListener=function(c,l){if(c!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(l))return a.apply(this,arguments);const d=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[c,d])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function z5(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(SA=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function H5(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(TA=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function xA(){if(typeof window=="object"){if(SA)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function hy(t,e){TA&&console.warn(t+" is deprecated, please use "+e+" instead.")}function q5(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Il(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Il(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Il(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Il(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Nw(t){return Object.prototype.toString.call(t)==="[object Object]"}function wA(t){return Nw(t)?Object.keys(t).reduce(function(e,n){const i=Nw(t[n]),r=i?wA(t[n]):t[n],a=i&&!Object.keys(r).length;return r===void 0||a?e:Object.assign(e,{[n]:r})},{}):t}function Cv(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?Cv(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(r=>{Cv(t,t.get(r),n)})}))}function Mw(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const a=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&a.push(c)}),a.forEach(c=>{t.forEach(l=>{l.type===i&&l.trackId===c.id&&Cv(t,l,r)})}),r}const Ow=xA;function CA(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const d={};return Object.keys(l).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const m=typeof l[f]=="object"?l[f]:{ideal:l[f]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const p=function(v,b){return v?v+b.charAt(0).toUpperCase()+b.slice(1):b==="deviceId"?"sourceId":b};if(m.ideal!==void 0){d.optional=d.optional||[];let v={};typeof m.ideal=="number"?(v[p("min",f)]=m.ideal,d.optional.push(v),v={},v[p("max",f)]=m.ideal,d.optional.push(v)):(v[p("",f)]=m.ideal,d.optional.push(v))}m.exact!==void 0&&typeof m.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[p("",f)]=m.exact):["min","max"].forEach(v=>{m[v]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[p(v,f)]=m[v])})}),l.advanced&&(d.optional=(d.optional||[]).concat(l.advanced)),d},r=function(l,d){if(e.version>=61)return d(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const f=function(m,p,v){p in m&&!(v in m)&&(m[v]=m[p],delete m[p])};l=JSON.parse(JSON.stringify(l)),f(l.audio,"autoGainControl","googAutoGainControl"),f(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=i(l.audio)}if(l&&typeof l.video=="object"){let f=l.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const m=e.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete l.video.facingMode;let p;if(f.exact==="environment"||f.ideal==="environment"?p=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(p=["front"]),p)return n.mediaDevices.enumerateDevices().then(v=>{v=v.filter(w=>w.kind==="videoinput");let b=v.find(w=>p.some(S=>w.label.toLowerCase().includes(S)));return!b&&v.length&&p.includes("back")&&(b=v[v.length-1]),b&&(l.video.deviceId=f.exact?{exact:b.deviceId}:{ideal:b.deviceId}),l.video=i(l.video),Ow("chrome: "+JSON.stringify(l)),d(l)})}l.video=i(l.video)}return Ow("chrome: "+JSON.stringify(l)),d(l)},a=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(l,d,f){r(l,m=>{n.webkitGetUserMedia(m,d,p=>{f&&f(a(p))})})};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return r(d,f=>l(f).then(m=>{if(f.audio&&!m.getAudioTracks().length||f.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(a(m))))}}}function EA(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function kA(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===r.track.id):a={track:r.track};const c=new Event("track");c.track=r.track,c.receiver=a,c.transceiver={receiver:a},c.streams=[i.stream],this.dispatchEvent(c)}),i.stream.getTracks().forEach(r=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===r.id):a={track:r};const c=new Event("track");c.track=r,c.receiver=a,c.transceiver={receiver:a},c.streams=[i.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Da(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function RA(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(r,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=r.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:r}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,d){let f=r.apply(this,arguments);return f||(f=e(this,l),this._senders.push(f)),f};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const d=this._senders.indexOf(l);d!==-1&&this._senders.splice(d,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],i.apply(this,[a]),a.getTracks().forEach(c=>{const l=this._senders.find(d=>d.track===c);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function AA(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(c=>c._pc=this),a});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=i.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(c=>Mw(c,a.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Da(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(a=>Mw(a,r.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let r,a,c;return this.getSenders().forEach(l=>{l.track===i&&(r?c=!0:r=l)}),this.getReceivers().forEach(l=>(l.track===i&&(a?c=!0:a=l),l.track===i)),c||r&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function _A(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(d)===-1&&this._shimmedLocalStreams[l.id].push(d):this._shimmedLocalStreams[l.id]=[l,d],d};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(f=>{if(this.getSenders().find(p=>p.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(f=>l.indexOf(f)===-1);this._shimmedLocalStreams[c.id]=[c].concat(d)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],i.apply(this,arguments)};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const d=this._shimmedLocalStreams[l].indexOf(c);d!==-1&&this._shimmedLocalStreams[l].splice(d,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),r.apply(this,arguments)}}function PA(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return _A(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(p=>this._reverseStreams[p.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(p=>{if(this.getSenders().find(b=>b.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const p=new t.MediaStream(m.getTracks());this._streams[m.id]=p,this._reverseStreams[p.id]=m,m=p}i.apply(this,[m])};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(S=>S===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const w=this._streams[p.id];if(w)w.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const S=new t.MediaStream([m]);this._streams[p.id]=S,this._reverseStreams[S.id]=p,this.addStream(S)}return this.getSenders().find(S=>S.track===m)};function a(f,m){let p=m.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const b=f._reverseStreams[v],w=f._streams[b.id];p=p.replace(new RegExp(w.id,"g"),b.id)}),new RTCSessionDescription({type:m.type,sdp:p})}function c(f,m){let p=m.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const b=f._reverseStreams[v],w=f._streams[b.id];p=p.replace(new RegExp(b.id,"g"),w.id)}),new RTCSessionDescription({type:m.type,sdp:p})}["createOffer","createAnswer"].forEach(function(f){const m=t.RTCPeerConnection.prototype[f],p={[f](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[w=>{const S=a(this,w);v[0].apply(null,[S])},w=>{v[1]&&v[1].apply(null,w)},arguments[2]]):m.apply(this,arguments).then(w=>a(this,w))}};t.RTCPeerConnection.prototype[f]=p[f]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=c(this,arguments[0]),l.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const f=d.get.apply(this);return f.type===""?f:a(this,f)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(b=>{this._streams[b].getTracks().find(S=>m.track===S)&&(v=this._streams[b])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ev(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=r[n]})}function DA(t,e){Da(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var Iw=Object.freeze({__proto__:null,fixNegotiationNeeded:DA,shimAddTrackRemoveTrack:PA,shimAddTrackRemoveTrackWithNative:_A,shimGetSendersWithDtmf:RA,shimGetUserMedia:CA,shimMediaStream:EA,shimOnTrack:kA,shimPeerConnection:Ev,shimSenderReceiverGetStats:AA});function NA(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(r,a,c){hy("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(a,c)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(c,l,d){l in c&&!(d in c)&&(c[d]=c[l],delete c[l])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),r(c.audio,"autoGainControl","mozAutoGainControl"),r(c.audio,"noiseSuppression","mozNoiseSuppression")),a(c)},i&&i.prototype.getSettings){const c=i.prototype.getSettings;i.prototype.getSettings=function(){const l=c.apply(this,arguments);return r(l,"mozAutoGainControl","autoGainControl"),r(l,"mozNoiseSuppression","noiseSuppression"),l}}if(i&&i.prototype.applyConstraints){const c=i.prototype.applyConstraints;i.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),r(l,"autoGainControl","mozAutoGainControl"),r(l,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[l])}}}}function G5(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function MA(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function kv(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const a=t.RTCPeerConnection.prototype[r],c={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=c[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[a,c,l]=arguments;return i.apply(this,[a||null]).then(d=>{if(e.version<53&&!c)try{d.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;d.forEach((m,p)=>{d.set(p,Object.assign({},m,{type:n[m.type]||m.type}))})}return d}).then(c,l)}}function OA(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function IA(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i}),Da(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function UA(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){hy("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function LA(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function jA(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(r){const{sender:c}=a,l=c.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=i,c.sendEncodings=i,this.setParametersPromises.push(c.setParameters(l).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return a})}function BA(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function FA(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function VA(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var Uw=Object.freeze({__proto__:null,shimAddTransceiver:jA,shimCreateAnswer:VA,shimCreateOffer:FA,shimGetDisplayMedia:G5,shimGetParameters:BA,shimGetUserMedia:NA,shimOnTrack:MA,shimPeerConnection:kv,shimRTCDataChannel:LA,shimReceiverGetStats:IA,shimRemoveStream:UA,shimSenderGetStats:OA});function zA(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>e.call(this,r,i)),i.getVideoTracks().forEach(r=>e.call(this,r,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const r=n.getTracks();this.getSenders().forEach(a=>{r.includes(a.track)&&this.removeTrack(a)})})}}function HA(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const a=new Event("addstream");a.stream=r,this.dispatchEvent(a)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(a=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(a)>=0)return;i._remoteStreams.push(a);const c=new Event("addstream");c.stream=a,i.dispatchEvent(c)})}),e.apply(i,arguments)}}}function qA(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,r=e.setLocalDescription,a=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(f,m){const p=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[p]);return m?(v.then(f,m),Promise.resolve()):v},e.createAnswer=function(f,m){const p=arguments.length>=2?arguments[2]:arguments[0],v=i.apply(this,[p]);return m?(v.then(f,m),Promise.resolve()):v};let l=function(d,f,m){const p=r.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p};e.setLocalDescription=l,l=function(d,f,m){const p=a.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p},e.setRemoteDescription=l,l=function(d,f,m){const p=c.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p},e.addIceCandidate=l}function GA(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=r=>i(KA(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,r,a){e.mediaDevices.getUserMedia(i).then(r,a)}).bind(e))}function KA(t){return t&&t.video!==void 0?Object.assign({},t,{video:wA(t.video)}):t}function YA(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const a=[];for(let c=0;c<i.iceServers.length;c++){let l=i.iceServers[c];l.urls===void 0&&l.url?(hy("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(i.iceServers[c])}i.iceServers=a}return new e(i,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function $A(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function WA(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function XA(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var Lw=Object.freeze({__proto__:null,shimAudioContext:XA,shimCallbacksAPI:qA,shimConstraints:KA,shimCreateOfferLegacy:WA,shimGetUserMedia:GA,shimLocalStreamsAPI:zA,shimRTCIceServerUrls:YA,shimRemoteStreamsAPI:HA,shimTrackEventTransceiver:$A}),Zp={exports:{}},jw;function K5(){return jw||(jw=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((r,a)=>(a>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(r=>r.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let a=8;a<i.length;a+=2)switch(i[a]){case"raddr":r.relatedAddress=i[a+1];break;case"rport":r.relatedPort=parseInt(i[a+1],10);break;case"tcptype":r.tcpType=i[a+1];break;case"ufrag":r.ufrag=i[a+1],r.usernameFragment=i[a+1];break;default:r[i[a]]===void 0&&(r[i[a]]=i[a+1]);break}return r},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const r=n.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const a=n.type;return i.push("typ"),i.push(a),a!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let r;const a=n.substring(n.indexOf(" ")+1).split(";");for(let c=0;c<a.length;c++)r=a[c].trim().split("="),i[r[0].trim()]=r[1];return i},e.writeFmtp=function(n){let i="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const a=[];Object.keys(n.parameters).forEach(c=>{n.parameters[c]!==void 0?a.push(c+"="+n.parameters[c]):a.push(c)}),i+="a=fmtp:"+r+" "+a.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(a=>{i+="a=rtcp-fb:"+r+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,i),10)},a=n.indexOf(":",i);return a>-1?(r.attribute=n.substring(i+1,a),r.value=n.substring(a+1)):r.attribute=n.substring(i+1),r},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let r="a=setup:"+i+`\r
`;return n.fingerprints.forEach(a=>{r+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),r},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const r=e.matchPrefix(n+i,"a=ice-ufrag:")[0],a=e.matchPrefix(n+i,"a=ice-pwd:")[0];return r&&a?{usernameFragment:r.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(n)[0].split(" ");i.profile=a[2];for(let l=3;l<a.length;l++){const d=a[l],f=e.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(f){const m=e.parseRtpMap(f),p=e.matchPrefix(n,"a=fmtp:"+d+" ");switch(m.parameters=p.length?e.parseFmtp(p[0]):{},m.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),i.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(m.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(l=>{i.headerExtensions.push(e.parseExtmap(l))});const c=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(l=>{c.forEach(d=>{l.rtcpFeedback.find(m=>m.type===d.type&&m.parameter===d.parameter)||l.rtcpFeedback.push(d)})}),i},e.writeRtpDescription=function(n,i){let r="";r+="m="+n+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(c=>{r+=e.writeRtpMap(c),r+=e.writeFmtp(c),r+=e.writeRtcpFb(c)});let a=0;return i.codecs.forEach(c=>{c.maxptime>a&&(a=c.maxptime)}),a>0&&(r+="a=maxptime:"+a+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(c=>{r+=e.writeExtmap(c)}),r},e.parseRtpEncodingParameters=function(n){const i=[],r=e.parseRtpParameters(n),a=r.fecMechanisms.indexOf("RED")!==-1,c=r.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(v=>e.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),d=l.length>0&&l[0].ssrc;let f;const m=e.matchPrefix(n,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(w=>parseInt(w,10)));m.length>0&&m[0].length>1&&m[0][0]===d&&(f=m[0][1]),r.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let b={ssrc:d,codecPayloadType:parseInt(v.parameters.apt,10)};d&&f&&(b.rtx={ssrc:f}),i.push(b),a&&(b=JSON.parse(JSON.stringify(b)),b.fec={ssrc:d,mechanism:c?"red+ulpfec":"red"},i.push(b))}}),i.length===0&&d&&i.push({ssrc:d});let p=e.matchPrefix(n,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-2e3*8:p=void 0,i.forEach(v=>{v.maxBitrate=p})),i},e.parseRtcpParameters=function(n){const i={},r=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const a=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=a.length>0,i.compound=a.length===0;const c=e.matchPrefix(n,"a=rtcp-mux");return i.mux=c.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const r=e.matchPrefix(n,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const a=e.matchPrefix(n,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(a.length>0)return i=a[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),r=e.matchPrefix(n,"a=max-message-size:");let a;r.length>0&&(a=parseInt(r[0].substring(19),10)),isNaN(a)&&(a=65536);const c=e.matchPrefix(n,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:i.fmt,maxMessageSize:a};const l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){const d=l[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:a}}},e.writeSctpDescription=function(n,i){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,r){let a;const c=i!==void 0?i:2;return n?a=n:a=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+a+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const r=e.splitLines(n);for(let a=0;a<r.length;a++)switch(r[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[a].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const r=e.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){const r=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},t.exports=e}(Zp)),Zp.exports}var ZA=K5(),Ho=O5(ZA),Y5=aj({__proto__:null,default:Ho},[ZA]);function uf(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new e(i),a=Ho.parseCandidate(i.candidate);for(const c in a)c in r||Object.defineProperty(r,c,{value:a[c]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,Da(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Rv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Da(t,"icecandidate",e=>{if(e.candidate){const n=Ho.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function df(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const d=Ho.splitSections(l.sdp);return d.shift(),d.some(f=>{const m=Ho.parseMLine(f);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},i=function(l){const d=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const f=parseInt(d[1],10);return f!==f?-1:f},r=function(l){let d=65536;return e.browser==="firefox"&&(e.version<57?l===-1?d=16384:d=2147483637:e.version<60?d=e.version===57?65535:65536:d=2147483637),d},a=function(l,d){let f=65536;e.browser==="firefox"&&e.version===57&&(f=65535);const m=Ho.matchPrefix(l.sdp,"a=max-message-size:");return m.length>0?f=parseInt(m[0].substring(19),10):e.browser==="firefox"&&d!==-1&&(f=2147483637),f},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=i(arguments[0]),f=r(d),m=a(arguments[0],d);let p;f===0&&m===0?p=Number.POSITIVE_INFINITY:f===0||m===0?p=Math.max(f,m):p=Math.min(f,m);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return p}}),this._sctp=v}return c.apply(this,arguments)}}function ff(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,r){const a=i.send;i.send=function(){const l=arguments[0],d=l.length||l.size||l.byteLength;if(i.readyState==="open"&&r.sctp&&d>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return a.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},Da(t,"datachannel",i=>(e(i.channel,i.target),i))}function Av(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const a=r.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const c=new Event("connectionstatechange",r);a.dispatchEvent(c)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function _v(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=r.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&r instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:r.type,sdp:a}):r.sdp=a}return n.apply(this,arguments)}}function hf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function mf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>n.apply(this,[c]))})}var $5=Object.freeze({__proto__:null,removeExtmapAllowMixed:_v,shimAddIceCandidateNullOrEmpty:hf,shimConnectionState:Av,shimMaxMessageSize:df,shimParameterlessSetLocalDescription:mf,shimRTCIceCandidate:uf,shimRTCIceCandidateRelayProtocol:Rv,shimSendThrowTypeError:ff});function W5(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=xA,i=q5(t),r={browserDetails:i,commonShim:$5,extractVersion:Il,disableLog:z5,disableWarnings:H5,sdp:Y5};switch(i.browser){case"chrome":if(!Iw||!Ev||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=Iw,hf(t,i),mf(t),CA(t,i),EA(t),Ev(t,i),kA(t),PA(t,i),RA(t),AA(t),DA(t,i),uf(t),Rv(t),Av(t),df(t,i),ff(t),_v(t,i);break;case"firefox":if(!Uw||!kv||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=Uw,hf(t,i),mf(t),NA(t,i),kv(t,i),MA(t),UA(t),OA(t),IA(t),LA(t),jA(t),BA(t),FA(t),VA(t),uf(t),Av(t),df(t,i),ff(t);break;case"safari":if(!Lw||!e.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=Lw,hf(t,i),mf(t),YA(t),WA(t),qA(t),zA(t),HA(t),$A(t),GA(t),XA(t),uf(t),Rv(t),df(t,i),ff(t),_v(t,i);break;default:n("Unsupported browser!");break}return r}W5({window:typeof window>"u"?void 0:window});const X5=10,kl="lk_e2ee",Z5="LKFrameEncryptionKey",J5={sharedKey:!1,ratchetSalt:Z5,ratchetWindowSize:8,failureTolerance:X5,keyringSize:16};var Ns;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Ns||(Ns={}));var Bw;(function(t){t.KeyRatcheted="keyRatcheted"})(Bw||(Bw={}));var Ps;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Ps||(Ps={}));var Fw;(function(t){t.Error="cryptorError"})(Fw||(Fw={}));function Q5(){return eB()||Pv()}function Pv(){return typeof window.RTCRtpScriptTransform<"u"}function eB(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class VW extends hr.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,r)=>{ot.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},J5),e),this.on(Ns.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,i){const r={key:e,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),r),this.emit(Ns.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Ns.RatchetRequest,e,n)}}class Vs extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var lt;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(lt||(lt={}));class At extends Vs{constructor(e,n,i,r){super(1,e),this.name="ConnectionError",this.status=i,this.reason=n,this.context=r,this.reasonName=lt[n]}}class my extends Vs{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Fr extends Vs{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class tB extends Vs{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class gn extends Vs{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class Dv extends Vs{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class Vw extends Vs{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class zw extends Vs{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:fy[n]}}var Nf;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Nf||(Nf={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Nf||(Nf={}));var Hw;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(Hw||(Hw={}));var he;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(he||(he={}));var ye;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(ye||(ye={}));var Ne;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(Ne||(Ne={}));var ke;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(ke||(ke={}));function nB(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const iB=/version\/(\d+(\.?_?\d+)+)/i;let Jp;function ci(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Jp===void 0||e){const i=rB.find(r=>{let{test:a}=r;return a.test(n)});Jp=i?.describe(n)}return Jp}const rB=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:pf(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Qp(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:pf(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Qp(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:pf(iB,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Qp(t)}}}];function pf(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=e.match(t);return i&&i.length>=n&&i[n]||""}function Qp(t){return t.includes("mac os")?pf(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var sB="2.15.4";const aB=sB,oB=16;class _n{}_n.setTimeout=function(){return setTimeout(...arguments)};_n.setInterval=function(){return setInterval(...arguments)};_n.clearTimeout=function(){return clearTimeout(...arguments)};_n.clearInterval=function(){return clearInterval(...arguments)};const cB=5e3,Rl=[];var oi;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(oi||(oi={}));class te extends hr.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=te.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=ot,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),cB):this.handleAppVisibilityChanged()},this.log=Hr((r=i.loggerName)!==null&&r!==void 0?r:Fi.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=te.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),st(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===te.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===te.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Rl.forEach(a=>{a.parentElement===null&&!e&&(e=a)}),e&&Rl.splice(Rl.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Mo(this.mediaStreamTrack,e);const i=e.srcObject.getTracks(),r=i.some(a=>a.kind==="audio");return e.play().then(()=>{this.emit(r?ke.AudioPlaybackStarted:ke.VideoPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(r?ke.AudioPlaybackFailed:ke.VideoPlaybackFailed,a):a.name==="AbortError"?ot.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):ot.warn("could not playback ".concat(r?"audio":"video"),a),r&&e&&i.some(c=>c.kind==="video")&&a.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(ke.ElementAttached,e),e}detach(e){try{if(e){qo(this.mediaStreamTrack,e);const i=this.attachedElements.indexOf(e);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(e),this.emit(ke.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(i=>{qo(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(ke.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Hr(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Rl.forEach(i=>{i.parentElement||(n=!1)}),n&&Rl.push(e)}}handleAppVisibilityChanged(){return G(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===te.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Yn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Yn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Mo(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let i;t.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(t)||(i.forEach(r=>{n.removeTrack(r)}),n.addTrack(t)),(!ka()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(ka()||ec())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function qo(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(f){f.Audio="audio",f.Video="video",f.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(f){f.Camera="camera",f.Microphone="microphone",f.ScreenShare="screen_share",f.ScreenShareAudio="screen_share_audio",f.Unknown="unknown"})(n=t.Source||(t.Source={}));let i;(function(f){f.Active="active",f.Paused="paused",f.Unknown="unknown"})(i=t.StreamState||(t.StreamState={}));function r(f){switch(f){case e.Audio:return Li.AUDIO;case e.Video:return Li.VIDEO;default:return Li.DATA}}t.kindToProto=r;function a(f){switch(f){case Li.AUDIO:return e.Audio;case Li.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=a;function c(f){switch(f){case n.Camera:return cn.CAMERA;case n.Microphone:return cn.MICROPHONE;case n.ScreenShare:return cn.SCREEN_SHARE;case n.ScreenShareAudio:return cn.SCREEN_SHARE_AUDIO;default:return cn.UNKNOWN}}t.sourceToProto=c;function l(f){switch(f){case cn.CAMERA:return n.Camera;case cn.MICROPHONE:return n.Microphone;case cn.SCREEN_SHARE:return n.ScreenShare;case cn.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=l;function d(f){switch(f){case Sv.ACTIVE:return i.Active;case Sv.PAUSED:return i.Paused;default:return i.Unknown}}t.streamStateFromProto=d})(te||(te={}));class Ct{constructor(e,n,i,r,a){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&i!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:i,maxFramerate:r,priority:a};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const lB=["vp8","h264"],uB=["vp8","h264","vp9","av1","h265"];function dB(t){return!!lB.find(e=>e===t)}var qw;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(qw||(qw={}));var Nv;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(Nv||(Nv={}));const Jl={h90:new Ct(160,90,9e4,20),h180:new Ct(320,180,16e4,20),h216:new Ct(384,216,18e4,20),h360:new Ct(640,360,45e4,20),h540:new Ct(960,540,8e5,25),h720:new Ct(1280,720,17e5,30),h1080:new Ct(1920,1080,3e6,30),h1440:new Ct(2560,1440,5e6,30),h2160:new Ct(3840,2160,8e6,30)},Mv={h120:new Ct(160,120,7e4,20),h180:new Ct(240,180,125e3,20),h240:new Ct(320,240,14e4,20),h360:new Ct(480,360,33e4,20),h480:new Ct(640,480,5e5,20),h540:new Ct(720,540,6e5,25),h720:new Ct(960,720,13e5,30),h1080:new Ct(1440,1080,23e5,30),h1440:new Ct(1920,1440,38e5,30)},py={h360fps3:new Ct(640,360,2e5,3,"medium"),h360fps15:new Ct(640,360,4e5,15,"medium"),h720fps5:new Ct(1280,720,8e5,5,"medium"),h720fps15:new Ct(1280,720,15e5,15,"medium"),h720fps30:new Ct(1280,720,2e6,30,"medium"),h1080fps15:new Ct(1920,1080,25e5,15,"medium"),h1080fps30:new Ct(1920,1080,5e6,30,"medium"),original:new Ct(0,0,7e6,30,"medium")},fB="|",Gw="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function hB(t){const e=t.split(fB);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Wn(t){return G(this,void 0,void 0,function*(){return new Promise(e=>_n.setTimeout(e,t))})}function Ov(){return"addTransceiver"in RTCPeerConnection.prototype}function Iv(){return"addTrack"in RTCPeerConnection.prototype}function mB(){if(!("getCapabilities"in RTCRtpSender)||ka())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function pB(){if(!("getCapabilities"in RTCRtpSender)||ec())return!1;if(ka()){const n=ci();if(n?.version&&Vi(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&Vi(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function er(t){return t==="av1"||t==="vp9"}function Uv(t){return!document||Mf()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function gB(){return typeof RTCPeerConnection>"u"?!1:Ov()||Iv()}function ec(){var t;return((t=ci())===null||t===void 0?void 0:t.name)==="Firefox"}function ka(){var t;return((t=ci())===null||t===void 0?void 0:t.name)==="Safari"}function Mf(){const t=ci();return t?.name==="Safari"||t?.os==="iOS"}function vB(){const t=ci();return t?.name==="Safari"&&t.version.startsWith("17.")||t?.os==="iOS"&&!!t?.osVersion&&Vi(t.osVersion,"17")>=0}function yB(t){return t||(t=ci()),t?.name==="Safari"&&Vi(t.version,"18.3")>0||t?.os==="iOS"&&!!t?.osVersion&&Vi(t.osVersion,"18.3")>0}function JA(){var t,e;return Yn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function bB(){const t=ci(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&Vi(e,t.osVersion)>=0?!0:t.name==="Safari"&&Vi(e,t.version)>=0}function Yn(){return typeof document<"u"}function lr(){return navigator.product=="ReactNative"}function Lv(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function QA(){if(globalThis&&globalThis.LiveKitReactNativeGlobal)return globalThis.LiveKitReactNativeGlobal}function e_(){if(!lr())return;let t=QA();if(t)return t.platform}function Kw(){if(Yn())return window.devicePixelRatio;if(lr()){let t=QA();if(t)return t.devicePixelRatio}return 1}function Vi(t,e){const n=t.split("."),i=e.split("."),r=Math.min(n.length,i.length);for(let a=0;a<r;++a){const c=parseInt(n[a],10),l=parseInt(i[a],10);if(c>l)return 1;if(c<l)return-1;if(a===r-1&&c===l)return 0}return t===""&&e!==""?-1:e===""?1:n.length==i.length?0:n.length<i.length?-1:1}function SB(t){for(const e of t)e.target.handleResize(e)}function TB(t){for(const e of t)e.target.handleVisibilityChanged(e)}let eg=null;const Yw=()=>(eg||(eg=new ResizeObserver(SB)),eg);let tg=null;const $w=()=>(tg||(tg=new IntersectionObserver(TB,{root:null,rootMargin:"0px"})),tg);function xB(){var t;const e=new l5({sdk:rA.JS,protocol:oB,version:aB});return lr()&&(e.os=(t=e_())!==null&&t!==void 0?t:""),e}function Ww(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=t,r.height=e;const a=r.getContext("2d");a?.fillRect(0,0,r.width,r.height),i&&a&&(a.beginPath(),a.arc(t/2,e/2,50,0,Math.PI*2,!0),a.closePath(),a.fillStyle="grey",a.fill());const c=r.captureStream(),[l]=c.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let Al;function ng(){if(!Al){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const i=t.createMediaStreamDestination();if(e.connect(n),n.connect(i),e.start(),[Al]=i.stream.getAudioTracks(),!Al)throw Error("Could not get empty media stream audio track");Al.enabled=!1}return Al.clone()}class Oo{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,r)=>G(this,void 0,void 0,function*(){this.resolve=i,this.reject=r,e&&(yield e(i,r))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function wB(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),i=vy();if(!i)throw new Error("Audio Context not supported on this browser");const r=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,a=i.createMediaStreamSource(new MediaStream([r])),c=i.createAnalyser();c.minDecibels=n.minDecibels,c.maxDecibels=n.maxDecibels,c.fftSize=n.fftSize,c.smoothingTimeConstant=n.smoothingTimeConstant,a.connect(c);const l=new Uint8Array(c.frequencyBinCount);return{calculateVolume:()=>{c.getByteFrequencyData(l);let m=0;for(const v of l)m+=Math.pow(v/255,2);return Math.sqrt(m/l.length)},analyser:c,cleanup:()=>G(this,void 0,void 0,function*(){yield i.close(),n.cloneTrack&&r.stop()})}}function CB(t){return uB.includes(t)}function Ms(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function EB(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function jv(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function kB(t,e){return t.segments.map(n=>{let{id:i,text:r,language:a,startTime:c,endTime:l,final:d}=n;var f;const m=(f=e.get(i))!==null&&f!==void 0?f:Date.now(),p=Date.now();return d?e.delete(i):e.set(i,m),{id:i,text:r,startTime:Number.parseInt(c.toString()),endTime:Number.parseInt(l.toString()),final:d,language:a,firstReceivedTime:m,lastReceivedTime:p}})}function RB(t){const{id:e,timestamp:n,message:i,editTimestamp:r}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}function Xw(t){switch(t.reason){case lt.LeaveRequest:return t.context;case lt.Cancelled:return Bi.CLIENT_INITIATED;case lt.NotAllowed:return Bi.USER_REJECTED;case lt.ServerUnreachable:return Bi.JOIN_FAILURE;default:return Bi.UNKNOWN_REASON}}function gf(t){return t!==void 0?Number(t):void 0}function ma(t){return t!==void 0?BigInt(t):void 0}function Go(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function ir(t){return!!t&&t.kind==te.Kind.Audio}function Na(t){return!!t&&t.kind==te.Kind.Video}function xs(t){return Go(t)&&Na(t)}function Ir(t){return Go(t)&&ir(t)}function Bv(t){return!!t&&!t.isLocal}function AB(t){return!!t&&!t.isLocal}function ig(t){return Bv(t)&&Na(t)}function _B(t){return t.isLocal}function PB(t,e){const n=[];let i=new TextEncoder().encode(t);for(;i.length>e;){let r=e;for(;r>0;){const a=i[r];if(a!==void 0&&(a&192)!==128)break;r--}n.push(i.slice(0,r)),i=i.slice(r)}return i.length>0&&n.push(i),n}function t_(t,e,n){var i,r,a,c;const{optionsWithoutProcessor:l,audioProcessor:d,videoProcessor:f}=i_(t??{}),m=e?.processor,p=n?.processor,v=l??{};return v.audio===!0&&(v.audio={}),v.video===!0&&(v.video={}),v.audio&&(Fv(v.audio,e),(i=(a=v.audio).deviceId)!==null&&i!==void 0||(a.deviceId={ideal:"default"}),(d||m)&&(v.audio.processor=d??m)),v.video&&(Fv(v.video,n),(r=(c=v.video).deviceId)!==null&&r!==void 0||(c.deviceId={ideal:"default"}),(f||p)&&(v.video.processor=f??p)),v}function Fv(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function gy(t){var e,n,i,r;const a={};if(t.video)if(typeof t.video=="object"){const c={},l=c,d=t.video;Object.keys(d).forEach(f=>{switch(f){case"resolution":Fv(l,d.resolution);break;default:l[f]=d[f]}}),a.video=c,(e=(i=a.video).deviceId)!==null&&e!==void 0||(i.deviceId={ideal:"default"})}else a.video=t.video?{deviceId:{ideal:"default"}}:!1;else a.video=!1;return t.audio?typeof t.audio=="object"?(a.audio=t.audio,(n=(r=a.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):a.audio={deviceId:{ideal:"default"}}:a.audio=!1,a}function n_(t){return G(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const i=vy();if(i){const r=i.createAnalyser();r.fftSize=2048;const a=r.frequencyBinCount,c=new Uint8Array(a);i.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(r),yield Wn(n),r.getByteTimeDomainData(c);const d=c.some(f=>f!==128&&f!==0);return i.close(),!d}return!1}()})}function vy(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const i=()=>G(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(a){console.warn("Error trying to auto-resume audio context",a)}(r=window.document.body)===null||r===void 0||r.removeEventListener("click",i)});window.document.body.addEventListener("click",i)}return n}}function DB(t){return t==="audioinput"?te.Source.Microphone:t==="videoinput"?te.Source.Camera:te.Source.Unknown}function Vv(t){return t===te.Source.Microphone?"audioinput":t===te.Source.Camera?"videoinput":void 0}function NB(t){var e,n;let i=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(i=typeof i=="boolean"?{}:i,ka()?i=Object.assign(Object.assign({},i),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:i,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function vf(t){return t.split("/")[1].toLowerCase()}function MB(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new uy({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function st(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?st(t.track):{})}}function OB(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function IB(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const i=[...Object.keys(e),...Object.keys(t)],r={};for(const a of i)t[a]!==e[a]&&(r[a]=(n=e[a])!==null&&n!==void 0?n:"");return r}function i_(t){const e=Object.assign({},t);let n,i;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(i=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:nB(e)}}function UB(t){switch(t){case cn.CAMERA:return te.Source.Camera;case cn.MICROPHONE:return te.Source.Microphone;case cn.SCREEN_SHARE:return te.Source.ScreenShare;case cn.SCREEN_SHARE_AUDIO:return te.Source.ScreenShareAudio;default:return te.Source.Unknown}}function Zw(t,e){return t.width*t.height<e.width*e.height}function LB(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(i=>i.quality===e)}class jB extends hr.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var i,r;const{kind:a,data:c}=n.data;switch(a){case"error":ot.error(c.error.message),this.emit(Ps.EncryptionError,c.error);break;case"initAck":c.enabled&&this.keyProvider.getKeys().forEach(l=>{this.postKey(l)});break;case"enable":if(c.enabled&&this.keyProvider.getKeys().forEach(l=>{this.postKey(l)}),this.encryptionEnabled!==c.enabled&&c.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(Ps.ParticipantEncryptionStatusChanged,c.enabled,this.room.localParticipant),this.encryptionEnabled=c.enabled;else if(c.participantIdentity){const l=(r=this.room)===null||r===void 0?void 0:r.getParticipantByIdentity(c.participantIdentity);if(!l)throw TypeError("couldn't set encryption status, participant not found".concat(c.participantIdentity));this.emit(Ps.ParticipantEncryptionStatusChanged,c.enabled,l)}break;case"ratchetKey":this.keyProvider.emit(Ns.KeyRatcheted,c.ratchetResult,c.participantIdentity,c.keyIndex);break}},this.onWorkerError=n=>{ot.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Ps.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!Q5())throw new my("tried to setup end-to-end encryption on an unsupported browser");if(ot.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:L5.getLevel()}};this.worker&&(ot.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){ot.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?ot.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Ne.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(he.TrackPublished,(i,r)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==si.NONE,r.identity)),e.on(he.ConnectionStateChanged,i=>{i===at.Connected&&e.remoteParticipants.forEach(r=>{r.trackPublications.forEach(a=>{this.setParticipantCryptorEnabled(a.trackInfo.encryption!==si.NONE,r.identity)})})}).on(he.TrackUnsubscribed,(i,r,a)=>{var c;const l={kind:"removeTransform",data:{participantIdentity:a.identity,trackId:i.mediaStreamID}};(c=this.worker)===null||c===void 0||c.postMessage(l)}).on(he.TrackSubscribed,(i,r,a)=>{this.setupE2EEReceiver(i,a.identity,r.trackInfo)}).on(he.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(ye.LocalSenderCreated,(i,r)=>G(this,void 0,void 0,function*(){this.setupE2EESender(r,i)})),n.on(Ns.SetKey,i=>this.postKey(i)).on(Ns.RatchetRequest,(i,r)=>this.postRatchetRequest(i,r))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(i)}postKey(e){let{key:n,participantIdentity:i,keyIndex:r}=e;var a;if(!this.worker)throw Error("could not set key, worker is missing");const c={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((a=this.room)===null||a===void 0?void 0:a.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(c)}postEnable(e,n){if(this.worker){const i={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,i){if(e.receiver){if(!i?.mimeType||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?vf(i.mimeType):void 0)}}setupE2EESender(e,n){if(!Go(e)||!n){n||ot.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,i,r){return G(this,void 0,void 0,function*(){if(this.worker){if(Pv()){const a={kind:"decode",participantIdentity:i,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{if(kl in e&&r){const d={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:i}};this.worker.postMessage(d);return}let a=e.writableStream,c=e.readableStream;if(!a||!c){const d=e.createEncodedStreams();e.writableStream=d.writable,a=d.writable,e.readableStream=d.readable,c=d.readable}const l={kind:"decode",data:{readableStream:c,writableStream:a,trackId:n,codec:r,participantIdentity:i,isReuse:kl in e}};this.worker.postMessage(l,[c,a])}e[kl]=!0}})}handleSender(e,n,i){var r;if(!(kl in e||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(Pv()){ot.info("initialize script transform");const a={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{ot.info("initialize encoded streams");const a=e.createEncodedStreams(),c={kind:"encode",data:{readableStream:a.readable,writableStream:a.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(c,[a.readable,a.writable])}e[kl]=!0}}}const rg="default";class wn{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new wn),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return G(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;if(((a=wn.userMediaPromiseMap)===null||a===void 0?void 0:a.size)>0){ot.debug("awaiting getUserMedia promise");try{n?yield wn.userMediaPromiseMap.get(n):yield Promise.all(wn.userMediaPromiseMap.values())}catch{ot.warn("error waiting for media permissons")}}let c=yield navigator.mediaDevices.enumerateDevices();if(r&&!(ka()&&i.hasDeviceInUse(n))&&(c.filter(d=>d.kind===n).length===0||c.some(d=>{const f=d.label==="",m=n?d.kind===n:!0;return f&&m}))){const d={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},f=yield navigator.mediaDevices.getUserMedia(d);c=yield navigator.mediaDevices.enumerateDevices(),f.getTracks().forEach(m=>{m.stop()})}return i._previousDevices=c,n&&(c=c.filter(l=>l.kind===n)),c}()})}normalizeDeviceId(e,n,i){return G(this,void 0,void 0,function*(){if(n!==rg)return n;const r=yield this.getDevices(e),a=r.find(l=>l.deviceId===rg);if(!a){ot.warn("could not reliably determine default device");return}const c=r.find(l=>l.deviceId!==rg&&l.groupId===(i??a.groupId));if(!c){ot.warn("could not reliably determine default device");return}return c?.deviceId})}hasDeviceInUse(e){return e?wn.userMediaPromiseMap.has(e):wn.userMediaPromiseMap.size>0}}wn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];wn.userMediaPromiseMap=new Map;var zl;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(zl||(zl={}));class BB{constructor(){this.pendingTasks=new Map,this.taskMutex=new Ln,this.nextTaskIndex=0}run(e){return G(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:zl.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=zl.RUNNING,yield e()}finally{n.status=zl.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return G(this,void 0,void 0,function*(){return this.run(()=>G(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function FB(t,e){const n=new URL(EB(t));return e.forEach((i,r)=>{n.searchParams.set(r,i)}),r_(n,"rtc")}function VB(t){const e=new URL(jv(t));return r_(e,"validate")}function zB(t){return t.endsWith("/")?t:"".concat(t,"/")}function r_(t,e){return t.pathname="".concat(zB(t.pathname)).concat(e),t.toString()}const HB=["syncState","trickle","offer","answer","simulate","leave"];function qB(t){const e=HB.indexOf(t.case)>=0;return ot.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Nt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Nt||(Nt={}));class yy{get currentState(){return this.state}get isDisconnected(){return this.state===Nt.DISCONNECTING||this.state===Nt.DISCONNECTED}get isEstablishingConnection(){return this.state===Nt.CONNECTING||this.state===Nt.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=Nt.DISCONNECTED,this.log=ot,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Hr((i=n.loggerName)!==null&&i!==void 0?i:Fi.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new BB,this.queuedRequests=[],this.closingLock=new Ln,this.connectionLock=new Ln,this.state=Nt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,i,r){return G(this,void 0,void 0,function*(){return this.state=Nt.CONNECTING,this.options=i,yield this.connect(e,n,i,r)})}reconnect(e,n,i,r){return G(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Nt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:r}))})}connect(e,n,i,r){this.connectOptions=i;const a=xB(),c=GB(n,a,i),l=FB(e,c),d=VB(l);return new Promise((f,m)=>G(this,void 0,void 0,function*(){const p=yield this.connectionLock.lock();try{const v=()=>G(this,void 0,void 0,function*(){this.close(),clearTimeout(b),m(new At("room connection has been cancelled (signal)",lt.Cancelled))}),b=setTimeout(()=>{this.close(),m(new At("room connection has timed out (signal)",lt.ServerUnreachable))},i.websocketTimeout);r?.aborted&&v(),r?.addEventListener("abort",v);const w=new URL(l);w.searchParams.has("access_token")&&w.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(w),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(l),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(b)},this.ws.onerror=S=>G(this,void 0,void 0,function*(){if(this.state!==Nt.CONNECTED){this.state=Nt.DISCONNECTED,clearTimeout(b);try{const R=yield fetch(d);if(R.status.toFixed(0).startsWith("4")){const E=yield R.text();m(new At(E,lt.NotAllowed,R.status))}else m(new At("Encountered unknown websocket error during connection: ".concat(S.toString()),lt.InternalError,R.status))}catch(R){m(new At(R instanceof Error?R.message:"server was not reachable",lt.ServerUnreachable))}return}this.handleWSError(S)}),this.ws.onmessage=S=>G(this,void 0,void 0,function*(){var R,E,N;let M;if(typeof S.data=="string"){const I=JSON.parse(S.data);M=Aw.fromJson(I,{ignoreUnknownFields:!0})}else if(S.data instanceof ArrayBuffer)M=Aw.fromBinary(new Uint8Array(S.data));else{this.log.error("could not decode websocket message: ".concat(typeof S.data),this.logContext);return}if(this.state!==Nt.CONNECTED){let I=!1;if(((R=M.message)===null||R===void 0?void 0:R.case)==="join"?(this.state=Nt.CONNECTED,r?.removeEventListener("abort",v),this.pingTimeoutDuration=M.message.value.pingTimeout,this.pingIntervalDuration=M.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),f(M.message.value)):this.state===Nt.RECONNECTING&&M.message.case!=="leave"?(this.state=Nt.CONNECTED,r?.removeEventListener("abort",v),this.startPingInterval(),((E=M.message)===null||E===void 0?void 0:E.case)==="reconnect"?f(M.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),f(void 0),I=!0)):this.isEstablishingConnection&&M.message.case==="leave"?m(new At("Received leave request while trying to (re)connect",lt.LeaveRequest,void 0,M.message.value.reason)):i.reconnect||m(new At("did not receive join response, got ".concat((N=M.message)===null||N===void 0?void 0:N.case," instead"),lt.InternalError)),!I)return}this.signalLatency&&(yield Wn(this.signalLatency)),this.handleSignalResponse(M)}),this.ws.onclose=S=>{this.isEstablishingConnection&&m(new At("Websocket got closed during a (re)connection attempt",lt.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:S.reason,code:S.code,wasClean:S.wasClean,state:this.state})),this.handleOnClose(S.reason)}}finally{p()}}))}close(){return G(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Nt.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const r=new Promise(a=>{e.ws?e.ws.onclose=()=>{a()}:a()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([r,Wn(250)])),e.ws=void 0}}finally{n&&(e.state=Nt.DISCONNECTED),i()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Of(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Of(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new cy({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new ly({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return G(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const l=a.getNextRequestId();return yield a.sendRequest({case:"updateMetadata",value:new fA({requestId:l,metadata:i,name:r,attributes:c})}),l}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new dA({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new pA({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:It.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new bA({timestamp:It.parse(Date.now()),rtt:It.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new uA({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new sh({reason:Bi.CLIENT_INITIATED,action:zo.DISCONNECT})})}sendRequest(e){return G(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!r&&!qB(n)&&i.state===Nt.RECONNECTING){i.queuedRequests.push(()=>G(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield i.requestQueue.flush()),i.signalLatency&&(yield Wn(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.ws||i.ws.readyState!==i.ws.OPEN){i.log.error("cannot send signal request before connected, type: ".concat(n?.case),i.logContext);return}const c=new f5({message:n});try{i.useJSON?i.ws.send(c.toJsonString()):i.ws.send(c.toBinary())}catch(l){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:l}))}}()})}handleSignalResponse(e){var n,i;const r=e.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let a=!1;if(r.case==="answer"){const c=Jw(r.value);this.onAnswer&&this.onAnswer(c,r.value.id)}else if(r.case==="offer"){const c=Jw(r.value);this.onOffer&&this.onOffer(c,r.value.id)}else if(r.case==="trickle"){const c=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(c,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=r.value.speakers)!==null&&i!==void 0?i:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),a=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));a||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return G(this,void 0,void 0,function*(){if(this.state===Nt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=_n.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&_n.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=_n.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&_n.clearInterval(this.pingInterval)}}function Jw(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Of(t,e){return new Ea({sdp:t.sdp,type:t.type,id:e})}function GB(t,e,n){var i;const r=new URLSearchParams;return r.set("access_token",t),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",lr()?"reactnative":"js"),r.set("version",e.version),r.set("protocol",e.protocol.toString()),e.deviceModel&&r.set("device_model",e.deviceModel),e.os&&r.set("os",e.os),e.osVersion&&r.set("os_version",e.osVersion),e.browser&&r.set("browser",e.browser),e.browserVersion&&r.set("browser_version",e.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&r.set("network",navigator.connection.type),r}class Qw{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class KB{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const r=i+this.ttl;return this._map.set(e,{value:n,expiresAt:r}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e(i.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],i=this.asValueMap();for(const[r,a]of i.entries())n.push(e(a,r,i));return n}asValueMap(){const e=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e.set(n,i.value);return e}}var Ni={},sg={},ag={exports:{}},eC;function by(){if(eC)return ag.exports;eC=1;var t=ag.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),ag.exports}var tC;function YB(){return tC||(tC=1,function(t){var e=function(l){return String(Number(l))===l?Number(l):l},n=function(l,d,f,m){if(m&&!f)d[m]=e(l[1]);else for(var p=0;p<f.length;p+=1)l[p+1]!=null&&(d[f[p]]=e(l[p+1]))},i=function(l,d,f){var m=l.name&&l.names;l.push&&!d[l.push]?d[l.push]=[]:m&&!d[l.name]&&(d[l.name]={});var p=l.push?{}:m?d[l.name]:d;n(f.match(l.reg),p,l.names,l.name),l.push&&d[l.push].push(p)},r=by(),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(l){var d={},f=[],m=d;return l.split(/(\r\n|\r|\n)/).filter(a).forEach(function(p){var v=p[0],b=p.slice(2);v==="m"&&(f.push({rtp:[],fmtp:[]}),m=f[f.length-1]);for(var w=0;w<(r[v]||[]).length;w+=1){var S=r[v][w];if(S.reg.test(b))return i(S,m,b)}}),d.media=f,d};var c=function(l,d){var f=d.split(/=(.+)/,2);return f.length===2?l[f[0]]=e(f[1]):f.length===1&&d.length>1&&(l[f[0]]=void 0),l};t.parseParams=function(l){return l.split(/;\s?/).reduce(c,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(l){return l.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(l){for(var d=[],f=l.split(" ").map(e),m=0;m<f.length;m+=3)d.push({component:f[m],ip:f[m+1],port:f[m+2]});return d},t.parseImageAttributes=function(l){return l.split(" ").map(function(d){return d.substring(1,d.length-1).split(",").reduce(c,{})})},t.parseSimulcastStreamList=function(l){return l.split(";").map(function(d){return d.split(",").map(function(f){var m,p=!1;return f[0]!=="~"?m=e(f):(m=e(f.substring(1,f.length)),p=!0),{scid:m,paused:p}})})}}(sg)),sg}var og,nC;function $B(){if(nC)return og;nC=1;var t=by(),e=/%[sdv%]/g,n=function(c){var l=1,d=arguments,f=d.length;return c.replace(e,function(m){if(l>=f)return m;var p=d[l];switch(l+=1,m){case"%%":return"%";case"%s":return String(p);case"%d":return Number(p);case"%v":return""}})},i=function(c,l,d){var f=l.format instanceof Function?l.format(l.push?d:d[l.name]):l.format,m=[c+"="+f];if(l.names)for(var p=0;p<l.names.length;p+=1){var v=l.names[p];l.name?m.push(d[l.name][v]):m.push(d[l.names[p]])}else m.push(d[l.name]);return n.apply(null,m)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];return og=function(c,l){l=l||{},c.version==null&&(c.version=0),c.name==null&&(c.name=" "),c.media.forEach(function(p){p.payloads==null&&(p.payloads="")});var d=l.outerOrder||r,f=l.innerOrder||a,m=[];return d.forEach(function(p){t[p].forEach(function(v){v.name in c&&c[v.name]!=null?m.push(i(p,v,c)):v.push in c&&c[v.push]!=null&&c[v.push].forEach(function(b){m.push(i(p,v,b))})})}),c.media.forEach(function(p){m.push(i("m",t.m[0],p)),f.forEach(function(v){t[v].forEach(function(b){b.name in p&&p[b.name]!=null?m.push(i(v,b,p)):b.push in p&&p[b.push]!=null&&p[b.push].forEach(function(w){m.push(i(v,b,w))})})})}),m.join(`\r
`)+`\r
`},og}var iC;function WB(){if(iC)return Ni;iC=1;var t=YB(),e=$B(),n=by();return Ni.grammar=n,Ni.write=e,Ni.parse=t.parse,Ni.parseParams=t.parseParams,Ni.parseFmtpConfig=t.parseFmtpConfig,Ni.parsePayloads=t.parsePayloads,Ni.parseRemoteCandidates=t.parseRemoteCandidates,Ni.parseImageAttributes=t.parseImageAttributes,Ni.parseSimulcastStreamList=t.parseSimulcastStreamList,Ni}var Es=WB();function Sy(t,e,n){var i,r,a;e===void 0&&(e=50),n===void 0&&(n={});var c=(i=n.isImmediate)!=null&&i,l=(r=n.callback)!=null&&r,d=n.maxWait,f=Date.now(),m=[];function p(){if(d!==void 0){var b=Date.now()-f;if(b+e>=d)return d-b}return e}var v=function(){var b=[].slice.call(arguments),w=this;return new Promise(function(S,R){var E=c&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,f=Date.now(),!c){var M=t.apply(w,b);l&&l(M),m.forEach(function(I){return(0,I.resolve)(M)}),m=[]}},p()),E){var N=t.apply(w,b);return l&&l(N),S(N)}m.push({resolve:S,reject:R})})};return v.cancel=function(b){a!==void 0&&clearTimeout(a),m.forEach(function(w){return(0,w.reject)(b)}),m=[]},v}const XB=.7,ZB=20,Ko={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class rC extends hr.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=ot,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Sy(r=>G(this,void 0,void 0,function*(){this.emit(Ko.NegotiationStarted);try{yield this.createAndSendOffer()}catch(a){if(r)r(a);else throw a}}),ZB),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Hr((i=n.loggerName)!==null&&i!==void 0?i:Fi.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new Ln}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},e.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},e.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return G(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return G(this,void 0,void 0,function*(){var i;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(e.type==="offer"){let{stereoMids:a,nackMids:c}=JB(e);this.remoteStereoMids=a,this.remoteNackMids=c}else if(e.type==="answer"){const a=Es.parse((i=e.sdp)!==null&&i!==void 0?i:"");a.media.forEach(c=>{c.type==="audio"&&this.trackBitrates.some(l=>{if(!l.transceiver||c.mid!=l.transceiver.mid)return!1;let d=0;if(c.rtp.some(m=>m.codec.toUpperCase()===l.codec.toUpperCase()?(d=m.payload,!0):!1),d===0)return!0;let f=!1;for(const m of c.fmtp)if(m.payload===d){m.config=m.config.split(";").filter(p=>!p.includes("maxaveragebitrate")).join(";"),l.maxbr>0&&(m.config+=";maxaveragebitrate=".concat(l.maxbr*1e3)),f=!0;break}return f||l.maxbr>0&&c.fmtp.push({payload:d,config:"maxaveragebitrate=".concat(l.maxbr*1e3)}),!0})}),r=Es.write(a)}return yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(a=>{this.pc.addIceCandidate(a)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Ko.NegotiationComplete),e.sdp&&Es.parse(e.sdp).media.forEach(c=>{c.type==="video"&&this.emit(Ko.RTPVideoPayloadTypes,c.rtp)})),!0})}createAndSendOffer(e){return G(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const l=this._pc.remoteDescription;if(e?.iceRestart&&l)yield this._pc.setRemoteDescription(l);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const a=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:a.sdp},this.logContext));const c=Es.parse((n=a.sdp)!==null&&n!==void 0?n:"");if(c.media.forEach(l=>{aC(l),l.type==="audio"?sC(l,[],[]):l.type==="video"&&this.trackBitrates.some(d=>{if(!l.msid||!d.cid||!l.msid.includes(d.cid))return!1;let f=0;if(l.rtp.some(p=>p.codec.toUpperCase()===d.codec.toUpperCase()?(f=p.payload,!0):!1),f===0||(er(d.codec)&&!ka()&&this.ensureVideoDDExtensionForSVC(l,c),d.codec!=="av1"))return!0;const m=Math.round(d.maxbr*XB);for(const p of l.fmtp)if(p.payload===f){p.config.includes("x-google-start-bitrate")||(p.config+=";x-google-start-bitrate=".concat(m));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(a,Es.write(c)),this.onOffer(a,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return G(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),i=Es.parse((e=n.sdp)!==null&&e!==void 0?e:"");return i.media.forEach(r=>{aC(r),r.type==="audio"&&sC(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Es.write(i)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new gn("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new gn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return G(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const i=new Map,r=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),i.set(l.id,l);break;case"remote-candidate":r.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const c=(e=i.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(c!==void 0)return r.get(c)})}setMungedSDP(e,n,i){return G(this,void 0,void 0,function*(){if(n){const r=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(a){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:a,sdp:n})),e.sdp=r}}try{i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(r){let a="unknown error";r instanceof Error?a=r.message:typeof r=="string"&&(a=r);const c={error:a,sdp:e.sdp};throw!i&&this.pc.remoteDescription&&(c.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:c})),new Dv(a)}})}ensureVideoDDExtensionForSVC(e,n){var i,r;if(!((i=e.ext)===null||i===void 0?void 0:i.some(c=>c.uri===Gw))){if(this.ddExtID===0){let c=0;n.media.forEach(l=>{var d;l.type==="video"&&((d=l.ext)===null||d===void 0||d.forEach(f=>{f.value>c&&(c=f.value)}))}),this.ddExtID=c+1}(r=e.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:Gw})}}}function sC(t,e,n){let i=0;t.rtp.some(r=>r.codec==="opus"?(i=r.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(r=>r.payload===i&&r.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(r=>r.payload===i?(r.config.includes("stereo=1")||(r.config+=";stereo=1"),!0):!1))}function JB(t){var e;const n=[],i=[],r=Es.parse((e=t.sdp)!==null&&e!==void 0?e:"");let a=0;return r.media.forEach(c=>{var l;c.type==="audio"&&(c.rtp.some(d=>d.codec==="opus"?(a=d.payload,!0):!1),!((l=c.rtcpFb)===null||l===void 0)&&l.some(d=>d.payload===a&&d.type==="nack")&&i.push(c.mid),c.fmtp.some(d=>d.payload===a?(d.config.includes("sprop-stereo=1")&&n.push(c.mid),!0):!1))}),{stereoMids:n,nackMids:i}}function aC(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}const zv="vp8",QB={audioPreset:Nv.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:py.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:zv,backupCodec:!0,preConnectBuffer:!1},s_={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},a_={deviceId:{ideal:"default"},resolution:Jl.h720.resolution},e8={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new B5,disconnectOnPageLeave:!0,webAudioMix:!1},Ty={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Ht;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Ht||(Ht={}));class t8{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,i){var r;this.peerConnectionTimeout=Ty.peerConnectionTimeout,this.log=ot,this.updateState=()=>{var a;const c=this.state,l=this.requiredTransports.map(d=>d.getConnectionState());l.every(d=>d==="connected")?this.state=Ht.CONNECTED:l.some(d=>d==="failed")?this.state=Ht.FAILED:l.some(d=>d==="connecting")?this.state=Ht.CONNECTING:l.every(d=>d==="closed")?this.state=Ht.CLOSED:l.some(d=>d==="closed")?this.state=Ht.CLOSING:l.every(d=>d==="new")&&(this.state=Ht.NEW),c!==this.state&&(this.log.debug("pc state change: from ".concat(Ht[c]," to ").concat(Ht[this.state]),this.logContext),(a=this.onStateChange)===null||a===void 0||a.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Hr((r=i.loggerName)!==null&&r!==void 0?r:Fi.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new rC(e,i),this.subscriber=new rC(e,i),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=a=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,a,ji.PUBLISHER)},this.subscriber.onIceCandidate=a=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,a,ji.SUBSCRIBER)},this.subscriber.onDataChannel=a=>{var c;(c=this.onDataChannel)===null||c===void 0||c.call(this,a)},this.subscriber.onTrack=a=>{var c;(c=this.onTrack)===null||c===void 0||c.call(this,a)},this.publisher.onOffer=(a,c)=>{var l;(l=this.onPublisherOffer)===null||l===void 0||l.call(this,a,c)},this.state=Ht.NEW,this.connectionLock=new Ln,this.remoteOfferLock=new Ln}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return G(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return G(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return G(this,void 0,void 0,function*(){n===ji.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return G(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const i=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(e,n))?yield this.subscriber.createAndSetAnswer():void 0}finally{i()}})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return G(this,void 0,void 0,function*(){var i;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(a=>this.ensureTransportConnected(a,e,n)))}finally{r()}})}negotiate(e){return G(this,void 0,void 0,function*(){return new Promise((n,i)=>G(this,void 0,void 0,function*(){const r=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),a=()=>{clearTimeout(r),i("negotiation aborted")};e.signal.addEventListener("abort",a),this.publisher.once(Ko.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Ko.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(c=>{clearTimeout(r),i(c)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===ji.PUBLISHER?this.publisher.getConnectedAddress():e===ji.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return G(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(i.getConnectionState()!=="connected")return new Promise((d,f)=>G(a,void 0,void 0,function*(){const m=()=>{this.log.warn("abort transport connection",this.logContext),_n.clearTimeout(p),f(new At("room connection has been cancelled",lt.Cancelled))};r?.signal.aborted&&m(),r?.signal.addEventListener("abort",m);const p=_n.setTimeout(()=>{r?.signal.removeEventListener("abort",m),f(new At("could not establish pc connection",lt.InternalError))},c);for(;this.state!==Ht.CONNECTED;)if(yield Wn(50),r?.signal.aborted){f(new At("room connection has been cancelled",lt.Cancelled));return}_n.clearTimeout(p),r?.signal.removeEventListener("abort",m),d()}))}()})}}class Kt extends Error{constructor(e,n,i){super(n),this.code=e,this.message=oC(n,Kt.MAX_MESSAGE_BYTES),this.data=i?oC(i,Kt.MAX_DATA_BYTES):void 0}static fromProto(e){return new Kt(e.code,e.message,e.data)}toProto(){return new eA({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new Kt(Kt.ErrorCode[e],Kt.ErrorMessage[e],n)}}Kt.MAX_MESSAGE_BYTES=256;Kt.MAX_DATA_BYTES=15360;Kt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};Kt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const o_=15360;function xy(t){return new TextEncoder().encode(t).length}function oC(t,e){if(xy(t)<=e)return t;let n=0,i=t.length;const r=new TextEncoder;for(;n<i;){const a=Math.floor((n+i+1)/2);r.encode(t.slice(0,a)).length<=e?n=a:i=a-1}return t.slice(0,n)}const wy=2e3;function oh(t,e){if(!e)return 0;let n,i;return"bytesReceived"in t?(n=t.bytesReceived,i=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,i=e.bytesSent),n===void 0||i===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-i)*8*1e3/(t.timestamp-e.timestamp)}const Cy=typeof MediaRecorder<"u";class n8{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const i8=Cy?MediaRecorder:n8;class r8 extends i8{constructor(e,n){if(!Cy)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let i,r;const a=()=>r===void 0,c=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",c),this.removeEventListener("error",l),r?.close(),r=void 0},l=d=>{r?.error(d),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",c),this.removeEventListener("error",l),r=void 0};this.byteStream=new ReadableStream({start:d=>{r=d,i=f=>G(this,void 0,void 0,function*(){let m;if(f.data.arrayBuffer){const p=yield f.data.arrayBuffer();m=new Uint8Array(p)}else if(f.data.byteArray)m=f.data.byteArray;else throw new Error("no data available!");a()||d.enqueue(m)}),this.addEventListener("dataavailable",i)},cancel:()=>{c()}}),this.addEventListener("stop",c),this.addEventListener("error",l)}}function s8(){return Cy}const a8=1e3,o8=1e4;class c_ extends te{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;super(e,n,a),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Sy(()=>G(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>G(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(ke.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new Ln,this.pauseUpstreamLock=new Ln,this.processorLock=new Ln,this.restartLock=new Ln,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==te.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return G(this,void 0,void 0,function*(){var i;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(a=>{qo(this._mediaStreamTrack,a)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e){const a=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Mo(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}finally{a()}}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(a=>{Mo(r??e,a)}))})}waitForDimensions(){return G(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a8;return function*(){var i;if(e.kind===te.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=ci())===null||i===void 0?void 0:i.os)==="iOS"&&(yield Wn(10));const r=Date.now();for(;Date.now()-r<n;){const a=e.dimensions;if(a)return a;yield Wn(50)}throw new Fr("unable to get track dimensions after timeout")}()})}setDeviceId(e){return G(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Ms(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Ms(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return G(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===te.Source.ScreenShare)return;const{deviceId:i,groupId:r}=e._mediaStreamTrack.getSettings(),a=e.kind===te.Kind.Audio?"audioinput":"videoinput";return n?wn.getInstance().normalizeDeviceId(a,i,r):i}()})}mute(){return G(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return G(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return G(this,void 0,void 0,function*(){if(!this.sender)throw new Fr("unable to replace an unpublished track");let i,r;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,r=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),r&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return G(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:i,facingMode:r}=e,a=F5(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const c={audio:!1,video:!1};this.kind===te.Kind.Video?c.video=i||r?{deviceId:i,facingMode:r}:!0:c.audio=i?{deviceId:i}:!0,this.attachedElements.forEach(f=>{qo(this.mediaStreamTrack,f)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const d=(yield navigator.mediaDevices.getUserMedia(c)).getTracks()[0];return yield d.applyConstraints(a),d.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(d),this._constraints=e,this.emit(ke.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ke.Muted:ke.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),JA()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return G(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(ke.UpstreamPaused,this);const i=ci();if(i?.name==="Safari"&&Vi(i.version,"12.0")<0)throw new my("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return G(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(ke.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return G(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return G(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;const c=yield i.processorLock.lock();try{i.log.debug("setting up processor",i.logContext);const l=document.createElement(i.kind),d={kind:i.kind,track:i._mediaStreamTrack,element:l,audioContext:i.audioContext};if(yield n.init(d),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.stopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Mo(i._mediaStreamTrack,l),l.muted=!0,l.play().catch(f=>{f instanceof DOMException&&f.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:f})),setTimeout(()=>{l.play().catch(m=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:m}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:f}))}),i.processor=n,i.processorElement=l,i.processor.processedTrack){for(const f of i.attachedElements)f!==i.processorElement&&r&&(qo(i._mediaStreamTrack,f),Mo(i.processor.processedTrack,f));yield(a=i.sender)===null||a===void 0?void 0:a.replaceTrack(i.processor.processedTrack)}i.emit(ke.TrackProcessorUpdate,i.processor)}finally{c()}}()})}getProcessor(){return this.processor}stopProcessor(){return G(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var i,r;e.processor&&(e.log.debug("stopping processor",e.logContext),(i=e.processor.processedTrack)===null||i===void 0||i.stop(),yield e.processor.destroy(),e.processor=void 0,n||((r=e.processorElement)===null||r===void 0||r.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(ke.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!s8()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new r8(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},o8)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class If extends c_{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;super(e,te.Kind.Audio,n,i,a),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>G(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let c;try{c=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}c&&this.prevStats&&(this._currentBitrate=oh(c,this.prevStats)),this.prevStats=c}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(ke.AudioTrackFeatureUpdate,this,xn.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(ke.AudioTrackFeatureUpdate,this,xn.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===te.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ms(this._constraints.deviceId);return this.source===te.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return G(this,void 0,void 0,function*(){let n;if(e){const i=gy({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return G(this,void 0,void 0,function*(){const i=yield n.restart.call(this,e);return this.checkForSilence(),i})}startMonitor(){Yn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},wy)))}setProcessor(e){return G(this,void 0,void 0,function*(){var n;const i=yield this.processorLock.lock();try{if(!lr()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(r),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(ke.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return G(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(r=>{r.type==="outbound-rtp"&&(i={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),i})}checkForSilence(){return G(this,void 0,void 0,function*(){const e=yield n_(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(ke.AudioSilenceDetected)),e})}}function c8(t,e,n){switch(t.kind){case"audio":return new If(t,e,!1,void 0,n);case"video":return new Uf(t,e,!1,n);default:throw new Fr("unsupported track type: ".concat(t.kind))}}const l8=Object.values(Jl),u8=Object.values(Mv),d8=Object.values(py),f8=[Jl.h180,Jl.h360],h8=[Mv.h180,Mv.h360],m8=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var i,r;return new Ct(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=t.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,t.encoding.priority)}),Hv=["q","h","f"];function qv(t,e,n,i){var r,a;let c=i?.videoEncoding;t&&(c=i?.screenShareEncoding);const l=i?.simulcast,d=i?.scalabilityMode,f=i?.videoCodec;if(!c&&!l&&!d||!e||!n)return[{}];c||(c=g8(t,e,n,f),ot.debug("using video encoding",c));const m=c.maxFramerate,p=new Ct(e,n,c.maxBitrate,c.maxFramerate,c.priority);if(d&&er(f)){const w=new l_(d),S=[];if(w.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(d));const R=ci();if(Mf()||lr()||R?.name==="Chrome"&&Vi(R?.version,"113")<0){const E=w.suffix=="h"?2:3,N=yB(R);for(let M=0;M<w.spatial;M+=1)S.push({rid:Hv[2-M],maxBitrate:c.maxBitrate/Math.pow(E,M),maxFramerate:p.encoding.maxFramerate,scaleResolutionDownBy:N?Math.pow(2,M):void 0});S[0].scalabilityMode=d}else S.push({maxBitrate:c.maxBitrate,maxFramerate:p.encoding.maxFramerate,scalabilityMode:d});return p.encoding.priority&&(S[0].priority=p.encoding.priority,S[0].networkPriority=p.encoding.priority),ot.debug("using svc encoding",{encodings:S}),S}if(!l)return[c];let v=[];t?v=(r=lC(i?.screenShareSimulcastLayers))!==null&&r!==void 0?r:cC(t,p):v=(a=lC(i?.videoSimulcastLayers))!==null&&a!==void 0?a:cC(t,p);let b;if(v.length>0){const w=v[0];v.length>1&&([,b]=v);const S=Math.max(e,n);if(S>=960&&b)return cg(e,n,[w,b,p],m);if(S>=480)return cg(e,n,[w,p],m)}return cg(e,n,[p])}function p8(t,e,n){var i,r,a,c;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&ot.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const l=t.mediaStreamTrack.getSettings(),d=(i=l.width)!==null&&i!==void 0?i:(r=t.dimensions)===null||r===void 0?void 0:r.width,f=(a=l.height)!==null&&a!==void 0?a:(c=t.dimensions)===null||c===void 0?void 0:c.height;return t.source===te.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),qv(t.source===te.Source.ScreenShare,d,f,n)}function g8(t,e,n,i){const r=v8(t,e,n);let{encoding:a}=r[0];const c=Math.max(e,n);for(let l=0;l<r.length;l+=1){const d=r[l];if(a=d.encoding,d.width>=c)break}if(i)switch(i){case"av1":case"h265":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.7;break;case"vp9":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.85;break}return a}function v8(t,e,n){if(t)return d8;const i=e>n?e/n:n/e;return Math.abs(i-16/9)<Math.abs(i-4/3)?l8:u8}function cC(t,e){if(t)return m8(e);const{width:n,height:i}=e,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?f8:h8}function cg(t,e,n,i){const r=[];if(n.forEach((a,c)=>{if(c>=Hv.length)return;const l=Math.min(t,e),f={rid:Hv[c],scaleResolutionDownBy:Math.max(1,l/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate},m=i&&a.encoding.maxFramerate?Math.min(i,a.encoding.maxFramerate):a.encoding.maxFramerate;m&&(f.maxFramerate=m);const p=ec()||c===0;a.encoding.priority&&p&&(f.priority=a.encoding.priority,f.networkPriority=a.encoding.priority),r.push(f)}),lr()&&e_()==="ios"){let a;r.forEach(l=>{a?l.maxFramerate&&l.maxFramerate>a&&(a=l.maxFramerate):a=l.maxFramerate});let c=!0;r.forEach(l=>{var d;l.maxFramerate!=a&&(c&&(c=!1,ot.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),ot.info('Setting framerate of encoding "'.concat((d=l.rid)!==null&&d!==void 0?d:"",'" to ').concat(a)),l.maxFramerate=a)})}return r}function lC(t){if(t)return t.sort((e,n)=>{const{encoding:i}=e,{encoding:r}=n;return i.maxBitrate>r.maxBitrate?1:i.maxBitrate<r.maxBitrate?-1:i.maxBitrate===r.maxBitrate&&i.maxFramerate&&r.maxFramerate?i.maxFramerate>r.maxFramerate?1:-1:0})}class l_{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function y8(t){return t.source===te.Source.ScreenShare||t.constraints.height&&Ms(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const b8=5e3;class Uf extends c_{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(e,te.Kind.Video,n,i,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>G(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(d){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:d}));return}const c=new Map(a.map(d=>[d.rid,d])),l=a.some(d=>d.qualityLimitationReason==="cpu");if(l!==this.isCpuConstrained&&(this.isCpuConstrained=l,this.isCpuConstrained&&this.emit(ke.CpuConstrained)),this.prevStats){let d=0;c.forEach((f,m)=>{var p;const v=(p=this.prevStats)===null||p===void 0?void 0:p.get(m);d+=oh(f,v)}),this._currentBitrate=d}this.prevStats=c}),this.senderLock=new Ln}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Yn())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},wy))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return G(this,void 0,void 0,function*(){var n,i,r,a,c;yield e.pauseUpstream.call(this);try{for(var l=!0,d=Br(this.simulcastCodecs.values()),f;f=yield d.next(),n=f.done,!n;l=!0)a=f.value,l=!1,yield(c=a.sender)===null||c===void 0?void 0:c.replaceTrack(null)}catch(m){i={error:m}}finally{try{!l&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return G(this,void 0,void 0,function*(){var n,i,r,a,c;yield e.resumeUpstream.call(this);try{for(var l=!0,d=Br(this.simulcastCodecs.values()),f;f=yield d.next(),n=f.done,!n;l=!0){a=f.value,l=!1;const m=a;yield(c=m.sender)===null||c===void 0?void 0:c.replaceTrack(m.mediaStreamTrack)}}catch(m){i={error:m}}finally{try{!l&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===te.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===te.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return G(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(r=>{var a;if(r.type==="outbound-rtp"){const c={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(a=r.rid)!==null&&a!==void 0?a:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},l=i.get(r.remoteId);l&&(c.jitter=l.jitter,c.packetsLost=l.packetsLost,c.roundTripTime=l.roundTripTime),n.push(c)}}),n.sort((r,a)=>{var c,l;return((c=a.frameWidth)!==null&&c!==void 0?c:0)-((l=r.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(e){const n=[];for(let i=oi.LOW;i<=oi.HIGH;i+=1)n.push(new dy({quality:i,enabled:i<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(er(this.codec),n)}restartTrack(e){return G(this,void 0,void 0,function*(){var n,i,r,a,c;let l;if(e){const p=gy({video:e});typeof p.video!="boolean"&&(l=p.video)}yield this.restart(l),this.isCpuConstrained=!1;try{for(var d=!0,f=Br(this.simulcastCodecs.values()),m;m=yield f.next(),n=m.done,!n;d=!0){a=m.value,d=!1;const p=a;p.sender&&((c=p.sender.transport)===null||c===void 0?void 0:c.state)!=="closed"&&(p.mediaStreamTrack=this.mediaStreamTrack.clone(),yield p.sender.replaceTrack(p.mediaStreamTrack))}}catch(p){i={error:p}}finally{try{!d&&!n&&(r=f.return)&&(yield r.call(f))}finally{if(i)throw i.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return G(this,arguments,void 0,function(i){var r=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var c,l,d,f,m,p;if(yield n.setProcessor.call(r,i,a),!((m=r.processor)===null||m===void 0)&&m.processedTrack)try{for(var v=!0,b=Br(r.simulcastCodecs.values()),w;w=yield b.next(),c=w.done,!c;v=!0)f=w.value,v=!1,yield(p=f.sender)===null||p===void 0?void 0:p.replaceTrack(r.processor.processedTrack)}catch(S){l={error:S}}finally{try{!v&&!c&&(d=b.return)&&(yield d.call(b))}finally{if(l)throw l.error}}}()})}setDegradationPreference(e){return G(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,i),i}setSimulcastTrackSender(e,n){const i=this.simulcastCodecs.get(e);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},b8))}setPublishingCodecs(e){return G(this,void 0,void 0,function*(){var n,i,r,a,c,l,d;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(er(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const f=[];try{for(n=!0,i=Br(e);r=yield i.next(),a=r.done,!a;n=!0){d=r.value,n=!1;const m=d;if(!this.codec||this.codec===m.codec)yield this.setPublishingLayers(er(m.codec),m.qualities);else{const p=this.simulcastCodecs.get(m.codec);if(this.log.debug("try setPublishingCodec for ".concat(m.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:p})),!p||!p.sender){for(const v of m.qualities)if(v.enabled){f.push(m.codec);break}}else p.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(m.codec),this.logContext),yield uC(p.sender,p.encodings,m.qualities,this.senderLock,er(m.codec),this.log,this.logContext))}}}catch(m){c={error:m}}finally{try{!n&&!a&&(l=i.return)&&(yield l.call(i))}finally{if(c)throw c.error}}return f})}setPublishingLayers(e,n){return G(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield uC(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return G(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,r)=>{var a;return Object.assign(Object.assign({},i),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((a=this.mediaStreamTrack.getSettings().height)!==null&&a!==void 0?a:360)/360)),scalabilityMode:r===0&&er(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),JA()&&this.isInBackground&&this.source===te.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function uC(t,e,n,i,r,a,c){return G(this,void 0,void 0,function*(){const l=yield i.lock();a.debug("setPublishingLayersForSender",Object.assign(Object.assign({},c),{sender:t,qualities:n,senderEncodings:e}));try{const d=t.getParameters(),{encodings:f}=d;if(!f)return;if(f.length!==e.length){a.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},c),{encodings:f,senderEncodings:e}));return}let m=!1;!1&&f[0].scalabilityMode||(r&&n.some(b=>b.enabled)&&n.forEach(b=>b.enabled=!0),f.forEach((v,b)=>{var w;let S=(w=v.rid)!==null&&w!==void 0?w:"";S===""&&(S="q");const R=u_(S),E=n.find(N=>N.quality===R);E&&v.active!==E.enabled&&(m=!0,v.active=E.enabled,a.debug("setting layer ".concat(E.quality," to ").concat(v.active?"enabled":"disabled"),c),ec()&&(E.enabled?(v.scaleResolutionDownBy=e[b].scaleResolutionDownBy,v.maxBitrate=e[b].maxBitrate,v.maxFrameRate=e[b].maxFrameRate):(v.scaleResolutionDownBy=4,v.maxBitrate=10,v.maxFrameRate=2)))})),m&&(d.encodings=f,a.debug("setting encodings",Object.assign(Object.assign({},c),{encodings:d.encodings})),yield t.setParameters(d))}finally{l()}})}function u_(t){switch(t){case"f":return oi.HIGH;case"h":return oi.MEDIUM;case"q":return oi.LOW;default:return oi.HIGH}}function dC(t,e,n,i){if(!n)return[new ba({quality:oi.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(i){const r=n[0].scalabilityMode,a=new l_(r),c=[],l=a.suffix=="h"?1.5:2,d=a.suffix=="h"?2:3;for(let f=0;f<a.spatial;f+=1)c.push(new ba({quality:Math.min(oi.HIGH,a.spatial-1)-f,width:Math.ceil(t/Math.pow(l,f)),height:Math.ceil(e/Math.pow(l,f)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(d,f)):0,ssrc:0}));return c}return n.map(r=>{var a,c,l;const d=(a=r.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let f=u_((c=r.rid)!==null&&c!==void 0?c:"");return new ba({quality:f,width:Math.ceil(t/d),height:Math.ceil(e/d),bitrate:(l=r.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const fC="_lossy",hC="_reliable",S8=2*1e3,lg="leave-reconnect",T8=3e4;var Mi;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Mi||(Mi={}));class x8 extends hr.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Ty.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Mi.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=ot,this.reliableDataSequence=1,this.reliableMessageBuffer=new Qw,this.reliableReceivedState=new KB(T8),this.handleDataChannel=i=>G(this,[i],void 0,function(r){var a=this;let{channel:c}=r;return function*(){if(c){if(c.label===hC)a.reliableDCSub=c;else if(c.label===fC)a.lossyDCSub=c;else return;a.log.debug("on data channel ".concat(c.id,", ").concat(c.label),a.logContext),c.onmessage=a.handleDataMessage}}()}),this.handleDataMessage=i=>G(this,void 0,void 0,function*(){var r,a;const c=yield this.dataProcessLock.lock();try{let l;if(i.data instanceof ArrayBuffer)l=i.data;else if(i.data instanceof Blob)l=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const d=qn.fromBinary(new Uint8Array(l));if(d.sequence>0&&d.participantSid!==""){const f=this.reliableReceivedState.get(d.participantSid);if(f&&d.sequence<=f)return;this.reliableReceivedState.set(d.participantSid,d.sequence)}((r=d.value)===null||r===void 0?void 0:r.case)==="speaker"?this.emit(Ne.ActiveSpeakersUpdate,d.value.value.speakers):(((a=d.value)===null||a===void 0?void 0:a.case)==="user"&&C8(d,d.value.value),this.emit(Ne.DataPacketReceived,d))}finally{c()}}),this.handleDataError=i=>{const a=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:c}=i.error;this.log.error("DataChannel error on ".concat(a,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:c}))}else this.log.error("Unknown DataChannel error on ".concat(a),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const a=i.currentTarget.maxRetransmits===0?tt.LOSSY:tt.RELIABLE;this.updateAndEmitDCBufferStatus(a)},this.handleDisconnect=(i,r)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=d=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(d,"ms. giving up"),this.logContext),this.emit(Ne.Disconnected),this.close()},c=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:c,retryCount:this.reconnectAttempts});if(l===null){a(c);return}i===lg&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=_n.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((i,r)=>{this.pcState===Mi.Connected&&i();const a=()=>{this.off(Ne.Disconnected,c),i()},c=()=>{this.off(Ne.Restarted,a),r()};this.once(Ne.Restarted,a),this.once(Ne.Disconnected,c)}),this.updateAndEmitDCBufferStatus=i=>{const r=this.isBufferStatusLow(i);typeof r<"u"&&r!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,r),this.emit(Ne.DCBufferStatusChanged,r,i))},this.isBufferStatusLow=i=>{const r=this.dataChannelForKind(i);if(r)return i===tt.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(r.bufferedAmount),r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Nt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Co.RR_SIGNAL_DISCONNECTED))},this.log=Hr((n=e.loggerName)!==null&&n!==void 0?n:Fi.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new yy(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Ln,this.dataProcessLock=new Ln,this.dcBufferStatus=new Map([[tt.LOSSY,!0],[tt.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(Ne.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(Ne.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(Ne.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(Ne.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(Ne.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(Ne.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(Ne.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(Ne.SignalRequestResponse,i)}get logContext(){var e,n,i,r,a,c;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(r=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.sid,participant:(c=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||c===void 0?void 0:c.identity,pID:this.participantSid}}join(e,n,i,r){return G(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const a=yield this.client.join(e,n,i,r);return this._isClosed=!1,this.latestJoinResponse=a,this.subscriberPrimary=a.subscriberPrimary,this.pcManager||(yield this.configure(a)),(!this.subscriberPrimary||a.fastPublish)&&this.negotiate(),this.clientConfiguration=a.clientConfiguration,this.emit(Ne.SignalConnected,a),a}catch(a){if(a instanceof At&&a.reason===lt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,i,r);throw a}})}close(){return G(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(Ne.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return G(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new Qw,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return G(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Fr("a track with the same ID has already been published");return new Promise((n,i)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],i(new At("publication of local track timed out, no response from server",lt.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:a=>{clearTimeout(r),n(a)},reject:()=>{clearTimeout(r),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return G(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return G(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==Ht.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new t8(r,e.subscriberPrimary,this.loggerOptions),this.emit(Ne.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(a,c)=>{this.client.sendIceCandidate(a,c)},this.pcManager.onPublisherOffer=(a,c)=>{this.client.sendOffer(a,c)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(a,c,l)=>G(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(a),this.logContext),["closed","disconnected","failed"].includes(c)&&(this.publisherConnectionPromise=void 0),a===Ht.CONNECTED){const m=this.pcState===Mi.New;this.pcState=Mi.Connected,m&&this.emit(Ne.Connected,e)}else a===Ht.FAILED&&this.pcState===Mi.Connected&&(this.pcState=Mi.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?Co.RR_SUBSCRIBER_FAILED:Co.RR_PUBLISHER_FAILED));const d=this.client.isDisconnected||this.client.currentState===Nt.RECONNECTING,f=[Ht.FAILED,Ht.CLOSING,Ht.CLOSED].includes(a);d&&f&&!this._isClosed&&this.emit(Ne.Offline)}),this.pcManager.onTrack=a=>{this.emit(Ne.MediaTrackAdded,a.track,a.streams[0],a.receiver)},w8((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n)=>G(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n)=>G(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:i}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],i(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Ne.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(Ne.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Ne.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Ne.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(Ne.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",Co.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case zo.DISCONNECT:this.emit(Ne.Disconnected,e?.reason),this.close();break;case zo.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(lg);break;case zo.RESUME:this.handleDisconnect(lg)}}}makeRTCConfiguration(e){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),e.iceServers&&!i.iceServers){const r=[];e.iceServers.forEach(a=>{const c={urls:a.urls};a.username&&(c.username=a.username),a.credential&&(c.credential=a.credential),r.push(c)}),i.iceServers=r}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Zl.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(fC,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(hC,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,i){return G(this,void 0,void 0,function*(){if(Ov())return yield this.createTransceiverRTCRtpSender(e,n,i);if(Iv())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new gn("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,i,r){return G(this,void 0,void 0,function*(){if(Ov())return this.createSimulcastTransceiverSender(e,n,i,r);if(Iv())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new gn("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,i){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new gn("publisher is closed");const r=[];e.mediaStream&&r.push(e.mediaStream),Na(e)&&(e.codec=n.videoCodec);const a={direction:"sendonly",streams:r};return i&&(a.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,a)).sender})}createSimulcastTransceiverSender(e,n,i,r){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new gn("publisher is closed");const a={direction:"sendonly"};r&&(a.sendEncodings=r);const c=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,a);if(i.videoCodec)return e.setSimulcastTrackSender(i.videoCodec,c.sender),c.sender})}createRTCRtpSender(e){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new gn("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return G(this,void 0,void 0,function*(){var n,i,r;if(!this._isClosed){if(this.attemptingReconnect){ot.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Zl.DISABLED||((r=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&r!==void 0?r:Ht.NEW)===Ht.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(a){this.reconnectAttempts+=1;let c=!0;a instanceof gn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:a})),c=!1):a instanceof Eo||(this.fullReconnectOnNext=!0),c?this.handleDisconnect("reconnect",Co.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Ne.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return G(this,void 0,void 0,function*(){var n,i,r;try{if(!this.url||!this.token)throw new gn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Ne.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let a;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Eo;a=yield this.join(e??this.url,this.token,this.signalOpts)}catch(c){throw c instanceof At&&c.reason===lt.NotAllowed?new gn("could not reconnect, token might be expired"):new Eo}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Ne.SignalRestarted,a),yield this.waitForPCReconnected(),this.client.currentState!==Nt.CONNECTED)throw new Eo("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Ne.Restarted)}catch(a){const c=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(c){yield this.restartConnection(c);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),a}})}resumeConnection(e){return G(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new gn("could not reconnect, url or token not saved");if(!this.pcManager)throw new gn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Ne.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(r){let a="";throw r instanceof Error&&(a=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof At&&r.reason===lt.NotAllowed?new gn("could not reconnect, token might be expired"):r instanceof At&&r.reason===lt.LeaveRequest?r:new Eo(a)}if(this.emit(Ne.SignalResumed),i){const r=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Nt.CONNECTED)throw new Eo("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i?.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(Ne.Resumed)})}waitForPCInitialConnection(e,n){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new gn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return G(this,void 0,void 0,function*(){this.pcState=Mi.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Wn(S8),!this.pcManager)throw new gn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Mi.Connected}catch(e){throw this.pcState=Mi.Disconnected,new At("could not establish PC connection, ".concat(e.message),lt.InternalError)}})}publishRpcResponse(e,n,i,r){return G(this,void 0,void 0,function*(){const a=new qn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcResponse",value:new QR({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(a,tt.RELIABLE)})}publishRpcAck(e,n){return G(this,void 0,void 0,function*(){const i=new qn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcAck",value:new JR({requestId:n})}});yield this.sendDataPacket(i,tt.RELIABLE)})}sendDataPacket(e,n){return G(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(n),n===tt.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=e.toBinary(),r=this.dataChannelForKind(n);if(r){if(n===tt.RELIABLE&&this.reliableMessageBuffer.push({data:i,sequence:e.sequence}),this.attemptingReconnect)return;r.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return G(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(tt.RELIABLE);const n=this.dataChannelForKind(tt.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(tt.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,i)=>G(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const r=()=>i("Engine closed");for(this.once(Ne.Closing,r);!this.dcBufferStatus.get(e);)yield Wn(10);this.off(Ne.Closing,r),n()}}))}ensureDataTransportConnected(e){return G(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var a;if(!i.pcManager)throw new gn("PC manager is closed");const c=r?i.pcManager.subscriber:i.pcManager.publisher,l=r?"Subscriber":"Publisher";if(!c)throw new At("".concat(l," connection not set"),lt.InternalError);let d=!1;!r&&!i.dataChannelForKind(n,r)&&(i.createDataChannels(),d=!0),!d&&!r&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(d=!0),d&&i.negotiate();const f=i.dataChannelForKind(n,r);if(f?.readyState==="open")return;const m=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<m;){if(c.isICEConnected&&((a=i.dataChannelForKind(n,r))===null||a===void 0?void 0:a.readyState)==="open")return;yield Wn(50)}throw new At("could not establish ".concat(l," connection, state: ").concat(c.getICEConnectionState()),lt.InternalError)}()})}ensurePublisherConnected(e){return G(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Ht.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return G(this,void 0,void 0,function*(){return new Promise((e,n)=>G(this,void 0,void 0,function*(){if(!this.pcManager){n(new Dv("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,r=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Ne.Closing,r),this.pcManager.publisher.once(Ko.RTPVideoPayloadTypes,a=>{const c=new Map;a.forEach(l=>{const d=l.codec.toLowerCase();CB(d)&&c.set(l.payload,d)}),this.emit(Ne.RTPVideoMapUpdate,c)});try{yield this.pcManager.negotiate(i),e()}catch(a){a instanceof Dv&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Co.RR_UNKNOWN),n(a)}finally{this.off(Ne.Closing,r)}}))})}dataChannelForKind(e,n){if(n){if(e===tt.LOSSY)return this.lossyDCSub;if(e===tt.RELIABLE)return this.reliableDCSub}else{if(e===tt.LOSSY)return this.lossyDC;if(e===tt.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var i,r;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const a=this.pcManager.subscriber.getLocalDescription(),c=this.pcManager.subscriber.getRemoteDescription(),l=(r=(i=this.signalOpts)===null||i===void 0?void 0:i.autoSubscribe)!==null&&r!==void 0?r:!0,d=new Array,f=new Array;e.forEach(m=>{m.isDesired!==l&&d.push(m.trackSid),m.isEnabled||f.push(m.trackSid)}),this.client.sendSyncState(new gA({answer:a?Of({sdp:a.sdp,type:a.type}):void 0,offer:c?Of({sdp:c.sdp,type:c.type}):void 0,subscription:new rh({trackSids:d,subscribe:!l,participantTracks:[]}),publishTracks:MB(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:f,datachannelReceiveStates:this.reliableReceivedState.map((m,p)=>new vA({publisherSid:p,lastSeq:m}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(i,r)=>{i?.id!==void 0&&i.id!==null&&e.push(new yA({label:i.label,id:i.id,target:r}))};return n(this.dataChannelForKind(tt.LOSSY),ji.PUBLISHER),n(this.dataChannelForKind(tt.RELIABLE),ji.PUBLISHER),n(this.dataChannelForKind(tt.LOSSY,!0),ji.SUBSCRIBER),n(this.dataChannelForKind(tt.RELIABLE,!0),ji.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&_n.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Yn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Yn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Eo extends Error{}function w8(t){return t!==void 0&&t>13}function C8(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const i=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=i,e.destinationIdentities=i}class Gv{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return Lv(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return G(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(i=>!this.attemptedRegions.find(r=>r.url===i.url));if(n.length>0){const i=n[0];return this.attemptedRegions.push(i),ot.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return G(this,void 0,void 0,function*(){const n=yield fetch("".concat(E8(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const i=yield n.json();return this.lastUpdateAt=Date.now(),i}else throw new At("Could not fetch region settings: ".concat(n.statusText),n.status===401?lt.NotAllowed:lt.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function E8(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class d_{get info(){return this._info}constructor(e,n,i){this.reader=n,this.totalByteSize=i,this._info=e,this.bytesReceived=0}}class k8 extends d_{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength;const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>G(this,void 0,void 0,function*(){try{const{done:n,value:i}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:i.content})}catch{return{done:!0,value:void 0}}}),return(){return G(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return G(this,void 0,void 0,function*(){var e,n,i,r;let a=new Set;try{for(var c=!0,l=Br(this),d;d=yield l.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const f=r;a.add(f)}}catch(f){n={error:f}}finally{try{!c&&!e&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return Array.from(a)})}}class R8 extends d_{constructor(e,n,i){super(e,n,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const i=gf(e.chunkIndex),r=this.receivedChunks.get(i);if(r&&r.version>e.version)return;this.receivedChunks.set(i,e),this.bytesReceived+=e.content.byteLength;const a=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,a)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder;return{next:()=>G(this,void 0,void 0,function*(){try{const{done:i,value:r}=yield e.read();return i?{done:!0,value:void 0}:(this.handleChunkReceived(r),{done:!1,value:n.decode(r.content)})}catch{return{done:!0,value:void 0}}}),return(){return G(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return G(this,void 0,void 0,function*(){var e,n,i,r;let a="";try{for(var c=!0,l=Br(this),d;d=yield l.next(),e=d.done,!e;c=!0)r=d.value,c=!1,a+=r}catch(f){n={error:f}}finally{try{!c&&!e&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return a})}}class f_{constructor(e,n,i){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=i,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return G(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class A8 extends f_{}class _8 extends f_{}class h_ extends te{constructor(e,n,i,r,a){super(e,i,a),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ke.Muted:ke.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=i=>{i.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(ke.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return G(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),wy)),OB()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:r,rtpTimestamp:a}=i;a&&this.rtpTimestamp!==a&&(this.emit(ke.TimeSyncUpdate,{timestamp:r,rtpTimestamp:a}),this.rtpTimestamp=a)}};e()}}class m_ extends h_{constructor(e,n,i,r,a,c){super(e,n,te.Kind.Audio,i,c),this.monitorReceiver=()=>G(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=oh(l,this.prevStats)),this.prevStats=l}),this.audioContext=r,this.webAudioPluginNodes=[],a&&(this.sinkId=a.deviceId)}setVolume(e){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):i.volume=e;lr()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(lr())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return G(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(Uv(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&Uv(e)&&e.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{i.connect(r),i=r}),this.gainNode=e.createGain(),i.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(ke.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(ke.AudioPlaybackFailed,r)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return G(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const ug=100;class P8 extends h_{constructor(e,n,i,r,a){super(e,n,te.Kind.Video,i,a),this.elementInfos=[],this.monitorReceiver=()=>G(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const c=yield this.getReceiverStats();c&&this.prevStats&&this.receiver&&(this._currentBitrate=oh(c,this.prevStats)),this.prevStats=c}),this.debouncedHandleResize=Sy(()=>{this.updateDimensions()},ug),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?qo(this._mediaStreamTrack,n):Mo(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new D8(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===e);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return G(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,i="",r=new Map;return e.forEach(a=>{a.type==="inbound-rtp"?(i=a.codecId,n={type:"video",streamId:a.id,framesDecoded:a.framesDecoded,framesDropped:a.framesDropped,framesReceived:a.framesReceived,packetsReceived:a.packetsReceived,packetsLost:a.packetsLost,frameWidth:a.frameWidth,frameHeight:a.frameHeight,pliCount:a.pliCount,firCount:a.firCount,nackCount:a.nackCount,jitter:a.jitter,timestamp:a.timestamp,bytesReceived:a.bytesReceived,decoderImplementation:a.decoderImplementation}):a.type==="codec"&&r.set(a.id,a)}),n&&i!==""&&r.get(i)&&(n.mimeType=r.get(i).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(i=>i.element===e);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const i=this.elementInfos.reduce((l,d)=>Math.max(l,d.visibilityChangedAt||0),0),r=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,a=this.elementInfos.some(l=>l.pictureInPicture),c=this.elementInfos.some(l=>l.visible)&&!r||a;if(this.lastVisible!==c){if(!c&&Date.now()-i<ug){_n.setTimeout(()=>{this.updateVisibility()},ug);return}this.lastVisible=c,this.emit(ke.VisibilityChanged,c,this)}}updateDimensions(){var e,n;let i=0,r=0;const a=this.getPixelDensity();for(const c of this.elementInfos){const l=c.width()*a,d=c.height()*a;l+d>i+r&&(i=l,r=d)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:i,height:r},this.emit(ke.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?Kw():n||(Kw()>2?2:1)}}class D8{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=i=>{var r;const{target:a,isIntersecting:c}=i;a===this.element&&(this.isIntersecting=c,this.isPiP=_l(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var i,r,a;(r=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=_l(this.element),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=_l(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=e,this.isIntersecting=n??Kv(e),this.isPiP=Yn()&&_l(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,i;this.isIntersecting=Kv(this.element),this.isPiP=_l(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,$w().observe(this.element),Yw().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,i,r,a;(e=$w())===null||e===void 0||e.unobserve(this.element),(n=Yw())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(a=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||a===void 0||a.removeEventListener("pagehide",this.onLeavePiP)}}function _l(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Kv(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function Kv(t,e){const n=e||window;let i=t.offsetTop,r=t.offsetLeft;const a=t.offsetWidth,c=t.offsetHeight,{hidden:l}=t,{display:d}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,i+=t.offsetTop,r+=t.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+c>n.pageYOffset&&r+a>n.pageXOffset&&!l&&d!=="none"}class Ur extends hr.EventEmitter{constructor(e,n,i,r){var a;super(),this.metadataMuted=!1,this.encryption=si.NONE,this.log=ot,this.handleMuted=()=>{this.emit(ke.Muted)},this.handleUnmuted=()=>{this.emit(ke.Unmuted)},this.log=Hr((a=r?.loggerName)!==null&&a!==void 0?a:Fi.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=i,this.source=te.Source.Unknown}setTrack(e){this.track&&(this.track.off(ke.Muted,this.handleMuted),this.track.off(ke.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(ke.Muted,this.handleMuted),e.on(ke.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),st(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==si.NONE}get audioTrack(){if(ir(this.track))return this.track}get videoTrack(){if(Na(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=te.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===te.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(Ur||(Ur={}));class Yv extends Ur{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(ke.Ended)},this.handleCpuConstrained=()=>{this.track&&Na(this.track)&&this.emit(ke.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(e){this.track&&(this.track.off(ke.Ended,this.handleTrackEnded),this.track.off(ke.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(ke.Ended,this.handleTrackEnded),e.on(ke.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return G(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return G(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return G(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return G(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(ir(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(xn.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(xn.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(xn.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(xn.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||i.add(xn.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(xn.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function ch(t,e){return G(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:a}=i_(t);let c=a.audio,l=a.video;if(i&&typeof a.audio=="object"&&(a.audio.processor=i),r&&typeof a.video=="object"&&(a.video.processor=r),t.audio&&typeof a.audio=="object"&&typeof a.audio.deviceId=="string"){const p=a.audio.deviceId;a.audio.deviceId={exact:p},n=!0,c=Object.assign(Object.assign({},a.audio),{deviceId:{ideal:p}})}if(a.video&&typeof a.video=="object"&&typeof a.video.deviceId=="string"){const p=a.video.deviceId;a.video.deviceId={exact:p},n=!0,l=Object.assign(Object.assign({},a.video),{deviceId:{ideal:p}})}(a.audio===!0||typeof a.audio=="object"&&!a.audio.deviceId)&&(a.audio={deviceId:"default"}),a.video===!0?a.video={deviceId:"default"}:typeof a.video=="object"&&!a.video.deviceId&&(a.video.deviceId="default");const d=t_(a,s_,a_),f=gy(d),m=navigator.mediaDevices.getUserMedia(f);a.audio&&(wn.userMediaPromiseMap.set("audioinput",m),m.catch(()=>wn.userMediaPromiseMap.delete("audioinput"))),a.video&&(wn.userMediaPromiseMap.set("videoinput",m),m.catch(()=>wn.userMediaPromiseMap.delete("videoinput")));try{const p=yield m;return yield Promise.all(p.getTracks().map(v=>G(this,void 0,void 0,function*(){const b=v.kind==="audio";let w=b?d.audio:d.video;(typeof w=="boolean"||!w)&&(w={});let S;const R=b?f.audio:f.video;typeof R!="boolean"&&(S=R);const E=v.getSettings().deviceId;S?.deviceId&&Ms(S.deviceId)!==E?S.deviceId=E:S||(S={deviceId:E});const N=c8(v,S,e);return N.kind===te.Kind.Video?N.source=te.Source.Camera:N.kind===te.Kind.Audio&&(N.source=te.Source.Microphone),N.mediaStream=p,ir(N)&&i?yield N.setProcessor(i):Na(N)&&r&&(yield N.setProcessor(r)),N})))}catch(p){if(!n)throw p;return ch(Object.assign(Object.assign({},t),{audio:c,video:l}),e)}})}function N8(t){return G(this,void 0,void 0,function*(){return(yield ch({audio:!1,video:!0}))[0]})}function M8(t){return G(this,void 0,void 0,function*(){return(yield ch({audio:!0,video:!1}))[0]})}var As;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(As||(As={}));function O8(t){switch(t){case Ol.EXCELLENT:return As.Excellent;case Ol.GOOD:return As.Good;case Ol.POOR:return As.Poor;case Ol.LOST:return As.Lost;default:return As.Unknown}}class p_ extends hr.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===Ca.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Vo.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,i,r,a,c){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Ca.STANDARD;var d;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=As.Unknown,this.log=ot,this.log=Hr((d=c?.loggerName)!==null&&d!==void 0?d:Fi.Participant),this.loggerOptions=c,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=i,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=l,this._attributes=a??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Oo,this.once(ye.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(te.Source.Camera);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(te.Source.Microphone);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(te.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Vo.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Vo.ACTIVE&&this.emit(ye.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(ye.ParticipantMetadataChanged,i)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ye.ParticipantNameChanged,e)}_setAttributes(e){const n=IB(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(ye.AttributesChanged,n)}setPermissions(e){var n,i,r,a,c,l;const d=this.permissions,f=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||e.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||e.hidden!==((a=this.permissions)===null||a===void 0?void 0:a.hidden)||e.recorder!==((c=this.permissions)===null||c===void 0?void 0:c.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((m,p)=>{var v;return m!==((v=this.permissions)===null||v===void 0?void 0:v.canPublishSources[p])})||e.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=e,f&&this.emit(ye.ParticipantPermissionsChanged,d),f}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ye.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=O8(e),n!==this._connectionQuality&&this.emit(ye.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>ir(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(ke.Muted,()=>{this.emit(ye.TrackMuted,e)}),e.on(ke.Unmuted,()=>{this.emit(ye.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case te.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case te.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function I8(t){var e,n,i;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new mA({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=t.allowAll)!==null&&i!==void 0?i:!1,trackSids:t.allowedTrackSids||[]})}const mC=15e3;class U8 extends p_{constructor(e,n,i,r,a){super(e,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=si.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Oo)},this.handleReconnected=()=>{var c,l;(l=(c=this.reconnectFuture)===null||c===void 0?void 0:c.resolve)===null||l===void 0||l.call(c),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var c,l,d,f,m,p;this.reconnectFuture&&(this.reconnectFuture.promise.catch(v=>this.log.warn(v.message,this.logContext)),(l=(c=this.reconnectFuture)===null||c===void 0?void 0:c.reject)===null||l===void 0||l.call(c,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((f=(d=this.signalConnectedFuture).reject)===null||f===void 0||f.call(d,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(p=(m=this.activeAgentFuture)===null||m===void 0?void 0:m.reject)===null||p===void 0||p.call(m,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=c=>{var l,d;c.participant&&this.updateInfo(c.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Oo),(d=(l=this.signalConnectedFuture).resolve)===null||d===void 0||d.call(l)},this.handleSignalRequestResponse=c=>{const{requestId:l,reason:d,message:f}=c,m=this.pendingSignalRequests.get(l);m&&(d!==fy.OK&&m.reject(new zw(f,d)),this.pendingSignalRequests.delete(l))},this.handleDataPacket=c=>{switch(c.value.case){case"rpcResponse":let l=c.value.value,d=null,f=null;l.value.case==="payload"?d=l.value.value:l.value.case==="error"&&(f=Kt.fromProto(l.value.value)),this.handleIncomingRpcResponse(l.requestId,d,f);break;case"rpcAck":let m=c.value.value;this.handleIncomingRpcAck(m.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(c=>I8(c)))},this.onTrackUnmuted=c=>{this.onTrackMuted(c,c.isUpstreamPaused)},this.onTrackMuted=(c,l)=>{if(l===void 0&&(l=!0),!c.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),st(c)));return}this.engine.updateMuteStatus(c.sid,l)},this.onTrackUpstreamPaused=c=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),st(c))),this.onTrackMuted(c,!0)},this.onTrackUpstreamResumed=c=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),st(c))),this.onTrackMuted(c,c.isMuted)},this.onTrackFeatureUpdate=c=>{const l=this.audioTrackPublications.get(c.sid);if(!l){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(c.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(l.trackSid,l.getTrackFeatures())},this.onTrackCpuConstrained=(c,l)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),st(l))),this.emit(ye.LocalTrackCpuConstrained,c,l)},this.handleSubscribedQualityUpdate=c=>G(this,void 0,void 0,function*(){var l,d,f,m,p;if(!(!((p=this.roomOptions)===null||p===void 0)&&p.dynacast))return;const v=this.videoTrackPublications.get(c.trackSid);if(!v){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}if(!v.videoTrack)return;const b=yield v.videoTrack.setPublishingCodecs(c.subscribedCodecs);try{for(var w=!0,S=Br(b),R;R=yield S.next(),l=R.done,!l;w=!0){m=R.value,w=!1;const E=m;dB(E)&&(this.log.debug("publish ".concat(E," for ").concat(v.videoTrack.sid),Object.assign(Object.assign({},this.logContext),st(v))),yield this.publishAdditionalCodecForTrack(v.videoTrack,E,v.options))}}catch(E){d={error:E}}finally{try{!w&&!l&&(f=S.return)&&(yield f.call(S))}finally{if(d)throw d.error}}}),this.handleLocalTrackUnpublished=c=>{const l=this.trackPublications.get(c.trackSid);if(!l){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}this.unpublishTrack(l.track)},this.handleTrackEnded=c=>G(this,void 0,void 0,function*(){if(c.source===te.Source.ScreenShare||c.source===te.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),st(c))),this.unpublishTrack(c);else if(c.isUserProvided)yield c.mute();else if(Ir(c)||xs(c))try{if(Yn())try{const l=yield navigator?.permissions.query({name:c.source===te.Source.Camera?"camera":"microphone"});if(l&&l.state==="denied")throw this.log.warn("user has revoked access to ".concat(c.source),Object.assign(Object.assign({},this.logContext),st(c))),l.onchange=()=>{l.state!=="denied"&&(c.isMuted||c.restartTrack(),l.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}c.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),st(c))),Ir(c)?yield c.restartTrack({deviceId:"default"}):yield c.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),st(c))),yield c.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=r,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=a}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==si.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(Ne.RemoteMute,(i,r)=>{const a=this.trackPublications.get(i);!a||!a.track||(r?a.mute():a.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(Ne.Connected,this.handleReconnected).on(Ne.SignalConnected,this.handleSignalConnected).on(Ne.SignalRestarted,this.handleReconnected).on(Ne.SignalResumed,this.handleReconnected).on(Ne.Restarting,this.handleReconnecting).on(Ne.Resuming,this.handleReconnecting).on(Ne.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Ne.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Ne.Closing,this.handleClosing).on(Ne.SignalRequestResponse,this.handleSignalRequestResponse).on(Ne.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return G(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return G(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return G(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return G(this,arguments,void 0,function(n){var i=this;let{metadata:r,name:a,attributes:c}=n;return function*(){return new Promise((l,d)=>G(i,void 0,void 0,function*(){var f,m;try{let p=!1;const v=yield this.engine.client.sendUpdateLocalMetadata((f=r??this.metadata)!==null&&f!==void 0?f:"",(m=a??this.name)!==null&&m!==void 0?m:"",c),b=performance.now();for(this.pendingSignalRequests.set(v,{resolve:l,reject:w=>{d(w),p=!0},values:{name:a,metadata:r,attributes:c}});performance.now()-b<5e3&&!p;){if((!a||this.name===a)&&(!r||this.metadata===r)&&(!c||Object.entries(c).every(w=>{let[S,R]=w;return this.attributes[S]===R||R===""&&!this.attributes[S]}))){this.pendingSignalRequests.delete(v),l();return}yield Wn(50)}d(new zw("Request to update local metadata timed out","TimeoutError"))}catch(p){p instanceof Error&&d(p)}}))}()})}setCameraEnabled(e,n,i){return this.setTrackEnabled(te.Source.Camera,e,n,i)}setMicrophoneEnabled(e,n,i){return this.setTrackEnabled(te.Source.Microphone,e,n,i)}setScreenShareEnabled(e,n,i){return this.setTrackEnabled(te.Source.ScreenShare,e,n,i)}setPermissions(e){const n=this.permissions,i=super.setPermissions(e);return i&&n&&this.emit(ye.ParticipantPermissionsChanged,n),i}setE2EEEnabled(e){return G(this,void 0,void 0,function*(){this.encryptionType=e?si.GCM:si.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,i,r){return G(this,void 0,void 0,function*(){var a,c;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(e);if(n)if(l)yield l.unmute();else{let d;if(this.pendingPublishing.has(e)){const f=yield this.waitForPendingPublicationOfSource(e);return f||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield f?.unmute(),f}this.pendingPublishing.add(e);try{switch(e){case te.Source.Camera:d=yield this.createTracks({video:(a=i)!==null&&a!==void 0?a:!0});break;case te.Source.Microphone:d=yield this.createTracks({audio:(c=i)!==null&&c!==void 0?c:!0});break;case te.Source.ScreenShare:d=yield this.createScreenTracks(Object.assign({},i));break;default:throw new Fr(e)}}catch(f){throw d?.forEach(m=>{m.stop()}),f instanceof Error&&this.emit(ye.MediaDevicesError,f,Vv(e)),this.pendingPublishing.delete(e),f}for(const f of d){const m=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);e===te.Source.Microphone&&ir(f)&&m.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),f.startPreConnectBuffer())}try{const f=[];for(const p of d)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),st(p))),f.push(this.publishTrack(p,r));[l]=yield Promise.all(f)}catch(f){throw d?.forEach(m=>{m.stop()}),f}finally{this.pendingPublishing.delete(e)}}else if(!l?.track&&this.pendingPublishing.has(e)&&(l=yield this.waitForPendingPublicationOfSource(e),l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),l&&l.track)if(e===te.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const d=this.getTrackPublication(te.Source.ScreenShareAudio);d&&d.track&&this.unpublishTrack(d.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return G(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(te.Source.Camera)||this.pendingPublishing.has(te.Source.Microphone))){this.pendingPublishing.add(te.Source.Camera),this.pendingPublishing.add(te.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(te.Source.Camera),this.pendingPublishing.delete(te.Source.Microphone)}}})}createTracks(e){return G(this,void 0,void 0,function*(){var n,i;e??(e={});const r=t_(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield ch(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(l=>(ir(l)&&(this.microphoneError=void 0,l.setAudioContext(this.audioContext),l.source=te.Source.Microphone,this.emit(ye.AudioStreamAcquired)),Na(l)&&(this.cameraError=void 0,l.source=te.Source.Camera),l))}catch(a){throw a instanceof Error&&(e.audio&&(this.microphoneError=a),e.video&&(this.cameraError=a)),a}})}createScreenTracks(e){return G(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new my("getDisplayMedia not supported");e.resolution===void 0&&!vB()&&(e.resolution=py.h1080fps30.resolution);const n=NB(e),i=yield navigator.mediaDevices.getDisplayMedia(n),r=i.getVideoTracks();if(r.length===0)throw new Fr("no video track found");const a=new Uf(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=te.Source.ScreenShare,e.contentHint&&(a.mediaStreamTrack.contentHint=e.contentHint);const c=[a];if(i.getAudioTracks().length>0){this.emit(ye.AudioStreamAcquired);const l=new If(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=te.Source.ScreenShareAudio,c.push(l)}return c})}publishTrack(e,n){return G(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return G(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var l,d,f,m;Ir(i)&&i.setAudioContext(a.audioContext),yield(l=a.reconnectFuture)===null||l===void 0?void 0:l.promise,a.republishPromise&&!c&&(yield a.republishPromise),Go(i)&&a.pendingPublishPromises.has(i)&&(yield a.pendingPublishPromises.get(i));let p;if(i instanceof MediaStreamTrack)p=i.getConstraints();else{p=i.constraints;let E;switch(i.source){case te.Source.Microphone:E="audioinput";break;case te.Source.Camera:E="videoinput"}E&&a.activeDeviceMap.has(E)&&(p=Object.assign(Object.assign({},p),{deviceId:a.activeDeviceMap.get(E)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new If(i,p,!0,a.audioContext,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;case"video":i=new Uf(i,p,!0,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;default:throw new Fr("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});let v;if(a.trackPublications.forEach(E=>{E.track&&E.track===i&&(v=E)}),v)return a.log.warn("track has already been published, skipping",Object.assign(Object.assign({},a.logContext),st(v))),v;const b="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,w=(d=r?.forceStereo)!==null&&d!==void 0?d:b;w&&(r||(r={}),r.dtx===void 0&&a.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},a.logContext),st(i))),r.red===void 0&&a.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(f=r.dtx)!==null&&f!==void 0||(r.dtx=!1),(m=r.red)!==null&&m!==void 0||(r.red=!1));const S=Object.assign(Object.assign({},a.roomOptions.publishDefaults),r);!bB()&&a.roomOptions.e2ee&&(a.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},a.logContext)),S.simulcast=!1),S.source&&(i.source=S.source);const R=new Promise((E,N)=>G(a,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Nt.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:st(i)}));const M=setTimeout(()=>{N(new Vw("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(M);const I=yield this.publish(i,S,w);E(I)}else try{const M=yield this.publish(i,S,w);E(M)}catch(M){N(M)}}catch(M){N(M)}}));a.pendingPublishPromises.set(i,R);try{return yield R}catch(E){throw E}finally{a.pendingPublishPromises.delete(i)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Oo),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),st(e))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(r=>UB(r)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),st(e))),!1)}publish(e,n,i){return G(this,void 0,void 0,function*(){var r,a,c,l,d,f,m,p,v,b;if(!this.hasPermissionsToPublish(e))throw new Vw("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(W=>Go(e)&&W.source===e.source)&&e.source!==te.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),st(e))),n.stopMicTrackOnMute&&ir(e)&&(e.stopOnMute=!0),e.source===te.Source.ScreenShare&&ec()&&(n.simulcast=!1),n.videoCodec==="av1"&&!mB()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!pB()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=zv),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(W=>n.videoCodec===vf(W.mime))||(n.videoCodec=vf(this.enabledPublishVideoCodecs[0].mime)));const S=n.videoCodec;e.on(ke.Muted,this.onTrackMuted),e.on(ke.Unmuted,this.onTrackUnmuted),e.on(ke.Ended,this.handleTrackEnded),e.on(ke.UpstreamPaused,this.onTrackUpstreamPaused),e.on(ke.UpstreamResumed,this.onTrackUpstreamResumed),e.on(ke.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const R=[],E=!(!((r=n.dtx)!==null&&r!==void 0)||r),N=e.getSourceTrackSettings();N.autoGainControl&&R.push(xn.TF_AUTO_GAIN_CONTROL),N.echoCancellation&&R.push(xn.TF_ECHO_CANCELLATION),N.noiseSuppression&&R.push(xn.TF_NOISE_SUPPRESSION),N.channelCount&&N.channelCount>1&&R.push(xn.TF_STEREO),E&&R.push(xn.TF_NO_DTX),Ir(e)&&e.hasPreConnectBuffer&&R.push(xn.TF_PRECONNECT_BUFFER);const M=new xv({cid:e.mediaStreamTrack.id,name:n.name,type:te.kindToProto(e.kind),muted:e.isMuted,source:te.sourceToProto(e.source),disableDtx:E,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((a=n.red)!==null&&a!==void 0)||a),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:R});let I;if(e.kind===te.Kind.Video){let W={width:0,height:0};try{W=yield e.waitForDimensions()}catch{const se=(l=(c=this.roomOptions.videoCaptureDefaults)===null||c===void 0?void 0:c.resolution)!==null&&l!==void 0?l:Jl.h720.resolution;W={width:se.width,height:se.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{dims:W}))}M.width=W.width,M.height=W.height,xs(e)&&(er(S)&&(e.source===te.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),st(e))))),n.scalabilityMode=(d=n.scalabilityMode)!==null&&d!==void 0?d:"L3T3_KEY"),M.simulcastCodecs=[new Tv({codec:S,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:zv}),n.backupCodec&&S!==n.backupCodec.codec&&M.encryption===si.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),M.simulcastCodecs.push(new Tv({codec:n.backupCodec.codec,cid:""})))),I=qv(e.source===te.Source.ScreenShare,M.width,M.height,n),M.layers=dC(M.width,M.height,I,er(n.videoCodec))}else e.kind===te.Kind.Audio&&(I=[{maxBitrate:(f=n.audioPreset)===null||f===void 0?void 0:f.maxBitrate,priority:(p=(m=n.audioPreset)===null||m===void 0?void 0:m.priority)!==null&&p!==void 0?p:"high",networkPriority:(b=(v=n.audioPreset)===null||v===void 0?void 0:v.priority)!==null&&b!==void 0?b:"high"}]);if(!this.engine||this.engine.isClosed)throw new gn("cannot publish track when not connected");const A=()=>G(this,void 0,void 0,function*(){var W,re,se;if(!this.engine.pcManager)throw new gn("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,I),this.emit(ye.LocalSenderCreated,e.sender,e),xs(e)&&((W=n.degradationPreference)!==null&&W!==void 0||(n.degradationPreference=y8(e)),e.setDegradationPreference(n.degradationPreference)),I)if(ec()&&e.kind===te.Kind.Audio){let fe;for(const Ee of this.engine.pcManager.publisher.getTransceivers())if(Ee.sender===e.sender){fe=Ee;break}fe&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:fe,codec:"opus",maxbr:!((re=I[0])===null||re===void 0)&&re.maxBitrate?I[0].maxBitrate/1e3:0})}else e.codec&&er(e.codec)&&(!((se=I[0])===null||se===void 0)&&se.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:M.cid,codec:e.codec,maxbr:I[0].maxBitrate/1e3});yield this.engine.negotiate()});let L;const z=new Promise((W,re)=>G(this,void 0,void 0,function*(){var se;try{L=yield this.engine.addTrack(M),W(L)}catch(fe){e.sender&&(!((se=this.engine.pcManager)===null||se===void 0)&&se.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(Ee=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{error:Ee}))})),re(fe)}}));if(this.enabledPublishVideoCodecs.length>0)L=(yield Promise.all([z,A()]))[0];else{L=yield z;let W;if(L.codecs.forEach(re=>{W===void 0&&(W=re.mimeType)}),W&&e.kind===te.Kind.Video){const re=vf(W);re!==S&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{codec:re})),n.videoCodec=re,I=qv(e.source===te.Source.ScreenShare,M.width,M.height,n))}yield A()}const H=new Yv(e.kind,L,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(H.on(ke.CpuConstrained,W=>this.onTrackCpuConstrained(W,H)),H.options=n,e.sid=L.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:I,trackInfo:L})),xs(e)?e.startMonitor(this.engine.client):Ir(e)&&e.startMonitor(),this.addTrackPublication(H),this.emit(ye.LocalTrackPublished,H),Ir(e)&&L.audioFeatures.includes(xn.TF_PRECONNECT_BUFFER)){const W=e.getPreConnectBuffer(),re=e.getPreConnectBufferMimeType();this.on(ye.LocalTrackSubscribed,se=>{if(se.trackSid===L.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),st(e))),e.stopPreConnectBuffer()}}),W&&new Promise((fe,Ee)=>G(this,void 0,void 0,function*(){var Ae,Pe,K,ie,J,_e;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),st(e)));const le=setTimeout(()=>{Ee(new Error("agent not active within 10 seconds"))},1e4),Te=yield this.waitUntilActiveAgentPresent();clearTimeout(le),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),st(e)));const Me=yield this.streamBytes({name:"preconnect-buffer",mimeType:re,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[Te.identity],attributes:{trackId:H.trackSid,sampleRate:String((J=N.sampleRate)!==null&&J!==void 0?J:"48000"),channels:String((_e=N.channelCount)!==null&&_e!==void 0?_e:"1")}});try{for(var F=!0,Z=Br(W),de;de=yield Z.next(),Ae=de.done,!Ae;F=!0){ie=de.value,F=!1;const De=ie;yield Me.write(De)}}catch(De){Pe={error:De}}finally{try{!F&&!Ae&&(K=Z.return)&&(yield K.call(Z))}finally{if(Pe)throw Pe.error}}yield Me.close(),fe()}catch(le){Ee(le)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),st(e)))}).catch(fe=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{error:fe}))})}return H})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,i){return G(this,void 0,void 0,function*(){var r;if(this.encryptionType!==si.NONE)return;let a;if(this.trackPublications.forEach(b=>{b.track&&b.track===e&&(a=b)}),!a)throw new Fr("track is not published");if(!xs(e))throw new Fr("track is not a video track");const c=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),i),l=p8(e,n,c);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),st(e)));return}const d=e.addSimulcastTrack(n,l);if(!d)return;const f=new xv({cid:d.mediaStreamTrack.id,type:te.kindToProto(e.kind),muted:e.isMuted,source:te.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:c.videoCodec,cid:d.mediaStreamTrack.id}]});if(f.layers=dC(f.width,f.height,l),!this.engine||this.engine.isClosed)throw new gn("cannot publish track when not connected");const m=()=>G(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,d,c,l),yield this.engine.negotiate()}),v=(yield Promise.all([this.engine.addTrack(f),m()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:v}))})}unpublishTrack(e,n){return G(this,void 0,void 0,function*(){var i,r;if(Go(e)){const f=this.pendingPublishPromises.get(e);f&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),st(e))),yield f)}const a=this.getPublicationForTrack(e),c=a?st(a):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),c)),!a||!a.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),c));return}e=a.track,e.off(ke.Muted,this.onTrackMuted),e.off(ke.Unmuted,this.onTrackUnmuted),e.off(ke.Ended,this.handleTrackEnded),e.off(ke.UpstreamPaused,this.onTrackUpstreamPaused),e.off(ke.UpstreamResumed,this.onTrackUpstreamResumed),e.off(ke.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?e.stop():e.stopMonitor();let l=!1;const d=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Ht.FAILED&&d)try{for(const f of this.engine.pcManager.publisher.getTransceivers())f.sender===d&&(f.direction="inactive",l=!0);if(this.engine.removeTrack(d)&&(l=!0),xs(e)){for(const[,f]of e.simulcastCodecs)f.sender&&(this.engine.removeTrack(f.sender)&&(l=!0),f.sender=void 0);e.simulcastCodecs.clear()}}catch(f){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),c),{error:f}))}switch(this.trackPublications.delete(a.trackSid),a.kind){case te.Kind.Audio:this.audioTrackPublications.delete(a.trackSid);break;case te.Kind.Video:this.videoTrackPublications.delete(a.trackSid);break}return this.emit(ye.LocalTrackUnpublished,a),a.setTrack(void 0),l&&(yield this.engine.negotiate()),a})}unpublishTracks(e){return G(this,void 0,void 0,function*(){return(yield Promise.all(e.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(e){return G(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((a,c)=>G(i,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(d=>{d.track&&(n&&(d.options=Object.assign(Object.assign({},d.options),n)),l.push(d))}),yield Promise.all(l.map(d=>G(this,void 0,void 0,function*(){const f=d.track;yield this.unpublishTrack(f,!1),r&&!f.isMuted&&f.source!==te.Source.ScreenShare&&f.source!==te.Source.ScreenShareAudio&&(Ir(f)||xs(f))&&!f.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:d.trackSid})),yield f.restartTrack()),yield this.publishOrRepublishTrack(f,d.options,!0)}))),a()}catch(l){c(l)}finally{this.republishPromise=void 0}})),yield i.republishPromise}()})}publishData(e){return G(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const a=r.reliable?tt.RELIABLE:tt.LOSSY,c=r.destinationIdentities,l=r.topic,d=new qn({kind:a,value:{case:"user",value:new WR({participantIdentity:i.identity,payload:n,destinationIdentities:c,topic:l})}});yield i.engine.sendDataPacket(d,a)}()})}publishDtmf(e,n){return G(this,void 0,void 0,function*(){const i=new qn({kind:tt.RELIABLE,value:{case:"sipDtmf",value:new XR({code:e,digit:n})}});yield this.engine.sendDataPacket(i,tt.RELIABLE)})}sendChatMessage(e,n){return G(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n?.attachments},r=new qn({value:{case:"chatMessage",value:new pv(Object.assign(Object.assign({},i),{timestamp:It.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(r,tt.RELIABLE),this.emit(ye.ChatMessage,i),i})}editChatMessage(e,n){return G(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),r=new qn({value:{case:"chatMessage",value:new pv(Object.assign(Object.assign({},i),{timestamp:It.parse(i.timestamp),editTimestamp:It.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,tt.RELIABLE),this.emit(ye.ChatMessage,i),i})}sendText(e,n){return G(this,void 0,void 0,function*(){var i;const r=crypto.randomUUID(),c=new TextEncoder().encode(e).byteLength,l=(i=n?.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),d=new Array(l?l.length+1:1).fill(0),f=(p,v)=>{var b;d[v]=p;const w=d.reduce((S,R)=>S+R,0);(b=n?.onProgress)===null||b===void 0||b.call(n,w)},m=yield this.streamText({streamId:r,totalSize:c,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:l,attributes:n?.attributes});return yield m.write(e),f(1,0),yield m.close(),n?.attachments&&l&&(yield Promise.all(n.attachments.map((p,v)=>G(this,void 0,void 0,function*(){return this._sendFile(l[v],p,{topic:n.topic,mimeType:p.type,onProgress:b=>{f(b,v+1)}})})))),m.info})}streamText(e){return G(this,void 0,void 0,function*(){var n,i;const r=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),a={id:r,mimeType:"text/plain",timestamp:Date.now(),topic:(i=e?.topic)!==null&&i!==void 0?i:"",size:e?.totalSize,attributes:e?.attributes},c=new vv({streamId:r,mimeType:a.mimeType,topic:a.topic,timestamp:ma(a.timestamp),totalLength:ma(e?.totalSize),attributes:a.attributes,contentHeader:{case:"textHeader",value:new oA({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?gv.UPDATE:gv.CREATE})}}),l=e?.destinationIdentities,d=new qn({destinationIdentities:l,value:{case:"streamHeader",value:c}});yield this.engine.sendDataPacket(d,tt.RELIABLE);let f=0;const m=this,p=new WritableStream({write(w){return G(this,void 0,void 0,function*(){for(const S of PB(w,mC)){yield m.engine.waitForBufferStatusLow(tt.RELIABLE);const R=new yv({content:S,streamId:r,chunkIndex:ma(f)}),E=new qn({destinationIdentities:l,value:{case:"streamChunk",value:R}});yield m.engine.sendDataPacket(E,tt.RELIABLE),f+=1}})},close(){return G(this,void 0,void 0,function*(){const w=new bv({streamId:r}),S=new qn({destinationIdentities:l,value:{case:"streamTrailer",value:w}});yield m.engine.sendDataPacket(S,tt.RELIABLE)})},abort(w){console.log("Sink error:",w)}});let v=()=>G(this,void 0,void 0,function*(){yield b.close()});m.engine.once(Ne.Closing,v);const b=new A8(p,a,()=>this.engine.off(Ne.Closing,v));return b})}sendFile(e,n){return G(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,e,n),{id:i}})}_sendFile(e,n,i){return G(this,void 0,void 0,function*(){var r;const a=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(r=i?.mimeType)!==null&&r!==void 0?r:n.type,topic:i?.topic,destinationIdentities:i?.destinationIdentities}),c=n.stream().getReader();for(;;){const{done:l,value:d}=yield c.read();if(l)break;yield a.write(d)}return yield a.close(),a.info})}streamBytes(e){return G(this,void 0,void 0,function*(){var n,i,r,a,c;const l=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),d=e?.destinationIdentities,f={id:l,mimeType:(i=e?.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(r=e?.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:e?.attributes,size:e?.totalSize,name:(a=e?.name)!==null&&a!==void 0?a:"unknown"},m=new vv({totalLength:ma((c=f.size)!==null&&c!==void 0?c:0),mimeType:f.mimeType,streamId:l,topic:f.topic,timestamp:ma(Date.now()),attributes:f.attributes,contentHeader:{case:"byteHeader",value:new cA({name:f.name})}}),p=new qn({destinationIdentities:d,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(p,tt.RELIABLE);let v=0;const b=new Ln,w=this.engine,S=this.log,R=new WritableStream({write(N){return G(this,void 0,void 0,function*(){const M=yield b.lock();let I=0;try{for(;I<N.byteLength;){const A=N.slice(I,I+mC);yield w.waitForBufferStatusLow(tt.RELIABLE);const L=new qn({destinationIdentities:d,value:{case:"streamChunk",value:new yv({content:A,streamId:l,chunkIndex:ma(v)})}});yield w.sendDataPacket(L,tt.RELIABLE),v+=1,I+=A.byteLength}}finally{M()}})},close(){return G(this,void 0,void 0,function*(){const N=new bv({streamId:l}),M=new qn({destinationIdentities:d,value:{case:"streamTrailer",value:N}});yield w.sendDataPacket(M,tt.RELIABLE)})},abort(N){S.error("Sink error:",N)}});return new _8(R,f)})}performRpc(e){return G(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:r,method:a,payload:c,responseTimeout:l=1e4}=n;return function*(){return new Promise((f,m)=>G(i,void 0,void 0,function*(){var p,v,b,w;if(xy(c)>o_){m(Kt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((v=(p=this.engine.latestJoinResponse)===null||p===void 0?void 0:p.serverInfo)===null||v===void 0)&&v.version&&Vi((w=(b=this.engine.latestJoinResponse)===null||b===void 0?void 0:b.serverInfo)===null||w===void 0?void 0:w.version,"1.8.0")<0){m(Kt.builtIn("UNSUPPORTED_SERVER"));return}const S=crypto.randomUUID();yield this.publishRpcRequest(r,S,a,c,l-2e3);const R=setTimeout(()=>{this.pendingAcks.delete(S),m(Kt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(S),clearTimeout(E)},2e3);this.pendingAcks.set(S,{resolve:()=>{clearTimeout(R)},participantIdentity:r});const E=setTimeout(()=>{this.pendingResponses.delete(S),m(Kt.builtIn("RESPONSE_TIMEOUT"))},l);this.pendingResponses.set(S,{resolve:(N,M)=>{clearTimeout(E),this.pendingAcks.has(S)&&(console.warn("RPC response received before ack",S),this.pendingAcks.delete(S),clearTimeout(R)),M?m(M):f(N??"")},participantIdentity:r})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,i){const r=this.pendingResponses.get(e);r?(r.resolve(n,i),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,i,r,a){return G(this,void 0,void 0,function*(){const c=new qn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcRequest",value:new ZR({id:n,method:i,payload:r,responseTimeoutMs:a,version:1})}});yield this.engine.sendDataPacket(c,tt.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:r}]of this.pendingResponses)i===e&&(r(null,Kt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var i,r;const a=this.trackPublications.get(n.sid);if(a){const c=a.isMuted||((r=(i=a.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&r!==void 0?r:!1);c!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),st(a)),{mutedOnServer:c})),this.engine.client.sendMuteTrack(n.sid,c))}}),!0):!1}setActiveAgent(e){var n,i,r,a;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,e):(a=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||a===void 0||a.call(r,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Oo),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(i=>{const r=i.track;r&&(e instanceof MediaStreamTrack?(Ir(r)||xs(r))&&r.mediaStreamTrack===e&&(n=i):e===r&&(n=i))}),n}waitForPendingPublicationOfSource(e){return G(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(a=>{let[c]=a;return c.source===e});if(r)return r[1];yield Wn(20)}})}}class Lf extends Ur{constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=a=>{this.setTrack(void 0),this.emit(ke.Ended,a)},this.handleVisibilityChange=a=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),this.logContext),this.visible=a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{this.log.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),this.logContext),this.videoDimensionsAdaptiveStream=a,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const r=new rh({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new tA({participantSid:"",trackSids:[this.trackSid]})]});this.emit(ke.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?Ur.SubscriptionStatus.Unsubscribed:super.isSubscribed?Ur.SubscriptionStatus.Subscribed:Ur.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Ur.PermissionStatus.Allowed:Ur.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===e.height||(ig(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&ig(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:oi.HIGH}setTrack(e){const n=this.subscriptionStatus,i=this.permissionStatus,r=this.track;r!==e&&(r&&(r.off(ke.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(ke.VisibilityChanged,this.handleVisibilityChange),r.off(ke.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(ke.Unsubscribed,r)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(ke.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(ke.VisibilityChanged,this.handleVisibilityChange),e.on(ke.Ended,this.handleEnded),this.emit(ke.Subscribed,e)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(ke.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?ke.Muted:ke.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(ke.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(ke.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return ig(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new lA({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===te.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)Zw(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=LB(this.trackInfo,this.requestedMaxQuality);i&&Zw(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:oi.HIGH})),e.quality=oi.HIGH)}this.emit(ke.UpdateSettings,e)}}class jf extends p_{static fromParticipantInfo(e,n,i){return new jf(e,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,i,r,a,c,l){let d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:Ca.STANDARD;super(n,i||"",r,a,c,l,d),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(ke.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(ke.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(ke.SubscriptionPermissionChanged,n=>{this.emit(ye.TrackSubscriptionPermissionChanged,e,n)}),e.on(ke.SubscriptionStatusChanged,n=>{this.emit(ye.TrackSubscriptionStatusChanged,e,n)}),e.on(ke.Subscribed,n=>{this.emit(ye.TrackSubscribed,n,e)}),e.on(ke.Unsubscribed,n=>{this.emit(ye.TrackUnsubscribed,n,e)}),e.on(ke.SubscriptionFailed,n=>{this.emit(ye.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.Source.Microphone;this.volumeMap.set(n,e);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,i,r,a,c){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(m=>{!l&&e.kind===m.kind.toString()&&(l=m)}),!l){if(c===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ye.TrackSubscriptionFailed,n);return}c===void 0&&(c=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,r,a,c-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),st(l))),this.emit(ye.TrackSubscriptionFailed,n);return}const d=e.kind==="video";let f;return d?f=new P8(e,n,r,a):f=new m_(e,n,r,this.audioContext,this.audioOutput),f.source=l.source,f.isMuted=l.isMuted,f.setMediaStream(i),f.start(),l.setTrack(f),this.volumeMap.has(l.source)&&Bv(f)&&ir(f)&&f.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,i=new Map;return e.tracks.forEach(r=>{var a,c;let l=this.getTrackPublicationBySid(r.sid);if(l)l.updateInfo(r);else{const d=te.kindFromProto(r.type);if(!d)return;l=new Lf(d,r,(a=this.signalClient.connectOptions)===null||a===void 0?void 0:a.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(c=this.loggerOptions)===null||c===void 0?void 0:c.loggerName}),l.updateInfo(r),i.set(r.sid,l);const f=Array.from(this.trackPublications.values()).find(m=>m.source===l?.source);f&&l.source!==te.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:st(f),newTrack:st(l)})),this.addTrackPublication(l)}n.set(r.sid,l)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),st(r))),this.unpublishTrack(r.trackSid,!0))}),i.forEach(r=>{this.emit(ye.TrackPublished,r)}),!0}unpublishTrack(e,n){const i=this.trackPublications.get(e);if(!i)return;const{track:r}=i;switch(r&&(r.stop(),i.setTrack(void 0)),this.trackPublications.delete(e),i.kind){case te.Kind.Audio:this.audioTrackPublications.delete(e);break;case te.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(ye.TrackUnpublished,i)}setAudioOutput(e){return G(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(i=>{var r;ir(i.track)&&Bv(i.track)&&n.push(i.track.setSinkId((r=e.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:i})),super.emit(e,...i)}}var at;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(at||(at={}));const L8=4*1e3;class qr extends hr.EventEmitter{constructor(e){var n,i,r,a;if(super(),n=this,this.state=at.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=ot,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(c,l,d)=>G(this,void 0,void 0,function*(){var f;if(!gB())throw lr()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const m=yield this.disconnectLock.lock();if(this.state===at.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),m(),Promise.resolve();if(this.connectFuture)return m(),this.connectFuture.promise;this.setAndEmitConnectionState(at.Connecting),((f=this.regionUrlProvider)===null||f===void 0?void 0:f.getServerUrl().toString())!==c&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Lv(new URL(c))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Gv(c,l):this.regionUrlProvider.updateToken(l),this.regionUrlProvider.fetchRegionSettings().then(b=>{var w;(w=this.regionUrlProvider)===null||w===void 0||w.setServerReportedRegions(b)}).catch(b=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:b}))}));const p=(b,w,S)=>G(this,void 0,void 0,function*(){var R,E;this.abortController&&this.abortController.abort();const N=new AbortController;this.abortController=N,m?.();try{yield this.attemptConnection(S??c,l,d,N),this.abortController=void 0,b()}catch(M){if(this.regionUrlProvider&&M instanceof At&&M.reason!==lt.Cancelled&&M.reason!==lt.NotAllowed){let I=null;try{I=yield this.regionUrlProvider.getNextBestRegionUrl((R=this.abortController)===null||R===void 0?void 0:R.signal)}catch(A){if(A instanceof At&&(A.status===401||A.reason===lt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),w(A);return}}I&&!(!((E=this.abortController)===null||E===void 0)&&E.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(M.message,". Retrying with another region: ").concat(I),this.logContext),this.recreateEngine(),yield p(b,w,I)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Xw(M)),w(M))}else{let I=Bi.UNKNOWN_REASON;M instanceof At&&(I=Xw(M)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,I),w(M)}}}),v=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Oo((b,w)=>{p(b,w,v)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(c,l,d,f,m,p)=>G(this,void 0,void 0,function*(){var v,b,w;const S=yield d.join(c,l,{autoSubscribe:f.autoSubscribe,adaptiveStream:typeof m.adaptiveStream=="object"?!0:m.adaptiveStream,maxRetries:f.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:f.websocketTimeout},p.signal);let R=S.serverInfo;if(R||(R={version:S.serverVersion,region:S.serverRegion}),this.serverInfo=R,this.log.debug("connected to Livekit Server ".concat(Object.entries(R).map(E=>{let[N,M]=E;return"".concat(N,": ").concat(M)}).join(", ")),{room:(v=S.room)===null||v===void 0?void 0:v.name,roomSid:(b=S.room)===null||b===void 0?void 0:b.sid,identity:(w=S.participant)===null||w===void 0?void 0:w.identity}),!R.version)throw new tB("unknown server version");return R.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),m.dynacast=!1),S}),this.applyJoinResponse=c=>{const l=c.participant;if(this.localParticipant.sid=l.sid,this.localParticipant.identity=l.identity,this.localParticipant.setEnabledPublishCodecs(c.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(c.sifTrailer)}catch(d){this.log.error(d instanceof Error?d.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:d}))}this.handleParticipantUpdates([l,...c.otherParticipants]),c.room&&this.handleRoomUpdate(c.room)},this.attemptConnection=(c,l,d,f)=>G(this,void 0,void 0,function*(){var m,p;this.state===at.Reconnecting||this.isResuming||!((m=this.engine)===null||m===void 0)&&m.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((p=this.regionUrlProvider)===null||p===void 0)&&p.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Ty),d),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const v=yield this.connectSignal(c,l,this.engine,this.connOptions,this.options,f);this.applyJoinResponse(v),this.setupLocalParticipantEvents(),this.emit(he.SignalConnected)}catch(v){yield this.engine.close(),this.recreateEngine();const b=new At("could not establish signal connection",lt.ServerUnreachable);throw v instanceof Error&&(b.message="".concat(b.message,": ").concat(v.message)),v instanceof At&&(b.reason=v.reason,b.status=v.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:v})),b}if(f.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new At("Connection attempt aborted",lt.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,f)}catch(v){throw yield this.engine.close(),this.recreateEngine(),v}Yn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Yn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(at.Connected),this.emit(he.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return G(n,[...l],void 0,function(){var f=this;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var p,v,b,w;const S=yield f.disconnectLock.lock();try{if(f.state===at.Disconnected){f.log.debug("already disconnected",f.logContext);return}f.log.info("disconnect from room",Object.assign({},f.logContext)),(f.state===at.Connecting||f.state===at.Reconnecting||f.isResuming)&&(f.log.warn("abort connection attempt",f.logContext),(p=f.abortController)===null||p===void 0||p.abort(),(b=(v=f.connectFuture)===null||v===void 0?void 0:v.reject)===null||b===void 0||b.call(v,new At("Client initiated disconnect",lt.Cancelled)),f.connectFuture=void 0),!((w=f.engine)===null||w===void 0)&&w.client.isDisconnected||(yield f.engine.client.sendLeave()),f.engine&&(yield f.engine.close()),f.handleDisconnect(m,Bi.CLIENT_INITIATED),f.engine=void 0}finally{S()}}()})},this.onPageLeave=()=>G(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>G(this,void 0,void 0,function*(){const c=[],l=ci();if(l&&l.os==="iOS"){const d="livekit-dummy-audio-el";let f=document.getElementById(d);if(!f){f=document.createElement("audio"),f.id=d,f.autoplay=!0,f.hidden=!0;const m=ng();m.enabled=!0;const p=new MediaStream([m]);f.srcObject=p,document.addEventListener("visibilitychange",()=>{f&&(f.srcObject=document.hidden?null:p,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(f),this.once(he.Disconnected,()=>{f?.remove(),f=null})}c.push(f)}this.remoteParticipants.forEach(d=>{d.audioTrackPublications.forEach(f=>{f.track&&f.track.attachedElements.forEach(m=>{c.push(m)})})});try{yield Promise.all([this.acquireAudioContext(),...c.map(d=>(d.muted=!1,d.play()))]),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}),this.startVideo=()=>G(this,void 0,void 0,function*(){const c=[];for(const l of this.remoteParticipants.values())l.videoTrackPublications.forEach(d=>{var f;(f=d.track)===null||f===void 0||f.attachedElements.forEach(m=>{c.includes(m)||c.push(m)})});yield Promise.all(c.map(l=>l.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(l=>{l.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const c of this.remoteParticipants.values())this.handleParticipantDisconnected(c.identity,c);this.setAndEmitConnectionState(at.Reconnecting)&&this.emit(he.Reconnecting)},this.handleSignalRestarted=c=>G(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(c.serverRegion),Object.assign(Object.assign({},this.logContext),{region:c.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(c);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(l){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:l}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:c.serverRegion}))}catch{return}this.setAndEmitConnectionState(at.Connected),this.emit(he.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=c=>{c.forEach(l=>{var d;if(l.identity===this.localParticipant.identity){this.localParticipant.updateInfo(l);return}l.identity===""&&(l.identity=(d=this.sidToIdentity.get(l.sid))!==null&&d!==void 0?d:"");let f=this.remoteParticipants.get(l.identity);l.state===Vo.DISCONNECTED?this.handleParticipantDisconnected(l.identity,f):f=this.getOrCreateParticipant(l.identity,l)})},this.handleActiveSpeakersUpdate=c=>{const l=[],d={};c.forEach(f=>{if(d[f.sid]=!0,f.sid===this.localParticipant.sid)this.localParticipant.audioLevel=f.level,this.localParticipant.setIsSpeaking(!0),l.push(this.localParticipant);else{const m=this.getRemoteParticipantBySid(f.sid);m&&(m.audioLevel=f.level,m.setIsSpeaking(!0),l.push(m))}}),d[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(f=>{d[f.sid]||(f.audioLevel=0,f.setIsSpeaking(!1))}),this.activeSpeakers=l,this.emitWhenConnected(he.ActiveSpeakersChanged,l)},this.handleSpeakersChanged=c=>{const l=new Map;this.activeSpeakers.forEach(f=>{const m=this.remoteParticipants.get(f.identity);m&&m.sid!==f.sid||l.set(f.sid,f)}),c.forEach(f=>{let m=this.getRemoteParticipantBySid(f.sid);f.sid===this.localParticipant.sid&&(m=this.localParticipant),m&&(m.audioLevel=f.level,m.setIsSpeaking(f.active),f.active?l.set(f.sid,m):l.delete(f.sid))});const d=Array.from(l.values());d.sort((f,m)=>m.audioLevel-f.audioLevel),this.activeSpeakers=d,this.emitWhenConnected(he.ActiveSpeakersChanged,d)},this.handleStreamStateUpdate=c=>{c.streamStates.forEach(l=>{const d=this.getRemoteParticipantBySid(l.participantSid);if(!d)return;const f=d.getTrackPublicationBySid(l.trackSid);if(!f||!f.track)return;const m=te.streamStateFromProto(l.state);m!==f.track.streamState&&(f.track.streamState=m,d.emit(ye.TrackStreamStateChanged,f,f.track.streamState),this.emitWhenConnected(he.TrackStreamStateChanged,f,f.track.streamState,d))})},this.handleSubscriptionPermissionUpdate=c=>{const l=this.getRemoteParticipantBySid(c.participantSid);if(!l)return;const d=l.getTrackPublicationBySid(c.trackSid);d&&d.setAllowed(c.allowed)},this.handleSubscriptionError=c=>{const l=Array.from(this.remoteParticipants.values()).find(f=>f.trackPublications.has(c.trackSid));if(!l)return;const d=l.getTrackPublicationBySid(c.trackSid);d&&d.setSubscriptionError(c.err)},this.handleDataPacket=c=>{const l=this.remoteParticipants.get(c.participantIdentity);if(c.value.case==="user")this.handleUserPacket(l,c.value.value,c.kind);else if(c.value.case==="transcription")this.handleTranscription(l,c.value.value);else if(c.value.case==="sipDtmf")this.handleSipDtmf(l,c.value.value);else if(c.value.case==="chatMessage")this.handleChatMessage(l,c.value.value);else if(c.value.case==="metrics")this.handleMetrics(c.value.value,l);else if(c.value.case==="streamHeader")this.handleStreamHeader(c.value.value,c.participantIdentity);else if(c.value.case==="streamChunk")this.handleStreamChunk(c.value.value);else if(c.value.case==="streamTrailer")this.handleStreamTrailer(c.value.value);else if(c.value.case==="rpcRequest"){const d=c.value.value;this.handleIncomingRpcRequest(c.participantIdentity,d.id,d.method,d.payload,d.responseTimeoutMs,d.version)}},this.handleUserPacket=(c,l,d)=>{this.emit(he.DataReceived,l.payload,c,d,l.topic),c?.emit(ye.DataReceived,l.payload,d)},this.handleSipDtmf=(c,l)=>{this.emit(he.SipDTMFReceived,l,c),c?.emit(ye.SipDTMFReceived,l)},this.bufferedSegments=new Map,this.handleTranscription=(c,l)=>{const d=l.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(l.transcribedParticipantIdentity),f=d?.trackPublications.get(l.trackId),m=kB(l,this.transcriptionReceivedTimes);f?.emit(ke.TranscriptionReceived,m),d?.emit(ye.TranscriptionReceived,m,f),this.emit(he.TranscriptionReceived,m,d,f)},this.handleChatMessage=(c,l)=>{const d=RB(l);this.emit(he.ChatMessage,d,c)},this.handleMetrics=(c,l)=>{this.emit(he.MetricsReceived,c,l)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(he.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=c=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:c})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(he.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(he.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(he.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>G(this,void 0,void 0,function*(){var c;((c=ci())===null||c===void 0?void 0:c.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(he.MediaDevicesChanged)}),this.handleRoomUpdate=c=>{const l=this.roomInfo;this.roomInfo=c,l&&l.metadata!==c.metadata&&this.emitWhenConnected(he.RoomMetadataChanged,c.metadata),l?.activeRecording!==c.activeRecording&&this.emitWhenConnected(he.RecordingStatusChanged,c.activeRecording)},this.handleConnectionQualityUpdate=c=>{c.updates.forEach(l=>{if(l.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(l.quality);return}const d=this.getRemoteParticipantBySid(l.participantSid);d&&d.setConnectionQuality(l.quality)})},this.onLocalParticipantMetadataChanged=c=>{this.emit(he.ParticipantMetadataChanged,c,this.localParticipant)},this.onLocalParticipantNameChanged=c=>{this.emit(he.ParticipantNameChanged,c,this.localParticipant)},this.onLocalAttributesChanged=c=>{this.emit(he.ParticipantAttributesChanged,c,this.localParticipant)},this.onLocalTrackMuted=c=>{this.emit(he.TrackMuted,c,this.localParticipant)},this.onLocalTrackUnmuted=c=>{this.emit(he.TrackUnmuted,c,this.localParticipant)},this.onTrackProcessorUpdate=c=>{var l;(l=c?.onPublish)===null||l===void 0||l.call(c,this)},this.onLocalTrackPublished=c=>G(this,void 0,void 0,function*(){var l,d,f,m,p,v;(l=c.track)===null||l===void 0||l.on(ke.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=c.track)===null||d===void 0||d.on(ke.Restarted,this.onLocalTrackRestarted),(p=(m=(f=c.track)===null||f===void 0?void 0:f.getProcessor())===null||m===void 0?void 0:m.onPublish)===null||p===void 0||p.call(m,this),this.emit(he.LocalTrackPublished,c,this.localParticipant),Ir(c.track)&&(yield c.track.checkForSilence())&&this.emit(he.LocalAudioSilenceDetected,c);const b=yield(v=c.track)===null||v===void 0?void 0:v.getDeviceId(!1),w=Vv(c.source);w&&b&&b!==this.localParticipant.activeDeviceMap.get(w)&&(this.localParticipant.activeDeviceMap.set(w,b),this.emit(he.ActiveDeviceChanged,w,b))}),this.onLocalTrackUnpublished=c=>{var l,d;(l=c.track)===null||l===void 0||l.off(ke.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=c.track)===null||d===void 0||d.off(ke.Restarted,this.onLocalTrackRestarted),this.emit(he.LocalTrackUnpublished,c,this.localParticipant)},this.onLocalTrackRestarted=c=>G(this,void 0,void 0,function*(){const l=yield c.getDeviceId(!1),d=Vv(c.source);d&&l&&l!==this.localParticipant.activeDeviceMap.get(d)&&(this.log.debug("local track restarted, setting ".concat(d," ").concat(l," active"),this.logContext),this.localParticipant.activeDeviceMap.set(d,l),this.emit(he.ActiveDeviceChanged,d,l))}),this.onLocalConnectionQualityChanged=c=>{this.emit(he.ConnectionQualityChanged,c,this.localParticipant)},this.onMediaDevicesError=(c,l)=>{this.emit(he.MediaDevicesError,c,l)},this.onLocalParticipantPermissionsChanged=c=>{this.emit(he.ParticipantPermissionsChanged,c,this.localParticipant)},this.onLocalChatMessageSent=c=>{this.emit(he.ChatMessage,c,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},e8),e),this.log=Hr((i=this.options.loggerName)!==null&&i!==void 0?i:Fi.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},s_),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},a_),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},QB),e?.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Ln,this.localParticipant=new U8("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ms(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ms(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",Ms(this.options.audioOutput.deviceId)).catch(c=>this.log.warn("Could not set audio output: ".concat(c.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),Yn()){const c=new AbortController;(a=navigator.mediaDevices)===null||a===void 0||a.addEventListener("devicechange",this.handleDeviceChange,{signal:c.signal}),qr.cleanupRegistry&&qr.cleanupRegistry.register(this,()=>{c.abort()})}}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,n,i,r,a,c){return G(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),c!==1){yield this.engine.publishRpcResponse(e,n,null,Kt.builtIn("UNSUPPORTED_VERSION"));return}const l=this.rpcHandlers.get(i);if(!l){yield this.engine.publishRpcResponse(e,n,null,Kt.builtIn("UNSUPPORTED_METHOD"));return}let d=null,f=null;try{const m=yield l({requestId:n,callerIdentity:e,payload:r,responseTimeout:a});xy(m)>o_?(d=Kt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):f=m}catch(m){m instanceof Kt?d=m:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),m),d=Kt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,f,d)})}setE2EEEnabled(e){return G(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new jB(this.options.e2ee),this.e2eeManager.on(Ps.ParticipantEncryptionStatusChanged,(n,i)=>{_B(i)&&(this.isE2EEEnabled=n),this.emit(he.ParticipantEncryptionStatusChanged,n,i)}),this.e2eeManager.on(Ps.EncryptionError,n=>this.emit(he.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return G(this,void 0,void 0,function*(){return this.state===at.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const i=r=>{r.sid!==""&&(this.engine.off(Ne.RoomUpdate,i),e(r.sid))};this.engine.on(Ne.RoomUpdate,i),this.once(he.Disconnected,()=>{this.engine.off(Ne.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new x8(this.options),this.engine.on(Ne.ParticipantUpdate,this.handleParticipantUpdates).on(Ne.RoomUpdate,this.handleRoomUpdate).on(Ne.SpeakersChanged,this.handleSpeakersChanged).on(Ne.StreamStateChanged,this.handleStreamStateUpdate).on(Ne.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Ne.SubscriptionError,this.handleSubscriptionError).on(Ne.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Ne.MediaTrackAdded,(e,n,i)=>{this.onTrackAdded(e,n,i)}).on(Ne.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Ne.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Ne.DataPacketReceived,this.handleDataPacket).on(Ne.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(at.SignalReconnecting)&&this.emit(he.SignalReconnecting)}).on(Ne.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(at.Connected)&&this.emit(he.Reconnected)}).on(Ne.SignalResumed,()=>{this.bufferedEvents=[],(this.state===at.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(Ne.Restarting,this.handleRestarting).on(Ne.SignalRestarted,this.handleSignalRestarted).on(Ne.Offline,()=>{this.setAndEmitConnectionState(at.Reconnecting)&&this.emit(he.Reconnecting)}).on(Ne.DCBufferStatusChanged,(e,n)=>{this.emit(he.DCBufferStatusChanged,e,n)}).on(Ne.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:r}=i;return r===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ye.LocalTrackSubscribed,n),this.emitWhenConnected(he.LocalTrackSubscribed,n,this.localParticipant)}).on(Ne.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(he.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return wn.getInstance().getDevices(e,n)}prepareConnection(e,n){return G(this,void 0,void 0,function*(){if(this.state===at.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Lv(new URL(e))&&n){this.regionUrlProvider=new Gv(e,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===at.Disconnected&&(this.regionUrl=i,yield fetch(jv(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(jv(e),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return G(this,void 0,void 0,function*(){let i=()=>{},r;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new Ji({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new Ji({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new Ji({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new Ji({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>G(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Ji({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>G(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Ji({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new Ji({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),i=()=>G(this,void 0,void 0,function*(){const a=this.engine.client.onLeave;a&&a(new sh({reason:Bi.CLIENT_INITIATED,action:zo.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new Ji({scenario:{case:"subscriberBandwidth",value:ma(n)}});break;case"leave-full-reconnect":r=new Ji({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return G(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var l,d,f,m,p,v,b;let w=!0,S=!1;const R=c?{exact:r}:r;if(i==="audioinput"){S=a.localParticipant.audioTrackPublications.size===0;const E=(l=a.getActiveDevice(i))!==null&&l!==void 0?l:a.options.audioCaptureDefaults.deviceId;a.options.audioCaptureDefaults.deviceId=R;const N=Array.from(a.localParticipant.audioTrackPublications.values()).filter(I=>I.source===te.Source.Microphone);try{w=(yield Promise.all(N.map(I=>{var A;return(A=I.audioTrack)===null||A===void 0?void 0:A.setDeviceId(R)}))).every(I=>I===!0)}catch(I){throw a.options.audioCaptureDefaults.deviceId=E,I}const M=N.some(I=>{var A,L;return(L=(A=I.track)===null||A===void 0?void 0:A.isMuted)!==null&&L!==void 0?L:!1});w&&M&&(S=!0)}else if(i==="videoinput"){S=a.localParticipant.videoTrackPublications.size===0;const E=(d=a.getActiveDevice(i))!==null&&d!==void 0?d:a.options.videoCaptureDefaults.deviceId;a.options.videoCaptureDefaults.deviceId=R;const N=Array.from(a.localParticipant.videoTrackPublications.values()).filter(I=>I.source===te.Source.Camera);try{w=(yield Promise.all(N.map(I=>{var A;return(A=I.videoTrack)===null||A===void 0?void 0:A.setDeviceId(R)}))).every(I=>I===!0)}catch(I){throw a.options.videoCaptureDefaults.deviceId=E,I}const M=N.some(I=>{var A,L;return(L=(A=I.track)===null||A===void 0?void 0:A.isMuted)!==null&&L!==void 0?L:!1});w&&M&&(S=!0)}else if(i==="audiooutput"){if(S=!0,!Uv()&&!a.options.webAudioMix||a.options.webAudioMix&&a.audioContext&&!("setSinkId"in a.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");a.options.webAudioMix&&(r=(f=yield wn.getInstance().normalizeDeviceId("audiooutput",r))!==null&&f!==void 0?f:""),(m=(b=a.options).audioOutput)!==null&&m!==void 0||(b.audioOutput={});const E=(p=a.getActiveDevice(i))!==null&&p!==void 0?p:a.options.audioOutput.deviceId;a.options.audioOutput.deviceId=r;try{a.options.webAudioMix&&((v=a.audioContext)===null||v===void 0||v.setSinkId(r)),yield Promise.all(Array.from(a.remoteParticipants.values()).map(N=>N.setAudioOutput({deviceId:r})))}catch(N){throw a.options.audioOutput.deviceId=E,N}}return S&&(a.localParticipant.activeDeviceMap.set(i,r),a.emit(he.ActiveDeviceChanged,i,r)),w}()})}setupLocalParticipantEvents(){this.localParticipant.on(ye.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ye.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ye.AttributesChanged,this.onLocalAttributesChanged).on(ye.TrackMuted,this.onLocalTrackMuted).on(ye.TrackUnmuted,this.onLocalTrackUnmuted).on(ye.LocalTrackPublished,this.onLocalTrackPublished).on(ye.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ye.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ye.MediaDevicesError,this.onMediaDevicesError).on(ye.AudioStreamAcquired,this.startAudio).on(ye.ChatMessage,this.onLocalChatMessageSent).on(ye.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,i){if(this.state===at.Connecting||this.state===at.Reconnecting){const m=()=>{this.onTrackAdded(e,n,i),p()},p=()=>{this.off(he.Reconnected,m),this.off(he.Connected,m),this.off(he.Disconnected,p)};this.once(he.Reconnected,m),this.once(he.Connected,m),this.once(he.Disconnected,p);return}if(this.state===at.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=hB(n.id),a=r[0];let c=r[1],l=e.id;if(c&&c.startsWith("TR")&&(l=c),a===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const d=Array.from(this.remoteParticipants.values()).find(m=>m.sid===a);if(!d){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(a),this.logContext);return}let f;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?f=this.options.adaptiveStream:f={}),d.addSubscribedMediaTrack(e,l,n,i,f)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==at.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(a=>{r.unpublishTrack(a.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var a,c,l;r.track&&this.localParticipant.unpublishTrack(r.track,e),e?((a=r.track)===null||a===void 0||a.detach(),(c=r.track)===null||c===void 0||c.stop()):(l=r.track)===null||l===void 0||l.stopMonitor()}),this.localParticipant.off(ye.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ye.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ye.AttributesChanged,this.onLocalAttributesChanged).off(ye.TrackMuted,this.onLocalTrackMuted).off(ye.TrackUnmuted,this.onLocalTrackUnmuted).off(ye.LocalTrackPublished,this.onLocalTrackPublished).off(ye.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ye.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ye.MediaDevicesError,this.onMediaDevicesError).off(ye.AudioStreamAcquired,this.startAudio).off(ye.ChatMessage,this.onLocalChatMessageSent).off(ye.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Yn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(at.Disconnected),this.emit(he.Disconnected,n)}}}handleParticipantDisconnected(e,n){var i;this.remoteParticipants.delete(e),n&&(n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(he.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleStreamHeader(e,n){return G(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const r=this.byteStreamHandlers.get(e.topic);if(!r){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let a;const c={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:gf(e.timestamp),attributes:e.attributes},l=new ReadableStream({start:d=>{a=d,this.byteStreamControllers.set(e.streamId,{info:c,controller:a,startTime:Date.now()})}});r(new k8(c,l,gf(e.totalLength)),{identity:n})}else if(e.contentHeader.case==="textHeader"){const r=this.textStreamHandlers.get(e.topic);if(!r){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let a;const c={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},l=new ReadableStream({start:d=>{a=d,this.textStreamControllers.set(e.streamId,{info:c,controller:a,startTime:Date.now()})}});r(new R8(c,l,gf(e.totalLength)),{identity:n})}})}handleStreamChunk(e){const n=this.byteStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e);const i=this.textStreamControllers.get(e.streamId);i&&e.content.length>0&&i.controller.enqueue(e)}handleStreamTrailer(e){const n=this.textStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.textStreamControllers.delete(e.streamId));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.byteStreamControllers.delete(e.streamId))}selectDefaultDevices(){return G(this,void 0,void 0,function*(){var e,n,i;const r=wn.getInstance().previousDevices,a=yield wn.getInstance().getDevices(void 0,!1),c=ci();if(c?.name==="Chrome"&&c.os!=="iOS")for(let d of a){const f=r.find(m=>m.deviceId===d.deviceId);f&&f.label!==""&&f.kind===d.kind&&f.label!==d.label&&this.getActiveDevice(d.kind)==="default"&&this.emit(he.ActiveDeviceChanged,d.kind,d.deviceId)}const l=["audiooutput","audioinput","videoinput"];for(let d of l){const f=DB(d),m=this.localParticipant.getTrackPublication(f);if(m&&(!((e=m.track)===null||e===void 0)&&e.isUserProvided))continue;const p=a.filter(b=>b.kind===d),v=this.getActiveDevice(d);if(v===((n=r.filter(b=>b.kind===d)[0])===null||n===void 0?void 0:n.deviceId)&&p.length>0&&((i=p[0])===null||i===void 0?void 0:i.deviceId)!==v){yield this.switchActiveDevice(d,p[0].deviceId);continue}d==="audioinput"&&!Mf()||d==="videoinput"||p.length>0&&!p.find(b=>b.deviceId===this.getActiveDevice(d))&&(d!=="audiooutput"||!Mf())&&(yield this.switchActiveDevice(d,p[0].deviceId))}})}acquireAudioContext(){return G(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=vy())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),Wn(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(he.AudioPlaybackStatusChanged,i))})}createParticipant(e,n){var i;let r;return n?r=jf.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new jf(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),r}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const r=this.remoteParticipants.get(e);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const i=this.createParticipant(e,n);return this.remoteParticipants.set(e,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(he.ParticipantConnected,i),i.on(ye.TrackPublished,r=>{this.emitWhenConnected(he.TrackPublished,r,i)}).on(ye.TrackSubscribed,(r,a)=>{r.kind===te.Kind.Audio?(r.on(ke.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(ke.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===te.Kind.Video&&(r.on(ke.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(ke.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(he.TrackSubscribed,r,a,i)}).on(ye.TrackUnpublished,r=>{this.emit(he.TrackUnpublished,r,i)}).on(ye.TrackUnsubscribed,(r,a)=>{this.emit(he.TrackUnsubscribed,r,a,i)}).on(ye.TrackMuted,r=>{this.emitWhenConnected(he.TrackMuted,r,i)}).on(ye.TrackUnmuted,r=>{this.emitWhenConnected(he.TrackUnmuted,r,i)}).on(ye.ParticipantMetadataChanged,r=>{this.emitWhenConnected(he.ParticipantMetadataChanged,r,i)}).on(ye.ParticipantNameChanged,r=>{this.emitWhenConnected(he.ParticipantNameChanged,r,i)}).on(ye.AttributesChanged,r=>{this.emitWhenConnected(he.ParticipantAttributesChanged,r,i)}).on(ye.ConnectionQualityChanged,r=>{this.emitWhenConnected(he.ConnectionQualityChanged,r,i)}).on(ye.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(he.ParticipantPermissionsChanged,r,i)}).on(ye.TrackSubscriptionStatusChanged,(r,a)=>{this.emitWhenConnected(he.TrackSubscriptionStatusChanged,r,a,i)}).on(ye.TrackSubscriptionFailed,(r,a)=>{this.emit(he.TrackSubscriptionFailed,r,i,a)}).on(ye.TrackSubscriptionPermissionChanged,(r,a)=>{this.emitWhenConnected(he.TrackSubscriptionPermissionChanged,r,a,i)}).on(ye.Active,()=>{this.emitWhenConnected(he.ParticipantActive,i),i.kind===Ca.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((i,r)=>(i.push(...r.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&AB(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=_n.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Bi.STATE_MISMATCH))):e=0},L8)}clearConnectionReconcile(){this.connectionReconcileInterval&&_n.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(he.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,i]=e;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.state===at.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,i]);else if(this.state===at.Connected)return this.emit(e,...i);return!1}simulateParticipants(e){return G(this,void 0,void 0,function*(){var n,i;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),a=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new ih({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:It.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new wa({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(he.SignalConnected),this.emit(he.Connected),this.setAndEmitConnectionState(at.Connected),r.video){const c=new Yv(te.Kind.Video,new No({source:cn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Li.AUDIO,name:"video-dummy"}),new Uf(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:Ww(160*((n=a.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(ye.LocalTrackPublished,c)}if(r.audio){const c=new Yv(te.Kind.Audio,new No({source:cn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Li.AUDIO}),new If(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:ng(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(ye.LocalTrackPublished,c)}for(let c=0;c<a.count-1;c+=1){let l=new wa({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(c),state:Vo.ACTIVE,tracks:[],joinedAt:It.parse(Date.now())});const d=this.getOrCreateParticipant(l.identity,l);if(a.video){const f=Ww(160*((i=a.aspectRatios[c%a.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),m=new No({source:cn.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Li.AUDIO});d.addSubscribedMediaTrack(f,m.sid,new MediaStream([f]),new RTCRtpReceiver),l.tracks=[...l.tracks,m]}if(a.audio){const f=ng(),m=new No({source:cn.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Li.AUDIO});d.addSubscribedMediaTrack(f,m.sid,new MediaStream([f]),new RTCRtpReceiver),l.tracks=[...l.tracks,m]}d.updateInfo(l)}})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e!==he.ActiveSpeakersChanged&&e!==he.TranscriptionReceived){const a=g_(i).filter(c=>c!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:a}))}return super.emit(e,...i)}}qr.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function g_(t){return t.map(e=>{if(e)return Array.isArray(e)?g_(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var Ui;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Ui||(Ui={}));class zs extends hr.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Ui.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new qr(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(e){return G(this,void 0,void 0,function*(){if(this.status!==Ui.IDLE)throw Error("check is running already");this.setStatus(Ui.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Ui.SKIPPED&&this.setStatus(this.isSuccess()?Ui.SUCCESS:Ui.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return G(this,void 0,void 0,function*(){return this.room.state===at.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return G(this,void 0,void 0,function*(){this.room&&this.room.state!==at.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Ui.SKIPPED)}switchProtocol(e){return G(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(he.Reconnecting,()=>{n=!0}),this.room.once(he.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(a=>setTimeout(a,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(i)return;yield Wn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class j8 extends zs{get description(){return"Cloud regions"}perform(){return G(this,void 0,void 0,function*(){const e=new Gv(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],i=new Set;for(let a=0;a<3;a++){const c=yield e.getNextBestRegionUrl();if(!c)break;if(i.has(c))continue;i.add(c);const l=yield this.checkCloudRegion(c);this.appendMessage("".concat(l.region," RTT: ").concat(l.rtt,"ms, duration: ").concat(l.duration,"ms")),n.push(l)}n.sort((a,c)=>(a.duration-c.duration)*.5+(a.rtt-c.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return G(this,void 0,void 0,function*(){var n,i;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const a=yield this.room.localParticipant.streamText({topic:"test"}),c=1e3,d=1e6/c,f="A".repeat(c),m=Date.now();for(let w=0;w<d;w++)yield a.write(f);yield a.close();const p=Date.now(),v=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),b={region:r,rtt:1e4,duration:p-m};return v?.forEach(w=>{w.type==="candidate-pair"&&w.nominated&&(b.rtt=w.currentRoundTripTime*1e3)}),yield this.disconnect(),b})}}const dg=1e4;class B8 extends zs{get description(){return"Connection via UDP vs TCP"}perform(){return G(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(dg/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(dg/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return G(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=0;const a=()=>{r=(r+1)%360,i.fillStyle="hsl(".concat(r,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(a)};a();const l=n.captureStream(30).getVideoTracks()[0],f=(yield this.room.localParticipant.publishTrack(l,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,m={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},p=setInterval(()=>G(this,void 0,void 0,function*(){const v=yield f.getRTCStatsReport();v?.forEach(b=>{b.type==="outbound-rtp"?(m.packetsSent=b.packetsSent,m.qualityLimitationDurations=b.qualityLimitationDurations,m.bitrateTotal+=b.targetBitrate,m.count++):b.type==="remote-inbound-rtp"&&(m.packetsLost=b.packetsLost,m.rttTotal+=b.roundTripTime,m.jitterTotal+=b.jitter)})}),1e3);return yield new Promise(v=>setTimeout(v,dg)),clearInterval(p),l.stop(),n.remove(),yield this.disconnect(),m})}}class F8 extends zs{get description(){return"Can publish audio"}perform(){return G(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield M8();if(yield n_(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(l=>setTimeout(l,3e3));const a=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!a)throw new Error("Could not get RTCStats");let c=0;if(a.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="audio"||!l.kind&&l.mediaType==="audio")&&(c=l.packetsSent)}),c===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(c," audio packets"))})}}class V8 extends zs{get description(){return"Can publish video"}perform(){return G(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield N8();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(c=>setTimeout(c,5e3));const r=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!r)throw new Error("Could not get RTCStats");let a=0;if(r.forEach(c=>{c.type==="outbound-rtp"&&(c.kind==="video"||!c.kind&&c.mediaType==="video")&&(a+=c.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," video packets"))})}checkForVideo(e){return G(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,yield new Promise(r=>{i.onplay=()=>{setTimeout(()=>{var a,c,l,d;const f=document.createElement("canvas"),m=e.getSettings(),p=(c=(a=m.width)!==null&&a!==void 0?a:i.videoWidth)!==null&&c!==void 0?c:1280,v=(d=(l=m.height)!==null&&l!==void 0?l:i.videoHeight)!==null&&d!==void 0?d:720;f.width=p,f.height=v;const b=f.getContext("2d");b.drawImage(i,0,0);const S=b.getImageData(0,0,f.width,f.height).data;let R=!0;for(let E=0;E<S.length;E+=4)if(S[E]!==0||S[E+1]!==0||S[E+2]!==0){R=!1;break}R?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},i.play()}),n.getTracks().forEach(r=>r.stop()),i.remove()})}}class z8 extends zs{get description(){return"Resuming connection after interruption"}perform(){return G(this,void 0,void 0,function*(){var e;const n=yield this.connect();let i=!1,r=!1,a;const c=new Promise(f=>{setTimeout(f,5e3),a=f}),l=()=>{i=!0};n.on(he.SignalReconnecting,l).on(he.Reconnecting,l).on(he.Reconnected,()=>{r=!0,a(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const d=n.engine.client.onClose;if(d&&d(""),yield c,i){if(!r||n.state!==at.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class H8 extends zs{get description(){return"Can connect via TURN"}perform(){return G(this,void 0,void 0,function*(){var e,n;const i=new yy,r=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let a=!1,c=!1,l=!1;for(let d of r.iceServers)for(let f of d.urls)f.startsWith("turn:")?(c=!0,l=!0):f.startsWith("turns:")&&(c=!0,l=!0,a=!0),f.startsWith("stun:")&&(l=!0);l?c&&!a&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||c?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class q8 extends zs{get description(){return"Establishing WebRTC connection"}perform(){return G(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(he.SignalConnected,()=>{const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(r,a)=>{if(r.candidate){const c=new RTCIceCandidate(r);let l="".concat(c.protocol," ").concat(c.address,":").concat(c.port," ").concat(c.type);c.address&&(G8(c.address)?l+=" (private)":c.protocol==="tcp"&&c.tcpType==="passive"?(e=!0,l+=" (passive)"):c.protocol==="udp"&&(n=!0)),this.appendMessage(l)}i&&i(r,a)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=r=>{r instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(r.errorCode," ").concat(r.errorText," ").concat(r.url))})});try{yield this.connect(),ot.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function G8(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class K8 extends zs{get description(){return"Connecting to signal connection via WebSocket"}perform(){return G(this,void 0,void 0,function*(){var e,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new yy;const a=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(a.serverVersion,".")),((e=a.serverInfo)===null||e===void 0?void 0:e.edition)===iA.Cloud&&(!((n=a.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=a.serverInfo)===null||i===void 0?void 0:i.region)),yield r.close()})}}class zW extends hr.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=i}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Ui.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Ui.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return G(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new e(this.url,this.token,this.options),r=c=>{this.updateCheck(n,c)};i.on("update",r);const a=yield i.run();return i.off("update",r),a})}checkWebsocket(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(K8)})}checkWebRTC(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(q8)})}checkTURN(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(H8)})}checkReconnect(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(z8)})}checkPublishAudio(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(F8)})}checkPublishVideo(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(V8)})}checkConnectionProtocol(){return G(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(B8);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(j8)})}}const Ey=T.createContext({});function ky(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ry=typeof window<"u",v_=Ry?T.useLayoutEffect:T.useEffect,lh=T.createContext(null);function Ay(t,e){t.indexOf(e)===-1&&t.push(e)}function _y(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Gr=(t,e,n)=>n>e?e:n<t?t:n;let Py=()=>{};const Kr={},y_=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function b_(t){return typeof t=="object"&&t!==null}const S_=t=>/^0[^.\s]+$/u.test(t);function Dy(t){let e;return()=>(e===void 0&&(e=t()),e)}const ki=t=>t,Y8=(t,e)=>n=>e(t(n)),pu=(...t)=>t.reduce(Y8),Ql=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class Ny{constructor(){this.subscriptions=[]}add(e){return Ay(this.subscriptions,e),()=>_y(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let a=0;a<r;a++){const c=this.subscriptions[a];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const rr=t=>t*1e3,sr=t=>t/1e3;function T_(t,e){return e?t*(1e3/e):0}const x_=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,$8=1e-7,W8=12;function X8(t,e,n,i,r){let a,c,l=0;do c=e+(n-e)/2,a=x_(c,i,r)-t,a>0?n=c:e=c;while(Math.abs(a)>$8&&++l<W8);return c}function gu(t,e,n,i){if(t===e&&n===i)return ki;const r=a=>X8(a,0,1,t,n);return a=>a===0||a===1?a:x_(r(a),e,i)}const w_=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,C_=t=>e=>1-t(1-e),E_=gu(.33,1.53,.69,.99),My=C_(E_),k_=w_(My),R_=t=>(t*=2)<1?.5*My(t):.5*(2-Math.pow(2,-10*(t-1))),Oy=t=>1-Math.sin(Math.acos(t)),A_=C_(Oy),__=w_(Oy),Z8=gu(.42,0,1,1),J8=gu(0,0,.58,1),P_=gu(.42,0,.58,1),Q8=t=>Array.isArray(t)&&typeof t[0]!="number",D_=t=>Array.isArray(t)&&typeof t[0]=="number",e2={linear:ki,easeIn:Z8,easeInOut:P_,easeOut:J8,circIn:Oy,circInOut:__,circOut:A_,backIn:My,backInOut:k_,backOut:E_,anticipate:R_},t2=t=>typeof t=="string",pC=t=>{if(D_(t)){Py(t.length===4);const[e,n,i,r]=t;return gu(e,n,i,r)}else if(t2(t))return e2[t];return t},Bd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function n2(t,e){let n=new Set,i=new Set,r=!1,a=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(m){c.has(m)&&(f.schedule(m),t()),m(l)}const f={schedule:(m,p=!1,v=!1)=>{const w=v&&r?n:i;return p&&c.add(m),w.has(m)||w.add(m),m},cancel:m=>{i.delete(m),c.delete(m)},process:m=>{if(l=m,r){a=!0;return}r=!0,[n,i]=[i,n],n.forEach(d),n.clear(),r=!1,a&&(a=!1,f.process(m))}};return f}const i2=40;function N_(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=Bd.reduce((M,I)=>(M[I]=n2(a),M),{}),{setup:l,read:d,resolveKeyframes:f,preUpdate:m,update:p,preRender:v,render:b,postRender:w}=c,S=()=>{const M=Kr.useManualTiming?r.timestamp:performance.now();n=!1,Kr.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(M-r.timestamp,i2),1)),r.timestamp=M,r.isProcessing=!0,l.process(r),d.process(r),f.process(r),m.process(r),p.process(r),v.process(r),b.process(r),w.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(S))},R=()=>{n=!0,i=!0,r.isProcessing||t(S)};return{schedule:Bd.reduce((M,I)=>{const A=c[I];return M[I]=(L,z=!1,H=!1)=>(n||R(),A.schedule(L,z,H)),M},{}),cancel:M=>{for(let I=0;I<Bd.length;I++)c[Bd[I]].cancel(M)},state:r,steps:c}}const{schedule:Ut,cancel:Is,state:An,steps:fg}=N_(typeof requestAnimationFrame<"u"?requestAnimationFrame:ki,!0);let yf;function r2(){yf=void 0}const $n={now:()=>(yf===void 0&&$n.set(An.isProcessing||Kr.useManualTiming?An.timestamp:performance.now()),yf),set:t=>{yf=t,queueMicrotask(r2)}},M_=t=>e=>typeof e=="string"&&e.startsWith(t),Iy=M_("--"),s2=M_("var(--"),Uy=t=>s2(t)?a2.test(t.split("/*")[0].trim()):!1,a2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},eu={...uc,transform:t=>Gr(0,1,t)},Fd={...uc,default:1},Hl=t=>Math.round(t*1e5)/1e5,Ly=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function o2(t){return t==null}const c2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jy=(t,e)=>n=>!!(typeof n=="string"&&c2.test(n)&&n.startsWith(t)||e&&!o2(n)&&Object.prototype.hasOwnProperty.call(n,e)),O_=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,a,c,l]=i.match(Ly);return{[t]:parseFloat(r),[e]:parseFloat(a),[n]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},l2=t=>Gr(0,255,t),hg={...uc,transform:t=>Math.round(l2(t))},va={test:jy("rgb","red"),parse:O_("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+hg.transform(t)+", "+hg.transform(e)+", "+hg.transform(n)+", "+Hl(eu.transform(i))+")"};function u2(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const $v={test:jy("#"),parse:u2,transform:va.transform},vu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ks=vu("deg"),ar=vu("%"),He=vu("px"),d2=vu("vh"),f2=vu("vw"),gC={...ar,parse:t=>ar.parse(t)/100,transform:t=>ar.transform(t*100)},Io={test:jy("hsl","hue"),parse:O_("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ar.transform(Hl(e))+", "+ar.transform(Hl(n))+", "+Hl(eu.transform(i))+")"},on={test:t=>va.test(t)||$v.test(t)||Io.test(t),parse:t=>va.test(t)?va.parse(t):Io.test(t)?Io.parse(t):$v.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?va.transform(t):Io.transform(t),getAnimatableNone:t=>{const e=on.parse(t);return e.alpha=0,on.transform(e)}},h2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function m2(t){return isNaN(t)&&typeof t=="string"&&(t.match(Ly)?.length||0)+(t.match(h2)?.length||0)>0}const I_="number",U_="color",p2="var",g2="var(",vC="${}",v2=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tu(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let a=0;const l=e.replace(v2,d=>(on.test(d)?(i.color.push(a),r.push(U_),n.push(on.parse(d))):d.startsWith(g2)?(i.var.push(a),r.push(p2),n.push(d)):(i.number.push(a),r.push(I_),n.push(parseFloat(d))),++a,vC)).split(vC);return{values:n,split:l,indexes:i,types:r}}function L_(t){return tu(t).values}function j_(t){const{split:e,types:n}=tu(t),i=e.length;return r=>{let a="";for(let c=0;c<i;c++)if(a+=e[c],r[c]!==void 0){const l=n[c];l===I_?a+=Hl(r[c]):l===U_?a+=on.transform(r[c]):a+=r[c]}return a}}const y2=t=>typeof t=="number"?0:on.test(t)?on.getAnimatableNone(t):t;function b2(t){const e=L_(t);return j_(t)(e.map(y2))}const Us={test:m2,parse:L_,createTransformer:j_,getAnimatableNone:b2};function mg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function S2({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,a=0,c=0;if(!e)r=a=c=n;else{const l=n<.5?n*(1+e):n+e-n*e,d=2*n-l;r=mg(d,l,t+1/3),a=mg(d,l,t),c=mg(d,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:i}}function Bf(t,e){return n=>n>0?e:t}const Ft=(t,e,n)=>t+(e-t)*n,pg=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},T2=[$v,va,Io],x2=t=>T2.find(e=>e.test(t));function yC(t){const e=x2(t);if(!e)return!1;let n=e.parse(t);return e===Io&&(n=S2(n)),n}const bC=(t,e)=>{const n=yC(t),i=yC(e);if(!n||!i)return Bf(t,e);const r={...n};return a=>(r.red=pg(n.red,i.red,a),r.green=pg(n.green,i.green,a),r.blue=pg(n.blue,i.blue,a),r.alpha=Ft(n.alpha,i.alpha,a),va.transform(r))},Wv=new Set(["none","hidden"]);function w2(t,e){return Wv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function C2(t,e){return n=>Ft(t,e,n)}function By(t){return typeof t=="number"?C2:typeof t=="string"?Uy(t)?Bf:on.test(t)?bC:R2:Array.isArray(t)?B_:typeof t=="object"?on.test(t)?bC:E2:Bf}function B_(t,e){const n=[...t],i=n.length,r=t.map((a,c)=>By(a)(a,e[c]));return a=>{for(let c=0;c<i;c++)n[c]=r[c](a);return n}}function E2(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=By(t[r])(t[r],e[r]));return r=>{for(const a in i)n[a]=i[a](r);return n}}function k2(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],c=t.indexes[a][i[a]],l=t.values[c]??0;n[r]=l,i[a]++}return n}const R2=(t,e)=>{const n=Us.createTransformer(e),i=tu(t),r=tu(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Wv.has(t)&&!r.values.length||Wv.has(e)&&!i.values.length?w2(t,e):pu(B_(k2(i,r),r.values),n):Bf(t,e)};function F_(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ft(t,e,n):By(t)(t,e)}const A2=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ut.update(e,n),stop:()=>Is(e),now:()=>An.isProcessing?An.timestamp:$n.now()}},V_=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let a=0;a<r;a++)i+=Math.round(t(a/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Ff=2e4;function Fy(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Ff;)e+=n,i=t.next(e);return e>=Ff?1/0:e}function _2(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(Fy(i),Ff);return{type:"keyframes",ease:a=>i.next(r*a).value/e,duration:sr(r)}}const P2=5;function z_(t,e,n){const i=Math.max(e-P2,0);return T_(n-t(i),e-i)}const qt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gg=.001;function D2({duration:t=qt.duration,bounce:e=qt.bounce,velocity:n=qt.velocity,mass:i=qt.mass}){let r,a,c=1-e;c=Gr(qt.minDamping,qt.maxDamping,c),t=Gr(qt.minDuration,qt.maxDuration,sr(t)),c<1?(r=f=>{const m=f*c,p=m*t,v=m-n,b=Xv(f,c),w=Math.exp(-p);return gg-v/b*w},a=f=>{const p=f*c*t,v=p*n+n,b=Math.pow(c,2)*Math.pow(f,2)*t,w=Math.exp(-p),S=Xv(Math.pow(f,2),c);return(-r(f)+gg>0?-1:1)*((v-b)*w)/S}):(r=f=>{const m=Math.exp(-f*t),p=(f-n)*t+1;return-gg+m*p},a=f=>{const m=Math.exp(-f*t),p=(n-f)*(t*t);return m*p});const l=5/t,d=M2(r,a,l);if(t=rr(t),isNaN(d))return{stiffness:qt.stiffness,damping:qt.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:c*2*Math.sqrt(i*f),duration:t}}}const N2=12;function M2(t,e,n){let i=n;for(let r=1;r<N2;r++)i=i-t(i)/e(i);return i}function Xv(t,e){return t*Math.sqrt(1-e*e)}const O2=["duration","bounce"],I2=["stiffness","damping","mass"];function SC(t,e){return e.some(n=>t[n]!==void 0)}function U2(t){let e={velocity:qt.velocity,stiffness:qt.stiffness,damping:qt.damping,mass:qt.mass,isResolvedFromDuration:!1,...t};if(!SC(t,I2)&&SC(t,O2))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,a=2*Gr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:qt.mass,stiffness:r,damping:a}}else{const n=D2(t);e={...e,...n,mass:qt.mass},e.isResolvedFromDuration=!0}return e}function Vf(t=qt.visualDuration,e=qt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:p,velocity:v,isResolvedFromDuration:b}=U2({...n,velocity:-sr(n.velocity||0)}),w=v||0,S=f/(2*Math.sqrt(d*m)),R=c-a,E=sr(Math.sqrt(d/m)),N=Math.abs(R)<5;i||(i=N?qt.restSpeed.granular:qt.restSpeed.default),r||(r=N?qt.restDelta.granular:qt.restDelta.default);let M;if(S<1){const A=Xv(E,S);M=L=>{const z=Math.exp(-S*E*L);return c-z*((w+S*E*R)/A*Math.sin(A*L)+R*Math.cos(A*L))}}else if(S===1)M=A=>c-Math.exp(-E*A)*(R+(w+E*R)*A);else{const A=E*Math.sqrt(S*S-1);M=L=>{const z=Math.exp(-S*E*L),H=Math.min(A*L,300);return c-z*((w+S*E*R)*Math.sinh(H)+A*R*Math.cosh(H))/A}}const I={calculatedDuration:b&&p||null,next:A=>{const L=M(A);if(b)l.done=A>=p;else{let z=A===0?w:0;S<1&&(z=A===0?rr(w):z_(M,A,L));const H=Math.abs(z)<=i,W=Math.abs(c-L)<=r;l.done=H&&W}return l.value=l.done?c:L,l},toString:()=>{const A=Math.min(Fy(I),Ff),L=V_(z=>I.next(A*z).value,A,30);return A+"ms "+L},toTransition:()=>{}};return I}Vf.applyToOptions=t=>{const e=_2(t,100,Vf);return t.ease=e.ease,t.duration=rr(e.duration),t.type="keyframes",t};function Zv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:c,min:l,max:d,restDelta:f=.5,restSpeed:m}){const p=t[0],v={done:!1,value:p},b=H=>l!==void 0&&H<l||d!==void 0&&H>d,w=H=>l===void 0?d:d===void 0||Math.abs(l-H)<Math.abs(d-H)?l:d;let S=n*e;const R=p+S,E=c===void 0?R:c(R);E!==R&&(S=E-p);const N=H=>-S*Math.exp(-H/i),M=H=>E+N(H),I=H=>{const W=N(H),re=M(H);v.done=Math.abs(W)<=f,v.value=v.done?E:re};let A,L;const z=H=>{b(v.value)&&(A=H,L=Vf({keyframes:[v.value,w(v.value)],velocity:z_(M,H,v.value),damping:r,stiffness:a,restDelta:f,restSpeed:m}))};return z(0),{calculatedDuration:null,next:H=>{let W=!1;return!L&&A===void 0&&(W=!0,I(H),z(H)),A!==void 0&&H>=A?L.next(H-A):(!W&&I(H),v)}}}function L2(t,e,n){const i=[],r=n||Kr.mix||F_,a=t.length-1;for(let c=0;c<a;c++){let l=r(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||ki:e;l=pu(d,l)}i.push(l)}return i}function j2(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const a=t.length;if(Py(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=L2(e,i,r),d=l.length,f=m=>{if(c&&m<t[0])return e[0];let p=0;if(d>1)for(;p<t.length-2&&!(m<t[p+1]);p++);const v=Ql(t[p],t[p+1],m);return l[p](v)};return n?m=>f(Gr(t[0],t[a-1],m)):f}function B2(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Ql(0,e,i);t.push(Ft(n,1,r))}}function F2(t){const e=[0];return B2(e,t.length-1),e}function V2(t,e){return t.map(n=>n*e)}function z2(t,e){return t.map(()=>e||P_).splice(0,t.length-1)}function ql({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=Q8(i)?i.map(pC):pC(i),a={done:!1,value:e[0]},c=V2(n&&n.length===e.length?n:F2(e),t),l=j2(c,e,{ease:Array.isArray(r)?r:z2(e,r)});return{calculatedDuration:t,next:d=>(a.value=l(d),a.done=d>=t,a)}}const H2=t=>t!==null;function Vy(t,{repeat:e,repeatType:n="loop"},i,r=1){const a=t.filter(H2),l=r<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||i===void 0?a[l]:i}const q2={decay:Zv,inertia:Zv,tween:ql,keyframes:ql,spring:Vf};function H_(t){typeof t.type=="string"&&(t.type=q2[t.type])}class zy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const G2=t=>t/100;class Hy extends zy{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==$n.now()&&this.tick($n.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;H_(e);const{type:n=ql,repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:c=0}=e;let{keyframes:l}=e;const d=n||ql;d!==ql&&typeof l[0]!="number"&&(this.mixKeyframes=pu(G2,F_(l[0],l[1])),l=[0,100]);const f=d({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...l].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=Fy(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:m,repeat:p,repeatType:v,repeatDelay:b,type:w,onUpdate:S,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const E=this.currentTime-f*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?E<0:E>r;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let M=this.currentTime,I=i;if(p){const H=Math.min(this.currentTime,r)/l;let W=Math.floor(H),re=H%1;!re&&H>=1&&(re=1),re===1&&W--,W=Math.min(W,p+1),!!(W%2)&&(v==="reverse"?(re=1-re,b&&(re-=b/l)):v==="mirror"&&(I=c)),M=Gr(0,1,re)*l}const A=N?{done:!1,value:m[0]}:I.next(M);a&&(A.value=a(A.value));let{done:L}=A;!N&&d!==null&&(L=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return z&&w!==Zv&&(A.value=Vy(m,this.options,R,this.speed)),S&&S(A.value),z&&this.finish(),A}then(e,n){return this.finished.then(e,n)}get duration(){return sr(this.calculatedDuration)}get time(){return sr(this.currentTime)}set time(e){e=rr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime($n.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=sr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=A2,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime($n.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function K2(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ya=t=>t*180/Math.PI,Jv=t=>{const e=ya(Math.atan2(t[1],t[0]));return Qv(e)},Y2={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Jv,rotateZ:Jv,skewX:t=>ya(Math.atan(t[1])),skewY:t=>ya(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Qv=t=>(t=t%360,t<0&&(t+=360),t),TC=Jv,xC=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wC=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),$2={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:xC,scaleY:wC,scale:t=>(xC(t)+wC(t))/2,rotateX:t=>Qv(ya(Math.atan2(t[6],t[5]))),rotateY:t=>Qv(ya(Math.atan2(-t[2],t[0]))),rotateZ:TC,rotate:TC,skewX:t=>ya(Math.atan(t[4])),skewY:t=>ya(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function e0(t){return t.includes("scale")?1:0}function t0(t,e){if(!t||t==="none")return e0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=$2,r=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Y2,r=l}if(!r)return e0(e);const a=i[e],c=r[1].split(",").map(X2);return typeof a=="function"?a(c):c[a]}const W2=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return t0(n,e)};function X2(t){return parseFloat(t.trim())}const dc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fc=new Set(dc),CC=t=>t===uc||t===He,Z2=new Set(["x","y","z"]),J2=dc.filter(t=>!Z2.has(t));function Q2(t){const e=[];return J2.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Sa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>t0(e,"x"),y:(t,{transform:e})=>t0(e,"y")};Sa.translateX=Sa.x;Sa.translateY=Sa.y;const Ta=new Set;let n0=!1,i0=!1,r0=!1;function q_(){if(i0){const t=Array.from(Ta).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=Q2(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([a,c])=>{i.getValue(a)?.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}i0=!1,n0=!1,Ta.forEach(t=>t.complete(r0)),Ta.clear()}function G_(){Ta.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(i0=!0)})}function eF(){r0=!0,G_(),q_(),r0=!1}class qy{constructor(e,n,i,r,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Ta.add(this),n0||(n0=!0,Ut.read(G_),Ut.resolveKeyframes(q_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const a=r?.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,c);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=c),r&&a===void 0&&r.set(e[0])}K2(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ta.delete(this)}cancel(){this.state==="scheduled"&&(Ta.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const tF=t=>t.startsWith("--");function nF(t,e,n){tF(e)?t.style.setProperty(e,n):t.style[e]=n}const iF=Dy(()=>window.ScrollTimeline!==void 0),rF={};function sF(t,e){const n=Dy(t);return()=>rF[e]??n()}const K_=sF(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ul=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,EC={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ul([0,.65,.55,1]),circOut:Ul([.55,0,1,.45]),backIn:Ul([.31,.01,.66,-.59]),backOut:Ul([.33,1.53,.69,.99])};function Y_(t,e){if(t)return typeof t=="function"?K_()?V_(t,e):"ease-out":D_(t)?Ul(t):Array.isArray(t)?t.map(n=>Y_(n,e)||EC.easeOut):EC[t]}function aF(t,e,n,{delay:i=0,duration:r=300,repeat:a=0,repeatType:c="loop",ease:l="easeOut",times:d}={},f=void 0){const m={[e]:n};d&&(m.offset=d);const p=Y_(l,r);Array.isArray(p)&&(m.easing=p);const v={delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(m,v)}function $_(t){return typeof t=="function"&&"applyToOptions"in t}function oF({type:t,...e}){return $_(t)&&K_()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class cF extends zy{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:l,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,Py(typeof e.type!="string");const f=oF(e);this.animation=aF(n,i,r,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=Vy(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):nF(n,i,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return sr(Number(e))}get time(){return sr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=rr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iF()?(this.animation.timeline=e,ki):n(this)}}const W_={anticipate:R_,backInOut:k_,circInOut:__};function lF(t){return t in W_}function uF(t){typeof t.ease=="string"&&lF(t.ease)&&(t.ease=W_[t.ease])}const kC=10;class dF extends cF{constructor(e){uF(e),H_(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:a,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Hy({...c,autoplay:!1}),d=rr(this.finishedTime??this.time);n.setWithVelocity(l.sample(d-kC).value,l.sample(d).value,kC),l.stop()}}const RC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Us.test(t)||t==="0")&&!t.startsWith("url("));function fF(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function hF(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],c=RC(r,e),l=RC(a,e);return!c||!l?!1:fF(t)||(n==="spring"||$_(n))&&i}function s0(t){t.duration=0,t.type}const mF=new Set(["opacity","clipPath","filter","transform"]),pF=Dy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function gF(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:a,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return pF()&&n&&mF.has(n)&&(n!=="transform"||!f)&&!d&&!i&&r!=="mirror"&&a!==0&&c!=="inertia"}const vF=40;class yF extends zy{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:c="loop",keyframes:l,name:d,motionValue:f,element:m,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=$n.now();const v={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:a,repeatType:c,name:d,motionValue:f,element:m,...p},b=m?.KeyframeResolver||qy;this.keyframeResolver=new b(l,(w,S,R)=>this.onKeyframesResolved(w,S,v,!R),d,f,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:a,type:c,velocity:l,delay:d,isHandoff:f,onUpdate:m}=i;this.resolvedAt=$n.now(),hF(e,a,c,l)||((Kr.instantAnimations||!d)&&m?.(Vy(e,i,n)),e[0]=e[e.length-1],s0(i),i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>vF?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},b=!f&&gF(v)?new dF({...v,element:v.motionValue.owner.current}):new Hy(v);b.finished.then(()=>this.notifyFinished()).catch(ki),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),eF()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const bF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SF(t){const e=bF.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function X_(t,e,n=1){const[i,r]=SF(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const c=a.trim();return y_(c)?parseFloat(c):c}return Uy(r)?X_(r,e,n+1):r}function Gy(t,e){return t?.[e]??t?.default??t}const Z_=new Set(["width","height","top","left","right","bottom",...dc]),TF={test:t=>t==="auto",parse:t=>t},J_=t=>e=>e.test(t),Q_=[uc,He,ar,ks,f2,d2,TF],AC=t=>Q_.find(J_(t));function xF(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||S_(t):!0}const wF=new Set(["brightness","contrast","saturate","opacity"]);function CF(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Ly)||[];if(!i)return t;const r=n.replace(i,"");let a=wF.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+r+")"}const EF=/\b([a-z-]*)\(.*?\)/gu,a0={...Us,getAnimatableNone:t=>{const e=t.match(EF);return e?e.map(CF).join(" "):t}},_C={...uc,transform:Math.round},kF={rotate:ks,rotateX:ks,rotateY:ks,rotateZ:ks,scale:Fd,scaleX:Fd,scaleY:Fd,scaleZ:Fd,skew:ks,skewX:ks,skewY:ks,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:eu,originX:gC,originY:gC,originZ:He},Ky={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,backgroundPositionX:He,backgroundPositionY:He,...kF,zIndex:_C,fillOpacity:eu,strokeOpacity:eu,numOctaves:_C},RF={...Ky,color:on,backgroundColor:on,outlineColor:on,fill:on,stroke:on,borderColor:on,borderTopColor:on,borderRightColor:on,borderBottomColor:on,borderLeftColor:on,filter:a0,WebkitFilter:a0},eP=t=>RF[t];function tP(t,e){let n=eP(t);return n!==a0&&(n=Us),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const AF=new Set(["auto","none","0"]);function _F(t,e,n){let i=0,r;for(;i<t.length&&!r;){const a=t[i];typeof a=="string"&&!AF.has(a)&&tu(a).values.length&&(r=t[i]),i++}if(r&&n)for(const a of e)t[a]=tP(n,r)}class PF extends qy{constructor(e,n,i,r,a){super(e,n,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),Uy(f))){const m=X_(f,n.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!Z_.has(i)||e.length!==2)return;const[r,a]=e,c=AC(r),l=AC(a);if(c!==l)if(CC(c)&&CC(l))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else Sa[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||xF(e[r]))&&i.push(r);i.length&&_F(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sa[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,c=i[a];i[a]=Sa[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,d])=>{e.getValue(l).set(d)}),this.resolveNoneKeyframes()}}function DF(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=n?.[t]??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const nP=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function iP(t){return b_(t)&&"offsetHeight"in t}const PC=30,NF=t=>!isNaN(parseFloat(t));class MF{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=$n.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=$n.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=NF(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ny);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ut.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=$n.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>PC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,PC);return T_(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tc(t,e){return new MF(t,e)}const{schedule:Yy}=N_(queueMicrotask,!1),Oi={x:!1,y:!1};function rP(){return Oi.x||Oi.y}function OF(t){return t==="x"||t==="y"?Oi[t]?null:(Oi[t]=!0,()=>{Oi[t]=!1}):Oi.x||Oi.y?null:(Oi.x=Oi.y=!0,()=>{Oi.x=Oi.y=!1})}function sP(t,e){const n=DF(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function DC(t){return!(t.pointerType==="touch"||rP())}function IF(t,e,n={}){const[i,r,a]=sP(t,n),c=l=>{if(!DC(l))return;const{target:d}=l,f=e(d,l);if(typeof f!="function"||!d)return;const m=p=>{DC(p)&&(f(p),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,r)};return i.forEach(l=>{l.addEventListener("pointerenter",c,r)}),a}const aP=(t,e)=>e?t===e?!0:aP(t,e.parentElement):!1,$y=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,UF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function LF(t){return UF.has(t.tagName)||t.tabIndex!==-1}const bf=new WeakSet;function NC(t){return e=>{e.key==="Enter"&&t(e)}}function vg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const jF=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=NC(()=>{if(bf.has(n))return;vg(n,"down");const r=NC(()=>{vg(n,"up")}),a=()=>vg(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function MC(t){return $y(t)&&!rP()}function BF(t,e,n={}){const[i,r,a]=sP(t,n),c=l=>{const d=l.currentTarget;if(!MC(l))return;bf.add(d);const f=e(d,l),m=(b,w)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",v),bf.has(d)&&bf.delete(d),MC(b)&&typeof f=="function"&&f(b,{success:w})},p=b=>{m(b,d===window||d===document||n.useGlobalTarget||aP(d,b.target))},v=b=>{m(b,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",v,r)};return i.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",c,r),iP(l)&&(l.addEventListener("focus",f=>jF(f,r)),!LF(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function oP(t){return b_(t)&&"ownerSVGElement"in t}function FF(t){return oP(t)&&t.tagName==="svg"}const Mn=t=>!!(t&&t.getVelocity),VF=[...Q_,on,Us],zF=t=>VF.find(J_(t)),Wy=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class HF extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=iP(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function qF({children:t,isPresent:e,anchorX:n,root:i}){const r=T.useId(),a=T.useRef(null),c=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=T.useContext(Wy);return T.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:p,right:v}=c.current;if(e||!a.current||!d||!f)return;const b=n==="left"?`left: ${p}`:`right: ${v}`;a.current.dataset.motionPopId=r;const w=document.createElement("style");l&&(w.nonce=l);const S=i??document.head;return S.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${b}px !important;
            top: ${m}px !important;
          }
        `),()=>{S.contains(w)&&S.removeChild(w)}},[e]),x.jsx(HF,{isPresent:e,childRef:a,sizeRef:c,children:T.cloneElement(t,{ref:a})})}const GF=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:c,anchorX:l,root:d})=>{const f=ky(KF),m=T.useId();let p=!0,v=T.useMemo(()=>(p=!1,{id:m,initial:e,isPresent:n,custom:r,onExitComplete:b=>{f.set(b,!0);for(const w of f.values())if(!w)return;i&&i()},register:b=>(f.set(b,!1),()=>f.delete(b))}),[n,f,i]);return a&&p&&(v={...v}),T.useMemo(()=>{f.forEach((b,w)=>f.set(w,!1))},[n]),T.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),c==="popLayout"&&(t=x.jsx(qF,{isPresent:n,anchorX:l,root:d,children:t})),x.jsx(lh.Provider,{value:v,children:t})};function KF(){return new Map}function cP(t=!0){const e=T.useContext(lh);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,a=T.useId();T.useEffect(()=>{if(t)return r(a)},[t]);const c=T.useCallback(()=>t&&i&&i(a),[a,i,t]);return!n&&i?[!1,c]:[!0]}const Vd=t=>t.key||"";function OC(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const o0=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:c=!1,anchorX:l="left",root:d})=>{const[f,m]=cP(c),p=T.useMemo(()=>OC(t),[t]),v=c&&!f?[]:p.map(Vd),b=T.useRef(!0),w=T.useRef(p),S=ky(()=>new Map),[R,E]=T.useState(p),[N,M]=T.useState(p);v_(()=>{b.current=!1,w.current=p;for(let L=0;L<N.length;L++){const z=Vd(N[L]);v.includes(z)?S.delete(z):S.get(z)!==!0&&S.set(z,!1)}},[N,v.length,v.join("-")]);const I=[];if(p!==R){let L=[...p];for(let z=0;z<N.length;z++){const H=N[z],W=Vd(H);v.includes(W)||(L.splice(z,0,H),I.push(H))}return a==="wait"&&I.length&&(L=I),M(OC(L)),E(p),null}const{forceRender:A}=T.useContext(Ey);return x.jsx(x.Fragment,{children:N.map(L=>{const z=Vd(L),H=c&&!f?!1:p===N||v.includes(z),W=()=>{if(S.has(z))S.set(z,!0);else return;let re=!0;S.forEach(se=>{se||(re=!1)}),re&&(A?.(),M(w.current),c&&m?.(),i&&i())};return x.jsx(GF,{isPresent:H,initial:!b.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,root:d,onExitComplete:H?void 0:W,anchorX:l,children:L},z)})})},lP=T.createContext({strict:!1}),IC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nc={};for(const t in IC)nc[t]={isEnabled:e=>IC[t].some(n=>!!e[n])};function YF(t){for(const e in t)nc[e]={...nc[e],...t[e]}}const $F=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$F.has(t)}let uP=t=>!zf(t);function WF(t){typeof t=="function"&&(uP=e=>e.startsWith("on")?!zf(e):t(e))}try{WF(require("@emotion/is-prop-valid").default)}catch{}function XF(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(uP(r)||n===!0&&zf(r)||!e&&!zf(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const uh=T.createContext({});function dh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function nu(t){return typeof t=="string"||Array.isArray(t)}const Xy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zy=["initial",...Xy];function fh(t){return dh(t.animate)||Zy.some(e=>nu(t[e]))}function dP(t){return!!(fh(t)||t.variants)}function ZF(t,e){if(fh(t)){const{initial:n,animate:i}=t;return{initial:n===!1||nu(n)?n:void 0,animate:nu(i)?i:void 0}}return t.inherit!==!1?e:{}}function JF(t){const{initial:e,animate:n}=ZF(t,T.useContext(uh));return T.useMemo(()=>({initial:e,animate:n}),[UC(e),UC(n)])}function UC(t){return Array.isArray(t)?t.join(" "):t}const iu={};function QF(t){for(const e in t)iu[e]=t[e],Iy(e)&&(iu[e].isCSSVariable=!0)}function fP(t,{layout:e,layoutId:n}){return fc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!iu[t]||t==="opacity")}const eV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tV=dc.length;function nV(t,e,n){let i="",r=!0;for(let a=0;a<tV;a++){const c=dc[a],l=t[c];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(c.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||n){const f=nP(l,Ky[c]);if(!d){r=!1;const m=eV[c]||c;i+=`${m}(${f}) `}n&&(e[c]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Jy(t,e,n){const{style:i,vars:r,transformOrigin:a}=t;let c=!1,l=!1;for(const d in e){const f=e[d];if(fc.has(d)){c=!0;continue}else if(Iy(d)){r[d]=f;continue}else{const m=nP(f,Ky[d]);d.startsWith("origin")?(l=!0,a[d]=m):i[d]=m}}if(e.transform||(c||n?i.transform=nV(e,t.transform,n):i.transform&&(i.transform="none")),l){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;i.transformOrigin=`${d} ${f} ${m}`}}const Qy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hP(t,e,n){for(const i in e)!Mn(e[i])&&!fP(i,n)&&(t[i]=e[i])}function iV({transformTemplate:t},e){return T.useMemo(()=>{const n=Qy();return Jy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function rV(t,e){const n=t.style||{},i={};return hP(i,n,t),Object.assign(i,iV(t,e)),i}function sV(t,e){const n={},i=rV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const aV={offset:"stroke-dashoffset",array:"stroke-dasharray"},oV={offset:"strokeDashoffset",array:"strokeDasharray"};function cV(t,e,n=1,i=0,r=!0){t.pathLength=1;const a=r?aV:oV;t[a.offset]=He.transform(-i);const c=He.transform(e),l=He.transform(n);t[a.array]=`${c} ${l}`}function mP(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:a=1,pathOffset:c=0,...l},d,f,m){if(Jy(t,l,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:v}=t;p.transform&&(v.transform=p.transform,delete p.transform),(v.transform||p.transformOrigin)&&(v.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),v.transform&&(v.transformBox=m?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),i!==void 0&&(p.scale=i),r!==void 0&&cV(p,r,a,c,!1)}const pP=()=>({...Qy(),attrs:{}}),gP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function lV(t,e,n,i){const r=T.useMemo(()=>{const a=pP();return mP(a,e,gP(i),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};hP(a,t.style,t),r.style={...a,...r.style}}return r}const uV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function eb(t){return typeof t!="string"||t.includes("-")?!1:!!(uV.indexOf(t)>-1||/[A-Z]/u.test(t))}function dV(t,e,n,{latestValues:i},r,a=!1){const l=(eb(t)?lV:sV)(e,i,r,t),d=XF(e,typeof t=="string",a),f=t!==T.Fragment?{...d,...l,ref:n}:{},{children:m}=e,p=T.useMemo(()=>Mn(m)?m.get():m,[m]);return T.createElement(t,{...f,children:p})}function LC(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function tb(t,e,n,i){if(typeof e=="function"){const[r,a]=LC(i);e=e(n!==void 0?n:t.custom,r,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,a]=LC(i);e=e(n!==void 0?n:t.custom,r,a)}return e}function Sf(t){return Mn(t)?t.get():t}function fV({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:hV(n,i,r,t),renderState:e()}}function hV(t,e,n,i){const r={},a=i(t,{});for(const v in a)r[v]=Sf(a[v]);let{initial:c,animate:l}=t;const d=fh(t),f=dP(t);e&&f&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),l===void 0&&(l=e.animate));let m=n?n.initial===!1:!1;m=m||c===!1;const p=m?l:c;if(p&&typeof p!="boolean"&&!dh(p)){const v=Array.isArray(p)?p:[p];for(let b=0;b<v.length;b++){const w=tb(t,v[b]);if(w){const{transitionEnd:S,transition:R,...E}=w;for(const N in E){let M=E[N];if(Array.isArray(M)){const I=m?M.length-1:0;M=M[I]}M!==null&&(r[N]=M)}for(const N in S)r[N]=S[N]}}}return r}const vP=t=>(e,n)=>{const i=T.useContext(uh),r=T.useContext(lh),a=()=>fV(t,e,i,r);return n?a():ky(a)};function nb(t,e,n){const{style:i}=t,r={};for(const a in i)(Mn(i[a])||e.style&&Mn(e.style[a])||fP(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(r[a]=i[a]);return r}const mV=vP({scrapeMotionValuesFromProps:nb,createRenderState:Qy});function yP(t,e,n){const i=nb(t,e,n);for(const r in t)if(Mn(t[r])||Mn(e[r])){const a=dc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=t[r]}return i}const pV=vP({scrapeMotionValuesFromProps:yP,createRenderState:pP}),gV=Symbol.for("motionComponentSymbol");function Uo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vV(t,e,n){return T.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Uo(n)&&(n.current=i))},[e])}const ib=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yV="framerAppearId",bP="data-"+ib(yV),SP=T.createContext({});function bV(t,e,n,i,r){const{visualElement:a}=T.useContext(uh),c=T.useContext(lP),l=T.useContext(lh),d=T.useContext(Wy).reducedMotion,f=T.useRef(null);i=i||c.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,p=T.useContext(SP);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&SV(f.current,n,r,p);const v=T.useRef(!1);T.useInsertionEffect(()=>{m&&v.current&&m.update(n,l)});const b=n[bP],w=T.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return v_(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),w.current&&m.animationState&&m.animationState.animateChanges())}),T.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),w.current=!1),m.enteringChildren=void 0)}),m}function SV(t,e,n,i){const{layoutId:r,layout:a,drag:c,dragConstraints:l,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:TP(t.parent)),t.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!c||l&&Uo(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:d,layoutRoot:f})}function TP(t){if(t)return t.options.allowProjection!==!1?t.projection:TP(t.parent)}function yg(t,{forwardMotionProps:e=!1}={},n,i){n&&YF(n);const r=eb(t)?pV:mV;function a(l,d){let f;const m={...T.useContext(Wy),...l,layoutId:TV(l)},{isStatic:p}=m,v=JF(l),b=r(l,p);if(!p&&Ry){xV();const w=wV(m);f=w.MeasureLayout,v.visualElement=bV(t,b,m,i,w.ProjectionNode)}return x.jsxs(uh.Provider,{value:v,children:[f&&v.visualElement?x.jsx(f,{visualElement:v.visualElement,...m}):null,dV(t,l,vV(b,v.visualElement,d),b,p,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=T.forwardRef(a);return c[gV]=t,c}function TV({layoutId:t}){const e=T.useContext(Ey).id;return e&&t!==void 0?e+"-"+t:t}function xV(t,e){T.useContext(lP).strict}function wV(t){const{drag:e,layout:n}=nc;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function CV(t,e){if(typeof Proxy>"u")return yg;const n=new Map,i=(a,c)=>yg(a,c,t,e),r=(a,c)=>i(a,c);return new Proxy(r,{get:(a,c)=>c==="create"?i:(n.has(c)||n.set(c,yg(c,void 0,t,e)),n.get(c))})}function xP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function EV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function kV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function bg(t){return t===void 0||t===1}function c0({scale:t,scaleX:e,scaleY:n}){return!bg(t)||!bg(e)||!bg(n)}function pa(t){return c0(t)||wP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function wP(t){return jC(t.x)||jC(t.y)}function jC(t){return t&&t!=="0%"}function Hf(t,e,n){const i=t-n,r=e*i;return n+r}function BC(t,e,n,i,r){return r!==void 0&&(t=Hf(t,r,i)),Hf(t,n,i)+e}function l0(t,e=0,n=1,i,r){t.min=BC(t.min,e,n,i,r),t.max=BC(t.max,e,n,i,r)}function CP(t,{x:e,y:n}){l0(t.x,e.translate,e.scale,e.originPoint),l0(t.y,n.translate,n.scale,n.originPoint)}const FC=.999999999999,VC=1.0000000000001;function RV(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let a,c;for(let l=0;l<r;l++){a=n[l],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&jo(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,CP(t,c)),i&&pa(a.latestValues)&&jo(t,a.latestValues))}e.x<VC&&e.x>FC&&(e.x=1),e.y<VC&&e.y>FC&&(e.y=1)}function Lo(t,e){t.min=t.min+e,t.max=t.max+e}function zC(t,e,n,i,r=.5){const a=Ft(t.min,t.max,r);l0(t,e,n,a,i)}function jo(t,e){zC(t.x,e.x,e.scaleX,e.scale,e.originX),zC(t.y,e.y,e.scaleY,e.scale,e.originY)}function EP(t,e){return xP(kV(t.getBoundingClientRect(),e))}function AV(t,e,n){const i=EP(t,n),{scroll:r}=e;return r&&(Lo(i.x,r.offset.x),Lo(i.y,r.offset.y)),i}const HC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bo=()=>({x:HC(),y:HC()}),qC=()=>({min:0,max:0}),Qt=()=>({x:qC(),y:qC()}),u0={current:null},kP={current:!1};function _V(){if(kP.current=!0,!!Ry)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>u0.current=t.matches;t.addEventListener("change",e),e()}else u0.current=!1}const PV=new WeakMap;function DV(t,e,n){for(const i in e){const r=e[i],a=n[i];if(Mn(r))t.addValue(i,r);else if(Mn(a))t.addValue(i,tc(r,{owner:t}));else if(a!==r)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(r):c.hasAnimated||c.set(r)}else{const c=t.getStaticValue(i);t.addValue(i,tc(c!==void 0?c:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const GC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class NV{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=qy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=$n.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Ut.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=fh(n),this.isVariantNode=dP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in p){const b=p[v];d[v]!==void 0&&Mn(b)&&b.set(d[v])}}mount(e){this.current=e,PV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),kP.current||_V(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:u0.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Is(this.notifyUpdate),Is(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=fc.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Ut.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in nc){const n=nc[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<GC.length;i++){const r=GC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,c=e[a];c&&(this.propEventSubscriptions[r]=this.on(r,c))}this.prevMotionValues=DV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=tc(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(y_(i)||S_(i))?i=parseFloat(i):!zF(i)&&Us.test(n)&&(i=tP(e,n)),this.setBaseTarget(e,Mn(i)?i.get():i)),Mn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=tb(this.props,n,this.presenceContext?.custom);a&&(i=a[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Mn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ny),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Yy.render(this.render)}}class RP extends NV{constructor(){super(...arguments),this.KeyframeResolver=PF}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Mn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function AP(t,{style:e,vars:n},i,r){const a=t.style;let c;for(c in e)a[c]=e[c];r?.applyProjectionStyles(a,i);for(c in n)a.setProperty(c,n[c])}function MV(t){return window.getComputedStyle(t)}class OV extends RP{constructor(){super(...arguments),this.type="html",this.renderInstance=AP}readValueFromInstance(e,n){if(fc.has(n))return this.projection?.isProjecting?e0(n):W2(e,n);{const i=MV(e),r=(Iy(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return EP(e,n)}build(e,n,i){Jy(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return nb(e,n,i)}}const _P=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IV(t,e,n,i){AP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(_P.has(r)?r:ib(r),e.attrs[r])}class UV extends RP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Qt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(fc.has(n)){const i=eP(n);return i&&i.default||0}return n=_P.has(n)?n:ib(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return yP(e,n,i)}build(e,n,i){mP(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){IV(e,n,i,r)}mount(e){this.isSVGTag=gP(e.tagName),super.mount(e)}}const LV=(t,e)=>eb(t)?new UV(e):new OV(e,{allowProjection:t!==T.Fragment});function Yo(t,e,n){const i=t.getProps();return tb(i,e,n!==void 0?n:i.custom,t)}const d0=t=>Array.isArray(t);function jV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,tc(n))}function BV(t){return d0(t)?t[t.length-1]||0:t}function FV(t,e){const n=Yo(t,e);let{transitionEnd:i={},transition:r={},...a}=n||{};a={...a,...i};for(const c in a){const l=BV(a[c]);jV(t,c,l)}}function VV(t){return!!(Mn(t)&&t.add)}function f0(t,e){const n=t.getValue("willChange");if(VV(n))return n.add(e);if(!n&&Kr.WillChange){const i=new Kr.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function PP(t){return t.props[bP]}const zV=t=>t!==null;function HV(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(zV),a=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[a]}const qV={type:"spring",stiffness:500,damping:25,restSpeed:10},GV=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),KV={type:"keyframes",duration:.8},YV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$V=(t,{keyframes:e})=>e.length>2?KV:fc.has(t)?t.startsWith("scale")?GV(e[1]):qV:YV;function WV({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:c,repeatDelay:l,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const rb=(t,e,n,i={},r,a)=>c=>{const l=Gy(i,t)||{},d=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-rr(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:r};WV(l)||Object.assign(m,$V(t,m)),m.duration&&(m.duration=rr(m.duration)),m.repeatDelay&&(m.repeatDelay=rr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let p=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(s0(m),m.delay===0&&(p=!0)),(Kr.instantAnimations||Kr.skipAnimations)&&(p=!0,s0(m),m.delay=0),m.allowFlatten=!l.type&&!l.ease,p&&!a&&e.get()!==void 0){const v=HV(m.keyframes,l);if(v!==void 0){Ut.update(()=>{m.onUpdate(v),m.onComplete()});return}}return l.isSync?new Hy(m):new yF(m)};function XV({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function DP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:c,...l}=e;i&&(a=i);const d=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const m in l){const p=t.getValue(m,t.latestValues[m]??null),v=l[m];if(v===void 0||f&&XV(f,m))continue;const b={delay:n,...Gy(a||{},m)},w=p.get();if(w!==void 0&&!p.isAnimating&&!Array.isArray(v)&&v===w&&!b.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const E=PP(t);if(E){const N=window.MotionHandoffAnimation(E,m,Ut);N!==null&&(b.startTime=N,S=!0)}}f0(t,m),p.start(rb(m,p,v,t.shouldReduceMotion&&Z_.has(m)?{type:!1}:b,t,S));const R=p.animation;R&&d.push(R)}return c&&Promise.all(d).then(()=>{Ut.update(()=>{c&&FV(t,c)})}),d}function NP(t,e,n,i=0,r=1){const a=Array.from(t).sort((f,m)=>f.sortNodePosition(m)).indexOf(e),c=t.size,l=(c-1)*i;return typeof n=="function"?n(a,c):r===1?a*i:l-a*i}function h0(t,e,n={}){const i=Yo(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const a=i?()=>Promise.all(DP(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:p}=r;return ZV(t,e,d,f,m,p,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[d,f]=l==="beforeChildren"?[a,c]:[c,a];return d().then(()=>f())}else return Promise.all([a(),c(n.delay)])}function ZV(t,e,n=0,i=0,r=0,a=1,c){const l=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),l.push(h0(d,e,{...c,delay:n+(typeof i=="function"?0:i)+NP(t.variantChildren,d,i,r,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(l)}function JV(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>h0(t,a,n));i=Promise.all(r)}else if(typeof e=="string")i=h0(t,e,n);else{const r=typeof e=="function"?Yo(t,e,n.custom):e;i=Promise.all(DP(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function MP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const QV=Zy.length;function OP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?OP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<QV;n++){const i=Zy[n],r=t.props[i];(nu(r)||r===!1)&&(e[i]=r)}return e}const e9=[...Xy].reverse(),t9=Xy.length;function n9(t){return e=>Promise.all(e.map(({animation:n,options:i})=>JV(t,n,i)))}function i9(t){let e=n9(t),n=KC(),i=!0;const r=d=>(f,m)=>{const p=Yo(t,m,d==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:v,transitionEnd:b,...w}=p;f={...f,...w,...b}}return f};function a(d){e=d(t)}function c(d){const{props:f}=t,m=OP(t.parent)||{},p=[],v=new Set;let b={},w=1/0;for(let R=0;R<t9;R++){const E=e9[R],N=n[E],M=f[E]!==void 0?f[E]:m[E],I=nu(M),A=E===d?N.isActive:null;A===!1&&(w=R);let L=M===m[E]&&M!==f[E]&&I;if(L&&i&&t.manuallyAnimateOnMount&&(L=!1),N.protectedKeys={...b},!N.isActive&&A===null||!M&&!N.prevProp||dh(M)||typeof M=="boolean")continue;const z=r9(N.prevProp,M);let H=z||E===d&&N.isActive&&!L&&I||R>w&&I,W=!1;const re=Array.isArray(M)?M:[M];let se=re.reduce(r(E),{});A===!1&&(se={});const{prevResolvedValues:fe={}}=N,Ee={...fe,...se},Ae=ie=>{H=!0,v.has(ie)&&(W=!0,v.delete(ie)),N.needsAnimating[ie]=!0;const J=t.getValue(ie);J&&(J.liveStyle=!1)};for(const ie in Ee){const J=se[ie],_e=fe[ie];if(b.hasOwnProperty(ie))continue;let F=!1;d0(J)&&d0(_e)?F=!MP(J,_e):F=J!==_e,F?J!=null?Ae(ie):v.add(ie):J!==void 0&&v.has(ie)?Ae(ie):N.protectedKeys[ie]=!0}N.prevProp=M,N.prevResolvedValues=se,N.isActive&&(b={...b,...se}),i&&t.blockInitialAnimation&&(H=!1);const Pe=L&&z;H&&(!Pe||W)&&p.push(...re.map(ie=>{const J={type:E};if(typeof ie=="string"&&i&&!Pe&&t.manuallyAnimateOnMount&&t.parent){const{parent:_e}=t,F=Yo(_e,ie);if(_e.enteringChildren&&F){const{delayChildren:Z}=F.transition||{};J.delay=NP(_e.enteringChildren,t,Z)}}return{animation:ie,options:J}}))}if(v.size){const R={};if(typeof f.initial!="boolean"){const E=Yo(t,Array.isArray(f.initial)?f.initial[0]:f.initial);E&&E.transition&&(R.transition=E.transition)}v.forEach(E=>{const N=t.getBaseTarget(E),M=t.getValue(E);M&&(M.liveStyle=!0),R[E]=N??null}),p.push({animation:R})}let S=!!p.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(p):Promise.resolve()}function l(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(d,f)),n[d].isActive=f;const m=c(d);for(const p in n)n[p].protectedKeys={};return m}return{animateChanges:c,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=KC(),i=!0}}}function r9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!MP(e,t):!1}function fa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KC(){return{animate:fa(!0),whileInView:fa(),whileHover:fa(),whileTap:fa(),whileDrag:fa(),whileFocus:fa(),exit:fa()}}class Hs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class s9 extends Hs{constructor(e){super(e),e.animationState||(e.animationState=i9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();dh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let a9=0;class o9 extends Hs{constructor(){super(...arguments),this.id=a9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const c9={animation:{Feature:s9},exit:{Feature:o9}};function ru(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function yu(t){return{point:{x:t.pageX,y:t.pageY}}}const l9=t=>e=>$y(e)&&t(e,yu(e));function Gl(t,e,n,i){return ru(t,e,l9(n),i)}const IP=1e-4,u9=1-IP,d9=1+IP,UP=.01,f9=0-UP,h9=0+UP;function jn(t){return t.max-t.min}function m9(t,e,n){return Math.abs(t-e)<=n}function YC(t,e,n,i=.5){t.origin=i,t.originPoint=Ft(e.min,e.max,t.origin),t.scale=jn(n)/jn(e),t.translate=Ft(n.min,n.max,t.origin)-t.originPoint,(t.scale>=u9&&t.scale<=d9||isNaN(t.scale))&&(t.scale=1),(t.translate>=f9&&t.translate<=h9||isNaN(t.translate))&&(t.translate=0)}function Kl(t,e,n,i){YC(t.x,e.x,n.x,i?i.originX:void 0),YC(t.y,e.y,n.y,i?i.originY:void 0)}function $C(t,e,n){t.min=n.min+e.min,t.max=t.min+jn(e)}function p9(t,e,n){$C(t.x,e.x,n.x),$C(t.y,e.y,n.y)}function WC(t,e,n){t.min=e.min-n.min,t.max=t.min+jn(e)}function Yl(t,e,n){WC(t.x,e.x,n.x),WC(t.y,e.y,n.y)}function xi(t){return[t("x"),t("y")]}const LP=({current:t})=>t?t.ownerDocument.defaultView:null,XC=(t,e)=>Math.abs(t-e);function g9(t,e){const n=XC(t.x,e.x),i=XC(t.y,e.y);return Math.sqrt(n**2+i**2)}class jP{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Tg(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,w=g9(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!w)return;const{point:S}=v,{timestamp:R}=An;this.history.push({...S,timestamp:R});const{onStart:E,onMove:N}=this.handlers;b||(E&&E(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Sg(b,this.transformPagePoint),Ut.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:w,onSessionEnd:S,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Tg(v.type==="pointercancel"?this.lastMoveEventInfo:Sg(b,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,E),S&&S(v,E)},!$y(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=r||window;const l=yu(e),d=Sg(l,this.transformPagePoint),{point:f}=d,{timestamp:m}=An;this.history=[{...f,timestamp:m}];const{onSessionStart:p}=n;p&&p(e,Tg(d,this.history)),this.removeListeners=pu(Gl(this.contextWindow,"pointermove",this.handlePointerMove),Gl(this.contextWindow,"pointerup",this.handlePointerUp),Gl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Is(this.updatePoint)}}function Sg(t,e){return e?{point:e(t.point)}:t}function ZC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Tg({point:t},e){return{point:t,delta:ZC(t,BP(e)),offset:ZC(t,v9(e)),velocity:y9(e,.1)}}function v9(t){return t[0]}function BP(t){return t[t.length-1]}function y9(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=BP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>rr(e)));)n--;if(!i)return{x:0,y:0};const a=sr(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const c={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function b9(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Ft(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Ft(n,t,i.max):Math.min(t,n)),t}function JC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function S9(t,{top:e,left:n,bottom:i,right:r}){return{x:JC(t.x,n,r),y:JC(t.y,e,i)}}function QC(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function T9(t,e){return{x:QC(t.x,e.x),y:QC(t.y,e.y)}}function x9(t,e){let n=.5;const i=jn(t),r=jn(e);return r>i?n=Ql(e.min,e.max-i,t.min):i>r&&(n=Ql(t.min,t.max-r,e.min)),Gr(0,1,n)}function w9(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const m0=.35;function C9(t=m0){return t===!1?t=0:t===!0&&(t=m0),{x:eE(t,"left","right"),y:eE(t,"top","bottom")}}function eE(t,e,n){return{min:tE(t,e),max:tE(t,n)}}function tE(t,e){return typeof t=="number"?t:t[e]||0}const E9=new WeakMap;class k9{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yu(p).point)},c=(p,v)=>{const{drag:b,dragPropagation:w,onDragStart:S}=this.getProps();if(b&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=OF(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),xi(E=>{let N=this.getAxisMotionValue(E).get()||0;if(ar.test(N)){const{projection:M}=this.visualElement;if(M&&M.layout){const I=M.layout.layoutBox[E];I&&(N=jn(I)*(parseFloat(N)/100))}}this.originPoint[E]=N}),S&&Ut.postRender(()=>S(p,v)),f0(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},l=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:w,onDirectionLock:S,onDrag:R}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:E}=v;if(w&&this.currentDirection===null){this.currentDirection=R9(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,E),this.updateAxis("y",v.point,E),this.visualElement.render(),R&&R(p,v)},d=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v,this.stop(p,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>xi(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new jP(e,{onSessionStart:a,onStart:c,onMove:l,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:i,contextWindow:LP(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!i)return;const{velocity:c}=r;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&Ut.postRender(()=>l(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!zd(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=b9(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Uo(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=S9(i.layoutBox,e):this.constraints=!1,this.elastic=C9(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&xi(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=w9(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Uo(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=AV(i,r.root,this.visualElement.getTransformPagePoint());let c=T9(r.layout.layoutBox,a);if(n){const l=n(EV(c));this.hasMutatedConstraints=!!l,l&&(c=xP(l))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},f=xi(m=>{if(!zd(m,n,this.currentDirection))return;let p=d&&d[m]||{};c&&(p={min:0,max:0});const v=r?200:1e6,b=r?40:1e7,w={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(m,w)});return Promise.all(f).then(l)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return f0(this.visualElement,e),i.start(rb(e,i,0,n,this.visualElement,!1))}stopAnimation(){xi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){xi(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){xi(n=>{const{drag:i}=this.getProps();if(!zd(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(n);if(r&&r.layout){const{min:c,max:l}=r.layout.layoutBox[n];a.set(e[n]-Ft(c,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Uo(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};xi(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const d=l.get();r[c]=x9({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),xi(c=>{if(!zd(c,e,null))return;const l=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];l.set(Ft(d,f,r[c]))})}addListeners(){if(!this.visualElement.current)return;E9.set(this.visualElement,this);const e=this.visualElement.current,n=Gl(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Uo(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ut.read(i);const c=ru(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(xi(m=>{const p=this.getAxisMotionValue(m);p&&(this.originPoint[m]+=d[m].translate,p.set(p.get()+d[m].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:c=m0,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:c,dragMomentum:l}}}function zd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function R9(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class A9 extends Hs{constructor(e){super(e),this.removeGroupControls=ki,this.removeListeners=ki,this.controls=new k9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ki}unmount(){this.removeGroupControls(),this.removeListeners()}}const nE=t=>(e,n)=>{t&&Ut.postRender(()=>t(e,n))};class _9 extends Hs{constructor(){super(...arguments),this.removePointerDownListener=ki}onPointerDown(e){this.session=new jP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:nE(e),onStart:nE(n),onMove:i,onEnd:(a,c)=>{delete this.session,r&&Ut.postRender(()=>r(a,c))}}}mount(){this.removePointerDownListener=Gl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function iE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Pl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(He.test(t))t=parseFloat(t);else return t;const n=iE(t,e.target.x),i=iE(t,e.target.y);return`${n}% ${i}%`}},P9={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Us.parse(t);if(r.length>5)return i;const a=Us.createTransformer(t),c=typeof r[0]!="number"?1:0,l=n.x.scale*e.x,d=n.y.scale*e.y;r[0+c]/=l,r[1+c]/=d;const f=Ft(l,d,.5);return typeof r[2+c]=="number"&&(r[2+c]/=f),typeof r[3+c]=="number"&&(r[3+c]/=f),a(r)}};let xg=!1;class D9 extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;QF(N9),a&&(n.group&&n.group.add(a),i&&i.register&&r&&i.register(a),xg&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Tf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:a}=this.props,{projection:c}=i;return c&&(c.isPresent=a,xg=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||Ut.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Yy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;xg=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FP(t){const[e,n]=cP(),i=T.useContext(Ey);return x.jsx(D9,{...t,layoutGroup:i,switchLayoutGroup:T.useContext(SP),isPresent:e,safeToRemove:n})}const N9={borderRadius:{...Pl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pl,borderTopRightRadius:Pl,borderBottomLeftRadius:Pl,borderBottomRightRadius:Pl,boxShadow:P9};function M9(t,e,n){const i=Mn(t)?t:tc(t);return i.start(rb("",i,e,n)),i.animation}const O9=(t,e)=>t.depth-e.depth;class I9{constructor(){this.children=[],this.isDirty=!1}add(e){Ay(this.children,e),this.isDirty=!0}remove(e){_y(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(O9),this.isDirty=!1,this.children.forEach(e)}}function U9(t,e){const n=$n.now(),i=({timestamp:r})=>{const a=r-n;a>=e&&(Is(i),t(a-e))};return Ut.setup(i,!0),()=>Is(i)}const VP=["TopLeft","TopRight","BottomLeft","BottomRight"],L9=VP.length,rE=t=>typeof t=="string"?parseFloat(t):t,sE=t=>typeof t=="number"||He.test(t);function j9(t,e,n,i,r,a){r?(t.opacity=Ft(0,n.opacity??1,B9(i)),t.opacityExit=Ft(e.opacity??1,0,F9(i))):a&&(t.opacity=Ft(e.opacity??1,n.opacity??1,i));for(let c=0;c<L9;c++){const l=`border${VP[c]}Radius`;let d=aE(e,l),f=aE(n,l);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||sE(d)===sE(f)?(t[l]=Math.max(Ft(rE(d),rE(f),i),0),(ar.test(f)||ar.test(d))&&(t[l]+="%")):t[l]=f}(e.rotate||n.rotate)&&(t.rotate=Ft(e.rotate||0,n.rotate||0,i))}function aE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const B9=zP(0,.5,A_),F9=zP(.5,.95,ki);function zP(t,e,n){return i=>i<t?0:i>e?1:n(Ql(t,e,i))}function oE(t,e){t.min=e.min,t.max=e.max}function Ti(t,e){oE(t.x,e.x),oE(t.y,e.y)}function cE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lE(t,e,n,i,r){return t-=e,t=Hf(t,1/n,i),r!==void 0&&(t=Hf(t,1/r,i)),t}function V9(t,e=0,n=1,i=.5,r,a=t,c=t){if(ar.test(e)&&(e=parseFloat(e),e=Ft(c.min,c.max,e/100)-c.min),typeof e!="number")return;let l=Ft(a.min,a.max,i);t===a&&(l-=e),t.min=lE(t.min,e,n,l,r),t.max=lE(t.max,e,n,l,r)}function uE(t,e,[n,i,r],a,c){V9(t,e[n],e[i],e[r],e.scale,a,c)}const z9=["x","scaleX","originX"],H9=["y","scaleY","originY"];function dE(t,e,n,i){uE(t.x,e,z9,n?n.x:void 0,i?i.x:void 0),uE(t.y,e,H9,n?n.y:void 0,i?i.y:void 0)}function fE(t){return t.translate===0&&t.scale===1}function HP(t){return fE(t.x)&&fE(t.y)}function hE(t,e){return t.min===e.min&&t.max===e.max}function q9(t,e){return hE(t.x,e.x)&&hE(t.y,e.y)}function mE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function qP(t,e){return mE(t.x,e.x)&&mE(t.y,e.y)}function pE(t){return jn(t.x)/jn(t.y)}function gE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class G9{constructor(){this.members=[]}add(e){Ay(this.members,e),e.scheduleRender()}remove(e){if(_y(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function K9(t,e,n){let i="";const r=t.x.translate/e.x,a=t.y.translate/e.y,c=n?.z||0;if((r||a||c)&&(i=`translate3d(${r}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:p,rotateY:v,skewX:b,skewY:w}=n;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),p&&(i+=`rotateX(${p}deg) `),v&&(i+=`rotateY(${v}deg) `),b&&(i+=`skewX(${b}deg) `),w&&(i+=`skewY(${w}deg) `)}const l=t.x.scale*e.x,d=t.y.scale*e.y;return(l!==1||d!==1)&&(i+=`scale(${l}, ${d})`),i||"none"}const wg=["","X","Y","Z"],Y9=1e3;let $9=0;function Cg(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function GP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=PP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ut,!(r||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&GP(i)}function KP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(c={},l=e?.()){this.id=$9++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Z9),this.nodes.forEach(t7),this.nodes.forEach(n7),this.nodes.forEach(J9)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new I9)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Ny),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const d=this.eventHandlers.get(c);d&&d.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=oP(c)&&!FF(c),this.instance=c;const{layoutId:l,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),t){let m,p=0;const v=()=>this.root.updateBlockedByResize=!1;Ut.read(()=>{p=window.innerWidth}),t(c,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,m&&m(),m=U9(v,250),Tf.hasAnimatedSinceResize&&(Tf.hasAnimatedSinceResize=!1,this.nodes.forEach(bE)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||o7,{onLayoutAnimationStart:S,onLayoutAnimationComplete:R}=f.getProps(),E=!this.targetLayout||!qP(this.targetLayout,b),N=!p&&v;if(this.options.layoutRoot||this.resumeFrom||N||p&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...Gy(w,"layout"),onPlay:S,onComplete:R};(f.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(m,N)}else p||bE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Is(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(i7),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&GP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const p=this.path[m];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(yE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(e7),this.nodes.forEach(W9),this.nodes.forEach(X9)):this.nodes.forEach(yE),this.clearAllSnapshots();const l=$n.now();An.delta=Gr(0,1e3/60,l-An.timestamp),An.timestamp=l,An.isProcessing=!0,fg.update.process(An),fg.preRender.process(An),fg.render.process(An),An.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Q9),this.sharedNodes.forEach(r7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ut.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ut.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!jn(this.snapshot.measuredBox.x)&&!jn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!HP(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;c&&this.instance&&(l||pa(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return c&&(d=this.removeTransform(d)),c7(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Qt();const l=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(l7))){const{scroll:f}=this.root;f&&(Lo(l.x,f.offset.x),Lo(l.y,f.offset.y))}return l}removeElementScroll(c){const l=Qt();if(Ti(l,c),this.scroll?.wasRoot)return l;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:p}=f;f!==this.root&&m&&p.layoutScroll&&(m.wasRoot&&Ti(l,c),Lo(l.x,m.offset.x),Lo(l.y,m.offset.y))}return l}applyTransform(c,l=!1){const d=Qt();Ti(d,c);for(let f=0;f<this.path.length;f++){const m=this.path[f];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&jo(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),pa(m.latestValues)&&jo(d,m.latestValues)}return pa(this.latestValues)&&jo(d,this.latestValues),d}removeTransform(c){const l=Qt();Ti(l,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!pa(f.latestValues))continue;c0(f.latestValues)&&f.updateSnapshot();const m=Qt(),p=f.measurePageBox();Ti(m,p),dE(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return pa(this.latestValues)&&dE(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==An.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:p}=this.options;if(!(!this.layout||!(m||p))){if(this.resolvedRelativeTargetAt=An.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),Yl(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Qt(),this.targetWithTransforms=Qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),p9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ti(this.target,this.layout.layoutBox),CP(this.target,this.targetDelta)):Ti(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qt(),this.relativeTargetOrigin=Qt(),Yl(this.relativeTargetOrigin,this.target,v.target),Ti(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||c0(this.parent.latestValues)||wP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),l=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===An.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;Ti(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;RV(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Qt());const{target:b}=c;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cE(this.prevProjectionDelta.x,this.projectionDelta.x),cE(this.prevProjectionDelta.y,this.projectionDelta.y)),Kl(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!gE(this.projectionDelta.x,this.prevProjectionDelta.x)||!gE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bo(),this.projectionDelta=Bo(),this.projectionDeltaWithTransform=Bo()}setAnimationOrigin(c,l=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},p=Bo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Qt(),b=d?d.source:void 0,w=this.layout?this.layout.source:void 0,S=b!==w,R=this.getStack(),E=!R||R.members.length<=1,N=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some(a7));this.animationProgress=0;let M;this.mixTargetDelta=I=>{const A=I/1e3;SE(p.x,c.x,A),SE(p.y,c.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yl(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),s7(this.relativeTarget,this.relativeTargetOrigin,v,A),M&&q9(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Qt()),Ti(M,this.relativeTarget)),S&&(this.animationValues=m,j9(m,f,this.latestValues,A,N,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Is(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ut.update(()=>{Tf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=tc(0)),this.currentAnimation=M9(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),c.onUpdate&&c.onUpdate(l)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Y9),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:d,layout:f,latestValues:m}=c;if(!(!l||!d||!f)){if(this!==c&&this.layout&&f&&YP(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Qt();const p=jn(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+p;const v=jn(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+v}Ti(l,d),jo(l,m),Kl(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new G9),this.sharedNodes.get(c).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const f={};d.z&&Cg("z",c,f,this.animationValues);for(let m=0;m<wg.length;m++)Cg(`rotate${wg[m]}`,c,f,this.animationValues),Cg(`skew${wg[m]}`,c,f,this.animationValues);c.render();for(const m in f)c.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=Sf(l?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=Sf(l?.pointerEvents)||""),this.hasProjected&&!pa(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=K9(this.projectionDeltaWithTransform,this.treeScale,m);d&&(p=d(m,p)),c.transform=p;const{x:v,y:b}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,f.animationValues?c.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in iu){if(m[w]===void 0)continue;const{correct:S,applyTo:R,isCSSVariable:E}=iu[w],N=p==="none"?m[w]:S(m[w],f);if(R){const M=R.length;for(let I=0;I<M;I++)c[R[I]]=N}else E?this.options.visualElement.renderState.vars[w]=N:c[w]=N}this.options.layoutId&&(c.pointerEvents=f===this?Sf(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(vE),this.root.sharedNodes.clear()}}}function W9(t){t.updateLayout()}function X9(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,a=e.source!==t.layout.source;r==="size"?xi(m=>{const p=a?e.measuredBox[m]:e.layoutBox[m],v=jn(p);p.min=n[m].min,p.max=p.min+v}):YP(r,e.layoutBox,n)&&xi(m=>{const p=a?e.measuredBox[m]:e.layoutBox[m],v=jn(n[m]);p.max=p.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+v)});const c=Bo();Kl(c,n,e.layoutBox);const l=Bo();a?Kl(l,t.applyTransform(i,!0),e.measuredBox):Kl(l,n,e.layoutBox);const d=!HP(c);let f=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:v}=m;if(p&&v){const b=Qt();Yl(b,e.layoutBox,p.layoutBox);const w=Qt();Yl(w,n,v.layoutBox),qP(b,w)||(f=!0),m.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=b,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function Z9(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function J9(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Q9(t){t.clearSnapshot()}function vE(t){t.clearMeasurements()}function yE(t){t.isLayoutDirty=!1}function e7(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function bE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function t7(t){t.resolveTargetDelta()}function n7(t){t.calcProjection()}function i7(t){t.resetSkewAndRotation()}function r7(t){t.removeLeadSnapshot()}function SE(t,e,n){t.translate=Ft(e.translate,0,n),t.scale=Ft(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function TE(t,e,n,i){t.min=Ft(e.min,n.min,i),t.max=Ft(e.max,n.max,i)}function s7(t,e,n,i){TE(t.x,e.x,n.x,i),TE(t.y,e.y,n.y,i)}function a7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const o7={duration:.45,ease:[.4,0,.1,1]},xE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),wE=xE("applewebkit/")&&!xE("chrome/")?Math.round:ki;function CE(t){t.min=wE(t.min),t.max=wE(t.max)}function c7(t){CE(t.x),CE(t.y)}function YP(t,e,n){return t==="position"||t==="preserve-aspect"&&!m9(pE(e),pE(n),.2)}function l7(t){return t!==t.root&&t.scroll?.wasRoot}const u7=KP({attachResizeListener:(t,e)=>ru(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Eg={current:void 0},$P=KP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Eg.current){const t=new u7({});t.mount(window),t.setOptions({layoutScroll:!0}),Eg.current=t}return Eg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),d7={pan:{Feature:_9},drag:{Feature:A9,ProjectionNode:$P,MeasureLayout:FP}};function EE(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,a=i[r];a&&Ut.postRender(()=>a(e,yu(e)))}class f7 extends Hs{mount(){const{current:e}=this.node;e&&(this.unmount=IF(e,(n,i)=>(EE(this.node,i,"Start"),r=>EE(this.node,r,"End"))))}unmount(){}}class h7 extends Hs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pu(ru(this.node.current,"focus",()=>this.onFocus()),ru(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kE(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),a=i[r];a&&Ut.postRender(()=>a(e,yu(e)))}class m7 extends Hs{mount(){const{current:e}=this.node;e&&(this.unmount=BF(e,(n,i)=>(kE(this.node,i,"Start"),(r,{success:a})=>kE(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const p0=new WeakMap,kg=new WeakMap,p7=t=>{const e=p0.get(t.target);e&&e(t)},g7=t=>{t.forEach(p7)};function v7({root:t,...e}){const n=t||document;kg.has(n)||kg.set(n,{});const i=kg.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(g7,{root:t,...e})),i[r]}function y7(t,e,n){const i=v7(e);return p0.set(t,n),i.observe(t),()=>{p0.delete(t),i.unobserve(t)}}const b7={some:0,all:1};class S7 extends Hs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:b7[r]},l=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:p}=this.node.getProps(),v=f?m:p;v&&v(d)};return y7(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(T7(e,n))&&this.startObserver()}unmount(){}}function T7({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const x7={inView:{Feature:S7},tap:{Feature:m7},focus:{Feature:h7},hover:{Feature:f7}},w7={layout:{ProjectionNode:$P,MeasureLayout:FP}},C7={...c9,...x7,...d7,...w7},pt=CV(C7,LV);var Hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function WP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g0={exports:{}},E7=g0.exports,RE;function k7(){return RE||(RE=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(E7,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],a={},c=null;function l(S,R){var E=S[R];if(typeof E.bind=="function")return E.bind(S);try{return Function.prototype.bind.call(E,S)}catch{return function(){return Function.prototype.apply.apply(E,[S,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(S){return S==="debug"&&(S="log"),typeof console===n?!1:S==="trace"&&i?d:console[S]!==void 0?l(console,S):console.log!==void 0?l(console,"log"):e}function m(){for(var S=this.getLevel(),R=0;R<r.length;R++){var E=r[R];this[E]=R<S?e:this.methodFactory(E,S,this.name)}if(this.log=this.debug,typeof console===n&&S<this.levels.SILENT)return"No console available for logging"}function p(S){return function(){typeof console!==n&&(m.call(this),this[S].apply(this,arguments))}}function v(S,R,E){return f(S)||p.apply(this,arguments)}function b(S,R){var E=this,N,M,I,A="loglevel";typeof S=="string"?A+=":"+S:typeof S=="symbol"&&(A=void 0);function L(se){var fe=(r[se]||"silent").toUpperCase();if(!(typeof window===n||!A)){try{window.localStorage[A]=fe;return}catch{}try{window.document.cookie=encodeURIComponent(A)+"="+fe+";"}catch{}}}function z(){var se;if(!(typeof window===n||!A)){try{se=window.localStorage[A]}catch{}if(typeof se===n)try{var fe=window.document.cookie,Ee=encodeURIComponent(A),Ae=fe.indexOf(Ee+"=");Ae!==-1&&(se=/^([^;]+)/.exec(fe.slice(Ae+Ee.length+1))[1])}catch{}return E.levels[se]===void 0&&(se=void 0),se}}function H(){if(!(typeof window===n||!A)){try{window.localStorage.removeItem(A)}catch{}try{window.document.cookie=encodeURIComponent(A)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function W(se){var fe=se;if(typeof fe=="string"&&E.levels[fe.toUpperCase()]!==void 0&&(fe=E.levels[fe.toUpperCase()]),typeof fe=="number"&&fe>=0&&fe<=E.levels.SILENT)return fe;throw new TypeError("log.setLevel() called with invalid level: "+se)}E.name=S,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=R||v,E.getLevel=function(){return I??M??N},E.setLevel=function(se,fe){return I=W(se),fe!==!1&&L(I),m.call(E)},E.setDefaultLevel=function(se){M=W(se),z()||E.setLevel(se,!1)},E.resetLevel=function(){I=null,H(),m.call(E)},E.enableAll=function(se){E.setLevel(E.levels.TRACE,se)},E.disableAll=function(se){E.setLevel(E.levels.SILENT,se)},E.rebuild=function(){if(c!==E&&(N=W(c.getLevel())),m.call(E),c===E)for(var se in a)a[se].rebuild()},N=W(c?c.getLevel():"WARN");var re=z();re!=null&&(I=W(re)),m.call(E)}c=new b,c.getLogger=function(S){if(typeof S!="symbol"&&typeof S!="string"||S==="")throw new TypeError("You must supply a name when creating a logger.");var R=a[S];return R||(R=a[S]=new b(S,c.methodFactory)),R};var w=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=w),c},c.getLoggers=function(){return a},c.default=c,c})}(g0)),g0.exports}var R7=k7();const A7=WP(R7);var v0=function(t,e){return v0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},v0(t,e)};function Zr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");v0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function _7(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,[])).next())})}function XP(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=l(0),c.throw=l(1),c.return=l(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(m){return d([f,m])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(n=0)),n;)try{if(i=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],r=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function ic(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function su(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,a=[],c;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(l){c={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return a}function au(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}function $o(t){return this instanceof $o?(this.v=t,this):new $o(t)}function P7(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(b){return function(w){return Promise.resolve(w).then(b,p)}}function l(b,w){i[b]&&(r[b]=function(S){return new Promise(function(R,E){a.push([b,S,R,E])>1||d(b,S)})},w&&(r[b]=w(r[b])))}function d(b,w){try{f(i[b](w))}catch(S){v(a[0][3],S)}}function f(b){b.value instanceof $o?Promise.resolve(b.value.v).then(m,p):v(a[0][2],b)}function m(b){d("next",b)}function p(b){d("throw",b)}function v(b,w){b(w),a.shift(),a.length&&d(a[0][0],a[0][1])}}function D7(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ic=="function"?ic(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}function un(t){return typeof t=="function"}function sb(t){var e=function(i){Error.call(i),i.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Rg=sb(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function qf(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var bu=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,i,r,a;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=ic(c),d=l.next();!d.done;d=l.next()){var f=d.value;f.remove(this)}}catch(S){e={error:S}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}else c.remove(this);var m=this.initialTeardown;if(un(m))try{m()}catch(S){a=S instanceof Rg?S.errors:[S]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var v=ic(p),b=v.next();!b.done;b=v.next()){var w=b.value;try{AE(w)}catch(S){a=a??[],S instanceof Rg?a=au(au([],su(a)),su(S.errors)):a.push(S)}}}catch(S){i={error:S}}finally{try{b&&!b.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}if(a)throw new Rg(a)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)AE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&qf(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&qf(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),ZP=bu.EMPTY;function JP(t){return t instanceof bu||t&&"closed"in t&&un(t.remove)&&un(t.add)&&un(t.unsubscribe)}function AE(t){un(t)?t():t.unsubscribe()}var N7={Promise:void 0},M7={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,au([t,e],su(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function QP(t){M7.setTimeout(function(){throw t})}function y0(){}function xf(t){t()}var ab=function(t){Zr(e,t);function e(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,JP(n)&&n.add(i)):i.destination=U7,i}return e.create=function(n,i,r){return new ou(n,i,r)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(bu),O7=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(i){qd(i)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(i){qd(i)}else qd(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){qd(n)}},t}(),ou=function(t){Zr(e,t);function e(n,i,r){var a=t.call(this)||this,c;return un(n)||!n?c={next:n??void 0,error:i??void 0,complete:r??void 0}:c=n,a.destination=new O7(c),a}return e}(ab);function qd(t){QP(t)}function I7(t){throw t}var U7={closed:!0,next:y0,error:I7,complete:y0},ob=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function cb(t){return t}function L7(t){return t.length===0?cb:t.length===1?t[0]:function(e){return t.reduce(function(n,i){return i(n)},e)}}var nn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,i){var r=this,a=B7(e)?e:new ou(e,n,i);return xf(function(){var c=r,l=c.operator,d=c.source;a.add(l?l.call(a,d):d?r._subscribe(a):r._trySubscribe(a))}),a},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var i=this;return n=_E(n),new n(function(r,a){var c=new ou({next:function(l){try{e(l)}catch(d){a(d),c.unsubscribe()}},error:a,complete:r});i.subscribe(c)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[ob]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return L7(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=_E(e),new e(function(i,r){var a;n.subscribe(function(c){return a=c},function(c){return r(c)},function(){return i(a)})})},t.create=function(e){return new t(e)},t}();function _E(t){var e;return(e=t??N7.Promise)!==null&&e!==void 0?e:Promise}function j7(t){return t&&un(t.next)&&un(t.error)&&un(t.complete)}function B7(t){return t&&t instanceof ab||j7(t)&&JP(t)}function F7(t){return un(t?.lift)}function mr(t){return function(e){if(F7(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ls(t,e,n,i,r){return new V7(t,e,n,i,r)}var V7=function(t){Zr(e,t);function e(n,i,r,a,c,l){var d=t.call(this,n)||this;return d.onFinalize=c,d.shouldUnsubscribe=l,d._next=i?function(f){try{i(f)}catch(m){n.error(m)}}:t.prototype._next,d._error=a?function(f){try{a(f)}catch(m){n.error(m)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=r?function(){try{r()}catch(f){n.error(f)}finally{this.unsubscribe()}}:t.prototype._complete,d}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(ab),z7=sb(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Yr=function(t){Zr(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var i=new PE(this,this);return i.operator=n,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new z7},e.prototype.next=function(n){var i=this;xf(function(){var r,a;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var c=ic(i.currentObservers),l=c.next();!l.done;l=c.next()){var d=l.value;d.next(n)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}}})},e.prototype.error=function(n){var i=this;xf(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var r=i.observers;r.length;)r.shift().error(n)}})},e.prototype.complete=function(){var n=this;xf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var i=this,r=this,a=r.hasError,c=r.isStopped,l=r.observers;return a||c?ZP:(this.currentObservers=null,l.push(n),new bu(function(){i.currentObservers=null,qf(l,n)}))},e.prototype._checkFinalizedStatuses=function(n){var i=this,r=i.hasError,a=i.thrownError,c=i.isStopped;r?n.error(a):c&&n.complete()},e.prototype.asObservable=function(){var n=new nn;return n.source=this,n},e.create=function(n,i){return new PE(n,i)},e}(nn),PE=function(t){Zr(e,t);function e(n,i){var r=t.call(this)||this;return r.destination=n,r.source=i,r}return e.prototype.next=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.next)===null||r===void 0||r.call(i,n)},e.prototype.error=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.error)===null||r===void 0||r.call(i,n)},e.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},e.prototype._subscribe=function(n){var i,r;return(r=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&r!==void 0?r:ZP},e}(Yr),eD=function(t){Zr(e,t);function e(n){var i=t.call(this)||this;return i._value=n,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var i=t.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},e.prototype.getValue=function(){var n=this,i=n.hasError,r=n.thrownError,a=n._value;if(i)throw r;return this._throwIfClosed(),a},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Yr),H7={now:function(){return Date.now()}},q7=function(t){Zr(e,t);function e(n,i){return t.call(this)||this}return e.prototype.schedule=function(n,i){return this},e}(bu),DE={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,au([t,e],su(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},G7=function(t){Zr(e,t);function e(n,i){var r=t.call(this,n,i)||this;return r.scheduler=n,r.work=i,r.pending=!1,r}return e.prototype.schedule=function(n,i){var r;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var a=this.id,c=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(c,a,i)),this.pending=!0,this.delay=i,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(c,this.id,i),this},e.prototype.requestAsyncId=function(n,i,r){return r===void 0&&(r=0),DE.setInterval(n.flush.bind(n,this),r)},e.prototype.recycleAsyncId=function(n,i,r){if(r===void 0&&(r=0),r!=null&&this.delay===r&&this.pending===!1)return i;i!=null&&DE.clearInterval(i)},e.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(n,i);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,i){var r=!1,a;try{this.work(n)}catch(c){r=!0,a=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,r=n.scheduler,a=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,qf(a,this),i!=null&&(this.id=this.recycleAsyncId(r,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(q7),NE=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(i,n)},t.now=H7.now,t}(),K7=function(t){Zr(e,t);function e(n,i){i===void 0&&(i=NE.now);var r=t.call(this,n,i)||this;return r.actions=[],r._active=!1,r}return e.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,r){for(;n=i.shift();)n.unsubscribe();throw r}},e}(NE);new K7(G7);function Y7(t){return t&&un(t.schedule)}function $7(t){return t[t.length-1]}function tD(t){return Y7($7(t))?t.pop():void 0}var nD=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function iD(t){return un(t?.then)}function rD(t){return un(t[ob])}function sD(t){return Symbol.asyncIterator&&un(t?.[Symbol.asyncIterator])}function aD(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function W7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var oD=W7();function cD(t){return un(t?.[oD])}function lD(t){return P7(this,arguments,function(){var e,n,i,r;return XP(this,function(a){switch(a.label){case 0:e=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,$o(e.read())];case 3:return n=a.sent(),i=n.value,r=n.done,r?[4,$o(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,$o(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function uD(t){return un(t?.getReader)}function qs(t){if(t instanceof nn)return t;if(t!=null){if(rD(t))return X7(t);if(nD(t))return Z7(t);if(iD(t))return J7(t);if(sD(t))return dD(t);if(cD(t))return Q7(t);if(uD(t))return ez(t)}throw aD(t)}function X7(t){return new nn(function(e){var n=t[ob]();if(un(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Z7(t){return new nn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function J7(t){return new nn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,QP)})}function Q7(t){return new nn(function(e){var n,i;try{for(var r=ic(t),a=r.next();!a.done;a=r.next()){var c=a.value;if(e.next(c),e.closed)return}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}e.complete()})}function dD(t){return new nn(function(e){tz(t,e).catch(function(n){return e.error(n)})})}function ez(t){return dD(lD(t))}function tz(t,e){var n,i,r,a;return _7(this,void 0,void 0,function(){var c,l;return XP(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=D7(t),d.label=1;case 1:return[4,n.next()];case 2:if(i=d.sent(),!!i.done)return[3,4];if(c=i.value,e.next(c),e.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),r={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),i&&!i.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function xa(t,e,n,i,r){i===void 0&&(i=0),r===void 0&&(r=!1);var a=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function fD(t,e){return e===void 0&&(e=0),mr(function(n,i){n.subscribe(Ls(i,function(r){return xa(i,t,function(){return i.next(r)},e)},function(){return xa(i,t,function(){return i.complete()},e)},function(r){return xa(i,t,function(){return i.error(r)},e)}))})}function hD(t,e){return e===void 0&&(e=0),mr(function(n,i){i.add(t.schedule(function(){return n.subscribe(i)},e))})}function nz(t,e){return qs(t).pipe(hD(e),fD(e))}function iz(t,e){return qs(t).pipe(hD(e),fD(e))}function rz(t,e){return new nn(function(n){var i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function sz(t,e){return new nn(function(n){var i;return xa(n,e,function(){i=t[oD](),xa(n,e,function(){var r,a,c;try{r=i.next(),a=r.value,c=r.done}catch(l){n.error(l);return}c?n.complete():n.next(a)},0,!0)}),function(){return un(i?.return)&&i.return()}})}function mD(t,e){if(!t)throw new Error("Iterable cannot be null");return new nn(function(n){xa(n,e,function(){var i=t[Symbol.asyncIterator]();xa(n,e,function(){i.next().then(function(r){r.done?n.complete():n.next(r.value)})},0,!0)})})}function az(t,e){return mD(lD(t),e)}function oz(t,e){if(t!=null){if(rD(t))return nz(t,e);if(nD(t))return rz(t,e);if(iD(t))return iz(t,e);if(sD(t))return mD(t,e);if(cD(t))return sz(t,e);if(uD(t))return az(t,e)}throw aD(t)}function lb(t,e){return e?oz(t,e):qs(t)}sb(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function On(t,e){return mr(function(n,i){var r=0;n.subscribe(Ls(i,function(a){i.next(t.call(e,a,r++))}))})}function cz(t,e,n,i,r,a,c,l){var d=[],f=0,m=0,p=!1,v=function(){p&&!d.length&&!f&&e.complete()},b=function(S){return f<i?w(S):d.push(S)},w=function(S){f++;var R=!1;qs(n(S,m++)).subscribe(Ls(e,function(E){e.next(E)},function(){R=!0},void 0,function(){if(R)try{f--;for(var E=function(){var N=d.shift();c||w(N)};d.length&&f<i;)E();v()}catch(N){e.error(N)}}))};return t.subscribe(Ls(e,b,function(){p=!0,v()})),function(){}}function pD(t,e,n){return n===void 0&&(n=1/0),un(e)?pD(function(i,r){return On(function(a,c){return e(i,a,r,c)})(qs(t(i,r)))},n):(typeof e=="number"&&(n=e),mr(function(i,r){return cz(i,r,t,n)}))}function lz(t){return pD(cb,t)}function uz(){return lz(1)}function b0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return uz()(lb(t,tD(t)))}function ub(t,e){return mr(function(n,i){var r=0;n.subscribe(Ls(i,function(a){return t.call(e,a,r++)&&i.next(a)}))})}function dz(t,e,n,i,r){return function(a,c){var l=n,d=e,f=0;a.subscribe(Ls(c,function(m){var p=f++;d=l?t(d,m,p):(l=!0,m),c.next(d)},r))}}function S0(t,e){return mr(dz(t,e,arguments.length>=2,!0))}function fz(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new Yr}:e,i=t.resetOnError,r=i===void 0?!0:i,a=t.resetOnComplete,c=a===void 0?!0:a,l=t.resetOnRefCountZero,d=l===void 0?!0:l;return function(f){var m,p,v,b=0,w=!1,S=!1,R=function(){p?.unsubscribe(),p=void 0},E=function(){R(),m=v=void 0,w=S=!1},N=function(){var M=m;E(),M?.unsubscribe()};return mr(function(M,I){b++,!S&&!w&&R();var A=v=v??n();I.add(function(){b--,b===0&&!S&&!w&&(p=Ag(N,d))}),A.subscribe(I),!m&&b>0&&(m=new ou({next:function(L){return A.next(L)},error:function(L){S=!0,R(),p=Ag(E,r,L),A.error(L)},complete:function(){w=!0,R(),p=Ag(E,c),A.complete()}}),qs(M).subscribe(m))})(f)}}function Ag(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(e===!0){t();return}if(e!==!1){var r=new ou({next:function(){r.unsubscribe(),t()}});return qs(e.apply(void 0,au([],su(n)))).subscribe(r)}}function pr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=tD(t);return mr(function(i,r){(n?b0(t,i,n):b0(t,i)).subscribe(r)})}function ME(t){return mr(function(e,n){qs(t).subscribe(Ls(n,function(){return n.complete()},y0)),!n.closed&&e.subscribe(n)})}function hz(t,e,n){var i=un(t)||e||n?{next:t,error:e,complete:n}:t;return i?mr(function(r,a){var c;(c=i.subscribe)===null||c===void 0||c.call(i);var l=!0;r.subscribe(Ls(a,function(d){var f;(f=i.next)===null||f===void 0||f.call(i,d),a.next(d)},function(){var d;l=!1,(d=i.complete)===null||d===void 0||d.call(i),a.complete()},function(d){var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,d),a.error(d)},function(){var d,f;l&&((d=i.unsubscribe)===null||d===void 0||d.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):cb}var mz=Object.defineProperty,pz=Object.defineProperties,gz=Object.getOwnPropertyDescriptors,OE=Object.getOwnPropertySymbols,vz=Object.prototype.hasOwnProperty,yz=Object.prototype.propertyIsEnumerable,IE=(t,e,n)=>e in t?mz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tr=(t,e)=>{for(var n in e||(e={}))vz.call(e,n)&&IE(t,n,e[n]);if(OE)for(var n of OE(e))yz.call(e,n)&&IE(t,n,e[n]);return t},ga=(t,e)=>pz(t,gz(e)),ur=(t,e,n)=>new Promise((i,r)=>{var a=d=>{try{l(n.next(d))}catch(f){r(f)}},c=d=>{try{l(n.throw(d))}catch(f){r(f)}},l=d=>d.done?i(d.value):Promise.resolve(d.value).then(a,c);l((n=n.apply(t,e)).next())}),gD="lk";function db(t){return typeof t>"u"?!1:bz(t)||Sz(t)}function bz(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function Sz(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function Tz(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function vD(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(Tz(t))return`${t.participant.identity}_${t.source}_placeholder`;if(db(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}var xz=[he.ConnectionStateChanged,he.RoomMetadataChanged,he.ActiveSpeakersChanged,he.ConnectionQualityChanged,he.ParticipantConnected,he.ParticipantDisconnected,he.ParticipantPermissionsChanged,he.ParticipantMetadataChanged,he.ParticipantNameChanged,he.ParticipantAttributesChanged,he.TrackMuted,he.TrackUnmuted,he.TrackPublished,he.TrackUnpublished,he.TrackStreamStateChanged,he.TrackSubscriptionFailed,he.TrackSubscriptionPermissionChanged,he.TrackSubscriptionStatusChanged],yD=[...xz,he.LocalTrackPublished,he.LocalTrackUnpublished],wz=[ye.TrackPublished,ye.TrackUnpublished,ye.TrackMuted,ye.TrackUnmuted,ye.TrackStreamStateChanged,ye.TrackSubscribed,ye.TrackUnsubscribed,ye.TrackSubscriptionPermissionChanged,ye.TrackSubscriptionFailed,ye.LocalTrackPublished,ye.LocalTrackUnpublished],Cz=[ye.ConnectionQualityChanged,ye.IsSpeakingChanged,ye.ParticipantMetadataChanged,ye.ParticipantPermissionsChanged,ye.TrackMuted,ye.TrackUnmuted,ye.TrackPublished,ye.TrackUnpublished,ye.TrackStreamStateChanged,ye.TrackSubscriptionFailed,ye.TrackSubscriptionPermissionChanged,ye.TrackSubscriptionStatusChanged];[...Cz,ye.LocalTrackPublished,ye.LocalTrackUnpublished];var dn=A7.getLogger("lk-components-js");dn.setDefaultLevel("WARN");function Ez(t,e){var n;return ga(tr({},t),{receivedAtMediaTimestamp:(n=e.rtpTimestamp)!=null?n:0,receivedAt:e.timestamp})}function kz(t,e,n){return[...t,...e].reduceRight((i,r)=>(i.find(a=>a.id===r.id)||i.unshift(r),i),[]).slice(0-n)}function bD(t){return typeof t=="object"}function SD(t){return Array.isArray(t)&&t.filter(bD).length>0}function Su(t){return`${gD}-${t}`}function Rz(t){const e=T0(t),n=hb(t.participant).pipe(On(()=>T0(t)),pr(e));return{className:Su(t.source===te.Source.Camera||t.source===te.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function T0(t){if(db(t))return t.publication;{const{source:e,name:n,participant:i}=t;if(e&&n)return i.getTrackPublications().find(r=>r.source===e&&r.trackName===n);if(n)return i.getTrackPublicationByName(n);if(e)return i.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function hh(t,...e){return new nn(n=>{const i=()=>{n.next(t)};return e.forEach(r=>{t.on(r,i)}),()=>{e.forEach(r=>{t.off(r,i)})}}).pipe(pr(t))}function fb(t,e){return new nn(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function Az(t){return fb(t,he.ConnectionStateChanged).pipe(On(([e])=>e),pr(t.state))}function _z(t){return hh(t,he.RoomMetadataChanged,he.ConnectionStateChanged).pipe(On(e=>({name:e.name,metadata:e.metadata})))}function Pz(t,e,n=!0){const i=new nn(a=>{qr.getLocalDevices(t,n).then(c=>{a.next(c),a.complete()}).catch(c=>{e?.(c),a.next([]),a.complete()})}),r=new nn(a=>{var c;const l=()=>ur(this,null,function*(){try{const d=yield qr.getLocalDevices(t,n);a.next(d)}catch(d){e?.(d)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(c=navigator?.mediaDevices)==null||c.addEventListener("devicechange",l)}return()=>{var d;(d=navigator?.mediaDevices)==null||d.removeEventListener("devicechange",l)}});return b0(i,r)}function Dz(t){return fb(t,he.DataReceived)}function Nz(t){return hh(t,he.AudioPlaybackStatusChanged).pipe(On(e=>({canPlayAudio:e.canPlaybackAudio})))}function Mz(t,e){return fb(t,he.ActiveDeviceChanged).pipe(ub(([n])=>n===e),On(([n,i])=>(dn.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:i}),i)))}function TD(t,...e){return new nn(n=>{const i=()=>{n.next(t)};return e.forEach(r=>{t.on(r,i)}),()=>{e.forEach(r=>{t.off(r,i)})}}).pipe(pr(t))}function hb(t){return TD(t,ye.TrackMuted,ye.TrackUnmuted,ye.ParticipantPermissionsChanged,ye.TrackPublished,ye.TrackUnpublished,ye.LocalTrackPublished,ye.LocalTrackUnpublished,ye.MediaDevicesError,ye.TrackSubscriptionStatusChanged).pipe(On(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:i,isScreenShareEnabled:r}=e,a=e.getTrackPublication(te.Source.Microphone),c=e.getTrackPublication(te.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:n,isScreenShareEnabled:r,cameraTrack:c,microphoneTrack:a,participant:e}}))}function xD(t,e){return new nn(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function Oz(t,e={}){var n;let i;const r=new nn(d=>(i=d,()=>l.unsubscribe())).pipe(pr(Array.from(t.remoteParticipants.values()))),a=(n=e.additionalRoomEvents)!=null?n:yD,c=Array.from(new Set([he.ParticipantConnected,he.ParticipantDisconnected,he.ConnectionStateChanged,...a])),l=hh(t,...c).subscribe(d=>i?.next(Array.from(d.remoteParticipants.values())));return t.remoteParticipants.size>0&&i?.next(Array.from(t.remoteParticipants.values())),r}function Iz(t){return xD(t,ye.ParticipantPermissionsChanged).pipe(On(()=>t.permissions),pr(t.permissions))}function UE(t){return typeof t>"u"?new nn:xD(t,ye.AttributesChanged).pipe(On(([e])=>({changed:e,attributes:t.attributes})),pr({changed:t.attributes,attributes:t.attributes}))}function Uz(t,e,n,i,r){const{localParticipant:a}=e,c=(m,p)=>{let v=!1;switch(m){case te.Source.Camera:v=p.isCameraEnabled;break;case te.Source.Microphone:v=p.isMicrophoneEnabled;break;case te.Source.ScreenShare:v=p.isScreenShareEnabled;break}return v},l=hb(a).pipe(On(m=>c(t,m.participant)),pr(c(t,a))),d=new Yr,f=(m,p)=>ur(this,null,function*(){try{switch(p??(p=n),d.next(!0),t){case te.Source.Camera:return yield a.setCameraEnabled(m??!a.isCameraEnabled,p,i),a.isCameraEnabled;case te.Source.Microphone:return yield a.setMicrophoneEnabled(m??!a.isMicrophoneEnabled,p,i),a.isMicrophoneEnabled;case te.Source.ScreenShare:return yield a.setScreenShareEnabled(m??!a.isScreenShareEnabled,p,i),a.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(v){if(r&&v instanceof Error){r?.(v);return}else throw v}finally{d.next(!1)}});return{className:Su("button"),toggle:f,enabledObserver:l,pendingObserver:d.asObservable()}}function Lz(){let t=!1;const e=new Yr,n=new Yr,i=r=>ur(this,null,function*(){n.next(!0),t=r??!t,e.next(t),n.next(!1)});return{className:Su("button"),toggle:i,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function jz(t,e,n){const i=new eD(void 0),r=Mz(e,t),a=(c,...l)=>ur(this,[c,...l],function*(d,f={}){var m,p,v;if(e){dn.debug(`Switching active device of kind "${t}" with id ${d}.`),yield e.switchActiveDevice(t,d,f.exact);const b=(m=e.getActiveDevice(t))!=null?m:d;b!==d&&d!=="default"&&dn.info(`We tried to select the device with id (${d}), but the browser decided to select the device with id (${b}) instead.`);let w;t==="audioinput"?w=(p=e.localParticipant.getTrackPublication(te.Source.Microphone))==null?void 0:p.track:t==="videoinput"&&(w=(v=e.localParticipant.getTrackPublication(te.Source.Camera))==null?void 0:v.track);const S=d==="default"&&!w||d==="default"&&w?.mediaStreamTrack.label.startsWith("Default");i.next(S?d:b)}});return{className:Su("media-device-select"),activeDeviceObservable:r,setActiveMediaDevice:a}}var wD={CHAT:"lk.chat",TRANSCRIPTION:"lk.transcription"},Bz={CHAT:"lk-chat-topic"};function CD(t,e){return ur(this,arguments,function*(n,i,r={}){const{reliable:a,destinationIdentities:c,topic:l}=r;yield n.publishData(i,{destinationIdentities:c,topic:l,reliable:a})})}function Fz(t,e,n){const i=Array.isArray(e)?e:[e],r=Dz(t).pipe(ub(([,,,l])=>e===void 0||l!==void 0&&i.includes(l)),On(([l,d,,f])=>({payload:l,topic:f,from:d})));let a;const c=new nn(l=>{a=l});return{messageObservable:r,isSendingObservable:c,send:(l,...d)=>ur(this,[l,...d],function*(f,m={}){a.next(!0);try{yield CD(t.localParticipant,f,tr({topic:i[0]},m))}finally{a.next(!1)}})}}var Gd=new WeakMap;function Vz(t){return t.ignoreLegacy==!0}var zz=t=>JSON.parse(new TextDecoder().decode(t)),Hz=t=>new TextEncoder().encode(JSON.stringify(t));function qz(t,e){var n,i,r,a,c,l;const d=()=>{var A,L,z;return((A=t.serverInfo)==null?void 0:A.edition)===1||!!((L=t.serverInfo)!=null&&L.version)&&Vi((z=t.serverInfo)==null?void 0:z.version,"1.8.2")>0},f=new Yr,m=(n=void 0)!=null?n:wD.CHAT,p=(i=void 0)!=null?i:Bz.CHAT;let v=!1;Gd.has(t)||(v=!0);const b=(r=Gd.get(t))!=null?r:new Map,w=(a=b.get(m))!=null?a:new Yr;b.set(m,w),Gd.set(t,b);const S=(c=void 0)!=null?c:zz;if(v){t.registerTextStreamHandler(m,(L,z)=>ur(this,null,function*(){const{id:H,timestamp:W}=L.info;lb(L).pipe(S0((re,se)=>re+se),On(re=>({id:H,timestamp:W,message:re,from:t.getParticipantByIdentity(z.identity)}))).subscribe({next:re=>w.next(re)})}));const{messageObservable:A}=Fz(t,[p]);A.pipe(On(L=>{const z=S(L.payload);return Vz(z)?void 0:ga(tr({},z),{from:L.from})}),ub(L=>!!L),ME(f)).subscribe(w)}const R=w.pipe(S0((A,L)=>{if("id"in L&&A.find(z=>{var H,W;return((H=z.from)==null?void 0:H.identity)===((W=L.from)==null?void 0:W.identity)&&z.id===L.id})){const z=A.findIndex(H=>H.id===L.id);if(z>-1){const H=A[z];A[z]=ga(tr({},L),{timestamp:H.timestamp,editTimestamp:L.timestamp})}return[...A]}return[...A,L]},[]),ME(f)),E=new eD(!1),N=(l=void 0)!=null?l:Hz,M=(A,L)=>ur(this,null,function*(){L||(L={}),L.topic!=null||(L.topic=m),E.next(!0);try{const z={id:(yield t.localParticipant.sendText(A,L)).id,timestamp:Date.now(),message:A},H=ga(tr({},z),{attachedFiles:L.attachments}),W=ga(tr({},H),{from:t.localParticipant,attributes:L.attributes});w.next(W);const re=N(ga(tr({},z),{ignoreLegacy:d()}));try{yield CD(t.localParticipant,re,{reliable:!0,topic:p})}catch(se){dn.info("could not send message in legacy chat format",se)}return W}finally{E.next(!1)}});function I(){f.next(),f.complete(),w.complete(),Gd.delete(t),t.unregisterTextStreamHandler(m)}return t.once(he.Disconnected,I),{messageObservable:R,isSendingObservable:E,send:M}}function Gz(){const t=e=>ur(this,null,function*(){dn.info("Start Audio for room: ",e),yield e.startAudio()});return{className:Su("start-audio-button"),roomAudioPlaybackAllowedObservable:Nz,handleStartAudioPlayback:t}}function LE(t,e,n=!0){const i=[t.localParticipant,...Array.from(t.remoteParticipants.values())],r=[];return i.forEach(a=>{e.forEach(c=>{const l=Array.from(a.trackPublications.values()).filter(d=>d.source===c&&(!n||d.track)).map(d=>({participant:a,publication:d,source:d.source}));r.push(...l)})}),{trackReferences:r,participants:i}}function jE(t,e,n=!1){const{sources:i,kind:r,name:a}=e;return Array.from(t.trackPublications.values()).filter(c=>(!i||i.includes(c.source))&&(!r||c.kind===r)&&(!a||c.trackName===a)&&(!n||c.track)).map(c=>({participant:t,publication:c,source:c.source}))}function Kz(t,e,n){var i,r;const a=(i=n.additionalRoomEvents)!=null?i:yD,c=(r=n.onlySubscribed)!=null?r:!0,l=Array.from(new Set([he.ParticipantConnected,he.ParticipantDisconnected,he.ConnectionStateChanged,he.LocalTrackPublished,he.LocalTrackUnpublished,he.TrackPublished,he.TrackUnpublished,he.TrackSubscriptionStatusChanged,...a]).values());return hh(t,...l).pipe(On(d=>{const f=LE(d,e,c);return dn.debug(`TrackReference[] was updated. (length ${f.trackReferences.length})`,f),f}),pr(LE(t,e,c)))}function Yz(t,e){return TD(t,...wz).pipe(On(n=>{const i=jE(n,e);return dn.debug(`TrackReference[] was updated. (length ${i.length})`,i),i}),pr(jE(t,e)))}function ED(t,e){return new nn(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function $z(t){return ED(t,ke.TranscriptionReceived)}function Wz(t){return ED(t,ke.TimeSyncUpdate).pipe(On(([e])=>e))}function Xz(t,e){if(typeof localStorage>"u"){dn.error("Local storage is not available.");return}try{if(e){const n=Object.fromEntries(Object.entries(e).filter(([,i])=>i!==""));localStorage.setItem(t,JSON.stringify(n))}}catch(n){dn.error(`Error setting item to local storage: ${n}`)}}function Zz(t){if(typeof localStorage>"u"){dn.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){dn.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){dn.error(`Error getting item from local storage: ${e}`);return}}function Jz(t){return{load:()=>Zz(t),save:e=>Xz(t,e)}}var Qz=`${gD}-user-choices`,Dl={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:eH,save:tH}=Jz(Qz);function nH(t,e=!1){e!==!0&&tH(t)}function iH(t,e=!1){var n,i,r,a,c;const l={videoEnabled:(n=t?.videoEnabled)!=null?n:Dl.videoEnabled,audioEnabled:(i=t?.audioEnabled)!=null?i:Dl.audioEnabled,videoDeviceId:(r=t?.videoDeviceId)!=null?r:Dl.videoDeviceId,audioDeviceId:(a=t?.audioDeviceId)!=null?a:Dl.audioDeviceId,username:(c=t?.username)!=null?c:Dl.username};if(e)return l;{const d=eH();return tr(tr({},l),d??{})}}var _g=null,Pg=null,rH=0;function BE(){return _g||(_g=new Map),_g}function sH(){return Pg||(Pg=new WeakMap),Pg}function aH(t,e){const n=sH();let i=n.get(t);return i||(i=`room_${rH++}`,n.set(t,i)),`${i}:${e}`}function oH(t,e){const n=aH(t,e),i=BE(),r=i.get(n);if(r)return r;const a=new Yr;let c=[];const l="lk.segment_id",d=a.pipe(hz({subscribe:()=>{t.registerTextStreamHandler(e,(f,m)=>ur(this,null,function*(){var p;const v=lb(f).pipe(S0((w,S)=>w+S,"")),b=!!((p=f.info.attributes)!=null&&p[l]);v.subscribe(w=>{const S=c.findIndex(R=>{var E,N;return R.streamInfo.id===f.info.id||b&&((E=R.streamInfo.attributes)==null?void 0:E[l])===((N=f.info.attributes)==null?void 0:N[l])});S!==-1?(c[S]=ga(tr({},c[S]),{text:w}),a.next([...c])):(c.push({text:w,participantInfo:m,streamInfo:f.info}),a.next([...c]))})}))},finalize:()=>{t.unregisterTextStreamHandler(e)}}),fz());return i.set(n,d),t.on(he.Disconnected,()=>{BE().delete(n),c=[],a.next([])}),d}T.createContext(void 0);const cH=T.createContext(void 0);function kD(){return T.useContext(cH)}function RD(t){const e=kD(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const lH=T.createContext(void 0);function AD(){return T.useContext(lH)}const mb=T.createContext(void 0);function Ma(){const t=T.useContext(mb);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function mh(){return T.useContext(mb)}function hc(t){const e=mh(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}T.createContext(void 0);function _D(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=_D(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function PD(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=_D(t))&&(i&&(i+=" "),i+=e);return i}function uH(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(i){console.error(i)}}}function pb(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const i=t[n];for(const r in i){const a=e[r],c=i[r];typeof a=="function"&&typeof c=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?e[r]=uH(a,c):(r==="className"||r==="UNSAFE_className")&&typeof a=="string"&&typeof c=="string"?e[r]=PD(a,c):e[r]=c!==void 0?c:a}}return e}function dH(t){return t!==void 0}function DD(...t){return pb(...t.filter(dH))}function fH(t,e,n){return T.Children.map(t,i=>T.isValidElement(i)&&T.Children.only(t)?(i.props.className&&(e??(e={}),e.className=PD(i.props.className,e.className),e.style={...i.props.style,...e.style}),T.cloneElement(i,{...e,key:n})):i)}function ui(t,e,n=!0){const[i,r]=T.useState(e);return T.useEffect(()=>{if(n&&r(e),typeof window>"u"||!t)return;const a=t.subscribe(r);return()=>a.unsubscribe()},[t,n]),i}function gb(t){const e=hc(t),n=T.useMemo(()=>Az(e),[e]);return ui(n,e.state)}function ND(t={}){const e=hc(t.room),[n,i]=T.useState(e.localParticipant),[r,a]=T.useState(n.isMicrophoneEnabled),[c,l]=T.useState(n.isCameraEnabled),[d,f]=T.useState(n.isScreenShareEnabled),[m,p]=T.useState(n.lastMicrophoneError),[v,b]=T.useState(n.lastCameraError),[w,S]=T.useState(void 0),[R,E]=T.useState(void 0),N=M=>{l(M.isCameraEnabled),a(M.isMicrophoneEnabled),f(M.isScreenShareEnabled),E(M.cameraTrack),S(M.microphoneTrack),p(M.participant.lastMicrophoneError),b(M.participant.lastCameraError),i(M.participant)};return T.useEffect(()=>{const M=hb(e.localParticipant).subscribe(N);return()=>M.unsubscribe()},[e]),{isMicrophoneEnabled:r,isScreenShareEnabled:d,isCameraEnabled:c,microphoneTrack:w,cameraTrack:R,lastMicrophoneError:m,lastCameraError:v,localParticipant:n}}function hH(){const t=Ma(),e=T.useMemo(()=>Iz(t.localParticipant),[t]);return ui(e,t.localParticipant.permissions)}function mH({kind:t,room:e,track:n,requestPermissions:i,onError:r}){const a=mh(),c=T.useMemo(()=>e??a??new qr,[e,a]),l=T.useMemo(()=>Pz(t,r,i),[t,i,r]),d=ui(l,[]),[f,m]=T.useState(c?.getActiveDevice(t)??"default"),{className:p,activeDeviceObservable:v,setActiveMediaDevice:b}=T.useMemo(()=>jz(t,c),[t,c,n]);return T.useEffect(()=>{const w=v.subscribe(S=>{S&&(dn.info("setCurrentDeviceId",S),m(S))});return()=>{w?.unsubscribe()}},[v]),{devices:d,className:p,activeDeviceId:f,setActiveMediaDevice:b}}function vb(t={}){const e=hc(t.room),[n,i]=T.useState([]);return T.useEffect(()=>{const r=Oz(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(i);return()=>r.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function pH(t={}){const e=hc(t.room),n=T.useMemo(()=>_z(e),[e]),{name:i,metadata:r}=ui(n,{name:e.name,metadata:e.metadata});return{name:i,metadata:r}}function gH({room:t,props:e}){const n=hc(t),{className:i,roomAudioPlaybackAllowedObservable:r,handleStartAudioPlayback:a}=T.useMemo(()=>Gz(),[]),c=T.useMemo(()=>r(n),[n,r]),{canPlayAudio:l}=ui(c,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:T.useMemo(()=>pb(e,{className:i,onClick:()=>{a(n)},style:{display:l?"none":"block"}}),[e,i,l,a,n]),canPlayAudio:l}}function Dg({source:t,onChange:e,initialState:n,captureOptions:i,publishOptions:r,onDeviceError:a,...c}){var l;const d=mh(),f=(l=d?.localParticipant)==null?void 0:l.getTrackPublication(t),m=T.useRef(!1),{toggle:p,className:v,pendingObserver:b,enabledObserver:w}=T.useMemo(()=>d?Uz(t,d,i,r,a):Lz(),[d,t,JSON.stringify(i),r]),S=ui(b,!1),R=ui(w,n??!!(f!=null&&f.isEnabled));T.useEffect(()=>{e?.(R,m.current),m.current=!1},[R,e]),T.useEffect(()=>{n!==void 0&&(dn.debug("forcing initial toggle state",t,n),p(n))},[]);const E=T.useMemo(()=>pb(c,{className:v}),[c,v]),N=T.useCallback(M=>{var I;m.current=!0,p().catch(()=>m.current=!1),(I=c.onClick)==null||I.call(c,M)},[c,p]);return{toggle:p,enabled:R,pending:S,track:f,buttonProps:{...E,"aria-pressed":R,"data-lk-source":t,"data-lk-enabled":R,disabled:S,onClick:N}}}function MD(t=[te.Source.Camera,te.Source.Microphone,te.Source.ScreenShare,te.Source.ScreenShareAudio,te.Source.Unknown],e={}){const n=hc(e.room),[i,r]=T.useState([]),[a,c]=T.useState([]),l=T.useMemo(()=>t.map(d=>bD(d)?d.source:d),[JSON.stringify(t)]);return T.useEffect(()=>{const d=Kz(n,l,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:f,participants:m})=>{dn.debug("setting track bundles",f,m),r(f),c(m)});return()=>d.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),T.useMemo(()=>{if(SD(t)){const d=yH(t,a),f=Array.from(i);return a.forEach(m=>{d.has(m.identity)&&(d.get(m.identity)??[]).forEach(p=>{if(i.find(({participant:b,publication:w})=>m.identity===b.identity&&w.source===p))return;dn.debug(`Add ${p} placeholder for participant ${m.identity}.`);const v={participant:m,source:p};f.push(v)})}),f}else return i},[i,a,t])}function vH(t,e){const n=new Set(t);for(const i of e)n.delete(i);return n}function yH(t,e){const n=new Map;if(SD(t)){const i=t.filter(r=>r.withPlaceholder).map(r=>r.source);e.forEach(r=>{const a=r.getTrackPublications().map(l=>{var d;return(d=l.track)==null?void 0:d.source}).filter(l=>l!==void 0),c=Array.from(vH(new Set(i),new Set(a)));c.length>0&&n.set(r.identity,c)})}return n}function bH(t){const e=Ma(),n=gb(e),i=T.useMemo(()=>n===at.Disconnected,[n]),r=T.useMemo(()=>qz(e),[e,t,i]),a=ui(r.isSendingObservable,!1),c=ui(r.messageObservable,[]);return{send:r.send,chatMessages:c,isSending:a}}function SH(t={}){const[e,n]=T.useState(iH(t.defaults,t.preventLoad??!1)),i=T.useCallback(d=>{n(f=>({...f,audioEnabled:d}))},[]),r=T.useCallback(d=>{n(f=>({...f,videoEnabled:d}))},[]),a=T.useCallback(d=>{n(f=>({...f,audioDeviceId:d}))},[]),c=T.useCallback(d=>{n(f=>({...f,videoDeviceId:d}))},[]),l=T.useCallback(d=>{n(f=>({...f,username:d}))},[]);return T.useEffect(()=>{nH(e,t.preventSave??!1)},[e,t.preventSave]),{userChoices:e,saveAudioInputEnabled:i,saveVideoInputEnabled:r,saveAudioInputDeviceId:a,saveVideoInputDeviceId:c,saveUsername:l}}const TH=t=>{const e=n=>{let i=1-Math.max(-100,Math.min(-10,n))*-1/100;return i=Math.sqrt(i),i};return t.map(n=>n===-1/0?0:e(n))},xH={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};function wH(t,e={}){var n;const i=t instanceof te?t:(n=t?.publication)==null?void 0:n.track,r={...xH,...e},[a,c]=T.useState(new Array(r.bands).fill(0));return T.useEffect(()=>{if(!i||!(i!=null&&i.mediaStream))return;const{analyser:l,cleanup:d}=wB(i,r.analyserOptions),f=l.frequencyBinCount,m=new Float32Array(f),p=setInterval(()=>{l.getFloatFrequencyData(m);let v=new Float32Array(m.length);for(let R=0;R<m.length;R++)v[R]=m[R];v=v.slice(e.loPass,e.hiPass);const b=TH(v),w=Math.ceil(b.length/r.bands),S=[];for(let R=0;R<r.bands;R++){const E=b.slice(R*w,(R+1)*w).reduce((N,M)=>N+=M,0);S.push(E/w)}c(S)},r.updateInterval);return()=>{d(),clearInterval(p)}},[i,i?.mediaStream,JSON.stringify(e)]),a}function FE(t,e){const n=AD(),i=vb({updateOnlyOn:[]}),r=T.useMemo(()=>e?i.find(c=>c.identity===e):n,[e,i,n]),a=T.useMemo(()=>{if(r)return Yz(r,{sources:t})},[r,JSON.stringify(t)]);return ui(a,[])}function CH(t){var e,n,i;const r=T.useMemo(()=>{var a;return(a=t?.publication)!=null&&a.track?Wz(t?.publication.track):void 0},[(e=t?.publication)==null?void 0:e.track]);return ui(r,{timestamp:Date.now(),rtpTimestamp:(i=(n=t?.publication)==null?void 0:n.track)==null?void 0:i.rtpTimestamp})}const EH={bufferSize:100};function kH(t,e){const n={...EH,...e},[i,r]=T.useState([]),a=CH(t),c=l=>{var d;(d=n.onTranscription)==null||d.call(n,l),r(f=>kz(f,l.map(m=>Ez(m,a)),n.bufferSize))};return T.useEffect(()=>{if(!(t!=null&&t.publication))return;const l=$z(t.publication).subscribe(d=>{c(...d)});return()=>{l.unsubscribe()}},[t&&vD(t),c]),{segments:i}}function RH(t={}){const e=AD(),n=t.participant??e,i=T.useMemo(()=>UE(n),[n]);return ui(i,{attributes:n?.attributes})}const VE="lk.agent.state";function yb(){const t=vb(),e=t.find(p=>p.kind===Ca.AGENT&&!("lk.publish_on_behalf"in p.attributes)),n=t.find(p=>p.kind===Ca.AGENT&&p.attributes["lk.publish_on_behalf"]===e?.identity),i=FE([te.Source.Microphone,te.Source.Camera],e?.identity),r=FE([te.Source.Microphone,te.Source.Camera],n?.identity),a=i.find(p=>p.source===te.Source.Microphone)??r.find(p=>p.source===te.Source.Microphone),c=i.find(p=>p.source===te.Source.Camera)??r.find(p=>p.source===te.Source.Camera),{segments:l}=kH(a),d=gb(),{attributes:f}=RH({participant:e}),m=T.useMemo(()=>d===at.Disconnected?"disconnected":d===at.Connecting||!e||!(f!=null&&f[VE])?"connecting":f[VE],[f,e,d]);return{agent:e,state:m,audioTrack:a,videoTrack:c,agentTranscriptions:l,agentAttributes:f}}function AH(t){const e=Ma(),n=gb(e)===at.Disconnected,i=T.useMemo(()=>oH(e,t),[e,t]);return{textStreams:ui(n?void 0:i,[])}}function _H(t){const{participantIdentities:e,trackSids:n}={},{textStreams:i}=AH(wD.TRANSCRIPTION);return T.useMemo(()=>i.filter(r=>e?e.includes(r.participantInfo.identity):!0).filter(r=>{var a;return n?n.includes(((a=r.streamInfo.attributes)==null?void 0:a["lk.transcribed_track_id"])??""):!0}),[i,e,n])}const PH=T.forwardRef(function({label:t="Allow Audio",...e},n){const i=Ma(),{mergedProps:r}=gH({room:i,props:e});return T.createElement("button",{ref:n,...r},t)});function OD(t,e={}){const[n,i]=T.useState(T0(t)),[r,a]=T.useState(n?.isMuted),[c,l]=T.useState(n?.isSubscribed),[d,f]=T.useState(n?.track),[m,p]=T.useState("landscape"),v=T.useRef(),{className:b,trackObserver:w}=T.useMemo(()=>Rz(t),[t.participant.sid??t.participant.identity,t.source,db(t)&&t.publication.trackSid]);return T.useEffect(()=>{const S=w.subscribe(R=>{dn.debug("update track",R),i(R),a(R?.isMuted),l(R?.isSubscribed),f(R?.track)});return()=>S?.unsubscribe()},[w]),T.useEffect(()=>{var S,R;return d&&(v.current&&d.detach(v.current),(S=e.element)!=null&&S.current&&!(t.participant.isLocal&&d?.kind==="audio")&&d.attach(e.element.current)),v.current=(R=e.element)==null?void 0:R.current,()=>{v.current&&d?.detach(v.current)}},[d,e.element]),T.useEffect(()=>{var S,R;if(typeof((S=n?.dimensions)==null?void 0:S.width)=="number"&&typeof((R=n?.dimensions)==null?void 0:R.height)=="number"){const E=n.dimensions.width>n.dimensions.height?"landscape":"portrait";p(E)}},[n]),{publication:n,isMuted:r,isSubscribed:c,track:d,elementProps:DD(e.props,{className:b,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":m}})}}var Ng,zE;function DH(){if(zE)return Ng;zE=1;var t="Expected a function",e=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,d=typeof Hd=="object"&&Hd&&Hd.Object===Object&&Hd,f=typeof self=="object"&&self&&self.Object===Object&&self,m=d||f||Function("return this")(),p=Object.prototype,v=p.toString,b=Math.max,w=Math.min,S=function(){return m.Date.now()};function R(A,L,z){var H,W,re,se,fe,Ee,Ae=0,Pe=!1,K=!1,ie=!0;if(typeof A!="function")throw new TypeError(t);L=I(L)||0,E(z)&&(Pe=!!z.leading,K="maxWait"in z,re=K?b(I(z.maxWait)||0,L):re,ie="trailing"in z?!!z.trailing:ie);function J(be){var Ce=H,Ve=W;return H=W=void 0,Ae=be,se=A.apply(Ve,Ce),se}function _e(be){return Ae=be,fe=setTimeout(de,L),Pe?J(be):se}function F(be){var Ce=be-Ee,Ve=be-Ae,qe=L-Ce;return K?w(qe,re-Ve):qe}function Z(be){var Ce=be-Ee,Ve=be-Ae;return Ee===void 0||Ce>=L||Ce<0||K&&Ve>=re}function de(){var be=S();if(Z(be))return le(be);fe=setTimeout(de,F(be))}function le(be){return fe=void 0,ie&&H?J(be):(H=W=void 0,se)}function Te(){fe!==void 0&&clearTimeout(fe),Ae=0,H=Ee=W=fe=void 0}function Me(){return fe===void 0?se:le(S())}function De(){var be=S(),Ce=Z(be);if(H=arguments,W=this,Ee=be,Ce){if(fe===void 0)return _e(Ee);if(K)return fe=setTimeout(de,L),J(Ee)}return fe===void 0&&(fe=setTimeout(de,L)),se}return De.cancel=Te,De.flush=Me,De}function E(A){var L=typeof A;return!!A&&(L=="object"||L=="function")}function N(A){return!!A&&typeof A=="object"}function M(A){return typeof A=="symbol"||N(A)&&v.call(A)==n}function I(A){if(typeof A=="number")return A;if(M(A))return e;if(E(A)){var L=typeof A.valueOf=="function"?A.valueOf():A;A=E(L)?L+"":L}if(typeof A!="string")return A===0?A:+A;A=A.replace(i,"");var z=a.test(A);return z||c.test(A)?l(A.slice(2),z?2:8):r.test(A)?e:+A}return Ng=R,Ng}var NH=DH();const HE=WP(NH);function MH(t){const e=T.useRef(t);e.current=t,T.useEffect(()=>()=>{e.current()},[])}function OH(t,e=500,n){const i=T.useRef();MH(()=>{i.current&&i.current.cancel()});const r=T.useMemo(()=>{const a=HE(t,e,n),c=(...l)=>a(...l);return c.cancel=()=>{a.cancel()},c.isPending=()=>!!i.current,c.flush=()=>a.flush(),c},[t,e,n]);return T.useEffect(()=>{i.current=HE(t,e,n)},[t,e,n]),r}function IH(t,e,n){const i=(f,m)=>f===m,r=t instanceof Function?t():t,[a,c]=T.useState(r),l=T.useRef(r),d=OH(c,e,n);return i(l.current,r)||(d(r),l.current=r),[a,d]}function UH({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:i=!1,initialIsIntersecting:r=!1,onChange:a}={}){var c;const[l,d]=T.useState(null),[f,m]=T.useState(()=>({isIntersecting:r,entry:void 0})),p=T.useRef();p.current=a;const v=((c=f.entry)==null?void 0:c.isIntersecting)&&i;T.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||v)return;const S=new IntersectionObserver(R=>{const E=Array.isArray(S.thresholds)?S.thresholds:[S.thresholds];R.forEach(N=>{const M=N.isIntersecting&&E.some(I=>N.intersectionRatio>=I);m({isIntersecting:M,entry:N}),p.current&&p.current(M,N)})},{threshold:t,root:e,rootMargin:n});return S.observe(l),()=>{S.disconnect()}},[l,JSON.stringify(t),e,n,v,i]);const b=T.useRef(null);T.useEffect(()=>{var S;!l&&(S=f.entry)!=null&&S.target&&!i&&!v&&b.current!==f.entry.target&&(b.current=f.entry.target,m({isIntersecting:r,entry:void 0}))},[l,f.entry,i,v,r]);const w=[d,!!f.isIntersecting,f.entry];return w.ref=w[0],w.isIntersecting=w[1],w.entry=w[2],w}const ID=T.forwardRef(function({onTrackClick:t,onClick:e,onSubscriptionStatusChanged:n,trackRef:i,manageSubscription:r,...a},c){const l=RD(i),d=T.useRef(null);T.useImperativeHandle(c,()=>d.current);const f=UH({root:d.current}),[m]=IH(f,3e3);T.useEffect(()=>{r&&l.publication instanceof Lf&&m?.isIntersecting===!1&&f?.isIntersecting===!1&&l.publication.setSubscribed(!1)},[m,l,r]),T.useEffect(()=>{r&&l.publication instanceof Lf&&f?.isIntersecting===!0&&l.publication.setSubscribed(!0)},[f,l,r]);const{elementProps:p,publication:v,isSubscribed:b}=OD(l,{element:d,props:a});T.useEffect(()=>{n?.(!!b)},[b,n]);const w=S=>{e?.(S),t?.({participant:l?.participant,track:v})};return T.createElement("video",{ref:d,...p,muted:!0,onClick:w})}),LH=T.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...i},r){const a=RD(t),c=T.useRef(null);T.useImperativeHandle(r,()=>c.current);const{elementProps:l,isSubscribed:d,track:f,publication:m}=OD(a,{element:c,props:i});return T.useEffect(()=>{e?.(!!d)},[d,e]),T.useEffect(()=>{f===void 0||n===void 0||(f instanceof m_?f.setVolume(n):dn.warn("Volume can only be set on remote audio tracks."))},[n,f]),T.useEffect(()=>{m===void 0||i.muted===void 0||(m instanceof Lf?m.setEnabled(!i.muted):dn.warn("Can only call setEnabled on remote track publications."))},[i.muted,m,f]),T.createElement("audio",{ref:c,...l})});function jH({volume:t,muted:e}){const n=MD([te.Source.Microphone,te.Source.ScreenShareAudio,te.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(i=>!i.participant.isLocal&&i.publication.kind===te.Kind.Audio);return T.createElement("div",{style:{display:"none"}},n.map(i=>T.createElement(LH,{key:vD(i),trackRef:i,volume:t,muted:e})))}const BH=t=>{const e=[];for(let n=0;n<t;n++)e.push([n,t-1-n]);return e},qE=t=>[[Math.floor(t/2)],[-1]],FH=(t,e,n)=>{const[i,r]=T.useState(0),[a,c]=T.useState([[]]);T.useEffect(()=>{if(t==="thinking")c(qE(e));else if(t==="connecting"||t==="initializing"){const d=[...BH(e)];c(d)}else c(t==="listening"?qE(e):t===void 0||t==="speaking"?[new Array(e).fill(0).map((d,f)=>f)]:[[]]);r(0)},[t,e]);const l=T.useRef(null);return T.useEffect(()=>{let d=performance.now();const f=m=>{m-d>=n&&(r(p=>p+1),d=m),l.current=requestAnimationFrame(f)};return l.current=requestAnimationFrame(f),()=>{l.current!==null&&cancelAnimationFrame(l.current)}},[n,e,t,a.length]),a[i%a.length]},VH=new Map([["connecting",2e3],["initializing",2e3],["listening",500],["thinking",150]]),zH=(t,e)=>{if(t===void 0)return 1e3;let n=VH.get(t);if(n)switch(t){case"connecting":n/=e;break}return n},UD=T.forwardRef(function({state:t,options:e,barCount:n=15,trackRef:i,children:r,...a},c){const l=DD(a,{className:"lk-audio-bar-visualizer"});let d=kD();i&&(d=i);const f=wH(d,{bands:n,loPass:100,hiPass:200}),m=e?.minHeight??20,p=e?.maxHeight??100,v=FH(t,n,zH(t,n)??100);return T.createElement("div",{ref:c,...l,"data-lk-va-state":t},f.map((b,w)=>r?fH(r,{"data-lk-highlighted":v.includes(w),"data-lk-bar-index":w,className:"lk-audio-bar",style:{height:`${Math.min(p,Math.max(m,b*100+5))}%`}}):T.createElement("span",{key:w,"data-lk-highlighted":v.includes(w),"data-lk-bar-index":w,className:`lk-audio-bar ${v.includes(w)&&"lk-highlighted"}`,style:{height:`${Math.min(p,Math.max(m,b*100+5))}%`}})))});function HH(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const qH=t=>{switch(t){case"success":return YH;case"info":return WH;case"warning":return $H;case"error":return XH;default:return null}},GH=Array(12).fill(0),KH=({visible:t,className:e})=>Re.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Re.createElement("div",{className:"sonner-spinner"},GH.map((n,i)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),YH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$H=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),WH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),XH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ZH=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),JH=()=>{const[t,e]=Re.useState(document.hidden);return Re.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let x0=1;class QH{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:i,...r}=e,a=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:x0++,c=this.toasts.find(d=>d.id===a),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),c?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...e,id:a,title:i}),{...d,...e,id:a,dismissible:l,title:i}):d):this.addToast({title:i,...r,dismissible:l,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let a=i!==void 0,c;const l=r.then(async f=>{if(c=["resolve",f],Re.isValidElement(f))a=!1,this.create({id:i,type:"default",message:f});else if(tq(f)&&!f.ok){a=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,w=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:v,...w})}else if(f instanceof Error){a=!1;const p=typeof n.error=="function"?await n.error(f):n.error,v=typeof n.description=="function"?await n.description(f):n.description,w=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:v,...w})}else if(n.success!==void 0){a=!1;const p=typeof n.success=="function"?await n.success(f):n.success,v=typeof n.description=="function"?await n.description(f):n.description,w=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"success",description:v,...w})}}).catch(async f=>{if(c=["reject",f],n.error!==void 0){a=!1;const m=typeof n.error=="function"?await n.error(f):n.error,p=typeof n.description=="function"?await n.description(f):n.description,b=typeof m=="object"&&!Re.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:p,...b})}}).finally(()=>{a&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,m)=>l.then(()=>c[0]==="reject"?m(c[1]):f(c[1])).catch(m));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(e,n)=>{const i=n?.id||x0++;return this.create({jsx:e(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Gn=new QH,eq=(t,e)=>{const n=e?.id||x0++;return Gn.addToast({title:t,...e,id:n}),n},tq=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",nq=eq,iq=()=>Gn.toasts,rq=()=>Gn.getActiveToasts(),sq=Object.assign(nq,{success:Gn.success,info:Gn.info,warning:Gn.warning,error:Gn.error,custom:Gn.custom,message:Gn.message,promise:Gn.promise,dismiss:Gn.dismiss,loading:Gn.loading},{getHistory:iq,getToasts:rq});HH("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Kd(t){return t.label!==void 0}const aq=3,oq="24px",cq="16px",GE=4e3,lq=356,uq=14,dq=45,fq=200;function Zi(...t){return t.filter(Boolean).join(" ")}function hq(t){const[e,n]=t.split("-"),i=[];return e&&i.push(e),n&&i.push(n),i}const mq=t=>{var e,n,i,r,a,c,l,d,f;const{invert:m,toast:p,unstyled:v,interacting:b,setHeights:w,visibleToasts:S,heights:R,index:E,toasts:N,expanded:M,removeToast:I,defaultRichColors:A,closeButton:L,style:z,cancelButtonStyle:H,actionButtonStyle:W,className:re="",descriptionClassName:se="",duration:fe,position:Ee,gap:Ae,expandByDefault:Pe,classNames:K,icons:ie,closeButtonAriaLabel:J="Close toast"}=t,[_e,F]=Re.useState(null),[Z,de]=Re.useState(null),[le,Te]=Re.useState(!1),[Me,De]=Re.useState(!1),[be,Ce]=Re.useState(!1),[Ve,qe]=Re.useState(!1),[Xe,Ye]=Re.useState(!1),[kt,jt]=Re.useState(0),[di,In]=Re.useState(0),_t=Re.useRef(p.duration||fe||GE),B=Re.useRef(null),_=Re.useRef(null),P=E===0,V=E+1<=S,X=p.type,pe=p.dismissible!==!1,we=p.className||"",Ge=p.descriptionClassName||"",Je=Re.useMemo(()=>R.findIndex(We=>We.toastId===p.id)||0,[R,p.id]),O=Re.useMemo(()=>{var We;return(We=p.closeButton)!=null?We:L},[p.closeButton,L]),C=Re.useMemo(()=>p.duration||fe||GE,[p.duration,fe]),k=Re.useRef(0),j=Re.useRef(0),$=Re.useRef(0),ae=Re.useRef(null),[ge,$e]=Ee.split("-"),ut=Re.useMemo(()=>R.reduce((We,$t,rn)=>rn>=Je?We:We+$t.height,0),[R,Je]),ht=JH(),vt=p.invert||m,dt=X==="loading";j.current=Re.useMemo(()=>Je*Ae+ut,[Je,ut]),Re.useEffect(()=>{_t.current=C},[C]),Re.useEffect(()=>{Te(!0)},[]),Re.useEffect(()=>{const We=_.current;if(We){const $t=We.getBoundingClientRect().height;return In($t),w(rn=>[{toastId:p.id,height:$t,position:p.position},...rn]),()=>w(rn=>rn.filter(Cn=>Cn.toastId!==p.id))}},[w,p.id]),Re.useLayoutEffect(()=>{if(!le)return;const We=_.current,$t=We.style.height;We.style.height="auto";const rn=We.getBoundingClientRect().height;We.style.height=$t,In(rn),w(Cn=>Cn.find(fn=>fn.toastId===p.id)?Cn.map(fn=>fn.toastId===p.id?{...fn,height:rn}:fn):[{toastId:p.id,height:rn,position:p.position},...Cn])},[le,p.title,p.description,w,p.id,p.jsx,p.action,p.cancel]);const Ai=Re.useCallback(()=>{De(!0),jt(j.current),w(We=>We.filter($t=>$t.toastId!==p.id)),setTimeout(()=>{I(p)},fq)},[p,I,w,j]);Re.useEffect(()=>{if(p.promise&&X==="loading"||p.duration===1/0||p.type==="loading")return;let We;return M||b||ht?(()=>{if($.current<k.current){const Cn=new Date().getTime()-k.current;_t.current=_t.current-Cn}$.current=new Date().getTime()})():(()=>{_t.current!==1/0&&(k.current=new Date().getTime(),We=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Ai()},_t.current))})(),()=>clearTimeout(We)},[M,b,p,X,ht,Ai]),Re.useEffect(()=>{p.delete&&(Ai(),p.onDismiss==null||p.onDismiss.call(p,p))},[Ai,p.delete]);function xu(){var We;if(ie?.loading){var $t;return Re.createElement("div",{className:Zi(K?.loader,p==null||($t=p.classNames)==null?void 0:$t.loader,"sonner-loader"),"data-visible":X==="loading"},ie.loading)}return Re.createElement(KH,{className:Zi(K?.loader,p==null||(We=p.classNames)==null?void 0:We.loader),visible:X==="loading"})}const bc=p.icon||ie?.[X]||qH(X);var Jr,wu;return Re.createElement("li",{tabIndex:0,ref:_,className:Zi(re,we,K?.toast,p==null||(e=p.classNames)==null?void 0:e.toast,K?.default,K?.[X],p==null||(n=p.classNames)==null?void 0:n[X]),"data-sonner-toast":"","data-rich-colors":(Jr=p.richColors)!=null?Jr:A,"data-styled":!(p.jsx||p.unstyled||v),"data-mounted":le,"data-promise":!!p.promise,"data-swiped":Xe,"data-removed":Me,"data-visible":V,"data-y-position":ge,"data-x-position":$e,"data-index":E,"data-front":P,"data-swiping":be,"data-dismissible":pe,"data-type":X,"data-invert":vt,"data-swipe-out":Ve,"data-swipe-direction":Z,"data-expanded":!!(M||Pe&&le),"data-testid":p.testId,style:{"--index":E,"--toasts-before":E,"--z-index":N.length-E,"--offset":`${Me?kt:j.current}px`,"--initial-height":Pe?"auto":`${di}px`,...z,...p.style},onDragEnd:()=>{Ce(!1),F(null),ae.current=null},onPointerDown:We=>{We.button!==2&&(dt||!pe||(B.current=new Date,jt(j.current),We.target.setPointerCapture(We.pointerId),We.target.tagName!=="BUTTON"&&(Ce(!0),ae.current={x:We.clientX,y:We.clientY})))},onPointerUp:()=>{var We,$t,rn;if(Ve||!pe)return;ae.current=null;const Cn=Number(((We=_.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ys=Number((($t=_.current)==null?void 0:$t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),fn=new Date().getTime()-((rn=B.current)==null?void 0:rn.getTime()),Wt=_e==="x"?Cn:Ys,Xt=Math.abs(Wt)/fn;if(Math.abs(Wt)>=dq||Xt>.11){jt(j.current),p.onDismiss==null||p.onDismiss.call(p,p),de(_e==="x"?Cn>0?"right":"left":Ys>0?"down":"up"),Ai(),qe(!0);return}else{var Pt,vn;(Pt=_.current)==null||Pt.style.setProperty("--swipe-amount-x","0px"),(vn=_.current)==null||vn.style.setProperty("--swipe-amount-y","0px")}Ye(!1),Ce(!1),F(null)},onPointerMove:We=>{var $t,rn,Cn;if(!ae.current||!pe||(($t=window.getSelection())==null?void 0:$t.toString().length)>0)return;const fn=We.clientY-ae.current.y,Wt=We.clientX-ae.current.x;var Xt;const Pt=(Xt=t.swipeDirections)!=null?Xt:hq(Ee);!_e&&(Math.abs(Wt)>1||Math.abs(fn)>1)&&F(Math.abs(Wt)>Math.abs(fn)?"x":"y");let vn={x:0,y:0};const Oa=vr=>1/(1.5+Math.abs(vr)/20);if(_e==="y"){if(Pt.includes("top")||Pt.includes("bottom"))if(Pt.includes("top")&&fn<0||Pt.includes("bottom")&&fn>0)vn.y=fn;else{const vr=fn*Oa(fn);vn.y=Math.abs(vr)<Math.abs(fn)?vr:fn}}else if(_e==="x"&&(Pt.includes("left")||Pt.includes("right")))if(Pt.includes("left")&&Wt<0||Pt.includes("right")&&Wt>0)vn.x=Wt;else{const vr=Wt*Oa(Wt);vn.x=Math.abs(vr)<Math.abs(Wt)?vr:Wt}(Math.abs(vn.x)>0||Math.abs(vn.y)>0)&&Ye(!0),(rn=_.current)==null||rn.style.setProperty("--swipe-amount-x",`${vn.x}px`),(Cn=_.current)==null||Cn.style.setProperty("--swipe-amount-y",`${vn.y}px`)}},O&&!p.jsx&&X!=="loading"?Re.createElement("button",{"aria-label":J,"data-disabled":dt,"data-close-button":!0,onClick:dt||!pe?()=>{}:()=>{Ai(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Zi(K?.closeButton,p==null||(i=p.classNames)==null?void 0:i.closeButton)},(wu=ie?.close)!=null?wu:ZH):null,(X||p.icon||p.promise)&&p.icon!==null&&(ie?.[X]!==null||p.icon)?Re.createElement("div",{"data-icon":"",className:Zi(K?.icon,p==null||(r=p.classNames)==null?void 0:r.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||xu():null,p.type!=="loading"?bc:null):null,Re.createElement("div",{"data-content":"",className:Zi(K?.content,p==null||(a=p.classNames)==null?void 0:a.content)},Re.createElement("div",{"data-title":"",className:Zi(K?.title,p==null||(c=p.classNames)==null?void 0:c.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?Re.createElement("div",{"data-description":"",className:Zi(se,Ge,K?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),Re.isValidElement(p.cancel)?p.cancel:p.cancel&&Kd(p.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||H,onClick:We=>{Kd(p.cancel)&&pe&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,We),Ai())},className:Zi(K?.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,Re.isValidElement(p.action)?p.action:p.action&&Kd(p.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||W,onClick:We=>{Kd(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,We),!We.defaultPrevented&&Ai())},className:Zi(K?.actionButton,p==null||(f=p.classNames)==null?void 0:f.actionButton)},p.action.label):null)};function KE(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function pq(t,e){const n={};return[t,e].forEach((i,r)=>{const a=r===1,c=a?"--mobile-offset":"--offset",l=a?cq:oq;function d(f){["top","right","bottom","left"].forEach(m=>{n[`${c}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(f=>{i[f]===void 0?n[`${c}-${f}`]=l:n[`${c}-${f}`]=typeof i[f]=="number"?`${i[f]}px`:i[f]}):d(l)}),n}const gq=Re.forwardRef(function(e,n){const{id:i,invert:r,position:a="bottom-right",hotkey:c=["altKey","KeyT"],expand:l,closeButton:d,className:f,offset:m,mobileOffset:p,theme:v="light",richColors:b,duration:w,style:S,visibleToasts:R=aq,toastOptions:E,dir:N=KE(),gap:M=uq,icons:I,containerAriaLabel:A="Notifications"}=e,[L,z]=Re.useState([]),H=Re.useMemo(()=>i?L.filter(le=>le.toasterId===i):L.filter(le=>!le.toasterId),[L,i]),W=Re.useMemo(()=>Array.from(new Set([a].concat(H.filter(le=>le.position).map(le=>le.position)))),[H,a]),[re,se]=Re.useState([]),[fe,Ee]=Re.useState(!1),[Ae,Pe]=Re.useState(!1),[K,ie]=Re.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=Re.useRef(null),_e=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Re.useRef(null),Z=Re.useRef(!1),de=Re.useCallback(le=>{z(Te=>{var Me;return(Me=Te.find(De=>De.id===le.id))!=null&&Me.delete||Gn.dismiss(le.id),Te.filter(({id:De})=>De!==le.id)})},[]);return Re.useEffect(()=>Gn.subscribe(le=>{if(le.dismiss){requestAnimationFrame(()=>{z(Te=>Te.map(Me=>Me.id===le.id?{...Me,delete:!0}:Me))});return}setTimeout(()=>{eR.flushSync(()=>{z(Te=>{const Me=Te.findIndex(De=>De.id===le.id);return Me!==-1?[...Te.slice(0,Me),{...Te[Me],...le},...Te.slice(Me+1)]:[le,...Te]})})})}),[L]),Re.useEffect(()=>{if(v!=="system"){ie(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;const le=window.matchMedia("(prefers-color-scheme: dark)");try{le.addEventListener("change",({matches:Te})=>{ie(Te?"dark":"light")})}catch{le.addListener(({matches:Me})=>{try{ie(Me?"dark":"light")}catch(De){console.error(De)}})}},[v]),Re.useEffect(()=>{L.length<=1&&Ee(!1)},[L]),Re.useEffect(()=>{const le=Te=>{var Me;if(c.every(Ce=>Te[Ce]||Te.code===Ce)){var be;Ee(!0),(be=J.current)==null||be.focus()}Te.code==="Escape"&&(document.activeElement===J.current||(Me=J.current)!=null&&Me.contains(document.activeElement))&&Ee(!1)};return document.addEventListener("keydown",le),()=>document.removeEventListener("keydown",le)},[c]),Re.useEffect(()=>{if(J.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,Z.current=!1)}},[J.current]),Re.createElement("section",{ref:n,"aria-label":`${A} ${_e}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},W.map((le,Te)=>{var Me;const[De,be]=le.split("-");return H.length?Re.createElement("ol",{key:le,dir:N==="auto"?KE():N,tabIndex:-1,ref:J,className:f,"data-sonner-toaster":!0,"data-sonner-theme":K,"data-y-position":De,"data-x-position":be,style:{"--front-toast-height":`${((Me=re[0])==null?void 0:Me.height)||0}px`,"--width":`${lq}px`,"--gap":`${M}px`,...S,...pq(m,p)},onBlur:Ce=>{Z.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(Z.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Z.current||(Z.current=!0,F.current=Ce.relatedTarget)},onMouseEnter:()=>Ee(!0),onMouseMove:()=>Ee(!0),onMouseLeave:()=>{Ae||Ee(!1)},onDragEnd:()=>Ee(!1),onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Pe(!0)},onPointerUp:()=>Pe(!1)},H.filter(Ce=>!Ce.position&&Te===0||Ce.position===le).map((Ce,Ve)=>{var qe,Xe;return Re.createElement(mq,{key:Ce.id,icons:I,index:Ve,toast:Ce,defaultRichColors:b,duration:(qe=E?.duration)!=null?qe:w,className:E?.className,descriptionClassName:E?.descriptionClassName,invert:r,visibleToasts:R,closeButton:(Xe=E?.closeButton)!=null?Xe:d,interacting:Ae,position:le,style:E?.style,unstyled:E?.unstyled,classNames:E?.classNames,cancelButtonStyle:E?.cancelButtonStyle,actionButtonStyle:E?.actionButtonStyle,closeButtonAriaLabel:E?.closeButtonAriaLabel,removeToast:de,toasts:H.filter(Ye=>Ye.position==Ce.position),heights:re.filter(Ye=>Ye.position==Ce.position),setHeights:se,expandByDefault:l,gap:M,expanded:fe,swipeDirections:e.swipeDirections})})):null}))});function w0({title:t,description:e}){sq.error(t,{description:e})}function YE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function LD(...t){return e=>{let n=!1;const i=t.map(r=>{const a=YE(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():YE(t[r],null)}}}}function Pn(...t){return T.useCallback(LD(...t),t)}function cu(t){const e=yq(t),n=T.forwardRef((i,r)=>{const{children:a,...c}=i,l=T.Children.toArray(a),d=l.find(Sq);if(d){const f=d.props.children,m=l.map(p=>p===d?T.Children.count(f)>1?T.Children.only(null):T.isValidElement(f)?f.props.children:null:p);return x.jsx(e,{...c,ref:r,children:T.isValidElement(f)?T.cloneElement(f,void 0,m):null})}return x.jsx(e,{...c,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}var vq=cu("Slot");function yq(t){const e=T.forwardRef((n,i)=>{const{children:r,...a}=n;if(T.isValidElement(r)){const c=xq(r),l=Tq(a,r.props);return r.type!==T.Fragment&&(l.ref=i?LD(i,c):c),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bq=Symbol("radix.slottable");function Sq(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bq}function Tq(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...l)=>{const d=a(...l);return r(...l),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function xq(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function jD(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=jD(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function BD(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=jD(t))&&(i&&(i+=" "),i+=e);return i}const bb="-",wq=t=>{const e=Eq(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:c=>{const l=c.split(bb);return l[0]===""&&l.length!==1&&l.shift(),FD(l,e)||Cq(c)},getConflictingClassGroupIds:(c,l)=>{const d=n[c]||[];return l&&i[c]?[...d,...i[c]]:d}}},FD=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),r=i?FD(t.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const a=t.join(bb);return e.validators.find(({validator:c})=>c(a))?.classGroupId},$E=/^\[(.+)\]$/,Cq=t=>{if($E.test(t)){const e=$E.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Eq=t=>{const{theme:e,classGroups:n}=t,i={nextPart:new Map,validators:[]};for(const r in n)C0(n[r],i,r,e);return i},C0=(t,e,n,i)=>{t.forEach(r=>{if(typeof r=="string"){const a=r===""?e:WE(e,r);a.classGroupId=n;return}if(typeof r=="function"){if(kq(r)){C0(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([a,c])=>{C0(c,WE(e,a),n,i)})})},WE=(t,e)=>{let n=t;return e.split(bb).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},kq=t=>t.isThemeGetter,Rq=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const r=(a,c)=>{n.set(a,c),e++,e>t&&(e=0,i=n,n=new Map)};return{get(a){let c=n.get(a);if(c!==void 0)return c;if((c=i.get(a))!==void 0)return r(a,c),c},set(a,c){n.has(a)?n.set(a,c):r(a,c)}}},E0="!",k0=":",Aq=k0.length,_q=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=r=>{const a=[];let c=0,l=0,d=0,f;for(let w=0;w<r.length;w++){let S=r[w];if(c===0&&l===0){if(S===k0){a.push(r.slice(d,w)),d=w+Aq;continue}if(S==="/"){f=w;continue}}S==="["?c++:S==="]"?c--:S==="("?l++:S===")"&&l--}const m=a.length===0?r:r.substring(d),p=Pq(m),v=p!==m,b=f&&f>d?f-d:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:b}};if(e){const r=e+k0,a=i;i=c=>c.startsWith(r)?a(c.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const r=i;i=a=>n({className:a,parseClassName:r})}return i},Pq=t=>t.endsWith(E0)?t.substring(0,t.length-1):t.startsWith(E0)?t.substring(1):t,Dq=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const r=[];let a=[];return i.forEach(c=>{c[0]==="["||e[c]?(r.push(...a.sort(),c),a=[]):a.push(c)}),r.push(...a.sort()),r}},Nq=t=>({cache:Rq(t.cacheSize),parseClassName:_q(t),sortModifiers:Dq(t),...wq(t)}),Mq=/\s+/,Oq=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:a}=e,c=[],l=t.trim().split(Mq);let d="";for(let f=l.length-1;f>=0;f-=1){const m=l[f],{isExternal:p,modifiers:v,hasImportantModifier:b,baseClassName:w,maybePostfixModifierPosition:S}=n(m);if(p){d=m+(d.length>0?" "+d:d);continue}let R=!!S,E=i(R?w.substring(0,S):w);if(!E){if(!R){d=m+(d.length>0?" "+d:d);continue}if(E=i(w),!E){d=m+(d.length>0?" "+d:d);continue}R=!1}const N=a(v).join(":"),M=b?N+E0:N,I=M+E;if(c.includes(I))continue;c.push(I);const A=r(E,R);for(let L=0;L<A.length;++L){const z=A[L];c.push(M+z)}d=m+(d.length>0?" "+d:d)}return d};function Iq(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=VD(e))&&(i&&(i+=" "),i+=n);return i}const VD=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=VD(t[i]))&&(n&&(n+=" "),n+=e);return n};function Uq(t,...e){let n,i,r,a=c;function c(d){const f=e.reduce((m,p)=>p(m),t());return n=Nq(f),i=n.cache.get,r=n.cache.set,a=l,l(d)}function l(d){const f=i(d);if(f)return f;const m=Oq(d,n);return r(d,m),m}return function(){return a(Iq.apply(null,arguments))}}const pn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},zD=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,HD=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Lq=/^\d+\/\d+$/,jq=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Bq=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Fq=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Vq=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,zq=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ko=t=>Lq.test(t),et=t=>!!t&&!Number.isNaN(Number(t)),ws=t=>!!t&&Number.isInteger(Number(t)),Mg=t=>t.endsWith("%")&&et(t.slice(0,-1)),Mr=t=>jq.test(t),Hq=()=>!0,qq=t=>Bq.test(t)&&!Fq.test(t),qD=()=>!1,Gq=t=>Vq.test(t),Kq=t=>zq.test(t),Yq=t=>!Ue(t)&&!Le(t),$q=t=>mc(t,YD,qD),Ue=t=>zD.test(t),ha=t=>mc(t,$D,qq),Og=t=>mc(t,Qq,et),XE=t=>mc(t,GD,qD),Wq=t=>mc(t,KD,Kq),Yd=t=>mc(t,WD,Gq),Le=t=>HD.test(t),Nl=t=>pc(t,$D),Xq=t=>pc(t,eG),ZE=t=>pc(t,GD),Zq=t=>pc(t,YD),Jq=t=>pc(t,KD),$d=t=>pc(t,WD,!0),mc=(t,e,n)=>{const i=zD.exec(t);return i?i[1]?e(i[1]):n(i[2]):!1},pc=(t,e,n=!1)=>{const i=HD.exec(t);return i?i[1]?e(i[1]):n:!1},GD=t=>t==="position"||t==="percentage",KD=t=>t==="image"||t==="url",YD=t=>t==="length"||t==="size"||t==="bg-size",$D=t=>t==="length",Qq=t=>t==="number",eG=t=>t==="family-name",WD=t=>t==="shadow",tG=()=>{const t=pn("color"),e=pn("font"),n=pn("text"),i=pn("font-weight"),r=pn("tracking"),a=pn("leading"),c=pn("breakpoint"),l=pn("container"),d=pn("spacing"),f=pn("radius"),m=pn("shadow"),p=pn("inset-shadow"),v=pn("text-shadow"),b=pn("drop-shadow"),w=pn("blur"),S=pn("perspective"),R=pn("aspect"),E=pn("ease"),N=pn("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...I(),Le,Ue],L=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto","contain","none"],H=()=>[Le,Ue,d],W=()=>[ko,"full","auto",...H()],re=()=>[ws,"none","subgrid",Le,Ue],se=()=>["auto",{span:["full",ws,Le,Ue]},ws,Le,Ue],fe=()=>[ws,"auto",Le,Ue],Ee=()=>["auto","min","max","fr",Le,Ue],Ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Pe=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...H()],ie=()=>[ko,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...H()],J=()=>[t,Le,Ue],_e=()=>[...I(),ZE,XE,{position:[Le,Ue]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",Zq,$q,{size:[Le,Ue]}],de=()=>[Mg,Nl,ha],le=()=>["","none","full",f,Le,Ue],Te=()=>["",et,Nl,ha],Me=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[et,Mg,ZE,XE],Ce=()=>["","none",w,Le,Ue],Ve=()=>["none",et,Le,Ue],qe=()=>["none",et,Le,Ue],Xe=()=>[et,Le,Ue],Ye=()=>[ko,"full",...H()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Mr],breakpoint:[Mr],color:[Hq],container:[Mr],"drop-shadow":[Mr],ease:["in","out","in-out"],font:[Yq],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Mr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Mr],shadow:[Mr],spacing:["px",et],text:[Mr],"text-shadow":[Mr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ko,Ue,Le,R]}],container:["container"],columns:[{columns:[et,Ue,Le,l]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:W()}],"inset-x":[{"inset-x":W()}],"inset-y":[{"inset-y":W()}],start:[{start:W()}],end:[{end:W()}],top:[{top:W()}],right:[{right:W()}],bottom:[{bottom:W()}],left:[{left:W()}],visibility:["visible","invisible","collapse"],z:[{z:[ws,"auto",Le,Ue]}],basis:[{basis:[ko,"full","auto",l,...H()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,ko,"auto","initial","none",Ue]}],grow:[{grow:["",et,Le,Ue]}],shrink:[{shrink:["",et,Le,Ue]}],order:[{order:[ws,"first","last","none",Le,Ue]}],"grid-cols":[{"grid-cols":re()}],"col-start-end":[{col:se()}],"col-start":[{"col-start":fe()}],"col-end":[{"col-end":fe()}],"grid-rows":[{"grid-rows":re()}],"row-start-end":[{row:se()}],"row-start":[{"row-start":fe()}],"row-end":[{"row-end":fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ee()}],"auto-rows":[{"auto-rows":Ee()}],gap:[{gap:H()}],"gap-x":[{"gap-x":H()}],"gap-y":[{"gap-y":H()}],"justify-content":[{justify:[...Ae(),"normal"]}],"justify-items":[{"justify-items":[...Pe(),"normal"]}],"justify-self":[{"justify-self":["auto",...Pe()]}],"align-content":[{content:["normal",...Ae()]}],"align-items":[{items:[...Pe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Pe(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ae()}],"place-items":[{"place-items":[...Pe(),"baseline"]}],"place-self":[{"place-self":["auto",...Pe()]}],p:[{p:H()}],px:[{px:H()}],py:[{py:H()}],ps:[{ps:H()}],pe:[{pe:H()}],pt:[{pt:H()}],pr:[{pr:H()}],pb:[{pb:H()}],pl:[{pl:H()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[l,"screen",...ie()]}],"min-w":[{"min-w":[l,"screen","none",...ie()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[c]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",n,Nl,ha]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Le,Og]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Mg,Ue]}],"font-family":[{font:[Xq,Ue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Le,Ue]}],"line-clamp":[{"line-clamp":[et,"none",Le,Og]}],leading:[{leading:[a,...H()]}],"list-image":[{"list-image":["none",Le,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Me(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",Le,ha]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[et,"auto",Le,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:H()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_e()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ws,Le,Ue],radial:["",Le,Ue],conic:[ws,Le,Ue]},Jq,Wq]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:de()}],"gradient-via-pos":[{via:de()}],"gradient-to-pos":[{to:de()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:le()}],"rounded-s":[{"rounded-s":le()}],"rounded-e":[{"rounded-e":le()}],"rounded-t":[{"rounded-t":le()}],"rounded-r":[{"rounded-r":le()}],"rounded-b":[{"rounded-b":le()}],"rounded-l":[{"rounded-l":le()}],"rounded-ss":[{"rounded-ss":le()}],"rounded-se":[{"rounded-se":le()}],"rounded-ee":[{"rounded-ee":le()}],"rounded-es":[{"rounded-es":le()}],"rounded-tl":[{"rounded-tl":le()}],"rounded-tr":[{"rounded-tr":le()}],"rounded-br":[{"rounded-br":le()}],"rounded-bl":[{"rounded-bl":le()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Me(),"hidden","none"]}],"divide-style":[{divide:[...Me(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...Me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,Le,Ue]}],"outline-w":[{outline:["",et,Nl,ha]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",m,$d,Yd]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",p,$d,Yd]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[et,ha]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",v,$d,Yd]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[et,Le,Ue]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[Le,Ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_e()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Ue]}],filter:[{filter:["","none",Le,Ue]}],blur:[{blur:Ce()}],brightness:[{brightness:[et,Le,Ue]}],contrast:[{contrast:[et,Le,Ue]}],"drop-shadow":[{"drop-shadow":["","none",b,$d,Yd]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",et,Le,Ue]}],"hue-rotate":[{"hue-rotate":[et,Le,Ue]}],invert:[{invert:["",et,Le,Ue]}],saturate:[{saturate:[et,Le,Ue]}],sepia:[{sepia:["",et,Le,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Ue]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[et,Le,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[et,Le,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,Le,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,Le,Ue]}],"backdrop-invert":[{"backdrop-invert":["",et,Le,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[et,Le,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[et,Le,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",et,Le,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",Le,Ue]}],ease:[{ease:["linear","initial",E,Le,Ue]}],delay:[{delay:[et,Le,Ue]}],animate:[{animate:["none",N,Le,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,Le,Ue]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Ve()}],"rotate-x":[{"rotate-x":Ve()}],"rotate-y":[{"rotate-y":Ve()}],"rotate-z":[{"rotate-z":Ve()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:Xe()}],"skew-x":[{"skew-x":Xe()}],"skew-y":[{"skew-y":Xe()}],transform:[{transform:[Le,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ye()}],"translate-x":[{"translate-x":Ye()}],"translate-y":[{"translate-y":Ye()}],"translate-z":[{"translate-z":Ye()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Ue]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[et,Nl,ha,Og]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},nG=Uq(tG);function ft(...t){return nG(BD(t))}function iG(t,e){return{id:t.streamInfo.id,timestamp:t.streamInfo.timestamp,message:t.text,from:t.participantInfo.identity===e.localParticipant.identity?e.localParticipant:Array.from(e.remoteParticipants.values()).find(n=>n.identity===t.participantInfo.identity)}}const XD="(prefers-color-scheme: dark)";function JE(){const t=document.documentElement;t.classList.remove("dark","light"),window.matchMedia(XD).matches?t.classList.add("dark"):t.classList.add("light")}const QE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ek=BD,Sb=(t,e)=>n=>{var i;if(e?.variants==null)return ek(t,n?.class,n?.className);const{variants:r,defaultVariants:a}=e,c=Object.keys(r).map(f=>{const m=n?.[f],p=a?.[f];if(m===null)return null;const v=QE(m)||QE(p);return r[f][v]}),l=n&&Object.entries(n).reduce((f,m)=>{let[p,v]=m;return v===void 0||(f[p]=v),f},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((f,m)=>{let{class:p,className:v,...b}=m;return Object.entries(b).every(w=>{let[S,R]=w;return Array.isArray(R)?R.includes({...a,...l}[S]):{...a,...l}[S]===R})?[...f,p,v]:f},[]);return ek(t,c,d,n?.class,n?.className)},rG=Sb(["text-xs font-bold tracking-wider uppercase whitespace-nowrap","inline-flex items-center justify-center gap-2 shrink-0 rounded-full cursor-pointer outline-none transition-colors duration-300","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:pointer-events-none disabled:opacity-50","aria-invalid:ring-destructive/20 aria-invalid:border-destructive dark:aria-invalid:ring-destructive/40 ","[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0"],{variants:{variant:{default:"bg-button text-button-foreground hover:bg-muted focus:bg-muted",destructive:["bg-destructive text-destructive-foreground","hover:bg-destructive-hover focus:bg-destructive-hover focus-visible:ring-destructive-foreground/20","dark:focus-visible:ring-destructive-foreground/40"],outline:["border bg-background","hover:bg-accent hover:text-accent-foreground","dark:bg-input/30 dark:border-input dark:hover:bg-input/50"],primary:"bg-primary text-primary-foreground hover:bg-primary-hover focus:bg-primary-hover",secondary:"bg-secondary text-secondary-foregroun hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function ZD({className:t,variant:e,size:n,asChild:i=!1,...r}){const a=i?vq:"button";return x.jsx(a,{"data-slot":"button",className:ft(rG({variant:e,size:n,className:t})),...r})}function sG({onSend:t,className:e,disabled:n,...i}){const r=T.useRef(null),[a,c]=T.useState(""),l=f=>{f.preventDefault(),i.onSubmit?.(f),t?.(a),c("")},d=n||a.trim().length===0;return T.useEffect(()=>{n||r.current?.focus()},[n]),x.jsxs("form",{...i,onSubmit:l,className:ft("flex items-center gap-2 rounded-md pl-1 text-sm",e),children:[x.jsx("input",{autoFocus:!0,ref:r,type:"text",value:a,disabled:n,placeholder:"Type something...",onChange:f=>c(f.target.value),className:"flex-1 bg-transparent text-foreground placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"}),x.jsx(ZD,{size:"sm",type:"submit",variant:d?"secondary":"primary",disabled:d,className:"font-mono",children:"SEND"})]})}function en(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}var Xn=globalThis?.document?T.useLayoutEffect:()=>{},aG=jk[" useInsertionEffect ".trim().toString()]||Xn;function R0({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,a,c]=oG({defaultProp:e,onChange:n}),l=t!==void 0,d=l?t:r;{const m=T.useRef(t!==void 0);T.useEffect(()=>{const p=m.current;p!==l&&console.warn(`${i} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,i])}const f=T.useCallback(m=>{if(l){const p=cG(m)?m(t):m;p!==t&&c.current?.(p)}else a(m)},[l,t,a,c]);return[d,f]}function oG({defaultProp:t,onChange:e}){const[n,i]=T.useState(t),r=T.useRef(n),a=T.useRef(e);return aG(()=>{a.current=e},[e]),T.useEffect(()=>{r.current!==n&&(a.current?.(n),r.current=n)},[n,r]),[n,i,a]}function cG(t){return typeof t=="function"}var lG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Yt=lG.reduce((t,e)=>{const n=cu(`Primitive.${e}`),i=T.forwardRef((r,a)=>{const{asChild:c,...l}=r,d=c?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),x.jsx(d,{...l,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function uG(t,e){t&&hu.flushSync(()=>t.dispatchEvent(e))}var JD="Toggle",QD=T.forwardRef((t,e)=>{const{pressed:n,defaultPressed:i,onPressedChange:r,...a}=t,[c,l]=R0({prop:n,onChange:r,defaultProp:i??!1,caller:JD});return x.jsx(Yt.button,{type:"button","aria-pressed":c,"data-state":c?"on":"off","data-disabled":t.disabled?"":void 0,...a,ref:e,onClick:en(t.onClick,()=>{t.disabled||l(!c)})})});QD.displayName=JD;var dG=QD;const fG=Sb(["inline-flex items-center justify-center gap-2 rounded-full","text-sm font-medium whitespace-nowrap","cursor-pointer outline-none transition-[color,border,background-color]","focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:border-ring","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","disabled:pointer-events-none disabled:opacity-50 disabled:not-allowed","data-[state=on]:bg-button-selected data-[state=on]:border-button-border-selected","[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0"],{variants:{variant:{default:"bg-button hover:bg-muted focus:bg-muted hover:text-muted-foreground focus:text-muted-foreground",primary:"text-fg1 data-[state=on]:bg-button hover:data-[state=on]:bg-button-hover focus:data-[state=on]:bg-button-hover data-[state=off]:bg-button-primary hover:data-[state=off]:bg-destructive-hover data-[state=off]:text-button-primary-foreground",secondary:"text-fg1 bg-button hover:bg-button-hover data-[state=on]:bg-button-secondary hover:data-[state=on]:bg-button-secondary/80 data-[state=on]:text-button-secondary-foreground",outline:["border border-button-border bg-button text-button-foreground","hover:bg-background focus:bg-background"]},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function eN({className:t,variant:e,size:n,...i}){return x.jsx(dG,{"data-slot":"toggle",className:ft(fG({variant:e,size:n,className:t})),...i})}const ph=T.forwardRef((t,e)=>{const{alt:n,color:i="currentColor",size:r="1em",weight:a="regular",mirrored:c=!1,children:l,weights:d,...f}=t;return T.createElement("svg",{ref:e,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,fill:i,viewBox:"0 0 256 256",transform:c?"scale(-1, 1)":void 0,...f},!!n&&T.createElement("title",null,n),l,d.get(a))});ph.displayName="SSRBase";const hG=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M208,96l-80,80L48,96Z",opacity:"0.2"}),T.createElement("path",{d:"M215.39,92.94A8,8,0,0,0,208,88H48a8,8,0,0,0-5.66,13.66l80,80a8,8,0,0,0,11.32,0l80-80A8,8,0,0,0,215.39,92.94ZM128,164.69,67.31,104H188.69Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,48,88H208a8,8,0,0,1,5.66,13.66Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M212.24,100.24l-80,80a6,6,0,0,1-8.48,0l-80-80a6,6,0,0,1,8.48-8.48L128,167.51l75.76-75.75a6,6,0,0,1,8.48,8.48Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M210.83,98.83l-80,80a4,4,0,0,1-5.66,0l-80-80a4,4,0,0,1,5.66-5.66L128,170.34l77.17-77.17a4,4,0,1,1,5.66,5.66Z"}))]]),Tb=T.forwardRef((t,e)=>T.createElement(ph,{ref:e,...t,weights:hG}));Tb.displayName="CaretDownIcon";const mG=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216.49,168.49a12,12,0,0,1-17,0L128,97,56.49,168.49a12,12,0,0,1-17-17l80-80a12,12,0,0,1,17,0l80,80A12,12,0,0,1,216.49,168.49Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M208,160H48l80-80Z",opacity:"0.2"}),T.createElement("path",{d:"M213.66,154.34l-80-80a8,8,0,0,0-11.32,0l-80,80A8,8,0,0,0,48,168H208a8,8,0,0,0,5.66-13.66ZM67.31,152,128,91.31,188.69,152Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M215.39,163.06A8,8,0,0,1,208,168H48a8,8,0,0,1-5.66-13.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,215.39,163.06Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M212.24,164.24a6,6,0,0,1-8.48,0L128,88.49,52.24,164.24a6,6,0,0,1-8.48-8.48l80-80a6,6,0,0,1,8.48,0l80,80A6,6,0,0,1,212.24,164.24Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,165.66a8,8,0,0,1-11.32,0L128,91.31,53.66,165.66a8,8,0,0,1-11.32-11.32l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,213.66,165.66Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M210.83,162.83a4,4,0,0,1-5.66,0L128,85.66,50.83,162.83a4,4,0,0,1-5.66-5.66l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,210.83,162.83Z"}))]]),tN=T.forwardRef((t,e)=>T.createElement(ph,{ref:e,...t,weights:mG}));tN.displayName="CaretUpIcon";const pG=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M232.49,80.49l-128,128a12,12,0,0,1-17,0l-56-56a12,12,0,1,1,17-17L96,183,215.51,63.51a12,12,0,0,1,17,17Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Z",opacity:"0.2"}),T.createElement("path",{d:"M205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M228.24,76.24l-128,128a6,6,0,0,1-8.48,0l-56-56a6,6,0,0,1,8.48-8.48L96,191.51,219.76,67.76a6,6,0,0,1,8.48,8.48Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M226.83,74.83l-128,128a4,4,0,0,1-5.66,0l-56-56a4,4,0,0,1,5.66-5.66L96,194.34,221.17,69.17a4,4,0,1,1,5.66,5.66Z"}))]]),nN=T.forwardRef((t,e)=>T.createElement(ph,{ref:e,...t,weights:pG}));nN.displayName="CheckIcon";function tk(t,[e,n]){return Math.min(n,Math.max(e,t))}function xb(t,e=[]){let n=[];function i(a,c){const l=T.createContext(c),d=n.length;n=[...n,c];const f=p=>{const{scope:v,children:b,...w}=p,S=v?.[t]?.[d]||l,R=T.useMemo(()=>w,Object.values(w));return x.jsx(S.Provider,{value:R,children:b})};f.displayName=a+"Provider";function m(p,v){const b=v?.[t]?.[d]||l,w=T.useContext(b);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[f,m]}const r=()=>{const a=n.map(c=>T.createContext(c));return function(l){const d=l?.[t]||a;return T.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return r.scopeName=t,[i,gG(r,...e)]}function gG(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const c=i.reduce((l,{useScope:d,scopeName:f})=>{const p=d(a)[`__scope${f}`];return{...l,...p}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}function vG(t){const e=t+"CollectionProvider",[n,i]=xb(e),[r,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=S=>{const{scope:R,children:E}=S,N=Re.useRef(null),M=Re.useRef(new Map).current;return x.jsx(r,{scope:R,itemMap:M,collectionRef:N,children:E})};c.displayName=e;const l=t+"CollectionSlot",d=cu(l),f=Re.forwardRef((S,R)=>{const{scope:E,children:N}=S,M=a(l,E),I=Pn(R,M.collectionRef);return x.jsx(d,{ref:I,children:N})});f.displayName=l;const m=t+"CollectionItemSlot",p="data-radix-collection-item",v=cu(m),b=Re.forwardRef((S,R)=>{const{scope:E,children:N,...M}=S,I=Re.useRef(null),A=Pn(R,I),L=a(m,E);return Re.useEffect(()=>(L.itemMap.set(I,{ref:I,...M}),()=>void L.itemMap.delete(I))),x.jsx(v,{[p]:"",ref:A,children:N})});b.displayName=m;function w(S){const R=a(t+"CollectionConsumer",S);return Re.useCallback(()=>{const N=R.collectionRef.current;if(!N)return[];const M=Array.from(N.querySelectorAll(`[${p}]`));return Array.from(R.itemMap.values()).sort((L,z)=>M.indexOf(L.ref.current)-M.indexOf(z.ref.current))},[R.collectionRef,R.itemMap])}return[{Provider:c,Slot:f,ItemSlot:b},w,i]}var yG=T.createContext(void 0);function bG(t){const e=T.useContext(yG);return t||e||"ltr"}function Ra(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>e.current?.(...n),[])}function SG(t,e=globalThis?.document){const n=Ra(t);T.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var TG="DismissableLayer",A0="dismissableLayer.update",xG="dismissableLayer.pointerDownOutside",wG="dismissableLayer.focusOutside",nk,iN=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rN=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:c,onDismiss:l,...d}=t,f=T.useContext(iN),[m,p]=T.useState(null),v=m?.ownerDocument??globalThis?.document,[,b]=T.useState({}),w=Pn(e,z=>p(z)),S=Array.from(f.layers),[R]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),E=S.indexOf(R),N=m?S.indexOf(m):-1,M=f.layersWithOutsidePointerEventsDisabled.size>0,I=N>=E,A=kG(z=>{const H=z.target,W=[...f.branches].some(re=>re.contains(H));!I||W||(r?.(z),c?.(z),z.defaultPrevented||l?.())},v),L=RG(z=>{const H=z.target;[...f.branches].some(re=>re.contains(H))||(a?.(z),c?.(z),z.defaultPrevented||l?.())},v);return SG(z=>{N===f.layers.size-1&&(i?.(z),!z.defaultPrevented&&l&&(z.preventDefault(),l()))},v),T.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(nk=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),ik(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=nk)}},[m,v,n,f]),T.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),ik())},[m,f]),T.useEffect(()=>{const z=()=>b({});return document.addEventListener(A0,z),()=>document.removeEventListener(A0,z)},[]),x.jsx(Yt.div,{...d,ref:w,style:{pointerEvents:M?I?"auto":"none":void 0,...t.style},onFocusCapture:en(t.onFocusCapture,L.onFocusCapture),onBlurCapture:en(t.onBlurCapture,L.onBlurCapture),onPointerDownCapture:en(t.onPointerDownCapture,A.onPointerDownCapture)})});rN.displayName=TG;var CG="DismissableLayerBranch",EG=T.forwardRef((t,e)=>{const n=T.useContext(iN),i=T.useRef(null),r=Pn(e,i);return T.useEffect(()=>{const a=i.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),x.jsx(Yt.div,{...t,ref:r})});EG.displayName=CG;function kG(t,e=globalThis?.document){const n=Ra(t),i=T.useRef(!1),r=T.useRef(()=>{});return T.useEffect(()=>{const a=l=>{if(l.target&&!i.current){let d=function(){sN(xG,n,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);i.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function RG(t,e=globalThis?.document){const n=Ra(t),i=T.useRef(!1);return T.useEffect(()=>{const r=a=>{a.target&&!i.current&&sN(wG,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function ik(){const t=new CustomEvent(A0);document.dispatchEvent(t)}function sN(t,e,n,{discrete:i}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?uG(r,a):r.dispatchEvent(a)}var Ig=0;function AG(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??rk()),document.body.insertAdjacentElement("beforeend",t[1]??rk()),Ig++,()=>{Ig===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ig--}},[])}function rk(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ug="focusScope.autoFocusOnMount",Lg="focusScope.autoFocusOnUnmount",sk={bubbles:!1,cancelable:!0},_G="FocusScope",aN=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...c}=t,[l,d]=T.useState(null),f=Ra(r),m=Ra(a),p=T.useRef(null),v=Pn(e,S=>d(S)),b=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(i){let S=function(M){if(b.paused||!l)return;const I=M.target;l.contains(I)?p.current=I:Rs(p.current,{select:!0})},R=function(M){if(b.paused||!l)return;const I=M.relatedTarget;I!==null&&(l.contains(I)||Rs(p.current,{select:!0}))},E=function(M){if(document.activeElement===document.body)for(const A of M)A.removedNodes.length>0&&Rs(l)};document.addEventListener("focusin",S),document.addEventListener("focusout",R);const N=new MutationObserver(E);return l&&N.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",S),document.removeEventListener("focusout",R),N.disconnect()}}},[i,l,b.paused]),T.useEffect(()=>{if(l){ok.add(b);const S=document.activeElement;if(!l.contains(S)){const E=new CustomEvent(Ug,sk);l.addEventListener(Ug,f),l.dispatchEvent(E),E.defaultPrevented||(PG(IG(oN(l)),{select:!0}),document.activeElement===S&&Rs(l))}return()=>{l.removeEventListener(Ug,f),setTimeout(()=>{const E=new CustomEvent(Lg,sk);l.addEventListener(Lg,m),l.dispatchEvent(E),E.defaultPrevented||Rs(S??document.body,{select:!0}),l.removeEventListener(Lg,m),ok.remove(b)},0)}}},[l,f,m,b]);const w=T.useCallback(S=>{if(!n&&!i||b.paused)return;const R=S.key==="Tab"&&!S.altKey&&!S.ctrlKey&&!S.metaKey,E=document.activeElement;if(R&&E){const N=S.currentTarget,[M,I]=DG(N);M&&I?!S.shiftKey&&E===I?(S.preventDefault(),n&&Rs(M,{select:!0})):S.shiftKey&&E===M&&(S.preventDefault(),n&&Rs(I,{select:!0})):E===N&&S.preventDefault()}},[n,i,b.paused]);return x.jsx(Yt.div,{tabIndex:-1,...c,ref:v,onKeyDown:w})});aN.displayName=_G;function PG(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Rs(i,{select:e}),document.activeElement!==n)return}function DG(t){const e=oN(t),n=ak(e,t),i=ak(e.reverse(),t);return[n,i]}function oN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ak(t,e){for(const n of t)if(!NG(n,{upTo:e}))return n}function NG(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function MG(t){return t instanceof HTMLInputElement&&"select"in t}function Rs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&MG(t)&&e&&t.select()}}var ok=OG();function OG(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=ck(t,e),t.unshift(e)},remove(e){t=ck(t,e),t[0]?.resume()}}}function ck(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function IG(t){return t.filter(e=>e.tagName!=="A")}var UG=jk[" useId ".trim().toString()]||(()=>{}),LG=0;function wb(t){const[e,n]=T.useState(UG());return Xn(()=>{n(i=>i??String(LG++))},[t]),t||(e?`radix-${e}`:"")}const jG=["top","right","bottom","left"],js=Math.min,ai=Math.max,Gf=Math.round,Wd=Math.floor,or=t=>({x:t,y:t}),BG={left:"right",right:"left",bottom:"top",top:"bottom"},FG={start:"end",end:"start"};function _0(t,e,n){return ai(t,js(e,n))}function $r(t,e){return typeof t=="function"?t(e):t}function Wr(t){return t.split("-")[0]}function gc(t){return t.split("-")[1]}function Cb(t){return t==="x"?"y":"x"}function Eb(t){return t==="y"?"height":"width"}const VG=new Set(["top","bottom"]);function nr(t){return VG.has(Wr(t))?"y":"x"}function kb(t){return Cb(nr(t))}function zG(t,e,n){n===void 0&&(n=!1);const i=gc(t),r=kb(t),a=Eb(r);let c=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=Kf(c)),[c,Kf(c)]}function HG(t){const e=Kf(t);return[P0(t),e,P0(e)]}function P0(t){return t.replace(/start|end/g,e=>FG[e])}const lk=["left","right"],uk=["right","left"],qG=["top","bottom"],GG=["bottom","top"];function KG(t,e,n){switch(t){case"top":case"bottom":return n?e?uk:lk:e?lk:uk;case"left":case"right":return e?qG:GG;default:return[]}}function YG(t,e,n,i){const r=gc(t);let a=KG(Wr(t),n==="start",i);return r&&(a=a.map(c=>c+"-"+r),e&&(a=a.concat(a.map(P0)))),a}function Kf(t){return t.replace(/left|right|bottom|top/g,e=>BG[e])}function $G(t){return{top:0,right:0,bottom:0,left:0,...t}}function cN(t){return typeof t!="number"?$G(t):{top:t,right:t,bottom:t,left:t}}function Yf(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function dk(t,e,n){let{reference:i,floating:r}=t;const a=nr(e),c=kb(e),l=Eb(c),d=Wr(e),f=a==="y",m=i.x+i.width/2-r.width/2,p=i.y+i.height/2-r.height/2,v=i[l]/2-r[l]/2;let b;switch(d){case"top":b={x:m,y:i.y-r.height};break;case"bottom":b={x:m,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y:p};break;case"left":b={x:i.x-r.width,y:p};break;default:b={x:i.x,y:i.y}}switch(gc(e)){case"start":b[c]-=v*(n&&f?-1:1);break;case"end":b[c]+=v*(n&&f?-1:1);break}return b}const WG=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:c}=n,l=a.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:p}=dk(f,i,d),v=i,b={},w=0;for(let S=0;S<l.length;S++){const{name:R,fn:E}=l[S],{x:N,y:M,data:I,reset:A}=await E({x:m,y:p,initialPlacement:i,placement:v,strategy:r,middlewareData:b,rects:f,platform:c,elements:{reference:t,floating:e}});m=N??m,p=M??p,b={...b,[R]:{...b[R],...I}},A&&w<=50&&(w++,typeof A=="object"&&(A.placement&&(v=A.placement),A.rects&&(f=A.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:r}):A.rects),{x:m,y:p}=dk(f,v,d)),S=-1)}return{x:m,y:p,placement:v,strategy:r,middlewareData:b}};async function lu(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:c,elements:l,strategy:d}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:p="floating",altBoundary:v=!1,padding:b=0}=$r(e,t),w=cN(b),R=l[v?p==="floating"?"reference":"floating":p],E=Yf(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(R)))==null||n?R:R.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:f,rootBoundary:m,strategy:d})),N=p==="floating"?{x:i,y:r,width:c.floating.width,height:c.floating.height}:c.reference,M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),I=await(a.isElement==null?void 0:a.isElement(M))?await(a.getScale==null?void 0:a.getScale(M))||{x:1,y:1}:{x:1,y:1},A=Yf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:N,offsetParent:M,strategy:d}):N);return{top:(E.top-A.top+w.top)/I.y,bottom:(A.bottom-E.bottom+w.bottom)/I.y,left:(E.left-A.left+w.left)/I.x,right:(A.right-E.right+w.right)/I.x}}const XG=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:c,elements:l,middlewareData:d}=e,{element:f,padding:m=0}=$r(t,e)||{};if(f==null)return{};const p=cN(m),v={x:n,y:i},b=kb(r),w=Eb(b),S=await c.getDimensions(f),R=b==="y",E=R?"top":"left",N=R?"bottom":"right",M=R?"clientHeight":"clientWidth",I=a.reference[w]+a.reference[b]-v[b]-a.floating[w],A=v[b]-a.reference[b],L=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let z=L?L[M]:0;(!z||!await(c.isElement==null?void 0:c.isElement(L)))&&(z=l.floating[M]||a.floating[w]);const H=I/2-A/2,W=z/2-S[w]/2-1,re=js(p[E],W),se=js(p[N],W),fe=re,Ee=z-S[w]-se,Ae=z/2-S[w]/2+H,Pe=_0(fe,Ae,Ee),K=!d.arrow&&gc(r)!=null&&Ae!==Pe&&a.reference[w]/2-(Ae<fe?re:se)-S[w]/2<0,ie=K?Ae<fe?Ae-fe:Ae-Ee:0;return{[b]:v[b]+ie,data:{[b]:Pe,centerOffset:Ae-Pe-ie,...K&&{alignmentOffset:ie}},reset:K}}}),ZG=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:a,rects:c,initialPlacement:l,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:S=!0,...R}=$r(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const E=Wr(r),N=nr(l),M=Wr(l)===l,I=await(d.isRTL==null?void 0:d.isRTL(f.floating)),A=v||(M||!S?[Kf(l)]:HG(l)),L=w!=="none";!v&&L&&A.push(...YG(l,S,w,I));const z=[l,...A],H=await lu(e,R),W=[];let re=((i=a.flip)==null?void 0:i.overflows)||[];if(m&&W.push(H[E]),p){const Ae=zG(r,c,I);W.push(H[Ae[0]],H[Ae[1]])}if(re=[...re,{placement:r,overflows:W}],!W.every(Ae=>Ae<=0)){var se,fe;const Ae=(((se=a.flip)==null?void 0:se.index)||0)+1,Pe=z[Ae];if(Pe&&(!(p==="alignment"?N!==nr(Pe):!1)||re.every(J=>nr(J.placement)===N?J.overflows[0]>0:!0)))return{data:{index:Ae,overflows:re},reset:{placement:Pe}};let K=(fe=re.filter(ie=>ie.overflows[0]<=0).sort((ie,J)=>ie.overflows[1]-J.overflows[1])[0])==null?void 0:fe.placement;if(!K)switch(b){case"bestFit":{var Ee;const ie=(Ee=re.filter(J=>{if(L){const _e=nr(J.placement);return _e===N||_e==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(_e=>_e>0).reduce((_e,F)=>_e+F,0)]).sort((J,_e)=>J[1]-_e[1])[0])==null?void 0:Ee[0];ie&&(K=ie);break}case"initialPlacement":K=l;break}if(r!==K)return{reset:{placement:K}}}return{}}}};function fk(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function hk(t){return jG.some(e=>t[e]>=0)}const JG=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=$r(t,e);switch(i){case"referenceHidden":{const a=await lu(e,{...r,elementContext:"reference"}),c=fk(a,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:hk(c)}}}case"escaped":{const a=await lu(e,{...r,altBoundary:!0}),c=fk(a,n.floating);return{data:{escapedOffsets:c,escaped:hk(c)}}}default:return{}}}}},lN=new Set(["left","top"]);async function QG(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),c=Wr(n),l=gc(n),d=nr(n)==="y",f=lN.has(c)?-1:1,m=a&&d?-1:1,p=$r(e,t);let{mainAxis:v,crossAxis:b,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof w=="number"&&(b=l==="end"?w*-1:w),d?{x:b*m,y:v*f}:{x:v*f,y:b*m}}const eK=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:c,middlewareData:l}=e,d=await QG(e,t);return c===((n=l.offset)==null?void 0:n.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:r+d.x,y:a+d.y,data:{...d,placement:c}}}}},tK=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:l={fn:R=>{let{x:E,y:N}=R;return{x:E,y:N}}},...d}=$r(t,e),f={x:n,y:i},m=await lu(e,d),p=nr(Wr(r)),v=Cb(p);let b=f[v],w=f[p];if(a){const R=v==="y"?"top":"left",E=v==="y"?"bottom":"right",N=b+m[R],M=b-m[E];b=_0(N,b,M)}if(c){const R=p==="y"?"top":"left",E=p==="y"?"bottom":"right",N=w+m[R],M=w-m[E];w=_0(N,w,M)}const S=l.fn({...e,[v]:b,[p]:w});return{...S,data:{x:S.x-n,y:S.y-i,enabled:{[v]:a,[p]:c}}}}}},nK=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:a,middlewareData:c}=e,{offset:l=0,mainAxis:d=!0,crossAxis:f=!0}=$r(t,e),m={x:n,y:i},p=nr(r),v=Cb(p);let b=m[v],w=m[p];const S=$r(l,e),R=typeof S=="number"?{mainAxis:S,crossAxis:0}:{mainAxis:0,crossAxis:0,...S};if(d){const M=v==="y"?"height":"width",I=a.reference[v]-a.floating[M]+R.mainAxis,A=a.reference[v]+a.reference[M]-R.mainAxis;b<I?b=I:b>A&&(b=A)}if(f){var E,N;const M=v==="y"?"width":"height",I=lN.has(Wr(r)),A=a.reference[p]-a.floating[M]+(I&&((E=c.offset)==null?void 0:E[p])||0)+(I?0:R.crossAxis),L=a.reference[p]+a.reference[M]+(I?0:((N=c.offset)==null?void 0:N[p])||0)-(I?R.crossAxis:0);w<A?w=A:w>L&&(w=L)}return{[v]:b,[p]:w}}}},iK=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:a,platform:c,elements:l}=e,{apply:d=()=>{},...f}=$r(t,e),m=await lu(e,f),p=Wr(r),v=gc(r),b=nr(r)==="y",{width:w,height:S}=a.floating;let R,E;p==="top"||p==="bottom"?(R=p,E=v===(await(c.isRTL==null?void 0:c.isRTL(l.floating))?"start":"end")?"left":"right"):(E=p,R=v==="end"?"top":"bottom");const N=S-m.top-m.bottom,M=w-m.left-m.right,I=js(S-m[R],N),A=js(w-m[E],M),L=!e.middlewareData.shift;let z=I,H=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(H=M),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(z=N),L&&!v){const re=ai(m.left,0),se=ai(m.right,0),fe=ai(m.top,0),Ee=ai(m.bottom,0);b?H=w-2*(re!==0||se!==0?re+se:ai(m.left,m.right)):z=S-2*(fe!==0||Ee!==0?fe+Ee:ai(m.top,m.bottom))}await d({...e,availableWidth:H,availableHeight:z});const W=await c.getDimensions(l.floating);return w!==W.width||S!==W.height?{reset:{rects:!0}}:{}}}};function gh(){return typeof window<"u"}function vc(t){return uN(t)?(t.nodeName||"").toLowerCase():"#document"}function li(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gr(t){var e;return(e=(uN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function uN(t){return gh()?t instanceof Node||t instanceof li(t).Node:!1}function zi(t){return gh()?t instanceof Element||t instanceof li(t).Element:!1}function dr(t){return gh()?t instanceof HTMLElement||t instanceof li(t).HTMLElement:!1}function mk(t){return!gh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof li(t).ShadowRoot}const rK=new Set(["inline","contents"]);function Tu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Hi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!rK.has(r)}const sK=new Set(["table","td","th"]);function aK(t){return sK.has(vc(t))}const oK=[":popover-open",":modal"];function vh(t){return oK.some(e=>{try{return t.matches(e)}catch{return!1}})}const cK=["transform","translate","scale","rotate","perspective"],lK=["transform","translate","scale","rotate","perspective","filter"],uK=["paint","layout","strict","content"];function Rb(t){const e=Ab(),n=zi(t)?Hi(t):t;return cK.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||lK.some(i=>(n.willChange||"").includes(i))||uK.some(i=>(n.contain||"").includes(i))}function dK(t){let e=Bs(t);for(;dr(e)&&!rc(e);){if(Rb(e))return e;if(vh(e))return null;e=Bs(e)}return null}function Ab(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const fK=new Set(["html","body","#document"]);function rc(t){return fK.has(vc(t))}function Hi(t){return li(t).getComputedStyle(t)}function yh(t){return zi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Bs(t){if(vc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mk(t)&&t.host||gr(t);return mk(e)?e.host:e}function dN(t){const e=Bs(t);return rc(e)?t.ownerDocument?t.ownerDocument.body:t.body:dr(e)&&Tu(e)?e:dN(e)}function uu(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=dN(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),c=li(r);if(a){const l=D0(c);return e.concat(c,c.visualViewport||[],Tu(r)?r:[],l&&n?uu(l):[])}return e.concat(r,uu(r,[],n))}function D0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function fN(t){const e=Hi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=dr(t),a=r?t.offsetWidth:n,c=r?t.offsetHeight:i,l=Gf(n)!==a||Gf(i)!==c;return l&&(n=a,i=c),{width:n,height:i,$:l}}function _b(t){return zi(t)?t:t.contextElement}function Wo(t){const e=_b(t);if(!dr(e))return or(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=fN(e);let c=(a?Gf(n.width):n.width)/i,l=(a?Gf(n.height):n.height)/r;return(!c||!Number.isFinite(c))&&(c=1),(!l||!Number.isFinite(l))&&(l=1),{x:c,y:l}}const hK=or(0);function hN(t){const e=li(t);return!Ab()||!e.visualViewport?hK:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function mK(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==li(t)?!1:e}function Aa(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=_b(t);let c=or(1);e&&(i?zi(i)&&(c=Wo(i)):c=Wo(t));const l=mK(a,n,i)?hN(a):or(0);let d=(r.left+l.x)/c.x,f=(r.top+l.y)/c.y,m=r.width/c.x,p=r.height/c.y;if(a){const v=li(a),b=i&&zi(i)?li(i):i;let w=v,S=D0(w);for(;S&&i&&b!==w;){const R=Wo(S),E=S.getBoundingClientRect(),N=Hi(S),M=E.left+(S.clientLeft+parseFloat(N.paddingLeft))*R.x,I=E.top+(S.clientTop+parseFloat(N.paddingTop))*R.y;d*=R.x,f*=R.y,m*=R.x,p*=R.y,d+=M,f+=I,w=li(S),S=D0(w)}}return Yf({width:m,height:p,x:d,y:f})}function Pb(t,e){const n=yh(t).scrollLeft;return e?e.left+n:Aa(gr(t)).left+n}function mN(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:Pb(t,i)),a=i.top+e.scrollTop;return{x:r,y:a}}function pK(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",c=gr(i),l=e?vh(e.floating):!1;if(i===c||l&&a)return n;let d={scrollLeft:0,scrollTop:0},f=or(1);const m=or(0),p=dr(i);if((p||!p&&!a)&&((vc(i)!=="body"||Tu(c))&&(d=yh(i)),dr(i))){const b=Aa(i);f=Wo(i),m.x=b.x+i.clientLeft,m.y=b.y+i.clientTop}const v=c&&!p&&!a?mN(c,d,!0):or(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+m.x+v.x,y:n.y*f.y-d.scrollTop*f.y+m.y+v.y}}function gK(t){return Array.from(t.getClientRects())}function vK(t){const e=gr(t),n=yh(t),i=t.ownerDocument.body,r=ai(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=ai(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let c=-n.scrollLeft+Pb(t);const l=-n.scrollTop;return Hi(i).direction==="rtl"&&(c+=ai(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:c,y:l}}function yK(t,e){const n=li(t),i=gr(t),r=n.visualViewport;let a=i.clientWidth,c=i.clientHeight,l=0,d=0;if(r){a=r.width,c=r.height;const f=Ab();(!f||f&&e==="fixed")&&(l=r.offsetLeft,d=r.offsetTop)}return{width:a,height:c,x:l,y:d}}const bK=new Set(["absolute","fixed"]);function SK(t,e){const n=Aa(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=dr(t)?Wo(t):or(1),c=t.clientWidth*a.x,l=t.clientHeight*a.y,d=r*a.x,f=i*a.y;return{width:c,height:l,x:d,y:f}}function pk(t,e,n){let i;if(e==="viewport")i=yK(t,n);else if(e==="document")i=vK(gr(t));else if(zi(e))i=SK(e,n);else{const r=hN(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Yf(i)}function pN(t,e){const n=Bs(t);return n===e||!zi(n)||rc(n)?!1:Hi(n).position==="fixed"||pN(n,e)}function TK(t,e){const n=e.get(t);if(n)return n;let i=uu(t,[],!1).filter(l=>zi(l)&&vc(l)!=="body"),r=null;const a=Hi(t).position==="fixed";let c=a?Bs(t):t;for(;zi(c)&&!rc(c);){const l=Hi(c),d=Rb(c);!d&&l.position==="fixed"&&(r=null),(a?!d&&!r:!d&&l.position==="static"&&!!r&&bK.has(r.position)||Tu(c)&&!d&&pN(t,c))?i=i.filter(m=>m!==c):r=l,c=Bs(c)}return e.set(t,i),i}function xK(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const c=[...n==="clippingAncestors"?vh(e)?[]:TK(e,this._c):[].concat(n),i],l=c[0],d=c.reduce((f,m)=>{const p=pk(e,m,r);return f.top=ai(p.top,f.top),f.right=js(p.right,f.right),f.bottom=js(p.bottom,f.bottom),f.left=ai(p.left,f.left),f},pk(e,l,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function wK(t){const{width:e,height:n}=fN(t);return{width:e,height:n}}function CK(t,e,n){const i=dr(e),r=gr(e),a=n==="fixed",c=Aa(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const d=or(0);function f(){d.x=Pb(r)}if(i||!i&&!a)if((vc(e)!=="body"||Tu(r))&&(l=yh(e)),i){const b=Aa(e,!0,a,e);d.x=b.x+e.clientLeft,d.y=b.y+e.clientTop}else r&&f();a&&!i&&r&&f();const m=r&&!i&&!a?mN(r,l):or(0),p=c.left+l.scrollLeft-d.x-m.x,v=c.top+l.scrollTop-d.y-m.y;return{x:p,y:v,width:c.width,height:c.height}}function jg(t){return Hi(t).position==="static"}function gk(t,e){if(!dr(t)||Hi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return gr(t)===n&&(n=n.ownerDocument.body),n}function gN(t,e){const n=li(t);if(vh(t))return n;if(!dr(t)){let r=Bs(t);for(;r&&!rc(r);){if(zi(r)&&!jg(r))return r;r=Bs(r)}return n}let i=gk(t,e);for(;i&&aK(i)&&jg(i);)i=gk(i,e);return i&&rc(i)&&jg(i)&&!Rb(i)?n:i||dK(t)||n}const EK=async function(t){const e=this.getOffsetParent||gN,n=this.getDimensions,i=await n(t.floating);return{reference:CK(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function kK(t){return Hi(t).direction==="rtl"}const RK={convertOffsetParentRelativeRectToViewportRelativeRect:pK,getDocumentElement:gr,getClippingRect:xK,getOffsetParent:gN,getElementRects:EK,getClientRects:gK,getDimensions:wK,getScale:Wo,isElement:zi,isRTL:kK};function vN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function AK(t,e){let n=null,i;const r=gr(t);function a(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function c(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),a();const f=t.getBoundingClientRect(),{left:m,top:p,width:v,height:b}=f;if(l||e(),!v||!b)return;const w=Wd(p),S=Wd(r.clientWidth-(m+v)),R=Wd(r.clientHeight-(p+b)),E=Wd(m),M={rootMargin:-w+"px "+-S+"px "+-R+"px "+-E+"px",threshold:ai(0,js(1,d))||1};let I=!0;function A(L){const z=L[0].intersectionRatio;if(z!==d){if(!I)return c();z?c(!1,z):i=setTimeout(()=>{c(!1,1e-7)},1e3)}z===1&&!vN(f,t.getBoundingClientRect())&&c(),I=!1}try{n=new IntersectionObserver(A,{...M,root:r.ownerDocument})}catch{n=new IntersectionObserver(A,M)}n.observe(t)}return c(!0),a}function _K(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,f=_b(t),m=r||a?[...f?uu(f):[],...uu(e)]:[];m.forEach(E=>{r&&E.addEventListener("scroll",n,{passive:!0}),a&&E.addEventListener("resize",n)});const p=f&&l?AK(f,n):null;let v=-1,b=null;c&&(b=new ResizeObserver(E=>{let[N]=E;N&&N.target===f&&b&&(b.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var M;(M=b)==null||M.observe(e)})),n()}),f&&!d&&b.observe(f),b.observe(e));let w,S=d?Aa(t):null;d&&R();function R(){const E=Aa(t);S&&!vN(S,E)&&n(),S=E,w=requestAnimationFrame(R)}return n(),()=>{var E;m.forEach(N=>{r&&N.removeEventListener("scroll",n),a&&N.removeEventListener("resize",n)}),p?.(),(E=b)==null||E.disconnect(),b=null,d&&cancelAnimationFrame(w)}}const PK=eK,DK=tK,NK=ZG,MK=iK,OK=JG,vk=XG,IK=nK,UK=(t,e,n)=>{const i=new Map,r={platform:RK,...n},a={...r.platform,_c:i};return WG(t,e,{...r,platform:a})};var LK=typeof document<"u",jK=function(){},wf=LK?T.useLayoutEffect:jK;function $f(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!$f(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!(a==="_owner"&&t.$$typeof)&&!$f(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function yN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function yk(t,e){const n=yN(t);return Math.round(e*n)/n}function Bg(t){const e=T.useRef(t);return wf(()=>{e.current=t}),e}function BK(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:c}={},transform:l=!0,whileElementsMounted:d,open:f}=t,[m,p]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,b]=T.useState(i);$f(v,i)||b(i);const[w,S]=T.useState(null),[R,E]=T.useState(null),N=T.useCallback(J=>{J!==L.current&&(L.current=J,S(J))},[]),M=T.useCallback(J=>{J!==z.current&&(z.current=J,E(J))},[]),I=a||w,A=c||R,L=T.useRef(null),z=T.useRef(null),H=T.useRef(m),W=d!=null,re=Bg(d),se=Bg(r),fe=Bg(f),Ee=T.useCallback(()=>{if(!L.current||!z.current)return;const J={placement:e,strategy:n,middleware:v};se.current&&(J.platform=se.current),UK(L.current,z.current,J).then(_e=>{const F={..._e,isPositioned:fe.current!==!1};Ae.current&&!$f(H.current,F)&&(H.current=F,hu.flushSync(()=>{p(F)}))})},[v,e,n,se,fe]);wf(()=>{f===!1&&H.current.isPositioned&&(H.current.isPositioned=!1,p(J=>({...J,isPositioned:!1})))},[f]);const Ae=T.useRef(!1);wf(()=>(Ae.current=!0,()=>{Ae.current=!1}),[]),wf(()=>{if(I&&(L.current=I),A&&(z.current=A),I&&A){if(re.current)return re.current(I,A,Ee);Ee()}},[I,A,Ee,re,W]);const Pe=T.useMemo(()=>({reference:L,floating:z,setReference:N,setFloating:M}),[N,M]),K=T.useMemo(()=>({reference:I,floating:A}),[I,A]),ie=T.useMemo(()=>{const J={position:n,left:0,top:0};if(!K.floating)return J;const _e=yk(K.floating,m.x),F=yk(K.floating,m.y);return l?{...J,transform:"translate("+_e+"px, "+F+"px)",...yN(K.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_e,top:F}},[n,l,K.floating,m.x,m.y]);return T.useMemo(()=>({...m,update:Ee,refs:Pe,elements:K,floatingStyles:ie}),[m,Ee,Pe,K,ie])}const FK=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?vk({element:i.current,padding:r}).fn(n):{}:i?vk({element:i,padding:r}).fn(n):{}}}},VK=(t,e)=>({...PK(t),options:[t,e]}),zK=(t,e)=>({...DK(t),options:[t,e]}),HK=(t,e)=>({...IK(t),options:[t,e]}),qK=(t,e)=>({...NK(t),options:[t,e]}),GK=(t,e)=>({...MK(t),options:[t,e]}),KK=(t,e)=>({...OK(t),options:[t,e]}),YK=(t,e)=>({...FK(t),options:[t,e]});var $K="Arrow",bN=T.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...a}=t;return x.jsx(Yt.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:x.jsx("polygon",{points:"0,0 30,0 15,10"})})});bN.displayName=$K;var WK=bN;function XK(t){const[e,n]=T.useState(void 0);return Xn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let c,l;if("borderBoxSize"in a){const d=a.borderBoxSize,f=Array.isArray(d)?d[0]:d;c=f.inlineSize,l=f.blockSize}else c=t.offsetWidth,l=t.offsetHeight;n({width:c,height:l})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var Db="Popper",[SN,TN]=xb(Db),[ZK,xN]=SN(Db),wN=t=>{const{__scopePopper:e,children:n}=t,[i,r]=T.useState(null);return x.jsx(ZK,{scope:e,anchor:i,onAnchorChange:r,children:n})};wN.displayName=Db;var CN="PopperAnchor",EN=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,a=xN(CN,n),c=T.useRef(null),l=Pn(e,c);return T.useEffect(()=>{a.onAnchorChange(i?.current||c.current)}),i?null:x.jsx(Yt.div,{...r,ref:l})});EN.displayName=CN;var Nb="PopperContent",[JK,QK]=SN(Nb),kN=T.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:c=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:w,...S}=t,R=xN(Nb,n),[E,N]=T.useState(null),M=Pn(e,be=>N(be)),[I,A]=T.useState(null),L=XK(I),z=L?.width??0,H=L?.height??0,W=i+(a!=="center"?"-"+a:""),re=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},se=Array.isArray(f)?f:[f],fe=se.length>0,Ee={padding:re,boundary:se.filter(tY),altBoundary:fe},{refs:Ae,floatingStyles:Pe,placement:K,isPositioned:ie,middlewareData:J}=BK({strategy:"fixed",placement:W,whileElementsMounted:(...be)=>_K(...be,{animationFrame:b==="always"}),elements:{reference:R.anchor},middleware:[VK({mainAxis:r+H,alignmentAxis:c}),d&&zK({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?HK():void 0,...Ee}),d&&qK({...Ee}),GK({...Ee,apply:({elements:be,rects:Ce,availableWidth:Ve,availableHeight:qe})=>{const{width:Xe,height:Ye}=Ce.reference,kt=be.floating.style;kt.setProperty("--radix-popper-available-width",`${Ve}px`),kt.setProperty("--radix-popper-available-height",`${qe}px`),kt.setProperty("--radix-popper-anchor-width",`${Xe}px`),kt.setProperty("--radix-popper-anchor-height",`${Ye}px`)}}),I&&YK({element:I,padding:l}),nY({arrowWidth:z,arrowHeight:H}),v&&KK({strategy:"referenceHidden",...Ee})]}),[_e,F]=_N(K),Z=Ra(w);Xn(()=>{ie&&Z?.()},[ie,Z]);const de=J.arrow?.x,le=J.arrow?.y,Te=J.arrow?.centerOffset!==0,[Me,De]=T.useState();return Xn(()=>{E&&De(window.getComputedStyle(E).zIndex)},[E]),x.jsx("div",{ref:Ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...Pe,transform:ie?Pe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[J.transformOrigin?.x,J.transformOrigin?.y].join(" "),...J.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:x.jsx(JK,{scope:n,placedSide:_e,onArrowChange:A,arrowX:de,arrowY:le,shouldHideArrow:Te,children:x.jsx(Yt.div,{"data-side":_e,"data-align":F,...S,ref:M,style:{...S.style,animation:ie?void 0:"none"}})})})});kN.displayName=Nb;var RN="PopperArrow",eY={top:"bottom",right:"left",bottom:"top",left:"right"},AN=T.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,a=QK(RN,i),c=eY[a.placedSide];return x.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:x.jsx(WK,{...r,ref:n,style:{...r.style,display:"block"}})})});AN.displayName=RN;function tY(t){return t!==null}var nY=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,c=r.arrow?.centerOffset!==0,l=c?0:t.arrowWidth,d=c?0:t.arrowHeight,[f,m]=_N(n),p={start:"0%",center:"50%",end:"100%"}[m],v=(r.arrow?.x??0)+l/2,b=(r.arrow?.y??0)+d/2;let w="",S="";return f==="bottom"?(w=c?p:`${v}px`,S=`${-d}px`):f==="top"?(w=c?p:`${v}px`,S=`${i.floating.height+d}px`):f==="right"?(w=`${-d}px`,S=c?p:`${b}px`):f==="left"&&(w=`${i.floating.width+d}px`,S=c?p:`${b}px`),{data:{x:w,y:S}}}});function _N(t){const[e,n="center"]=t.split("-");return[e,n]}var iY=wN,rY=EN,sY=kN,aY=AN,oY="Portal",PN=T.forwardRef((t,e)=>{const{container:n,...i}=t,[r,a]=T.useState(!1);Xn(()=>a(!0),[]);const c=n||r&&globalThis?.document?.body;return c?eR.createPortal(x.jsx(Yt.div,{...i,ref:e}),c):null});PN.displayName=oY;function cY(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var DN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),lY="VisuallyHidden",uY=T.forwardRef((t,e)=>x.jsx(Yt.span,{...t,ref:e,style:{...DN,...t.style}}));uY.displayName=lY;var dY=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ro=new WeakMap,Xd=new WeakMap,Zd={},Fg=0,NN=function(t){return t&&(t.host||NN(t.parentNode))},fY=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=NN(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},hY=function(t,e,n,i){var r=fY(e,Array.isArray(t)?t:[t]);Zd[n]||(Zd[n]=new WeakMap);var a=Zd[n],c=[],l=new Set,d=new Set(r),f=function(p){!p||l.has(p)||(l.add(p),f(p.parentNode))};r.forEach(f);var m=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(v){if(l.has(v))m(v);else try{var b=v.getAttribute(i),w=b!==null&&b!=="false",S=(Ro.get(v)||0)+1,R=(a.get(v)||0)+1;Ro.set(v,S),a.set(v,R),c.push(v),S===1&&w&&Xd.set(v,!0),R===1&&v.setAttribute(n,"true"),w||v.setAttribute(i,"true")}catch(E){console.error("aria-hidden: cannot operate on ",v,E)}})};return m(e),l.clear(),Fg++,function(){c.forEach(function(p){var v=Ro.get(p)-1,b=a.get(p)-1;Ro.set(p,v),a.set(p,b),v||(Xd.has(p)||p.removeAttribute(i),Xd.delete(p)),b||p.removeAttribute(n)}),Fg--,Fg||(Ro=new WeakMap,Ro=new WeakMap,Xd=new WeakMap,Zd={})}},mY=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=dY(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),hY(i,r,n,"aria-hidden")):function(){return null}},_s=function(){return _s=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},_s.apply(this,arguments)};function pY(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function gY(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var Cf="right-scroll-bar-position",Ef="width-before-scroll-bar",vY="with-scroll-bars-hidden",yY="--removed-body-scroll-bar-size";function Vg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function bY(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var SY=typeof window<"u"?T.useLayoutEffect:T.useEffect,bk=new WeakMap;function TY(t,e){var n=bY(null,function(i){return t.forEach(function(r){return Vg(r,i)})});return SY(function(){var i=bk.get(n);if(i){var r=new Set(i),a=new Set(t),c=n.current;r.forEach(function(l){a.has(l)||Vg(l,null)}),a.forEach(function(l){r.has(l)||Vg(l,c)})}bk.set(n,t)},[t]),n}var Wf=function(){return Wf=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wf.apply(this,arguments)};function xY(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function wY(t){return t}function CY(t,e){e===void 0&&(e=wY);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var c=e(a,i);return n.push(c),function(){n=n.filter(function(l){return l!==c})}},assignSyncMedium:function(a){for(i=!0;n.length;){var c=n;n=[],c.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){i=!0;var c=[];if(n.length){var l=n;n=[],l.forEach(a),c=n}var d=function(){var m=c;c=[],m.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(m){c.push(m),f()},filter:function(m){return c=c.filter(m),n}}}};return r}function EY(t){t===void 0&&(t={});var e=CY(null);return e.options=Wf({async:!0,ssr:!1},t),e}var MN=function(t){var e=t.sideCar,n=xY(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return T.createElement(i,Wf({},n))};MN.isSideCarExport=!0;function kY(t,e){return t.useMedium(e),MN}var ON=EY(),zg=function(){},bh=T.forwardRef(function(t,e){var n=T.useRef(null),i=T.useState({onScrollCapture:zg,onWheelCapture:zg,onTouchMoveCapture:zg}),r=i[0],a=i[1],c=t.forwardProps,l=t.children,d=t.className,f=t.removeScrollBar,m=t.enabled,p=t.shards,v=t.sideCar,b=t.noRelative,w=t.noIsolation,S=t.inert,R=t.allowPinchZoom,E=t.as,N=E===void 0?"div":E,M=t.gapMode,I=pY(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=v,L=TY([n,e]),z=_s(_s({},I),r);return T.createElement(T.Fragment,null,m&&T.createElement(A,{sideCar:ON,removeScrollBar:f,shards:p,noRelative:b,noIsolation:w,inert:S,setCallbacks:a,allowPinchZoom:!!R,lockRef:n,gapMode:M}),c?T.cloneElement(T.Children.only(l),_s(_s({},z),{ref:L})):T.createElement(N,_s({},z,{className:d,ref:L}),l))});bh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bh.classNames={fullWidth:Ef,zeroRight:Cf};var RY=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AY(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=RY();return e&&t.setAttribute("nonce",e),t}function _Y(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function PY(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var DY=function(){var t=0,e=null;return{add:function(n){t==0&&(e=AY())&&(_Y(e,n),PY(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},NY=function(){var t=DY();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},IN=function(){var t=NY(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},MY={left:0,top:0,right:0,gap:0},Hg=function(t){return parseInt(t||"",10)||0},OY=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Hg(n),Hg(i),Hg(r)]},IY=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return MY;var e=OY(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},UY=IN(),Xo="data-scroll-locked",LY=function(t,e,n,i){var r=t.left,a=t.top,c=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(vY,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(l,"px ").concat(i,`;
  }
  body[`).concat(Xo,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Cf,` {
    right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(Ef,` {
    margin-right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(Cf," .").concat(Cf,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Ef," .").concat(Ef,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Xo,`] {
    `).concat(yY,": ").concat(l,`px;
  }
`)},Sk=function(){var t=parseInt(document.body.getAttribute(Xo)||"0",10);return isFinite(t)?t:0},jY=function(){T.useEffect(function(){return document.body.setAttribute(Xo,(Sk()+1).toString()),function(){var t=Sk()-1;t<=0?document.body.removeAttribute(Xo):document.body.setAttribute(Xo,t.toString())}},[])},BY=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;jY();var a=T.useMemo(function(){return IY(r)},[r]);return T.createElement(UY,{styles:LY(a,!e,r,n?"":"!important")})},N0=!1;if(typeof window<"u")try{var Jd=Object.defineProperty({},"passive",{get:function(){return N0=!0,!0}});window.addEventListener("test",Jd,Jd),window.removeEventListener("test",Jd,Jd)}catch{N0=!1}var Ao=N0?{passive:!1}:!1,FY=function(t){return t.tagName==="TEXTAREA"},UN=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!FY(t)&&n[e]==="visible")},VY=function(t){return UN(t,"overflowY")},zY=function(t){return UN(t,"overflowX")},Tk=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=LN(t,i);if(r){var a=jN(t,i),c=a[1],l=a[2];if(c>l)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},HY=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},qY=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},LN=function(t,e){return t==="v"?VY(e):zY(e)},jN=function(t,e){return t==="v"?HY(e):qY(e)},GY=function(t,e){return t==="h"&&e==="rtl"?-1:1},KY=function(t,e,n,i,r){var a=GY(t,window.getComputedStyle(e).direction),c=a*i,l=n.target,d=e.contains(l),f=!1,m=c>0,p=0,v=0;do{if(!l)break;var b=jN(t,l),w=b[0],S=b[1],R=b[2],E=S-R-a*w;(w||E)&&LN(t,l)&&(p+=E,v+=w);var N=l.parentNode;l=N&&N.nodeType===Node.DOCUMENT_FRAGMENT_NODE?N.host:N}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(m&&Math.abs(p)<1||!m&&Math.abs(v)<1)&&(f=!0),f},Qd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},xk=function(t){return[t.deltaX,t.deltaY]},wk=function(t){return t&&"current"in t?t.current:t},YY=function(t,e){return t[0]===e[0]&&t[1]===e[1]},$Y=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},WY=0,_o=[];function XY(t){var e=T.useRef([]),n=T.useRef([0,0]),i=T.useRef(),r=T.useState(WY++)[0],a=T.useState(IN)[0],c=T.useRef(t);T.useEffect(function(){c.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var S=gY([t.lockRef.current],(t.shards||[]).map(wk),!0).filter(Boolean);return S.forEach(function(R){return R.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),S.forEach(function(R){return R.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var l=T.useCallback(function(S,R){if("touches"in S&&S.touches.length===2||S.type==="wheel"&&S.ctrlKey)return!c.current.allowPinchZoom;var E=Qd(S),N=n.current,M="deltaX"in S?S.deltaX:N[0]-E[0],I="deltaY"in S?S.deltaY:N[1]-E[1],A,L=S.target,z=Math.abs(M)>Math.abs(I)?"h":"v";if("touches"in S&&z==="h"&&L.type==="range")return!1;var H=Tk(z,L);if(!H)return!0;if(H?A=z:(A=z==="v"?"h":"v",H=Tk(z,L)),!H)return!1;if(!i.current&&"changedTouches"in S&&(M||I)&&(i.current=A),!A)return!0;var W=i.current||A;return KY(W,R,S,W==="h"?M:I)},[]),d=T.useCallback(function(S){var R=S;if(!(!_o.length||_o[_o.length-1]!==a)){var E="deltaY"in R?xk(R):Qd(R),N=e.current.filter(function(A){return A.name===R.type&&(A.target===R.target||R.target===A.shadowParent)&&YY(A.delta,E)})[0];if(N&&N.should){R.cancelable&&R.preventDefault();return}if(!N){var M=(c.current.shards||[]).map(wk).filter(Boolean).filter(function(A){return A.contains(R.target)}),I=M.length>0?l(R,M[0]):!c.current.noIsolation;I&&R.cancelable&&R.preventDefault()}}},[]),f=T.useCallback(function(S,R,E,N){var M={name:S,delta:R,target:E,should:N,shadowParent:ZY(E)};e.current.push(M),setTimeout(function(){e.current=e.current.filter(function(I){return I!==M})},1)},[]),m=T.useCallback(function(S){n.current=Qd(S),i.current=void 0},[]),p=T.useCallback(function(S){f(S.type,xk(S),S.target,l(S,t.lockRef.current))},[]),v=T.useCallback(function(S){f(S.type,Qd(S),S.target,l(S,t.lockRef.current))},[]);T.useEffect(function(){return _o.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",d,Ao),document.addEventListener("touchmove",d,Ao),document.addEventListener("touchstart",m,Ao),function(){_o=_o.filter(function(S){return S!==a}),document.removeEventListener("wheel",d,Ao),document.removeEventListener("touchmove",d,Ao),document.removeEventListener("touchstart",m,Ao)}},[]);var b=t.removeScrollBar,w=t.inert;return T.createElement(T.Fragment,null,w?T.createElement(a,{styles:$Y(r)}):null,b?T.createElement(BY,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function ZY(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const JY=kY(ON,XY);var BN=T.forwardRef(function(t,e){return T.createElement(bh,_s({},t,{ref:e,sideCar:JY}))});BN.classNames=bh.classNames;var QY=[" ","Enter","ArrowUp","ArrowDown"],e$=[" ","Enter"],_a="Select",[Sh,Th,t$]=vG(_a),[yc,qW]=xb(_a,[t$,TN]),xh=TN(),[n$,Gs]=yc(_a),[i$,r$]=yc(_a),FN=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:a,value:c,defaultValue:l,onValueChange:d,dir:f,name:m,autoComplete:p,disabled:v,required:b,form:w}=t,S=xh(e),[R,E]=T.useState(null),[N,M]=T.useState(null),[I,A]=T.useState(!1),L=bG(f),[z,H]=R0({prop:i,defaultProp:r??!1,onChange:a,caller:_a}),[W,re]=R0({prop:c,defaultProp:l,onChange:d,caller:_a}),se=T.useRef(null),fe=R?w||!!R.closest("form"):!0,[Ee,Ae]=T.useState(new Set),Pe=Array.from(Ee).map(K=>K.props.value).join(";");return x.jsx(iY,{...S,children:x.jsxs(n$,{required:b,scope:e,trigger:R,onTriggerChange:E,valueNode:N,onValueNodeChange:M,valueNodeHasChildren:I,onValueNodeHasChildrenChange:A,contentId:wb(),value:W,onValueChange:re,open:z,onOpenChange:H,dir:L,triggerPointerDownPosRef:se,disabled:v,children:[x.jsx(Sh.Provider,{scope:e,children:x.jsx(i$,{scope:t.__scopeSelect,onNativeOptionAdd:T.useCallback(K=>{Ae(ie=>new Set(ie).add(K))},[]),onNativeOptionRemove:T.useCallback(K=>{Ae(ie=>{const J=new Set(ie);return J.delete(K),J})},[]),children:n})}),fe?x.jsxs(cM,{"aria-hidden":!0,required:b,tabIndex:-1,name:m,autoComplete:p,value:W,onChange:K=>re(K.target.value),disabled:v,form:w,children:[W===void 0?x.jsx("option",{value:""}):null,Array.from(Ee)]},Pe):null]})})};FN.displayName=_a;var VN="SelectTrigger",zN=T.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,a=xh(n),c=Gs(VN,n),l=c.disabled||i,d=Pn(e,c.onTriggerChange),f=Th(n),m=T.useRef("touch"),[p,v,b]=uM(S=>{const R=f().filter(M=>!M.disabled),E=R.find(M=>M.value===c.value),N=dM(R,S,E);N!==void 0&&c.onValueChange(N.value)}),w=S=>{l||(c.onOpenChange(!0),b()),S&&(c.triggerPointerDownPosRef.current={x:Math.round(S.pageX),y:Math.round(S.pageY)})};return x.jsx(rY,{asChild:!0,...a,children:x.jsx(Yt.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":lM(c.value)?"":void 0,...r,ref:d,onClick:en(r.onClick,S=>{S.currentTarget.focus(),m.current!=="mouse"&&w(S)}),onPointerDown:en(r.onPointerDown,S=>{m.current=S.pointerType;const R=S.target;R.hasPointerCapture(S.pointerId)&&R.releasePointerCapture(S.pointerId),S.button===0&&S.ctrlKey===!1&&S.pointerType==="mouse"&&(w(S),S.preventDefault())}),onKeyDown:en(r.onKeyDown,S=>{const R=p.current!=="";!(S.ctrlKey||S.altKey||S.metaKey)&&S.key.length===1&&v(S.key),!(R&&S.key===" ")&&QY.includes(S.key)&&(w(),S.preventDefault())})})})});zN.displayName=VN;var HN="SelectValue",qN=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:a,placeholder:c="",...l}=t,d=Gs(HN,n),{onValueNodeHasChildrenChange:f}=d,m=a!==void 0,p=Pn(e,d.onValueNodeChange);return Xn(()=>{f(m)},[f,m]),x.jsx(Yt.span,{...l,ref:p,style:{pointerEvents:"none"},children:lM(d.value)?x.jsx(x.Fragment,{children:c}):a})});qN.displayName=HN;var s$="SelectIcon",GN=T.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return x.jsx(Yt.span,{"aria-hidden":!0,...r,ref:e,children:i||"â–¼"})});GN.displayName=s$;var a$="SelectPortal",KN=t=>x.jsx(PN,{asChild:!0,...t});KN.displayName=a$;var Pa="SelectContent",YN=T.forwardRef((t,e)=>{const n=Gs(Pa,t.__scopeSelect),[i,r]=T.useState();if(Xn(()=>{r(new DocumentFragment)},[]),!n.open){const a=i;return a?hu.createPortal(x.jsx($N,{scope:t.__scopeSelect,children:x.jsx(Sh.Slot,{scope:t.__scopeSelect,children:x.jsx("div",{children:t.children})})}),a):null}return x.jsx(WN,{...t,ref:e})});YN.displayName=Pa;var Ii=10,[$N,Ks]=yc(Pa),o$="SelectContentImpl",c$=cu("SelectContent.RemoveScroll"),WN=T.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:a,onPointerDownOutside:c,side:l,sideOffset:d,align:f,alignOffset:m,arrowPadding:p,collisionBoundary:v,collisionPadding:b,sticky:w,hideWhenDetached:S,avoidCollisions:R,...E}=t,N=Gs(Pa,n),[M,I]=T.useState(null),[A,L]=T.useState(null),z=Pn(e,be=>I(be)),[H,W]=T.useState(null),[re,se]=T.useState(null),fe=Th(n),[Ee,Ae]=T.useState(!1),Pe=T.useRef(!1);T.useEffect(()=>{if(M)return mY(M)},[M]),AG();const K=T.useCallback(be=>{const[Ce,...Ve]=fe().map(Ye=>Ye.ref.current),[qe]=Ve.slice(-1),Xe=document.activeElement;for(const Ye of be)if(Ye===Xe||(Ye?.scrollIntoView({block:"nearest"}),Ye===Ce&&A&&(A.scrollTop=0),Ye===qe&&A&&(A.scrollTop=A.scrollHeight),Ye?.focus(),document.activeElement!==Xe))return},[fe,A]),ie=T.useCallback(()=>K([H,M]),[K,H,M]);T.useEffect(()=>{Ee&&ie()},[Ee,ie]);const{onOpenChange:J,triggerPointerDownPosRef:_e}=N;T.useEffect(()=>{if(M){let be={x:0,y:0};const Ce=qe=>{be={x:Math.abs(Math.round(qe.pageX)-(_e.current?.x??0)),y:Math.abs(Math.round(qe.pageY)-(_e.current?.y??0))}},Ve=qe=>{be.x<=10&&be.y<=10?qe.preventDefault():M.contains(qe.target)||J(!1),document.removeEventListener("pointermove",Ce),_e.current=null};return _e.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",Ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",Ve,{capture:!0})}}},[M,J,_e]),T.useEffect(()=>{const be=()=>J(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[J]);const[F,Z]=uM(be=>{const Ce=fe().filter(Xe=>!Xe.disabled),Ve=Ce.find(Xe=>Xe.ref.current===document.activeElement),qe=dM(Ce,be,Ve);qe&&setTimeout(()=>qe.ref.current.focus())}),de=T.useCallback((be,Ce,Ve)=>{const qe=!Pe.current&&!Ve;(N.value!==void 0&&N.value===Ce||qe)&&(W(be),qe&&(Pe.current=!0))},[N.value]),le=T.useCallback(()=>M?.focus(),[M]),Te=T.useCallback((be,Ce,Ve)=>{const qe=!Pe.current&&!Ve;(N.value!==void 0&&N.value===Ce||qe)&&se(be)},[N.value]),Me=i==="popper"?M0:XN,De=Me===M0?{side:l,sideOffset:d,align:f,alignOffset:m,arrowPadding:p,collisionBoundary:v,collisionPadding:b,sticky:w,hideWhenDetached:S,avoidCollisions:R}:{};return x.jsx($N,{scope:n,content:M,viewport:A,onViewportChange:L,itemRefCallback:de,selectedItem:H,onItemLeave:le,itemTextRefCallback:Te,focusSelectedItem:ie,selectedItemText:re,position:i,isPositioned:Ee,searchRef:F,children:x.jsx(BN,{as:c$,allowPinchZoom:!0,children:x.jsx(aN,{asChild:!0,trapped:N.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:en(r,be=>{N.trigger?.focus({preventScroll:!0}),be.preventDefault()}),children:x.jsx(rN,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:x.jsx(Me,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:be=>be.preventDefault(),...E,...De,onPlaced:()=>Ae(!0),ref:z,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:en(E.onKeyDown,be=>{const Ce=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!Ce&&be.key.length===1&&Z(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let qe=fe().filter(Xe=>!Xe.disabled).map(Xe=>Xe.ref.current);if(["ArrowUp","End"].includes(be.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Xe=be.target,Ye=qe.indexOf(Xe);qe=qe.slice(Ye+1)}setTimeout(()=>K(qe)),be.preventDefault()}})})})})})})});WN.displayName=o$;var l$="SelectItemAlignedPosition",XN=T.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,a=Gs(Pa,n),c=Ks(Pa,n),[l,d]=T.useState(null),[f,m]=T.useState(null),p=Pn(e,z=>m(z)),v=Th(n),b=T.useRef(!1),w=T.useRef(!0),{viewport:S,selectedItem:R,selectedItemText:E,focusSelectedItem:N}=c,M=T.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&f&&S&&R&&E){const z=a.trigger.getBoundingClientRect(),H=f.getBoundingClientRect(),W=a.valueNode.getBoundingClientRect(),re=E.getBoundingClientRect();if(a.dir!=="rtl"){const Xe=re.left-H.left,Ye=W.left-Xe,kt=z.left-Ye,jt=z.width+kt,di=Math.max(jt,H.width),In=window.innerWidth-Ii,_t=tk(Ye,[Ii,Math.max(Ii,In-di)]);l.style.minWidth=jt+"px",l.style.left=_t+"px"}else{const Xe=H.right-re.right,Ye=window.innerWidth-W.right-Xe,kt=window.innerWidth-z.right-Ye,jt=z.width+kt,di=Math.max(jt,H.width),In=window.innerWidth-Ii,_t=tk(Ye,[Ii,Math.max(Ii,In-di)]);l.style.minWidth=jt+"px",l.style.right=_t+"px"}const se=v(),fe=window.innerHeight-Ii*2,Ee=S.scrollHeight,Ae=window.getComputedStyle(f),Pe=parseInt(Ae.borderTopWidth,10),K=parseInt(Ae.paddingTop,10),ie=parseInt(Ae.borderBottomWidth,10),J=parseInt(Ae.paddingBottom,10),_e=Pe+K+Ee+J+ie,F=Math.min(R.offsetHeight*5,_e),Z=window.getComputedStyle(S),de=parseInt(Z.paddingTop,10),le=parseInt(Z.paddingBottom,10),Te=z.top+z.height/2-Ii,Me=fe-Te,De=R.offsetHeight/2,be=R.offsetTop+De,Ce=Pe+K+be,Ve=_e-Ce;if(Ce<=Te){const Xe=se.length>0&&R===se[se.length-1].ref.current;l.style.bottom="0px";const Ye=f.clientHeight-S.offsetTop-S.offsetHeight,kt=Math.max(Me,De+(Xe?le:0)+Ye+ie),jt=Ce+kt;l.style.height=jt+"px"}else{const Xe=se.length>0&&R===se[0].ref.current;l.style.top="0px";const kt=Math.max(Te,Pe+S.offsetTop+(Xe?de:0)+De)+Ve;l.style.height=kt+"px",S.scrollTop=Ce-Te+S.offsetTop}l.style.margin=`${Ii}px 0`,l.style.minHeight=F+"px",l.style.maxHeight=fe+"px",i?.(),requestAnimationFrame(()=>b.current=!0)}},[v,a.trigger,a.valueNode,l,f,S,R,E,a.dir,i]);Xn(()=>M(),[M]);const[I,A]=T.useState();Xn(()=>{f&&A(window.getComputedStyle(f).zIndex)},[f]);const L=T.useCallback(z=>{z&&w.current===!0&&(M(),N?.(),w.current=!1)},[M,N]);return x.jsx(d$,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:b,onScrollButtonChange:L,children:x.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:x.jsx(Yt.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});XN.displayName=l$;var u$="SelectPopperPosition",M0=T.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Ii,...a}=t,c=xh(n);return x.jsx(sY,{...c,...a,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});M0.displayName=u$;var[d$,Mb]=yc(Pa,{}),O0="SelectViewport",ZN=T.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,a=Ks(O0,n),c=Mb(O0,n),l=Pn(e,a.onViewportChange),d=T.useRef(0);return x.jsxs(x.Fragment,{children:[x.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),x.jsx(Sh.Slot,{scope:n,children:x.jsx(Yt.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:en(r.onScroll,f=>{const m=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=c;if(v?.current&&p){const b=Math.abs(d.current-m.scrollTop);if(b>0){const w=window.innerHeight-Ii*2,S=parseFloat(p.style.minHeight),R=parseFloat(p.style.height),E=Math.max(S,R);if(E<w){const N=E+b,M=Math.min(w,N),I=N-M;p.style.height=M+"px",p.style.bottom==="0px"&&(m.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});ZN.displayName=O0;var JN="SelectGroup",[f$,h$]=yc(JN),m$=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=wb();return x.jsx(f$,{scope:n,id:r,children:x.jsx(Yt.div,{role:"group","aria-labelledby":r,...i,ref:e})})});m$.displayName=JN;var QN="SelectLabel",p$=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=h$(QN,n);return x.jsx(Yt.div,{id:r.id,...i,ref:e})});p$.displayName=QN;var Xf="SelectItem",[g$,eM]=yc(Xf),tM=T.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:a,...c}=t,l=Gs(Xf,n),d=Ks(Xf,n),f=l.value===i,[m,p]=T.useState(a??""),[v,b]=T.useState(!1),w=Pn(e,N=>d.itemRefCallback?.(N,i,r)),S=wb(),R=T.useRef("touch"),E=()=>{r||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return x.jsx(g$,{scope:n,value:i,disabled:r,textId:S,isSelected:f,onItemTextChange:T.useCallback(N=>{p(M=>M||(N?.textContent??"").trim())},[]),children:x.jsx(Sh.ItemSlot,{scope:n,value:i,disabled:r,textValue:m,children:x.jsx(Yt.div,{role:"option","aria-labelledby":S,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:w,onFocus:en(c.onFocus,()=>b(!0)),onBlur:en(c.onBlur,()=>b(!1)),onClick:en(c.onClick,()=>{R.current!=="mouse"&&E()}),onPointerUp:en(c.onPointerUp,()=>{R.current==="mouse"&&E()}),onPointerDown:en(c.onPointerDown,N=>{R.current=N.pointerType}),onPointerMove:en(c.onPointerMove,N=>{R.current=N.pointerType,r?d.onItemLeave?.():R.current==="mouse"&&N.currentTarget.focus({preventScroll:!0})}),onPointerLeave:en(c.onPointerLeave,N=>{N.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:en(c.onKeyDown,N=>{d.searchRef?.current!==""&&N.key===" "||(e$.includes(N.key)&&E(),N.key===" "&&N.preventDefault())})})})})});tM.displayName=Xf;var Ll="SelectItemText",nM=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...a}=t,c=Gs(Ll,n),l=Ks(Ll,n),d=eM(Ll,n),f=r$(Ll,n),[m,p]=T.useState(null),v=Pn(e,E=>p(E),d.onItemTextChange,E=>l.itemTextRefCallback?.(E,d.value,d.disabled)),b=m?.textContent,w=T.useMemo(()=>x.jsx("option",{value:d.value,disabled:d.disabled,children:b},d.value),[d.disabled,d.value,b]),{onNativeOptionAdd:S,onNativeOptionRemove:R}=f;return Xn(()=>(S(w),()=>R(w)),[S,R,w]),x.jsxs(x.Fragment,{children:[x.jsx(Yt.span,{id:d.textId,...a,ref:v}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?hu.createPortal(a.children,c.valueNode):null]})});nM.displayName=Ll;var iM="SelectItemIndicator",rM=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return eM(iM,n).isSelected?x.jsx(Yt.span,{"aria-hidden":!0,...i,ref:e}):null});rM.displayName=iM;var I0="SelectScrollUpButton",sM=T.forwardRef((t,e)=>{const n=Ks(I0,t.__scopeSelect),i=Mb(I0,t.__scopeSelect),[r,a]=T.useState(!1),c=Pn(e,i.onScrollButtonChange);return Xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollTop>0;a(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?x.jsx(oM,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});sM.displayName=I0;var U0="SelectScrollDownButton",aM=T.forwardRef((t,e)=>{const n=Ks(U0,t.__scopeSelect),i=Mb(U0,t.__scopeSelect),[r,a]=T.useState(!1),c=Pn(e,i.onScrollButtonChange);return Xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;a(m)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?x.jsx(oM,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});aM.displayName=U0;var oM=T.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,a=Ks("SelectScrollButton",n),c=T.useRef(null),l=Th(n),d=T.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return T.useEffect(()=>()=>d(),[d]),Xn(()=>{l().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),x.jsx(Yt.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:en(r.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:en(r.onPointerMove,()=>{a.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:en(r.onPointerLeave,()=>{d()})})}),v$="SelectSeparator",y$=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return x.jsx(Yt.div,{"aria-hidden":!0,...i,ref:e})});y$.displayName=v$;var L0="SelectArrow",b$=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=xh(n),a=Gs(L0,n),c=Ks(L0,n);return a.open&&c.position==="popper"?x.jsx(aY,{...r,...i,ref:e}):null});b$.displayName=L0;var S$="SelectBubbleInput",cM=T.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=T.useRef(null),a=Pn(i,r),c=cY(e);return T.useEffect(()=>{const l=r.current;if(!l)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==e&&m){const p=new Event("change",{bubbles:!0});m.call(l,e),l.dispatchEvent(p)}},[c,e]),x.jsx(Yt.select,{...n,style:{...DN,...n.style},ref:a,defaultValue:e})});cM.displayName=S$;function lM(t){return t===""||t===void 0}function uM(t){const e=Ra(t),n=T.useRef(""),i=T.useRef(0),r=T.useCallback(c=>{const l=n.current+c;e(l),function d(f){n.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),a=T.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,a]}function dM(t,e,n){const r=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let c=T$(t,Math.max(a,0));r.length===1&&(c=c.filter(f=>f!==n));const d=c.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function T$(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var x$=FN,w$=zN,C$=qN,E$=GN,k$=KN,R$=YN,A$=ZN,_$=tM,P$=nM,D$=rM,N$=sM,M$=aM;function O$({...t}){return x.jsx(x$,{"data-slot":"select",...t})}function I$({...t}){return x.jsx(C$,{"data-slot":"select-value",...t})}function U$({className:t,size:e="default",children:n,...i}){return x.jsxs(w$,{"data-slot":"select-trigger","data-size":e,className:ft(["flex w-fit cursor-pointer items-center justify-between gap-2","rounded-full px-3 py-2 text-sm whitespace-nowrap","bg-button transition-[color,border,background-color]","disabled:cursor-not-allowed disabled:opacity-50","hover:bg-muted focus:bg-muted hover:text-muted-foreground focus:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 outline-none focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","data-[placeholder]:text-muted-foreground","data-[size=default]:h-9 data-[size=sm]:h-8","*:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2","[&:not([class*='text-'])_svg:not([class*='text-'])]:text-muted-foreground","[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"],t),...i,children:[n,x.jsx(E$,{asChild:!0,children:x.jsx(Tb,{weight:"bold",className:"size-4 transition-colors"})})]})}function L$({className:t,children:e,position:n="popper",...i}){return x.jsx(k$,{children:x.jsxs(R$,{"data-slot":"select-content",className:ft(["bg-popover text-popover-foreground relative z-50 overflow-x-hidden overflow-y-auto rounded-md border drop-shadow-xl/5","max-h-(--radix-select-content-available-height) min-w-[8rem]","origin-(--radix-select-content-transform-origin)","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95","data-[side=top]:slide-in-from-bottom-2","data-[side=right]:slide-in-from-left-2","data-[side=bottom]:slide-in-from-top-2","data-[side=left]:slide-in-from-right-2"],n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[x.jsx(B$,{}),x.jsx(A$,{className:ft("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),x.jsx(F$,{})]})})}function j$({className:t,children:e,...n}){return x.jsxs(_$,{"data-slot":"select-item",className:ft(["relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none","cursor-pointer disabled:cursor-not-allowed","focus:bg-accent focus:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50","*:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2","[&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"],t),...n,children:[x.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:x.jsx(D$,{children:x.jsx(nN,{className:"size-4",weight:"bold"})})}),x.jsx(P$,{children:e})]})}function B$({className:t,...e}){return x.jsx(N$,{"data-slot":"select-scroll-up-button",className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(tN,{className:"size-4",weight:"bold"})})}function F$({className:t,...e}){return x.jsx(M$,{"data-slot":"select-scroll-down-button",className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:x.jsx(Tb,{className:"size-4",weight:"bold"})})}const V$=Sb(["w-full rounded-full px-3 py-2 text-sm cursor-pointer","disabled:not-allowed","hover:bg-button-hover focus:bg-button-hover","data-[state=open]:bg-button-hover data-[state=open]:text-muted-foreground","peer-data-[state=off]/track:bg-button-primary hover:peer-data-[state=off]/track:bg-destructive-hover","peer-data-[state=off]/track:data-[state=open]:bg-destructive-hover"],{variants:{size:{default:"w-[180px]",sm:"w-auto"}},defaultVariants:{size:"default"}});function Ck({kind:t,track:e,requestPermissions:n,onMediaDeviceError:i,onActiveDeviceChange:r,onDeviceListChange:a,...c}){const l=c.size||"default",[d,f]=T.useState(!1),m=T.useRef(null),p=mh(),{devices:v,activeDeviceId:b,setActiveMediaDevice:w}=mH({kind:t,room:p,track:e,requestPermissions:n,onError:i});T.useEffect(()=>{if(v.length>0&&!d){let E=v.find(N=>N.label.toLowerCase().includes("default"));E||(E=v.find(N=>{const M=N.label.toLowerCase();return M.includes("airpod")||M.includes("headphone")||M.includes("bluetooth")||M.includes("external")||M.includes("wireless")})),E&&E.deviceId!==b?w(E.deviceId):b||w(v[0].deviceId)}},[v,b,w,d]),T.useEffect(()=>{if(v.length>0&&!v.some(N=>N.deviceId===b)){let N=v.find(M=>M.label.toLowerCase().includes("default"));N||(N=v.find(M=>{const I=M.label.toLowerCase();return I.includes("airpod")||I.includes("headphone")||I.includes("bluetooth")||I.includes("external")||I.includes("wireless")})),w(N?N.deviceId:v[0].deviceId),f(!1)}},[v,b,w]);const S=T.useCallback(E=>{w(E),f(!0),r?.(E)},[w,r]),R=T.useCallback(E=>{E||setTimeout(()=>{m.current?.blur()},0)},[]);return T.useEffect(()=>{a?.(v)},[v,a]),x.jsxs(O$,{value:b||"",onValueChange:S,onOpenChange:R,children:[x.jsx(U$,{ref:m,className:ft(V$({size:l}),c.className),children:l!=="sm"&&x.jsx(I$,{className:"font-mono text-sm",placeholder:`Select a ${t}`})}),x.jsx(L$,{children:v.map(E=>x.jsx(j$,{value:E.deviceId,className:"font-mono text-xs",children:E.label},E.deviceId))})]})}function z$(t,e,n=!1){if(n)return d4;switch(t){case te.Source.Microphone:return e?C4:x4;case te.Source.Camera:return e?q4:z4;case te.Source.ScreenShare:return k4;default:return T.Fragment}}function qg({source:t,pressed:e,pending:n,className:i,...r}){const a=z$(t,e??!1,n);return x.jsxs(eN,{pressed:e,"aria-label":`Toggle ${t}`,className:ft(i),...r,children:[x.jsx(a,{className:ft("h-4 w-4",n&&"animate-spin")}),r.children]})}const H$=t=>{switch(t){case te.Source.Camera:return 1;case te.Source.Microphone:return 2;case te.Source.ScreenShare:return 3;default:return 0}};function q$(){const t=hH(),e=n=>!!t?.canPublish&&(t.canPublishSources.length===0||t.canPublishSources.includes(H$(n)));return{camera:e(te.Source.Camera),microphone:e(te.Source.Microphone),screenShare:e(te.Source.ScreenShare),data:t?.canPublishData??!1}}function G$(t={}){const{controls:e,saveUserChoices:n=!0}=t,i={leave:!0,...e},{microphoneTrack:r,localParticipant:a}=ND(),c=q$(),l=Ma(),d=Dg({source:te.Source.Microphone,onDeviceError:A=>t.onDeviceError?.({source:te.Source.Microphone,error:A})}),f=Dg({source:te.Source.Camera,onDeviceError:A=>t.onDeviceError?.({source:te.Source.Camera,error:A})}),m=Dg({source:te.Source.ScreenShare,onDeviceError:A=>t.onDeviceError?.({source:te.Source.ScreenShare,error:A})}),p=T.useMemo(()=>({participant:a,source:te.Source.Microphone,publication:r}),[a,r]);i.microphone??=c.microphone,i.screenShare??=c.screenShare,i.camera??=c.camera,i.chat??=c.data;const{saveAudioInputEnabled:v,saveVideoInputEnabled:b,saveVideoInputDeviceId:w}=SH({preventSave:!n}),S=T.useCallback(async()=>{l&&await l.disconnect()},[l]),R=T.useCallback(()=>{},[]),E=T.useCallback(A=>{w(A??"default")},[w]),N=T.useCallback(async A=>{m.enabled&&m.toggle(!1),await f.toggle(A),b(!f.enabled)},[f,m,b]),M=T.useCallback(async A=>{await d.toggle(A),v(!d.enabled)},[d,v]),I=T.useCallback(async A=>{f.enabled&&f.toggle(!1),await m.toggle(A)},[m,f]);return{micTrackRef:p,visibleControls:i,cameraToggle:{...f,toggle:N},microphoneToggle:{...d,toggle:M},screenShareToggle:{...m,toggle:I},handleDisconnect:S,handleAudioDeviceChange:R,handleVideoDeviceChange:E}}function K$({controls:t,saveUserChoices:e=!0,capabilities:n,className:i,chatOpen:r,onSendMessage:a,onChatOpenChange:c,onDisconnect:l,onUserDisconnect:d,onDeviceError:f,...m}){const p=vb(),[v,b]=T.useState(!1),w=p.some(Ae=>Ae.isAgent),S=!r||!w||v,[R,E]=T.useState(!1),{micTrackRef:N,visibleControls:M,cameraToggle:I,microphoneToggle:A,screenShareToggle:L,handleAudioDeviceChange:z,handleVideoDeviceChange:H,handleDisconnect:W}=G$({controls:t,saveUserChoices:e}),re=async Ae=>{b(!0);try{await a?.(Ae)}finally{b(!1)}},se=async()=>{E(!0),d?.(),await W(),E(!1),l?.()},fe=T.useCallback(Ae=>{f?.({source:te.Source.Microphone,error:Ae})},[f]),Ee=T.useCallback(Ae=>{f?.({source:te.Source.Camera,error:Ae})},[f]);return x.jsxs("div",{"aria-label":"Voice assistant controls",className:ft("bg-background border-bg2 dark:border-separator1 flex flex-col rounded-[31px] border p-3 drop-shadow-md/3",i),...m,children:[n.supportsChatInput&&x.jsxs("div",{inert:!r,className:ft("overflow-hidden transition-[height] duration-300 ease-out",r?"h-[57px]":"h-0"),children:[x.jsx("div",{className:"flex h-8 w-full",children:x.jsx(sG,{onSend:re,disabled:S,className:"w-full"})}),x.jsx("hr",{className:"border-bg2 my-3"})]}),x.jsxs("div",{className:"flex flex-row justify-between gap-1",children:[x.jsxs("div",{className:"flex gap-1",children:[M.microphone&&x.jsxs("div",{className:"flex items-center gap-0",children:[x.jsx(qg,{variant:"primary",source:te.Source.Microphone,pressed:A.enabled,disabled:A.pending,onPressedChange:A.toggle,className:"peer/track group/track relative w-auto pr-3 pl-3 md:rounded-r-none md:border-r-0 md:pr-2",children:x.jsx(UD,{barCount:3,trackRef:N,options:{minHeight:5},className:"flex h-full w-auto items-center justify-center gap-0.5",children:x.jsx("span",{className:ft(["h-full w-0.5 origin-center rounded-2xl","group-data-[state=on]/track:bg-fg1 group-data-[state=off]/track:bg-destructive-foreground","data-lk-muted:bg-muted"])})})}),x.jsx("hr",{className:"bg-separator1 peer-data-[state=off]/track:bg-separatorSerious relative z-10 -mr-px hidden h-4 w-px md:block"}),x.jsx(Ck,{size:"sm",kind:"audioinput",onMediaDeviceError:fe,onActiveDeviceChange:z,className:ft(["pl-2","peer-data-[state=off]/track:text-destructive-foreground","hover:text-fg1 focus:text-fg1","hover:peer-data-[state=off]/track:text-destructive-foreground focus:peer-data-[state=off]/track:text-destructive-foreground","hidden rounded-l-none md:block"])})]}),n.supportsVideoInput&&M.camera&&x.jsxs("div",{className:"flex items-center gap-0",children:[x.jsx(qg,{variant:"primary",source:te.Source.Camera,pressed:I.enabled,pending:I.pending,disabled:I.pending,onPressedChange:I.toggle,className:"peer/track relative w-auto rounded-r-none pr-3 pl-3 disabled:opacity-100 md:border-r-0 md:pr-2"}),x.jsx("hr",{className:"bg-separator1 peer-data-[state=off]/track:bg-separatorSerious relative z-10 -mr-px hidden h-4 w-px md:block"}),x.jsx(Ck,{size:"sm",kind:"videoinput",onMediaDeviceError:Ee,onActiveDeviceChange:H,className:ft(["pl-2","peer-data-[state=off]/track:text-destructive-foreground","hover:text-fg1 focus:text-fg1","hover:peer-data-[state=off]/track:text-destructive-foreground focus:peer-data-[state=off]/track:text-destructive-foreground","rounded-l-none"])})]}),n.supportsScreenShare&&M.screenShare&&x.jsx("div",{className:"flex items-center gap-0",children:x.jsx(qg,{variant:"secondary",source:te.Source.ScreenShare,pressed:L.enabled,disabled:L.pending,onPressedChange:L.toggle,className:"relative w-auto"})}),M.chat&&x.jsx(eN,{variant:"secondary","aria-label":"Toggle chat",pressed:r,onPressedChange:c,disabled:!w,className:"aspect-square h-full",children:x.jsx(CR,{className:"h-4 w-4"})})]}),M.leave&&x.jsxs(ZD,{variant:"destructive",onClick:se,disabled:R,className:"font-mono",children:[x.jsx(A4,{className:"h-4 w-4"}),x.jsx("span",{className:"hidden md:inline",children:"END CALL"}),x.jsx("span",{className:"inline md:hidden",children:"END"})]})]})]})}function Y$(t,e){const n=e?.(t.message)||t.message,i=new Date(t.timestamp),r="en-US",a=t.from?.name||t.from?.identity||"Unknown";return{message:n,hasBeenEdited:!1,time:i,locale:r,name:a}}const $$=({entry:t,messageFormatter:e,hideName:n,hideTimestamp:i,className:r,...a})=>{const{message:c,hasBeenEdited:l,time:d,locale:f,name:m}=Y$(t,e),p=t.from?.isLocal??!1,v=p?"remote":"local";return x.jsxs("li",{"data-lk-message-origin":v,className:ft("group flex flex-col gap-0.5",r),...a,children:[(!i||!n||l)&&x.jsxs("span",{className:"text-muted-foreground flex text-sm",children:[!n&&x.jsx("strong",{className:"mt-2",children:m}),!i&&x.jsxs("span",{className:ft("align-self-end font-mono text-xs opacity-0 transition-opacity ease-linear group-hover:opacity-100",p?"ml-auto":"mr-auto"),children:[l&&"*",d.toLocaleTimeString(f,{timeStyle:"short"})]})]}),x.jsx("span",{className:ft("max-w-4/5 rounded-[10px] p-2",p?"bg-muted ml-auto":"mr-auto"),children:c})]})};function W$(t){T.useEffect(()=>{function e(){const{scrollingElement:n}=document;n&&(n.scrollTop=n.scrollHeight)}if(t.current){const n=new ResizeObserver(e);return n.observe(t.current),e(),()=>n.disconnect()}},[t])}const fM=({className:t,children:e,...n})=>{const i=T.useRef(null);return W$(i),x.jsx("div",{ref:i,className:ft("flex flex-col justify-end",t),...n,children:e})};fM.displayName="ChatMessageView";const X$={listening:"Listening",thinking:"Thinking",speaking:"Speaking",connecting:"Joining",initializing:"Joining",disconnected:"Disconnected"},Z$=()=>x.jsxs("span",{className:"inline-flex",children:[x.jsx("span",{className:"animate-pulse",style:{animationDelay:"0ms",animationDuration:"1.4s"},children:"."}),x.jsx("span",{className:"animate-pulse",style:{animationDelay:"200ms",animationDuration:"1.4s"},children:"."}),x.jsx("span",{className:"animate-pulse",style:{animationDelay:"400ms",animationDuration:"1.4s"},children:"."})]}),hM=T.forwardRef(({state:t,audioTrack:e,className:n,...i},r)=>{const a=X$[t];return x.jsxs("div",{ref:r,className:ft("flex flex-col items-center gap-3",n),...i,children:[x.jsx(UD,{barCount:5,state:t,options:{minHeight:5},trackRef:e,className:ft("flex aspect-video w-40 items-center justify-center gap-1"),children:x.jsx("span",{className:ft(["bg-muted min-h-4 w-4 rounded-full","origin-center transition-colors duration-250 ease-linear","data-[lk-highlighted=true]:bg-foreground data-[lk-muted=true]:bg-muted"])})}),a&&x.jsxs("p",{className:"text-[10px] text-gray-400 font-light pointer-events-none",children:[a,t!=="disconnected"&&x.jsx(Z$,{})]})]})});hM.displayName="AgentTile";const mM=T.forwardRef(({videoTrack:t,className:e,...n},i)=>!t||t.publication.isMuted?null:x.jsxs("div",{ref:i,className:ft("relative overflow-hidden rounded-lg bg-gray-900",e),...n,children:[x.jsx(ID,{trackRef:t,className:"h-full w-full object-cover"}),x.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"AI Agent"})]}));mM.displayName="AvatarTile";const pM=T.forwardRef(({trackRef:t,className:e,...n},i)=>!t||t.publication.isMuted?null:x.jsxs("div",{ref:i,className:ft("relative overflow-hidden rounded-lg bg-gray-900",e),...n,children:[x.jsx(ID,{trackRef:t,className:"h-full w-full object-cover"}),t.source===te.Source.ScreenShare&&x.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"Screen Share"}),t.source===te.Source.Camera&&x.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"Camera"})]}));pM.displayName="VideoTile";function J$(t){const{localParticipant:e}=ND(),n=e.getTrackPublication(t);return T.useMemo(()=>n?{source:t,participant:e,publication:n}:void 0,[t,n,e])}const Ek=pt.create(pM),Q$=pt.create(hM),eW=pt.create(mM),Or={initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{type:"spring",stiffness:675,damping:75,mass:1}},Po={grid:["h-full w-full","grid gap-x-2 place-content-center","grid-cols-[1fr_1fr] grid-rows-[90px_1fr_90px]"],agentChatOpenWithSecondTile:["col-start-1 row-start-1","self-center justify-self-end"],agentChatOpenWithoutSecondTile:["col-start-1 row-start-1","col-span-2","place-content-center"],agentChatClosed:["col-start-1 row-start-1","col-span-2 row-span-3","place-content-center"],secondTileChatOpen:["col-start-2 row-start-1","self-center justify-self-start"],secondTileChatClosed:["col-start-2 row-start-3","place-content-end"]};function tW({chatOpen:t}){const{state:e,audioTrack:n,videoTrack:i}=yb(),[r]=MD([te.Source.ScreenShare]),a=J$(te.Source.Camera),c=a&&!a.publication.isMuted,l=r&&!r.publication.isMuted,d=c||l,f={...Or.transition,delay:t?0:.15},m={...Or.animate,scale:t?1:3,transition:f},p={...Or.animate,transition:f},v=f,b=f,w=i!==void 0;return x.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-8 bottom-32 z-50 md:top-12 md:bottom-40",children:x.jsx("div",{className:"relative mx-auto h-full max-w-2xl px-4 md:px-0",children:x.jsxs("div",{className:ft(Po.grid),children:[x.jsx("div",{className:ft(["grid",!t&&Po.agentChatClosed,t&&d&&Po.agentChatOpenWithSecondTile,t&&!d&&Po.agentChatOpenWithoutSecondTile]),children:x.jsxs(o0,{mode:"popLayout",children:[!w&&x.jsx(Q$,{layoutId:"agent",...Or,animate:m,transition:v,state:e,audioTrack:n,className:ft(t?"h-[90px]":"h-auto w-full")},"agent"),w&&x.jsx(eW,{layoutId:"avatar",...Or,animate:p,transition:b,videoTrack:i,className:ft(t?"h-[90px] [&>video]:h-[90px] [&>video]:w-auto":"h-auto w-full")},"avatar")]})}),x.jsx("div",{className:ft(["grid",t&&Po.secondTileChatOpen,!t&&Po.secondTileChatClosed]),children:x.jsxs(o0,{children:[a&&c&&x.jsx(Ek,{layout:"position",layoutId:"camera",...Or,trackRef:a,transition:{...Or.transition,delay:t?0:.15},className:"h-[90px]"},"camera"),l&&x.jsx(Ek,{layout:"position",layoutId:"screen",...Or,trackRef:r,transition:{...Or.transition,delay:t?0:.15},className:"h-[90px]"},"screen")]})})]})})})}function nW(){const t=_H(),e=bH(),n=Ma();return{messages:T.useMemo(()=>[...t.map(a=>iG(a,n)),...e.chatMessages].sort((a,c)=>a.timestamp-c.timestamp),[t,e.chatMessages,n]),send:e.send}}function iW(){const t=pH();T.useEffect(()=>{},[t])}function rW(t){return t=="listening"||t=="thinking"||t=="speaking"}const sW=({appConfig:t,disabled:e,sessionStarted:n,onUserDisconnect:i,ref:r})=>{const{state:a}=yb(),[c,l]=T.useState(!0),{messages:d,send:f}=nW(),m=Ma();iW();const p=t.logo,v=t.logoHref??"/",b=t.logoAlt??`${t.companyName} logo`,w=t.logoTarget??"_blank",S=w==="_self"?void 0:"noopener noreferrer";async function R(A){await f(A)}T.useEffect(()=>{if(n){const A=setTimeout(()=>{if(!rW(a)){const L=a==="connecting"?"Agent did not join the room. ":"Agent connected but did not complete initializing. ";w0({title:"Session ended",description:x.jsxs("p",{className:"w-full",children:[L,x.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.livekit.io/agents/start/voice-ai/",className:"whitespace-nowrap underline",children:"See quickstart guide"}),"."]})}),m.disconnect()}},1e4);return()=>clearTimeout(A)}},[a,n,m]);const{supportsChatInput:E,supportsVideoInput:N,supportsScreenShare:M}=t,I={supportsChatInput:E,supportsVideoInput:N,supportsScreenShare:M};return x.jsxs("main",{ref:r,inert:e,className:ft(!c&&"max-h-svh overflow-hidden"),children:[p&&x.jsx("a",{href:v,target:w,rel:S,className:"absolute top-4 left-4 z-50",children:x.jsx("img",{src:p,alt:b,className:"h-8"})}),x.jsx(fM,{className:ft("mx-auto min-h-svh w-full max-w-2xl px-3 pt-32 pb-40 transition-[opacity,translate] duration-300 ease-out md:px-0 md:pt-36 md:pb-48",c?"translate-y-0 opacity-100 delay-200":"translate-y-20 opacity-0"),children:x.jsx("div",{className:"space-y-3 whitespace-pre-wrap",children:x.jsx(o0,{children:d.map(A=>x.jsx(pt.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:1,height:"auto",translateY:.001},transition:{duration:.5,ease:"easeOut"},children:x.jsx($$,{hideName:!0,entry:A},A.id)},A.id))})})}),x.jsx("div",{className:"bg-background fixed top-0 right-0 left-0 h-32 md:h-36",children:x.jsx("div",{className:"from-background absolute bottom-0 left-0 h-12 w-full translate-y-full bg-gradient-to-b to-transparent"})}),x.jsx(tW,{chatOpen:c}),x.jsx("div",{className:"bg-background fixed right-0 bottom-0 left-0 z-50 px-3 pt-2 pb-3 md:px-12 md:pb-12",children:x.jsxs(pt.div,{initial:{opacity:0,translateY:"100%"},animate:{opacity:n?1:0,translateY:n?"0%":"100%"},transition:{duration:.3,delay:n?.5:0,ease:"easeOut"},children:[x.jsx("div",{className:"relative z-10 mx-auto w-full max-w-2xl",children:x.jsx(K$,{capabilities:I,chatOpen:c,onChatOpenChange:l,onSendMessage:R,onUserDisconnect:i})}),x.jsx("div",{className:"from-background border-background absolute top-0 left-0 h-12 w-full -translate-y-full bg-gradient-to-t to-transparent"})]},"control-bar")})]})};function aW(t){return t==="listening"||t==="thinking"||t==="speaking"}function oW(){const{state:t}=yb(),e=T.useRef(null),[n,i]=T.useState(0),[r,a]=T.useState(!1);T.useEffect(()=>{const l=e.current!==null,d=aW(t);!l&&d&&(e.current=Date.now(),a(!0),console.log("Session started - agent became available"))},[t]),T.useEffect(()=>{if(e.current===null)return;const l=setInterval(()=>{const d=(Date.now()-e.current)/1e3;i(d)},1e3);return()=>clearInterval(l)},[]);const c=()=>e.current===null?0:(Date.now()-e.current)/1e3;return{sessionDuration:n,agentConnected:r,getSessionDuration:c,isSessionLongEnough:()=>c()>=1}}const cW=({sessionState:t,onAgentConnected:e,onAgentTimeout:n,children:i})=>{const{agentConnected:r,getSessionDuration:a,isSessionLongEnough:c}=oW();return T.useEffect(()=>{r&&t==="waiting"&&e()},[r,t,e]),T.useEffect(()=>{if(t!=="waiting")return;const l=setTimeout(()=>{r||n()},1e4);return()=>clearTimeout(l)},[t,r,n]),T.useEffect(()=>(window.__sessionInfo={getSessionDuration:a,isSessionLongEnough:c,agentConnected:r},()=>{delete window.__sessionInfo}),[a,c,r]),x.jsx(x.Fragment,{children:i})},lW=({onGoHome:t,autoRedirectDelay:e=5})=>{const n=Fs(),[i,r]=T.useState(e),a=T.useCallback(()=>{t?t():n("/")},[t,n]);return T.useEffect(()=>{const c=setInterval(()=>{r(l=>l<=1?0:l-1)},1e3);return()=>clearInterval(c)},[]),T.useEffect(()=>{i===0&&a()},[i,a]),x.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-slate-900 flex items-center justify-center px-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900/50"}),x.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((c,l)=>x.jsx(pt.div,{className:"absolute w-1 h-1 bg-neutral-300/40 dark:bg-slate-600/40 rounded-full",animate:{x:[0,100,-50,0],y:[0,-100,50,0],opacity:[.4,.8,.2,.4]},transition:{duration:20+l*2,repeat:1/0,ease:"linear"},style:{left:`${20+l*15}%`,top:`${30+l*10}%`}},l))}),x.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto text-center",children:[x.jsx(pt.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"backOut"},className:"flex items-center justify-center mb-8",children:x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-neutral-100 to-neutral-50 dark:from-slate-800 dark:to-slate-700 rounded-full flex items-center justify-center shadow-lg",children:x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"})}),x.jsx(pt.div,{className:"absolute inset-0 border-2 border-emerald-200 dark:border-emerald-700 rounded-full",animate:{scale:[1,1.3,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0}})]})}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"inline-flex items-center gap-2 text-neutral-600 dark:text-slate-400 text-sm font-medium mb-8",children:[x.jsx(Q6,{className:"w-4 h-4"}),"Session Complete"]}),x.jsxs(pt.h1,{className:"text-5xl md:text-6xl font-light mb-6 tracking-tight text-neutral-900 dark:text-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:["Thanks for trusting",x.jsx("br",{}),x.jsx("span",{className:"font-bold bg-gradient-to-r from-neutral-900 via-neutral-700 to-neutral-600 dark:from-white dark:via-slate-200 dark:to-slate-300 bg-clip-text text-transparent",children:"Ladderr"})]}),x.jsx(pt.p,{className:"text-lg md:text-xl text-neutral-600 dark:text-slate-400 mb-12 max-w-xl mx-auto font-light leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Climb your career ladder, with Ladderr by your side."}),x.jsx(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mb-8",children:x.jsxs("button",{onClick:a,className:"group bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:hover:bg-neutral-100 text-white dark:text-neutral-900 px-10 py-4 text-base font-medium transition-all duration-300 inline-flex items-center gap-3 rounded-sm shadow-lg hover:shadow-xl transform hover:scale-105",children:[x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),"Back to Home",x.jsx(Af,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"})]})}),x.jsxs(pt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex items-center justify-center gap-3 text-sm text-neutral-500 dark:text-slate-500",children:[x.jsx("div",{className:"w-2 h-2 bg-neutral-300 dark:bg-slate-600 rounded-full animate-pulse"}),x.jsxs("span",{children:["Redirecting automatically in ",i," second",i!==1?"s":""]})]})]})]})};function uW(t){const i=30*Math.pow(2,t-1);return Math.min(i,600)}function dW(t){const e=Math.floor(t/60),n=t%60;return e>0?`${e}:${n.toString().padStart(2,"0")}`:`${n}s`}const kk=({onRetry:t,onGoHome:e,retryAttempt:n=1,initialDelaySeconds:i})=>{const r=i??uW(n),[a,c]=T.useState(r),[l,d]=T.useState(!1),f=T.useCallback(async()=>{d(!0);try{await t()}finally{d(!1)}},[t]);T.useEffect(()=>{if(a<=0)return;const p=setTimeout(()=>{c(v=>v-1)},1e3);return()=>clearTimeout(p)},[a]),T.useEffect(()=>{a<=0&&f()},[a,f]);const m=()=>{c(0)};return x.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-slate-900 flex items-center justify-center px-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900/50"}),x.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((p,v)=>x.jsx(pt.div,{className:"absolute w-1 h-1 bg-neutral-300/40 dark:bg-slate-600/40 rounded-full",animate:{x:[0,100,-50,0],y:[0,-100,50,0],opacity:[.4,.8,.2,.4]},transition:{duration:20+v*2,repeat:1/0,ease:"linear"},style:{left:`${20+v*15}%`,top:`${30+v*10}%`}},v))}),x.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto text-center",children:[x.jsx(pt.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"backOut"},className:"flex items-center justify-center mb-8",children:x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-100 to-orange-50 dark:from-orange-900/30 dark:to-orange-800/20 rounded-full flex items-center justify-center shadow-lg",children:x.jsx(j4,{className:"w-10 h-10 text-orange-600 dark:text-orange-400"})}),x.jsx(pt.div,{className:"absolute inset-0 border-2 border-orange-200 dark:border-orange-700 rounded-full",animate:{scale:[1,1.3,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0}})]})}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"inline-flex items-center gap-2 text-neutral-600 dark:text-slate-400 text-sm font-medium mb-8",children:[x.jsx(dw,{className:"w-4 h-4"}),"Connection Issue"]}),x.jsx(pt.h1,{className:"text-5xl md:text-6xl font-light mb-6 tracking-tight text-neutral-900 dark:text-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:"Something went wrong"}),x.jsx(pt.p,{className:"text-lg md:text-xl text-neutral-600 dark:text-slate-400 mb-12 max-w-xl mx-auto font-light leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Your AI coach is preparing to connect. We'll have you climbing again in moments."}),x.jsxs(pt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:"mb-8",children:[x.jsx("div",{className:"flex items-center justify-center mb-4",children:x.jsx(pt.div,{animate:{rotate:-360},transition:{duration:2,repeat:1/0,ease:"linear"},children:x.jsx(dw,{className:"w-6 h-6 text-orange-500 dark:text-orange-400"})})}),x.jsx("div",{className:"text-4xl md:text-5xl font-mono font-bold text-neutral-900 dark:text-white mb-2",children:dW(a)}),x.jsx("p",{className:"text-neutral-600 dark:text-slate-400 font-medium",children:"Reconnecting automatically"})]}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-4 mb-8",children:[x.jsxs("button",{onClick:m,disabled:l||a<=0,className:"group bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:hover:bg-neutral-100 text-white dark:text-neutral-900 px-10 py-4 text-base font-medium transition-all duration-300 inline-flex items-center justify-center gap-3 rounded-sm shadow-lg hover:shadow-xl transform hover:scale-105 disabled:opacity-50 disabled:transform-none disabled:hover:scale-100 flex-1",children:[!l&&x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),l?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),"Connecting..."]}):x.jsx(x.Fragment,{children:"Try Now"})]}),x.jsxs("button",{onClick:e,disabled:l,className:"group bg-neutral-200 hover:bg-neutral-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-neutral-700 dark:text-slate-300 px-6 py-4 text-base font-medium transition-all duration-300 inline-flex items-center justify-center gap-3 rounded-sm shadow-lg hover:shadow-xl disabled:opacity-50",children:[x.jsx(o4,{className:"w-4 h-4"}),"Go Home"]})]}),x.jsxs(pt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex items-center justify-center gap-3 text-sm text-neutral-500 dark:text-slate-500",children:[x.jsx("div",{className:"w-2 h-2 bg-orange-400 dark:bg-orange-500 rounded-full animate-pulse"}),x.jsx("span",{children:"Preparing your coaching session"})]})]})]})},fW=({onTakeSurvey:t,onGoHome:e,autoStartDelay:n=10})=>{const[i,r]=T.useState(n),a=T.useCallback(()=>{t()},[t]),c=T.useCallback(()=>{e()},[e]);return T.useEffect(()=>{const l=setInterval(()=>{r(d=>d<=1?0:d-1)},1e3);return()=>clearInterval(l)},[]),T.useEffect(()=>{i===0&&a()},[i,a]),x.jsxs("div",{className:"min-h-screen bg-neutral-50 dark:bg-slate-900 flex items-center justify-center px-6 relative overflow-hidden",children:[x.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900/50"}),x.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((l,d)=>x.jsx(pt.div,{className:"absolute w-1 h-1 bg-neutral-300/40 dark:bg-slate-600/40 rounded-full",animate:{x:[0,100,-50,0],y:[0,-100,50,0],opacity:[.4,.8,.2,.4]},transition:{duration:20+d*2,repeat:1/0,ease:"linear"},style:{left:`${20+d*15}%`,top:`${30+d*10}%`}},d))}),x.jsxs("div",{className:"relative z-10 max-w-2xl mx-auto text-center",children:[x.jsx(pt.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,ease:"backOut"},className:"flex items-center justify-center mb-8",children:x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-neutral-100 to-neutral-50 dark:from-slate-800 dark:to-slate-700 rounded-full flex items-center justify-center shadow-lg",children:x.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"})}),x.jsx(pt.div,{className:"absolute inset-0 border-2 border-blue-200 dark:border-blue-700 rounded-full",animate:{scale:[1,1.3,1],opacity:[.6,0,.6]},transition:{duration:2,repeat:1/0}})]})}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"inline-flex items-center gap-2 text-neutral-600 dark:text-slate-400 text-sm font-medium mb-8",children:[x.jsx(CR,{className:"w-4 h-4"}),"Help Us Improve"]}),x.jsxs(pt.h1,{className:"text-5xl md:text-6xl font-light mb-6 tracking-tight text-neutral-900 dark:text-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:["Your Voice",x.jsx("br",{}),x.jsx("span",{className:"font-bold bg-gradient-to-r from-neutral-900 via-neutral-700 to-neutral-600 dark:from-white dark:via-slate-200 dark:to-slate-300 bg-clip-text text-transparent",children:"Matters"})]}),x.jsx(pt.p,{className:"text-lg md:text-xl text-neutral-600 dark:text-slate-400 mb-12 max-w-xl mx-auto font-light leading-relaxed",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Your feedback drives every improvement we make to Ladderr."}),x.jsxs(pt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"flex flex-col sm:flex-row gap-4 mb-8 justify-center",children:[x.jsxs("button",{onClick:a,className:"group bg-neutral-900 hover:bg-neutral-800 dark:bg-white dark:hover:bg-neutral-100 text-white dark:text-neutral-900 px-10 py-4 text-base font-medium transition-all duration-300 inline-flex items-center justify-center gap-3 rounded-sm shadow-lg hover:shadow-xl transform hover:scale-105",children:[x.jsxs("div",{className:"flex items-center gap-0.5",children:[x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),x.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),"Share Your Experience",x.jsx(Af,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"})]}),x.jsxs("button",{onClick:c,className:"group bg-neutral-200 hover:bg-neutral-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-neutral-700 dark:text-slate-300 px-10 py-4 text-base font-medium transition-all duration-300 inline-flex items-center justify-center gap-3 rounded-sm shadow-lg hover:shadow-xl",children:["Maybe Later",x.jsx(ER,{className:"w-4 h-4"})]})]}),x.jsxs(pt.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"flex items-center justify-center gap-3 text-sm text-neutral-500 dark:text-slate-500",children:[x.jsx("div",{className:"w-2 h-2 bg-blue-400 dark:bg-blue-500 rounded-full animate-pulse"}),x.jsxs("span",{children:["Starting survey in ",i," second",i!==1?"s":""]})]})]})]})};function hW(t=!0){T.useEffect(()=>{if(!t)return;JE();const e=window.matchMedia(XD),n=()=>{JE()};if(e.addEventListener)return e.addEventListener("change",n),()=>{e.removeEventListener("change",n)};if(e.addListener)return e.addListener(n),()=>{e.removeListener(n)}},[t])}const mW=pt.create(sW);function pW({appConfig:t,connectionAdapter:e,sessionIntent:n,hasAlphaAccess:i=!1,onNavigateHome:r,onSessionEnd:a,applySystemTheme:c=!0}){hW(c);const l=T.useMemo(()=>new qr,[]),d=T.useRef(!1),f=T.useRef(e),m=T.useRef(!1);T.useEffect(()=>(d.current=!0,f.current=e,()=>{d.current=!1,m.current=!1,l.disconnect()}),[e,l]);const[p,v]=T.useState("connecting"),[b,w]=T.useState(1),[S,R]=T.useState(!1),[E,N]=T.useState(null),[M,I]=T.useState(!0),[A,L]=T.useState(null),[z,H]=T.useState(null);T.useEffect(()=>()=>{d.current=!1,l.disconnect()},[l]);const W=T.useCallback(()=>n?{intent:n}:void 0,[n]),re=T.useCallback(async F=>{const Z=f.current;if(!Z)return L("Session adapter unavailable"),I(!1),!1;if(m.current)return!0;m.current=!0,L(null),I(!0);try{const de=await Z.getConnectionDetails(F);return d.current?(H(de.details),N(de.roomId??null),!0):!1}catch(de){return d.current&&L(de instanceof Error?de.message:"Failed to connect to service"),!1}finally{m.current=!1,d.current&&I(!1)}},[]);T.useEffect(()=>{re(W())},[re,W]);const se=T.useCallback(()=>{r?r():window.location.assign("/")},[r]),fe=T.useCallback(async()=>{w(Z=>Z+1),v("connecting"),await re(W())||v("failed")},[W,re]),Ee=T.useCallback(async()=>{R(!0),await re({intent:"nps",referenceRoomId:E??void 0})?v("connecting"):(R(!1),v("thanks"))},[E,re]),Ae=T.useCallback(()=>{v("thanks")},[]),Pe=T.useCallback(()=>{const F=window.__sessionInfo;return{duration:F?.getSessionDuration()||0,isLongSession:F?.isSessionLongEnough()||!1,agentConnected:F?.agentConnected||!1}},[]),K=T.useCallback((F,Z,de)=>{if(a?.({reason:F,duration:Z,wasLongSession:de}),l.disconnect(),S){R(!1),v("thanks");return}const le=i&&de;if(F==="agent-timeout"){v("failed");return}v(le?"nps-invitation":"thanks")},[i,S,a,l]);T.useEffect(()=>{let F=!1;return p==="connecting"&&l.state==="disconnected"&&z&&(v("waiting"),Promise.all([l.localParticipant.setMicrophoneEnabled(!0,void 0,{preConnectBuffer:t.isPreConnectBufferEnabled}),l.connect(z.serverUrl,z.participantToken)]).catch(Z=>{F||(console.error("Connection error:",Z),v("failed"),w0({title:"Connection failed",description:`${Z.name}: ${Z.message}`}))})),()=>{F=!0}},[l,p,z,t.isPreConnectBufferEnabled]),T.useEffect(()=>{const F=()=>{if(p==="active"){const de=Pe();K("server-hangup",de.duration,de.isLongSession)}},Z=de=>{w0({title:"Encountered an error with your media devices",description:`${de.name}: ${de.message}`})};return l.on(he.MediaDevicesError,Z),l.on(he.Disconnected,F),()=>{l.off(he.Disconnected,F),l.off(he.MediaDevicesError,Z)}},[Pe,K,l,p]);const ie=T.useCallback(()=>{const F=Pe();K("user-hangup",F.duration,F.isLongSession)},[Pe,K]),J=T.useCallback(()=>{v("active")},[]),_e=T.useCallback(()=>{const F=Pe();K("agent-timeout",F.duration,F.isLongSession)},[Pe,K]);if(M)return x.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),x.jsx("p",{className:"text-lg text-muted-foreground",children:"Setting up your session..."})]})});if(A)return x.jsx(kk,{onRetry:fe,onGoHome:se,retryAttempt:b});switch(p){case"nps-invitation":return x.jsx(fW,{onTakeSurvey:Ee,onGoHome:Ae});case"thanks":return x.jsx(lW,{onGoHome:se});case"failed":return x.jsx(kk,{onRetry:fe,onGoHome:se,retryAttempt:b});default:return x.jsxs(x.Fragment,{children:[x.jsxs(mb.Provider,{value:l,children:[x.jsx(jH,{}),x.jsx(PH,{label:"Start Audio"}),x.jsx(cW,{sessionState:p,onAgentConnected:J,onAgentTimeout:_e,children:x.jsx(mW,{appConfig:t,disabled:!1,sessionStarted:!0,onUserDisconnect:ie,initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,ease:"easeOut"}},"session-view")})]}),x.jsx(gq,{})]})}}class gW{baseUrl;constructor(){this.baseUrl="https://api-test.ladderr.ai"}async getJoinToken(e,n){const i=new URL(`${this.baseUrl}/api/conversation/join-token`);n?.intent&&i.searchParams.set("intent",n.intent),n?.referenceRoomId&&i.searchParams.set("reference-room-id",n.referenceRoomId);const r=await fetch(i.toString(),{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to get join token: ${r.status} ${r.statusText}`);return{token:(await r.json()).token}}extractRoomIdFromToken(e){try{const n=JSON.parse(atob(e.split(".")[1]));console.log("Token payload:",n);const i=n.video?.room||null;return console.log("Extracted room ID:",i),i}catch(n){return console.error("Failed to extract room ID from token:",n),null}}}const Rk=new gW;function vW(){const{user:t}=Xr(),e=mu(),n=T.useCallback(async i=>{if(!t)throw new Error("User is not authenticated");const r=await e.getCurrentSession();if(!r)throw new Error("No active session found");const a=r.getAccessToken().getJwtToken(),c=await Rk.getJoinToken(a,i),l="wss://ladderr-test-0rikzfmg.livekit.cloud",d=Rk.extractRoomIdFromToken(c.token);return{details:{serverUrl:l,participantToken:c.token,participantName:"user",roomName:d||`voice_assistant_room_${Math.floor(Math.random()*1e4)}`},roomId:d||void 0}},[e,t]);return T.useMemo(()=>({getConnectionDetails:n}),[n])}function yW({appConfig:t,sessionIntent:e}){const n=Fs(),{isFeatureEnabled:i,loading:r}=RR(),{isAuthenticated:a,loading:c}=Xr(),l=vW();if(c||r)return x.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!a)return x.jsx(gU,{to:"/",replace:!0});const d=i("alpha-access"),f=d?e:e??"ladderr_customer_interview";return x.jsx(pW,{appConfig:t,connectionAdapter:l,sessionIntent:f,hasAlphaAccess:d,onNavigateHome:()=>n("/")})}const bW={pageTitle:"Ladderr AI Coach",pageDescription:"Voice-first AI career coaching",companyName:"Ladderr",supportsChatInput:!0,supportsVideoInput:!1,supportsScreenShare:!1,isPreConnectBufferEnabled:!0,logo:"/full-size-logo-white.png",logoHref:"/",logoAlt:"Ladderr AI Logo",logoTarget:"_self",startButtonText:"Start Coaching Session"},SW=()=>x.jsx(yW,{appConfig:bW});function TW(){const[t,e]=T.useState(!1),n=()=>{e(!0)},i=()=>{e(!1)};return x.jsxs("div",{className:"min-h-screen bg-white",children:[x.jsx(Y4,{onStartCoaching:n}),x.jsx($4,{onStartCoaching:n}),x.jsx(X4,{}),x.jsx(J4,{}),x.jsx(Q4,{}),t&&x.jsx(AR,{onClose:i})]})}function xW(){return x.jsx(q6,{children:x.jsx(H6,{children:x.jsx(zU,{children:x.jsxs(yU,{children:[x.jsx(Cs,{path:"/",element:x.jsx(TW,{})}),x.jsx(Cs,{path:"/contact",element:x.jsx(ij,{})}),x.jsx(Cs,{path:"/privacy",element:x.jsx(rj,{})}),x.jsx(Cs,{path:"/terms",element:x.jsx(sj,{})}),x.jsx(Cs,{path:"/session",element:x.jsx(nj,{children:x.jsx(SW,{})})}),x.jsx(Cs,{path:"/auth/callback",element:x.jsx(ej,{})}),x.jsx(Cs,{path:"/auth/logout",element:x.jsx(tj,{})})]})})})})}var Gg={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ak;function wW(){return Ak||(Ak=1,function(t){const e=tR(),n=nR(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;const r=2147483647;t.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const O=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(O,C),O.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function c(O){if(O>r)throw new RangeError('The value "'+O+'" is invalid for option "size"');const C=new Uint8Array(O);return Object.setPrototypeOf(C,l.prototype),C}function l(O,C,k){if(typeof O=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(O)}return d(O,C,k)}l.poolSize=8192;function d(O,C,k){if(typeof O=="string")return v(O,C);if(ArrayBuffer.isView(O))return w(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(X(O,ArrayBuffer)||O&&X(O.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(X(O,SharedArrayBuffer)||O&&X(O.buffer,SharedArrayBuffer)))return S(O,C,k);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const j=O.valueOf&&O.valueOf();if(j!=null&&j!==O)return l.from(j,C,k);const $=R(O);if($)return $;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return l.from(O[Symbol.toPrimitive]("string"),C,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}l.from=function(O,C,k){return d(O,C,k)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function f(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function m(O,C,k){return f(O),O<=0?c(O):C!==void 0?typeof k=="string"?c(O).fill(C,k):c(O).fill(C):c(O)}l.alloc=function(O,C,k){return m(O,C,k)};function p(O){return f(O),c(O<0?0:E(O)|0)}l.allocUnsafe=function(O){return p(O)},l.allocUnsafeSlow=function(O){return p(O)};function v(O,C){if((typeof C!="string"||C==="")&&(C="utf8"),!l.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const k=M(O,C)|0;let j=c(k);const $=j.write(O,C);return $!==k&&(j=j.slice(0,$)),j}function b(O){const C=O.length<0?0:E(O.length)|0,k=c(C);for(let j=0;j<C;j+=1)k[j]=O[j]&255;return k}function w(O){if(X(O,Uint8Array)){const C=new Uint8Array(O);return S(C.buffer,C.byteOffset,C.byteLength)}return b(O)}function S(O,C,k){if(C<0||O.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<C+(k||0))throw new RangeError('"length" is outside of buffer bounds');let j;return C===void 0&&k===void 0?j=new Uint8Array(O):k===void 0?j=new Uint8Array(O,C):j=new Uint8Array(O,C,k),Object.setPrototypeOf(j,l.prototype),j}function R(O){if(l.isBuffer(O)){const C=E(O.length)|0,k=c(C);return k.length===0||O.copy(k,0,0,C),k}if(O.length!==void 0)return typeof O.length!="number"||pe(O.length)?c(0):b(O);if(O.type==="Buffer"&&Array.isArray(O.data))return b(O.data)}function E(O){if(O>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return O|0}function N(O){return+O!=O&&(O=0),l.alloc(+O)}l.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==l.prototype},l.compare=function(C,k){if(X(C,Uint8Array)&&(C=l.from(C,C.offset,C.byteLength)),X(k,Uint8Array)&&(k=l.from(k,k.offset,k.byteLength)),!l.isBuffer(C)||!l.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===k)return 0;let j=C.length,$=k.length;for(let ae=0,ge=Math.min(j,$);ae<ge;++ae)if(C[ae]!==k[ae]){j=C[ae],$=k[ae];break}return j<$?-1:$<j?1:0},l.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(C,k){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return l.alloc(0);let j;if(k===void 0)for(k=0,j=0;j<C.length;++j)k+=C[j].length;const $=l.allocUnsafe(k);let ae=0;for(j=0;j<C.length;++j){let ge=C[j];if(X(ge,Uint8Array))ae+ge.length>$.length?(l.isBuffer(ge)||(ge=l.from(ge)),ge.copy($,ae)):Uint8Array.prototype.set.call($,ge,ae);else if(l.isBuffer(ge))ge.copy($,ae);else throw new TypeError('"list" argument must be an Array of Buffers');ae+=ge.length}return $};function M(O,C){if(l.isBuffer(O))return O.length;if(ArrayBuffer.isView(O)||X(O,ArrayBuffer))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const k=O.length,j=arguments.length>2&&arguments[2]===!0;if(!j&&k===0)return 0;let $=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return _t(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return P(O).length;default:if($)return j?-1:_t(O).length;C=(""+C).toLowerCase(),$=!0}}l.byteLength=M;function I(O,C,k){let j=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,C>>>=0,k<=C))return"";for(O||(O="utf8");;)switch(O){case"hex":return _e(this,C,k);case"utf8":case"utf-8":return Ae(this,C,k);case"ascii":return ie(this,C,k);case"latin1":case"binary":return J(this,C,k);case"base64":return Ee(this,C,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,C,k);default:if(j)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),j=!0}}l.prototype._isBuffer=!0;function A(O,C,k){const j=O[C];O[C]=O[k],O[k]=j}l.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<C;k+=2)A(this,k,k+1);return this},l.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<C;k+=4)A(this,k,k+3),A(this,k+1,k+2);return this},l.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<C;k+=8)A(this,k,k+7),A(this,k+1,k+6),A(this,k+2,k+5),A(this,k+3,k+4);return this},l.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?Ae(this,0,C):I.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(C){if(!l.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:l.compare(this,C)===0},l.prototype.inspect=function(){let C="";const k=t.INSPECT_MAX_BYTES;return C=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(C+=" ... "),"<Buffer "+C+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(C,k,j,$,ae){if(X(C,Uint8Array)&&(C=l.from(C,C.offset,C.byteLength)),!l.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(k===void 0&&(k=0),j===void 0&&(j=C?C.length:0),$===void 0&&($=0),ae===void 0&&(ae=this.length),k<0||j>C.length||$<0||ae>this.length)throw new RangeError("out of range index");if($>=ae&&k>=j)return 0;if($>=ae)return-1;if(k>=j)return 1;if(k>>>=0,j>>>=0,$>>>=0,ae>>>=0,this===C)return 0;let ge=ae-$,$e=j-k;const ut=Math.min(ge,$e),ht=this.slice($,ae),vt=C.slice(k,j);for(let dt=0;dt<ut;++dt)if(ht[dt]!==vt[dt]){ge=ht[dt],$e=vt[dt];break}return ge<$e?-1:$e<ge?1:0};function L(O,C,k,j,$){if(O.length===0)return-1;if(typeof k=="string"?(j=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,pe(k)&&(k=$?0:O.length-1),k<0&&(k=O.length+k),k>=O.length){if($)return-1;k=O.length-1}else if(k<0)if($)k=0;else return-1;if(typeof C=="string"&&(C=l.from(C,j)),l.isBuffer(C))return C.length===0?-1:z(O,C,k,j,$);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(O,C,k):Uint8Array.prototype.lastIndexOf.call(O,C,k):z(O,[C],k,j,$);throw new TypeError("val must be string, number or Buffer")}function z(O,C,k,j,$){let ae=1,ge=O.length,$e=C.length;if(j!==void 0&&(j=String(j).toLowerCase(),j==="ucs2"||j==="ucs-2"||j==="utf16le"||j==="utf-16le")){if(O.length<2||C.length<2)return-1;ae=2,ge/=2,$e/=2,k/=2}function ut(vt,dt){return ae===1?vt[dt]:vt.readUInt16BE(dt*ae)}let ht;if($){let vt=-1;for(ht=k;ht<ge;ht++)if(ut(O,ht)===ut(C,vt===-1?0:ht-vt)){if(vt===-1&&(vt=ht),ht-vt+1===$e)return vt*ae}else vt!==-1&&(ht-=ht-vt),vt=-1}else for(k+$e>ge&&(k=ge-$e),ht=k;ht>=0;ht--){let vt=!0;for(let dt=0;dt<$e;dt++)if(ut(O,ht+dt)!==ut(C,dt)){vt=!1;break}if(vt)return ht}return-1}l.prototype.includes=function(C,k,j){return this.indexOf(C,k,j)!==-1},l.prototype.indexOf=function(C,k,j){return L(this,C,k,j,!0)},l.prototype.lastIndexOf=function(C,k,j){return L(this,C,k,j,!1)};function H(O,C,k,j){k=Number(k)||0;const $=O.length-k;j?(j=Number(j),j>$&&(j=$)):j=$;const ae=C.length;j>ae/2&&(j=ae/2);let ge;for(ge=0;ge<j;++ge){const $e=parseInt(C.substr(ge*2,2),16);if(pe($e))return ge;O[k+ge]=$e}return ge}function W(O,C,k,j){return V(_t(C,O.length-k),O,k,j)}function re(O,C,k,j){return V(B(C),O,k,j)}function se(O,C,k,j){return V(P(C),O,k,j)}function fe(O,C,k,j){return V(_(C,O.length-k),O,k,j)}l.prototype.write=function(C,k,j,$){if(k===void 0)$="utf8",j=this.length,k=0;else if(j===void 0&&typeof k=="string")$=k,j=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(j)?(j=j>>>0,$===void 0&&($="utf8")):($=j,j=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ae=this.length-k;if((j===void 0||j>ae)&&(j=ae),C.length>0&&(j<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");let ge=!1;for(;;)switch($){case"hex":return H(this,C,k,j);case"utf8":case"utf-8":return W(this,C,k,j);case"ascii":case"latin1":case"binary":return re(this,C,k,j);case"base64":return se(this,C,k,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,C,k,j);default:if(ge)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),ge=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ee(O,C,k){return C===0&&k===O.length?e.fromByteArray(O):e.fromByteArray(O.slice(C,k))}function Ae(O,C,k){k=Math.min(O.length,k);const j=[];let $=C;for(;$<k;){const ae=O[$];let ge=null,$e=ae>239?4:ae>223?3:ae>191?2:1;if($+$e<=k){let ut,ht,vt,dt;switch($e){case 1:ae<128&&(ge=ae);break;case 2:ut=O[$+1],(ut&192)===128&&(dt=(ae&31)<<6|ut&63,dt>127&&(ge=dt));break;case 3:ut=O[$+1],ht=O[$+2],(ut&192)===128&&(ht&192)===128&&(dt=(ae&15)<<12|(ut&63)<<6|ht&63,dt>2047&&(dt<55296||dt>57343)&&(ge=dt));break;case 4:ut=O[$+1],ht=O[$+2],vt=O[$+3],(ut&192)===128&&(ht&192)===128&&(vt&192)===128&&(dt=(ae&15)<<18|(ut&63)<<12|(ht&63)<<6|vt&63,dt>65535&&dt<1114112&&(ge=dt))}}ge===null?(ge=65533,$e=1):ge>65535&&(ge-=65536,j.push(ge>>>10&1023|55296),ge=56320|ge&1023),j.push(ge),$+=$e}return K(j)}const Pe=4096;function K(O){const C=O.length;if(C<=Pe)return String.fromCharCode.apply(String,O);let k="",j=0;for(;j<C;)k+=String.fromCharCode.apply(String,O.slice(j,j+=Pe));return k}function ie(O,C,k){let j="";k=Math.min(O.length,k);for(let $=C;$<k;++$)j+=String.fromCharCode(O[$]&127);return j}function J(O,C,k){let j="";k=Math.min(O.length,k);for(let $=C;$<k;++$)j+=String.fromCharCode(O[$]);return j}function _e(O,C,k){const j=O.length;(!C||C<0)&&(C=0),(!k||k<0||k>j)&&(k=j);let $="";for(let ae=C;ae<k;++ae)$+=we[O[ae]];return $}function F(O,C,k){const j=O.slice(C,k);let $="";for(let ae=0;ae<j.length-1;ae+=2)$+=String.fromCharCode(j[ae]+j[ae+1]*256);return $}l.prototype.slice=function(C,k){const j=this.length;C=~~C,k=k===void 0?j:~~k,C<0?(C+=j,C<0&&(C=0)):C>j&&(C=j),k<0?(k+=j,k<0&&(k=0)):k>j&&(k=j),k<C&&(k=C);const $=this.subarray(C,k);return Object.setPrototypeOf($,l.prototype),$};function Z(O,C,k){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+C>k)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(C,k,j){C=C>>>0,k=k>>>0,j||Z(C,k,this.length);let $=this[C],ae=1,ge=0;for(;++ge<k&&(ae*=256);)$+=this[C+ge]*ae;return $},l.prototype.readUintBE=l.prototype.readUIntBE=function(C,k,j){C=C>>>0,k=k>>>0,j||Z(C,k,this.length);let $=this[C+--k],ae=1;for(;k>0&&(ae*=256);)$+=this[C+--k]*ae;return $},l.prototype.readUint8=l.prototype.readUInt8=function(C,k){return C=C>>>0,k||Z(C,1,this.length),this[C]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(C,k){return C=C>>>0,k||Z(C,2,this.length),this[C]|this[C+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(C,k){return C=C>>>0,k||Z(C,2,this.length),this[C]<<8|this[C+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(C,k){return C=C>>>0,k||Z(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(C,k){return C=C>>>0,k||Z(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},l.prototype.readBigUInt64LE=Ge(function(C){C=C>>>0,kt(C,"offset");const k=this[C],j=this[C+7];(k===void 0||j===void 0)&&jt(C,this.length-8);const $=k+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,ae=this[++C]+this[++C]*2**8+this[++C]*2**16+j*2**24;return BigInt($)+(BigInt(ae)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ge(function(C){C=C>>>0,kt(C,"offset");const k=this[C],j=this[C+7];(k===void 0||j===void 0)&&jt(C,this.length-8);const $=k*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],ae=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+j;return(BigInt($)<<BigInt(32))+BigInt(ae)}),l.prototype.readIntLE=function(C,k,j){C=C>>>0,k=k>>>0,j||Z(C,k,this.length);let $=this[C],ae=1,ge=0;for(;++ge<k&&(ae*=256);)$+=this[C+ge]*ae;return ae*=128,$>=ae&&($-=Math.pow(2,8*k)),$},l.prototype.readIntBE=function(C,k,j){C=C>>>0,k=k>>>0,j||Z(C,k,this.length);let $=k,ae=1,ge=this[C+--$];for(;$>0&&(ae*=256);)ge+=this[C+--$]*ae;return ae*=128,ge>=ae&&(ge-=Math.pow(2,8*k)),ge},l.prototype.readInt8=function(C,k){return C=C>>>0,k||Z(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},l.prototype.readInt16LE=function(C,k){C=C>>>0,k||Z(C,2,this.length);const j=this[C]|this[C+1]<<8;return j&32768?j|4294901760:j},l.prototype.readInt16BE=function(C,k){C=C>>>0,k||Z(C,2,this.length);const j=this[C+1]|this[C]<<8;return j&32768?j|4294901760:j},l.prototype.readInt32LE=function(C,k){return C=C>>>0,k||Z(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},l.prototype.readInt32BE=function(C,k){return C=C>>>0,k||Z(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},l.prototype.readBigInt64LE=Ge(function(C){C=C>>>0,kt(C,"offset");const k=this[C],j=this[C+7];(k===void 0||j===void 0)&&jt(C,this.length-8);const $=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(j<<24);return(BigInt($)<<BigInt(32))+BigInt(k+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),l.prototype.readBigInt64BE=Ge(function(C){C=C>>>0,kt(C,"offset");const k=this[C],j=this[C+7];(k===void 0||j===void 0)&&jt(C,this.length-8);const $=(k<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt($)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+j)}),l.prototype.readFloatLE=function(C,k){return C=C>>>0,k||Z(C,4,this.length),n.read(this,C,!0,23,4)},l.prototype.readFloatBE=function(C,k){return C=C>>>0,k||Z(C,4,this.length),n.read(this,C,!1,23,4)},l.prototype.readDoubleLE=function(C,k){return C=C>>>0,k||Z(C,8,this.length),n.read(this,C,!0,52,8)},l.prototype.readDoubleBE=function(C,k){return C=C>>>0,k||Z(C,8,this.length),n.read(this,C,!1,52,8)};function de(O,C,k,j,$,ae){if(!l.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>$||C<ae)throw new RangeError('"value" argument is out of bounds');if(k+j>O.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(C,k,j,$){if(C=+C,k=k>>>0,j=j>>>0,!$){const $e=Math.pow(2,8*j)-1;de(this,C,k,j,$e,0)}let ae=1,ge=0;for(this[k]=C&255;++ge<j&&(ae*=256);)this[k+ge]=C/ae&255;return k+j},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(C,k,j,$){if(C=+C,k=k>>>0,j=j>>>0,!$){const $e=Math.pow(2,8*j)-1;de(this,C,k,j,$e,0)}let ae=j-1,ge=1;for(this[k+ae]=C&255;--ae>=0&&(ge*=256);)this[k+ae]=C/ge&255;return k+j},l.prototype.writeUint8=l.prototype.writeUInt8=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,1,255,0),this[k]=C&255,k+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,2,65535,0),this[k]=C&255,this[k+1]=C>>>8,k+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,2,65535,0),this[k]=C>>>8,this[k+1]=C&255,k+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,4,4294967295,0),this[k+3]=C>>>24,this[k+2]=C>>>16,this[k+1]=C>>>8,this[k]=C&255,k+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,4,4294967295,0),this[k]=C>>>24,this[k+1]=C>>>16,this[k+2]=C>>>8,this[k+3]=C&255,k+4};function le(O,C,k,j,$){Ye(C,j,$,O,k,7);let ae=Number(C&BigInt(4294967295));O[k++]=ae,ae=ae>>8,O[k++]=ae,ae=ae>>8,O[k++]=ae,ae=ae>>8,O[k++]=ae;let ge=Number(C>>BigInt(32)&BigInt(4294967295));return O[k++]=ge,ge=ge>>8,O[k++]=ge,ge=ge>>8,O[k++]=ge,ge=ge>>8,O[k++]=ge,k}function Te(O,C,k,j,$){Ye(C,j,$,O,k,7);let ae=Number(C&BigInt(4294967295));O[k+7]=ae,ae=ae>>8,O[k+6]=ae,ae=ae>>8,O[k+5]=ae,ae=ae>>8,O[k+4]=ae;let ge=Number(C>>BigInt(32)&BigInt(4294967295));return O[k+3]=ge,ge=ge>>8,O[k+2]=ge,ge=ge>>8,O[k+1]=ge,ge=ge>>8,O[k]=ge,k+8}l.prototype.writeBigUInt64LE=Ge(function(C,k=0){return le(this,C,k,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ge(function(C,k=0){return Te(this,C,k,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(C,k,j,$){if(C=+C,k=k>>>0,!$){const ut=Math.pow(2,8*j-1);de(this,C,k,j,ut-1,-ut)}let ae=0,ge=1,$e=0;for(this[k]=C&255;++ae<j&&(ge*=256);)C<0&&$e===0&&this[k+ae-1]!==0&&($e=1),this[k+ae]=(C/ge>>0)-$e&255;return k+j},l.prototype.writeIntBE=function(C,k,j,$){if(C=+C,k=k>>>0,!$){const ut=Math.pow(2,8*j-1);de(this,C,k,j,ut-1,-ut)}let ae=j-1,ge=1,$e=0;for(this[k+ae]=C&255;--ae>=0&&(ge*=256);)C<0&&$e===0&&this[k+ae+1]!==0&&($e=1),this[k+ae]=(C/ge>>0)-$e&255;return k+j},l.prototype.writeInt8=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,1,127,-128),C<0&&(C=255+C+1),this[k]=C&255,k+1},l.prototype.writeInt16LE=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,2,32767,-32768),this[k]=C&255,this[k+1]=C>>>8,k+2},l.prototype.writeInt16BE=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,2,32767,-32768),this[k]=C>>>8,this[k+1]=C&255,k+2},l.prototype.writeInt32LE=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,4,2147483647,-2147483648),this[k]=C&255,this[k+1]=C>>>8,this[k+2]=C>>>16,this[k+3]=C>>>24,k+4},l.prototype.writeInt32BE=function(C,k,j){return C=+C,k=k>>>0,j||de(this,C,k,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[k]=C>>>24,this[k+1]=C>>>16,this[k+2]=C>>>8,this[k+3]=C&255,k+4},l.prototype.writeBigInt64LE=Ge(function(C,k=0){return le(this,C,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ge(function(C,k=0){return Te(this,C,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Me(O,C,k,j,$,ae){if(k+j>O.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function De(O,C,k,j,$){return C=+C,k=k>>>0,$||Me(O,C,k,4),n.write(O,C,k,j,23,4),k+4}l.prototype.writeFloatLE=function(C,k,j){return De(this,C,k,!0,j)},l.prototype.writeFloatBE=function(C,k,j){return De(this,C,k,!1,j)};function be(O,C,k,j,$){return C=+C,k=k>>>0,$||Me(O,C,k,8),n.write(O,C,k,j,52,8),k+8}l.prototype.writeDoubleLE=function(C,k,j){return be(this,C,k,!0,j)},l.prototype.writeDoubleBE=function(C,k,j){return be(this,C,k,!1,j)},l.prototype.copy=function(C,k,j,$){if(!l.isBuffer(C))throw new TypeError("argument should be a Buffer");if(j||(j=0),!$&&$!==0&&($=this.length),k>=C.length&&(k=C.length),k||(k=0),$>0&&$<j&&($=j),$===j||C.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(j<0||j>=this.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),C.length-k<$-j&&($=C.length-k+j);const ae=$-j;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,j,$):Uint8Array.prototype.set.call(C,this.subarray(j,$),k),ae},l.prototype.fill=function(C,k,j,$){if(typeof C=="string"){if(typeof k=="string"?($=k,k=0,j=this.length):typeof j=="string"&&($=j,j=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!l.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(C.length===1){const ge=C.charCodeAt(0);($==="utf8"&&ge<128||$==="latin1")&&(C=ge)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(k<0||this.length<k||this.length<j)throw new RangeError("Out of range index");if(j<=k)return this;k=k>>>0,j=j===void 0?this.length:j>>>0,C||(C=0);let ae;if(typeof C=="number")for(ae=k;ae<j;++ae)this[ae]=C;else{const ge=l.isBuffer(C)?C:l.from(C,$),$e=ge.length;if($e===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(ae=0;ae<j-k;++ae)this[ae+k]=ge[ae%$e]}return this};const Ce={};function Ve(O,C,k){Ce[O]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${O}]`,this.stack,delete this.name}get code(){return O}set code($){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:$,writable:!0})}toString(){return`${this.name} [${O}]: ${this.message}`}}}Ve("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?`${O} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ve("ERR_INVALID_ARG_TYPE",function(O,C){return`The "${O}" argument must be of type number. Received type ${typeof C}`},TypeError),Ve("ERR_OUT_OF_RANGE",function(O,C,k){let j=`The value of "${O}" is out of range.`,$=k;return Number.isInteger(k)&&Math.abs(k)>2**32?$=qe(String(k)):typeof k=="bigint"&&($=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&($=qe($)),$+="n"),j+=` It must be ${C}. Received ${$}`,j},RangeError);function qe(O){let C="",k=O.length;const j=O[0]==="-"?1:0;for(;k>=j+4;k-=3)C=`_${O.slice(k-3,k)}${C}`;return`${O.slice(0,k)}${C}`}function Xe(O,C,k){kt(C,"offset"),(O[C]===void 0||O[C+k]===void 0)&&jt(C,O.length-(k+1))}function Ye(O,C,k,j,$,ae){if(O>k||O<C){const ge=typeof C=="bigint"?"n":"";let $e;throw C===0||C===BigInt(0)?$e=`>= 0${ge} and < 2${ge} ** ${(ae+1)*8}${ge}`:$e=`>= -(2${ge} ** ${(ae+1)*8-1}${ge}) and < 2 ** ${(ae+1)*8-1}${ge}`,new Ce.ERR_OUT_OF_RANGE("value",$e,O)}Xe(j,$,ae)}function kt(O,C){if(typeof O!="number")throw new Ce.ERR_INVALID_ARG_TYPE(C,"number",O)}function jt(O,C,k){throw Math.floor(O)!==O?(kt(O,k),new Ce.ERR_OUT_OF_RANGE("offset","an integer",O)):C<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${C}`,O)}const di=/[^+/0-9A-Za-z-_]/g;function In(O){if(O=O.split("=")[0],O=O.trim().replace(di,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function _t(O,C){C=C||1/0;let k;const j=O.length;let $=null;const ae=[];for(let ge=0;ge<j;++ge){if(k=O.charCodeAt(ge),k>55295&&k<57344){if(!$){if(k>56319){(C-=3)>-1&&ae.push(239,191,189);continue}else if(ge+1===j){(C-=3)>-1&&ae.push(239,191,189);continue}$=k;continue}if(k<56320){(C-=3)>-1&&ae.push(239,191,189),$=k;continue}k=($-55296<<10|k-56320)+65536}else $&&(C-=3)>-1&&ae.push(239,191,189);if($=null,k<128){if((C-=1)<0)break;ae.push(k)}else if(k<2048){if((C-=2)<0)break;ae.push(k>>6|192,k&63|128)}else if(k<65536){if((C-=3)<0)break;ae.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((C-=4)<0)break;ae.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return ae}function B(O){const C=[];for(let k=0;k<O.length;++k)C.push(O.charCodeAt(k)&255);return C}function _(O,C){let k,j,$;const ae=[];for(let ge=0;ge<O.length&&!((C-=2)<0);++ge)k=O.charCodeAt(ge),j=k>>8,$=k%256,ae.push($),ae.push(j);return ae}function P(O){return e.toByteArray(In(O))}function V(O,C,k,j){let $;for($=0;$<j&&!($+k>=C.length||$>=O.length);++$)C[$+k]=O[$];return $}function X(O,C){return O instanceof C||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===C.name}function pe(O){return O!==O}const we=function(){const O="0123456789abcdef",C=new Array(256);for(let k=0;k<16;++k){const j=k*16;for(let $=0;$<16;++$)C[j+$]=O[k]+O[$]}return C}();function Ge(O){return typeof BigInt>"u"?Je:O}function Je(){throw new Error("BigInt not supported")}}(Gg)),Gg}var CW=wW(),ef={},_k;function EW(){if(_k)return ef;_k=1,Object.defineProperty(ef,"__esModule",{value:!0});var t=function(n){console.warn("[react-gtm]",n)};return ef.default=t,ef}var Kg,Pk;function kW(){if(Pk)return Kg;Pk=1;var t=EW(),e=n(t);function n(r){return r&&r.__esModule?r:{default:r}}var i={tags:function(a){var c=a.id,l=a.events,d=a.dataLayer,f=a.dataLayerName,m=a.preview,p=a.auth,v="&gtm_auth="+p,b="&gtm_preview="+m;c||(0,e.default)("GTM Id is required");var w=`
      <iframe src="https://www.googletagmanager.com/ns.html?id=`+c+v+b+`&gtm_cookies_win=x"
        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>`,S=`
      (function(w,d,s,l,i){w[l]=w[l]||[];
        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', `+JSON.stringify(l).slice(1,-1)+`});
        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'`+v+b+`&gtm_cookies_win=x';
        f.parentNode.insertBefore(j,f);
      })(window,document,'script','`+f+"','"+c+"');",R=this.dataLayer(d,f);return{iframe:w,script:S,dataLayerVar:R}},dataLayer:function(a,c){return`
      window.`+c+" = window."+c+` || [];
      window.`+c+".push("+JSON.stringify(a)+")"}};return Kg=i,Kg}var Yg,Dk;function RW(){if(Dk)return Yg;Dk=1;var t=kW(),e=n(t);function n(r){return r&&r.__esModule?r:{default:r}}var i={dataScript:function(a){var c=document.createElement("script");return c.innerHTML=a,c},gtm:function(a){var c=e.default.tags(a),l=function(){var p=document.createElement("noscript");return p.innerHTML=c.iframe,p},d=function(){var p=document.createElement("script");return p.innerHTML=c.script,p},f=this.dataScript(c.dataLayerVar);return{noScript:l,script:d,dataScript:f}},initialize:function(a){var c=a.gtmId,l=a.events,d=l===void 0?{}:l,f=a.dataLayer,m=a.dataLayerName,p=m===void 0?"dataLayer":m,v=a.auth,b=v===void 0?"":v,w=a.preview,S=w===void 0?"":w,R=this.gtm({id:c,events:d,dataLayer:f||void 0,dataLayerName:p,auth:b,preview:S});f&&document.head.appendChild(R.dataScript),document.head.insertBefore(R.script(),document.head.childNodes[0]),document.body.insertBefore(R.noScript(),document.body.childNodes[0])},dataLayer:function(a){var c=a.dataLayer,l=a.dataLayerName,d=l===void 0?"dataLayer":l;if(window[d])return window[d].push(c);var f=e.default.dataLayer(c,d),m=this.dataScript(f);document.head.insertBefore(m,document.head.childNodes[0])}};return Yg=i,Yg}var $g,Nk;function AW(){if(Nk)return $g;Nk=1;var t=RW(),e=n(t);function n(i){return i&&i.__esModule?i:{default:i}}return $g=e.default,$g}AW();const _W=()=>{window.Buffer=CW.Buffer};var Wg={exports:{}},Ml={},Xg={exports:{}},Zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk;function PW(){return Mk||(Mk=1,function(t){function e(K,ie){var J=K.length;K.push(ie);e:for(;0<J;){var _e=J-1>>>1,F=K[_e];if(0<r(F,ie))K[_e]=ie,K[J]=F,J=_e;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var ie=K[0],J=K.pop();if(J!==ie){K[0]=J;e:for(var _e=0,F=K.length,Z=F>>>1;_e<Z;){var de=2*(_e+1)-1,le=K[de],Te=de+1,Me=K[Te];if(0>r(le,J))Te<F&&0>r(Me,le)?(K[_e]=Me,K[Te]=J,_e=Te):(K[_e]=le,K[de]=J,_e=de);else if(Te<F&&0>r(Me,J))K[_e]=Me,K[Te]=J,_e=Te;else break e}}return ie}function r(K,ie){var J=K.sortIndex-ie.sortIndex;return J!==0?J:K.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var d=[],f=[],m=1,p=null,v=3,b=!1,w=!1,S=!1,R=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function I(K){for(var ie=n(f);ie!==null;){if(ie.callback===null)i(f);else if(ie.startTime<=K)i(f),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=n(f)}}function A(K){if(S=!1,I(K),!w)if(n(d)!==null)w=!0,L||(L=!0,fe());else{var ie=n(f);ie!==null&&Pe(A,ie.startTime-K)}}var L=!1,z=-1,H=5,W=-1;function re(){return R?!0:!(t.unstable_now()-W<H)}function se(){if(R=!1,L){var K=t.unstable_now();W=K;var ie=!0;try{e:{w=!1,S&&(S=!1,N(z),z=-1),b=!0;var J=v;try{t:{for(I(K),p=n(d);p!==null&&!(p.expirationTime>K&&re());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,v=p.priorityLevel;var F=_e(p.expirationTime<=K);if(K=t.unstable_now(),typeof F=="function"){p.callback=F,I(K),ie=!0;break t}p===n(d)&&i(d),I(K)}else i(d);p=n(d)}if(p!==null)ie=!0;else{var Z=n(f);Z!==null&&Pe(A,Z.startTime-K),ie=!1}}break e}finally{p=null,v=J,b=!1}ie=void 0}}finally{ie?fe():L=!1}}}var fe;if(typeof M=="function")fe=function(){M(se)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Ae=Ee.port2;Ee.port1.onmessage=se,fe=function(){Ae.postMessage(null)}}else fe=function(){E(se,0)};function Pe(K,ie){z=E(function(){K(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(K){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var J=v;v=ie;try{return K()}finally{v=J}},t.unstable_requestPaint=function(){R=!0},t.unstable_runWithPriority=function(K,ie){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var J=v;v=K;try{return ie()}finally{v=J}},t.unstable_scheduleCallback=function(K,ie,J){var _e=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?_e+J:_e):J=_e,K){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=J+F,K={id:m++,callback:ie,priorityLevel:K,startTime:J,expirationTime:F,sortIndex:-1},J>_e?(K.sortIndex=J,e(f,K),n(d)===null&&K===n(f)&&(S?(N(z),z=-1):S=!0,Pe(A,J-_e))):(K.sortIndex=F,e(d,K),w||b||(w=!0,L||(L=!0,fe()))),K},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(K){var ie=v;return function(){var J=v;v=ie;try{return K.apply(this,arguments)}finally{v=J}}}}(Zg)),Zg}var Ok;function DW(){return Ok||(Ok=1,Xg.exports=PW()),Xg.exports}var Ik;function NW(){if(Ik)return Ml;Ik=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=DW(),e=B0(),n=Qk();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function l(s){if(a(s)!==s)throw Error(i(188))}function d(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var u=s,h=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){u=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return l(g),s;if(y===h)return l(g),o;y=y.sibling}throw Error(i(188))}if(u.return!==h.return)u=g,h=y;else{for(var D=!1,U=g.child;U;){if(U===u){D=!0,u=g,h=y;break}if(U===h){D=!0,h=g,u=y;break}U=U.sibling}if(!D){for(U=y.child;U;){if(U===u){D=!0,u=y,h=g;break}if(U===h){D=!0,h=y,u=g;break}U=U.sibling}if(!D)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:o}function f(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=f(s),o!==null)return o;s=s.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),M=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),se=Symbol.iterator;function fe(s){return s===null||typeof s!="object"?null:(s=se&&s[se]||s["@@iterator"],typeof s=="function"?s:null)}var Ee=Symbol.for("react.client.reference");function Ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case R:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case L:return"SuspenseList";case W:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case M:return(s.displayName||"Context")+".Provider";case N:return(s._context.displayName||"Context")+".Consumer";case I:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case z:return o=s.displayName||null,o!==null?o:Ae(s.type)||"Memo";case H:o=s._payload,s=s._init;try{return Ae(s(o))}catch{}}return null}var Pe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},_e=[],F=-1;function Z(s){return{current:s}}function de(s){0>F||(s.current=_e[F],_e[F]=null,F--)}function le(s,o){F++,_e[F]=s.current,s.current=o}var Te=Z(null),Me=Z(null),De=Z(null),be=Z(null);function Ce(s,o){switch(le(De,o),le(Me,s),le(Te,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Yx(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Yx(o),s=$x(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}de(Te),le(Te,s)}function Ve(){de(Te),de(Me),de(De)}function qe(s){s.memoizedState!==null&&le(be,s);var o=Te.current,u=$x(o,s.type);o!==u&&(le(Me,s),le(Te,u))}function Xe(s){Me.current===s&&(de(Te),de(Me)),be.current===s&&(de(be),ll._currentValue=J)}var Ye=Object.prototype.hasOwnProperty,kt=t.unstable_scheduleCallback,jt=t.unstable_cancelCallback,di=t.unstable_shouldYield,In=t.unstable_requestPaint,_t=t.unstable_now,B=t.unstable_getCurrentPriorityLevel,_=t.unstable_ImmediatePriority,P=t.unstable_UserBlockingPriority,V=t.unstable_NormalPriority,X=t.unstable_LowPriority,pe=t.unstable_IdlePriority,we=t.log,Ge=t.unstable_setDisableYieldValue,Je=null,O=null;function C(s){if(typeof we=="function"&&Ge(s),O&&typeof O.setStrictMode=="function")try{O.setStrictMode(Je,s)}catch{}}var k=Math.clz32?Math.clz32:ae,j=Math.log,$=Math.LN2;function ae(s){return s>>>=0,s===0?32:31-(j(s)/$|0)|0}var ge=256,$e=4194304;function ut(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ht(s,o,u){var h=s.pendingLanes;if(h===0)return 0;var g=0,y=s.suspendedLanes,D=s.pingedLanes;s=s.warmLanes;var U=h&134217727;return U!==0?(h=U&~y,h!==0?g=ut(h):(D&=U,D!==0?g=ut(D):u||(u=U&~s,u!==0&&(g=ut(u))))):(U=h&~y,U!==0?g=ut(U):D!==0?g=ut(D):u||(u=h&~s,u!==0&&(g=ut(u)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,u=o&-o,y>=u||y===32&&(u&4194048)!==0)?o:g}function vt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function dt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ai(){var s=ge;return ge<<=1,(ge&4194048)===0&&(ge=256),s}function xu(){var s=$e;return $e<<=1,($e&62914560)===0&&($e=4194304),s}function bc(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Jr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function wu(s,o,u,h,g,y){var D=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var U=s.entanglements,q=s.expirationTimes,ne=s.hiddenUpdates;for(u=D&~u;0<u;){var me=31-k(u),Se=1<<me;U[me]=0,q[me]=-1;var oe=ne[me];if(oe!==null)for(ne[me]=null,me=0;me<oe.length;me++){var ce=oe[me];ce!==null&&(ce.lane&=-536870913)}u&=~Se}h!==0&&We(s,h,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(D&~o))}function We(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-k(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|u&4194090}function $t(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var h=31-k(u),g=1<<h;g&o|s[h]&o&&(s[h]|=o),u&=~g}}function rn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Cn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ys(){var s=ie.p;return s!==0?s:(s=window.event,s===void 0?32:h1(s.type))}function fn(s,o){var u=ie.p;try{return ie.p=s,o()}finally{ie.p=u}}var Wt=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Wt,Pt="__reactProps$"+Wt,vn="__reactContainer$"+Wt,Oa="__reactEvents$"+Wt,vr="__reactListeners$"+Wt,Ob="__reactHandles$"+Wt,Ib="__reactResources$"+Wt,Sc="__reactMarker$"+Wt;function wh(s){delete s[Xt],delete s[Pt],delete s[Oa],delete s[vr],delete s[Ob]}function Ia(s){var o=s[Xt];if(o)return o;for(var u=s.parentNode;u;){if(o=u[vn]||u[Xt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=Jx(s);s!==null;){if(u=s[Xt])return u;s=Jx(s)}return o}s=u,u=s.parentNode}return null}function Ua(s){if(s=s[Xt]||s[vn]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Tc(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function La(s){var o=s[Ib];return o||(o=s[Ib]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function yn(s){s[Sc]=!0}var Ub=new Set,Lb={};function $s(s,o){ja(s,o),ja(s+"Capture",o)}function ja(s,o){for(Lb[s]=o,s=0;s<o.length;s++)Ub.add(o[s])}var gM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),jb={},Bb={};function vM(s){return Ye.call(Bb,s)?!0:Ye.call(jb,s)?!1:gM.test(s)?Bb[s]=!0:(jb[s]=!0,!1)}function Cu(s,o,u){if(vM(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function Eu(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function yr(s,o,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+h)}}var Ch,Fb;function Ba(s){if(Ch===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Ch=o&&o[1]||"",Fb=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ch+s+Fb}var Eh=!1;function kh(s,o){if(!s||Eh)return"";Eh=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ce){var oe=ce}Reflect.construct(s,[],Se)}else{try{Se.call()}catch(ce){oe=ce}s.call(Se.prototype)}}else{try{throw Error()}catch(ce){oe=ce}(Se=s())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ce){if(ce&&oe&&typeof ce.stack=="string")return[ce.stack,oe.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),D=y[0],U=y[1];if(D&&U){var q=D.split(`
`),ne=U.split(`
`);for(g=h=0;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;for(;g<ne.length&&!ne[g].includes("DetermineComponentFrameRoot");)g++;if(h===q.length||g===ne.length)for(h=q.length-1,g=ne.length-1;1<=h&&0<=g&&q[h]!==ne[g];)g--;for(;1<=h&&0<=g;h--,g--)if(q[h]!==ne[g]){if(h!==1||g!==1)do if(h--,g--,0>g||q[h]!==ne[g]){var me=`
`+q[h].replace(" at new "," at ");return s.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",s.displayName)),me}while(1<=h&&0<=g);break}}}finally{Eh=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ba(u):""}function yM(s){switch(s.tag){case 26:case 27:case 5:return Ba(s.type);case 16:return Ba("Lazy");case 13:return Ba("Suspense");case 19:return Ba("SuspenseList");case 0:case 15:return kh(s.type,!1);case 11:return kh(s.type.render,!1);case 1:return kh(s.type,!0);case 31:return Ba("Activity");default:return""}}function Vb(s){try{var o="";do o+=yM(s),s=s.return;while(s);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function fi(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function zb(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function bM(s){var o=zb(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(D){h=""+D,y.call(this,D)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(D){h=""+D},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ku(s){s._valueTracker||(s._valueTracker=bM(s))}function Hb(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return s&&(h=zb(s)?s.checked?"true":"false":s.value),s=h,s!==u?(o.setValue(s),!0):!1}function Ru(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var SM=/[\n"\\]/g;function hi(s){return s.replace(SM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Rh(s,o,u,h,g,y,D,U){s.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.type=D:s.removeAttribute("type"),o!=null?D==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+fi(o)):s.value!==""+fi(o)&&(s.value=""+fi(o)):D!=="submit"&&D!=="reset"||s.removeAttribute("value"),o!=null?Ah(s,D,fi(o)):u!=null?Ah(s,D,fi(u)):h!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.name=""+fi(U):s.removeAttribute("name")}function qb(s,o,u,h,g,y,D,U){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),o!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;u=u!=null?""+fi(u):"",o=o!=null?""+fi(o):u,U||o===s.value||(s.value=o),s.defaultValue=o}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=U?s.checked:!!h,s.defaultChecked=!!h,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.name=D)}function Ah(s,o,u){o==="number"&&Ru(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Fa(s,o,u,h){if(s=s.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=o.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&h&&(s[u].defaultSelected=!0)}else{for(u=""+fi(u),o=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function Gb(s,o,u){if(o!=null&&(o=""+fi(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+fi(u):""}function Kb(s,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(i(92));if(Pe(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=fi(o),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h)}function Va(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var TM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Yb(s,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,u):typeof u!="number"||u===0||TM.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function $b(s,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var g in o)h=o[g],o.hasOwnProperty(g)&&u[g]!==h&&Yb(s,g,h)}else for(var y in o)o.hasOwnProperty(y)&&Yb(s,y,o[y])}function _h(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Au(s){return wM.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ph=null;function Dh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var za=null,Ha=null;function Wb(s){var o=Ua(s);if(o&&(s=o.stateNode)){var u=s[Pt]||null;e:switch(s=o.stateNode,o.type){case"input":if(Rh(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+hi(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==s&&h.form===s.form){var g=h[Pt]||null;if(!g)throw Error(i(90));Rh(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===s.form&&Hb(h)}break e;case"textarea":Gb(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Fa(s,!!u.multiple,o,!1)}}}var Nh=!1;function Xb(s,o,u){if(Nh)return s(o,u);Nh=!0;try{var h=s(o);return h}finally{if(Nh=!1,(za!==null||Ha!==null)&&(hd(),za&&(o=za,s=Ha,Ha=za=null,Wb(o),s)))for(o=0;o<s.length;o++)Wb(s[o])}}function xc(s,o){var u=s.stateNode;if(u===null)return null;var h=u[Pt]||null;if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mh=!1;if(br)try{var wc={};Object.defineProperty(wc,"passive",{get:function(){Mh=!0}}),window.addEventListener("test",wc,wc),window.removeEventListener("test",wc,wc)}catch{Mh=!1}var Qr=null,Oh=null,_u=null;function Zb(){if(_u)return _u;var s,o=Oh,u=o.length,h,g="value"in Qr?Qr.value:Qr.textContent,y=g.length;for(s=0;s<u&&o[s]===g[s];s++);var D=u-s;for(h=1;h<=D&&o[u-h]===g[y-h];h++);return _u=g.slice(s,1<h?1-h:void 0)}function Pu(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Du(){return!0}function Jb(){return!1}function Fn(s){function o(u,h,g,y,D){this._reactName=u,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=D,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(u=s[U],this[U]=u?u(y):y[U]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Du:Jb,this.isPropagationStopped=Jb,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Du)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Du)},persist:function(){},isPersistent:Du}),o}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nu=Fn(Ws),Cc=m({},Ws,{view:0,detail:0}),CM=Fn(Cc),Ih,Uh,Ec,Mu=m({},Cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ec&&(Ec&&s.type==="mousemove"?(Ih=s.screenX-Ec.screenX,Uh=s.screenY-Ec.screenY):Uh=Ih=0,Ec=s),Ih)},movementY:function(s){return"movementY"in s?s.movementY:Uh}}),Qb=Fn(Mu),EM=m({},Mu,{dataTransfer:0}),kM=Fn(EM),RM=m({},Cc,{relatedTarget:0}),Lh=Fn(RM),AM=m({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),_M=Fn(AM),PM=m({},Ws,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),DM=Fn(PM),NM=m({},Ws,{data:0}),eS=Fn(NM),MM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UM(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=IM[s])?!!o[s]:!1}function jh(){return UM}var LM=m({},Cc,{key:function(s){if(s.key){var o=MM[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Pu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?OM[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(s){return s.type==="keypress"?Pu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Pu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),jM=Fn(LM),BM=m({},Mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tS=Fn(BM),FM=m({},Cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),VM=Fn(FM),zM=m({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),HM=Fn(zM),qM=m({},Mu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),GM=Fn(qM),KM=m({},Ws,{newState:0,oldState:0}),YM=Fn(KM),$M=[9,13,27,32],Bh=br&&"CompositionEvent"in window,kc=null;br&&"documentMode"in document&&(kc=document.documentMode);var WM=br&&"TextEvent"in window&&!kc,nS=br&&(!Bh||kc&&8<kc&&11>=kc),iS=" ",rS=!1;function sS(s,o){switch(s){case"keyup":return $M.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aS(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var qa=!1;function XM(s,o){switch(s){case"compositionend":return aS(o);case"keypress":return o.which!==32?null:(rS=!0,iS);case"textInput":return s=o.data,s===iS&&rS?null:s;default:return null}}function ZM(s,o){if(qa)return s==="compositionend"||!Bh&&sS(s,o)?(s=Zb(),_u=Oh=Qr=null,qa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return nS&&o.locale!=="ko"?null:o.data;default:return null}}var JM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oS(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!JM[s.type]:o==="textarea"}function cS(s,o,u,h){za?Ha?Ha.push(h):Ha=[h]:za=h,o=bd(o,"onChange"),0<o.length&&(u=new Nu("onChange","change",null,u,h),s.push({event:u,listeners:o}))}var Rc=null,Ac=null;function QM(s){zx(s,0)}function Ou(s){var o=Tc(s);if(Hb(o))return s}function lS(s,o){if(s==="change")return o}var uS=!1;if(br){var Fh;if(br){var Vh="oninput"in document;if(!Vh){var dS=document.createElement("div");dS.setAttribute("oninput","return;"),Vh=typeof dS.oninput=="function"}Fh=Vh}else Fh=!1;uS=Fh&&(!document.documentMode||9<document.documentMode)}function fS(){Rc&&(Rc.detachEvent("onpropertychange",hS),Ac=Rc=null)}function hS(s){if(s.propertyName==="value"&&Ou(Ac)){var o=[];cS(o,Ac,s,Dh(s)),Xb(QM,o)}}function eO(s,o,u){s==="focusin"?(fS(),Rc=o,Ac=u,Rc.attachEvent("onpropertychange",hS)):s==="focusout"&&fS()}function tO(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ou(Ac)}function nO(s,o){if(s==="click")return Ou(o)}function iO(s,o){if(s==="input"||s==="change")return Ou(o)}function rO(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Zn=typeof Object.is=="function"?Object.is:rO;function _c(s,o){if(Zn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var g=u[h];if(!Ye.call(o,g)||!Zn(s[g],o[g]))return!1}return!0}function mS(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function pS(s,o){var u=mS(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=o&&h>=o)return{node:u,offset:o-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=mS(u)}}function gS(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?gS(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function vS(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ru(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Ru(s.document)}return o}function zh(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var sO=br&&"documentMode"in document&&11>=document.documentMode,Ga=null,Hh=null,Pc=null,qh=!1;function yS(s,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;qh||Ga==null||Ga!==Ru(h)||(h=Ga,"selectionStart"in h&&zh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Pc&&_c(Pc,h)||(Pc=h,h=bd(Hh,"onSelect"),0<h.length&&(o=new Nu("onSelect","select",null,o,u),s.push({event:o,listeners:h}),o.target=Ga)))}function Xs(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Ka={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionrun:Xs("Transition","TransitionRun"),transitionstart:Xs("Transition","TransitionStart"),transitioncancel:Xs("Transition","TransitionCancel"),transitionend:Xs("Transition","TransitionEnd")},Gh={},bS={};br&&(bS=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function Zs(s){if(Gh[s])return Gh[s];if(!Ka[s])return s;var o=Ka[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in bS)return Gh[s]=o[u];return s}var SS=Zs("animationend"),TS=Zs("animationiteration"),xS=Zs("animationstart"),aO=Zs("transitionrun"),oO=Zs("transitionstart"),cO=Zs("transitioncancel"),wS=Zs("transitionend"),CS=new Map,Kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kh.push("scrollEnd");function _i(s,o){CS.set(s,o),$s(o,[s])}var ES=new WeakMap;function mi(s,o){if(typeof s=="object"&&s!==null){var u=ES.get(s);return u!==void 0?u:(o={value:s,source:o,stack:Vb(o)},ES.set(s,o),o)}return{value:s,source:o,stack:Vb(o)}}var pi=[],Ya=0,Yh=0;function Iu(){for(var s=Ya,o=Yh=Ya=0;o<s;){var u=pi[o];pi[o++]=null;var h=pi[o];pi[o++]=null;var g=pi[o];pi[o++]=null;var y=pi[o];if(pi[o++]=null,h!==null&&g!==null){var D=h.pending;D===null?g.next=g:(g.next=D.next,D.next=g),h.pending=g}y!==0&&kS(u,g,y)}}function Uu(s,o,u,h){pi[Ya++]=s,pi[Ya++]=o,pi[Ya++]=u,pi[Ya++]=h,Yh|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function $h(s,o,u,h){return Uu(s,o,u,h),Lu(s)}function $a(s,o){return Uu(s,null,null,o),Lu(s)}function kS(s,o,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var g=!1,y=s.return;y!==null;)y.childLanes|=u,h=y.alternate,h!==null&&(h.childLanes|=u),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&o!==null&&(g=31-k(u),s=y.hiddenUpdates,h=s[g],h===null?s[g]=[o]:h.push(o),o.lane=u|536870912),y):null}function Lu(s){if(50<tl)throw tl=0,ep=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Wa={};function lO(s,o,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(s,o,u,h){return new lO(s,o,u,h)}function Wh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Sr(s,o){var u=s.alternate;return u===null?(u=Jn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function RS(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function ju(s,o,u,h,g,y){var D=0;if(h=s,typeof s=="function")Wh(s)&&(D=1);else if(typeof s=="string")D=dI(s,u,Te.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case W:return s=Jn(31,u,o,g),s.elementType=W,s.lanes=y,s;case w:return Js(u.children,g,y,o);case S:D=8,g|=24;break;case R:return s=Jn(12,u,o,g|2),s.elementType=R,s.lanes=y,s;case A:return s=Jn(13,u,o,g),s.elementType=A,s.lanes=y,s;case L:return s=Jn(19,u,o,g),s.elementType=L,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case E:case M:D=10;break e;case N:D=9;break e;case I:D=11;break e;case z:D=14;break e;case H:D=16,h=null;break e}D=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return o=Jn(D,u,o,g),o.elementType=s,o.type=h,o.lanes=y,o}function Js(s,o,u,h){return s=Jn(7,s,h,o),s.lanes=u,s}function Xh(s,o,u){return s=Jn(6,s,null,o),s.lanes=u,s}function Zh(s,o,u){return o=Jn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Xa=[],Za=0,Bu=null,Fu=0,gi=[],vi=0,Qs=null,Tr=1,xr="";function ea(s,o){Xa[Za++]=Fu,Xa[Za++]=Bu,Bu=s,Fu=o}function AS(s,o,u){gi[vi++]=Tr,gi[vi++]=xr,gi[vi++]=Qs,Qs=s;var h=Tr;s=xr;var g=32-k(h)-1;h&=~(1<<g),u+=1;var y=32-k(o)+g;if(30<y){var D=g-g%5;y=(h&(1<<D)-1).toString(32),h>>=D,g-=D,Tr=1<<32-k(o)+g|u<<g|h,xr=y+s}else Tr=1<<y|u<<g|h,xr=s}function Jh(s){s.return!==null&&(ea(s,1),AS(s,1,0))}function Qh(s){for(;s===Bu;)Bu=Xa[--Za],Xa[Za]=null,Fu=Xa[--Za],Xa[Za]=null;for(;s===Qs;)Qs=gi[--vi],gi[vi]=null,xr=gi[--vi],gi[vi]=null,Tr=gi[--vi],gi[vi]=null}var Un=null,Vt=null,gt=!1,ta=null,Ki=!1,em=Error(i(519));function na(s){var o=Error(i(418,""));throw Mc(mi(o,s)),em}function _S(s){var o=s.stateNode,u=s.type,h=s.memoizedProps;switch(o[Xt]=s,o[Pt]=h,u){case"dialog":rt("cancel",o),rt("close",o);break;case"iframe":case"object":case"embed":rt("load",o);break;case"video":case"audio":for(u=0;u<il.length;u++)rt(il[u],o);break;case"source":rt("error",o);break;case"img":case"image":case"link":rt("error",o),rt("load",o);break;case"details":rt("toggle",o);break;case"input":rt("invalid",o),qb(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),ku(o);break;case"select":rt("invalid",o);break;case"textarea":rt("invalid",o),Kb(o,h.value,h.defaultValue,h.children),ku(o)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||Kx(o.textContent,u)?(h.popover!=null&&(rt("beforetoggle",o),rt("toggle",o)),h.onScroll!=null&&rt("scroll",o),h.onScrollEnd!=null&&rt("scrollend",o),h.onClick!=null&&(o.onclick=Sd),o=!0):o=!1,o||na(s)}function PS(s){for(Un=s.return;Un;)switch(Un.tag){case 5:case 13:Ki=!1;return;case 27:case 3:Ki=!0;return;default:Un=Un.return}}function Dc(s){if(s!==Un)return!1;if(!gt)return PS(s),gt=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||gp(s.type,s.memoizedProps)),u=!u),u&&Vt&&na(s),PS(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(o===0){Vt=Di(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;s=s.nextSibling}Vt=null}}else o===27?(o=Vt,ps(s.type)?(s=Sp,Sp=null,Vt=s):Vt=o):Vt=Un?Di(s.stateNode.nextSibling):null;return!0}function Nc(){Vt=Un=null,gt=!1}function DS(){var s=ta;return s!==null&&(Hn===null?Hn=s:Hn.push.apply(Hn,s),ta=null),s}function Mc(s){ta===null?ta=[s]:ta.push(s)}var tm=Z(null),ia=null,wr=null;function es(s,o,u){le(tm,o._currentValue),o._currentValue=u}function Cr(s){s._currentValue=tm.current,de(tm)}function nm(s,o,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===u)break;s=s.return}}function im(s,o,u,h){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var D=g.child;y=y.firstContext;e:for(;y!==null;){var U=y;y=g;for(var q=0;q<o.length;q++)if(U.context===o[q]){y.lanes|=u,U=y.alternate,U!==null&&(U.lanes|=u),nm(y.return,u,s),h||(D=null);break e}y=U.next}}else if(g.tag===18){if(D=g.return,D===null)throw Error(i(341));D.lanes|=u,y=D.alternate,y!==null&&(y.lanes|=u),nm(D,u,s),D=null}else D=g.child;if(D!==null)D.return=g;else for(D=g;D!==null;){if(D===s){D=null;break}if(g=D.sibling,g!==null){g.return=D.return,D=g;break}D=D.return}g=D}}function Oc(s,o,u,h){s=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var D=g.alternate;if(D===null)throw Error(i(387));if(D=D.memoizedProps,D!==null){var U=g.type;Zn(g.pendingProps.value,D.value)||(s!==null?s.push(U):s=[U])}}else if(g===be.current){if(D=g.alternate,D===null)throw Error(i(387));D.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(ll):s=[ll])}g=g.return}s!==null&&im(o,s,u,h),o.flags|=262144}function Vu(s){for(s=s.firstContext;s!==null;){if(!Zn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ra(s){ia=s,wr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Dn(s){return NS(ia,s)}function zu(s,o){return ia===null&&ra(s),NS(s,o)}function NS(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},wr===null){if(s===null)throw Error(i(308));wr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else wr=wr.next=o;return u}var uO=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},dO=t.unstable_scheduleCallback,fO=t.unstable_NormalPriority,hn={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rm(){return{controller:new uO,data:new Map,refCount:0}}function Ic(s){s.refCount--,s.refCount===0&&dO(fO,function(){s.controller.abort()})}var Uc=null,sm=0,Ja=0,Qa=null;function hO(s,o){if(Uc===null){var u=Uc=[];sm=0,Ja=op(),Qa={status:"pending",value:void 0,then:function(h){u.push(h)}}}return sm++,o.then(MS,MS),o}function MS(){if(--sm===0&&Uc!==null){Qa!==null&&(Qa.status="fulfilled");var s=Uc;Uc=null,Ja=0,Qa=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function mO(s,o){var u=[],h={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var g=0;g<u.length;g++)(0,u[g])(o)},function(g){for(h.status="rejected",h.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),h}var OS=K.S;K.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&hO(s,o),OS!==null&&OS(s,o)};var sa=Z(null);function am(){var s=sa.current;return s!==null?s:Dt.pooledCache}function Hu(s,o){o===null?le(sa,sa.current):le(sa,o.pool)}function IS(){var s=am();return s===null?null:{parent:hn._currentValue,pool:s}}var Lc=Error(i(460)),US=Error(i(474)),qu=Error(i(542)),om={then:function(){}};function LS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Gu(){}function jS(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Gu,Gu),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,FS(s),s;default:if(typeof o.status=="string")o.then(Gu,Gu);else{if(s=Dt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=h}},function(h){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,FS(s),s}throw jc=o,Lc}}var jc=null;function BS(){if(jc===null)throw Error(i(459));var s=jc;return jc=null,s}function FS(s){if(s===Lc||s===qu)throw Error(i(483))}var ts=!1;function cm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lm(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ns(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function is(s,o,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(bt&2)!==0){var g=h.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),h.pending=o,o=Lu(s),kS(s,null,u),o}return Uu(s,h,o,u),Lu(s)}function Bc(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,$t(s,u)}}function um(s,o){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var D={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?g=y=D:y=y.next=D,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var dm=!1;function Fc(){if(dm){var s=Qa;if(s!==null)throw s}}function Vc(s,o,u,h){dm=!1;var g=s.updateQueue;ts=!1;var y=g.firstBaseUpdate,D=g.lastBaseUpdate,U=g.shared.pending;if(U!==null){g.shared.pending=null;var q=U,ne=q.next;q.next=null,D===null?y=ne:D.next=ne,D=q;var me=s.alternate;me!==null&&(me=me.updateQueue,U=me.lastBaseUpdate,U!==D&&(U===null?me.firstBaseUpdate=ne:U.next=ne,me.lastBaseUpdate=q))}if(y!==null){var Se=g.baseState;D=0,me=ne=q=null,U=y;do{var oe=U.lane&-536870913,ce=oe!==U.lane;if(ce?(ct&oe)===oe:(h&oe)===oe){oe!==0&&oe===Ja&&(dm=!0),me!==null&&(me=me.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var ze=s,Be=U;oe=o;var wt=u;switch(Be.tag){case 1:if(ze=Be.payload,typeof ze=="function"){Se=ze.call(wt,Se,oe);break e}Se=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Be.payload,oe=typeof ze=="function"?ze.call(wt,Se,oe):ze,oe==null)break e;Se=m({},Se,oe);break e;case 2:ts=!0}}oe=U.callback,oe!==null&&(s.flags|=64,ce&&(s.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[oe]:ce.push(oe))}else ce={lane:oe,tag:U.tag,payload:U.payload,callback:U.callback,next:null},me===null?(ne=me=ce,q=Se):me=me.next=ce,D|=oe;if(U=U.next,U===null){if(U=g.shared.pending,U===null)break;ce=U,U=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);me===null&&(q=Se),g.baseState=q,g.firstBaseUpdate=ne,g.lastBaseUpdate=me,y===null&&(g.shared.lanes=0),ds|=D,s.lanes=D,s.memoizedState=Se}}function VS(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function zS(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)VS(u[s],o)}var eo=Z(null),Ku=Z(0);function HS(s,o){s=Dr,le(Ku,s),le(eo,o),Dr=s|o.baseLanes}function fm(){le(Ku,Dr),le(eo,eo.current)}function hm(){Dr=Ku.current,de(eo),de(Ku)}var rs=0,Qe=null,Tt=null,sn=null,Yu=!1,to=!1,aa=!1,$u=0,zc=0,no=null,pO=0;function Zt(){throw Error(i(321))}function mm(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Zn(s[u],o[u]))return!1;return!0}function pm(s,o,u,h,g,y){return rs=y,Qe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,K.H=s===null||s.memoizedState===null?kT:RT,aa=!1,y=u(h,g),aa=!1,to&&(y=GS(o,u,h,g)),qS(s),y}function qS(s){K.H=ed;var o=Tt!==null&&Tt.next!==null;if(rs=0,sn=Tt=Qe=null,Yu=!1,zc=0,no=null,o)throw Error(i(300));s===null||bn||(s=s.dependencies,s!==null&&Vu(s)&&(bn=!0))}function GS(s,o,u,h){Qe=s;var g=0;do{if(to&&(no=null),zc=0,to=!1,25<=g)throw Error(i(301));if(g+=1,sn=Tt=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}K.H=xO,y=o(u,h)}while(to);return y}function gO(){var s=K.H,o=s.useState()[0];return o=typeof o.then=="function"?Hc(o):o,s=s.useState()[0],(Tt!==null?Tt.memoizedState:null)!==s&&(Qe.flags|=1024),o}function gm(){var s=$u!==0;return $u=0,s}function vm(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function ym(s){if(Yu){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Yu=!1}rs=0,sn=Tt=Qe=null,to=!1,zc=$u=0,no=null}function Vn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Qe.memoizedState=sn=s:sn=sn.next=s,sn}function an(){if(Tt===null){var s=Qe.alternate;s=s!==null?s.memoizedState:null}else s=Tt.next;var o=sn===null?Qe.memoizedState:sn.next;if(o!==null)sn=o,Tt=s;else{if(s===null)throw Qe.alternate===null?Error(i(467)):Error(i(310));Tt=s,s={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},sn===null?Qe.memoizedState=sn=s:sn=sn.next=s}return sn}function bm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hc(s){var o=zc;return zc+=1,no===null&&(no=[]),s=jS(no,s,o),o=Qe,(sn===null?o.memoizedState:sn.next)===null&&(o=o.alternate,K.H=o===null||o.memoizedState===null?kT:RT),s}function Wu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Hc(s);if(s.$$typeof===M)return Dn(s)}throw Error(i(438,String(s)))}function Sm(s){var o=null,u=Qe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=Qe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=bm(),Qe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),h=0;h<s;h++)u[h]=re;return o.index++,u}function Er(s,o){return typeof o=="function"?o(s):o}function Xu(s){var o=an();return Tm(o,Tt,s)}function Tm(s,o,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var g=s.baseQueue,y=h.pending;if(y!==null){if(g!==null){var D=g.next;g.next=y.next,y.next=D}o.baseQueue=g=y,h.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{o=g.next;var U=D=null,q=null,ne=o,me=!1;do{var Se=ne.lane&-536870913;if(Se!==ne.lane?(ct&Se)===Se:(rs&Se)===Se){var oe=ne.revertLane;if(oe===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),Se===Ja&&(me=!0);else if((rs&oe)===oe){ne=ne.next,oe===Ja&&(me=!0);continue}else Se={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(U=q=Se,D=y):q=q.next=Se,Qe.lanes|=oe,ds|=oe;Se=ne.action,aa&&u(y,Se),y=ne.hasEagerState?ne.eagerState:u(y,Se)}else oe={lane:Se,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(U=q=oe,D=y):q=q.next=oe,Qe.lanes|=Se,ds|=Se;ne=ne.next}while(ne!==null&&ne!==o);if(q===null?D=y:q.next=U,!Zn(y,s.memoizedState)&&(bn=!0,me&&(u=Qa,u!==null)))throw u;s.memoizedState=y,s.baseState=D,s.baseQueue=q,h.lastRenderedState=y}return g===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function xm(s){var o=an(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var D=g=g.next;do y=s(y,D.action),D=D.next;while(D!==g);Zn(y,o.memoizedState)||(bn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,h]}function KS(s,o,u){var h=Qe,g=an(),y=gt;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=o();var D=!Zn((Tt||g).memoizedState,u);D&&(g.memoizedState=u,bn=!0),g=g.queue;var U=WS.bind(null,h,g,s);if(qc(2048,8,U,[s]),g.getSnapshot!==o||D||sn!==null&&sn.memoizedState.tag&1){if(h.flags|=2048,io(9,Zu(),$S.bind(null,h,g,u,o),null),Dt===null)throw Error(i(349));y||(rs&124)!==0||YS(h,o,u)}return u}function YS(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Qe.updateQueue,o===null?(o=bm(),Qe.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function $S(s,o,u,h){o.value=u,o.getSnapshot=h,XS(o)&&ZS(s)}function WS(s,o,u){return u(function(){XS(o)&&ZS(s)})}function XS(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Zn(s,u)}catch{return!0}}function ZS(s){var o=$a(s,2);o!==null&&ii(o,s,2)}function wm(s){var o=Vn();if(typeof s=="function"){var u=s;if(s=u(),aa){C(!0);try{u()}finally{C(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:s},o}function JS(s,o,u,h){return s.baseState=u,Tm(s,Tt,typeof h=="function"?h:Er)}function vO(s,o,u,h,g){if(Qu(s))throw Error(i(485));if(s=o.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){y.listeners.push(D)}};K.T!==null?u(!0):y.isTransition=!1,h(y),u=o.pending,u===null?(y.next=o.pending=y,QS(o,y)):(y.next=u.next,o.pending=u.next=y)}}function QS(s,o){var u=o.action,h=o.payload,g=s.state;if(o.isTransition){var y=K.T,D={};K.T=D;try{var U=u(g,h),q=K.S;q!==null&&q(D,U),eT(s,o,U)}catch(ne){Cm(s,o,ne)}finally{K.T=y}}else try{y=u(g,h),eT(s,o,y)}catch(ne){Cm(s,o,ne)}}function eT(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){tT(s,o,h)},function(h){return Cm(s,o,h)}):tT(s,o,u)}function tT(s,o,u){o.status="fulfilled",o.value=u,nT(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,QS(s,u)))}function Cm(s,o,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,nT(o),o=o.next;while(o!==h)}s.action=null}function nT(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function iT(s,o){return o}function rT(s,o){if(gt){var u=Dt.formState;if(u!==null){e:{var h=Qe;if(gt){if(Vt){t:{for(var g=Vt,y=Ki;g.nodeType!==8;){if(!y){g=null;break t}if(g=Di(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Vt=Di(g.nextSibling),h=g.data==="F!";break e}}na(h)}h=!1}h&&(o=u[0])}}return u=Vn(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iT,lastRenderedState:o},u.queue=h,u=wT.bind(null,Qe,h),h.dispatch=u,h=wm(!1),y=_m.bind(null,Qe,!1,h.queue),h=Vn(),g={state:o,dispatch:null,action:s,pending:null},h.queue=g,u=vO.bind(null,Qe,g,y,u),g.dispatch=u,h.memoizedState=s,[o,u,!1]}function sT(s){var o=an();return aT(o,Tt,s)}function aT(s,o,u){if(o=Tm(s,o,iT)[0],s=Xu(Er)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Hc(o)}catch(D){throw D===Lc?qu:D}else h=o;o=an();var g=o.queue,y=g.dispatch;return u!==o.memoizedState&&(Qe.flags|=2048,io(9,Zu(),yO.bind(null,g,u),null)),[h,y,s]}function yO(s,o){s.action=o}function oT(s){var o=an(),u=Tt;if(u!==null)return aT(o,u,s);an(),o=o.memoizedState,u=an();var h=u.queue.dispatch;return u.memoizedState=s,[o,h,!1]}function io(s,o,u,h){return s={tag:s,create:u,deps:h,inst:o,next:null},o=Qe.updateQueue,o===null&&(o=bm(),Qe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,o.lastEffect=s),s}function Zu(){return{destroy:void 0,resource:void 0}}function cT(){return an().memoizedState}function Ju(s,o,u,h){var g=Vn();h=h===void 0?null:h,Qe.flags|=s,g.memoizedState=io(1|o,Zu(),u,h)}function qc(s,o,u,h){var g=an();h=h===void 0?null:h;var y=g.memoizedState.inst;Tt!==null&&h!==null&&mm(h,Tt.memoizedState.deps)?g.memoizedState=io(o,y,u,h):(Qe.flags|=s,g.memoizedState=io(1|o,y,u,h))}function lT(s,o){Ju(8390656,8,s,o)}function uT(s,o){qc(2048,8,s,o)}function dT(s,o){return qc(4,2,s,o)}function fT(s,o){return qc(4,4,s,o)}function hT(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function mT(s,o,u){u=u!=null?u.concat([s]):null,qc(4,4,hT.bind(null,o,s),u)}function Em(){}function pT(s,o){var u=an();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&mm(o,h[1])?h[0]:(u.memoizedState=[s,o],s)}function gT(s,o){var u=an();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&mm(o,h[1]))return h[0];if(h=s(),aa){C(!0);try{s()}finally{C(!1)}}return u.memoizedState=[h,o],h}function km(s,o,u){return u===void 0||(rs&1073741824)!==0?s.memoizedState=o:(s.memoizedState=u,s=bx(),Qe.lanes|=s,ds|=s,u)}function vT(s,o,u,h){return Zn(u,o)?u:eo.current!==null?(s=km(s,u,h),Zn(s,o)||(bn=!0),s):(rs&42)===0?(bn=!0,s.memoizedState=u):(s=bx(),Qe.lanes|=s,ds|=s,o)}function yT(s,o,u,h,g){var y=ie.p;ie.p=y!==0&&8>y?y:8;var D=K.T,U={};K.T=U,_m(s,!1,o,u);try{var q=g(),ne=K.S;if(ne!==null&&ne(U,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var me=mO(q,h);Gc(s,o,me,ni(s))}else Gc(s,o,h,ni(s))}catch(Se){Gc(s,o,{then:function(){},status:"rejected",reason:Se},ni())}finally{ie.p=y,K.T=D}}function bO(){}function Rm(s,o,u,h){if(s.tag!==5)throw Error(i(476));var g=bT(s).queue;yT(s,g,o,J,u===null?bO:function(){return ST(s),u(h)})}function bT(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:J},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function ST(s){var o=bT(s).next.queue;Gc(s,o,{},ni())}function Am(){return Dn(ll)}function TT(){return an().memoizedState}function xT(){return an().memoizedState}function SO(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=ni();s=ns(u);var h=is(o,s,u);h!==null&&(ii(h,o,u),Bc(h,o,u)),o={cache:rm()},s.payload=o;return}o=o.return}}function TO(s,o,u){var h=ni();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Qu(s)?CT(o,u):(u=$h(s,o,u,h),u!==null&&(ii(u,s,h),ET(u,o,h)))}function wT(s,o,u){var h=ni();Gc(s,o,u,h)}function Gc(s,o,u,h){var g={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Qu(s))CT(o,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var D=o.lastRenderedState,U=y(D,u);if(g.hasEagerState=!0,g.eagerState=U,Zn(U,D))return Uu(s,o,g,0),Dt===null&&Iu(),!1}catch{}finally{}if(u=$h(s,o,g,h),u!==null)return ii(u,s,h),ET(u,o,h),!0}return!1}function _m(s,o,u,h){if(h={lane:2,revertLane:op(),action:h,hasEagerState:!1,eagerState:null,next:null},Qu(s)){if(o)throw Error(i(479))}else o=$h(s,u,h,2),o!==null&&ii(o,s,2)}function Qu(s){var o=s.alternate;return s===Qe||o!==null&&o===Qe}function CT(s,o){to=Yu=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function ET(s,o,u){if((u&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,$t(s,u)}}var ed={readContext:Dn,use:Wu,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt},kT={readContext:Dn,use:Wu,useCallback:function(s,o){return Vn().memoizedState=[s,o===void 0?null:o],s},useContext:Dn,useEffect:lT,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,Ju(4194308,4,hT.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Ju(4194308,4,s,o)},useInsertionEffect:function(s,o){Ju(4,2,s,o)},useMemo:function(s,o){var u=Vn();o=o===void 0?null:o;var h=s();if(aa){C(!0);try{s()}finally{C(!1)}}return u.memoizedState=[h,o],h},useReducer:function(s,o,u){var h=Vn();if(u!==void 0){var g=u(o);if(aa){C(!0);try{u(o)}finally{C(!1)}}}else g=o;return h.memoizedState=h.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},h.queue=s,s=s.dispatch=TO.bind(null,Qe,s),[h.memoizedState,s]},useRef:function(s){var o=Vn();return s={current:s},o.memoizedState=s},useState:function(s){s=wm(s);var o=s.queue,u=wT.bind(null,Qe,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:Em,useDeferredValue:function(s,o){var u=Vn();return km(u,s,o)},useTransition:function(){var s=wm(!1);return s=yT.bind(null,Qe,s.queue,!0,!1),Vn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var h=Qe,g=Vn();if(gt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),Dt===null)throw Error(i(349));(ct&124)!==0||YS(h,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,lT(WS.bind(null,h,y,s),[s]),h.flags|=2048,io(9,Zu(),$S.bind(null,h,y,u,o),null),u},useId:function(){var s=Vn(),o=Dt.identifierPrefix;if(gt){var u=xr,h=Tr;u=(h&~(1<<32-k(h)-1)).toString(32)+u,o="Â«"+o+"R"+u,u=$u++,0<u&&(o+="H"+u.toString(32)),o+="Â»"}else u=pO++,o="Â«"+o+"r"+u.toString(32)+"Â»";return s.memoizedState=o},useHostTransitionStatus:Am,useFormState:rT,useActionState:rT,useOptimistic:function(s){var o=Vn();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=_m.bind(null,Qe,!0,u),u.dispatch=o,[s,o]},useMemoCache:Sm,useCacheRefresh:function(){return Vn().memoizedState=SO.bind(null,Qe)}},RT={readContext:Dn,use:Wu,useCallback:pT,useContext:Dn,useEffect:uT,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:fT,useMemo:gT,useReducer:Xu,useRef:cT,useState:function(){return Xu(Er)},useDebugValue:Em,useDeferredValue:function(s,o){var u=an();return vT(u,Tt.memoizedState,s,o)},useTransition:function(){var s=Xu(Er)[0],o=an().memoizedState;return[typeof s=="boolean"?s:Hc(s),o]},useSyncExternalStore:KS,useId:TT,useHostTransitionStatus:Am,useFormState:sT,useActionState:sT,useOptimistic:function(s,o){var u=an();return JS(u,Tt,s,o)},useMemoCache:Sm,useCacheRefresh:xT},xO={readContext:Dn,use:Wu,useCallback:pT,useContext:Dn,useEffect:uT,useImperativeHandle:mT,useInsertionEffect:dT,useLayoutEffect:fT,useMemo:gT,useReducer:xm,useRef:cT,useState:function(){return xm(Er)},useDebugValue:Em,useDeferredValue:function(s,o){var u=an();return Tt===null?km(u,s,o):vT(u,Tt.memoizedState,s,o)},useTransition:function(){var s=xm(Er)[0],o=an().memoizedState;return[typeof s=="boolean"?s:Hc(s),o]},useSyncExternalStore:KS,useId:TT,useHostTransitionStatus:Am,useFormState:oT,useActionState:oT,useOptimistic:function(s,o){var u=an();return Tt!==null?JS(u,Tt,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Sm,useCacheRefresh:xT},ro=null,Kc=0;function td(s){var o=Kc;return Kc+=1,ro===null&&(ro=[]),jS(ro,s,o)}function Yc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function nd(s,o){throw o.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function AT(s){var o=s._init;return o(s._payload)}function _T(s){function o(Q,Y){if(s){var ee=Q.deletions;ee===null?(Q.deletions=[Y],Q.flags|=16):ee.push(Y)}}function u(Q,Y){if(!s)return null;for(;Y!==null;)o(Q,Y),Y=Y.sibling;return null}function h(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function g(Q,Y){return Q=Sr(Q,Y),Q.index=0,Q.sibling=null,Q}function y(Q,Y,ee){return Q.index=ee,s?(ee=Q.alternate,ee!==null?(ee=ee.index,ee<Y?(Q.flags|=67108866,Y):ee):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function D(Q){return s&&Q.alternate===null&&(Q.flags|=67108866),Q}function U(Q,Y,ee,ve){return Y===null||Y.tag!==6?(Y=Xh(ee,Q.mode,ve),Y.return=Q,Y):(Y=g(Y,ee),Y.return=Q,Y)}function q(Q,Y,ee,ve){var Ie=ee.type;return Ie===w?me(Q,Y,ee.props.children,ve,ee.key):Y!==null&&(Y.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===H&&AT(Ie)===Y.type)?(Y=g(Y,ee.props),Yc(Y,ee),Y.return=Q,Y):(Y=ju(ee.type,ee.key,ee.props,null,Q.mode,ve),Yc(Y,ee),Y.return=Q,Y)}function ne(Q,Y,ee,ve){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=Zh(ee,Q.mode,ve),Y.return=Q,Y):(Y=g(Y,ee.children||[]),Y.return=Q,Y)}function me(Q,Y,ee,ve,Ie){return Y===null||Y.tag!==7?(Y=Js(ee,Q.mode,ve,Ie),Y.return=Q,Y):(Y=g(Y,ee),Y.return=Q,Y)}function Se(Q,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=Xh(""+Y,Q.mode,ee),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return ee=ju(Y.type,Y.key,Y.props,null,Q.mode,ee),Yc(ee,Y),ee.return=Q,ee;case b:return Y=Zh(Y,Q.mode,ee),Y.return=Q,Y;case H:var ve=Y._init;return Y=ve(Y._payload),Se(Q,Y,ee)}if(Pe(Y)||fe(Y))return Y=Js(Y,Q.mode,ee,null),Y.return=Q,Y;if(typeof Y.then=="function")return Se(Q,td(Y),ee);if(Y.$$typeof===M)return Se(Q,zu(Q,Y),ee);nd(Q,Y)}return null}function oe(Q,Y,ee,ve){var Ie=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ie!==null?null:U(Q,Y,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:return ee.key===Ie?q(Q,Y,ee,ve):null;case b:return ee.key===Ie?ne(Q,Y,ee,ve):null;case H:return Ie=ee._init,ee=Ie(ee._payload),oe(Q,Y,ee,ve)}if(Pe(ee)||fe(ee))return Ie!==null?null:me(Q,Y,ee,ve,null);if(typeof ee.then=="function")return oe(Q,Y,td(ee),ve);if(ee.$$typeof===M)return oe(Q,Y,zu(Q,ee),ve);nd(Q,ee)}return null}function ce(Q,Y,ee,ve,Ie){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Q=Q.get(ee)||null,U(Y,Q,""+ve,Ie);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case v:return Q=Q.get(ve.key===null?ee:ve.key)||null,q(Y,Q,ve,Ie);case b:return Q=Q.get(ve.key===null?ee:ve.key)||null,ne(Y,Q,ve,Ie);case H:var nt=ve._init;return ve=nt(ve._payload),ce(Q,Y,ee,ve,Ie)}if(Pe(ve)||fe(ve))return Q=Q.get(ee)||null,me(Y,Q,ve,Ie,null);if(typeof ve.then=="function")return ce(Q,Y,ee,td(ve),Ie);if(ve.$$typeof===M)return ce(Q,Y,ee,zu(Y,ve),Ie);nd(Y,ve)}return null}function ze(Q,Y,ee,ve){for(var Ie=null,nt=null,je=Y,Fe=Y=0,Tn=null;je!==null&&Fe<ee.length;Fe++){je.index>Fe?(Tn=je,je=null):Tn=je.sibling;var mt=oe(Q,je,ee[Fe],ve);if(mt===null){je===null&&(je=Tn);break}s&&je&&mt.alternate===null&&o(Q,je),Y=y(mt,Y,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt,je=Tn}if(Fe===ee.length)return u(Q,je),gt&&ea(Q,Fe),Ie;if(je===null){for(;Fe<ee.length;Fe++)je=Se(Q,ee[Fe],ve),je!==null&&(Y=y(je,Y,Fe),nt===null?Ie=je:nt.sibling=je,nt=je);return gt&&ea(Q,Fe),Ie}for(je=h(je);Fe<ee.length;Fe++)Tn=ce(je,Q,Fe,ee[Fe],ve),Tn!==null&&(s&&Tn.alternate!==null&&je.delete(Tn.key===null?Fe:Tn.key),Y=y(Tn,Y,Fe),nt===null?Ie=Tn:nt.sibling=Tn,nt=Tn);return s&&je.forEach(function(Ss){return o(Q,Ss)}),gt&&ea(Q,Fe),Ie}function Be(Q,Y,ee,ve){if(ee==null)throw Error(i(151));for(var Ie=null,nt=null,je=Y,Fe=Y=0,Tn=null,mt=ee.next();je!==null&&!mt.done;Fe++,mt=ee.next()){je.index>Fe?(Tn=je,je=null):Tn=je.sibling;var Ss=oe(Q,je,mt.value,ve);if(Ss===null){je===null&&(je=Tn);break}s&&je&&Ss.alternate===null&&o(Q,je),Y=y(Ss,Y,Fe),nt===null?Ie=Ss:nt.sibling=Ss,nt=Ss,je=Tn}if(mt.done)return u(Q,je),gt&&ea(Q,Fe),Ie;if(je===null){for(;!mt.done;Fe++,mt=ee.next())mt=Se(Q,mt.value,ve),mt!==null&&(Y=y(mt,Y,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt);return gt&&ea(Q,Fe),Ie}for(je=h(je);!mt.done;Fe++,mt=ee.next())mt=ce(je,Q,Fe,mt.value,ve),mt!==null&&(s&&mt.alternate!==null&&je.delete(mt.key===null?Fe:mt.key),Y=y(mt,Y,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt);return s&&je.forEach(function(wI){return o(Q,wI)}),gt&&ea(Q,Fe),Ie}function wt(Q,Y,ee,ve){if(typeof ee=="object"&&ee!==null&&ee.type===w&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:e:{for(var Ie=ee.key;Y!==null;){if(Y.key===Ie){if(Ie=ee.type,Ie===w){if(Y.tag===7){u(Q,Y.sibling),ve=g(Y,ee.props.children),ve.return=Q,Q=ve;break e}}else if(Y.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===H&&AT(Ie)===Y.type){u(Q,Y.sibling),ve=g(Y,ee.props),Yc(ve,ee),ve.return=Q,Q=ve;break e}u(Q,Y);break}else o(Q,Y);Y=Y.sibling}ee.type===w?(ve=Js(ee.props.children,Q.mode,ve,ee.key),ve.return=Q,Q=ve):(ve=ju(ee.type,ee.key,ee.props,null,Q.mode,ve),Yc(ve,ee),ve.return=Q,Q=ve)}return D(Q);case b:e:{for(Ie=ee.key;Y!==null;){if(Y.key===Ie)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){u(Q,Y.sibling),ve=g(Y,ee.children||[]),ve.return=Q,Q=ve;break e}else{u(Q,Y);break}else o(Q,Y);Y=Y.sibling}ve=Zh(ee,Q.mode,ve),ve.return=Q,Q=ve}return D(Q);case H:return Ie=ee._init,ee=Ie(ee._payload),wt(Q,Y,ee,ve)}if(Pe(ee))return ze(Q,Y,ee,ve);if(fe(ee)){if(Ie=fe(ee),typeof Ie!="function")throw Error(i(150));return ee=Ie.call(ee),Be(Q,Y,ee,ve)}if(typeof ee.then=="function")return wt(Q,Y,td(ee),ve);if(ee.$$typeof===M)return wt(Q,Y,zu(Q,ee),ve);nd(Q,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Y!==null&&Y.tag===6?(u(Q,Y.sibling),ve=g(Y,ee),ve.return=Q,Q=ve):(u(Q,Y),ve=Xh(ee,Q.mode,ve),ve.return=Q,Q=ve),D(Q)):u(Q,Y)}return function(Q,Y,ee,ve){try{Kc=0;var Ie=wt(Q,Y,ee,ve);return ro=null,Ie}catch(je){if(je===Lc||je===qu)throw je;var nt=Jn(29,je,null,Q.mode);return nt.lanes=ve,nt.return=Q,nt}finally{}}}var so=_T(!0),PT=_T(!1),yi=Z(null),Yi=null;function ss(s){var o=s.alternate;le(mn,mn.current&1),le(yi,s),Yi===null&&(o===null||eo.current!==null||o.memoizedState!==null)&&(Yi=s)}function DT(s){if(s.tag===22){if(le(mn,mn.current),le(yi,s),Yi===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Yi=s)}}else as()}function as(){le(mn,mn.current),le(yi,yi.current)}function kr(s){de(yi),Yi===s&&(Yi=null),de(mn)}var mn=Z(0);function id(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||bp(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Pm(s,o,u,h){o=s.memoizedState,u=u(h,o),u=u==null?o:m({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Dm={enqueueSetState:function(s,o,u){s=s._reactInternals;var h=ni(),g=ns(h);g.payload=o,u!=null&&(g.callback=u),o=is(s,g,h),o!==null&&(ii(o,s,h),Bc(o,s,h))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var h=ni(),g=ns(h);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=is(s,g,h),o!==null&&(ii(o,s,h),Bc(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=ni(),h=ns(u);h.tag=2,o!=null&&(h.callback=o),o=is(s,h,u),o!==null&&(ii(o,s,u),Bc(o,s,u))}};function NT(s,o,u,h,g,y,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,D):o.prototype&&o.prototype.isPureReactComponent?!_c(u,h)||!_c(g,y):!0}function MT(s,o,u,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==s&&Dm.enqueueReplaceState(o,o.state,null)}function oa(s,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(s=s.defaultProps){u===o&&(u=m({},u));for(var g in s)u[g]===void 0&&(u[g]=s[g])}return u}var rd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function OT(s){rd(s)}function IT(s){console.error(s)}function UT(s){rd(s)}function sd(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function LT(s,o,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Nm(s,o,u){return u=ns(u),u.tag=3,u.payload={element:null},u.callback=function(){sd(s,o)},u}function jT(s){return s=ns(s),s.tag=3,s}function BT(s,o,u,h){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;s.payload=function(){return g(y)},s.callback=function(){LT(o,u,h)}}var D=u.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(s.callback=function(){LT(o,u,h),typeof g!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var U=h.stack;this.componentDidCatch(h.value,{componentStack:U!==null?U:""})})}function wO(s,o,u,h,g){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&Oc(o,u,g,!0),u=yi.current,u!==null){switch(u.tag){case 13:return Yi===null?np():u.alternate===null&&zt===0&&(zt=3),u.flags&=-257,u.flags|=65536,u.lanes=g,h===om?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),rp(s,h,g)),!1;case 22:return u.flags|=65536,h===om?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),rp(s,h,g)),!1}throw Error(i(435,u.tag))}return rp(s,h,g),np(),!1}if(gt)return o=yi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,h!==em&&(s=Error(i(422),{cause:h}),Mc(mi(s,u)))):(h!==em&&(o=Error(i(423),{cause:h}),Mc(mi(o,u))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,h=mi(h,u),g=Nm(s.stateNode,h,g),um(s,g),zt!==4&&(zt=2)),!1;var y=Error(i(520),{cause:h});if(y=mi(y,u),el===null?el=[y]:el.push(y),zt!==4&&(zt=2),o===null)return!0;h=mi(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=g&-g,u.lanes|=s,s=Nm(u.stateNode,h,s),um(u,s),!1;case 1:if(o=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(fs===null||!fs.has(y))))return u.flags|=65536,g&=-g,u.lanes|=g,g=jT(g),BT(g,s,u,h),um(u,g),!1}u=u.return}while(u!==null);return!1}var FT=Error(i(461)),bn=!1;function En(s,o,u,h){o.child=s===null?PT(o,null,u,h):so(o,s.child,u,h)}function VT(s,o,u,h,g){u=u.render;var y=o.ref;if("ref"in h){var D={};for(var U in h)U!=="ref"&&(D[U]=h[U])}else D=h;return ra(o),h=pm(s,o,u,D,y,g),U=gm(),s!==null&&!bn?(vm(s,o,g),Rr(s,o,g)):(gt&&U&&Jh(o),o.flags|=1,En(s,o,h,g),o.child)}function zT(s,o,u,h,g){if(s===null){var y=u.type;return typeof y=="function"&&!Wh(y)&&y.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=y,HT(s,o,y,h,g)):(s=ju(u.type,null,h,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,!Fm(s,g)){var D=y.memoizedProps;if(u=u.compare,u=u!==null?u:_c,u(D,h)&&s.ref===o.ref)return Rr(s,o,g)}return o.flags|=1,s=Sr(y,h),s.ref=o.ref,s.return=o,o.child=s}function HT(s,o,u,h,g){if(s!==null){var y=s.memoizedProps;if(_c(y,h)&&s.ref===o.ref)if(bn=!1,o.pendingProps=h=y,Fm(s,g))(s.flags&131072)!==0&&(bn=!0);else return o.lanes=s.lanes,Rr(s,o,g)}return Mm(s,o,u,h,g)}function qT(s,o,u){var h=o.pendingProps,g=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=y!==null?y.baseLanes|u:u,s!==null){for(g=o.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;o.childLanes=y&~h}else o.childLanes=0,o.child=null;return GT(s,o,h,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Hu(o,y!==null?y.cachePool:null),y!==null?HS(o,y):fm(),DT(o);else return o.lanes=o.childLanes=536870912,GT(s,o,y!==null?y.baseLanes|u:u,u)}else y!==null?(Hu(o,y.cachePool),HS(o,y),as(),o.memoizedState=null):(s!==null&&Hu(o,null),fm(),as());return En(s,o,g,u),o.child}function GT(s,o,u,h){var g=am();return g=g===null?null:{parent:hn._currentValue,pool:g},o.memoizedState={baseLanes:u,cachePool:g},s!==null&&Hu(o,null),fm(),DT(o),s!==null&&Oc(s,o,h,!0),null}function ad(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function Mm(s,o,u,h,g){return ra(o),u=pm(s,o,u,h,void 0,g),h=gm(),s!==null&&!bn?(vm(s,o,g),Rr(s,o,g)):(gt&&h&&Jh(o),o.flags|=1,En(s,o,u,g),o.child)}function KT(s,o,u,h,g,y){return ra(o),o.updateQueue=null,u=GS(o,h,u,g),qS(s),h=gm(),s!==null&&!bn?(vm(s,o,y),Rr(s,o,y)):(gt&&h&&Jh(o),o.flags|=1,En(s,o,u,y),o.child)}function YT(s,o,u,h,g){if(ra(o),o.stateNode===null){var y=Wa,D=u.contextType;typeof D=="object"&&D!==null&&(y=Dn(D)),y=new u(h,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Dm,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=h,y.state=o.memoizedState,y.refs={},cm(o),D=u.contextType,y.context=typeof D=="object"&&D!==null?Dn(D):Wa,y.state=o.memoizedState,D=u.getDerivedStateFromProps,typeof D=="function"&&(Pm(o,u,D,h),y.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(D=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),D!==y.state&&Dm.enqueueReplaceState(y,y.state,null),Vc(o,h,y,g),Fc(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){y=o.stateNode;var U=o.memoizedProps,q=oa(u,U);y.props=q;var ne=y.context,me=u.contextType;D=Wa,typeof me=="object"&&me!==null&&(D=Dn(me));var Se=u.getDerivedStateFromProps;me=typeof Se=="function"||typeof y.getSnapshotBeforeUpdate=="function",U=o.pendingProps!==U,me||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(U||ne!==D)&&MT(o,y,h,D),ts=!1;var oe=o.memoizedState;y.state=oe,Vc(o,h,y,g),Fc(),ne=o.memoizedState,U||oe!==ne||ts?(typeof Se=="function"&&(Pm(o,u,Se,h),ne=o.memoizedState),(q=ts||NT(o,u,q,h,oe,ne,D))?(me||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=ne),y.props=h,y.state=ne,y.context=D,h=q):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{y=o.stateNode,lm(s,o),D=o.memoizedProps,me=oa(u,D),y.props=me,Se=o.pendingProps,oe=y.context,ne=u.contextType,q=Wa,typeof ne=="object"&&ne!==null&&(q=Dn(ne)),U=u.getDerivedStateFromProps,(ne=typeof U=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(D!==Se||oe!==q)&&MT(o,y,h,q),ts=!1,oe=o.memoizedState,y.state=oe,Vc(o,h,y,g),Fc();var ce=o.memoizedState;D!==Se||oe!==ce||ts||s!==null&&s.dependencies!==null&&Vu(s.dependencies)?(typeof U=="function"&&(Pm(o,u,U,h),ce=o.memoizedState),(me=ts||NT(o,u,me,h,oe,ce,q)||s!==null&&s.dependencies!==null&&Vu(s.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,ce,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,ce,q)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||D===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ce),y.props=h,y.state=ce,y.context=q,h=me):(typeof y.componentDidUpdate!="function"||D===s.memoizedProps&&oe===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&oe===s.memoizedState||(o.flags|=1024),h=!1)}return y=h,ad(s,o),h=(o.flags&128)!==0,y||h?(y=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,s!==null&&h?(o.child=so(o,s.child,null,g),o.child=so(o,null,u,g)):En(s,o,u,g),o.memoizedState=y.state,s=o.child):s=Rr(s,o,g),s}function $T(s,o,u,h){return Nc(),o.flags|=256,En(s,o,u,h),o.child}var Om={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Im(s){return{baseLanes:s,cachePool:IS()}}function Um(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=bi),s}function WT(s,o,u){var h=o.pendingProps,g=!1,y=(o.flags&128)!==0,D;if((D=y)||(D=s!==null&&s.memoizedState===null?!1:(mn.current&2)!==0),D&&(g=!0,o.flags&=-129),D=(o.flags&32)!==0,o.flags&=-33,s===null){if(gt){if(g?ss(o):as(),gt){var U=Vt,q;if(q=U){e:{for(q=U,U=Ki;q.nodeType!==8;){if(!U){U=null;break e}if(q=Di(q.nextSibling),q===null){U=null;break e}}U=q}U!==null?(o.memoizedState={dehydrated:U,treeContext:Qs!==null?{id:Tr,overflow:xr}:null,retryLane:536870912,hydrationErrors:null},q=Jn(18,null,null,0),q.stateNode=U,q.return=o,o.child=q,Un=o,Vt=null,q=!0):q=!1}q||na(o)}if(U=o.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return bp(U)?o.lanes=32:o.lanes=536870912,null;kr(o)}return U=h.children,h=h.fallback,g?(as(),g=o.mode,U=od({mode:"hidden",children:U},g),h=Js(h,g,u,null),U.return=o,h.return=o,U.sibling=h,o.child=U,g=o.child,g.memoizedState=Im(u),g.childLanes=Um(s,D,u),o.memoizedState=Om,h):(ss(o),Lm(o,U))}if(q=s.memoizedState,q!==null&&(U=q.dehydrated,U!==null)){if(y)o.flags&256?(ss(o),o.flags&=-257,o=jm(s,o,u)):o.memoizedState!==null?(as(),o.child=s.child,o.flags|=128,o=null):(as(),g=h.fallback,U=o.mode,h=od({mode:"visible",children:h.children},U),g=Js(g,U,u,null),g.flags|=2,h.return=o,g.return=o,h.sibling=g,o.child=h,so(o,s.child,null,u),h=o.child,h.memoizedState=Im(u),h.childLanes=Um(s,D,u),o.memoizedState=Om,o=g);else if(ss(o),bp(U)){if(D=U.nextSibling&&U.nextSibling.dataset,D)var ne=D.dgst;D=ne,h=Error(i(419)),h.stack="",h.digest=D,Mc({value:h,source:null,stack:null}),o=jm(s,o,u)}else if(bn||Oc(s,o,u,!1),D=(u&s.childLanes)!==0,bn||D){if(D=Dt,D!==null&&(h=u&-u,h=(h&42)!==0?1:rn(h),h=(h&(D.suspendedLanes|u))!==0?0:h,h!==0&&h!==q.retryLane))throw q.retryLane=h,$a(s,h),ii(D,s,h),FT;U.data==="$?"||np(),o=jm(s,o,u)}else U.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=q.treeContext,Vt=Di(U.nextSibling),Un=o,gt=!0,ta=null,Ki=!1,s!==null&&(gi[vi++]=Tr,gi[vi++]=xr,gi[vi++]=Qs,Tr=s.id,xr=s.overflow,Qs=o),o=Lm(o,h.children),o.flags|=4096);return o}return g?(as(),g=h.fallback,U=o.mode,q=s.child,ne=q.sibling,h=Sr(q,{mode:"hidden",children:h.children}),h.subtreeFlags=q.subtreeFlags&65011712,ne!==null?g=Sr(ne,g):(g=Js(g,U,u,null),g.flags|=2),g.return=o,h.return=o,h.sibling=g,o.child=h,h=g,g=o.child,U=s.child.memoizedState,U===null?U=Im(u):(q=U.cachePool,q!==null?(ne=hn._currentValue,q=q.parent!==ne?{parent:ne,pool:ne}:q):q=IS(),U={baseLanes:U.baseLanes|u,cachePool:q}),g.memoizedState=U,g.childLanes=Um(s,D,u),o.memoizedState=Om,h):(ss(o),u=s.child,s=u.sibling,u=Sr(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,s!==null&&(D=o.deletions,D===null?(o.deletions=[s],o.flags|=16):D.push(s)),o.child=u,o.memoizedState=null,u)}function Lm(s,o){return o=od({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function od(s,o){return s=Jn(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function jm(s,o,u){return so(o,s.child,null,u),s=Lm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function XT(s,o,u){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),nm(s.return,o,u)}function Bm(s,o,u,h,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=g)}function ZT(s,o,u){var h=o.pendingProps,g=h.revealOrder,y=h.tail;if(En(s,o,h.children,u),h=mn.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&XT(s,u,o);else if(s.tag===19)XT(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(le(mn,h),g){case"forwards":for(u=o.child,g=null;u!==null;)s=u.alternate,s!==null&&id(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Bm(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&id(s)===null){o.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}Bm(o,!0,u,null,y);break;case"together":Bm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Rr(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),ds|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(Oc(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,u=Sr(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Sr(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Fm(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Vu(s)))}function CO(s,o,u){switch(o.tag){case 3:Ce(o,o.stateNode.containerInfo),es(o,hn,s.memoizedState.cache),Nc();break;case 27:case 5:qe(o);break;case 4:Ce(o,o.stateNode.containerInfo);break;case 10:es(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(ss(o),o.flags|=128,null):(u&o.child.childLanes)!==0?WT(s,o,u):(ss(o),s=Rr(s,o,u),s!==null?s.sibling:null);ss(o);break;case 19:var g=(s.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(Oc(s,o,u,!1),h=(u&o.childLanes)!==0),g){if(h)return ZT(s,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(mn,mn.current),h)break;return null;case 22:case 23:return o.lanes=0,qT(s,o,u);case 24:es(o,hn,s.memoizedState.cache)}return Rr(s,o,u)}function JT(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)bn=!0;else{if(!Fm(s,u)&&(o.flags&128)===0)return bn=!1,CO(s,o,u);bn=(s.flags&131072)!==0}else bn=!1,gt&&(o.flags&1048576)!==0&&AS(o,Fu,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var h=o.elementType,g=h._init;if(h=g(h._payload),o.type=h,typeof h=="function")Wh(h)?(s=oa(h,s),o.tag=1,o=YT(null,o,h,s,u)):(o.tag=0,o=Mm(null,o,h,s,u));else{if(h!=null){if(g=h.$$typeof,g===I){o.tag=11,o=VT(null,o,h,s,u);break e}else if(g===z){o.tag=14,o=zT(null,o,h,s,u);break e}}throw o=Ae(h)||h,Error(i(306,o,""))}}return o;case 0:return Mm(s,o,o.type,o.pendingProps,u);case 1:return h=o.type,g=oa(h,o.pendingProps),YT(s,o,h,g,u);case 3:e:{if(Ce(o,o.stateNode.containerInfo),s===null)throw Error(i(387));h=o.pendingProps;var y=o.memoizedState;g=y.element,lm(s,o),Vc(o,h,null,u);var D=o.memoizedState;if(h=D.cache,es(o,hn,h),h!==y.cache&&im(o,[hn],u,!0),Fc(),h=D.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:D.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=$T(s,o,h,u);break e}else if(h!==g){g=mi(Error(i(424)),o),Mc(g),o=$T(s,o,h,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Vt=Di(s.firstChild),Un=o,gt=!0,ta=null,Ki=!0,u=PT(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Nc(),h===g){o=Rr(s,o,u);break e}En(s,o,h,u)}o=o.child}return o;case 26:return ad(s,o),s===null?(u=n1(o.type,null,o.pendingProps,null))?o.memoizedState=u:gt||(u=o.type,s=o.pendingProps,h=Td(De.current).createElement(u),h[Xt]=o,h[Pt]=s,Rn(h,u,s),yn(h),o.stateNode=h):o.memoizedState=n1(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return qe(o),s===null&&gt&&(h=o.stateNode=Qx(o.type,o.pendingProps,De.current),Un=o,Ki=!0,g=Vt,ps(o.type)?(Sp=g,Vt=Di(h.firstChild)):Vt=g),En(s,o,o.pendingProps.children,u),ad(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&gt&&((g=h=Vt)&&(h=JO(h,o.type,o.pendingProps,Ki),h!==null?(o.stateNode=h,Un=o,Vt=Di(h.firstChild),Ki=!1,g=!0):g=!1),g||na(o)),qe(o),g=o.type,y=o.pendingProps,D=s!==null?s.memoizedProps:null,h=y.children,gp(g,y)?h=null:D!==null&&gp(g,D)&&(o.flags|=32),o.memoizedState!==null&&(g=pm(s,o,gO,null,null,u),ll._currentValue=g),ad(s,o),En(s,o,h,u),o.child;case 6:return s===null&&gt&&((s=u=Vt)&&(u=QO(u,o.pendingProps,Ki),u!==null?(o.stateNode=u,Un=o,Vt=null,s=!0):s=!1),s||na(o)),null;case 13:return WT(s,o,u);case 4:return Ce(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=so(o,null,h,u):En(s,o,h,u),o.child;case 11:return VT(s,o,o.type,o.pendingProps,u);case 7:return En(s,o,o.pendingProps,u),o.child;case 8:return En(s,o,o.pendingProps.children,u),o.child;case 12:return En(s,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,es(o,o.type,h.value),En(s,o,h.children,u),o.child;case 9:return g=o.type._context,h=o.pendingProps.children,ra(o),g=Dn(g),h=h(g),o.flags|=1,En(s,o,h,u),o.child;case 14:return zT(s,o,o.type,o.pendingProps,u);case 15:return HT(s,o,o.type,o.pendingProps,u);case 19:return ZT(s,o,u);case 31:return h=o.pendingProps,u=o.mode,h={mode:h.mode,children:h.children},s===null?(u=od(h,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=Sr(s.child,h),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return qT(s,o,u);case 24:return ra(o),h=Dn(hn),s===null?(g=am(),g===null&&(g=Dt,y=rm(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=u),g=y),o.memoizedState={parent:h,cache:g},cm(o),es(o,hn,g)):((s.lanes&u)!==0&&(lm(s,o),Vc(o,null,null,u),Fc()),g=s.memoizedState,y=o.memoizedState,g.parent!==h?(g={parent:h,cache:h},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),es(o,hn,h)):(h=y.cache,es(o,hn,h),h!==g.cache&&im(o,[hn],u,!0))),En(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Ar(s){s.flags|=4}function QT(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!o1(o)){if(o=yi.current,o!==null&&((ct&4194048)===ct?Yi!==null:(ct&62914560)!==ct&&(ct&536870912)===0||o!==Yi))throw jc=om,US;s.flags|=8192}}function cd(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?xu():536870912,s.lanes|=o,lo|=o)}function $c(s,o){if(!gt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Bt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(o)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=u,o}function EO(s,o,u){var h=o.pendingProps;switch(Qh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(o),null;case 1:return Bt(o),null;case 3:return u=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Cr(hn),Ve(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Dc(o)?Ar(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,DS())),Bt(o),null;case 26:return u=o.memoizedState,s===null?(Ar(o),u!==null?(Bt(o),QT(o,u)):(Bt(o),o.flags&=-16777217)):u?u!==s.memoizedState?(Ar(o),Bt(o),QT(o,u)):(Bt(o),o.flags&=-16777217):(s.memoizedProps!==h&&Ar(o),Bt(o),o.flags&=-16777217),null;case 27:Xe(o),u=De.current;var g=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Ar(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Bt(o),null}s=Te.current,Dc(o)?_S(o):(s=Qx(g,h,u),o.stateNode=s,Ar(o))}return Bt(o),null;case 5:if(Xe(o),u=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Ar(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Bt(o),null}if(s=Te.current,Dc(o))_S(o);else{switch(g=Td(De.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?g.createElement(u,{is:h.is}):g.createElement(u)}}s[Xt]=o,s[Pt]=h;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=s;e:switch(Rn(s,u,h),u){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ar(o)}}return Bt(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&Ar(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(i(166));if(s=De.current,Dc(o)){if(s=o.stateNode,u=o.memoizedProps,h=null,g=Un,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}s[Xt]=o,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||Kx(s.nodeValue,u)),s||na(o)}else s=Td(s).createTextNode(h),s[Xt]=o,o.stateNode=s}return Bt(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Dc(o),h!==null&&h.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Xt]=o}else Nc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Bt(o),g=!1}else g=DS(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(kr(o),o):(kr(o),null)}if(kr(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=h!==null,s=s!==null&&s.memoizedState!==null,u){h=o.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)}return u!==s&&u&&(o.child.flags|=8192),cd(o,o.updateQueue),Bt(o),null;case 4:return Ve(),s===null&&dp(o.stateNode.containerInfo),Bt(o),null;case 10:return Cr(o.type),Bt(o),null;case 19:if(de(mn),g=o.memoizedState,g===null)return Bt(o),null;if(h=(o.flags&128)!==0,y=g.rendering,y===null)if(h)$c(g,!1);else{if(zt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(y=id(s),y!==null){for(o.flags|=128,$c(g,!1),s=y.updateQueue,o.updateQueue=s,cd(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)RS(u,s),u=u.sibling;return le(mn,mn.current&1|2),o.child}s=s.sibling}g.tail!==null&&_t()>dd&&(o.flags|=128,h=!0,$c(g,!1),o.lanes=4194304)}else{if(!h)if(s=id(y),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,cd(o,s),$c(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!gt)return Bt(o),null}else 2*_t()-g.renderingStartTime>dd&&u!==536870912&&(o.flags|=128,h=!0,$c(g,!1),o.lanes=4194304);g.isBackwards?(y.sibling=o.child,o.child=y):(s=g.last,s!==null?s.sibling=y:o.child=y,g.last=y)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=_t(),o.sibling=null,s=mn.current,le(mn,h?s&1|2:s&1),o):(Bt(o),null);case 22:case 23:return kr(o),hm(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(Bt(o),o.subtreeFlags&6&&(o.flags|=8192)):Bt(o),u=o.updateQueue,u!==null&&cd(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),s!==null&&de(sa),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Cr(hn),Bt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function kO(s,o){switch(Qh(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Cr(hn),Ve(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Xe(o),null;case 13:if(kr(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Nc()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return de(mn),null;case 4:return Ve(),null;case 10:return Cr(o.type),null;case 22:case 23:return kr(o),hm(),s!==null&&de(sa),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Cr(hn),null;case 25:return null;default:return null}}function ex(s,o){switch(Qh(o),o.tag){case 3:Cr(hn),Ve();break;case 26:case 27:case 5:Xe(o);break;case 4:Ve();break;case 13:kr(o);break;case 19:de(mn);break;case 10:Cr(o.type);break;case 22:case 23:kr(o),hm(),s!==null&&de(sa);break;case 24:Cr(hn)}}function Wc(s,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&s)===s){h=void 0;var y=u.create,D=u.inst;h=y(),D.destroy=h}u=u.next}while(u!==g)}}catch(U){Rt(o,o.return,U)}}function os(s,o,u){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&s)===s){var D=h.inst,U=D.destroy;if(U!==void 0){D.destroy=void 0,g=o;var q=u,ne=U;try{ne()}catch(me){Rt(g,q,me)}}}h=h.next}while(h!==y)}}catch(me){Rt(o,o.return,me)}}function tx(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{zS(o,u)}catch(h){Rt(s,s.return,h)}}}function nx(s,o,u){u.props=oa(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Rt(s,o,h)}}function Xc(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(g){Rt(s,o,g)}}function $i(s,o){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(g){Rt(s,o,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){Rt(s,o,g)}else u.current=null}function ix(s){var o=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(g){Rt(s,s.return,g)}}function Vm(s,o,u){try{var h=s.stateNode;YO(h,s.type,u,o),h[Pt]=o}catch(g){Rt(s,s.return,g)}}function rx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ps(s.type)||s.tag===4}function zm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||rx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ps(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Hm(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Sd));else if(h!==4&&(h===27&&ps(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(Hm(s,o,u),s=s.sibling;s!==null;)Hm(s,o,u),s=s.sibling}function ld(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(h!==4&&(h===27&&ps(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(ld(s,o,u),s=s.sibling;s!==null;)ld(s,o,u),s=s.sibling}function sx(s){var o=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Rn(o,h,u),o[Xt]=s,o[Pt]=u}catch(y){Rt(s,s.return,y)}}var _r=!1,Jt=!1,qm=!1,ax=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function RO(s,o){if(s=s.containerInfo,mp=Rd,s=vS(s),zh(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var D=0,U=-1,q=-1,ne=0,me=0,Se=s,oe=null;t:for(;;){for(var ce;Se!==u||g!==0&&Se.nodeType!==3||(U=D+g),Se!==y||h!==0&&Se.nodeType!==3||(q=D+h),Se.nodeType===3&&(D+=Se.nodeValue.length),(ce=Se.firstChild)!==null;)oe=Se,Se=ce;for(;;){if(Se===s)break t;if(oe===u&&++ne===g&&(U=D),oe===y&&++me===h&&(q=D),(ce=Se.nextSibling)!==null)break;Se=oe,oe=Se.parentNode}Se=ce}u=U===-1||q===-1?null:{start:U,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(pp={focusedElem:s,selectionRange:u},Rd=!1,Sn=o;Sn!==null;)if(o=Sn,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Sn=s;else for(;Sn!==null;){switch(o=Sn,y=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,u=o,g=y.memoizedProps,y=y.memoizedState,h=u.stateNode;try{var ze=oa(u.type,g,u.elementType===u.type);s=h.getSnapshotBeforeUpdate(ze,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(Be){Rt(u,u.return,Be)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)yp(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":yp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Sn=s;break}Sn=o.return}}function ox(s,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:cs(s,u),h&4&&Wc(5,u);break;case 1:if(cs(s,u),h&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(D){Rt(u,u.return,D)}else{var g=oa(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(g,o,s.__reactInternalSnapshotBeforeUpdate)}catch(D){Rt(u,u.return,D)}}h&64&&tx(u),h&512&&Xc(u,u.return);break;case 3:if(cs(s,u),h&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{zS(s,o)}catch(D){Rt(u,u.return,D)}}break;case 27:o===null&&h&4&&sx(u);case 26:case 5:cs(s,u),o===null&&h&4&&ix(u),h&512&&Xc(u,u.return);break;case 12:cs(s,u);break;case 13:cs(s,u),h&4&&ux(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=UO.bind(null,u),eI(s,u))));break;case 22:if(h=u.memoizedState!==null||_r,!h){o=o!==null&&o.memoizedState!==null||Jt,g=_r;var y=Jt;_r=h,(Jt=o)&&!y?ls(s,u,(u.subtreeFlags&8772)!==0):cs(s,u),_r=g,Jt=y}break;case 30:break;default:cs(s,u)}}function cx(s){var o=s.alternate;o!==null&&(s.alternate=null,cx(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&wh(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ot=null,zn=!1;function Pr(s,o,u){for(u=u.child;u!==null;)lx(s,o,u),u=u.sibling}function lx(s,o,u){if(O&&typeof O.onCommitFiberUnmount=="function")try{O.onCommitFiberUnmount(Je,u)}catch{}switch(u.tag){case 26:Jt||$i(u,o),Pr(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Jt||$i(u,o);var h=Ot,g=zn;ps(u.type)&&(Ot=u.stateNode,zn=!1),Pr(s,o,u),sl(u.stateNode),Ot=h,zn=g;break;case 5:Jt||$i(u,o);case 6:if(h=Ot,g=zn,Ot=null,Pr(s,o,u),Ot=h,zn=g,Ot!==null)if(zn)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(u.stateNode)}catch(y){Rt(u,o,y)}else try{Ot.removeChild(u.stateNode)}catch(y){Rt(u,o,y)}break;case 18:Ot!==null&&(zn?(s=Ot,Zx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),hl(s)):Zx(Ot,u.stateNode));break;case 4:h=Ot,g=zn,Ot=u.stateNode.containerInfo,zn=!0,Pr(s,o,u),Ot=h,zn=g;break;case 0:case 11:case 14:case 15:Jt||os(2,u,o),Jt||os(4,u,o),Pr(s,o,u);break;case 1:Jt||($i(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&nx(u,o,h)),Pr(s,o,u);break;case 21:Pr(s,o,u);break;case 22:Jt=(h=Jt)||u.memoizedState!==null,Pr(s,o,u),Jt=h;break;default:Pr(s,o,u)}}function ux(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{hl(s)}catch(u){Rt(o,o.return,u)}}function AO(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new ax),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new ax),o;default:throw Error(i(435,s.tag))}}function Gm(s,o){var u=AO(s);o.forEach(function(h){var g=LO.bind(null,s,h);u.has(h)||(u.add(h),h.then(g,g))})}function Qn(s,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var g=u[h],y=s,D=o,U=D;e:for(;U!==null;){switch(U.tag){case 27:if(ps(U.type)){Ot=U.stateNode,zn=!1;break e}break;case 5:Ot=U.stateNode,zn=!1;break e;case 3:case 4:Ot=U.stateNode.containerInfo,zn=!0;break e}U=U.return}if(Ot===null)throw Error(i(160));lx(y,D,g),Ot=null,zn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)dx(o,s),o=o.sibling}var Pi=null;function dx(s,o){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Qn(o,s),ei(s),h&4&&(os(3,s,s.return),Wc(3,s),os(5,s,s.return));break;case 1:Qn(o,s),ei(s),h&512&&(Jt||u===null||$i(u,u.return)),h&64&&_r&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var g=Pi;if(Qn(o,s),ei(s),h&512&&(Jt||u===null||$i(u,u.return)),h&4){var y=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[Sc]||y[Xt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),Rn(y,h,u),y[Xt]=s,yn(y),h=y;break e;case"link":var D=s1("link","href",g).get(h+(u.href||""));if(D){for(var U=0;U<D.length;U++)if(y=D[U],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){D.splice(U,1);break t}}y=g.createElement(h),Rn(y,h,u),g.head.appendChild(y);break;case"meta":if(D=s1("meta","content",g).get(h+(u.content||""))){for(U=0;U<D.length;U++)if(y=D[U],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){D.splice(U,1);break t}}y=g.createElement(h),Rn(y,h,u),g.head.appendChild(y);break;default:throw Error(i(468,h))}y[Xt]=s,yn(y),h=y}s.stateNode=h}else a1(g,s.type,s.stateNode);else s.stateNode=r1(g,h,s.memoizedProps);else y!==h?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,h===null?a1(g,s.type,s.stateNode):r1(g,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Vm(s,s.memoizedProps,u.memoizedProps)}break;case 27:Qn(o,s),ei(s),h&512&&(Jt||u===null||$i(u,u.return)),u!==null&&h&4&&Vm(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Qn(o,s),ei(s),h&512&&(Jt||u===null||$i(u,u.return)),s.flags&32){g=s.stateNode;try{Va(g,"")}catch(ce){Rt(s,s.return,ce)}}h&4&&s.stateNode!=null&&(g=s.memoizedProps,Vm(s,g,u!==null?u.memoizedProps:g)),h&1024&&(qm=!0);break;case 6:if(Qn(o,s),ei(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(ce){Rt(s,s.return,ce)}}break;case 3:if(Cd=null,g=Pi,Pi=xd(o.containerInfo),Qn(o,s),Pi=g,ei(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{hl(o.containerInfo)}catch(ce){Rt(s,s.return,ce)}qm&&(qm=!1,fx(s));break;case 4:h=Pi,Pi=xd(s.stateNode.containerInfo),Qn(o,s),ei(s),Pi=h;break;case 12:Qn(o,s),ei(s);break;case 13:Qn(o,s),ei(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Zm=_t()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Gm(s,h)));break;case 22:g=s.memoizedState!==null;var q=u!==null&&u.memoizedState!==null,ne=_r,me=Jt;if(_r=ne||g,Jt=me||q,Qn(o,s),Jt=me,_r=ne,ei(s),h&8192)e:for(o=s.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(u===null||q||_r||Jt||ca(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){q=u=o;try{if(y=q.stateNode,g)D=y.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{U=q.stateNode;var Se=q.memoizedProps.style,oe=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;U.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(ce){Rt(q,q.return,ce)}}}else if(o.tag===6){if(u===null){q=o;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(ce){Rt(q,q.return,ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Gm(s,u))));break;case 19:Qn(o,s),ei(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Gm(s,h)));break;case 30:break;case 21:break;default:Qn(o,s),ei(s)}}function ei(s){var o=s.flags;if(o&2){try{for(var u,h=s.return;h!==null;){if(rx(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var g=u.stateNode,y=zm(s);ld(s,y,g);break;case 5:var D=u.stateNode;u.flags&32&&(Va(D,""),u.flags&=-33);var U=zm(s);ld(s,U,D);break;case 3:case 4:var q=u.stateNode.containerInfo,ne=zm(s);Hm(s,ne,q);break;default:throw Error(i(161))}}catch(me){Rt(s,s.return,me)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function fx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;fx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function cs(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ox(s,o.alternate,o),o=o.sibling}function ca(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:os(4,o,o.return),ca(o);break;case 1:$i(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&nx(o,o.return,u),ca(o);break;case 27:sl(o.stateNode);case 26:case 5:$i(o,o.return),ca(o);break;case 22:o.memoizedState===null&&ca(o);break;case 30:ca(o);break;default:ca(o)}s=s.sibling}}function ls(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,g=s,y=o,D=y.flags;switch(y.tag){case 0:case 11:case 15:ls(g,y,u),Wc(4,y);break;case 1:if(ls(g,y,u),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ne){Rt(h,h.return,ne)}if(h=y,g=h.updateQueue,g!==null){var U=h.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)VS(q[g],U)}catch(ne){Rt(h,h.return,ne)}}u&&D&64&&tx(y),Xc(y,y.return);break;case 27:sx(y);case 26:case 5:ls(g,y,u),u&&h===null&&D&4&&ix(y),Xc(y,y.return);break;case 12:ls(g,y,u);break;case 13:ls(g,y,u),u&&D&4&&ux(g,y);break;case 22:y.memoizedState===null&&ls(g,y,u),Xc(y,y.return);break;case 30:break;default:ls(g,y,u)}o=o.sibling}}function Km(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Ic(u))}function Ym(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Ic(s))}function Wi(s,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)hx(s,o,u,h),o=o.sibling}function hx(s,o,u,h){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Wi(s,o,u,h),g&2048&&Wc(9,o);break;case 1:Wi(s,o,u,h);break;case 3:Wi(s,o,u,h),g&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Ic(s)));break;case 12:if(g&2048){Wi(s,o,u,h),s=o.stateNode;try{var y=o.memoizedProps,D=y.id,U=y.onPostCommit;typeof U=="function"&&U(D,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Rt(o,o.return,q)}}else Wi(s,o,u,h);break;case 13:Wi(s,o,u,h);break;case 23:break;case 22:y=o.stateNode,D=o.alternate,o.memoizedState!==null?y._visibility&2?Wi(s,o,u,h):Zc(s,o):y._visibility&2?Wi(s,o,u,h):(y._visibility|=2,ao(s,o,u,h,(o.subtreeFlags&10256)!==0)),g&2048&&Km(D,o);break;case 24:Wi(s,o,u,h),g&2048&&Ym(o.alternate,o);break;default:Wi(s,o,u,h)}}function ao(s,o,u,h,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=s,D=o,U=u,q=h,ne=D.flags;switch(D.tag){case 0:case 11:case 15:ao(y,D,U,q,g),Wc(8,D);break;case 23:break;case 22:var me=D.stateNode;D.memoizedState!==null?me._visibility&2?ao(y,D,U,q,g):Zc(y,D):(me._visibility|=2,ao(y,D,U,q,g)),g&&ne&2048&&Km(D.alternate,D);break;case 24:ao(y,D,U,q,g),g&&ne&2048&&Ym(D.alternate,D);break;default:ao(y,D,U,q,g)}o=o.sibling}}function Zc(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,h=o,g=h.flags;switch(h.tag){case 22:Zc(u,h),g&2048&&Km(h.alternate,h);break;case 24:Zc(u,h),g&2048&&Ym(h.alternate,h);break;default:Zc(u,h)}o=o.sibling}}var Jc=8192;function oo(s){if(s.subtreeFlags&Jc)for(s=s.child;s!==null;)mx(s),s=s.sibling}function mx(s){switch(s.tag){case 26:oo(s),s.flags&Jc&&s.memoizedState!==null&&hI(Pi,s.memoizedState,s.memoizedProps);break;case 5:oo(s);break;case 3:case 4:var o=Pi;Pi=xd(s.stateNode.containerInfo),oo(s),Pi=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Jc,Jc=16777216,oo(s),Jc=o):oo(s));break;default:oo(s)}}function px(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Qc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Sn=h,vx(h,s)}px(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gx(s),s=s.sibling}function gx(s){switch(s.tag){case 0:case 11:case 15:Qc(s),s.flags&2048&&os(9,s,s.return);break;case 3:Qc(s);break;case 12:Qc(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,ud(s)):Qc(s);break;default:Qc(s)}}function ud(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];Sn=h,vx(h,s)}px(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:os(8,o,o.return),ud(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,ud(o));break;default:ud(o)}s=s.sibling}}function vx(s,o){for(;Sn!==null;){var u=Sn;switch(u.tag){case 0:case 11:case 15:os(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ic(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Sn=h;else e:for(u=s;Sn!==null;){h=Sn;var g=h.sibling,y=h.return;if(cx(h),h===u){Sn=null;break e}if(g!==null){g.return=y,Sn=g;break e}Sn=y}}}var _O={getCacheForType:function(s){var o=Dn(hn),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u}},PO=typeof WeakMap=="function"?WeakMap:Map,bt=0,Dt=null,it=null,ct=0,St=0,ti=null,us=!1,co=!1,$m=!1,Dr=0,zt=0,ds=0,la=0,Wm=0,bi=0,lo=0,el=null,Hn=null,Xm=!1,Zm=0,dd=1/0,fd=null,fs=null,kn=0,hs=null,uo=null,fo=0,Jm=0,Qm=null,yx=null,tl=0,ep=null;function ni(){if((bt&2)!==0&&ct!==0)return ct&-ct;if(K.T!==null){var s=Ja;return s!==0?s:op()}return Ys()}function bx(){bi===0&&(bi=(ct&536870912)===0||gt?Ai():536870912);var s=yi.current;return s!==null&&(s.flags|=32),bi}function ii(s,o,u){(s===Dt&&(St===2||St===9)||s.cancelPendingCommit!==null)&&(ho(s,0),ms(s,ct,bi,!1)),Jr(s,u),((bt&2)===0||s!==Dt)&&(s===Dt&&((bt&2)===0&&(la|=u),zt===4&&ms(s,ct,bi,!1)),Xi(s))}function Sx(s,o,u){if((bt&6)!==0)throw Error(i(327));var h=!u&&(o&124)===0&&(o&s.expiredLanes)===0||vt(s,o),g=h?MO(s,o):ip(s,o,!0),y=h;do{if(g===0){co&&!h&&ms(s,o,0,!1);break}else{if(u=s.current.alternate,y&&!DO(u)){g=ip(s,o,!1),y=!1;continue}if(g===2){if(y=o,s.errorRecoveryDisabledLanes&y)var D=0;else D=s.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){o=D;e:{var U=s;g=el;var q=U.current.memoizedState.isDehydrated;if(q&&(ho(U,D).flags|=256),D=ip(U,D,!1),D!==2){if($m&&!q){U.errorRecoveryDisabledLanes|=y,la|=y,g=4;break e}y=Hn,Hn=g,y!==null&&(Hn===null?Hn=y:Hn.push.apply(Hn,y))}g=D}if(y=!1,g!==2)continue}}if(g===1){ho(s,0),ms(s,o,0,!0);break}e:{switch(h=s,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ms(h,o,bi,!us);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(g=Zm+300-_t(),10<g)){if(ms(h,o,bi,!us),ht(h,0,!0)!==0)break e;h.timeoutHandle=Wx(Tx.bind(null,h,u,Hn,fd,Xm,o,bi,la,lo,us,y,2,-0,0),g);break e}Tx(h,u,Hn,fd,Xm,o,bi,la,lo,us,y,0,-0,0)}}break}while(!0);Xi(s)}function Tx(s,o,u,h,g,y,D,U,q,ne,me,Se,oe,ce){if(s.timeoutHandle=-1,Se=o.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(cl={stylesheets:null,count:0,unsuspend:fI},mx(o),Se=mI(),Se!==null)){s.cancelPendingCommit=Se(Ax.bind(null,s,o,y,u,h,g,D,U,q,me,1,oe,ce)),ms(s,y,D,!ne);return}Ax(s,o,y,u,h,g,D,U,q)}function DO(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var g=u[h],y=g.getSnapshot;g=g.value;try{if(!Zn(y(),g))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ms(s,o,u,h){o&=~Wm,o&=~la,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var g=o;0<g;){var y=31-k(g),D=1<<y;h[y]=-1,g&=~D}u!==0&&We(s,u,o)}function hd(){return(bt&6)===0?(nl(0),!1):!0}function tp(){if(it!==null){if(St===0)var s=it.return;else s=it,wr=ia=null,ym(s),ro=null,Kc=0,s=it;for(;s!==null;)ex(s.alternate,s),s=s.return;it=null}}function ho(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,WO(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),tp(),Dt=s,it=u=Sr(s.current,null),ct=o,St=0,ti=null,us=!1,co=vt(s,o),$m=!1,lo=bi=Wm=la=ds=zt=0,Hn=el=null,Xm=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var g=31-k(h),y=1<<g;o|=s[g],h&=~y}return Dr=o,Iu(),u}function xx(s,o){Qe=null,K.H=ed,o===Lc||o===qu?(o=BS(),St=3):o===US?(o=BS(),St=4):St=o===FT?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ti=o,it===null&&(zt=1,sd(s,mi(o,s.current)))}function wx(){var s=K.H;return K.H=ed,s===null?ed:s}function Cx(){var s=K.A;return K.A=_O,s}function np(){zt=4,us||(ct&4194048)!==ct&&yi.current!==null||(co=!0),(ds&134217727)===0&&(la&134217727)===0||Dt===null||ms(Dt,ct,bi,!1)}function ip(s,o,u){var h=bt;bt|=2;var g=wx(),y=Cx();(Dt!==s||ct!==o)&&(fd=null,ho(s,o)),o=!1;var D=zt;e:do try{if(St!==0&&it!==null){var U=it,q=ti;switch(St){case 8:tp(),D=6;break e;case 3:case 2:case 9:case 6:yi.current===null&&(o=!0);var ne=St;if(St=0,ti=null,mo(s,U,q,ne),u&&co){D=0;break e}break;default:ne=St,St=0,ti=null,mo(s,U,q,ne)}}NO(),D=zt;break}catch(me){xx(s,me)}while(!0);return o&&s.shellSuspendCounter++,wr=ia=null,bt=h,K.H=g,K.A=y,it===null&&(Dt=null,ct=0,Iu()),D}function NO(){for(;it!==null;)Ex(it)}function MO(s,o){var u=bt;bt|=2;var h=wx(),g=Cx();Dt!==s||ct!==o?(fd=null,dd=_t()+500,ho(s,o)):co=vt(s,o);e:do try{if(St!==0&&it!==null){o=it;var y=ti;t:switch(St){case 1:St=0,ti=null,mo(s,o,y,1);break;case 2:case 9:if(LS(y)){St=0,ti=null,kx(o);break}o=function(){St!==2&&St!==9||Dt!==s||(St=7),Xi(s)},y.then(o,o);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:LS(y)?(St=0,ti=null,kx(o)):(St=0,ti=null,mo(s,o,y,7));break;case 5:var D=null;switch(it.tag){case 26:D=it.memoizedState;case 5:case 27:var U=it;if(!D||o1(D)){St=0,ti=null;var q=U.sibling;if(q!==null)it=q;else{var ne=U.return;ne!==null?(it=ne,md(ne)):it=null}break t}}St=0,ti=null,mo(s,o,y,5);break;case 6:St=0,ti=null,mo(s,o,y,6);break;case 8:tp(),zt=6;break e;default:throw Error(i(462))}}OO();break}catch(me){xx(s,me)}while(!0);return wr=ia=null,K.H=h,K.A=g,bt=u,it!==null?0:(Dt=null,ct=0,Iu(),zt)}function OO(){for(;it!==null&&!di();)Ex(it)}function Ex(s){var o=JT(s.alternate,s,Dr);s.memoizedProps=s.pendingProps,o===null?md(s):it=o}function kx(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=KT(u,o,o.pendingProps,o.type,void 0,ct);break;case 11:o=KT(u,o,o.pendingProps,o.type.render,o.ref,ct);break;case 5:ym(o);default:ex(u,o),o=it=RS(o,Dr),o=JT(u,o,Dr)}s.memoizedProps=s.pendingProps,o===null?md(s):it=o}function mo(s,o,u,h){wr=ia=null,ym(o),ro=null,Kc=0;var g=o.return;try{if(wO(s,g,o,u,ct)){zt=1,sd(s,mi(u,s.current)),it=null;return}}catch(y){if(g!==null)throw it=g,y;zt=1,sd(s,mi(u,s.current)),it=null;return}o.flags&32768?(gt||h===1?s=!0:co||(ct&536870912)!==0?s=!1:(us=s=!0,(h===2||h===9||h===3||h===6)&&(h=yi.current,h!==null&&h.tag===13&&(h.flags|=16384))),Rx(o,s)):md(o)}function md(s){var o=s;do{if((o.flags&32768)!==0){Rx(o,us);return}s=o.return;var u=EO(o.alternate,o,Dr);if(u!==null){it=u;return}if(o=o.sibling,o!==null){it=o;return}it=o=s}while(o!==null);zt===0&&(zt=5)}function Rx(s,o){do{var u=kO(s.alternate,s);if(u!==null){u.flags&=32767,it=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){it=s;return}it=s=u}while(s!==null);zt=6,it=null}function Ax(s,o,u,h,g,y,D,U,q){s.cancelPendingCommit=null;do pd();while(kn!==0);if((bt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(y=o.lanes|o.childLanes,y|=Yh,wu(s,u,y,D,U,q),s===Dt&&(it=Dt=null,ct=0),uo=o,hs=s,fo=u,Jm=y,Qm=g,yx=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,jO(V,function(){return Mx(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=K.T,K.T=null,g=ie.p,ie.p=2,D=bt,bt|=4;try{RO(s,o,u)}finally{bt=D,ie.p=g,K.T=h}}kn=1,_x(),Px(),Dx()}}function _x(){if(kn===1){kn=0;var s=hs,o=uo,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=K.T,K.T=null;var h=ie.p;ie.p=2;var g=bt;bt|=4;try{dx(o,s);var y=pp,D=vS(s.containerInfo),U=y.focusedElem,q=y.selectionRange;if(D!==U&&U&&U.ownerDocument&&gS(U.ownerDocument.documentElement,U)){if(q!==null&&zh(U)){var ne=q.start,me=q.end;if(me===void 0&&(me=ne),"selectionStart"in U)U.selectionStart=ne,U.selectionEnd=Math.min(me,U.value.length);else{var Se=U.ownerDocument||document,oe=Se&&Se.defaultView||window;if(oe.getSelection){var ce=oe.getSelection(),ze=U.textContent.length,Be=Math.min(q.start,ze),wt=q.end===void 0?Be:Math.min(q.end,ze);!ce.extend&&Be>wt&&(D=wt,wt=Be,Be=D);var Q=pS(U,Be),Y=pS(U,wt);if(Q&&Y&&(ce.rangeCount!==1||ce.anchorNode!==Q.node||ce.anchorOffset!==Q.offset||ce.focusNode!==Y.node||ce.focusOffset!==Y.offset)){var ee=Se.createRange();ee.setStart(Q.node,Q.offset),ce.removeAllRanges(),Be>wt?(ce.addRange(ee),ce.extend(Y.node,Y.offset)):(ee.setEnd(Y.node,Y.offset),ce.addRange(ee))}}}}for(Se=[],ce=U;ce=ce.parentNode;)ce.nodeType===1&&Se.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Se.length;U++){var ve=Se[U];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Rd=!!mp,pp=mp=null}finally{bt=g,ie.p=h,K.T=u}}s.current=o,kn=2}}function Px(){if(kn===2){kn=0;var s=hs,o=uo,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=K.T,K.T=null;var h=ie.p;ie.p=2;var g=bt;bt|=4;try{ox(s,o.alternate,o)}finally{bt=g,ie.p=h,K.T=u}}kn=3}}function Dx(){if(kn===4||kn===3){kn=0,In();var s=hs,o=uo,u=fo,h=yx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?kn=5:(kn=0,uo=hs=null,Nx(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(fs=null),Cn(u),o=o.stateNode,O&&typeof O.onCommitFiberRoot=="function")try{O.onCommitFiberRoot(Je,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=K.T,g=ie.p,ie.p=2,K.T=null;try{for(var y=s.onRecoverableError,D=0;D<h.length;D++){var U=h[D];y(U.value,{componentStack:U.stack})}}finally{K.T=o,ie.p=g}}(fo&3)!==0&&pd(),Xi(s),g=s.pendingLanes,(u&4194090)!==0&&(g&42)!==0?s===ep?tl++:(tl=0,ep=s):tl=0,nl(0)}}function Nx(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Ic(o)))}function pd(s){return _x(),Px(),Dx(),Mx()}function Mx(){if(kn!==5)return!1;var s=hs,o=Jm;Jm=0;var u=Cn(fo),h=K.T,g=ie.p;try{ie.p=32>u?32:u,K.T=null,u=Qm,Qm=null;var y=hs,D=fo;if(kn=0,uo=hs=null,fo=0,(bt&6)!==0)throw Error(i(331));var U=bt;if(bt|=4,gx(y.current),hx(y,y.current,D,u),bt=U,nl(0,!1),O&&typeof O.onPostCommitFiberRoot=="function")try{O.onPostCommitFiberRoot(Je,y)}catch{}return!0}finally{ie.p=g,K.T=h,Nx(s,o)}}function Ox(s,o,u){o=mi(u,o),o=Nm(s.stateNode,o,2),s=is(s,o,2),s!==null&&(Jr(s,2),Xi(s))}function Rt(s,o,u){if(s.tag===3)Ox(s,s,u);else for(;o!==null;){if(o.tag===3){Ox(o,s,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(fs===null||!fs.has(h))){s=mi(u,s),u=jT(2),h=is(o,u,2),h!==null&&(BT(u,h,o,s),Jr(h,2),Xi(h));break}}o=o.return}}function rp(s,o,u){var h=s.pingCache;if(h===null){h=s.pingCache=new PO;var g=new Set;h.set(o,g)}else g=h.get(o),g===void 0&&(g=new Set,h.set(o,g));g.has(u)||($m=!0,g.add(u),s=IO.bind(null,s,o,u),o.then(s,s))}function IO(s,o,u){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Dt===s&&(ct&u)===u&&(zt===4||zt===3&&(ct&62914560)===ct&&300>_t()-Zm?(bt&2)===0&&ho(s,0):Wm|=u,lo===ct&&(lo=0)),Xi(s)}function Ix(s,o){o===0&&(o=xu()),s=$a(s,o),s!==null&&(Jr(s,o),Xi(s))}function UO(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),Ix(s,u)}function LO(s,o){var u=0;switch(s.tag){case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(o),Ix(s,u)}function jO(s,o){return kt(s,o)}var gd=null,po=null,sp=!1,vd=!1,ap=!1,ua=0;function Xi(s){s!==po&&s.next===null&&(po===null?gd=po=s:po=po.next=s),vd=!0,sp||(sp=!0,FO())}function nl(s,o){if(!ap&&vd){ap=!0;do for(var u=!1,h=gd;h!==null;){if(s!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var D=h.suspendedLanes,U=h.pingedLanes;y=(1<<31-k(42|s)+1)-1,y&=g&~(D&~U),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,Bx(h,y))}else y=ct,y=ht(h,h===Dt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||vt(h,y)||(u=!0,Bx(h,y));h=h.next}while(u);ap=!1}}function BO(){Ux()}function Ux(){vd=sp=!1;var s=0;ua!==0&&($O()&&(s=ua),ua=0);for(var o=_t(),u=null,h=gd;h!==null;){var g=h.next,y=Lx(h,o);y===0?(h.next=null,u===null?gd=g:u.next=g,g===null&&(po=u)):(u=h,(s!==0||(y&3)!==0)&&(vd=!0)),h=g}nl(s)}function Lx(s,o){for(var u=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var D=31-k(y),U=1<<D,q=g[D];q===-1?((U&u)===0||(U&h)!==0)&&(g[D]=dt(U,o)):q<=o&&(s.expiredLanes|=U),y&=~U}if(o=Dt,u=ct,u=ht(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===o&&(St===2||St===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&jt(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||vt(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(h!==null&&jt(h),Cn(u)){case 2:case 8:u=P;break;case 32:u=V;break;case 268435456:u=pe;break;default:u=V}return h=jx.bind(null,s),u=kt(u,h),s.callbackPriority=o,s.callbackNode=u,o}return h!==null&&h!==null&&jt(h),s.callbackPriority=2,s.callbackNode=null,2}function jx(s,o){if(kn!==0&&kn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(pd()&&s.callbackNode!==u)return null;var h=ct;return h=ht(s,s===Dt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(Sx(s,h,o),Lx(s,_t()),s.callbackNode!=null&&s.callbackNode===u?jx.bind(null,s):null)}function Bx(s,o){if(pd())return null;Sx(s,o,!0)}function FO(){XO(function(){(bt&6)!==0?kt(_,BO):Ux()})}function op(){return ua===0&&(ua=Ai()),ua}function Fx(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Au(""+s)}function Vx(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function VO(s,o,u,h,g){if(o==="submit"&&u&&u.stateNode===g){var y=Fx((g[Pt]||null).action),D=h.submitter;D&&(o=(o=D[Pt]||null)?Fx(o.formAction):D.getAttribute("formAction"),o!==null&&(y=o,D=null));var U=new Nu("action","action",null,h,g);s.push({event:U,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ua!==0){var q=D?Vx(g,D):new FormData(g);Rm(u,{pending:!0,data:q,method:g.method,action:y},null,q)}}else typeof y=="function"&&(U.preventDefault(),q=D?Vx(g,D):new FormData(g),Rm(u,{pending:!0,data:q,method:g.method,action:y},y,q))},currentTarget:g}]})}}for(var cp=0;cp<Kh.length;cp++){var lp=Kh[cp],zO=lp.toLowerCase(),HO=lp[0].toUpperCase()+lp.slice(1);_i(zO,"on"+HO)}_i(SS,"onAnimationEnd"),_i(TS,"onAnimationIteration"),_i(xS,"onAnimationStart"),_i("dblclick","onDoubleClick"),_i("focusin","onFocus"),_i("focusout","onBlur"),_i(aO,"onTransitionRun"),_i(oO,"onTransitionStart"),_i(cO,"onTransitionCancel"),_i(wS,"onTransitionEnd"),ja("onMouseEnter",["mouseout","mouseover"]),ja("onMouseLeave",["mouseout","mouseover"]),ja("onPointerEnter",["pointerout","pointerover"]),ja("onPointerLeave",["pointerout","pointerover"]),$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$s("onBeforeInput",["compositionend","keypress","textInput","paste"]),$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(il));function zx(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],g=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var D=h.length-1;0<=D;D--){var U=h[D],q=U.instance,ne=U.currentTarget;if(U=U.listener,q!==y&&g.isPropagationStopped())break e;y=U,g.currentTarget=ne;try{y(g)}catch(me){rd(me)}g.currentTarget=null,y=q}else for(D=0;D<h.length;D++){if(U=h[D],q=U.instance,ne=U.currentTarget,U=U.listener,q!==y&&g.isPropagationStopped())break e;y=U,g.currentTarget=ne;try{y(g)}catch(me){rd(me)}g.currentTarget=null,y=q}}}}function rt(s,o){var u=o[Oa];u===void 0&&(u=o[Oa]=new Set);var h=s+"__bubble";u.has(h)||(Hx(o,s,2,!1),u.add(h))}function up(s,o,u){var h=0;o&&(h|=4),Hx(u,s,h,o)}var yd="_reactListening"+Math.random().toString(36).slice(2);function dp(s){if(!s[yd]){s[yd]=!0,Ub.forEach(function(u){u!=="selectionchange"&&(qO.has(u)||up(u,!1,s),up(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[yd]||(o[yd]=!0,up("selectionchange",!1,o))}}function Hx(s,o,u,h){switch(h1(o)){case 2:var g=vI;break;case 8:g=yI;break;default:g=Ep}u=g.bind(null,o,u,s),g=void 0,!Mh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(o,u,{capture:!0,passive:g}):s.addEventListener(o,u,!0):g!==void 0?s.addEventListener(o,u,{passive:g}):s.addEventListener(o,u,!1)}function fp(s,o,u,h,g){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var D=h.tag;if(D===3||D===4){var U=h.stateNode.containerInfo;if(U===g)break;if(D===4)for(D=h.return;D!==null;){var q=D.tag;if((q===3||q===4)&&D.stateNode.containerInfo===g)return;D=D.return}for(;U!==null;){if(D=Ia(U),D===null)return;if(q=D.tag,q===5||q===6||q===26||q===27){h=y=D;continue e}U=U.parentNode}}h=h.return}Xb(function(){var ne=y,me=Dh(u),Se=[];e:{var oe=CS.get(s);if(oe!==void 0){var ce=Nu,ze=s;switch(s){case"keypress":if(Pu(u)===0)break e;case"keydown":case"keyup":ce=jM;break;case"focusin":ze="focus",ce=Lh;break;case"focusout":ze="blur",ce=Lh;break;case"beforeblur":case"afterblur":ce=Lh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Qb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=kM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=VM;break;case SS:case TS:case xS:ce=_M;break;case wS:ce=HM;break;case"scroll":case"scrollend":ce=CM;break;case"wheel":ce=GM;break;case"copy":case"cut":case"paste":ce=DM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=tS;break;case"toggle":case"beforetoggle":ce=YM}var Be=(o&4)!==0,wt=!Be&&(s==="scroll"||s==="scrollend"),Q=Be?oe!==null?oe+"Capture":null:oe;Be=[];for(var Y=ne,ee;Y!==null;){var ve=Y;if(ee=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ee===null||Q===null||(ve=xc(Y,Q),ve!=null&&Be.push(rl(Y,ve,ee))),wt)break;Y=Y.return}0<Be.length&&(oe=new ce(oe,ze,null,u,me),Se.push({event:oe,listeners:Be}))}}if((o&7)===0){e:{if(oe=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",oe&&u!==Ph&&(ze=u.relatedTarget||u.fromElement)&&(Ia(ze)||ze[vn]))break e;if((ce||oe)&&(oe=me.window===me?me:(oe=me.ownerDocument)?oe.defaultView||oe.parentWindow:window,ce?(ze=u.relatedTarget||u.toElement,ce=ne,ze=ze?Ia(ze):null,ze!==null&&(wt=a(ze),Be=ze.tag,ze!==wt||Be!==5&&Be!==27&&Be!==6)&&(ze=null)):(ce=null,ze=ne),ce!==ze)){if(Be=Qb,ve="onMouseLeave",Q="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Be=tS,ve="onPointerLeave",Q="onPointerEnter",Y="pointer"),wt=ce==null?oe:Tc(ce),ee=ze==null?oe:Tc(ze),oe=new Be(ve,Y+"leave",ce,u,me),oe.target=wt,oe.relatedTarget=ee,ve=null,Ia(me)===ne&&(Be=new Be(Q,Y+"enter",ze,u,me),Be.target=ee,Be.relatedTarget=wt,ve=Be),wt=ve,ce&&ze)t:{for(Be=ce,Q=ze,Y=0,ee=Be;ee;ee=go(ee))Y++;for(ee=0,ve=Q;ve;ve=go(ve))ee++;for(;0<Y-ee;)Be=go(Be),Y--;for(;0<ee-Y;)Q=go(Q),ee--;for(;Y--;){if(Be===Q||Q!==null&&Be===Q.alternate)break t;Be=go(Be),Q=go(Q)}Be=null}else Be=null;ce!==null&&qx(Se,oe,ce,Be,!1),ze!==null&&wt!==null&&qx(Se,wt,ze,Be,!0)}}e:{if(oe=ne?Tc(ne):window,ce=oe.nodeName&&oe.nodeName.toLowerCase(),ce==="select"||ce==="input"&&oe.type==="file")var Ie=lS;else if(oS(oe))if(uS)Ie=iO;else{Ie=tO;var nt=eO}else ce=oe.nodeName,!ce||ce.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ne&&_h(ne.elementType)&&(Ie=lS):Ie=nO;if(Ie&&(Ie=Ie(s,ne))){cS(Se,Ie,u,me);break e}nt&&nt(s,oe,ne),s==="focusout"&&ne&&oe.type==="number"&&ne.memoizedProps.value!=null&&Ah(oe,"number",oe.value)}switch(nt=ne?Tc(ne):window,s){case"focusin":(oS(nt)||nt.contentEditable==="true")&&(Ga=nt,Hh=ne,Pc=null);break;case"focusout":Pc=Hh=Ga=null;break;case"mousedown":qh=!0;break;case"contextmenu":case"mouseup":case"dragend":qh=!1,yS(Se,u,me);break;case"selectionchange":if(sO)break;case"keydown":case"keyup":yS(Se,u,me)}var je;if(Bh)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else qa?sS(s,u)&&(Fe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Fe="onCompositionStart");Fe&&(nS&&u.locale!=="ko"&&(qa||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&qa&&(je=Zb()):(Qr=me,Oh="value"in Qr?Qr.value:Qr.textContent,qa=!0)),nt=bd(ne,Fe),0<nt.length&&(Fe=new eS(Fe,s,null,u,me),Se.push({event:Fe,listeners:nt}),je?Fe.data=je:(je=aS(u),je!==null&&(Fe.data=je)))),(je=WM?XM(s,u):ZM(s,u))&&(Fe=bd(ne,"onBeforeInput"),0<Fe.length&&(nt=new eS("onBeforeInput","beforeinput",null,u,me),Se.push({event:nt,listeners:Fe}),nt.data=je)),VO(Se,s,ne,u,me)}zx(Se,o)})}function rl(s,o,u){return{instance:s,listener:o,currentTarget:u}}function bd(s,o){for(var u=o+"Capture",h=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=xc(s,u),g!=null&&h.unshift(rl(s,g,y)),g=xc(s,o),g!=null&&h.push(rl(s,g,y))),s.tag===3)return h;s=s.return}return[]}function go(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function qx(s,o,u,h,g){for(var y=o._reactName,D=[];u!==null&&u!==h;){var U=u,q=U.alternate,ne=U.stateNode;if(U=U.tag,q!==null&&q===h)break;U!==5&&U!==26&&U!==27||ne===null||(q=ne,g?(ne=xc(u,y),ne!=null&&D.unshift(rl(u,ne,q))):g||(ne=xc(u,y),ne!=null&&D.push(rl(u,ne,q)))),u=u.return}D.length!==0&&s.push({event:o,listeners:D})}var GO=/\r\n?/g,KO=/\u0000|\uFFFD/g;function Gx(s){return(typeof s=="string"?s:""+s).replace(GO,`
`).replace(KO,"")}function Kx(s,o){return o=Gx(o),Gx(s)===o}function Sd(){}function xt(s,o,u,h,g,y){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Va(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Va(s,""+h);break;case"className":Eu(s,"class",h);break;case"tabIndex":Eu(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Eu(s,u,h);break;case"style":$b(s,h,y);break;case"data":if(o!=="object"){Eu(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Au(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(o!=="input"&&xt(s,o,"name",g.name,g,null),xt(s,o,"formEncType",g.formEncType,g,null),xt(s,o,"formMethod",g.formMethod,g,null),xt(s,o,"formTarget",g.formTarget,g,null)):(xt(s,o,"encType",g.encType,g,null),xt(s,o,"method",g.method,g,null),xt(s,o,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Au(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Sd);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Au(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":rt("beforetoggle",s),rt("toggle",s),Cu(s,"popover",h);break;case"xlinkActuate":yr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":yr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":yr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":yr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":yr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":yr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":yr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":yr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":yr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Cu(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=xM.get(u)||u,Cu(s,u,h))}}function hp(s,o,u,h,g,y){switch(u){case"style":$b(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?Va(s,h):(typeof h=="number"||typeof h=="bigint")&&Va(s,""+h);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Sd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Lb.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),o=u.slice(2,g?u.length-7:void 0),y=s[Pt]||null,y=y!=null?y[u]:null,typeof y=="function"&&s.removeEventListener(o,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,h,g);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):Cu(s,u,h)}}}function Rn(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var h=!1,g=!1,y;for(y in u)if(u.hasOwnProperty(y)){var D=u[y];if(D!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:xt(s,o,y,D,u,null)}}g&&xt(s,o,"srcSet",u.srcSet,u,null),h&&xt(s,o,"src",u.src,u,null);return;case"input":rt("invalid",s);var U=y=D=g=null,q=null,ne=null;for(h in u)if(u.hasOwnProperty(h)){var me=u[h];if(me!=null)switch(h){case"name":g=me;break;case"type":D=me;break;case"checked":q=me;break;case"defaultChecked":ne=me;break;case"value":y=me;break;case"defaultValue":U=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(i(137,o));break;default:xt(s,o,h,me,u,null)}}qb(s,y,U,q,ne,D,g,!1),ku(s);return;case"select":rt("invalid",s),h=D=y=null;for(g in u)if(u.hasOwnProperty(g)&&(U=u[g],U!=null))switch(g){case"value":y=U;break;case"defaultValue":D=U;break;case"multiple":h=U;default:xt(s,o,g,U,u,null)}o=y,u=D,s.multiple=!!h,o!=null?Fa(s,!!h,o,!1):u!=null&&Fa(s,!!h,u,!0);return;case"textarea":rt("invalid",s),y=g=h=null;for(D in u)if(u.hasOwnProperty(D)&&(U=u[D],U!=null))switch(D){case"value":h=U;break;case"defaultValue":g=U;break;case"children":y=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:xt(s,o,D,U,u,null)}Kb(s,h,g,y),ku(s);return;case"option":for(q in u)if(u.hasOwnProperty(q)&&(h=u[q],h!=null))switch(q){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:xt(s,o,q,h,u,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(h=0;h<il.length;h++)rt(il[h],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in u)if(u.hasOwnProperty(ne)&&(h=u[ne],h!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:xt(s,o,ne,h,u,null)}return;default:if(_h(o)){for(me in u)u.hasOwnProperty(me)&&(h=u[me],h!==void 0&&hp(s,o,me,h,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(h=u[U],h!=null&&xt(s,o,U,h,u,null))}function YO(s,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,D=null,U=null,q=null,ne=null,me=null;for(ce in u){var Se=u[ce];if(u.hasOwnProperty(ce)&&Se!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":q=Se;default:h.hasOwnProperty(ce)||xt(s,o,ce,null,h,Se)}}for(var oe in h){var ce=h[oe];if(Se=u[oe],h.hasOwnProperty(oe)&&(ce!=null||Se!=null))switch(oe){case"type":y=ce;break;case"name":g=ce;break;case"checked":ne=ce;break;case"defaultChecked":me=ce;break;case"value":D=ce;break;case"defaultValue":U=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,o));break;default:ce!==Se&&xt(s,o,oe,ce,h,Se)}}Rh(s,D,U,q,ne,me,y,g);return;case"select":ce=D=U=oe=null;for(y in u)if(q=u[y],u.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":ce=q;default:h.hasOwnProperty(y)||xt(s,o,y,null,h,q)}for(g in h)if(y=h[g],q=u[g],h.hasOwnProperty(g)&&(y!=null||q!=null))switch(g){case"value":oe=y;break;case"defaultValue":U=y;break;case"multiple":D=y;default:y!==q&&xt(s,o,g,y,h,q)}o=U,u=D,h=ce,oe!=null?Fa(s,!!u,oe,!1):!!h!=!!u&&(o!=null?Fa(s,!!u,o,!0):Fa(s,!!u,u?[]:"",!1));return;case"textarea":ce=oe=null;for(U in u)if(g=u[U],u.hasOwnProperty(U)&&g!=null&&!h.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:xt(s,o,U,null,h,g)}for(D in h)if(g=h[D],y=u[D],h.hasOwnProperty(D)&&(g!=null||y!=null))switch(D){case"value":oe=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&xt(s,o,D,g,h,y)}Gb(s,oe,ce);return;case"option":for(var ze in u)if(oe=u[ze],u.hasOwnProperty(ze)&&oe!=null&&!h.hasOwnProperty(ze))switch(ze){case"selected":s.selected=!1;break;default:xt(s,o,ze,null,h,oe)}for(q in h)if(oe=h[q],ce=u[q],h.hasOwnProperty(q)&&oe!==ce&&(oe!=null||ce!=null))switch(q){case"selected":s.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:xt(s,o,q,oe,h,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in u)oe=u[Be],u.hasOwnProperty(Be)&&oe!=null&&!h.hasOwnProperty(Be)&&xt(s,o,Be,null,h,oe);for(ne in h)if(oe=h[ne],ce=u[ne],h.hasOwnProperty(ne)&&oe!==ce&&(oe!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,o));break;default:xt(s,o,ne,oe,h,ce)}return;default:if(_h(o)){for(var wt in u)oe=u[wt],u.hasOwnProperty(wt)&&oe!==void 0&&!h.hasOwnProperty(wt)&&hp(s,o,wt,void 0,h,oe);for(me in h)oe=h[me],ce=u[me],!h.hasOwnProperty(me)||oe===ce||oe===void 0&&ce===void 0||hp(s,o,me,oe,h,ce);return}}for(var Q in u)oe=u[Q],u.hasOwnProperty(Q)&&oe!=null&&!h.hasOwnProperty(Q)&&xt(s,o,Q,null,h,oe);for(Se in h)oe=h[Se],ce=u[Se],!h.hasOwnProperty(Se)||oe===ce||oe==null&&ce==null||xt(s,o,Se,oe,h,ce)}var mp=null,pp=null;function Td(s){return s.nodeType===9?s:s.ownerDocument}function Yx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $x(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function gp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var vp=null;function $O(){var s=window.event;return s&&s.type==="popstate"?s===vp?!1:(vp=s,!0):(vp=null,!1)}var Wx=typeof setTimeout=="function"?setTimeout:void 0,WO=typeof clearTimeout=="function"?clearTimeout:void 0,Xx=typeof Promise=="function"?Promise:void 0,XO=typeof queueMicrotask=="function"?queueMicrotask:typeof Xx<"u"?function(s){return Xx.resolve(null).then(s).catch(ZO)}:Wx;function ZO(s){setTimeout(function(){throw s})}function ps(s){return s==="head"}function Zx(s,o){var u=o,h=0,g=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<h&&8>h){u=h;var D=s.ownerDocument;if(u&1&&sl(D.documentElement),u&2&&sl(D.body),u&4)for(u=D.head,sl(u),D=u.firstChild;D;){var U=D.nextSibling,q=D.nodeName;D[Sc]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&D.rel.toLowerCase()==="stylesheet"||u.removeChild(D),D=U}}if(g===0){s.removeChild(y),hl(o);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:h=u.charCodeAt(0)-48;else h=0;u=y}while(u);hl(o)}function yp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":yp(u),wh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function JO(s,o,u,h){for(;s.nodeType===1;){var g=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Sc])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Di(s.nextSibling),s===null)break}return null}function QO(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Di(s.nextSibling),s===null))return null;return s}function bp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function eI(s,o){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Di(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var Sp=null;function Jx(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}function Qx(s,o,u){switch(o=Td(u),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function sl(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);wh(s)}var Si=new Map,e1=new Set;function xd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Nr=ie.d;ie.d={f:tI,r:nI,D:iI,C:rI,L:sI,m:aI,X:cI,S:oI,M:lI};function tI(){var s=Nr.f(),o=hd();return s||o}function nI(s){var o=Ua(s);o!==null&&o.tag===5&&o.type==="form"?ST(o):Nr.r(s)}var vo=typeof document>"u"?null:document;function t1(s,o,u){var h=vo;if(h&&typeof o=="string"&&o){var g=hi(o);g='link[rel="'+s+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),e1.has(g)||(e1.add(g),s={rel:s,crossOrigin:u,href:o},h.querySelector(g)===null&&(o=h.createElement("link"),Rn(o,"link",s),yn(o),h.head.appendChild(o)))}}function iI(s){Nr.D(s),t1("dns-prefetch",s,null)}function rI(s,o){Nr.C(s,o),t1("preconnect",s,o)}function sI(s,o,u){Nr.L(s,o,u);var h=vo;if(h&&s&&o){var g='link[rel="preload"][as="'+hi(o)+'"]';o==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+hi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+hi(u.imageSizes)+'"]')):g+='[href="'+hi(s)+'"]';var y=g;switch(o){case"style":y=yo(s);break;case"script":y=bo(s)}Si.has(y)||(s=m({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),Si.set(y,s),h.querySelector(g)!==null||o==="style"&&h.querySelector(al(y))||o==="script"&&h.querySelector(ol(y))||(o=h.createElement("link"),Rn(o,"link",s),yn(o),h.head.appendChild(o)))}}function aI(s,o){Nr.m(s,o);var u=vo;if(u&&s){var h=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+hi(h)+'"][href="'+hi(s)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=bo(s)}if(!Si.has(y)&&(s=m({rel:"modulepreload",href:s},o),Si.set(y,s),u.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ol(y)))return}h=u.createElement("link"),Rn(h,"link",s),yn(h),u.head.appendChild(h)}}}function oI(s,o,u){Nr.S(s,o,u);var h=vo;if(h&&s){var g=La(h).hoistableStyles,y=yo(s);o=o||"default";var D=g.get(y);if(!D){var U={loading:0,preload:null};if(D=h.querySelector(al(y)))U.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":o},u),(u=Si.get(y))&&Tp(s,u);var q=D=h.createElement("link");yn(q),Rn(q,"link",s),q._p=new Promise(function(ne,me){q.onload=ne,q.onerror=me}),q.addEventListener("load",function(){U.loading|=1}),q.addEventListener("error",function(){U.loading|=2}),U.loading|=4,wd(D,o,h)}D={type:"stylesheet",instance:D,count:1,state:U},g.set(y,D)}}}function cI(s,o){Nr.X(s,o);var u=vo;if(u&&s){var h=La(u).hoistableScripts,g=bo(s),y=h.get(g);y||(y=u.querySelector(ol(g)),y||(s=m({src:s,async:!0},o),(o=Si.get(g))&&xp(s,o),y=u.createElement("script"),yn(y),Rn(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function lI(s,o){Nr.M(s,o);var u=vo;if(u&&s){var h=La(u).hoistableScripts,g=bo(s),y=h.get(g);y||(y=u.querySelector(ol(g)),y||(s=m({src:s,async:!0,type:"module"},o),(o=Si.get(g))&&xp(s,o),y=u.createElement("script"),yn(y),Rn(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function n1(s,o,u,h){var g=(g=De.current)?xd(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=yo(u.href),u=La(g).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=yo(u.href);var y=La(g).hoistableStyles,D=y.get(s);if(D||(g=g.ownerDocument||g,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,D),(y=g.querySelector(al(s)))&&!y._p&&(D.instance=y,D.state.loading=5),Si.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Si.set(s,u),y||uI(g,s,u,D.state))),o&&h===null)throw Error(i(528,""));return D}if(o&&h!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=bo(u),u=La(g).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function yo(s){return'href="'+hi(s)+'"'}function al(s){return'link[rel="stylesheet"]['+s+"]"}function i1(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function uI(s,o,u,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),Rn(o,"link",u),yn(o),s.head.appendChild(o))}function bo(s){return'[src="'+hi(s)+'"]'}function ol(s){return"script[async]"+s}function r1(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+hi(u.href)+'"]');if(h)return o.instance=h,yn(h),h;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),yn(h),Rn(h,"style",g),wd(h,u.precedence,s),o.instance=h;case"stylesheet":g=yo(u.href);var y=s.querySelector(al(g));if(y)return o.state.loading|=4,o.instance=y,yn(y),y;h=i1(u),(g=Si.get(g))&&Tp(h,g),y=(s.ownerDocument||s).createElement("link"),yn(y);var D=y;return D._p=new Promise(function(U,q){D.onload=U,D.onerror=q}),Rn(y,"link",h),o.state.loading|=4,wd(y,u.precedence,s),o.instance=y;case"script":return y=bo(u.src),(g=s.querySelector(ol(y)))?(o.instance=g,yn(g),g):(h=u,(g=Si.get(y))&&(h=m({},u),xp(h,g)),s=s.ownerDocument||s,g=s.createElement("script"),yn(g),Rn(g,"link",h),s.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,wd(h,u.precedence,s));return o.instance}function wd(s,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,D=0;D<h.length;D++){var U=h[D];if(U.dataset.precedence===o)y=U;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function Tp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function xp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Cd=null;function s1(s,o,u){if(Cd===null){var h=new Map,g=Cd=new Map;g.set(u,h)}else g=Cd,h=g.get(u),h||(h=new Map,g.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),g=0;g<u.length;g++){var y=u[g];if(!(y[Sc]||y[Xt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var D=y.getAttribute(o)||"";D=s+D;var U=h.get(D);U?U.push(y):h.set(D,[y])}}return h}function a1(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function dI(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function o1(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var cl=null;function fI(){}function hI(s,o,u){if(cl===null)throw Error(i(475));var h=cl;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=yo(u.href),y=s.querySelector(al(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=Ed.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=y,yn(y);return}y=s.ownerDocument||s,u=i1(u),(g=Si.get(g))&&Tp(u,g),y=y.createElement("link"),yn(y);var D=y;D._p=new Promise(function(U,q){D.onload=U,D.onerror=q}),Rn(y,"link",u),o.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=Ed.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function mI(){if(cl===null)throw Error(i(475));var s=cl;return s.stylesheets&&s.count===0&&wp(s,s.stylesheets),0<s.count?function(o){var u=setTimeout(function(){if(s.stylesheets&&wp(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u)}}:null}function Ed(){if(this.count--,this.count===0){if(this.stylesheets)wp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var kd=null;function wp(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,kd=new Map,o.forEach(pI,s),kd=null,Ed.call(s))}function pI(s,o){if(!(o.state.loading&4)){var u=kd.get(s);if(u)var h=u.get(null);else{u=new Map,kd.set(s,u);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var D=g[y];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(u.set(D.dataset.precedence,D),h=D)}h&&u.set(null,h)}g=o.instance,D=g.getAttribute("data-precedence"),y=u.get(D)||h,y===h&&u.set(null,g),u.set(D,g),this.count++,h=Ed.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),o.state.loading|=4}}var ll={$$typeof:M,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function gI(s,o,u,h,g,y,D,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bc(0),this.hiddenUpdates=bc(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function c1(s,o,u,h,g,y,D,U,q,ne,me,Se){return s=new gI(s,o,u,D,U,q,ne,Se),o=1,y===!0&&(o|=24),y=Jn(3,null,null,o),s.current=y,y.stateNode=s,o=rm(),o.refCount++,s.pooledCache=o,o.refCount++,y.memoizedState={element:h,isDehydrated:u,cache:o},cm(y),s}function l1(s){return s?(s=Wa,s):Wa}function u1(s,o,u,h,g,y){g=l1(g),h.context===null?h.context=g:h.pendingContext=g,h=ns(o),h.payload={element:u},y=y===void 0?null:y,y!==null&&(h.callback=y),u=is(s,h,o),u!==null&&(ii(u,s,o),Bc(u,s,o))}function d1(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function Cp(s,o){d1(s,o),(s=s.alternate)&&d1(s,o)}function f1(s){if(s.tag===13){var o=$a(s,67108864);o!==null&&ii(o,s,67108864),Cp(s,67108864)}}var Rd=!0;function vI(s,o,u,h){var g=K.T;K.T=null;var y=ie.p;try{ie.p=2,Ep(s,o,u,h)}finally{ie.p=y,K.T=g}}function yI(s,o,u,h){var g=K.T;K.T=null;var y=ie.p;try{ie.p=8,Ep(s,o,u,h)}finally{ie.p=y,K.T=g}}function Ep(s,o,u,h){if(Rd){var g=kp(h);if(g===null)fp(s,o,h,Ad,u),m1(s,h);else if(SI(g,s,o,u,h))h.stopPropagation();else if(m1(s,h),o&4&&-1<bI.indexOf(s)){for(;g!==null;){var y=Ua(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var D=ut(y.pendingLanes);if(D!==0){var U=y;for(U.pendingLanes|=2,U.entangledLanes|=2;D;){var q=1<<31-k(D);U.entanglements[1]|=q,D&=~q}Xi(y),(bt&6)===0&&(dd=_t()+500,nl(0))}}break;case 13:U=$a(y,2),U!==null&&ii(U,y,2),hd(),Cp(y,2)}if(y=kp(h),y===null&&fp(s,o,h,Ad,u),y===g)break;g=y}g!==null&&h.stopPropagation()}else fp(s,o,h,null,u)}}function kp(s){return s=Dh(s),Rp(s)}var Ad=null;function Rp(s){if(Ad=null,s=Ia(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=c(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Ad=s,null}function h1(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(B()){case _:return 2;case P:return 8;case V:case X:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Ap=!1,gs=null,vs=null,ys=null,ul=new Map,dl=new Map,bs=[],bI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m1(s,o){switch(s){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":ul.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(o.pointerId)}}function fl(s,o,u,h,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Ua(o),o!==null&&f1(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function SI(s,o,u,h,g){switch(o){case"focusin":return gs=fl(gs,s,o,u,h,g),!0;case"dragenter":return vs=fl(vs,s,o,u,h,g),!0;case"mouseover":return ys=fl(ys,s,o,u,h,g),!0;case"pointerover":var y=g.pointerId;return ul.set(y,fl(ul.get(y)||null,s,o,u,h,g)),!0;case"gotpointercapture":return y=g.pointerId,dl.set(y,fl(dl.get(y)||null,s,o,u,h,g)),!0}return!1}function p1(s){var o=Ia(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){s.blockedOn=o,fn(s.priority,function(){if(u.tag===13){var h=ni();h=rn(h);var g=$a(u,h);g!==null&&ii(g,u,h),Cp(u,h)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function _d(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=kp(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);Ph=h,u.target.dispatchEvent(h),Ph=null}else return o=Ua(u),o!==null&&f1(o),s.blockedOn=u,!1;o.shift()}return!0}function g1(s,o,u){_d(s)&&u.delete(o)}function TI(){Ap=!1,gs!==null&&_d(gs)&&(gs=null),vs!==null&&_d(vs)&&(vs=null),ys!==null&&_d(ys)&&(ys=null),ul.forEach(g1),dl.forEach(g1)}function Pd(s,o){s.blockedOn===o&&(s.blockedOn=null,Ap||(Ap=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,TI)))}var Dd=null;function v1(s){Dd!==s&&(Dd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Dd===s&&(Dd=null);for(var o=0;o<s.length;o+=3){var u=s[o],h=s[o+1],g=s[o+2];if(typeof h!="function"){if(Rp(h||u)===null)continue;break}var y=Ua(u);y!==null&&(s.splice(o,3),o-=3,Rm(y,{pending:!0,data:g,method:u.method,action:h},h,g))}}))}function hl(s){function o(q){return Pd(q,s)}gs!==null&&Pd(gs,s),vs!==null&&Pd(vs,s),ys!==null&&Pd(ys,s),ul.forEach(o),dl.forEach(o);for(var u=0;u<bs.length;u++){var h=bs[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<bs.length&&(u=bs[0],u.blockedOn===null);)p1(u),u.blockedOn===null&&bs.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var g=u[h],y=u[h+1],D=g[Pt]||null;if(typeof y=="function")D||v1(u);else if(D){var U=null;if(y&&y.hasAttribute("formAction")){if(g=y,D=y[Pt]||null)U=D.formAction;else if(Rp(g)!==null)continue}else U=D.action;typeof U=="function"?u[h+1]=U:(u.splice(h,3),h-=3),v1(u)}}}function _p(s){this._internalRoot=s}Nd.prototype.render=_p.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,h=ni();u1(u,h,s,o,null,null)},Nd.prototype.unmount=_p.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;u1(s.current,2,null,s,null,null),hd(),o[vn]=null}};function Nd(s){this._internalRoot=s}Nd.prototype.unstable_scheduleHydration=function(s){if(s){var o=Ys();s={blockedOn:null,target:s,priority:o};for(var u=0;u<bs.length&&o!==0&&o<bs[u].priority;u++);bs.splice(u,0,s),u===0&&p1(s)}};var y1=e.version;if(y1!=="19.1.1")throw Error(i(527,y1,"19.1.1"));ie.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(o),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var xI={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{Je=Md.inject(xI),O=Md}catch{}}return Ml.createRoot=function(s,o){if(!r(s))throw Error(i(299));var u=!1,h="",g=OT,y=IT,D=UT,U=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(U=o.unstable_transitionCallbacks)),o=c1(s,1,!1,null,null,u,h,g,y,D,U,null),s[vn]=o.current,dp(s),new _p(o)},Ml.hydrateRoot=function(s,o,u){if(!r(s))throw Error(i(299));var h=!1,g="",y=OT,D=IT,U=UT,q=null,ne=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(q=u.unstable_transitionCallbacks),u.formState!==void 0&&(ne=u.formState)),o=c1(s,1,!0,o,u??null,h,g,y,D,U,q,ne),o.context=l1(null),u=o.current,h=ni(),h=rn(h),g=ns(h),g.callback=null,is(u,g,h),u=h,o.current.lanes=u,Jr(o,u),Xi(o),s[vn]=o.current,dp(s),new Nd(o)},Ml.version="19.1.1",Ml}var Uk;function MW(){if(Uk)return Wg.exports;Uk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wg.exports=NW(),Wg.exports}var OW=MW();const IW=t=>OW.createRoot(t,{onUncaughtError:Hp((e,n)=>{Ke.error("Uncaught error in React tree",e,n)}),onCaughtError:Hp((e,n)=>{Ke.error("Caught error in React tree",e,n)}),onRecoverableError:Hp((e,n)=>{Ke.warn("Recoverable error in React tree",e,n)})}),UW=({error:t,resetError:e})=>(Re.useEffect(()=>{Ke.error("ErrorBoundary caught an error",t)},[t]),x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:x.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:x.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Something went wrong"}),x.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"We hit an unexpected error. Try refreshing the page or contact support if it continues."}),x.jsxs("div",{className:"space-x-3",children:[x.jsx("button",{onClick:e,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Try Again"}),x.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Refresh Page"})]})]})})})),LW=({children:t})=>x.jsx(ry,{fallback:UW,onError:(e,n)=>{Ke.error("ErrorBoundary captured an error",e,n)},beforeCapture:(e,n,i)=>{e.setTag("errorBoundary",!0),e.setContext("error",{message:n instanceof Error?n.message:"Unknown error",name:n instanceof Error?n.message:"UnknownError"}),i&&e.setContext("errorInfo",{info:String(i)})},children:t});_W();const jW=document.getElementById("root"),BW=IW(jW);BW.render(x.jsx(T.StrictMode,{children:x.jsx(LW,{children:x.jsx(xW,{})})}));
