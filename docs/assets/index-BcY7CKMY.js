function yN(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function KE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function y0(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var yp={exports:{}},ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1;function bN(){if(K1)return ol;K1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var c=null;if(a!==void 0&&(c=""+a),r.key!==void 0&&(c=""+r.key),"key"in r){a={};for(var l in r)l!=="key"&&(a[l]=r[l])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:c,ref:r!==void 0?r:null,props:a}}return ol.Fragment=e,ol.jsx=n,ol.jsxs=n,ol}var G1;function SN(){return G1||(G1=1,yp.exports=bN()),yp.exports}var C=SN(),bp={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y1;function TN(){if(Y1)return Ze;Y1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function v(V){return V===null||typeof V!="object"?null:(V=p&&V[p]||V["@@iterator"],typeof V=="function"?V:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,b={};function P(V,Q,me){this.props=V,this.context=Q,this.refs=b,this.updater=me||S}P.prototype.isReactComponent={},P.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},P.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function k(){}k.prototype=P.prototype;function O(V,Q,me){this.props=V,this.context=Q,this.refs=b,this.updater=me||S}var N=O.prototype=new k;N.constructor=O,x(N,P.prototype),N.isPureReactComponent=!0;var I=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function H(V,Q,me,le,Te,Me){return me=Me.ref,{$$typeof:t,type:V,key:Q,ref:me!==void 0?me:null,props:Me}}function z(V,Q){return H(V.type,Q,void 0,void 0,void 0,V.props)}function X(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function ae(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(me){return Q[me]})}var oe=/\/+/g;function fe(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?ae(""+V.key):Q.toString(36)}function ke(){}function Ae(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ke,ke):(V.status="pending",V.then(function(Q){V.status==="pending"&&(V.status="fulfilled",V.value=Q)},function(Q){V.status==="pending"&&(V.status="rejected",V.reason=Q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Oe(V,Q,me,le,Te){var Me=typeof V;(Me==="undefined"||Me==="boolean")&&(V=null);var _e=!1;if(V===null)_e=!0;else switch(Me){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(V.$$typeof){case t:case e:_e=!0;break;case m:return _e=V._init,Oe(_e(V._payload),Q,me,le,Te)}}if(_e)return Te=Te(V),_e=le===""?"."+fe(V,0):le,I(Te)?(me="",_e!=null&&(me=_e.replace(oe,"$&/")+"/"),Oe(Te,Q,me,"",function(Ve){return Ve})):Te!=null&&(X(Te)&&(Te=z(Te,me+(Te.key==null||V&&V.key===Te.key?"":(""+Te.key).replace(oe,"$&/")+"/")+_e)),Q.push(Te)),1;_e=0;var be=le===""?".":le+":";if(I(V))for(var Ce=0;Ce<V.length;Ce++)le=V[Ce],Me=be+fe(le,Ce),_e+=Oe(le,Q,me,Me,Te);else if(Ce=v(V),typeof Ce=="function")for(V=Ce.call(V),Ce=0;!(le=V.next()).done;)le=le.value,Me=be+fe(le,Ce++),_e+=Oe(le,Q,me,Me,Te);else if(Me==="object"){if(typeof V.then=="function")return Oe(Ae(V),Q,me,le,Te);throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return _e}function G(V,Q,me){if(V==null)return V;var le=[],Te=0;return Oe(V,le,"","",function(Me){return Q.call(me,Me,Te++)}),le}function ie(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(me){(V._status===0||V._status===-1)&&(V._status=1,V._result=me)},function(me){(V._status===0||V._status===-1)&&(V._status=2,V._result=me)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var J=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function Pe(){}return Ze.Children={map:G,forEach:function(V,Q,me){G(V,function(){Q.apply(this,arguments)},me)},count:function(V){var Q=0;return G(V,function(){Q++}),Q},toArray:function(V){return G(V,function(Q){return Q})||[]},only:function(V){if(!X(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ze.Component=P,Ze.Fragment=n,Ze.Profiler=r,Ze.PureComponent=O,Ze.StrictMode=i,Ze.Suspense=d,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(V){return D.H.useMemoCache(V)}},Ze.cache=function(V){return function(){return V.apply(null,arguments)}},Ze.cloneElement=function(V,Q,me){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var le=x({},V.props),Te=V.key,Me=void 0;if(Q!=null)for(_e in Q.ref!==void 0&&(Me=void 0),Q.key!==void 0&&(Te=""+Q.key),Q)!B.call(Q,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Q.ref===void 0||(le[_e]=Q[_e]);var _e=arguments.length-2;if(_e===1)le.children=me;else if(1<_e){for(var be=Array(_e),Ce=0;Ce<_e;Ce++)be[Ce]=arguments[Ce+2];le.children=be}return H(V.type,Te,void 0,void 0,Me,le)},Ze.createContext=function(V){return V={$$typeof:c,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:a,_context:V},V},Ze.createElement=function(V,Q,me){var le,Te={},Me=null;if(Q!=null)for(le in Q.key!==void 0&&(Me=""+Q.key),Q)B.call(Q,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Te[le]=Q[le]);var _e=arguments.length-2;if(_e===1)Te.children=me;else if(1<_e){for(var be=Array(_e),Ce=0;Ce<_e;Ce++)be[Ce]=arguments[Ce+2];Te.children=be}if(V&&V.defaultProps)for(le in _e=V.defaultProps,_e)Te[le]===void 0&&(Te[le]=_e[le]);return H(V,Me,void 0,void 0,null,Te)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(V){return{$$typeof:l,render:V}},Ze.isValidElement=X,Ze.lazy=function(V){return{$$typeof:m,_payload:{_status:-1,_result:V},_init:ie}},Ze.memo=function(V,Q){return{$$typeof:f,type:V,compare:Q===void 0?null:Q}},Ze.startTransition=function(V){var Q=D.T,me={};D.T=me;try{var le=V(),Te=D.S;Te!==null&&Te(me,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(Pe,J)}catch(Me){J(Me)}finally{D.T=Q}},Ze.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ze.use=function(V){return D.H.use(V)},Ze.useActionState=function(V,Q,me){return D.H.useActionState(V,Q,me)},Ze.useCallback=function(V,Q){return D.H.useCallback(V,Q)},Ze.useContext=function(V){return D.H.useContext(V)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(V,Q){return D.H.useDeferredValue(V,Q)},Ze.useEffect=function(V,Q,me){var le=D.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(V,Q)},Ze.useId=function(){return D.H.useId()},Ze.useImperativeHandle=function(V,Q,me){return D.H.useImperativeHandle(V,Q,me)},Ze.useInsertionEffect=function(V,Q){return D.H.useInsertionEffect(V,Q)},Ze.useLayoutEffect=function(V,Q){return D.H.useLayoutEffect(V,Q)},Ze.useMemo=function(V,Q){return D.H.useMemo(V,Q)},Ze.useOptimistic=function(V,Q){return D.H.useOptimistic(V,Q)},Ze.useReducer=function(V,Q,me){return D.H.useReducer(V,Q,me)},Ze.useRef=function(V){return D.H.useRef(V)},Ze.useState=function(V){return D.H.useState(V)},Ze.useSyncExternalStore=function(V,Q,me){return D.H.useSyncExternalStore(V,Q,me)},Ze.useTransition=function(){return D.H.useTransition()},Ze.version="19.1.1",Ze}var W1;function b0(){return W1||(W1=1,bp.exports=TN()),bp.exports}var T=b0();const Re=KE(T),GE=yN({__proto__:null,default:Re},[T]);var Sp={exports:{}},cl={},Tp={exports:{}},xp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1;function xN(){return $1||($1=1,function(t){function e(G,ie){var J=G.length;G.push(ie);e:for(;0<J;){var Pe=J-1>>>1,V=G[Pe];if(0<r(V,ie))G[Pe]=ie,G[J]=V,J=Pe;else break e}}function n(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var ie=G[0],J=G.pop();if(J!==ie){G[0]=J;e:for(var Pe=0,V=G.length,Q=V>>>1;Pe<Q;){var me=2*(Pe+1)-1,le=G[me],Te=me+1,Me=G[Te];if(0>r(le,J))Te<V&&0>r(Me,le)?(G[Pe]=Me,G[Te]=J,Pe=Te):(G[Pe]=le,G[me]=J,Pe=me);else if(Te<V&&0>r(Me,J))G[Pe]=Me,G[Te]=J,Pe=Te;else break e}}return ie}function r(G,ie){var J=G.sortIndex-ie.sortIndex;return J!==0?J:G.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var c=Date,l=c.now();t.unstable_now=function(){return c.now()-l}}var d=[],f=[],m=1,p=null,v=3,S=!1,x=!1,b=!1,P=!1,k=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function I(G){for(var ie=n(f);ie!==null;){if(ie.callback===null)i(f);else if(ie.startTime<=G)i(f),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=n(f)}}function D(G){if(b=!1,I(G),!x)if(n(d)!==null)x=!0,B||(B=!0,fe());else{var ie=n(f);ie!==null&&Oe(D,ie.startTime-G)}}var B=!1,H=-1,z=5,X=-1;function ae(){return P?!0:!(t.unstable_now()-X<z)}function oe(){if(P=!1,B){var G=t.unstable_now();X=G;var ie=!0;try{e:{x=!1,b&&(b=!1,O(H),H=-1),S=!0;var J=v;try{t:{for(I(G),p=n(d);p!==null&&!(p.expirationTime>G&&ae());){var Pe=p.callback;if(typeof Pe=="function"){p.callback=null,v=p.priorityLevel;var V=Pe(p.expirationTime<=G);if(G=t.unstable_now(),typeof V=="function"){p.callback=V,I(G),ie=!0;break t}p===n(d)&&i(d),I(G)}else i(d);p=n(d)}if(p!==null)ie=!0;else{var Q=n(f);Q!==null&&Oe(D,Q.startTime-G),ie=!1}}break e}finally{p=null,v=J,S=!1}ie=void 0}}finally{ie?fe():B=!1}}}var fe;if(typeof N=="function")fe=function(){N(oe)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Ae=ke.port2;ke.port1.onmessage=oe,fe=function(){Ae.postMessage(null)}}else fe=function(){k(oe,0)};function Oe(G,ie){H=k(function(){G(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(G){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var J=v;v=ie;try{return G()}finally{v=J}},t.unstable_requestPaint=function(){P=!0},t.unstable_runWithPriority=function(G,ie){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=v;v=G;try{return ie()}finally{v=J}},t.unstable_scheduleCallback=function(G,ie,J){var Pe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Pe+J:Pe):J=Pe,G){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=J+V,G={id:m++,callback:ie,priorityLevel:G,startTime:J,expirationTime:V,sortIndex:-1},J>Pe?(G.sortIndex=J,e(f,G),n(d)===null&&G===n(f)&&(b?(O(H),H=-1):b=!0,Oe(D,J-Pe))):(G.sortIndex=V,e(d,G),x||S||(x=!0,B||(B=!0,fe()))),G},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(G){var ie=v;return function(){var J=v;v=ie;try{return G.apply(this,arguments)}finally{v=J}}}}(xp)),xp}var X1;function wN(){return X1||(X1=1,Tp.exports=xN()),Tp.exports}var wp={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function CN(){if(Z1)return _n;Z1=1;var t=b0();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(d,f,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:p==null?null:""+p,children:d,containerInfo:f,implementation:m}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,_n.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(d,f,null,m)},_n.flushSync=function(d){var f=c.T,m=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=m,i.d.f()}},_n.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},_n.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},_n.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,p=l(m,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,S=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:v,fetchPriority:S}):m==="script"&&i.d.X(d,{crossOrigin:p,integrity:v,fetchPriority:S,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},_n.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=l(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},_n.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,p=l(m,f.crossOrigin);i.d.L(d,m,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},_n.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=l(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},_n.requestFormReset=function(d){i.d.r(d)},_n.unstable_batchedUpdates=function(d,f){return d(f)},_n.useFormState=function(d,f,m){return c.H.useFormState(d,f,m)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.1.1",_n}var J1;function YE(){if(J1)return wp.exports;J1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wp.exports=CN(),wp.exports}var Q1;function EN(){if(Q1)return cl;Q1=1;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=wN(),e=b0(),n=YE();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function c(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function l(s){if(a(s)!==s)throw Error(i(188))}function d(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var u=s,h=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(h=g.return,h!==null){u=h;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return l(g),s;if(y===h)return l(g),o;y=y.sibling}throw Error(i(188))}if(u.return!==h.return)u=g,h=y;else{for(var _=!1,U=g.child;U;){if(U===u){_=!0,u=g,h=y;break}if(U===h){_=!0,h=g,u=y;break}U=U.sibling}if(!_){for(U=y.child;U;){if(U===u){_=!0,u=y,h=g;break}if(U===h){_=!0,h=y,u=g;break}U=U.sibling}if(!_)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:o}function f(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=f(s),o!==null)return o;s=s.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),oe=Symbol.iterator;function fe(s){return s===null||typeof s!="object"?null:(s=oe&&s[oe]||s["@@iterator"],typeof s=="function"?s:null)}var ke=Symbol.for("react.client.reference");function Ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ke?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case P:return"Profiler";case b:return"StrictMode";case D:return"Suspense";case B:return"SuspenseList";case X:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case N:return(s.displayName||"Context")+".Provider";case O:return(s._context.displayName||"Context")+".Consumer";case I:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case H:return o=s.displayName||null,o!==null?o:Ae(s.type)||"Memo";case z:o=s._payload,s=s._init;try{return Ae(s(o))}catch{}}return null}var Oe=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Pe=[],V=-1;function Q(s){return{current:s}}function me(s){0>V||(s.current=Pe[V],Pe[V]=null,V--)}function le(s,o){V++,Pe[V]=s.current,s.current=o}var Te=Q(null),Me=Q(null),_e=Q(null),be=Q(null);function Ce(s,o){switch(le(_e,o),le(Me,s),le(Te,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?b1(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=b1(o),s=S1(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}me(Te),le(Te,s)}function Ve(){me(Te),me(Me),me(_e)}function qe(s){s.memoizedState!==null&&le(be,s);var o=Te.current,u=S1(o,s.type);o!==u&&(le(Me,s),le(Te,u))}function Xe(s){Me.current===s&&(me(Te),me(Me)),be.current===s&&(me(be),nl._currentValue=J)}var Ge=Object.prototype.hasOwnProperty,wt=t.unstable_scheduleCallback,Ut=t.unstable_cancelCallback,li=t.unstable_shouldYield,On=t.unstable_requestPaint,kt=t.unstable_now,j=t.unstable_getCurrentPriorityLevel,R=t.unstable_ImmediatePriority,A=t.unstable_UserBlockingPriority,F=t.unstable_NormalPriority,$=t.unstable_LowPriority,pe=t.unstable_IdlePriority,we=t.log,Ke=t.unstable_setDisableYieldValue,Je=null,M=null;function w(s){if(typeof we=="function"&&Ke(s),M&&typeof M.setStrictMode=="function")try{M.setStrictMode(Je,s)}catch{}}var E=Math.clz32?Math.clz32:re,L=Math.log,W=Math.LN2;function re(s){return s>>>=0,s===0?32:31-(L(s)/W|0)|0}var ge=256,Ye=4194304;function ut(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ht(s,o,u){var h=s.pendingLanes;if(h===0)return 0;var g=0,y=s.suspendedLanes,_=s.pingedLanes;s=s.warmLanes;var U=h&134217727;return U!==0?(h=U&~y,h!==0?g=ut(h):(_&=U,_!==0?g=ut(_):u||(u=U&~s,u!==0&&(g=ut(u))))):(U=h&~y,U!==0?g=ut(U):_!==0?g=ut(_):u||(u=h&~s,u!==0&&(g=ut(u)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,u=o&-o,y>=u||y===32&&(u&4194048)!==0)?o:g}function gt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function dt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ei(){var s=ge;return ge<<=1,(ge&4194048)===0&&(ge=256),s}function mu(){var s=Ye;return Ye<<=1,(Ye&62914560)===0&&(Ye=4194304),s}function fc(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Wr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function pu(s,o,u,h,g,y){var _=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var U=s.entanglements,q=s.expirationTimes,ne=s.hiddenUpdates;for(u=_&~u;0<u;){var he=31-E(u),Se=1<<he;U[he]=0,q[he]=-1;var se=ne[he];if(se!==null)for(ne[he]=null,he=0;he<se.length;he++){var ce=se[he];ce!==null&&(ce.lane&=-536870913)}u&=~Se}h!==0&&We(s,h,0),y!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=y&~(_&~o))}function We(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var h=31-E(o);s.entangledLanes|=o,s.entanglements[h]=s.entanglements[h]|1073741824|u&4194090}function Gt(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var h=31-E(u),g=1<<h;g&o|s[h]&o&&(s[h]|=o),u&=~g}}function tn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function xn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function zs(){var s=ie.p;return s!==0?s:(s=window.event,s===void 0?32:B1(s.type))}function un(s,o){var u=ie.p;try{return ie.p=s,o()}finally{ie.p=u}}var Yt=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Yt,Rt="__reactProps$"+Yt,pn="__reactContainer$"+Yt,_a="__reactEvents$"+Yt,hr="__reactListeners$"+Yt,ab="__reactHandles$"+Yt,ob="__reactResources$"+Yt,hc="__reactMarker$"+Yt;function dh(s){delete s[Wt],delete s[Rt],delete s[_a],delete s[hr],delete s[ab]}function Da(s){var o=s[Wt];if(o)return o;for(var u=s.parentNode;u;){if(o=u[pn]||u[Wt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=C1(s);s!==null;){if(u=s[Wt])return u;s=C1(s)}return o}s=u,u=s.parentNode}return null}function Ma(s){if(s=s[Wt]||s[pn]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function mc(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Oa(s){var o=s[ob];return o||(o=s[ob]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function gn(s){s[hc]=!0}var cb=new Set,lb={};function Hs(s,o){Na(s,o),Na(s+"Capture",o)}function Na(s,o){for(lb[s]=o,s=0;s<o.length;s++)cb.add(o[s])}var uM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ub={},db={};function dM(s){return Ge.call(db,s)?!0:Ge.call(ub,s)?!1:uM.test(s)?db[s]=!0:(ub[s]=!0,!1)}function gu(s,o,u){if(dM(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function vu(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function mr(s,o,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+h)}}var fh,fb;function Ia(s){if(fh===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);fh=o&&o[1]||"",fb=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fh+s+fb}var hh=!1;function mh(s,o){if(!s||hh)return"";hh=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(ce){var se=ce}Reflect.construct(s,[],Se)}else{try{Se.call()}catch(ce){se=ce}s.call(Se.prototype)}}else{try{throw Error()}catch(ce){se=ce}(Se=s())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(ce){if(ce&&se&&typeof ce.stack=="string")return[ce.stack,se.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),_=y[0],U=y[1];if(_&&U){var q=_.split(`
`),ne=U.split(`
`);for(g=h=0;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;for(;g<ne.length&&!ne[g].includes("DetermineComponentFrameRoot");)g++;if(h===q.length||g===ne.length)for(h=q.length-1,g=ne.length-1;1<=h&&0<=g&&q[h]!==ne[g];)g--;for(;1<=h&&0<=g;h--,g--)if(q[h]!==ne[g]){if(h!==1||g!==1)do if(h--,g--,0>g||q[h]!==ne[g]){var he=`
`+q[h].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=h&&0<=g);break}}}finally{hh=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ia(u):""}function fM(s){switch(s.tag){case 26:case 27:case 5:return Ia(s.type);case 16:return Ia("Lazy");case 13:return Ia("Suspense");case 19:return Ia("SuspenseList");case 0:case 15:return mh(s.type,!1);case 11:return mh(s.type.render,!1);case 1:return mh(s.type,!0);case 31:return Ia("Activity");default:return""}}function hb(s){try{var o="";do o+=fM(s),s=s.return;while(s);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function ui(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function mb(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function hM(s){var o=mb(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),h=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(_){h=""+_,y.call(this,_)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(_){h=""+_},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function yu(s){s._valueTracker||(s._valueTracker=hM(s))}function pb(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return s&&(h=mb(s)?s.checked?"true":"false":s.value),s=h,s!==u?(o.setValue(s),!0):!1}function bu(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var mM=/[\n"\\]/g;function di(s){return s.replace(mM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ph(s,o,u,h,g,y,_,U){s.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?s.type=_:s.removeAttribute("type"),o!=null?_==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+ui(o)):s.value!==""+ui(o)&&(s.value=""+ui(o)):_!=="submit"&&_!=="reset"||s.removeAttribute("value"),o!=null?gh(s,_,ui(o)):u!=null?gh(s,_,ui(u)):h!=null&&s.removeAttribute("value"),g==null&&y!=null&&(s.defaultChecked=!!y),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?s.name=""+ui(U):s.removeAttribute("name")}function gb(s,o,u,h,g,y,_,U){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),o!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;u=u!=null?""+ui(u):"",o=o!=null?""+ui(o):u,U||o===s.value||(s.value=o),s.defaultValue=o}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=U?s.checked:!!h,s.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.name=_)}function gh(s,o,u){o==="number"&&bu(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Ua(s,o,u,h){if(s=s.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=o.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&h&&(s[u].defaultSelected=!0)}else{for(u=""+ui(u),o=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function vb(s,o,u){if(o!=null&&(o=""+ui(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+ui(u):""}function yb(s,o,u,h){if(o==null){if(h!=null){if(u!=null)throw Error(i(92));if(Oe(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),o=u}u=ui(o),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h)}function La(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var pM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bb(s,o,u){var h=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":h?s.setProperty(o,u):typeof u!="number"||u===0||pM.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function Sb(s,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var g in o)h=o[g],o.hasOwnProperty(g)&&u[g]!==h&&bb(s,g,h)}else for(var y in o)o.hasOwnProperty(y)&&bb(s,y,o[y])}function vh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Su(s){return vM.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var yh=null;function bh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ja=null,Ba=null;function Tb(s){var o=Ma(s);if(o&&(s=o.stateNode)){var u=s[Rt]||null;e:switch(s=o.stateNode,o.type){case"input":if(ph(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+di(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==s&&h.form===s.form){var g=h[Rt]||null;if(!g)throw Error(i(90));ph(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<u.length;o++)h=u[o],h.form===s.form&&pb(h)}break e;case"textarea":vb(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Ua(s,!!u.multiple,o,!1)}}}var Sh=!1;function xb(s,o,u){if(Sh)return s(o,u);Sh=!0;try{var h=s(o);return h}finally{if(Sh=!1,(ja!==null||Ba!==null)&&(sd(),ja&&(o=ja,s=Ba,Ba=ja=null,Tb(o),s)))for(o=0;o<s.length;o++)Tb(s[o])}}function pc(s,o){var u=s.stateNode;if(u===null)return null;var h=u[Rt]||null;if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Th=!1;if(pr)try{var gc={};Object.defineProperty(gc,"passive",{get:function(){Th=!0}}),window.addEventListener("test",gc,gc),window.removeEventListener("test",gc,gc)}catch{Th=!1}var $r=null,xh=null,Tu=null;function wb(){if(Tu)return Tu;var s,o=xh,u=o.length,h,g="value"in $r?$r.value:$r.textContent,y=g.length;for(s=0;s<u&&o[s]===g[s];s++);var _=u-s;for(h=1;h<=_&&o[u-h]===g[y-h];h++);return Tu=g.slice(s,1<h?1-h:void 0)}function xu(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function wu(){return!0}function Cb(){return!1}function jn(s){function o(u,h,g,y,_){this._reactName=u,this._targetInst=g,this.type=h,this.nativeEvent=y,this.target=_,this.currentTarget=null;for(var U in s)s.hasOwnProperty(U)&&(u=s[U],this[U]=u?u(y):y[U]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wu:Cb,this.isPropagationStopped=Cb,this}return m(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=wu)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=wu)},persist:function(){},isPersistent:wu}),o}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cu=jn(qs),vc=m({},qs,{view:0,detail:0}),yM=jn(vc),wh,Ch,yc,Eu=m({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yc&&(yc&&s.type==="mousemove"?(wh=s.screenX-yc.screenX,Ch=s.screenY-yc.screenY):Ch=wh=0,yc=s),wh)},movementY:function(s){return"movementY"in s?s.movementY:Ch}}),Eb=jn(Eu),bM=m({},Eu,{dataTransfer:0}),SM=jn(bM),TM=m({},vc,{relatedTarget:0}),Eh=jn(TM),xM=m({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),wM=jn(xM),CM=m({},qs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),EM=jn(CM),kM=m({},qs,{data:0}),kb=jn(kM),RM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _M(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=PM[s])?!!o[s]:!1}function kh(){return _M}var DM=m({},vc,{key:function(s){if(s.key){var o=RM[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=xu(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?AM[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(s){return s.type==="keypress"?xu(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?xu(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),MM=jn(DM),OM=m({},Eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rb=jn(OM),NM=m({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),IM=jn(NM),UM=m({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),LM=jn(UM),jM=m({},Eu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),BM=jn(jM),FM=m({},qs,{newState:0,oldState:0}),VM=jn(FM),zM=[9,13,27,32],Rh=pr&&"CompositionEvent"in window,bc=null;pr&&"documentMode"in document&&(bc=document.documentMode);var HM=pr&&"TextEvent"in window&&!bc,Ab=pr&&(!Rh||bc&&8<bc&&11>=bc),Pb=" ",_b=!1;function Db(s,o){switch(s){case"keyup":return zM.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mb(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Fa=!1;function qM(s,o){switch(s){case"compositionend":return Mb(o);case"keypress":return o.which!==32?null:(_b=!0,Pb);case"textInput":return s=o.data,s===Pb&&_b?null:s;default:return null}}function KM(s,o){if(Fa)return s==="compositionend"||!Rh&&Db(s,o)?(s=wb(),Tu=xh=$r=null,Fa=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ab&&o.locale!=="ko"?null:o.data;default:return null}}var GM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ob(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!GM[s.type]:o==="textarea"}function Nb(s,o,u,h){ja?Ba?Ba.push(h):Ba=[h]:ja=h,o=dd(o,"onChange"),0<o.length&&(u=new Cu("onChange","change",null,u,h),s.push({event:u,listeners:o}))}var Sc=null,Tc=null;function YM(s){m1(s,0)}function ku(s){var o=mc(s);if(pb(o))return s}function Ib(s,o){if(s==="change")return o}var Ub=!1;if(pr){var Ah;if(pr){var Ph="oninput"in document;if(!Ph){var Lb=document.createElement("div");Lb.setAttribute("oninput","return;"),Ph=typeof Lb.oninput=="function"}Ah=Ph}else Ah=!1;Ub=Ah&&(!document.documentMode||9<document.documentMode)}function jb(){Sc&&(Sc.detachEvent("onpropertychange",Bb),Tc=Sc=null)}function Bb(s){if(s.propertyName==="value"&&ku(Tc)){var o=[];Nb(o,Tc,s,bh(s)),xb(YM,o)}}function WM(s,o,u){s==="focusin"?(jb(),Sc=o,Tc=u,Sc.attachEvent("onpropertychange",Bb)):s==="focusout"&&jb()}function $M(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return ku(Tc)}function XM(s,o){if(s==="click")return ku(o)}function ZM(s,o){if(s==="input"||s==="change")return ku(o)}function JM(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var $n=typeof Object.is=="function"?Object.is:JM;function xc(s,o){if($n(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var g=u[h];if(!Ge.call(o,g)||!$n(s[g],o[g]))return!1}return!0}function Fb(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vb(s,o){var u=Fb(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=o&&h>=o)return{node:u,offset:o-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Fb(u)}}function zb(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?zb(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Hb(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=bu(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=bu(s.document)}return o}function _h(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var QM=pr&&"documentMode"in document&&11>=document.documentMode,Va=null,Dh=null,wc=null,Mh=!1;function qb(s,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Mh||Va==null||Va!==bu(h)||(h=Va,"selectionStart"in h&&_h(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),wc&&xc(wc,h)||(wc=h,h=dd(Dh,"onSelect"),0<h.length&&(o=new Cu("onSelect","select",null,o,u),s.push({event:o,listeners:h}),o.target=Va)))}function Ks(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var za={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},Oh={},Kb={};pr&&(Kb=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function Gs(s){if(Oh[s])return Oh[s];if(!za[s])return s;var o=za[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Kb)return Oh[s]=o[u];return s}var Gb=Gs("animationend"),Yb=Gs("animationiteration"),Wb=Gs("animationstart"),eO=Gs("transitionrun"),tO=Gs("transitionstart"),nO=Gs("transitioncancel"),$b=Gs("transitionend"),Xb=new Map,Nh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nh.push("scrollEnd");function ki(s,o){Xb.set(s,o),Hs(o,[s])}var Zb=new WeakMap;function fi(s,o){if(typeof s=="object"&&s!==null){var u=Zb.get(s);return u!==void 0?u:(o={value:s,source:o,stack:hb(o)},Zb.set(s,o),o)}return{value:s,source:o,stack:hb(o)}}var hi=[],Ha=0,Ih=0;function Ru(){for(var s=Ha,o=Ih=Ha=0;o<s;){var u=hi[o];hi[o++]=null;var h=hi[o];hi[o++]=null;var g=hi[o];hi[o++]=null;var y=hi[o];if(hi[o++]=null,h!==null&&g!==null){var _=h.pending;_===null?g.next=g:(g.next=_.next,_.next=g),h.pending=g}y!==0&&Jb(u,g,y)}}function Au(s,o,u,h){hi[Ha++]=s,hi[Ha++]=o,hi[Ha++]=u,hi[Ha++]=h,Ih|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Uh(s,o,u,h){return Au(s,o,u,h),Pu(s)}function qa(s,o){return Au(s,null,null,o),Pu(s)}function Jb(s,o,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var g=!1,y=s.return;y!==null;)y.childLanes|=u,h=y.alternate,h!==null&&(h.childLanes|=u),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(g=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,g&&o!==null&&(g=31-E(u),s=y.hiddenUpdates,h=s[g],h===null?s[g]=[o]:h.push(o),o.lane=u|536870912),y):null}function Pu(s){if(50<Wc)throw Wc=0,zm=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ka={};function iO(s,o,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(s,o,u,h){return new iO(s,o,u,h)}function Lh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function gr(s,o){var u=s.alternate;return u===null?(u=Xn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Qb(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function _u(s,o,u,h,g,y){var _=0;if(h=s,typeof s=="function")Lh(s)&&(_=1);else if(typeof s=="string")_=sN(s,u,Te.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case X:return s=Xn(31,u,o,g),s.elementType=X,s.lanes=y,s;case x:return Ys(u.children,g,y,o);case b:_=8,g|=24;break;case P:return s=Xn(12,u,o,g|2),s.elementType=P,s.lanes=y,s;case D:return s=Xn(13,u,o,g),s.elementType=D,s.lanes=y,s;case B:return s=Xn(19,u,o,g),s.elementType=B,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:case N:_=10;break e;case O:_=9;break e;case I:_=11;break e;case H:_=14;break e;case z:_=16,h=null;break e}_=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return o=Xn(_,u,o,g),o.elementType=s,o.type=h,o.lanes=y,o}function Ys(s,o,u,h){return s=Xn(7,s,h,o),s.lanes=u,s}function jh(s,o,u){return s=Xn(6,s,null,o),s.lanes=u,s}function Bh(s,o,u){return o=Xn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Ga=[],Ya=0,Du=null,Mu=0,mi=[],pi=0,Ws=null,vr=1,yr="";function $s(s,o){Ga[Ya++]=Mu,Ga[Ya++]=Du,Du=s,Mu=o}function eS(s,o,u){mi[pi++]=vr,mi[pi++]=yr,mi[pi++]=Ws,Ws=s;var h=vr;s=yr;var g=32-E(h)-1;h&=~(1<<g),u+=1;var y=32-E(o)+g;if(30<y){var _=g-g%5;y=(h&(1<<_)-1).toString(32),h>>=_,g-=_,vr=1<<32-E(o)+g|u<<g|h,yr=y+s}else vr=1<<y|u<<g|h,yr=s}function Fh(s){s.return!==null&&($s(s,1),eS(s,1,0))}function Vh(s){for(;s===Du;)Du=Ga[--Ya],Ga[Ya]=null,Mu=Ga[--Ya],Ga[Ya]=null;for(;s===Ws;)Ws=mi[--pi],mi[pi]=null,yr=mi[--pi],mi[pi]=null,vr=mi[--pi],mi[pi]=null}var Nn=null,Bt=null,pt=!1,Xs=null,zi=!1,zh=Error(i(519));function Zs(s){var o=Error(i(418,""));throw kc(fi(o,s)),zh}function tS(s){var o=s.stateNode,u=s.type,h=s.memoizedProps;switch(o[Wt]=s,o[Rt]=h,u){case"dialog":rt("cancel",o),rt("close",o);break;case"iframe":case"object":case"embed":rt("load",o);break;case"video":case"audio":for(u=0;u<Xc.length;u++)rt(Xc[u],o);break;case"source":rt("error",o);break;case"img":case"image":case"link":rt("error",o),rt("load",o);break;case"details":rt("toggle",o);break;case"input":rt("invalid",o),gb(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),yu(o);break;case"select":rt("invalid",o);break;case"textarea":rt("invalid",o),yb(o,h.value,h.defaultValue,h.children),yu(o)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||h.suppressHydrationWarning===!0||y1(o.textContent,u)?(h.popover!=null&&(rt("beforetoggle",o),rt("toggle",o)),h.onScroll!=null&&rt("scroll",o),h.onScrollEnd!=null&&rt("scrollend",o),h.onClick!=null&&(o.onclick=fd),o=!0):o=!1,o||Zs(s)}function nS(s){for(Nn=s.return;Nn;)switch(Nn.tag){case 5:case 13:zi=!1;return;case 27:case 3:zi=!0;return;default:Nn=Nn.return}}function Cc(s){if(s!==Nn)return!1;if(!pt)return nS(s),pt=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||rp(s.type,s.memoizedProps)),u=!u),u&&Bt&&Zs(s),nS(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(o===0){Bt=Ai(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;s=s.nextSibling}Bt=null}}else o===27?(o=Bt,ds(s.type)?(s=cp,cp=null,Bt=s):Bt=o):Bt=Nn?Ai(s.stateNode.nextSibling):null;return!0}function Ec(){Bt=Nn=null,pt=!1}function iS(){var s=Xs;return s!==null&&(Vn===null?Vn=s:Vn.push.apply(Vn,s),Xs=null),s}function kc(s){Xs===null?Xs=[s]:Xs.push(s)}var Hh=Q(null),Js=null,br=null;function Xr(s,o,u){le(Hh,o._currentValue),o._currentValue=u}function Sr(s){s._currentValue=Hh.current,me(Hh)}function qh(s,o,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),s===u)break;s=s.return}}function Kh(s,o,u,h){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var y=g.dependencies;if(y!==null){var _=g.child;y=y.firstContext;e:for(;y!==null;){var U=y;y=g;for(var q=0;q<o.length;q++)if(U.context===o[q]){y.lanes|=u,U=y.alternate,U!==null&&(U.lanes|=u),qh(y.return,u,s),h||(_=null);break e}y=U.next}}else if(g.tag===18){if(_=g.return,_===null)throw Error(i(341));_.lanes|=u,y=_.alternate,y!==null&&(y.lanes|=u),qh(_,u,s),_=null}else _=g.child;if(_!==null)_.return=g;else for(_=g;_!==null;){if(_===s){_=null;break}if(g=_.sibling,g!==null){g.return=_.return,_=g;break}_=_.return}g=_}}function Rc(s,o,u,h){s=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var _=g.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var U=g.type;$n(g.pendingProps.value,_.value)||(s!==null?s.push(U):s=[U])}}else if(g===be.current){if(_=g.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(nl):s=[nl])}g=g.return}s!==null&&Kh(o,s,u,h),o.flags|=262144}function Ou(s){for(s=s.firstContext;s!==null;){if(!$n(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Qs(s){Js=s,br=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Pn(s){return rS(Js,s)}function Nu(s,o){return Js===null&&Qs(s),rS(s,o)}function rS(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},br===null){if(s===null)throw Error(i(308));br=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else br=br.next=o;return u}var rO=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},sO=t.unstable_scheduleCallback,aO=t.unstable_NormalPriority,dn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gh(){return{controller:new rO,data:new Map,refCount:0}}function Ac(s){s.refCount--,s.refCount===0&&sO(aO,function(){s.controller.abort()})}var Pc=null,Yh=0,Wa=0,$a=null;function oO(s,o){if(Pc===null){var u=Pc=[];Yh=0,Wa=$m(),$a={status:"pending",value:void 0,then:function(h){u.push(h)}}}return Yh++,o.then(sS,sS),o}function sS(){if(--Yh===0&&Pc!==null){$a!==null&&($a.status="fulfilled");var s=Pc;Pc=null,Wa=0,$a=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function cO(s,o){var u=[],h={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return s.then(function(){h.status="fulfilled",h.value=o;for(var g=0;g<u.length;g++)(0,u[g])(o)},function(g){for(h.status="rejected",h.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),h}var aS=G.S;G.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&oO(s,o),aS!==null&&aS(s,o)};var ea=Q(null);function Wh(){var s=ea.current;return s!==null?s:At.pooledCache}function Iu(s,o){o===null?le(ea,ea.current):le(ea,o.pool)}function oS(){var s=Wh();return s===null?null:{parent:dn._currentValue,pool:s}}var _c=Error(i(460)),cS=Error(i(474)),Uu=Error(i(542)),$h={then:function(){}};function lS(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Lu(){}function uS(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Lu,Lu),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,fS(s),s;default:if(typeof o.status=="string")o.then(Lu,Lu);else{if(s=At,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(h){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=h}},function(h){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,fS(s),s}throw Dc=o,_c}}var Dc=null;function dS(){if(Dc===null)throw Error(i(459));var s=Dc;return Dc=null,s}function fS(s){if(s===_c||s===Uu)throw Error(i(483))}var Zr=!1;function Xh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zh(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Jr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Qr(s,o,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(vt&2)!==0){var g=h.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),h.pending=o,o=Pu(s),Jb(s,null,u),o}return Au(s,h,o,u),Pu(s)}function Mc(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,Gt(s,u)}}function Jh(s,o){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var _={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?g=y=_:y=y.next=_,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var Qh=!1;function Oc(){if(Qh){var s=$a;if(s!==null)throw s}}function Nc(s,o,u,h){Qh=!1;var g=s.updateQueue;Zr=!1;var y=g.firstBaseUpdate,_=g.lastBaseUpdate,U=g.shared.pending;if(U!==null){g.shared.pending=null;var q=U,ne=q.next;q.next=null,_===null?y=ne:_.next=ne,_=q;var he=s.alternate;he!==null&&(he=he.updateQueue,U=he.lastBaseUpdate,U!==_&&(U===null?he.firstBaseUpdate=ne:U.next=ne,he.lastBaseUpdate=q))}if(y!==null){var Se=g.baseState;_=0,he=ne=q=null,U=y;do{var se=U.lane&-536870913,ce=se!==U.lane;if(ce?(ct&se)===se:(h&se)===se){se!==0&&se===Wa&&(Qh=!0),he!==null&&(he=he.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var ze=s,Be=U;se=o;var Tt=u;switch(Be.tag){case 1:if(ze=Be.payload,typeof ze=="function"){Se=ze.call(Tt,Se,se);break e}Se=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Be.payload,se=typeof ze=="function"?ze.call(Tt,Se,se):ze,se==null)break e;Se=m({},Se,se);break e;case 2:Zr=!0}}se=U.callback,se!==null&&(s.flags|=64,ce&&(s.flags|=8192),ce=g.callbacks,ce===null?g.callbacks=[se]:ce.push(se))}else ce={lane:se,tag:U.tag,payload:U.payload,callback:U.callback,next:null},he===null?(ne=he=ce,q=Se):he=he.next=ce,_|=se;if(U=U.next,U===null){if(U=g.shared.pending,U===null)break;ce=U,U=ce.next,ce.next=null,g.lastBaseUpdate=ce,g.shared.pending=null}}while(!0);he===null&&(q=Se),g.baseState=q,g.firstBaseUpdate=ne,g.lastBaseUpdate=he,y===null&&(g.shared.lanes=0),os|=_,s.lanes=_,s.memoizedState=Se}}function hS(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function mS(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)hS(u[s],o)}var Xa=Q(null),ju=Q(0);function pS(s,o){s=Rr,le(ju,s),le(Xa,o),Rr=s|o.baseLanes}function em(){le(ju,Rr),le(Xa,Xa.current)}function tm(){Rr=ju.current,me(Xa),me(ju)}var es=0,Qe=null,bt=null,nn=null,Bu=!1,Za=!1,ta=!1,Fu=0,Ic=0,Ja=null,lO=0;function $t(){throw Error(i(321))}function nm(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!$n(s[u],o[u]))return!1;return!0}function im(s,o,u,h,g,y){return es=y,Qe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=s===null||s.memoizedState===null?JS:QS,ta=!1,y=u(h,g),ta=!1,Za&&(y=vS(o,u,h,g)),gS(s),y}function gS(s){G.H=Gu;var o=bt!==null&&bt.next!==null;if(es=0,nn=bt=Qe=null,Bu=!1,Ic=0,Ja=null,o)throw Error(i(300));s===null||vn||(s=s.dependencies,s!==null&&Ou(s)&&(vn=!0))}function vS(s,o,u,h){Qe=s;var g=0;do{if(Za&&(Ja=null),Ic=0,Za=!1,25<=g)throw Error(i(301));if(g+=1,nn=bt=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}G.H=gO,y=o(u,h)}while(Za);return y}function uO(){var s=G.H,o=s.useState()[0];return o=typeof o.then=="function"?Uc(o):o,s=s.useState()[0],(bt!==null?bt.memoizedState:null)!==s&&(Qe.flags|=1024),o}function rm(){var s=Fu!==0;return Fu=0,s}function sm(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function am(s){if(Bu){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Bu=!1}es=0,nn=bt=Qe=null,Za=!1,Ic=Fu=0,Ja=null}function Bn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Qe.memoizedState=nn=s:nn=nn.next=s,nn}function rn(){if(bt===null){var s=Qe.alternate;s=s!==null?s.memoizedState:null}else s=bt.next;var o=nn===null?Qe.memoizedState:nn.next;if(o!==null)nn=o,bt=s;else{if(s===null)throw Qe.alternate===null?Error(i(467)):Error(i(310));bt=s,s={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},nn===null?Qe.memoizedState=nn=s:nn=nn.next=s}return nn}function om(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uc(s){var o=Ic;return Ic+=1,Ja===null&&(Ja=[]),s=uS(Ja,s,o),o=Qe,(nn===null?o.memoizedState:nn.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?JS:QS),s}function Vu(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Uc(s);if(s.$$typeof===N)return Pn(s)}throw Error(i(438,String(s)))}function cm(s){var o=null,u=Qe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var h=Qe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=om(),Qe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),h=0;h<s;h++)u[h]=ae;return o.index++,u}function Tr(s,o){return typeof o=="function"?o(s):o}function zu(s){var o=rn();return lm(o,bt,s)}function lm(s,o,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var g=s.baseQueue,y=h.pending;if(y!==null){if(g!==null){var _=g.next;g.next=y.next,y.next=_}o.baseQueue=g=y,h.pending=null}if(y=s.baseState,g===null)s.memoizedState=y;else{o=g.next;var U=_=null,q=null,ne=o,he=!1;do{var Se=ne.lane&-536870913;if(Se!==ne.lane?(ct&Se)===Se:(es&Se)===Se){var se=ne.revertLane;if(se===0)q!==null&&(q=q.next={lane:0,revertLane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),Se===Wa&&(he=!0);else if((es&se)===se){ne=ne.next,se===Wa&&(he=!0);continue}else Se={lane:0,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(U=q=Se,_=y):q=q.next=Se,Qe.lanes|=se,os|=se;Se=ne.action,ta&&u(y,Se),y=ne.hasEagerState?ne.eagerState:u(y,Se)}else se={lane:Se,revertLane:ne.revertLane,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},q===null?(U=q=se,_=y):q=q.next=se,Qe.lanes|=Se,os|=Se;ne=ne.next}while(ne!==null&&ne!==o);if(q===null?_=y:q.next=U,!$n(y,s.memoizedState)&&(vn=!0,he&&(u=$a,u!==null)))throw u;s.memoizedState=y,s.baseState=_,s.baseQueue=q,h.lastRenderedState=y}return g===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function um(s){var o=rn(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var _=g=g.next;do y=s(y,_.action),_=_.next;while(_!==g);$n(y,o.memoizedState)||(vn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,h]}function yS(s,o,u){var h=Qe,g=rn(),y=pt;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=o();var _=!$n((bt||g).memoizedState,u);_&&(g.memoizedState=u,vn=!0),g=g.queue;var U=TS.bind(null,h,g,s);if(Lc(2048,8,U,[s]),g.getSnapshot!==o||_||nn!==null&&nn.memoizedState.tag&1){if(h.flags|=2048,Qa(9,Hu(),SS.bind(null,h,g,u,o),null),At===null)throw Error(i(349));y||(es&124)!==0||bS(h,o,u)}return u}function bS(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Qe.updateQueue,o===null?(o=om(),Qe.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function SS(s,o,u,h){o.value=u,o.getSnapshot=h,xS(o)&&wS(s)}function TS(s,o,u){return u(function(){xS(o)&&wS(s)})}function xS(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!$n(s,u)}catch{return!0}}function wS(s){var o=qa(s,2);o!==null&&ti(o,s,2)}function dm(s){var o=Bn();if(typeof s=="function"){var u=s;if(s=u(),ta){w(!0);try{u()}finally{w(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:s},o}function CS(s,o,u,h){return s.baseState=u,lm(s,bt,typeof h=="function"?h:Tr)}function dO(s,o,u,h,g){if(Ku(s))throw Error(i(485));if(s=o.action,s!==null){var y={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){y.listeners.push(_)}};G.T!==null?u(!0):y.isTransition=!1,h(y),u=o.pending,u===null?(y.next=o.pending=y,ES(o,y)):(y.next=u.next,o.pending=u.next=y)}}function ES(s,o){var u=o.action,h=o.payload,g=s.state;if(o.isTransition){var y=G.T,_={};G.T=_;try{var U=u(g,h),q=G.S;q!==null&&q(_,U),kS(s,o,U)}catch(ne){fm(s,o,ne)}finally{G.T=y}}else try{y=u(g,h),kS(s,o,y)}catch(ne){fm(s,o,ne)}}function kS(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){RS(s,o,h)},function(h){return fm(s,o,h)}):RS(s,o,u)}function RS(s,o,u){o.status="fulfilled",o.value=u,AS(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,ES(s,u)))}function fm(s,o,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=u,AS(o),o=o.next;while(o!==h)}s.action=null}function AS(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function PS(s,o){return o}function _S(s,o){if(pt){var u=At.formState;if(u!==null){e:{var h=Qe;if(pt){if(Bt){t:{for(var g=Bt,y=zi;g.nodeType!==8;){if(!y){g=null;break t}if(g=Ai(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Bt=Ai(g.nextSibling),h=g.data==="F!";break e}}Zs(h)}h=!1}h&&(o=u[0])}}return u=Bn(),u.memoizedState=u.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:PS,lastRenderedState:o},u.queue=h,u=$S.bind(null,Qe,h),h.dispatch=u,h=dm(!1),y=vm.bind(null,Qe,!1,h.queue),h=Bn(),g={state:o,dispatch:null,action:s,pending:null},h.queue=g,u=dO.bind(null,Qe,g,y,u),g.dispatch=u,h.memoizedState=s,[o,u,!1]}function DS(s){var o=rn();return MS(o,bt,s)}function MS(s,o,u){if(o=lm(s,o,PS)[0],s=zu(Tr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=Uc(o)}catch(_){throw _===_c?Uu:_}else h=o;o=rn();var g=o.queue,y=g.dispatch;return u!==o.memoizedState&&(Qe.flags|=2048,Qa(9,Hu(),fO.bind(null,g,u),null)),[h,y,s]}function fO(s,o){s.action=o}function OS(s){var o=rn(),u=bt;if(u!==null)return MS(o,u,s);rn(),o=o.memoizedState,u=rn();var h=u.queue.dispatch;return u.memoizedState=s,[o,h,!1]}function Qa(s,o,u,h){return s={tag:s,create:u,deps:h,inst:o,next:null},o=Qe.updateQueue,o===null&&(o=om(),Qe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,o.lastEffect=s),s}function Hu(){return{destroy:void 0,resource:void 0}}function NS(){return rn().memoizedState}function qu(s,o,u,h){var g=Bn();h=h===void 0?null:h,Qe.flags|=s,g.memoizedState=Qa(1|o,Hu(),u,h)}function Lc(s,o,u,h){var g=rn();h=h===void 0?null:h;var y=g.memoizedState.inst;bt!==null&&h!==null&&nm(h,bt.memoizedState.deps)?g.memoizedState=Qa(o,y,u,h):(Qe.flags|=s,g.memoizedState=Qa(1|o,y,u,h))}function IS(s,o){qu(8390656,8,s,o)}function US(s,o){Lc(2048,8,s,o)}function LS(s,o){return Lc(4,2,s,o)}function jS(s,o){return Lc(4,4,s,o)}function BS(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function FS(s,o,u){u=u!=null?u.concat([s]):null,Lc(4,4,BS.bind(null,o,s),u)}function hm(){}function VS(s,o){var u=rn();o=o===void 0?null:o;var h=u.memoizedState;return o!==null&&nm(o,h[1])?h[0]:(u.memoizedState=[s,o],s)}function zS(s,o){var u=rn();o=o===void 0?null:o;var h=u.memoizedState;if(o!==null&&nm(o,h[1]))return h[0];if(h=s(),ta){w(!0);try{s()}finally{w(!1)}}return u.memoizedState=[h,o],h}function mm(s,o,u){return u===void 0||(es&1073741824)!==0?s.memoizedState=o:(s.memoizedState=u,s=KT(),Qe.lanes|=s,os|=s,u)}function HS(s,o,u,h){return $n(u,o)?u:Xa.current!==null?(s=mm(s,u,h),$n(s,o)||(vn=!0),s):(es&42)===0?(vn=!0,s.memoizedState=u):(s=KT(),Qe.lanes|=s,os|=s,o)}function qS(s,o,u,h,g){var y=ie.p;ie.p=y!==0&&8>y?y:8;var _=G.T,U={};G.T=U,vm(s,!1,o,u);try{var q=g(),ne=G.S;if(ne!==null&&ne(U,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var he=cO(q,h);jc(s,o,he,ei(s))}else jc(s,o,h,ei(s))}catch(Se){jc(s,o,{then:function(){},status:"rejected",reason:Se},ei())}finally{ie.p=y,G.T=_}}function hO(){}function pm(s,o,u,h){if(s.tag!==5)throw Error(i(476));var g=KS(s).queue;qS(s,g,o,J,u===null?hO:function(){return GS(s),u(h)})}function KS(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:J},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function GS(s){var o=KS(s).next.queue;jc(s,o,{},ei())}function gm(){return Pn(nl)}function YS(){return rn().memoizedState}function WS(){return rn().memoizedState}function mO(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=ei();s=Jr(u);var h=Qr(o,s,u);h!==null&&(ti(h,o,u),Mc(h,o,u)),o={cache:Gh()},s.payload=o;return}o=o.return}}function pO(s,o,u){var h=ei();u={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Ku(s)?XS(o,u):(u=Uh(s,o,u,h),u!==null&&(ti(u,s,h),ZS(u,o,h)))}function $S(s,o,u){var h=ei();jc(s,o,u,h)}function jc(s,o,u,h){var g={lane:h,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ku(s))XS(o,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var _=o.lastRenderedState,U=y(_,u);if(g.hasEagerState=!0,g.eagerState=U,$n(U,_))return Au(s,o,g,0),At===null&&Ru(),!1}catch{}finally{}if(u=Uh(s,o,g,h),u!==null)return ti(u,s,h),ZS(u,o,h),!0}return!1}function vm(s,o,u,h){if(h={lane:2,revertLane:$m(),action:h,hasEagerState:!1,eagerState:null,next:null},Ku(s)){if(o)throw Error(i(479))}else o=Uh(s,u,h,2),o!==null&&ti(o,s,2)}function Ku(s){var o=s.alternate;return s===Qe||o!==null&&o===Qe}function XS(s,o){Za=Bu=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function ZS(s,o,u){if((u&4194048)!==0){var h=o.lanes;h&=s.pendingLanes,u|=h,o.lanes=u,Gt(s,u)}}var Gu={readContext:Pn,use:Vu,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t},JS={readContext:Pn,use:Vu,useCallback:function(s,o){return Bn().memoizedState=[s,o===void 0?null:o],s},useContext:Pn,useEffect:IS,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,qu(4194308,4,BS.bind(null,o,s),u)},useLayoutEffect:function(s,o){return qu(4194308,4,s,o)},useInsertionEffect:function(s,o){qu(4,2,s,o)},useMemo:function(s,o){var u=Bn();o=o===void 0?null:o;var h=s();if(ta){w(!0);try{s()}finally{w(!1)}}return u.memoizedState=[h,o],h},useReducer:function(s,o,u){var h=Bn();if(u!==void 0){var g=u(o);if(ta){w(!0);try{u(o)}finally{w(!1)}}}else g=o;return h.memoizedState=h.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},h.queue=s,s=s.dispatch=pO.bind(null,Qe,s),[h.memoizedState,s]},useRef:function(s){var o=Bn();return s={current:s},o.memoizedState=s},useState:function(s){s=dm(s);var o=s.queue,u=$S.bind(null,Qe,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:hm,useDeferredValue:function(s,o){var u=Bn();return mm(u,s,o)},useTransition:function(){var s=dm(!1);return s=qS.bind(null,Qe,s.queue,!0,!1),Bn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var h=Qe,g=Bn();if(pt){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),At===null)throw Error(i(349));(ct&124)!==0||bS(h,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,IS(TS.bind(null,h,y,s),[s]),h.flags|=2048,Qa(9,Hu(),SS.bind(null,h,y,u,o),null),u},useId:function(){var s=Bn(),o=At.identifierPrefix;if(pt){var u=yr,h=vr;u=(h&~(1<<32-E(h)-1)).toString(32)+u,o="«"+o+"R"+u,u=Fu++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=lO++,o="«"+o+"r"+u.toString(32)+"»";return s.memoizedState=o},useHostTransitionStatus:gm,useFormState:_S,useActionState:_S,useOptimistic:function(s){var o=Bn();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=vm.bind(null,Qe,!0,u),u.dispatch=o,[s,o]},useMemoCache:cm,useCacheRefresh:function(){return Bn().memoizedState=mO.bind(null,Qe)}},QS={readContext:Pn,use:Vu,useCallback:VS,useContext:Pn,useEffect:US,useImperativeHandle:FS,useInsertionEffect:LS,useLayoutEffect:jS,useMemo:zS,useReducer:zu,useRef:NS,useState:function(){return zu(Tr)},useDebugValue:hm,useDeferredValue:function(s,o){var u=rn();return HS(u,bt.memoizedState,s,o)},useTransition:function(){var s=zu(Tr)[0],o=rn().memoizedState;return[typeof s=="boolean"?s:Uc(s),o]},useSyncExternalStore:yS,useId:YS,useHostTransitionStatus:gm,useFormState:DS,useActionState:DS,useOptimistic:function(s,o){var u=rn();return CS(u,bt,s,o)},useMemoCache:cm,useCacheRefresh:WS},gO={readContext:Pn,use:Vu,useCallback:VS,useContext:Pn,useEffect:US,useImperativeHandle:FS,useInsertionEffect:LS,useLayoutEffect:jS,useMemo:zS,useReducer:um,useRef:NS,useState:function(){return um(Tr)},useDebugValue:hm,useDeferredValue:function(s,o){var u=rn();return bt===null?mm(u,s,o):HS(u,bt.memoizedState,s,o)},useTransition:function(){var s=um(Tr)[0],o=rn().memoizedState;return[typeof s=="boolean"?s:Uc(s),o]},useSyncExternalStore:yS,useId:YS,useHostTransitionStatus:gm,useFormState:OS,useActionState:OS,useOptimistic:function(s,o){var u=rn();return bt!==null?CS(u,bt,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:cm,useCacheRefresh:WS},eo=null,Bc=0;function Yu(s){var o=Bc;return Bc+=1,eo===null&&(eo=[]),uS(eo,s,o)}function Fc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Wu(s,o){throw o.$$typeof===p?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function eT(s){var o=s._init;return o(s._payload)}function tT(s){function o(Z,Y){if(s){var ee=Z.deletions;ee===null?(Z.deletions=[Y],Z.flags|=16):ee.push(Y)}}function u(Z,Y){if(!s)return null;for(;Y!==null;)o(Z,Y),Y=Y.sibling;return null}function h(Z){for(var Y=new Map;Z!==null;)Z.key!==null?Y.set(Z.key,Z):Y.set(Z.index,Z),Z=Z.sibling;return Y}function g(Z,Y){return Z=gr(Z,Y),Z.index=0,Z.sibling=null,Z}function y(Z,Y,ee){return Z.index=ee,s?(ee=Z.alternate,ee!==null?(ee=ee.index,ee<Y?(Z.flags|=67108866,Y):ee):(Z.flags|=67108866,Y)):(Z.flags|=1048576,Y)}function _(Z){return s&&Z.alternate===null&&(Z.flags|=67108866),Z}function U(Z,Y,ee,ve){return Y===null||Y.tag!==6?(Y=jh(ee,Z.mode,ve),Y.return=Z,Y):(Y=g(Y,ee),Y.return=Z,Y)}function q(Z,Y,ee,ve){var Ie=ee.type;return Ie===x?he(Z,Y,ee.props.children,ve,ee.key):Y!==null&&(Y.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===z&&eT(Ie)===Y.type)?(Y=g(Y,ee.props),Fc(Y,ee),Y.return=Z,Y):(Y=_u(ee.type,ee.key,ee.props,null,Z.mode,ve),Fc(Y,ee),Y.return=Z,Y)}function ne(Z,Y,ee,ve){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=Bh(ee,Z.mode,ve),Y.return=Z,Y):(Y=g(Y,ee.children||[]),Y.return=Z,Y)}function he(Z,Y,ee,ve,Ie){return Y===null||Y.tag!==7?(Y=Ys(ee,Z.mode,ve,Ie),Y.return=Z,Y):(Y=g(Y,ee),Y.return=Z,Y)}function Se(Z,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=jh(""+Y,Z.mode,ee),Y.return=Z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case v:return ee=_u(Y.type,Y.key,Y.props,null,Z.mode,ee),Fc(ee,Y),ee.return=Z,ee;case S:return Y=Bh(Y,Z.mode,ee),Y.return=Z,Y;case z:var ve=Y._init;return Y=ve(Y._payload),Se(Z,Y,ee)}if(Oe(Y)||fe(Y))return Y=Ys(Y,Z.mode,ee,null),Y.return=Z,Y;if(typeof Y.then=="function")return Se(Z,Yu(Y),ee);if(Y.$$typeof===N)return Se(Z,Nu(Z,Y),ee);Wu(Z,Y)}return null}function se(Z,Y,ee,ve){var Ie=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ie!==null?null:U(Z,Y,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:return ee.key===Ie?q(Z,Y,ee,ve):null;case S:return ee.key===Ie?ne(Z,Y,ee,ve):null;case z:return Ie=ee._init,ee=Ie(ee._payload),se(Z,Y,ee,ve)}if(Oe(ee)||fe(ee))return Ie!==null?null:he(Z,Y,ee,ve,null);if(typeof ee.then=="function")return se(Z,Y,Yu(ee),ve);if(ee.$$typeof===N)return se(Z,Y,Nu(Z,ee),ve);Wu(Z,ee)}return null}function ce(Z,Y,ee,ve,Ie){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Z=Z.get(ee)||null,U(Y,Z,""+ve,Ie);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case v:return Z=Z.get(ve.key===null?ee:ve.key)||null,q(Y,Z,ve,Ie);case S:return Z=Z.get(ve.key===null?ee:ve.key)||null,ne(Y,Z,ve,Ie);case z:var nt=ve._init;return ve=nt(ve._payload),ce(Z,Y,ee,ve,Ie)}if(Oe(ve)||fe(ve))return Z=Z.get(ee)||null,he(Y,Z,ve,Ie,null);if(typeof ve.then=="function")return ce(Z,Y,ee,Yu(ve),Ie);if(ve.$$typeof===N)return ce(Z,Y,ee,Nu(Y,ve),Ie);Wu(Y,ve)}return null}function ze(Z,Y,ee,ve){for(var Ie=null,nt=null,je=Y,Fe=Y=0,bn=null;je!==null&&Fe<ee.length;Fe++){je.index>Fe?(bn=je,je=null):bn=je.sibling;var mt=se(Z,je,ee[Fe],ve);if(mt===null){je===null&&(je=bn);break}s&&je&&mt.alternate===null&&o(Z,je),Y=y(mt,Y,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt,je=bn}if(Fe===ee.length)return u(Z,je),pt&&$s(Z,Fe),Ie;if(je===null){for(;Fe<ee.length;Fe++)je=Se(Z,ee[Fe],ve),je!==null&&(Y=y(je,Y,Fe),nt===null?Ie=je:nt.sibling=je,nt=je);return pt&&$s(Z,Fe),Ie}for(je=h(je);Fe<ee.length;Fe++)bn=ce(je,Z,Fe,ee[Fe],ve),bn!==null&&(s&&bn.alternate!==null&&je.delete(bn.key===null?Fe:bn.key),Y=y(bn,Y,Fe),nt===null?Ie=bn:nt.sibling=bn,nt=bn);return s&&je.forEach(function(gs){return o(Z,gs)}),pt&&$s(Z,Fe),Ie}function Be(Z,Y,ee,ve){if(ee==null)throw Error(i(151));for(var Ie=null,nt=null,je=Y,Fe=Y=0,bn=null,mt=ee.next();je!==null&&!mt.done;Fe++,mt=ee.next()){je.index>Fe?(bn=je,je=null):bn=je.sibling;var gs=se(Z,je,mt.value,ve);if(gs===null){je===null&&(je=bn);break}s&&je&&gs.alternate===null&&o(Z,je),Y=y(gs,Y,Fe),nt===null?Ie=gs:nt.sibling=gs,nt=gs,je=bn}if(mt.done)return u(Z,je),pt&&$s(Z,Fe),Ie;if(je===null){for(;!mt.done;Fe++,mt=ee.next())mt=Se(Z,mt.value,ve),mt!==null&&(Y=y(mt,Y,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt);return pt&&$s(Z,Fe),Ie}for(je=h(je);!mt.done;Fe++,mt=ee.next())mt=ce(je,Z,Fe,mt.value,ve),mt!==null&&(s&&mt.alternate!==null&&je.delete(mt.key===null?Fe:mt.key),Y=y(mt,Y,Fe),nt===null?Ie=mt:nt.sibling=mt,nt=mt);return s&&je.forEach(function(vN){return o(Z,vN)}),pt&&$s(Z,Fe),Ie}function Tt(Z,Y,ee,ve){if(typeof ee=="object"&&ee!==null&&ee.type===x&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case v:e:{for(var Ie=ee.key;Y!==null;){if(Y.key===Ie){if(Ie=ee.type,Ie===x){if(Y.tag===7){u(Z,Y.sibling),ve=g(Y,ee.props.children),ve.return=Z,Z=ve;break e}}else if(Y.elementType===Ie||typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===z&&eT(Ie)===Y.type){u(Z,Y.sibling),ve=g(Y,ee.props),Fc(ve,ee),ve.return=Z,Z=ve;break e}u(Z,Y);break}else o(Z,Y);Y=Y.sibling}ee.type===x?(ve=Ys(ee.props.children,Z.mode,ve,ee.key),ve.return=Z,Z=ve):(ve=_u(ee.type,ee.key,ee.props,null,Z.mode,ve),Fc(ve,ee),ve.return=Z,Z=ve)}return _(Z);case S:e:{for(Ie=ee.key;Y!==null;){if(Y.key===Ie)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){u(Z,Y.sibling),ve=g(Y,ee.children||[]),ve.return=Z,Z=ve;break e}else{u(Z,Y);break}else o(Z,Y);Y=Y.sibling}ve=Bh(ee,Z.mode,ve),ve.return=Z,Z=ve}return _(Z);case z:return Ie=ee._init,ee=Ie(ee._payload),Tt(Z,Y,ee,ve)}if(Oe(ee))return ze(Z,Y,ee,ve);if(fe(ee)){if(Ie=fe(ee),typeof Ie!="function")throw Error(i(150));return ee=Ie.call(ee),Be(Z,Y,ee,ve)}if(typeof ee.then=="function")return Tt(Z,Y,Yu(ee),ve);if(ee.$$typeof===N)return Tt(Z,Y,Nu(Z,ee),ve);Wu(Z,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Y!==null&&Y.tag===6?(u(Z,Y.sibling),ve=g(Y,ee),ve.return=Z,Z=ve):(u(Z,Y),ve=jh(ee,Z.mode,ve),ve.return=Z,Z=ve),_(Z)):u(Z,Y)}return function(Z,Y,ee,ve){try{Bc=0;var Ie=Tt(Z,Y,ee,ve);return eo=null,Ie}catch(je){if(je===_c||je===Uu)throw je;var nt=Xn(29,je,null,Z.mode);return nt.lanes=ve,nt.return=Z,nt}finally{}}}var to=tT(!0),nT=tT(!1),gi=Q(null),Hi=null;function ts(s){var o=s.alternate;le(fn,fn.current&1),le(gi,s),Hi===null&&(o===null||Xa.current!==null||o.memoizedState!==null)&&(Hi=s)}function iT(s){if(s.tag===22){if(le(fn,fn.current),le(gi,s),Hi===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Hi=s)}}else ns()}function ns(){le(fn,fn.current),le(gi,gi.current)}function xr(s){me(gi),Hi===s&&(Hi=null),me(fn)}var fn=Q(0);function $u(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||op(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function ym(s,o,u,h){o=s.memoizedState,u=u(h,o),u=u==null?o:m({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var bm={enqueueSetState:function(s,o,u){s=s._reactInternals;var h=ei(),g=Jr(h);g.payload=o,u!=null&&(g.callback=u),o=Qr(s,g,h),o!==null&&(ti(o,s,h),Mc(o,s,h))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var h=ei(),g=Jr(h);g.tag=1,g.payload=o,u!=null&&(g.callback=u),o=Qr(s,g,h),o!==null&&(ti(o,s,h),Mc(o,s,h))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=ei(),h=Jr(u);h.tag=2,o!=null&&(h.callback=o),o=Qr(s,h,u),o!==null&&(ti(o,s,u),Mc(o,s,u))}};function rT(s,o,u,h,g,y,_){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,_):o.prototype&&o.prototype.isPureReactComponent?!xc(u,h)||!xc(g,y):!0}function sT(s,o,u,h){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==s&&bm.enqueueReplaceState(o,o.state,null)}function na(s,o){var u=o;if("ref"in o){u={};for(var h in o)h!=="ref"&&(u[h]=o[h])}if(s=s.defaultProps){u===o&&(u=m({},u));for(var g in s)u[g]===void 0&&(u[g]=s[g])}return u}var Xu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function aT(s){Xu(s)}function oT(s){console.error(s)}function cT(s){Xu(s)}function Zu(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function lT(s,o,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Sm(s,o,u){return u=Jr(u),u.tag=3,u.payload={element:null},u.callback=function(){Zu(s,o)},u}function uT(s){return s=Jr(s),s.tag=3,s}function dT(s,o,u,h){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var y=h.value;s.payload=function(){return g(y)},s.callback=function(){lT(o,u,h)}}var _=u.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(s.callback=function(){lT(o,u,h),typeof g!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var U=h.stack;this.componentDidCatch(h.value,{componentStack:U!==null?U:""})})}function vO(s,o,u,h,g){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=u.alternate,o!==null&&Rc(o,u,g,!0),u=gi.current,u!==null){switch(u.tag){case 13:return Hi===null?qm():u.alternate===null&&Ft===0&&(Ft=3),u.flags&=-257,u.flags|=65536,u.lanes=g,h===$h?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([h]):o.add(h),Gm(s,h,g)),!1;case 22:return u.flags|=65536,h===$h?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([h]):u.add(h)),Gm(s,h,g)),!1}throw Error(i(435,u.tag))}return Gm(s,h,g),qm(),!1}if(pt)return o=gi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,h!==zh&&(s=Error(i(422),{cause:h}),kc(fi(s,u)))):(h!==zh&&(o=Error(i(423),{cause:h}),kc(fi(o,u))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,h=fi(h,u),g=Sm(s.stateNode,h,g),Jh(s,g),Ft!==4&&(Ft=2)),!1;var y=Error(i(520),{cause:h});if(y=fi(y,u),Yc===null?Yc=[y]:Yc.push(y),Ft!==4&&(Ft=2),o===null)return!0;h=fi(h,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=g&-g,u.lanes|=s,s=Sm(u.stateNode,h,s),Jh(u,s),!1;case 1:if(o=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cs===null||!cs.has(y))))return u.flags|=65536,g&=-g,u.lanes|=g,g=uT(g),dT(g,s,u,h),Jh(u,g),!1}u=u.return}while(u!==null);return!1}var fT=Error(i(461)),vn=!1;function wn(s,o,u,h){o.child=s===null?nT(o,null,u,h):to(o,s.child,u,h)}function hT(s,o,u,h,g){u=u.render;var y=o.ref;if("ref"in h){var _={};for(var U in h)U!=="ref"&&(_[U]=h[U])}else _=h;return Qs(o),h=im(s,o,u,_,y,g),U=rm(),s!==null&&!vn?(sm(s,o,g),wr(s,o,g)):(pt&&U&&Fh(o),o.flags|=1,wn(s,o,h,g),o.child)}function mT(s,o,u,h,g){if(s===null){var y=u.type;return typeof y=="function"&&!Lh(y)&&y.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=y,pT(s,o,y,h,g)):(s=_u(u.type,null,h,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,!Am(s,g)){var _=y.memoizedProps;if(u=u.compare,u=u!==null?u:xc,u(_,h)&&s.ref===o.ref)return wr(s,o,g)}return o.flags|=1,s=gr(y,h),s.ref=o.ref,s.return=o,o.child=s}function pT(s,o,u,h,g){if(s!==null){var y=s.memoizedProps;if(xc(y,h)&&s.ref===o.ref)if(vn=!1,o.pendingProps=h=y,Am(s,g))(s.flags&131072)!==0&&(vn=!0);else return o.lanes=s.lanes,wr(s,o,g)}return Tm(s,o,u,h,g)}function gT(s,o,u){var h=o.pendingProps,g=h.children,y=s!==null?s.memoizedState:null;if(h.mode==="hidden"){if((o.flags&128)!==0){if(h=y!==null?y.baseLanes|u:u,s!==null){for(g=o.child=s.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;o.childLanes=y&~h}else o.childLanes=0,o.child=null;return vT(s,o,h,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Iu(o,y!==null?y.cachePool:null),y!==null?pS(o,y):em(),iT(o);else return o.lanes=o.childLanes=536870912,vT(s,o,y!==null?y.baseLanes|u:u,u)}else y!==null?(Iu(o,y.cachePool),pS(o,y),ns(),o.memoizedState=null):(s!==null&&Iu(o,null),em(),ns());return wn(s,o,g,u),o.child}function vT(s,o,u,h){var g=Wh();return g=g===null?null:{parent:dn._currentValue,pool:g},o.memoizedState={baseLanes:u,cachePool:g},s!==null&&Iu(o,null),em(),iT(o),s!==null&&Rc(s,o,h,!0),null}function Ju(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function Tm(s,o,u,h,g){return Qs(o),u=im(s,o,u,h,void 0,g),h=rm(),s!==null&&!vn?(sm(s,o,g),wr(s,o,g)):(pt&&h&&Fh(o),o.flags|=1,wn(s,o,u,g),o.child)}function yT(s,o,u,h,g,y){return Qs(o),o.updateQueue=null,u=vS(o,h,u,g),gS(s),h=rm(),s!==null&&!vn?(sm(s,o,y),wr(s,o,y)):(pt&&h&&Fh(o),o.flags|=1,wn(s,o,u,y),o.child)}function bT(s,o,u,h,g){if(Qs(o),o.stateNode===null){var y=Ka,_=u.contextType;typeof _=="object"&&_!==null&&(y=Pn(_)),y=new u(h,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=bm,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=h,y.state=o.memoizedState,y.refs={},Xh(o),_=u.contextType,y.context=typeof _=="object"&&_!==null?Pn(_):Ka,y.state=o.memoizedState,_=u.getDerivedStateFromProps,typeof _=="function"&&(ym(o,u,_,h),y.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(_=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),_!==y.state&&bm.enqueueReplaceState(y,y.state,null),Nc(o,h,y,g),Oc(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(s===null){y=o.stateNode;var U=o.memoizedProps,q=na(u,U);y.props=q;var ne=y.context,he=u.contextType;_=Ka,typeof he=="object"&&he!==null&&(_=Pn(he));var Se=u.getDerivedStateFromProps;he=typeof Se=="function"||typeof y.getSnapshotBeforeUpdate=="function",U=o.pendingProps!==U,he||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(U||ne!==_)&&sT(o,y,h,_),Zr=!1;var se=o.memoizedState;y.state=se,Nc(o,h,y,g),Oc(),ne=o.memoizedState,U||se!==ne||Zr?(typeof Se=="function"&&(ym(o,u,Se,h),ne=o.memoizedState),(q=Zr||rT(o,u,q,h,se,ne,_))?(he||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=ne),y.props=h,y.state=ne,y.context=_,h=q):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{y=o.stateNode,Zh(s,o),_=o.memoizedProps,he=na(u,_),y.props=he,Se=o.pendingProps,se=y.context,ne=u.contextType,q=Ka,typeof ne=="object"&&ne!==null&&(q=Pn(ne)),U=u.getDerivedStateFromProps,(ne=typeof U=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_!==Se||se!==q)&&sT(o,y,h,q),Zr=!1,se=o.memoizedState,y.state=se,Nc(o,h,y,g),Oc();var ce=o.memoizedState;_!==Se||se!==ce||Zr||s!==null&&s.dependencies!==null&&Ou(s.dependencies)?(typeof U=="function"&&(ym(o,u,U,h),ce=o.memoizedState),(he=Zr||rT(o,u,he,h,se,ce,q)||s!==null&&s.dependencies!==null&&Ou(s.dependencies))?(ne||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,ce,q),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,ce,q)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||_===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ce),y.props=h,y.state=ce,y.context=q,h=he):(typeof y.componentDidUpdate!="function"||_===s.memoizedProps&&se===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||_===s.memoizedProps&&se===s.memoizedState||(o.flags|=1024),h=!1)}return y=h,Ju(s,o),h=(o.flags&128)!==0,y||h?(y=o.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,s!==null&&h?(o.child=to(o,s.child,null,g),o.child=to(o,null,u,g)):wn(s,o,u,g),o.memoizedState=y.state,s=o.child):s=wr(s,o,g),s}function ST(s,o,u,h){return Ec(),o.flags|=256,wn(s,o,u,h),o.child}var xm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wm(s){return{baseLanes:s,cachePool:oS()}}function Cm(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=vi),s}function TT(s,o,u){var h=o.pendingProps,g=!1,y=(o.flags&128)!==0,_;if((_=y)||(_=s!==null&&s.memoizedState===null?!1:(fn.current&2)!==0),_&&(g=!0,o.flags&=-129),_=(o.flags&32)!==0,o.flags&=-33,s===null){if(pt){if(g?ts(o):ns(),pt){var U=Bt,q;if(q=U){e:{for(q=U,U=zi;q.nodeType!==8;){if(!U){U=null;break e}if(q=Ai(q.nextSibling),q===null){U=null;break e}}U=q}U!==null?(o.memoizedState={dehydrated:U,treeContext:Ws!==null?{id:vr,overflow:yr}:null,retryLane:536870912,hydrationErrors:null},q=Xn(18,null,null,0),q.stateNode=U,q.return=o,o.child=q,Nn=o,Bt=null,q=!0):q=!1}q||Zs(o)}if(U=o.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return op(U)?o.lanes=32:o.lanes=536870912,null;xr(o)}return U=h.children,h=h.fallback,g?(ns(),g=o.mode,U=Qu({mode:"hidden",children:U},g),h=Ys(h,g,u,null),U.return=o,h.return=o,U.sibling=h,o.child=U,g=o.child,g.memoizedState=wm(u),g.childLanes=Cm(s,_,u),o.memoizedState=xm,h):(ts(o),Em(o,U))}if(q=s.memoizedState,q!==null&&(U=q.dehydrated,U!==null)){if(y)o.flags&256?(ts(o),o.flags&=-257,o=km(s,o,u)):o.memoizedState!==null?(ns(),o.child=s.child,o.flags|=128,o=null):(ns(),g=h.fallback,U=o.mode,h=Qu({mode:"visible",children:h.children},U),g=Ys(g,U,u,null),g.flags|=2,h.return=o,g.return=o,h.sibling=g,o.child=h,to(o,s.child,null,u),h=o.child,h.memoizedState=wm(u),h.childLanes=Cm(s,_,u),o.memoizedState=xm,o=g);else if(ts(o),op(U)){if(_=U.nextSibling&&U.nextSibling.dataset,_)var ne=_.dgst;_=ne,h=Error(i(419)),h.stack="",h.digest=_,kc({value:h,source:null,stack:null}),o=km(s,o,u)}else if(vn||Rc(s,o,u,!1),_=(u&s.childLanes)!==0,vn||_){if(_=At,_!==null&&(h=u&-u,h=(h&42)!==0?1:tn(h),h=(h&(_.suspendedLanes|u))!==0?0:h,h!==0&&h!==q.retryLane))throw q.retryLane=h,qa(s,h),ti(_,s,h),fT;U.data==="$?"||qm(),o=km(s,o,u)}else U.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=q.treeContext,Bt=Ai(U.nextSibling),Nn=o,pt=!0,Xs=null,zi=!1,s!==null&&(mi[pi++]=vr,mi[pi++]=yr,mi[pi++]=Ws,vr=s.id,yr=s.overflow,Ws=o),o=Em(o,h.children),o.flags|=4096);return o}return g?(ns(),g=h.fallback,U=o.mode,q=s.child,ne=q.sibling,h=gr(q,{mode:"hidden",children:h.children}),h.subtreeFlags=q.subtreeFlags&65011712,ne!==null?g=gr(ne,g):(g=Ys(g,U,u,null),g.flags|=2),g.return=o,h.return=o,h.sibling=g,o.child=h,h=g,g=o.child,U=s.child.memoizedState,U===null?U=wm(u):(q=U.cachePool,q!==null?(ne=dn._currentValue,q=q.parent!==ne?{parent:ne,pool:ne}:q):q=oS(),U={baseLanes:U.baseLanes|u,cachePool:q}),g.memoizedState=U,g.childLanes=Cm(s,_,u),o.memoizedState=xm,h):(ts(o),u=s.child,s=u.sibling,u=gr(u,{mode:"visible",children:h.children}),u.return=o,u.sibling=null,s!==null&&(_=o.deletions,_===null?(o.deletions=[s],o.flags|=16):_.push(s)),o.child=u,o.memoizedState=null,u)}function Em(s,o){return o=Qu({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Qu(s,o){return s=Xn(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function km(s,o,u){return to(o,s.child,null,u),s=Em(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function xT(s,o,u){s.lanes|=o;var h=s.alternate;h!==null&&(h.lanes|=o),qh(s.return,o,u)}function Rm(s,o,u,h,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=g)}function wT(s,o,u){var h=o.pendingProps,g=h.revealOrder,y=h.tail;if(wn(s,o,h.children,u),h=fn.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&xT(s,u,o);else if(s.tag===19)xT(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}h&=1}switch(le(fn,h),g){case"forwards":for(u=o.child,g=null;u!==null;)s=u.alternate,s!==null&&$u(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Rm(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&$u(s)===null){o.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}Rm(o,!0,u,null,y);break;case"together":Rm(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function wr(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),os|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(Rc(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,u=gr(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=gr(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Am(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Ou(s)))}function yO(s,o,u){switch(o.tag){case 3:Ce(o,o.stateNode.containerInfo),Xr(o,dn,s.memoizedState.cache),Ec();break;case 27:case 5:qe(o);break;case 4:Ce(o,o.stateNode.containerInfo);break;case 10:Xr(o,o.type,o.memoizedProps.value);break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(ts(o),o.flags|=128,null):(u&o.child.childLanes)!==0?TT(s,o,u):(ts(o),s=wr(s,o,u),s!==null?s.sibling:null);ts(o);break;case 19:var g=(s.flags&128)!==0;if(h=(u&o.childLanes)!==0,h||(Rc(s,o,u,!1),h=(u&o.childLanes)!==0),g){if(h)return wT(s,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),le(fn,fn.current),h)break;return null;case 22:case 23:return o.lanes=0,gT(s,o,u);case 24:Xr(o,dn,s.memoizedState.cache)}return wr(s,o,u)}function CT(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)vn=!0;else{if(!Am(s,u)&&(o.flags&128)===0)return vn=!1,yO(s,o,u);vn=(s.flags&131072)!==0}else vn=!1,pt&&(o.flags&1048576)!==0&&eS(o,Mu,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var h=o.elementType,g=h._init;if(h=g(h._payload),o.type=h,typeof h=="function")Lh(h)?(s=na(h,s),o.tag=1,o=bT(null,o,h,s,u)):(o.tag=0,o=Tm(null,o,h,s,u));else{if(h!=null){if(g=h.$$typeof,g===I){o.tag=11,o=hT(null,o,h,s,u);break e}else if(g===H){o.tag=14,o=mT(null,o,h,s,u);break e}}throw o=Ae(h)||h,Error(i(306,o,""))}}return o;case 0:return Tm(s,o,o.type,o.pendingProps,u);case 1:return h=o.type,g=na(h,o.pendingProps),bT(s,o,h,g,u);case 3:e:{if(Ce(o,o.stateNode.containerInfo),s===null)throw Error(i(387));h=o.pendingProps;var y=o.memoizedState;g=y.element,Zh(s,o),Nc(o,h,null,u);var _=o.memoizedState;if(h=_.cache,Xr(o,dn,h),h!==y.cache&&Kh(o,[dn],u,!0),Oc(),h=_.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:_.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=ST(s,o,h,u);break e}else if(h!==g){g=fi(Error(i(424)),o),kc(g),o=ST(s,o,h,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Bt=Ai(s.firstChild),Nn=o,pt=!0,Xs=null,zi=!0,u=nT(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ec(),h===g){o=wr(s,o,u);break e}wn(s,o,h,u)}o=o.child}return o;case 26:return Ju(s,o),s===null?(u=A1(o.type,null,o.pendingProps,null))?o.memoizedState=u:pt||(u=o.type,s=o.pendingProps,h=hd(_e.current).createElement(u),h[Wt]=o,h[Rt]=s,En(h,u,s),gn(h),o.stateNode=h):o.memoizedState=A1(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return qe(o),s===null&&pt&&(h=o.stateNode=E1(o.type,o.pendingProps,_e.current),Nn=o,zi=!0,g=Bt,ds(o.type)?(cp=g,Bt=Ai(h.firstChild)):Bt=g),wn(s,o,o.pendingProps.children,u),Ju(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&pt&&((g=h=Bt)&&(h=GO(h,o.type,o.pendingProps,zi),h!==null?(o.stateNode=h,Nn=o,Bt=Ai(h.firstChild),zi=!1,g=!0):g=!1),g||Zs(o)),qe(o),g=o.type,y=o.pendingProps,_=s!==null?s.memoizedProps:null,h=y.children,rp(g,y)?h=null:_!==null&&rp(g,_)&&(o.flags|=32),o.memoizedState!==null&&(g=im(s,o,uO,null,null,u),nl._currentValue=g),Ju(s,o),wn(s,o,h,u),o.child;case 6:return s===null&&pt&&((s=u=Bt)&&(u=YO(u,o.pendingProps,zi),u!==null?(o.stateNode=u,Nn=o,Bt=null,s=!0):s=!1),s||Zs(o)),null;case 13:return TT(s,o,u);case 4:return Ce(o,o.stateNode.containerInfo),h=o.pendingProps,s===null?o.child=to(o,null,h,u):wn(s,o,h,u),o.child;case 11:return hT(s,o,o.type,o.pendingProps,u);case 7:return wn(s,o,o.pendingProps,u),o.child;case 8:return wn(s,o,o.pendingProps.children,u),o.child;case 12:return wn(s,o,o.pendingProps.children,u),o.child;case 10:return h=o.pendingProps,Xr(o,o.type,h.value),wn(s,o,h.children,u),o.child;case 9:return g=o.type._context,h=o.pendingProps.children,Qs(o),g=Pn(g),h=h(g),o.flags|=1,wn(s,o,h,u),o.child;case 14:return mT(s,o,o.type,o.pendingProps,u);case 15:return pT(s,o,o.type,o.pendingProps,u);case 19:return wT(s,o,u);case 31:return h=o.pendingProps,u=o.mode,h={mode:h.mode,children:h.children},s===null?(u=Qu(h,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=gr(s.child,h),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return gT(s,o,u);case 24:return Qs(o),h=Pn(dn),s===null?(g=Wh(),g===null&&(g=At,y=Gh(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=u),g=y),o.memoizedState={parent:h,cache:g},Xh(o),Xr(o,dn,g)):((s.lanes&u)!==0&&(Zh(s,o),Nc(o,null,null,u),Oc()),g=s.memoizedState,y=o.memoizedState,g.parent!==h?(g={parent:h,cache:h},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Xr(o,dn,h)):(h=y.cache,Xr(o,dn,h),h!==g.cache&&Kh(o,[dn],u,!0))),wn(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Cr(s){s.flags|=4}function ET(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!O1(o)){if(o=gi.current,o!==null&&((ct&4194048)===ct?Hi!==null:(ct&62914560)!==ct&&(ct&536870912)===0||o!==Hi))throw Dc=$h,cS;s.flags|=8192}}function ed(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?mu():536870912,s.lanes|=o,so|=o)}function Vc(s,o){if(!pt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Lt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(o)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=u,o}function bO(s,o,u){var h=o.pendingProps;switch(Vh(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(o),null;case 1:return Lt(o),null;case 3:return u=o.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Sr(dn),Ve(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Cc(o)?Cr(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,iS())),Lt(o),null;case 26:return u=o.memoizedState,s===null?(Cr(o),u!==null?(Lt(o),ET(o,u)):(Lt(o),o.flags&=-16777217)):u?u!==s.memoizedState?(Cr(o),Lt(o),ET(o,u)):(Lt(o),o.flags&=-16777217):(s.memoizedProps!==h&&Cr(o),Lt(o),o.flags&=-16777217),null;case 27:Xe(o),u=_e.current;var g=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Cr(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Lt(o),null}s=Te.current,Cc(o)?tS(o):(s=E1(g,h,u),o.stateNode=s,Cr(o))}return Lt(o),null;case 5:if(Xe(o),u=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==h&&Cr(o);else{if(!h){if(o.stateNode===null)throw Error(i(166));return Lt(o),null}if(s=Te.current,Cc(o))tS(o);else{switch(g=hd(_e.current),s){case 1:s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=g.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=g.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=g.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?s.multiple=!0:h.size&&(s.size=h.size);break;default:s=typeof h.is=="string"?g.createElement(u,{is:h.is}):g.createElement(u)}}s[Wt]=o,s[Rt]=h;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)s.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=s;e:switch(En(s,u,h),u){case"button":case"input":case"select":case"textarea":s=!!h.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Cr(o)}}return Lt(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==h&&Cr(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(i(166));if(s=_e.current,Cc(o)){if(s=o.stateNode,u=o.memoizedProps,h=null,g=Nn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}s[Wt]=o,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||y1(s.nodeValue,u)),s||Zs(o)}else s=hd(s).createTextNode(h),s[Wt]=o,o.stateNode=s}return Lt(o),null;case 13:if(h=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Cc(o),h!==null&&h.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[Wt]=o}else Ec(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Lt(o),g=!1}else g=iS(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(xr(o),o):(xr(o),null)}if(xr(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=h!==null,s=s!==null&&s.memoizedState!==null,u){h=o.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var y=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==g&&(h.flags|=2048)}return u!==s&&u&&(o.child.flags|=8192),ed(o,o.updateQueue),Lt(o),null;case 4:return Ve(),s===null&&Qm(o.stateNode.containerInfo),Lt(o),null;case 10:return Sr(o.type),Lt(o),null;case 19:if(me(fn),g=o.memoizedState,g===null)return Lt(o),null;if(h=(o.flags&128)!==0,y=g.rendering,y===null)if(h)Vc(g,!1);else{if(Ft!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(y=$u(s),y!==null){for(o.flags|=128,Vc(g,!1),s=y.updateQueue,o.updateQueue=s,ed(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)Qb(u,s),u=u.sibling;return le(fn,fn.current&1|2),o.child}s=s.sibling}g.tail!==null&&kt()>id&&(o.flags|=128,h=!0,Vc(g,!1),o.lanes=4194304)}else{if(!h)if(s=$u(y),s!==null){if(o.flags|=128,h=!0,s=s.updateQueue,o.updateQueue=s,ed(o,s),Vc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!pt)return Lt(o),null}else 2*kt()-g.renderingStartTime>id&&u!==536870912&&(o.flags|=128,h=!0,Vc(g,!1),o.lanes=4194304);g.isBackwards?(y.sibling=o.child,o.child=y):(s=g.last,s!==null?s.sibling=y:o.child=y,g.last=y)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=kt(),o.sibling=null,s=fn.current,le(fn,h?s&1|2:s&1),o):(Lt(o),null);case 22:case 23:return xr(o),tm(),h=o.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(u&536870912)!==0&&(o.flags&128)===0&&(Lt(o),o.subtreeFlags&6&&(o.flags|=8192)):Lt(o),u=o.updateQueue,u!==null&&ed(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==u&&(o.flags|=2048),s!==null&&me(ea),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Sr(dn),Lt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function SO(s,o){switch(Vh(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Sr(dn),Ve(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Xe(o),null;case 13:if(xr(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Ec()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return me(fn),null;case 4:return Ve(),null;case 10:return Sr(o.type),null;case 22:case 23:return xr(o),tm(),s!==null&&me(ea),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Sr(dn),null;case 25:return null;default:return null}}function kT(s,o){switch(Vh(o),o.tag){case 3:Sr(dn),Ve();break;case 26:case 27:case 5:Xe(o);break;case 4:Ve();break;case 13:xr(o);break;case 19:me(fn);break;case 10:Sr(o.type);break;case 22:case 23:xr(o),tm(),s!==null&&me(ea);break;case 24:Sr(dn)}}function zc(s,o){try{var u=o.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&s)===s){h=void 0;var y=u.create,_=u.inst;h=y(),_.destroy=h}u=u.next}while(u!==g)}}catch(U){Ct(o,o.return,U)}}function is(s,o,u){try{var h=o.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var y=g.next;h=y;do{if((h.tag&s)===s){var _=h.inst,U=_.destroy;if(U!==void 0){_.destroy=void 0,g=o;var q=u,ne=U;try{ne()}catch(he){Ct(g,q,he)}}}h=h.next}while(h!==y)}}catch(he){Ct(o,o.return,he)}}function RT(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{mS(o,u)}catch(h){Ct(s,s.return,h)}}}function AT(s,o,u){u.props=na(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Ct(s,o,h)}}function Hc(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(g){Ct(s,o,g)}}function qi(s,o){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(g){Ct(s,o,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){Ct(s,o,g)}else u.current=null}function PT(s){var o=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(g){Ct(s,s.return,g)}}function Pm(s,o,u){try{var h=s.stateNode;VO(h,s.type,u,o),h[Rt]=o}catch(g){Ct(s,s.return,g)}}function _T(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&ds(s.type)||s.tag===4}function _m(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||_T(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&ds(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Dm(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=fd));else if(h!==4&&(h===27&&ds(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(Dm(s,o,u),s=s.sibling;s!==null;)Dm(s,o,u),s=s.sibling}function td(s,o,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(h!==4&&(h===27&&ds(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(td(s,o,u),s=s.sibling;s!==null;)td(s,o,u),s=s.sibling}function DT(s){var o=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);En(o,h,u),o[Wt]=s,o[Rt]=u}catch(y){Ct(s,s.return,y)}}var Er=!1,Xt=!1,Mm=!1,MT=typeof WeakSet=="function"?WeakSet:Set,yn=null;function TO(s,o){if(s=s.containerInfo,np=bd,s=Hb(s),_h(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var g=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var _=0,U=-1,q=-1,ne=0,he=0,Se=s,se=null;t:for(;;){for(var ce;Se!==u||g!==0&&Se.nodeType!==3||(U=_+g),Se!==y||h!==0&&Se.nodeType!==3||(q=_+h),Se.nodeType===3&&(_+=Se.nodeValue.length),(ce=Se.firstChild)!==null;)se=Se,Se=ce;for(;;){if(Se===s)break t;if(se===u&&++ne===g&&(U=_),se===y&&++he===h&&(q=_),(ce=Se.nextSibling)!==null)break;Se=se,se=Se.parentNode}Se=ce}u=U===-1||q===-1?null:{start:U,end:q}}else u=null}u=u||{start:0,end:0}}else u=null;for(ip={focusedElem:s,selectionRange:u},bd=!1,yn=o;yn!==null;)if(o=yn,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,yn=s;else for(;yn!==null;){switch(o=yn,y=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,u=o,g=y.memoizedProps,y=y.memoizedState,h=u.stateNode;try{var ze=na(u.type,g,u.elementType===u.type);s=h.getSnapshotBeforeUpdate(ze,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(Be){Ct(u,u.return,Be)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)ap(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":ap(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,yn=s;break}yn=o.return}}function OT(s,o,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:rs(s,u),h&4&&zc(5,u);break;case 1:if(rs(s,u),h&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(_){Ct(u,u.return,_)}else{var g=na(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(g,o,s.__reactInternalSnapshotBeforeUpdate)}catch(_){Ct(u,u.return,_)}}h&64&&RT(u),h&512&&Hc(u,u.return);break;case 3:if(rs(s,u),h&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{mS(s,o)}catch(_){Ct(u,u.return,_)}}break;case 27:o===null&&h&4&&DT(u);case 26:case 5:rs(s,u),o===null&&h&4&&PT(u),h&512&&Hc(u,u.return);break;case 12:rs(s,u);break;case 13:rs(s,u),h&4&&UT(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=_O.bind(null,u),WO(s,u))));break;case 22:if(h=u.memoizedState!==null||Er,!h){o=o!==null&&o.memoizedState!==null||Xt,g=Er;var y=Xt;Er=h,(Xt=o)&&!y?ss(s,u,(u.subtreeFlags&8772)!==0):rs(s,u),Er=g,Xt=y}break;case 30:break;default:rs(s,u)}}function NT(s){var o=s.alternate;o!==null&&(s.alternate=null,NT(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&dh(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Dt=null,Fn=!1;function kr(s,o,u){for(u=u.child;u!==null;)IT(s,o,u),u=u.sibling}function IT(s,o,u){if(M&&typeof M.onCommitFiberUnmount=="function")try{M.onCommitFiberUnmount(Je,u)}catch{}switch(u.tag){case 26:Xt||qi(u,o),kr(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Xt||qi(u,o);var h=Dt,g=Fn;ds(u.type)&&(Dt=u.stateNode,Fn=!1),kr(s,o,u),Jc(u.stateNode),Dt=h,Fn=g;break;case 5:Xt||qi(u,o);case 6:if(h=Dt,g=Fn,Dt=null,kr(s,o,u),Dt=h,Fn=g,Dt!==null)if(Fn)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(u.stateNode)}catch(y){Ct(u,o,y)}else try{Dt.removeChild(u.stateNode)}catch(y){Ct(u,o,y)}break;case 18:Dt!==null&&(Fn?(s=Dt,w1(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),al(s)):w1(Dt,u.stateNode));break;case 4:h=Dt,g=Fn,Dt=u.stateNode.containerInfo,Fn=!0,kr(s,o,u),Dt=h,Fn=g;break;case 0:case 11:case 14:case 15:Xt||is(2,u,o),Xt||is(4,u,o),kr(s,o,u);break;case 1:Xt||(qi(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"&&AT(u,o,h)),kr(s,o,u);break;case 21:kr(s,o,u);break;case 22:Xt=(h=Xt)||u.memoizedState!==null,kr(s,o,u),Xt=h;break;default:kr(s,o,u)}}function UT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{al(s)}catch(u){Ct(o,o.return,u)}}function xO(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new MT),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new MT),o;default:throw Error(i(435,s.tag))}}function Om(s,o){var u=xO(s);o.forEach(function(h){var g=DO.bind(null,s,h);u.has(h)||(u.add(h),h.then(g,g))})}function Zn(s,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var g=u[h],y=s,_=o,U=_;e:for(;U!==null;){switch(U.tag){case 27:if(ds(U.type)){Dt=U.stateNode,Fn=!1;break e}break;case 5:Dt=U.stateNode,Fn=!1;break e;case 3:case 4:Dt=U.stateNode.containerInfo,Fn=!0;break e}U=U.return}if(Dt===null)throw Error(i(160));IT(y,_,g),Dt=null,Fn=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)LT(o,s),o=o.sibling}var Ri=null;function LT(s,o){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Zn(o,s),Jn(s),h&4&&(is(3,s,s.return),zc(3,s),is(5,s,s.return));break;case 1:Zn(o,s),Jn(s),h&512&&(Xt||u===null||qi(u,u.return)),h&64&&Er&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var g=Ri;if(Zn(o,s),Jn(s),h&512&&(Xt||u===null||qi(u,u.return)),h&4){var y=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":y=g.getElementsByTagName("title")[0],(!y||y[hc]||y[Wt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(h),g.head.insertBefore(y,g.querySelector("head > title"))),En(y,h,u),y[Wt]=s,gn(y),h=y;break e;case"link":var _=D1("link","href",g).get(h+(u.href||""));if(_){for(var U=0;U<_.length;U++)if(y=_[U],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){_.splice(U,1);break t}}y=g.createElement(h),En(y,h,u),g.head.appendChild(y);break;case"meta":if(_=D1("meta","content",g).get(h+(u.content||""))){for(U=0;U<_.length;U++)if(y=_[U],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){_.splice(U,1);break t}}y=g.createElement(h),En(y,h,u),g.head.appendChild(y);break;default:throw Error(i(468,h))}y[Wt]=s,gn(y),h=y}s.stateNode=h}else M1(g,s.type,s.stateNode);else s.stateNode=_1(g,h,s.memoizedProps);else y!==h?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,h===null?M1(g,s.type,s.stateNode):_1(g,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Pm(s,s.memoizedProps,u.memoizedProps)}break;case 27:Zn(o,s),Jn(s),h&512&&(Xt||u===null||qi(u,u.return)),u!==null&&h&4&&Pm(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Zn(o,s),Jn(s),h&512&&(Xt||u===null||qi(u,u.return)),s.flags&32){g=s.stateNode;try{La(g,"")}catch(ce){Ct(s,s.return,ce)}}h&4&&s.stateNode!=null&&(g=s.memoizedProps,Pm(s,g,u!==null?u.memoizedProps:g)),h&1024&&(Mm=!0);break;case 6:if(Zn(o,s),Jn(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(ce){Ct(s,s.return,ce)}}break;case 3:if(gd=null,g=Ri,Ri=md(o.containerInfo),Zn(o,s),Ri=g,Jn(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{al(o.containerInfo)}catch(ce){Ct(s,s.return,ce)}Mm&&(Mm=!1,jT(s));break;case 4:h=Ri,Ri=md(s.stateNode.containerInfo),Zn(o,s),Jn(s),Ri=h;break;case 12:Zn(o,s),Jn(s);break;case 13:Zn(o,s),Jn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Bm=kt()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Om(s,h)));break;case 22:g=s.memoizedState!==null;var q=u!==null&&u.memoizedState!==null,ne=Er,he=Xt;if(Er=ne||g,Xt=he||q,Zn(o,s),Xt=he,Er=ne,Jn(s),h&8192)e:for(o=s.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(u===null||q||Er||Xt||ia(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){q=u=o;try{if(y=q.stateNode,g)_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{U=q.stateNode;var Se=q.memoizedProps.style,se=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;U.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ce){Ct(q,q.return,ce)}}}else if(o.tag===6){if(u===null){q=o;try{q.stateNode.nodeValue=g?"":q.memoizedProps}catch(ce){Ct(q,q.return,ce)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Om(s,u))));break;case 19:Zn(o,s),Jn(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Om(s,h)));break;case 30:break;case 21:break;default:Zn(o,s),Jn(s)}}function Jn(s){var o=s.flags;if(o&2){try{for(var u,h=s.return;h!==null;){if(_T(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var g=u.stateNode,y=_m(s);td(s,y,g);break;case 5:var _=u.stateNode;u.flags&32&&(La(_,""),u.flags&=-33);var U=_m(s);td(s,U,_);break;case 3:case 4:var q=u.stateNode.containerInfo,ne=_m(s);Dm(s,ne,q);break;default:throw Error(i(161))}}catch(he){Ct(s,s.return,he)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function jT(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;jT(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function rs(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)OT(s,o.alternate,o),o=o.sibling}function ia(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:is(4,o,o.return),ia(o);break;case 1:qi(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&AT(o,o.return,u),ia(o);break;case 27:Jc(o.stateNode);case 26:case 5:qi(o,o.return),ia(o);break;case 22:o.memoizedState===null&&ia(o);break;case 30:ia(o);break;default:ia(o)}s=s.sibling}}function ss(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,g=s,y=o,_=y.flags;switch(y.tag){case 0:case 11:case 15:ss(g,y,u),zc(4,y);break;case 1:if(ss(g,y,u),h=y,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(ne){Ct(h,h.return,ne)}if(h=y,g=h.updateQueue,g!==null){var U=h.stateNode;try{var q=g.shared.hiddenCallbacks;if(q!==null)for(g.shared.hiddenCallbacks=null,g=0;g<q.length;g++)hS(q[g],U)}catch(ne){Ct(h,h.return,ne)}}u&&_&64&&RT(y),Hc(y,y.return);break;case 27:DT(y);case 26:case 5:ss(g,y,u),u&&h===null&&_&4&&PT(y),Hc(y,y.return);break;case 12:ss(g,y,u);break;case 13:ss(g,y,u),u&&_&4&&UT(g,y);break;case 22:y.memoizedState===null&&ss(g,y,u),Hc(y,y.return);break;case 30:break;default:ss(g,y,u)}o=o.sibling}}function Nm(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Ac(u))}function Im(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Ac(s))}function Ki(s,o,u,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)BT(s,o,u,h),o=o.sibling}function BT(s,o,u,h){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Ki(s,o,u,h),g&2048&&zc(9,o);break;case 1:Ki(s,o,u,h);break;case 3:Ki(s,o,u,h),g&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Ac(s)));break;case 12:if(g&2048){Ki(s,o,u,h),s=o.stateNode;try{var y=o.memoizedProps,_=y.id,U=y.onPostCommit;typeof U=="function"&&U(_,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){Ct(o,o.return,q)}}else Ki(s,o,u,h);break;case 13:Ki(s,o,u,h);break;case 23:break;case 22:y=o.stateNode,_=o.alternate,o.memoizedState!==null?y._visibility&2?Ki(s,o,u,h):qc(s,o):y._visibility&2?Ki(s,o,u,h):(y._visibility|=2,no(s,o,u,h,(o.subtreeFlags&10256)!==0)),g&2048&&Nm(_,o);break;case 24:Ki(s,o,u,h),g&2048&&Im(o.alternate,o);break;default:Ki(s,o,u,h)}}function no(s,o,u,h,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=s,_=o,U=u,q=h,ne=_.flags;switch(_.tag){case 0:case 11:case 15:no(y,_,U,q,g),zc(8,_);break;case 23:break;case 22:var he=_.stateNode;_.memoizedState!==null?he._visibility&2?no(y,_,U,q,g):qc(y,_):(he._visibility|=2,no(y,_,U,q,g)),g&&ne&2048&&Nm(_.alternate,_);break;case 24:no(y,_,U,q,g),g&&ne&2048&&Im(_.alternate,_);break;default:no(y,_,U,q,g)}o=o.sibling}}function qc(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,h=o,g=h.flags;switch(h.tag){case 22:qc(u,h),g&2048&&Nm(h.alternate,h);break;case 24:qc(u,h),g&2048&&Im(h.alternate,h);break;default:qc(u,h)}o=o.sibling}}var Kc=8192;function io(s){if(s.subtreeFlags&Kc)for(s=s.child;s!==null;)FT(s),s=s.sibling}function FT(s){switch(s.tag){case 26:io(s),s.flags&Kc&&s.memoizedState!==null&&oN(Ri,s.memoizedState,s.memoizedProps);break;case 5:io(s);break;case 3:case 4:var o=Ri;Ri=md(s.stateNode.containerInfo),io(s),Ri=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Kc,Kc=16777216,io(s),Kc=o):io(s));break;default:io(s)}}function VT(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Gc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];yn=h,HT(h,s)}VT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zT(s),s=s.sibling}function zT(s){switch(s.tag){case 0:case 11:case 15:Gc(s),s.flags&2048&&is(9,s,s.return);break;case 3:Gc(s);break;case 12:Gc(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,nd(s)):Gc(s);break;default:Gc(s)}}function nd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];yn=h,HT(h,s)}VT(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:is(8,o,o.return),nd(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,nd(o));break;default:nd(o)}s=s.sibling}}function HT(s,o){for(;yn!==null;){var u=yn;switch(u.tag){case 0:case 11:case 15:is(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Ac(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,yn=h;else e:for(u=s;yn!==null;){h=yn;var g=h.sibling,y=h.return;if(NT(h),h===u){yn=null;break e}if(g!==null){g.return=y,yn=g;break e}yn=y}}}var wO={getCacheForType:function(s){var o=Pn(dn),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u}},CO=typeof WeakMap=="function"?WeakMap:Map,vt=0,At=null,it=null,ct=0,yt=0,Qn=null,as=!1,ro=!1,Um=!1,Rr=0,Ft=0,os=0,ra=0,Lm=0,vi=0,so=0,Yc=null,Vn=null,jm=!1,Bm=0,id=1/0,rd=null,cs=null,Cn=0,ls=null,ao=null,oo=0,Fm=0,Vm=null,qT=null,Wc=0,zm=null;function ei(){if((vt&2)!==0&&ct!==0)return ct&-ct;if(G.T!==null){var s=Wa;return s!==0?s:$m()}return zs()}function KT(){vi===0&&(vi=(ct&536870912)===0||pt?Ei():536870912);var s=gi.current;return s!==null&&(s.flags|=32),vi}function ti(s,o,u){(s===At&&(yt===2||yt===9)||s.cancelPendingCommit!==null)&&(co(s,0),us(s,ct,vi,!1)),Wr(s,u),((vt&2)===0||s!==At)&&(s===At&&((vt&2)===0&&(ra|=u),Ft===4&&us(s,ct,vi,!1)),Gi(s))}function GT(s,o,u){if((vt&6)!==0)throw Error(i(327));var h=!u&&(o&124)===0&&(o&s.expiredLanes)===0||gt(s,o),g=h?RO(s,o):Km(s,o,!0),y=h;do{if(g===0){ro&&!h&&us(s,o,0,!1);break}else{if(u=s.current.alternate,y&&!EO(u)){g=Km(s,o,!1),y=!1;continue}if(g===2){if(y=o,s.errorRecoveryDisabledLanes&y)var _=0;else _=s.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){o=_;e:{var U=s;g=Yc;var q=U.current.memoizedState.isDehydrated;if(q&&(co(U,_).flags|=256),_=Km(U,_,!1),_!==2){if(Um&&!q){U.errorRecoveryDisabledLanes|=y,ra|=y,g=4;break e}y=Vn,Vn=g,y!==null&&(Vn===null?Vn=y:Vn.push.apply(Vn,y))}g=_}if(y=!1,g!==2)continue}}if(g===1){co(s,0),us(s,o,0,!0);break}e:{switch(h=s,y=g,y){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:us(h,o,vi,!as);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(g=Bm+300-kt(),10<g)){if(us(h,o,vi,!as),ht(h,0,!0)!==0)break e;h.timeoutHandle=T1(YT.bind(null,h,u,Vn,rd,jm,o,vi,ra,so,as,y,2,-0,0),g);break e}YT(h,u,Vn,rd,jm,o,vi,ra,so,as,y,0,-0,0)}}break}while(!0);Gi(s)}function YT(s,o,u,h,g,y,_,U,q,ne,he,Se,se,ce){if(s.timeoutHandle=-1,Se=o.subtreeFlags,(Se&8192||(Se&16785408)===16785408)&&(tl={stylesheets:null,count:0,unsuspend:aN},FT(o),Se=cN(),Se!==null)){s.cancelPendingCommit=Se(e1.bind(null,s,o,y,u,h,g,_,U,q,he,1,se,ce)),us(s,y,_,!ne);return}e1(s,o,y,u,h,g,_,U,q)}function EO(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var g=u[h],y=g.getSnapshot;g=g.value;try{if(!$n(y(),g))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function us(s,o,u,h){o&=~Lm,o&=~ra,s.suspendedLanes|=o,s.pingedLanes&=~o,h&&(s.warmLanes|=o),h=s.expirationTimes;for(var g=o;0<g;){var y=31-E(g),_=1<<y;h[y]=-1,g&=~_}u!==0&&We(s,u,o)}function sd(){return(vt&6)===0?($c(0),!1):!0}function Hm(){if(it!==null){if(yt===0)var s=it.return;else s=it,br=Js=null,am(s),eo=null,Bc=0,s=it;for(;s!==null;)kT(s.alternate,s),s=s.return;it=null}}function co(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,HO(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Hm(),At=s,it=u=gr(s.current,null),ct=o,yt=0,Qn=null,as=!1,ro=gt(s,o),Um=!1,so=vi=Lm=ra=os=Ft=0,Vn=Yc=null,jm=!1,(o&8)!==0&&(o|=o&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=o;0<h;){var g=31-E(h),y=1<<g;o|=s[g],h&=~y}return Rr=o,Ru(),u}function WT(s,o){Qe=null,G.H=Gu,o===_c||o===Uu?(o=dS(),yt=3):o===cS?(o=dS(),yt=4):yt=o===fT?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Qn=o,it===null&&(Ft=1,Zu(s,fi(o,s.current)))}function $T(){var s=G.H;return G.H=Gu,s===null?Gu:s}function XT(){var s=G.A;return G.A=wO,s}function qm(){Ft=4,as||(ct&4194048)!==ct&&gi.current!==null||(ro=!0),(os&134217727)===0&&(ra&134217727)===0||At===null||us(At,ct,vi,!1)}function Km(s,o,u){var h=vt;vt|=2;var g=$T(),y=XT();(At!==s||ct!==o)&&(rd=null,co(s,o)),o=!1;var _=Ft;e:do try{if(yt!==0&&it!==null){var U=it,q=Qn;switch(yt){case 8:Hm(),_=6;break e;case 3:case 2:case 9:case 6:gi.current===null&&(o=!0);var ne=yt;if(yt=0,Qn=null,lo(s,U,q,ne),u&&ro){_=0;break e}break;default:ne=yt,yt=0,Qn=null,lo(s,U,q,ne)}}kO(),_=Ft;break}catch(he){WT(s,he)}while(!0);return o&&s.shellSuspendCounter++,br=Js=null,vt=h,G.H=g,G.A=y,it===null&&(At=null,ct=0,Ru()),_}function kO(){for(;it!==null;)ZT(it)}function RO(s,o){var u=vt;vt|=2;var h=$T(),g=XT();At!==s||ct!==o?(rd=null,id=kt()+500,co(s,o)):ro=gt(s,o);e:do try{if(yt!==0&&it!==null){o=it;var y=Qn;t:switch(yt){case 1:yt=0,Qn=null,lo(s,o,y,1);break;case 2:case 9:if(lS(y)){yt=0,Qn=null,JT(o);break}o=function(){yt!==2&&yt!==9||At!==s||(yt=7),Gi(s)},y.then(o,o);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:lS(y)?(yt=0,Qn=null,JT(o)):(yt=0,Qn=null,lo(s,o,y,7));break;case 5:var _=null;switch(it.tag){case 26:_=it.memoizedState;case 5:case 27:var U=it;if(!_||O1(_)){yt=0,Qn=null;var q=U.sibling;if(q!==null)it=q;else{var ne=U.return;ne!==null?(it=ne,ad(ne)):it=null}break t}}yt=0,Qn=null,lo(s,o,y,5);break;case 6:yt=0,Qn=null,lo(s,o,y,6);break;case 8:Hm(),Ft=6;break e;default:throw Error(i(462))}}AO();break}catch(he){WT(s,he)}while(!0);return br=Js=null,G.H=h,G.A=g,vt=u,it!==null?0:(At=null,ct=0,Ru(),Ft)}function AO(){for(;it!==null&&!li();)ZT(it)}function ZT(s){var o=CT(s.alternate,s,Rr);s.memoizedProps=s.pendingProps,o===null?ad(s):it=o}function JT(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=yT(u,o,o.pendingProps,o.type,void 0,ct);break;case 11:o=yT(u,o,o.pendingProps,o.type.render,o.ref,ct);break;case 5:am(o);default:kT(u,o),o=it=Qb(o,Rr),o=CT(u,o,Rr)}s.memoizedProps=s.pendingProps,o===null?ad(s):it=o}function lo(s,o,u,h){br=Js=null,am(o),eo=null,Bc=0;var g=o.return;try{if(vO(s,g,o,u,ct)){Ft=1,Zu(s,fi(u,s.current)),it=null;return}}catch(y){if(g!==null)throw it=g,y;Ft=1,Zu(s,fi(u,s.current)),it=null;return}o.flags&32768?(pt||h===1?s=!0:ro||(ct&536870912)!==0?s=!1:(as=s=!0,(h===2||h===9||h===3||h===6)&&(h=gi.current,h!==null&&h.tag===13&&(h.flags|=16384))),QT(o,s)):ad(o)}function ad(s){var o=s;do{if((o.flags&32768)!==0){QT(o,as);return}s=o.return;var u=bO(o.alternate,o,Rr);if(u!==null){it=u;return}if(o=o.sibling,o!==null){it=o;return}it=o=s}while(o!==null);Ft===0&&(Ft=5)}function QT(s,o){do{var u=SO(s.alternate,s);if(u!==null){u.flags&=32767,it=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){it=s;return}it=s=u}while(s!==null);Ft=6,it=null}function e1(s,o,u,h,g,y,_,U,q){s.cancelPendingCommit=null;do od();while(Cn!==0);if((vt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(y=o.lanes|o.childLanes,y|=Ih,pu(s,u,y,_,U,q),s===At&&(it=At=null,ct=0),ao=o,ls=s,oo=u,Fm=y,Vm=g,qT=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,MO(F,function(){return s1(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=G.T,G.T=null,g=ie.p,ie.p=2,_=vt,vt|=4;try{TO(s,o,u)}finally{vt=_,ie.p=g,G.T=h}}Cn=1,t1(),n1(),i1()}}function t1(){if(Cn===1){Cn=0;var s=ls,o=ao,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=G.T,G.T=null;var h=ie.p;ie.p=2;var g=vt;vt|=4;try{LT(o,s);var y=ip,_=Hb(s.containerInfo),U=y.focusedElem,q=y.selectionRange;if(_!==U&&U&&U.ownerDocument&&zb(U.ownerDocument.documentElement,U)){if(q!==null&&_h(U)){var ne=q.start,he=q.end;if(he===void 0&&(he=ne),"selectionStart"in U)U.selectionStart=ne,U.selectionEnd=Math.min(he,U.value.length);else{var Se=U.ownerDocument||document,se=Se&&Se.defaultView||window;if(se.getSelection){var ce=se.getSelection(),ze=U.textContent.length,Be=Math.min(q.start,ze),Tt=q.end===void 0?Be:Math.min(q.end,ze);!ce.extend&&Be>Tt&&(_=Tt,Tt=Be,Be=_);var Z=Vb(U,Be),Y=Vb(U,Tt);if(Z&&Y&&(ce.rangeCount!==1||ce.anchorNode!==Z.node||ce.anchorOffset!==Z.offset||ce.focusNode!==Y.node||ce.focusOffset!==Y.offset)){var ee=Se.createRange();ee.setStart(Z.node,Z.offset),ce.removeAllRanges(),Be>Tt?(ce.addRange(ee),ce.extend(Y.node,Y.offset)):(ee.setEnd(Y.node,Y.offset),ce.addRange(ee))}}}}for(Se=[],ce=U;ce=ce.parentNode;)ce.nodeType===1&&Se.push({element:ce,left:ce.scrollLeft,top:ce.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Se.length;U++){var ve=Se[U];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}bd=!!np,ip=np=null}finally{vt=g,ie.p=h,G.T=u}}s.current=o,Cn=2}}function n1(){if(Cn===2){Cn=0;var s=ls,o=ao,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=G.T,G.T=null;var h=ie.p;ie.p=2;var g=vt;vt|=4;try{OT(s,o.alternate,o)}finally{vt=g,ie.p=h,G.T=u}}Cn=3}}function i1(){if(Cn===4||Cn===3){Cn=0,On();var s=ls,o=ao,u=oo,h=qT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Cn=5:(Cn=0,ao=ls=null,r1(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(cs=null),xn(u),o=o.stateNode,M&&typeof M.onCommitFiberRoot=="function")try{M.onCommitFiberRoot(Je,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=G.T,g=ie.p,ie.p=2,G.T=null;try{for(var y=s.onRecoverableError,_=0;_<h.length;_++){var U=h[_];y(U.value,{componentStack:U.stack})}}finally{G.T=o,ie.p=g}}(oo&3)!==0&&od(),Gi(s),g=s.pendingLanes,(u&4194090)!==0&&(g&42)!==0?s===zm?Wc++:(Wc=0,zm=s):Wc=0,$c(0)}}function r1(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Ac(o)))}function od(s){return t1(),n1(),i1(),s1()}function s1(){if(Cn!==5)return!1;var s=ls,o=Fm;Fm=0;var u=xn(oo),h=G.T,g=ie.p;try{ie.p=32>u?32:u,G.T=null,u=Vm,Vm=null;var y=ls,_=oo;if(Cn=0,ao=ls=null,oo=0,(vt&6)!==0)throw Error(i(331));var U=vt;if(vt|=4,zT(y.current),BT(y,y.current,_,u),vt=U,$c(0,!1),M&&typeof M.onPostCommitFiberRoot=="function")try{M.onPostCommitFiberRoot(Je,y)}catch{}return!0}finally{ie.p=g,G.T=h,r1(s,o)}}function a1(s,o,u){o=fi(u,o),o=Sm(s.stateNode,o,2),s=Qr(s,o,2),s!==null&&(Wr(s,2),Gi(s))}function Ct(s,o,u){if(s.tag===3)a1(s,s,u);else for(;o!==null;){if(o.tag===3){a1(o,s,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(cs===null||!cs.has(h))){s=fi(u,s),u=uT(2),h=Qr(o,u,2),h!==null&&(dT(u,h,o,s),Wr(h,2),Gi(h));break}}o=o.return}}function Gm(s,o,u){var h=s.pingCache;if(h===null){h=s.pingCache=new CO;var g=new Set;h.set(o,g)}else g=h.get(o),g===void 0&&(g=new Set,h.set(o,g));g.has(u)||(Um=!0,g.add(u),s=PO.bind(null,s,o,u),o.then(s,s))}function PO(s,o,u){var h=s.pingCache;h!==null&&h.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,At===s&&(ct&u)===u&&(Ft===4||Ft===3&&(ct&62914560)===ct&&300>kt()-Bm?(vt&2)===0&&co(s,0):Lm|=u,so===ct&&(so=0)),Gi(s)}function o1(s,o){o===0&&(o=mu()),s=qa(s,o),s!==null&&(Wr(s,o),Gi(s))}function _O(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),o1(s,u)}function DO(s,o){var u=0;switch(s.tag){case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(o),o1(s,u)}function MO(s,o){return wt(s,o)}var cd=null,uo=null,Ym=!1,ld=!1,Wm=!1,sa=0;function Gi(s){s!==uo&&s.next===null&&(uo===null?cd=uo=s:uo=uo.next=s),ld=!0,Ym||(Ym=!0,NO())}function $c(s,o){if(!Wm&&ld){Wm=!0;do for(var u=!1,h=cd;h!==null;){if(s!==0){var g=h.pendingLanes;if(g===0)var y=0;else{var _=h.suspendedLanes,U=h.pingedLanes;y=(1<<31-E(42|s)+1)-1,y&=g&~(_&~U),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,d1(h,y))}else y=ct,y=ht(h,h===At?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||gt(h,y)||(u=!0,d1(h,y));h=h.next}while(u);Wm=!1}}function OO(){c1()}function c1(){ld=Ym=!1;var s=0;sa!==0&&(zO()&&(s=sa),sa=0);for(var o=kt(),u=null,h=cd;h!==null;){var g=h.next,y=l1(h,o);y===0?(h.next=null,u===null?cd=g:u.next=g,g===null&&(uo=u)):(u=h,(s!==0||(y&3)!==0)&&(ld=!0)),h=g}$c(s)}function l1(s,o){for(var u=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var _=31-E(y),U=1<<_,q=g[_];q===-1?((U&u)===0||(U&h)!==0)&&(g[_]=dt(U,o)):q<=o&&(s.expiredLanes|=U),y&=~U}if(o=At,u=ct,u=ht(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===o&&(yt===2||yt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Ut(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||gt(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(h!==null&&Ut(h),xn(u)){case 2:case 8:u=A;break;case 32:u=F;break;case 268435456:u=pe;break;default:u=F}return h=u1.bind(null,s),u=wt(u,h),s.callbackPriority=o,s.callbackNode=u,o}return h!==null&&h!==null&&Ut(h),s.callbackPriority=2,s.callbackNode=null,2}function u1(s,o){if(Cn!==0&&Cn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(od()&&s.callbackNode!==u)return null;var h=ct;return h=ht(s,s===At?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(GT(s,h,o),l1(s,kt()),s.callbackNode!=null&&s.callbackNode===u?u1.bind(null,s):null)}function d1(s,o){if(od())return null;GT(s,o,!0)}function NO(){qO(function(){(vt&6)!==0?wt(R,OO):c1()})}function $m(){return sa===0&&(sa=Ei()),sa}function f1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Su(""+s)}function h1(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function IO(s,o,u,h,g){if(o==="submit"&&u&&u.stateNode===g){var y=f1((g[Rt]||null).action),_=h.submitter;_&&(o=(o=_[Rt]||null)?f1(o.formAction):_.getAttribute("formAction"),o!==null&&(y=o,_=null));var U=new Cu("action","action",null,h,g);s.push({event:U,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(sa!==0){var q=_?h1(g,_):new FormData(g);pm(u,{pending:!0,data:q,method:g.method,action:y},null,q)}}else typeof y=="function"&&(U.preventDefault(),q=_?h1(g,_):new FormData(g),pm(u,{pending:!0,data:q,method:g.method,action:y},y,q))},currentTarget:g}]})}}for(var Xm=0;Xm<Nh.length;Xm++){var Zm=Nh[Xm],UO=Zm.toLowerCase(),LO=Zm[0].toUpperCase()+Zm.slice(1);ki(UO,"on"+LO)}ki(Gb,"onAnimationEnd"),ki(Yb,"onAnimationIteration"),ki(Wb,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(eO,"onTransitionRun"),ki(tO,"onTransitionStart"),ki(nO,"onTransitionCancel"),ki($b,"onTransitionEnd"),Na("onMouseEnter",["mouseout","mouseover"]),Na("onMouseLeave",["mouseout","mouseover"]),Na("onPointerEnter",["pointerout","pointerover"]),Na("onPointerLeave",["pointerout","pointerover"]),Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xc));function m1(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],g=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var _=h.length-1;0<=_;_--){var U=h[_],q=U.instance,ne=U.currentTarget;if(U=U.listener,q!==y&&g.isPropagationStopped())break e;y=U,g.currentTarget=ne;try{y(g)}catch(he){Xu(he)}g.currentTarget=null,y=q}else for(_=0;_<h.length;_++){if(U=h[_],q=U.instance,ne=U.currentTarget,U=U.listener,q!==y&&g.isPropagationStopped())break e;y=U,g.currentTarget=ne;try{y(g)}catch(he){Xu(he)}g.currentTarget=null,y=q}}}}function rt(s,o){var u=o[_a];u===void 0&&(u=o[_a]=new Set);var h=s+"__bubble";u.has(h)||(p1(o,s,2,!1),u.add(h))}function Jm(s,o,u){var h=0;o&&(h|=4),p1(u,s,h,o)}var ud="_reactListening"+Math.random().toString(36).slice(2);function Qm(s){if(!s[ud]){s[ud]=!0,cb.forEach(function(u){u!=="selectionchange"&&(jO.has(u)||Jm(u,!1,s),Jm(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[ud]||(o[ud]=!0,Jm("selectionchange",!1,o))}}function p1(s,o,u,h){switch(B1(o)){case 2:var g=dN;break;case 8:g=fN;break;default:g=hp}u=g.bind(null,o,u,s),g=void 0,!Th||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(o,u,{capture:!0,passive:g}):s.addEventListener(o,u,!0):g!==void 0?s.addEventListener(o,u,{passive:g}):s.addEventListener(o,u,!1)}function ep(s,o,u,h,g){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var U=h.stateNode.containerInfo;if(U===g)break;if(_===4)for(_=h.return;_!==null;){var q=_.tag;if((q===3||q===4)&&_.stateNode.containerInfo===g)return;_=_.return}for(;U!==null;){if(_=Da(U),_===null)return;if(q=_.tag,q===5||q===6||q===26||q===27){h=y=_;continue e}U=U.parentNode}}h=h.return}xb(function(){var ne=y,he=bh(u),Se=[];e:{var se=Xb.get(s);if(se!==void 0){var ce=Cu,ze=s;switch(s){case"keypress":if(xu(u)===0)break e;case"keydown":case"keyup":ce=MM;break;case"focusin":ze="focus",ce=Eh;break;case"focusout":ze="blur",ce=Eh;break;case"beforeblur":case"afterblur":ce=Eh;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=SM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=IM;break;case Gb:case Yb:case Wb:ce=wM;break;case $b:ce=LM;break;case"scroll":case"scrollend":ce=yM;break;case"wheel":ce=BM;break;case"copy":case"cut":case"paste":ce=EM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=Rb;break;case"toggle":case"beforetoggle":ce=VM}var Be=(o&4)!==0,Tt=!Be&&(s==="scroll"||s==="scrollend"),Z=Be?se!==null?se+"Capture":null:se;Be=[];for(var Y=ne,ee;Y!==null;){var ve=Y;if(ee=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||ee===null||Z===null||(ve=pc(Y,Z),ve!=null&&Be.push(Zc(Y,ve,ee))),Tt)break;Y=Y.return}0<Be.length&&(se=new ce(se,ze,null,u,he),Se.push({event:se,listeners:Be}))}}if((o&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",ce=s==="mouseout"||s==="pointerout",se&&u!==yh&&(ze=u.relatedTarget||u.fromElement)&&(Da(ze)||ze[pn]))break e;if((ce||se)&&(se=he.window===he?he:(se=he.ownerDocument)?se.defaultView||se.parentWindow:window,ce?(ze=u.relatedTarget||u.toElement,ce=ne,ze=ze?Da(ze):null,ze!==null&&(Tt=a(ze),Be=ze.tag,ze!==Tt||Be!==5&&Be!==27&&Be!==6)&&(ze=null)):(ce=null,ze=ne),ce!==ze)){if(Be=Eb,ve="onMouseLeave",Z="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Be=Rb,ve="onPointerLeave",Z="onPointerEnter",Y="pointer"),Tt=ce==null?se:mc(ce),ee=ze==null?se:mc(ze),se=new Be(ve,Y+"leave",ce,u,he),se.target=Tt,se.relatedTarget=ee,ve=null,Da(he)===ne&&(Be=new Be(Z,Y+"enter",ze,u,he),Be.target=ee,Be.relatedTarget=Tt,ve=Be),Tt=ve,ce&&ze)t:{for(Be=ce,Z=ze,Y=0,ee=Be;ee;ee=fo(ee))Y++;for(ee=0,ve=Z;ve;ve=fo(ve))ee++;for(;0<Y-ee;)Be=fo(Be),Y--;for(;0<ee-Y;)Z=fo(Z),ee--;for(;Y--;){if(Be===Z||Z!==null&&Be===Z.alternate)break t;Be=fo(Be),Z=fo(Z)}Be=null}else Be=null;ce!==null&&g1(Se,se,ce,Be,!1),ze!==null&&Tt!==null&&g1(Se,Tt,ze,Be,!0)}}e:{if(se=ne?mc(ne):window,ce=se.nodeName&&se.nodeName.toLowerCase(),ce==="select"||ce==="input"&&se.type==="file")var Ie=Ib;else if(Ob(se))if(Ub)Ie=ZM;else{Ie=$M;var nt=WM}else ce=se.nodeName,!ce||ce.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&vh(ne.elementType)&&(Ie=Ib):Ie=XM;if(Ie&&(Ie=Ie(s,ne))){Nb(Se,Ie,u,he);break e}nt&&nt(s,se,ne),s==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&gh(se,"number",se.value)}switch(nt=ne?mc(ne):window,s){case"focusin":(Ob(nt)||nt.contentEditable==="true")&&(Va=nt,Dh=ne,wc=null);break;case"focusout":wc=Dh=Va=null;break;case"mousedown":Mh=!0;break;case"contextmenu":case"mouseup":case"dragend":Mh=!1,qb(Se,u,he);break;case"selectionchange":if(QM)break;case"keydown":case"keyup":qb(Se,u,he)}var je;if(Rh)e:{switch(s){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Fa?Db(s,u)&&(Fe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Fe="onCompositionStart");Fe&&(Ab&&u.locale!=="ko"&&(Fa||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Fa&&(je=wb()):($r=he,xh="value"in $r?$r.value:$r.textContent,Fa=!0)),nt=dd(ne,Fe),0<nt.length&&(Fe=new kb(Fe,s,null,u,he),Se.push({event:Fe,listeners:nt}),je?Fe.data=je:(je=Mb(u),je!==null&&(Fe.data=je)))),(je=HM?qM(s,u):KM(s,u))&&(Fe=dd(ne,"onBeforeInput"),0<Fe.length&&(nt=new kb("onBeforeInput","beforeinput",null,u,he),Se.push({event:nt,listeners:Fe}),nt.data=je)),IO(Se,s,ne,u,he)}m1(Se,o)})}function Zc(s,o,u){return{instance:s,listener:o,currentTarget:u}}function dd(s,o){for(var u=o+"Capture",h=[];s!==null;){var g=s,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=pc(s,u),g!=null&&h.unshift(Zc(s,g,y)),g=pc(s,o),g!=null&&h.push(Zc(s,g,y))),s.tag===3)return h;s=s.return}return[]}function fo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function g1(s,o,u,h,g){for(var y=o._reactName,_=[];u!==null&&u!==h;){var U=u,q=U.alternate,ne=U.stateNode;if(U=U.tag,q!==null&&q===h)break;U!==5&&U!==26&&U!==27||ne===null||(q=ne,g?(ne=pc(u,y),ne!=null&&_.unshift(Zc(u,ne,q))):g||(ne=pc(u,y),ne!=null&&_.push(Zc(u,ne,q)))),u=u.return}_.length!==0&&s.push({event:o,listeners:_})}var BO=/\r\n?/g,FO=/\u0000|\uFFFD/g;function v1(s){return(typeof s=="string"?s:""+s).replace(BO,`
`).replace(FO,"")}function y1(s,o){return o=v1(o),v1(s)===o}function fd(){}function St(s,o,u,h,g,y){switch(u){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||La(s,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&La(s,""+h);break;case"className":vu(s,"class",h);break;case"tabIndex":vu(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":vu(s,u,h);break;case"style":Sb(s,h,y);break;case"data":if(o!=="object"){vu(s,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Su(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(o!=="input"&&St(s,o,"name",g.name,g,null),St(s,o,"formEncType",g.formEncType,g,null),St(s,o,"formMethod",g.formMethod,g,null),St(s,o,"formTarget",g.formTarget,g,null)):(St(s,o,"encType",g.encType,g,null),St(s,o,"method",g.method,g,null),St(s,o,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Su(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=fd);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Su(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":rt("beforetoggle",s),rt("toggle",s),gu(s,"popover",h);break;case"xlinkActuate":mr(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":mr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":mr(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":mr(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":mr(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":mr(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":mr(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":mr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":mr(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":gu(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=gM.get(u)||u,gu(s,u,h))}}function tp(s,o,u,h,g,y){switch(u){case"style":Sb(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?La(s,h):(typeof h=="number"||typeof h=="bigint")&&La(s,""+h);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=fd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lb.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),o=u.slice(2,g?u.length-7:void 0),y=s[Rt]||null,y=y!=null?y[u]:null,typeof y=="function"&&s.removeEventListener(o,y,g),typeof h=="function")){typeof y!="function"&&y!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,h,g);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):gu(s,u,h)}}}function En(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var h=!1,g=!1,y;for(y in u)if(u.hasOwnProperty(y)){var _=u[y];if(_!=null)switch(y){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:St(s,o,y,_,u,null)}}g&&St(s,o,"srcSet",u.srcSet,u,null),h&&St(s,o,"src",u.src,u,null);return;case"input":rt("invalid",s);var U=y=_=g=null,q=null,ne=null;for(h in u)if(u.hasOwnProperty(h)){var he=u[h];if(he!=null)switch(h){case"name":g=he;break;case"type":_=he;break;case"checked":q=he;break;case"defaultChecked":ne=he;break;case"value":y=he;break;case"defaultValue":U=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,o));break;default:St(s,o,h,he,u,null)}}gb(s,y,U,q,ne,_,g,!1),yu(s);return;case"select":rt("invalid",s),h=_=y=null;for(g in u)if(u.hasOwnProperty(g)&&(U=u[g],U!=null))switch(g){case"value":y=U;break;case"defaultValue":_=U;break;case"multiple":h=U;default:St(s,o,g,U,u,null)}o=y,u=_,s.multiple=!!h,o!=null?Ua(s,!!h,o,!1):u!=null&&Ua(s,!!h,u,!0);return;case"textarea":rt("invalid",s),y=g=h=null;for(_ in u)if(u.hasOwnProperty(_)&&(U=u[_],U!=null))switch(_){case"value":h=U;break;case"defaultValue":g=U;break;case"children":y=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:St(s,o,_,U,u,null)}yb(s,h,g,y),yu(s);return;case"option":for(q in u)if(u.hasOwnProperty(q)&&(h=u[q],h!=null))switch(q){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:St(s,o,q,h,u,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(h=0;h<Xc.length;h++)rt(Xc[h],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in u)if(u.hasOwnProperty(ne)&&(h=u[ne],h!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:St(s,o,ne,h,u,null)}return;default:if(vh(o)){for(he in u)u.hasOwnProperty(he)&&(h=u[he],h!==void 0&&tp(s,o,he,h,u,void 0));return}}for(U in u)u.hasOwnProperty(U)&&(h=u[U],h!=null&&St(s,o,U,h,u,null))}function VO(s,o,u,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,_=null,U=null,q=null,ne=null,he=null;for(ce in u){var Se=u[ce];if(u.hasOwnProperty(ce)&&Se!=null)switch(ce){case"checked":break;case"value":break;case"defaultValue":q=Se;default:h.hasOwnProperty(ce)||St(s,o,ce,null,h,Se)}}for(var se in h){var ce=h[se];if(Se=u[se],h.hasOwnProperty(se)&&(ce!=null||Se!=null))switch(se){case"type":y=ce;break;case"name":g=ce;break;case"checked":ne=ce;break;case"defaultChecked":he=ce;break;case"value":_=ce;break;case"defaultValue":U=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,o));break;default:ce!==Se&&St(s,o,se,ce,h,Se)}}ph(s,_,U,q,ne,he,y,g);return;case"select":ce=_=U=se=null;for(y in u)if(q=u[y],u.hasOwnProperty(y)&&q!=null)switch(y){case"value":break;case"multiple":ce=q;default:h.hasOwnProperty(y)||St(s,o,y,null,h,q)}for(g in h)if(y=h[g],q=u[g],h.hasOwnProperty(g)&&(y!=null||q!=null))switch(g){case"value":se=y;break;case"defaultValue":U=y;break;case"multiple":_=y;default:y!==q&&St(s,o,g,y,h,q)}o=U,u=_,h=ce,se!=null?Ua(s,!!u,se,!1):!!h!=!!u&&(o!=null?Ua(s,!!u,o,!0):Ua(s,!!u,u?[]:"",!1));return;case"textarea":ce=se=null;for(U in u)if(g=u[U],u.hasOwnProperty(U)&&g!=null&&!h.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:St(s,o,U,null,h,g)}for(_ in h)if(g=h[_],y=u[_],h.hasOwnProperty(_)&&(g!=null||y!=null))switch(_){case"value":se=g;break;case"defaultValue":ce=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==y&&St(s,o,_,g,h,y)}vb(s,se,ce);return;case"option":for(var ze in u)if(se=u[ze],u.hasOwnProperty(ze)&&se!=null&&!h.hasOwnProperty(ze))switch(ze){case"selected":s.selected=!1;break;default:St(s,o,ze,null,h,se)}for(q in h)if(se=h[q],ce=u[q],h.hasOwnProperty(q)&&se!==ce&&(se!=null||ce!=null))switch(q){case"selected":s.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:St(s,o,q,se,h,ce)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in u)se=u[Be],u.hasOwnProperty(Be)&&se!=null&&!h.hasOwnProperty(Be)&&St(s,o,Be,null,h,se);for(ne in h)if(se=h[ne],ce=u[ne],h.hasOwnProperty(ne)&&se!==ce&&(se!=null||ce!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,o));break;default:St(s,o,ne,se,h,ce)}return;default:if(vh(o)){for(var Tt in u)se=u[Tt],u.hasOwnProperty(Tt)&&se!==void 0&&!h.hasOwnProperty(Tt)&&tp(s,o,Tt,void 0,h,se);for(he in h)se=h[he],ce=u[he],!h.hasOwnProperty(he)||se===ce||se===void 0&&ce===void 0||tp(s,o,he,se,h,ce);return}}for(var Z in u)se=u[Z],u.hasOwnProperty(Z)&&se!=null&&!h.hasOwnProperty(Z)&&St(s,o,Z,null,h,se);for(Se in h)se=h[Se],ce=u[Se],!h.hasOwnProperty(Se)||se===ce||se==null&&ce==null||St(s,o,Se,se,h,ce)}var np=null,ip=null;function hd(s){return s.nodeType===9?s:s.ownerDocument}function b1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function S1(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function rp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var sp=null;function zO(){var s=window.event;return s&&s.type==="popstate"?s===sp?!1:(sp=s,!0):(sp=null,!1)}var T1=typeof setTimeout=="function"?setTimeout:void 0,HO=typeof clearTimeout=="function"?clearTimeout:void 0,x1=typeof Promise=="function"?Promise:void 0,qO=typeof queueMicrotask=="function"?queueMicrotask:typeof x1<"u"?function(s){return x1.resolve(null).then(s).catch(KO)}:T1;function KO(s){setTimeout(function(){throw s})}function ds(s){return s==="head"}function w1(s,o){var u=o,h=0,g=0;do{var y=u.nextSibling;if(s.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"){if(0<h&&8>h){u=h;var _=s.ownerDocument;if(u&1&&Jc(_.documentElement),u&2&&Jc(_.body),u&4)for(u=_.head,Jc(u),_=u.firstChild;_;){var U=_.nextSibling,q=_.nodeName;_[hc]||q==="SCRIPT"||q==="STYLE"||q==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=U}}if(g===0){s.removeChild(y),al(o);return}g--}else u==="$"||u==="$?"||u==="$!"?g++:h=u.charCodeAt(0)-48;else h=0;u=y}while(u);al(o)}function ap(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":ap(u),dh(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function GO(s,o,u,h){for(;s.nodeType===1;){var g=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[hc])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Ai(s.nextSibling),s===null)break}return null}function YO(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Ai(s.nextSibling),s===null))return null;return s}function op(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function WO(s,o){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")o();else{var h=function(){o(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Ai(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var cp=null;function C1(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}function E1(s,o,u){switch(o=hd(u),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Jc(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);dh(s)}var yi=new Map,k1=new Set;function md(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ar=ie.d;ie.d={f:$O,r:XO,D:ZO,C:JO,L:QO,m:eN,X:nN,S:tN,M:iN};function $O(){var s=Ar.f(),o=sd();return s||o}function XO(s){var o=Ma(s);o!==null&&o.tag===5&&o.type==="form"?GS(o):Ar.r(s)}var ho=typeof document>"u"?null:document;function R1(s,o,u){var h=ho;if(h&&typeof o=="string"&&o){var g=di(o);g='link[rel="'+s+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),k1.has(g)||(k1.add(g),s={rel:s,crossOrigin:u,href:o},h.querySelector(g)===null&&(o=h.createElement("link"),En(o,"link",s),gn(o),h.head.appendChild(o)))}}function ZO(s){Ar.D(s),R1("dns-prefetch",s,null)}function JO(s,o){Ar.C(s,o),R1("preconnect",s,o)}function QO(s,o,u){Ar.L(s,o,u);var h=ho;if(h&&s&&o){var g='link[rel="preload"][as="'+di(o)+'"]';o==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+di(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+di(u.imageSizes)+'"]')):g+='[href="'+di(s)+'"]';var y=g;switch(o){case"style":y=mo(s);break;case"script":y=po(s)}yi.has(y)||(s=m({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),yi.set(y,s),h.querySelector(g)!==null||o==="style"&&h.querySelector(Qc(y))||o==="script"&&h.querySelector(el(y))||(o=h.createElement("link"),En(o,"link",s),gn(o),h.head.appendChild(o)))}}function eN(s,o){Ar.m(s,o);var u=ho;if(u&&s){var h=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+di(h)+'"][href="'+di(s)+'"]',y=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=po(s)}if(!yi.has(y)&&(s=m({rel:"modulepreload",href:s},o),yi.set(y,s),u.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(el(y)))return}h=u.createElement("link"),En(h,"link",s),gn(h),u.head.appendChild(h)}}}function tN(s,o,u){Ar.S(s,o,u);var h=ho;if(h&&s){var g=Oa(h).hoistableStyles,y=mo(s);o=o||"default";var _=g.get(y);if(!_){var U={loading:0,preload:null};if(_=h.querySelector(Qc(y)))U.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":o},u),(u=yi.get(y))&&lp(s,u);var q=_=h.createElement("link");gn(q),En(q,"link",s),q._p=new Promise(function(ne,he){q.onload=ne,q.onerror=he}),q.addEventListener("load",function(){U.loading|=1}),q.addEventListener("error",function(){U.loading|=2}),U.loading|=4,pd(_,o,h)}_={type:"stylesheet",instance:_,count:1,state:U},g.set(y,_)}}}function nN(s,o){Ar.X(s,o);var u=ho;if(u&&s){var h=Oa(u).hoistableScripts,g=po(s),y=h.get(g);y||(y=u.querySelector(el(g)),y||(s=m({src:s,async:!0},o),(o=yi.get(g))&&up(s,o),y=u.createElement("script"),gn(y),En(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function iN(s,o){Ar.M(s,o);var u=ho;if(u&&s){var h=Oa(u).hoistableScripts,g=po(s),y=h.get(g);y||(y=u.querySelector(el(g)),y||(s=m({src:s,async:!0,type:"module"},o),(o=yi.get(g))&&up(s,o),y=u.createElement("script"),gn(y),En(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(g,y))}}function A1(s,o,u,h){var g=(g=_e.current)?md(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=mo(u.href),u=Oa(g).hoistableStyles,h=u.get(o),h||(h={type:"style",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=mo(u.href);var y=Oa(g).hoistableStyles,_=y.get(s);if(_||(g=g.ownerDocument||g,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,_),(y=g.querySelector(Qc(s)))&&!y._p&&(_.instance=y,_.state.loading=5),yi.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},yi.set(s,u),y||rN(g,s,u,_.state))),o&&h===null)throw Error(i(528,""));return _}if(o&&h!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=po(u),u=Oa(g).hoistableScripts,h=u.get(o),h||(h={type:"script",instance:null,count:0,state:null},u.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function mo(s){return'href="'+di(s)+'"'}function Qc(s){return'link[rel="stylesheet"]['+s+"]"}function P1(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function rN(s,o,u,h){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=s.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),En(o,"link",u),gn(o),s.head.appendChild(o))}function po(s){return'[src="'+di(s)+'"]'}function el(s){return"script[async]"+s}function _1(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var h=s.querySelector('style[data-href~="'+di(u.href)+'"]');if(h)return o.instance=h,gn(h),h;var g=m({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),gn(h),En(h,"style",g),pd(h,u.precedence,s),o.instance=h;case"stylesheet":g=mo(u.href);var y=s.querySelector(Qc(g));if(y)return o.state.loading|=4,o.instance=y,gn(y),y;h=P1(u),(g=yi.get(g))&&lp(h,g),y=(s.ownerDocument||s).createElement("link"),gn(y);var _=y;return _._p=new Promise(function(U,q){_.onload=U,_.onerror=q}),En(y,"link",h),o.state.loading|=4,pd(y,u.precedence,s),o.instance=y;case"script":return y=po(u.src),(g=s.querySelector(el(y)))?(o.instance=g,gn(g),g):(h=u,(g=yi.get(y))&&(h=m({},u),up(h,g)),s=s.ownerDocument||s,g=s.createElement("script"),gn(g),En(g,"link",h),s.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,pd(h,u.precedence,s));return o.instance}function pd(s,o,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,y=g,_=0;_<h.length;_++){var U=h[_];if(U.dataset.precedence===o)y=U;else if(y!==g)break}y?y.parentNode.insertBefore(s,y.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function lp(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function up(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var gd=null;function D1(s,o,u){if(gd===null){var h=new Map,g=gd=new Map;g.set(u,h)}else g=gd,h=g.get(u),h||(h=new Map,g.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),g=0;g<u.length;g++){var y=u[g];if(!(y[hc]||y[Wt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var _=y.getAttribute(o)||"";_=s+_;var U=h.get(_);U?U.push(y):h.set(_,[y])}}return h}function M1(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function sN(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function O1(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var tl=null;function aN(){}function oN(s,o,u){if(tl===null)throw Error(i(475));var h=tl;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=mo(u.href),y=s.querySelector(Qc(g));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(h.count++,h=vd.bind(h),s.then(h,h)),o.state.loading|=4,o.instance=y,gn(y);return}y=s.ownerDocument||s,u=P1(u),(g=yi.get(g))&&lp(u,g),y=y.createElement("link"),gn(y);var _=y;_._p=new Promise(function(U,q){_.onload=U,_.onerror=q}),En(y,"link",u),o.instance=y}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(h.count++,o=vd.bind(h),s.addEventListener("load",o),s.addEventListener("error",o))}}function cN(){if(tl===null)throw Error(i(475));var s=tl;return s.stylesheets&&s.count===0&&dp(s,s.stylesheets),0<s.count?function(o){var u=setTimeout(function(){if(s.stylesheets&&dp(s,s.stylesheets),s.unsuspend){var h=s.unsuspend;s.unsuspend=null,h()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(u)}}:null}function vd(){if(this.count--,this.count===0){if(this.stylesheets)dp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var yd=null;function dp(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,yd=new Map,o.forEach(lN,s),yd=null,vd.call(s))}function lN(s,o){if(!(o.state.loading&4)){var u=yd.get(s);if(u)var h=u.get(null);else{u=new Map,yd.set(s,u);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var _=g[y];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(u.set(_.dataset.precedence,_),h=_)}h&&u.set(null,h)}g=o.instance,_=g.getAttribute("data-precedence"),y=u.get(_)||h,y===h&&u.set(null,g),u.set(_,g),this.count++,h=vd.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),y?y.parentNode.insertBefore(g,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),o.state.loading|=4}}var nl={$$typeof:N,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function uN(s,o,u,h,g,y,_,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fc(0),this.hiddenUpdates=fc(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function N1(s,o,u,h,g,y,_,U,q,ne,he,Se){return s=new uN(s,o,u,_,U,q,ne,Se),o=1,y===!0&&(o|=24),y=Xn(3,null,null,o),s.current=y,y.stateNode=s,o=Gh(),o.refCount++,s.pooledCache=o,o.refCount++,y.memoizedState={element:h,isDehydrated:u,cache:o},Xh(y),s}function I1(s){return s?(s=Ka,s):Ka}function U1(s,o,u,h,g,y){g=I1(g),h.context===null?h.context=g:h.pendingContext=g,h=Jr(o),h.payload={element:u},y=y===void 0?null:y,y!==null&&(h.callback=y),u=Qr(s,h,o),u!==null&&(ti(u,s,o),Mc(u,s,o))}function L1(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function fp(s,o){L1(s,o),(s=s.alternate)&&L1(s,o)}function j1(s){if(s.tag===13){var o=qa(s,67108864);o!==null&&ti(o,s,67108864),fp(s,67108864)}}var bd=!0;function dN(s,o,u,h){var g=G.T;G.T=null;var y=ie.p;try{ie.p=2,hp(s,o,u,h)}finally{ie.p=y,G.T=g}}function fN(s,o,u,h){var g=G.T;G.T=null;var y=ie.p;try{ie.p=8,hp(s,o,u,h)}finally{ie.p=y,G.T=g}}function hp(s,o,u,h){if(bd){var g=mp(h);if(g===null)ep(s,o,h,Sd,u),F1(s,h);else if(mN(g,s,o,u,h))h.stopPropagation();else if(F1(s,h),o&4&&-1<hN.indexOf(s)){for(;g!==null;){var y=Ma(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var _=ut(y.pendingLanes);if(_!==0){var U=y;for(U.pendingLanes|=2,U.entangledLanes|=2;_;){var q=1<<31-E(_);U.entanglements[1]|=q,_&=~q}Gi(y),(vt&6)===0&&(id=kt()+500,$c(0))}}break;case 13:U=qa(y,2),U!==null&&ti(U,y,2),sd(),fp(y,2)}if(y=mp(h),y===null&&ep(s,o,h,Sd,u),y===g)break;g=y}g!==null&&h.stopPropagation()}else ep(s,o,h,null,u)}}function mp(s){return s=bh(s),pp(s)}var Sd=null;function pp(s){if(Sd=null,s=Da(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=c(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Sd=s,null}function B1(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(j()){case R:return 2;case A:return 8;case F:case $:return 32;case pe:return 268435456;default:return 32}default:return 32}}var gp=!1,fs=null,hs=null,ms=null,il=new Map,rl=new Map,ps=[],hN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function F1(s,o){switch(s){case"focusin":case"focusout":fs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ms=null;break;case"pointerover":case"pointerout":il.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(o.pointerId)}}function sl(s,o,u,h,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Ma(o),o!==null&&j1(o)),s):(s.eventSystemFlags|=h,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function mN(s,o,u,h,g){switch(o){case"focusin":return fs=sl(fs,s,o,u,h,g),!0;case"dragenter":return hs=sl(hs,s,o,u,h,g),!0;case"mouseover":return ms=sl(ms,s,o,u,h,g),!0;case"pointerover":var y=g.pointerId;return il.set(y,sl(il.get(y)||null,s,o,u,h,g)),!0;case"gotpointercapture":return y=g.pointerId,rl.set(y,sl(rl.get(y)||null,s,o,u,h,g)),!0}return!1}function V1(s){var o=Da(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){s.blockedOn=o,un(s.priority,function(){if(u.tag===13){var h=ei();h=tn(h);var g=qa(u,h);g!==null&&ti(g,u,h),fp(u,h)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Td(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=mp(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);yh=h,u.target.dispatchEvent(h),yh=null}else return o=Ma(u),o!==null&&j1(o),s.blockedOn=u,!1;o.shift()}return!0}function z1(s,o,u){Td(s)&&u.delete(o)}function pN(){gp=!1,fs!==null&&Td(fs)&&(fs=null),hs!==null&&Td(hs)&&(hs=null),ms!==null&&Td(ms)&&(ms=null),il.forEach(z1),rl.forEach(z1)}function xd(s,o){s.blockedOn===o&&(s.blockedOn=null,gp||(gp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pN)))}var wd=null;function H1(s){wd!==s&&(wd=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wd===s&&(wd=null);for(var o=0;o<s.length;o+=3){var u=s[o],h=s[o+1],g=s[o+2];if(typeof h!="function"){if(pp(h||u)===null)continue;break}var y=Ma(u);y!==null&&(s.splice(o,3),o-=3,pm(y,{pending:!0,data:g,method:u.method,action:h},h,g))}}))}function al(s){function o(q){return xd(q,s)}fs!==null&&xd(fs,s),hs!==null&&xd(hs,s),ms!==null&&xd(ms,s),il.forEach(o),rl.forEach(o);for(var u=0;u<ps.length;u++){var h=ps[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<ps.length&&(u=ps[0],u.blockedOn===null);)V1(u),u.blockedOn===null&&ps.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var g=u[h],y=u[h+1],_=g[Rt]||null;if(typeof y=="function")_||H1(u);else if(_){var U=null;if(y&&y.hasAttribute("formAction")){if(g=y,_=y[Rt]||null)U=_.formAction;else if(pp(g)!==null)continue}else U=_.action;typeof U=="function"?u[h+1]=U:(u.splice(h,3),h-=3),H1(u)}}}function vp(s){this._internalRoot=s}Cd.prototype.render=vp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,h=ei();U1(u,h,s,o,null,null)},Cd.prototype.unmount=vp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;U1(s.current,2,null,s,null,null),sd(),o[pn]=null}};function Cd(s){this._internalRoot=s}Cd.prototype.unstable_scheduleHydration=function(s){if(s){var o=zs();s={blockedOn:null,target:s,priority:o};for(var u=0;u<ps.length&&o!==0&&o<ps[u].priority;u++);ps.splice(u,0,s),u===0&&V1(s)}};var q1=e.version;if(q1!=="19.1.1")throw Error(i(527,q1,"19.1.1"));ie.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(o),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var gN={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{Je=Ed.inject(gN),M=Ed}catch{}}return cl.createRoot=function(s,o){if(!r(s))throw Error(i(299));var u=!1,h="",g=aT,y=oT,_=cT,U=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(U=o.unstable_transitionCallbacks)),o=N1(s,1,!1,null,null,u,h,g,y,_,U,null),s[pn]=o.current,Qm(s),new vp(o)},cl.hydrateRoot=function(s,o,u){if(!r(s))throw Error(i(299));var h=!1,g="",y=aT,_=oT,U=cT,q=null,ne=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(_=u.onCaughtError),u.onRecoverableError!==void 0&&(U=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(q=u.unstable_transitionCallbacks),u.formState!==void 0&&(ne=u.formState)),o=N1(s,1,!0,o,u??null,h,g,y,_,U,q,ne),o.context=I1(null),u=o.current,h=ei(),h=tn(h),g=Jr(h),g.callback=null,Qr(u,g,h),u=h,o.current.lanes=u,Wr(o,u),Gi(o),s[pn]=o.current,Qm(s),new Cd(o)},cl.version="19.1.1",cl}var ex;function kN(){if(ex)return Sp.exports;ex=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sp.exports=EN(),Sp.exports}var RN=kN(),Cp={},ll={},tx;function WE(){if(tx)return ll;tx=1,ll.byteLength=l,ll.toByteArray=f,ll.fromByteArray=v;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,a=i.length;r<a;++r)t[r]=i[r],e[i.charCodeAt(r)]=r;e[45]=62,e[95]=63;function c(S){var x=S.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=S.indexOf("=");b===-1&&(b=x);var P=b===x?0:4-b%4;return[b,P]}function l(S){var x=c(S),b=x[0],P=x[1];return(b+P)*3/4-P}function d(S,x,b){return(x+b)*3/4-b}function f(S){var x,b=c(S),P=b[0],k=b[1],O=new n(d(S,P,k)),N=0,I=k>0?P-4:P,D;for(D=0;D<I;D+=4)x=e[S.charCodeAt(D)]<<18|e[S.charCodeAt(D+1)]<<12|e[S.charCodeAt(D+2)]<<6|e[S.charCodeAt(D+3)],O[N++]=x>>16&255,O[N++]=x>>8&255,O[N++]=x&255;return k===2&&(x=e[S.charCodeAt(D)]<<2|e[S.charCodeAt(D+1)]>>4,O[N++]=x&255),k===1&&(x=e[S.charCodeAt(D)]<<10|e[S.charCodeAt(D+1)]<<4|e[S.charCodeAt(D+2)]>>2,O[N++]=x>>8&255,O[N++]=x&255),O}function m(S){return t[S>>18&63]+t[S>>12&63]+t[S>>6&63]+t[S&63]}function p(S,x,b){for(var P,k=[],O=x;O<b;O+=3)P=(S[O]<<16&16711680)+(S[O+1]<<8&65280)+(S[O+2]&255),k.push(m(P));return k.join("")}function v(S){for(var x,b=S.length,P=b%3,k=[],O=16383,N=0,I=b-P;N<I;N+=O)k.push(p(S,N,N+O>I?I:N+O));return P===1?(x=S[b-1],k.push(t[x>>2]+t[x<<4&63]+"==")):P===2&&(x=(S[b-2]<<8)+S[b-1],k.push(t[x>>10]+t[x>>4&63]+t[x<<2&63]+"=")),k.join("")}return ll}var kd={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var nx;function $E(){return nx||(nx=1,kd.read=function(t,e,n,i,r){var a,c,l=r*8-i-1,d=(1<<l)-1,f=d>>1,m=-7,p=n?r-1:0,v=n?-1:1,S=t[e+p];for(p+=v,a=S&(1<<-m)-1,S>>=-m,m+=l;m>0;a=a*256+t[e+p],p+=v,m-=8);for(c=a&(1<<-m)-1,a>>=-m,m+=i;m>0;c=c*256+t[e+p],p+=v,m-=8);if(a===0)a=1-f;else{if(a===d)return c?NaN:(S?-1:1)*(1/0);c=c+Math.pow(2,i),a=a-f}return(S?-1:1)*c*Math.pow(2,a-i)},kd.write=function(t,e,n,i,r,a){var c,l,d,f=a*8-r-1,m=(1<<f)-1,p=m>>1,v=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=i?0:a-1,x=i?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,c=m):(c=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-c))<1&&(c--,d*=2),c+p>=1?e+=v/d:e+=v*Math.pow(2,1-p),e*d>=2&&(c++,d/=2),c+p>=m?(l=0,c=m):c+p>=1?(l=(e*d-1)*Math.pow(2,r),c=c+p):(l=e*Math.pow(2,p-1)*Math.pow(2,r),c=0));r>=8;t[n+S]=l&255,S+=x,l/=256,r-=8);for(c=c<<r|l,f+=r;f>0;t[n+S]=c&255,S+=x,c/=256,f-=8);t[n+S-x]|=b*128}),kd}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ix;function AN(){return ix||(ix=1,function(t){const e=WE(),n=$E(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;const r=2147483647;t.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=a(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const M=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(M,w),M.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function c(M){if(M>r)throw new RangeError('The value "'+M+'" is invalid for option "size"');const w=new Uint8Array(M);return Object.setPrototypeOf(w,l.prototype),w}function l(M,w,E){if(typeof M=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(M)}return d(M,w,E)}l.poolSize=8192;function d(M,w,E){if(typeof M=="string")return v(M,w);if(ArrayBuffer.isView(M))return x(M);if(M==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M);if($(M,ArrayBuffer)||M&&$(M.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($(M,SharedArrayBuffer)||M&&$(M.buffer,SharedArrayBuffer)))return b(M,w,E);if(typeof M=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=M.valueOf&&M.valueOf();if(L!=null&&L!==M)return l.from(L,w,E);const W=P(M);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof M[Symbol.toPrimitive]=="function")return l.from(M[Symbol.toPrimitive]("string"),w,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof M)}l.from=function(M,w,E){return d(M,w,E)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function f(M){if(typeof M!="number")throw new TypeError('"size" argument must be of type number');if(M<0)throw new RangeError('The value "'+M+'" is invalid for option "size"')}function m(M,w,E){return f(M),M<=0?c(M):w!==void 0?typeof E=="string"?c(M).fill(w,E):c(M).fill(w):c(M)}l.alloc=function(M,w,E){return m(M,w,E)};function p(M){return f(M),c(M<0?0:k(M)|0)}l.allocUnsafe=function(M){return p(M)},l.allocUnsafeSlow=function(M){return p(M)};function v(M,w){if((typeof w!="string"||w==="")&&(w="utf8"),!l.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const E=N(M,w)|0;let L=c(E);const W=L.write(M,w);return W!==E&&(L=L.slice(0,W)),L}function S(M){const w=M.length<0?0:k(M.length)|0,E=c(w);for(let L=0;L<w;L+=1)E[L]=M[L]&255;return E}function x(M){if($(M,Uint8Array)){const w=new Uint8Array(M);return b(w.buffer,w.byteOffset,w.byteLength)}return S(M)}function b(M,w,E){if(w<0||M.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(M.byteLength<w+(E||0))throw new RangeError('"length" is outside of buffer bounds');let L;return w===void 0&&E===void 0?L=new Uint8Array(M):E===void 0?L=new Uint8Array(M,w):L=new Uint8Array(M,w,E),Object.setPrototypeOf(L,l.prototype),L}function P(M){if(l.isBuffer(M)){const w=k(M.length)|0,E=c(w);return E.length===0||M.copy(E,0,0,w),E}if(M.length!==void 0)return typeof M.length!="number"||pe(M.length)?c(0):S(M);if(M.type==="Buffer"&&Array.isArray(M.data))return S(M.data)}function k(M){if(M>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return M|0}function O(M){return+M!=M&&(M=0),l.alloc(+M)}l.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==l.prototype},l.compare=function(w,E){if($(w,Uint8Array)&&(w=l.from(w,w.offset,w.byteLength)),$(E,Uint8Array)&&(E=l.from(E,E.offset,E.byteLength)),!l.isBuffer(w)||!l.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===E)return 0;let L=w.length,W=E.length;for(let re=0,ge=Math.min(L,W);re<ge;++re)if(w[re]!==E[re]){L=w[re],W=E[re];break}return L<W?-1:W<L?1:0},l.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(w,E){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return l.alloc(0);let L;if(E===void 0)for(E=0,L=0;L<w.length;++L)E+=w[L].length;const W=l.allocUnsafe(E);let re=0;for(L=0;L<w.length;++L){let ge=w[L];if($(ge,Uint8Array))re+ge.length>W.length?(l.isBuffer(ge)||(ge=l.from(ge)),ge.copy(W,re)):Uint8Array.prototype.set.call(W,ge,re);else if(l.isBuffer(ge))ge.copy(W,re);else throw new TypeError('"list" argument must be an Array of Buffers');re+=ge.length}return W};function N(M,w){if(l.isBuffer(M))return M.length;if(ArrayBuffer.isView(M)||$(M,ArrayBuffer))return M.byteLength;if(typeof M!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof M);const E=M.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&E===0)return 0;let W=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return kt(M).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return A(M).length;default:if(W)return L?-1:kt(M).length;w=(""+w).toLowerCase(),W=!0}}l.byteLength=N;function I(M,w,E){let L=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,w>>>=0,E<=w))return"";for(M||(M="utf8");;)switch(M){case"hex":return Pe(this,w,E);case"utf8":case"utf-8":return Ae(this,w,E);case"ascii":return ie(this,w,E);case"latin1":case"binary":return J(this,w,E);case"base64":return ke(this,w,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,w,E);default:if(L)throw new TypeError("Unknown encoding: "+M);M=(M+"").toLowerCase(),L=!0}}l.prototype._isBuffer=!0;function D(M,w,E){const L=M[w];M[w]=M[E],M[E]=L}l.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<w;E+=2)D(this,E,E+1);return this},l.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<w;E+=4)D(this,E,E+3),D(this,E+1,E+2);return this},l.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<w;E+=8)D(this,E,E+7),D(this,E+1,E+6),D(this,E+2,E+5),D(this,E+3,E+4);return this},l.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?Ae(this,0,w):I.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(w){if(!l.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:l.compare(this,w)===0},l.prototype.inspect=function(){let w="";const E=t.INSPECT_MAX_BYTES;return w=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(w+=" ... "),"<Buffer "+w+">"},i&&(l.prototype[i]=l.prototype.inspect),l.prototype.compare=function(w,E,L,W,re){if($(w,Uint8Array)&&(w=l.from(w,w.offset,w.byteLength)),!l.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(E===void 0&&(E=0),L===void 0&&(L=w?w.length:0),W===void 0&&(W=0),re===void 0&&(re=this.length),E<0||L>w.length||W<0||re>this.length)throw new RangeError("out of range index");if(W>=re&&E>=L)return 0;if(W>=re)return-1;if(E>=L)return 1;if(E>>>=0,L>>>=0,W>>>=0,re>>>=0,this===w)return 0;let ge=re-W,Ye=L-E;const ut=Math.min(ge,Ye),ht=this.slice(W,re),gt=w.slice(E,L);for(let dt=0;dt<ut;++dt)if(ht[dt]!==gt[dt]){ge=ht[dt],Ye=gt[dt];break}return ge<Ye?-1:Ye<ge?1:0};function B(M,w,E,L,W){if(M.length===0)return-1;if(typeof E=="string"?(L=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,pe(E)&&(E=W?0:M.length-1),E<0&&(E=M.length+E),E>=M.length){if(W)return-1;E=M.length-1}else if(E<0)if(W)E=0;else return-1;if(typeof w=="string"&&(w=l.from(w,L)),l.isBuffer(w))return w.length===0?-1:H(M,w,E,L,W);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(M,w,E):Uint8Array.prototype.lastIndexOf.call(M,w,E):H(M,[w],E,L,W);throw new TypeError("val must be string, number or Buffer")}function H(M,w,E,L,W){let re=1,ge=M.length,Ye=w.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(M.length<2||w.length<2)return-1;re=2,ge/=2,Ye/=2,E/=2}function ut(gt,dt){return re===1?gt[dt]:gt.readUInt16BE(dt*re)}let ht;if(W){let gt=-1;for(ht=E;ht<ge;ht++)if(ut(M,ht)===ut(w,gt===-1?0:ht-gt)){if(gt===-1&&(gt=ht),ht-gt+1===Ye)return gt*re}else gt!==-1&&(ht-=ht-gt),gt=-1}else for(E+Ye>ge&&(E=ge-Ye),ht=E;ht>=0;ht--){let gt=!0;for(let dt=0;dt<Ye;dt++)if(ut(M,ht+dt)!==ut(w,dt)){gt=!1;break}if(gt)return ht}return-1}l.prototype.includes=function(w,E,L){return this.indexOf(w,E,L)!==-1},l.prototype.indexOf=function(w,E,L){return B(this,w,E,L,!0)},l.prototype.lastIndexOf=function(w,E,L){return B(this,w,E,L,!1)};function z(M,w,E,L){E=Number(E)||0;const W=M.length-E;L?(L=Number(L),L>W&&(L=W)):L=W;const re=w.length;L>re/2&&(L=re/2);let ge;for(ge=0;ge<L;++ge){const Ye=parseInt(w.substr(ge*2,2),16);if(pe(Ye))return ge;M[E+ge]=Ye}return ge}function X(M,w,E,L){return F(kt(w,M.length-E),M,E,L)}function ae(M,w,E,L){return F(j(w),M,E,L)}function oe(M,w,E,L){return F(A(w),M,E,L)}function fe(M,w,E,L){return F(R(w,M.length-E),M,E,L)}l.prototype.write=function(w,E,L,W){if(E===void 0)W="utf8",L=this.length,E=0;else if(L===void 0&&typeof E=="string")W=E,L=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(L)?(L=L>>>0,W===void 0&&(W="utf8")):(W=L,L=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const re=this.length-E;if((L===void 0||L>re)&&(L=re),w.length>0&&(L<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let ge=!1;for(;;)switch(W){case"hex":return z(this,w,E,L);case"utf8":case"utf-8":return X(this,w,E,L);case"ascii":case"latin1":case"binary":return ae(this,w,E,L);case"base64":return oe(this,w,E,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,w,E,L);default:if(ge)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),ge=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ke(M,w,E){return w===0&&E===M.length?e.fromByteArray(M):e.fromByteArray(M.slice(w,E))}function Ae(M,w,E){E=Math.min(M.length,E);const L=[];let W=w;for(;W<E;){const re=M[W];let ge=null,Ye=re>239?4:re>223?3:re>191?2:1;if(W+Ye<=E){let ut,ht,gt,dt;switch(Ye){case 1:re<128&&(ge=re);break;case 2:ut=M[W+1],(ut&192)===128&&(dt=(re&31)<<6|ut&63,dt>127&&(ge=dt));break;case 3:ut=M[W+1],ht=M[W+2],(ut&192)===128&&(ht&192)===128&&(dt=(re&15)<<12|(ut&63)<<6|ht&63,dt>2047&&(dt<55296||dt>57343)&&(ge=dt));break;case 4:ut=M[W+1],ht=M[W+2],gt=M[W+3],(ut&192)===128&&(ht&192)===128&&(gt&192)===128&&(dt=(re&15)<<18|(ut&63)<<12|(ht&63)<<6|gt&63,dt>65535&&dt<1114112&&(ge=dt))}}ge===null?(ge=65533,Ye=1):ge>65535&&(ge-=65536,L.push(ge>>>10&1023|55296),ge=56320|ge&1023),L.push(ge),W+=Ye}return G(L)}const Oe=4096;function G(M){const w=M.length;if(w<=Oe)return String.fromCharCode.apply(String,M);let E="",L=0;for(;L<w;)E+=String.fromCharCode.apply(String,M.slice(L,L+=Oe));return E}function ie(M,w,E){let L="";E=Math.min(M.length,E);for(let W=w;W<E;++W)L+=String.fromCharCode(M[W]&127);return L}function J(M,w,E){let L="";E=Math.min(M.length,E);for(let W=w;W<E;++W)L+=String.fromCharCode(M[W]);return L}function Pe(M,w,E){const L=M.length;(!w||w<0)&&(w=0),(!E||E<0||E>L)&&(E=L);let W="";for(let re=w;re<E;++re)W+=we[M[re]];return W}function V(M,w,E){const L=M.slice(w,E);let W="";for(let re=0;re<L.length-1;re+=2)W+=String.fromCharCode(L[re]+L[re+1]*256);return W}l.prototype.slice=function(w,E){const L=this.length;w=~~w,E=E===void 0?L:~~E,w<0?(w+=L,w<0&&(w=0)):w>L&&(w=L),E<0?(E+=L,E<0&&(E=0)):E>L&&(E=L),E<w&&(E=w);const W=this.subarray(w,E);return Object.setPrototypeOf(W,l.prototype),W};function Q(M,w,E){if(M%1!==0||M<0)throw new RangeError("offset is not uint");if(M+w>E)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(w,E,L){w=w>>>0,E=E>>>0,L||Q(w,E,this.length);let W=this[w],re=1,ge=0;for(;++ge<E&&(re*=256);)W+=this[w+ge]*re;return W},l.prototype.readUintBE=l.prototype.readUIntBE=function(w,E,L){w=w>>>0,E=E>>>0,L||Q(w,E,this.length);let W=this[w+--E],re=1;for(;E>0&&(re*=256);)W+=this[w+--E]*re;return W},l.prototype.readUint8=l.prototype.readUInt8=function(w,E){return w=w>>>0,E||Q(w,1,this.length),this[w]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(w,E){return w=w>>>0,E||Q(w,2,this.length),this[w]|this[w+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(w,E){return w=w>>>0,E||Q(w,2,this.length),this[w]<<8|this[w+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(w,E){return w=w>>>0,E||Q(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(w,E){return w=w>>>0,E||Q(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},l.prototype.readBigUInt64LE=Ke(function(w){w=w>>>0,wt(w,"offset");const E=this[w],L=this[w+7];(E===void 0||L===void 0)&&Ut(w,this.length-8);const W=E+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,re=this[++w]+this[++w]*2**8+this[++w]*2**16+L*2**24;return BigInt(W)+(BigInt(re)<<BigInt(32))}),l.prototype.readBigUInt64BE=Ke(function(w){w=w>>>0,wt(w,"offset");const E=this[w],L=this[w+7];(E===void 0||L===void 0)&&Ut(w,this.length-8);const W=E*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],re=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+L;return(BigInt(W)<<BigInt(32))+BigInt(re)}),l.prototype.readIntLE=function(w,E,L){w=w>>>0,E=E>>>0,L||Q(w,E,this.length);let W=this[w],re=1,ge=0;for(;++ge<E&&(re*=256);)W+=this[w+ge]*re;return re*=128,W>=re&&(W-=Math.pow(2,8*E)),W},l.prototype.readIntBE=function(w,E,L){w=w>>>0,E=E>>>0,L||Q(w,E,this.length);let W=E,re=1,ge=this[w+--W];for(;W>0&&(re*=256);)ge+=this[w+--W]*re;return re*=128,ge>=re&&(ge-=Math.pow(2,8*E)),ge},l.prototype.readInt8=function(w,E){return w=w>>>0,E||Q(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},l.prototype.readInt16LE=function(w,E){w=w>>>0,E||Q(w,2,this.length);const L=this[w]|this[w+1]<<8;return L&32768?L|4294901760:L},l.prototype.readInt16BE=function(w,E){w=w>>>0,E||Q(w,2,this.length);const L=this[w+1]|this[w]<<8;return L&32768?L|4294901760:L},l.prototype.readInt32LE=function(w,E){return w=w>>>0,E||Q(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},l.prototype.readInt32BE=function(w,E){return w=w>>>0,E||Q(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},l.prototype.readBigInt64LE=Ke(function(w){w=w>>>0,wt(w,"offset");const E=this[w],L=this[w+7];(E===void 0||L===void 0)&&Ut(w,this.length-8);const W=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(L<<24);return(BigInt(W)<<BigInt(32))+BigInt(E+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),l.prototype.readBigInt64BE=Ke(function(w){w=w>>>0,wt(w,"offset");const E=this[w],L=this[w+7];(E===void 0||L===void 0)&&Ut(w,this.length-8);const W=(E<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(W)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+L)}),l.prototype.readFloatLE=function(w,E){return w=w>>>0,E||Q(w,4,this.length),n.read(this,w,!0,23,4)},l.prototype.readFloatBE=function(w,E){return w=w>>>0,E||Q(w,4,this.length),n.read(this,w,!1,23,4)},l.prototype.readDoubleLE=function(w,E){return w=w>>>0,E||Q(w,8,this.length),n.read(this,w,!0,52,8)},l.prototype.readDoubleBE=function(w,E){return w=w>>>0,E||Q(w,8,this.length),n.read(this,w,!1,52,8)};function me(M,w,E,L,W,re){if(!l.isBuffer(M))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>W||w<re)throw new RangeError('"value" argument is out of bounds');if(E+L>M.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(w,E,L,W){if(w=+w,E=E>>>0,L=L>>>0,!W){const Ye=Math.pow(2,8*L)-1;me(this,w,E,L,Ye,0)}let re=1,ge=0;for(this[E]=w&255;++ge<L&&(re*=256);)this[E+ge]=w/re&255;return E+L},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(w,E,L,W){if(w=+w,E=E>>>0,L=L>>>0,!W){const Ye=Math.pow(2,8*L)-1;me(this,w,E,L,Ye,0)}let re=L-1,ge=1;for(this[E+re]=w&255;--re>=0&&(ge*=256);)this[E+re]=w/ge&255;return E+L},l.prototype.writeUint8=l.prototype.writeUInt8=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,1,255,0),this[E]=w&255,E+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,2,65535,0),this[E]=w&255,this[E+1]=w>>>8,E+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,2,65535,0),this[E]=w>>>8,this[E+1]=w&255,E+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,4,4294967295,0),this[E+3]=w>>>24,this[E+2]=w>>>16,this[E+1]=w>>>8,this[E]=w&255,E+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,4,4294967295,0),this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=w&255,E+4};function le(M,w,E,L,W){Ge(w,L,W,M,E,7);let re=Number(w&BigInt(4294967295));M[E++]=re,re=re>>8,M[E++]=re,re=re>>8,M[E++]=re,re=re>>8,M[E++]=re;let ge=Number(w>>BigInt(32)&BigInt(4294967295));return M[E++]=ge,ge=ge>>8,M[E++]=ge,ge=ge>>8,M[E++]=ge,ge=ge>>8,M[E++]=ge,E}function Te(M,w,E,L,W){Ge(w,L,W,M,E,7);let re=Number(w&BigInt(4294967295));M[E+7]=re,re=re>>8,M[E+6]=re,re=re>>8,M[E+5]=re,re=re>>8,M[E+4]=re;let ge=Number(w>>BigInt(32)&BigInt(4294967295));return M[E+3]=ge,ge=ge>>8,M[E+2]=ge,ge=ge>>8,M[E+1]=ge,ge=ge>>8,M[E]=ge,E+8}l.prototype.writeBigUInt64LE=Ke(function(w,E=0){return le(this,w,E,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=Ke(function(w,E=0){return Te(this,w,E,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(w,E,L,W){if(w=+w,E=E>>>0,!W){const ut=Math.pow(2,8*L-1);me(this,w,E,L,ut-1,-ut)}let re=0,ge=1,Ye=0;for(this[E]=w&255;++re<L&&(ge*=256);)w<0&&Ye===0&&this[E+re-1]!==0&&(Ye=1),this[E+re]=(w/ge>>0)-Ye&255;return E+L},l.prototype.writeIntBE=function(w,E,L,W){if(w=+w,E=E>>>0,!W){const ut=Math.pow(2,8*L-1);me(this,w,E,L,ut-1,-ut)}let re=L-1,ge=1,Ye=0;for(this[E+re]=w&255;--re>=0&&(ge*=256);)w<0&&Ye===0&&this[E+re+1]!==0&&(Ye=1),this[E+re]=(w/ge>>0)-Ye&255;return E+L},l.prototype.writeInt8=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,1,127,-128),w<0&&(w=255+w+1),this[E]=w&255,E+1},l.prototype.writeInt16LE=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,2,32767,-32768),this[E]=w&255,this[E+1]=w>>>8,E+2},l.prototype.writeInt16BE=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,2,32767,-32768),this[E]=w>>>8,this[E+1]=w&255,E+2},l.prototype.writeInt32LE=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,4,2147483647,-2147483648),this[E]=w&255,this[E+1]=w>>>8,this[E+2]=w>>>16,this[E+3]=w>>>24,E+4},l.prototype.writeInt32BE=function(w,E,L){return w=+w,E=E>>>0,L||me(this,w,E,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=w&255,E+4},l.prototype.writeBigInt64LE=Ke(function(w,E=0){return le(this,w,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=Ke(function(w,E=0){return Te(this,w,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Me(M,w,E,L,W,re){if(E+L>M.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function _e(M,w,E,L,W){return w=+w,E=E>>>0,W||Me(M,w,E,4),n.write(M,w,E,L,23,4),E+4}l.prototype.writeFloatLE=function(w,E,L){return _e(this,w,E,!0,L)},l.prototype.writeFloatBE=function(w,E,L){return _e(this,w,E,!1,L)};function be(M,w,E,L,W){return w=+w,E=E>>>0,W||Me(M,w,E,8),n.write(M,w,E,L,52,8),E+8}l.prototype.writeDoubleLE=function(w,E,L){return be(this,w,E,!0,L)},l.prototype.writeDoubleBE=function(w,E,L){return be(this,w,E,!1,L)},l.prototype.copy=function(w,E,L,W){if(!l.isBuffer(w))throw new TypeError("argument should be a Buffer");if(L||(L=0),!W&&W!==0&&(W=this.length),E>=w.length&&(E=w.length),E||(E=0),W>0&&W<L&&(W=L),W===L||w.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(L<0||L>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),w.length-E<W-L&&(W=w.length-E+L);const re=W-L;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,L,W):Uint8Array.prototype.set.call(w,this.subarray(L,W),E),re},l.prototype.fill=function(w,E,L,W){if(typeof w=="string"){if(typeof E=="string"?(W=E,E=0,L=this.length):typeof L=="string"&&(W=L,L=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!l.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(w.length===1){const ge=w.charCodeAt(0);(W==="utf8"&&ge<128||W==="latin1")&&(w=ge)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(E<0||this.length<E||this.length<L)throw new RangeError("Out of range index");if(L<=E)return this;E=E>>>0,L=L===void 0?this.length:L>>>0,w||(w=0);let re;if(typeof w=="number")for(re=E;re<L;++re)this[re]=w;else{const ge=l.isBuffer(w)?w:l.from(w,W),Ye=ge.length;if(Ye===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(re=0;re<L-E;++re)this[re+E]=ge[re%Ye]}return this};const Ce={};function Ve(M,w,E){Ce[M]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${M}]`,this.stack,delete this.name}get code(){return M}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${M}]: ${this.message}`}}}Ve("ERR_BUFFER_OUT_OF_BOUNDS",function(M){return M?`${M} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ve("ERR_INVALID_ARG_TYPE",function(M,w){return`The "${M}" argument must be of type number. Received type ${typeof w}`},TypeError),Ve("ERR_OUT_OF_RANGE",function(M,w,E){let L=`The value of "${M}" is out of range.`,W=E;return Number.isInteger(E)&&Math.abs(E)>2**32?W=qe(String(E)):typeof E=="bigint"&&(W=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(W=qe(W)),W+="n"),L+=` It must be ${w}. Received ${W}`,L},RangeError);function qe(M){let w="",E=M.length;const L=M[0]==="-"?1:0;for(;E>=L+4;E-=3)w=`_${M.slice(E-3,E)}${w}`;return`${M.slice(0,E)}${w}`}function Xe(M,w,E){wt(w,"offset"),(M[w]===void 0||M[w+E]===void 0)&&Ut(w,M.length-(E+1))}function Ge(M,w,E,L,W,re){if(M>E||M<w){const ge=typeof w=="bigint"?"n":"";let Ye;throw w===0||w===BigInt(0)?Ye=`>= 0${ge} and < 2${ge} ** ${(re+1)*8}${ge}`:Ye=`>= -(2${ge} ** ${(re+1)*8-1}${ge}) and < 2 ** ${(re+1)*8-1}${ge}`,new Ce.ERR_OUT_OF_RANGE("value",Ye,M)}Xe(L,W,re)}function wt(M,w){if(typeof M!="number")throw new Ce.ERR_INVALID_ARG_TYPE(w,"number",M)}function Ut(M,w,E){throw Math.floor(M)!==M?(wt(M,E),new Ce.ERR_OUT_OF_RANGE("offset","an integer",M)):w<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${w}`,M)}const li=/[^+/0-9A-Za-z-_]/g;function On(M){if(M=M.split("=")[0],M=M.trim().replace(li,""),M.length<2)return"";for(;M.length%4!==0;)M=M+"=";return M}function kt(M,w){w=w||1/0;let E;const L=M.length;let W=null;const re=[];for(let ge=0;ge<L;++ge){if(E=M.charCodeAt(ge),E>55295&&E<57344){if(!W){if(E>56319){(w-=3)>-1&&re.push(239,191,189);continue}else if(ge+1===L){(w-=3)>-1&&re.push(239,191,189);continue}W=E;continue}if(E<56320){(w-=3)>-1&&re.push(239,191,189),W=E;continue}E=(W-55296<<10|E-56320)+65536}else W&&(w-=3)>-1&&re.push(239,191,189);if(W=null,E<128){if((w-=1)<0)break;re.push(E)}else if(E<2048){if((w-=2)<0)break;re.push(E>>6|192,E&63|128)}else if(E<65536){if((w-=3)<0)break;re.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((w-=4)<0)break;re.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return re}function j(M){const w=[];for(let E=0;E<M.length;++E)w.push(M.charCodeAt(E)&255);return w}function R(M,w){let E,L,W;const re=[];for(let ge=0;ge<M.length&&!((w-=2)<0);++ge)E=M.charCodeAt(ge),L=E>>8,W=E%256,re.push(W),re.push(L);return re}function A(M){return e.toByteArray(On(M))}function F(M,w,E,L){let W;for(W=0;W<L&&!(W+E>=w.length||W>=M.length);++W)w[W+E]=M[W];return W}function $(M,w){return M instanceof w||M!=null&&M.constructor!=null&&M.constructor.name!=null&&M.constructor.name===w.name}function pe(M){return M!==M}const we=function(){const M="0123456789abcdef",w=new Array(256);for(let E=0;E<16;++E){const L=E*16;for(let W=0;W<16;++W)w[L+W]=M[E]+M[W]}return w}();function Ke(M){return typeof BigInt>"u"?Je:M}function Je(){throw new Error("BigInt not supported")}}(Cp)),Cp}var PN=AN();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var rx="popstate";function _N(t={}){function e(i,r){let{pathname:a,search:c,hash:l}=i.location;return Og("",{pathname:a,search:c,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Fl(r)}return MN(e,n,null,t)}function Nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ci(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DN(){return Math.random().toString(36).substring(2,10)}function sx(t,e){return{usr:t.state,key:t.key,idx:e}}function Og(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Zo(e):e,state:n,key:e&&e.key||i||DN()}}function Fl({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Zo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function MN(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,c=r.history,l="POP",d=null,f=m();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function m(){return(c.state||{idx:null}).idx}function p(){l="POP";let P=m(),k=P==null?null:P-f;f=P,d&&d({action:l,location:b.location,delta:k})}function v(P,k){l="PUSH";let O=Og(b.location,P,k);f=m()+1;let N=sx(O,f),I=b.createHref(O);try{c.pushState(N,"",I)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;r.location.assign(I)}a&&d&&d({action:l,location:b.location,delta:1})}function S(P,k){l="REPLACE";let O=Og(b.location,P,k);f=m();let N=sx(O,f),I=b.createHref(O);c.replaceState(N,"",I),a&&d&&d({action:l,location:b.location,delta:0})}function x(P){return ON(P)}let b={get action(){return l},get location(){return t(r,c)},listen(P){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(rx,p),d=P,()=>{r.removeEventListener(rx,p),d=null}},createHref(P){return e(r,P)},createURL:x,encodeLocation(P){let k=x(P);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:v,replace:S,go(P){return c.go(P)}};return b}function ON(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Fl(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function XE(t,e,n="/"){return NN(t,e,n,!1)}function NN(t,e,n,i){let r=typeof e=="string"?Zo(e):e,a=jr(r.pathname||"/",n);if(a==null)return null;let c=ZE(t);IN(c);let l=null;for(let d=0;l==null&&d<c.length;++d){let f=GN(a);l=qN(c[d],f,i)}return l}function ZE(t,e=[],n=[],i=""){let r=(a,c,l)=>{let d={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};d.relativePath.startsWith("/")&&(Nt(d.relativePath.startsWith(i),`Absolute route path "${d.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(i.length));let f=Lr([i,d.relativePath]),m=n.concat(d);a.children&&a.children.length>0&&(Nt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),ZE(a.children,e,m,f)),!(a.path==null&&!a.index)&&e.push({path:f,score:zN(f,a.index),routesMeta:m})};return t.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))r(a,c);else for(let l of JE(a.path))r(a,c,l)}),e}function JE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let c=JE(i.join("/")),l=[];return l.push(...c.map(d=>d===""?a:[a,d].join("/"))),r&&l.push(...c),l.map(d=>t.startsWith("/")&&d===""?"/":d)}function IN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:HN(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var UN=/^:[\w-]+$/,LN=3,jN=2,BN=1,FN=10,VN=-2,ax=t=>t==="*";function zN(t,e){let n=t.split("/"),i=n.length;return n.some(ax)&&(i+=VN),e&&(i+=jN),n.filter(r=>!ax(r)).reduce((r,a)=>r+(UN.test(a)?LN:a===""?BN:FN),i)}function HN(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function qN(t,e,n=!1){let{routesMeta:i}=t,r={},a="/",c=[];for(let l=0;l<i.length;++l){let d=i[l],f=l===i.length-1,m=a==="/"?e:e.slice(a.length)||"/",p=vf({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),v=d.route;if(!p&&f&&n&&!i[i.length-1].route.index&&(p=vf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!p)return null;Object.assign(r,p.params),c.push({params:r,pathname:Lr([a,p.pathname]),pathnameBase:XN(Lr([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=Lr([a,p.pathnameBase]))}return c}function vf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=KN(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],c=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((f,{paramName:m,isOptional:p},v)=>{if(m==="*"){let x=l[v]||"";c=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const S=l[v];return p&&!S?f[m]=void 0:f[m]=(S||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:c,pattern:t}}function KN(t,e=!1,n=!0){Ci(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,l,d)=>(i.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function GN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ci(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function jr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function YN(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Zo(t):t;return{pathname:n?n.startsWith("/")?n:WN(n,e):e,search:ZN(i),hash:JN(r)}}function WN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Ep(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $N(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function S0(t){let e=$N(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function T0(t,e,n,i=!1){let r;typeof t=="string"?r=Zo(t):(r={...t},Nt(!r.pathname||!r.pathname.includes("?"),Ep("?","pathname","search",r)),Nt(!r.pathname||!r.pathname.includes("#"),Ep("#","pathname","hash",r)),Nt(!r.search||!r.search.includes("#"),Ep("#","search","hash",r)));let a=t===""||r.pathname==="",c=a?"/":r.pathname,l;if(c==null)l=n;else{let p=e.length-1;if(!i&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),p-=1;r.pathname=v.join("/")}l=p>=0?e[p]:"/"}let d=YN(r,l),f=c&&c!=="/"&&c.endsWith("/"),m=(a||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var Lr=t=>t.join("/").replace(/\/\/+/g,"/"),XN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ZN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function QN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var QE=["POST","PUT","PATCH","DELETE"];new Set(QE);var eI=["GET",...QE];new Set(eI);var Jo=T.createContext(null);Jo.displayName="DataRouter";var Vf=T.createContext(null);Vf.displayName="DataRouterState";T.createContext(!1);var ek=T.createContext({isTransitioning:!1});ek.displayName="ViewTransition";var tI=T.createContext(new Map);tI.displayName="Fetchers";var nI=T.createContext(null);nI.displayName="Await";var Vi=T.createContext(null);Vi.displayName="Navigation";var iu=T.createContext(null);iu.displayName="Location";var or=T.createContext({outlet:null,matches:[],isDataRoute:!1});or.displayName="Route";var x0=T.createContext(null);x0.displayName="RouteError";function iI(t,{relative:e}={}){Nt(Qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=T.useContext(Vi),{hash:r,pathname:a,search:c}=ru(t,{relative:e}),l=a;return n!=="/"&&(l=a==="/"?n:Lr([n,a])),i.createHref({pathname:l,search:c,hash:r})}function Qo(){return T.useContext(iu)!=null}function cr(){return Nt(Qo(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(iu).location}var tk="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nk(t){T.useContext(Vi).static||T.useLayoutEffect(t)}function ec(){let{isDataRoute:t}=T.useContext(or);return t?gI():rI()}function rI(){Nt(Qo(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(Jo),{basename:e,navigator:n}=T.useContext(Vi),{matches:i}=T.useContext(or),{pathname:r}=cr(),a=JSON.stringify(S0(i)),c=T.useRef(!1);return nk(()=>{c.current=!0}),T.useCallback((d,f={})=>{if(Ci(c.current,tk),!c.current)return;if(typeof d=="number"){n.go(d);return}let m=T0(d,JSON.parse(a),r,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Lr([e,m.pathname])),(f.replace?n.replace:n.push)(m,f.state,f)},[e,n,a,r,t])}T.createContext(null);function ru(t,{relative:e}={}){let{matches:n}=T.useContext(or),{pathname:i}=cr(),r=JSON.stringify(S0(n));return T.useMemo(()=>T0(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function sI(t,e){return ik(t,e)}function ik(t,e,n,i){Nt(Qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=T.useContext(Vi),{matches:a}=T.useContext(or),c=a[a.length-1],l=c?c.params:{},d=c?c.pathname:"/",f=c?c.pathnameBase:"/",m=c&&c.route;{let k=m&&m.path||"";rk(d,!m||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let p=cr(),v;if(e){let k=typeof e=="string"?Zo(e):e;Nt(f==="/"||k.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${k.pathname}" was given in the \`location\` prop.`),v=k}else v=p;let S=v.pathname||"/",x=S;if(f!=="/"){let k=f.replace(/^\//,"").split("/");x="/"+S.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=XE(t,{pathname:x});Ci(m||b!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ci(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=uI(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Lr([f,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:Lr([f,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,n,i);return e&&P?T.createElement(iu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},P):P}function aI(){let t=pI(),e=QN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=T.createElement(T.Fragment,null,T.createElement("p",null,"💿 Hey developer 👋"),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:r},n):null,c)}var oI=T.createElement(aI,null),cI=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?T.createElement(or.Provider,{value:this.props.routeContext},T.createElement(x0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lI({routeContext:t,match:e,children:n}){let i=T.useContext(Jo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(or.Provider,{value:t},n)}function uI(t,e=[],n=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,a=n?.errors;if(a!=null){let d=r.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);Nt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,d+1))}let c=!1,l=-1;if(n)for(let d=0;d<r.length;d++){let f=r[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=d),f.route.id){let{loaderData:m,errors:p}=n,v=f.route.loader&&!m.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){c=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((d,f,m)=>{let p,v=!1,S=null,x=null;n&&(p=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||oI,c&&(l<0&&m===0?(rk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,x=null):l===m&&(v=!0,x=f.route.hydrateFallbackElement||null)));let b=e.concat(r.slice(0,m+1)),P=()=>{let k;return p?k=S:v?k=x:f.route.Component?k=T.createElement(f.route.Component,null):f.route.element?k=f.route.element:k=d,T.createElement(lI,{match:f,routeContext:{outlet:d,matches:b,isDataRoute:n!=null},children:k})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?T.createElement(cI,{location:n.location,revalidation:n.revalidation,component:S,error:p,children:P(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):P()},null)}function w0(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dI(t){let e=T.useContext(Jo);return Nt(e,w0(t)),e}function fI(t){let e=T.useContext(Vf);return Nt(e,w0(t)),e}function hI(t){let e=T.useContext(or);return Nt(e,w0(t)),e}function C0(t){let e=hI(t),n=e.matches[e.matches.length-1];return Nt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function mI(){return C0("useRouteId")}function pI(){let t=T.useContext(x0),e=fI("useRouteError"),n=C0("useRouteError");return t!==void 0?t:e.errors?.[n]}function gI(){let{router:t}=dI("useNavigate"),e=C0("useNavigate"),n=T.useRef(!1);return nk(()=>{n.current=!0}),T.useCallback(async(r,a={})=>{Ci(n.current,tk),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var ox={};function rk(t,e,n){!e&&!ox[t]&&(ox[t]=!0,Ci(!1,n))}T.memo(vI);function vI({routes:t,future:e,state:n}){return ik(t,void 0,n,e)}function cx({to:t,replace:e,state:n,relative:i}){Nt(Qo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=T.useContext(Vi);Ci(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(or),{pathname:c}=cr(),l=ec(),d=T0(t,S0(a),c,i==="path"),f=JSON.stringify(d);return T.useEffect(()=>{l(JSON.parse(f),{replace:e,state:n,relative:i})},[l,f,i,e,n]),null}function Ss(t){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yI({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:a=!1}){Nt(!Qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:c,navigator:r,static:a,future:{}}),[c,r,a]);typeof n=="string"&&(n=Zo(n));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:v="default"}=n,S=T.useMemo(()=>{let x=jr(d,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:p,key:v},navigationType:i}},[c,d,f,m,p,v,i]);return Ci(S!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:T.createElement(Vi.Provider,{value:l},T.createElement(iu.Provider,{children:e,value:S}))}function bI({children:t,location:e}){return sI(Ng(t),e)}function Ng(t,e=[]){let n=[];return T.Children.forEach(t,(i,r)=>{if(!T.isValidElement(i))return;let a=[...e,r];if(i.type===T.Fragment){n.push.apply(n,Ng(i.props.children,a));return}Nt(i.type===Ss,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Ng(i.props.children,a)),n.push(c)}),n}var Gd="get",Yd="application/x-www-form-urlencoded";function zf(t){return t!=null&&typeof t.tagName=="string"}function SI(t){return zf(t)&&t.tagName.toLowerCase()==="button"}function TI(t){return zf(t)&&t.tagName.toLowerCase()==="form"}function xI(t){return zf(t)&&t.tagName.toLowerCase()==="input"}function wI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CI(t,e){return t.button===0&&(!e||e==="_self")&&!wI(t)}function Ig(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function EI(t,e){let n=Ig(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(a=>{n.append(r,a)})}),n}var Rd=null;function kI(){if(Rd===null)try{new FormData(document.createElement("form"),0),Rd=!1}catch{Rd=!0}return Rd}var RI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function kp(t){return t!=null&&!RI.has(t)?(Ci(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yd}"`),null):t}function AI(t,e){let n,i,r,a,c;if(TI(t)){let l=t.getAttribute("action");i=l?jr(l,e):null,n=t.getAttribute("method")||Gd,r=kp(t.getAttribute("enctype"))||Yd,a=new FormData(t)}else if(SI(t)||xI(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||l.getAttribute("action");if(i=d?jr(d,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Gd,r=kp(t.getAttribute("formenctype"))||kp(l.getAttribute("enctype"))||Yd,a=new FormData(l,t),!kI()){let{name:f,type:m,value:p}=t;if(m==="image"){let v=f?`${f}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else f&&a.append(f,p)}}else{if(zf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Gd,i=null,r=Yd,c=t}return a&&r==="text/plain"&&(c=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function E0(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function PI(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&jr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function _I(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function MI(t,e,n){let i=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let c=await _I(a,n);return c.links?c.links():[]}return[]}));return UI(i.flat(1).filter(DI).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function lx(t,e,n,i,r,a){let c=(d,f)=>n[f]?d.route.id!==n[f].route.id:!0,l=(d,f)=>n[f].pathname!==d.pathname||n[f].route.path?.endsWith("*")&&n[f].params["*"]!==d.params["*"];return a==="assets"?e.filter((d,f)=>c(d,f)||l(d,f)):a==="data"?e.filter((d,f)=>{let m=i.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,f)||l(d,f))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function OI(t,e,{includeHydrateFallback:n}={}){return NI(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function NI(t){return[...new Set(t)]}function II(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function UI(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let a=JSON.stringify(II(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function sk(){let t=T.useContext(Jo);return E0(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function LI(){let t=T.useContext(Vf);return E0(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var k0=T.createContext(void 0);k0.displayName="FrameworkContext";function ak(){let t=T.useContext(k0);return E0(t,"You must render this element inside a <HydratedRouter> element"),t}function jI(t,e){let n=T.useContext(k0),[i,r]=T.useState(!1),[a,c]=T.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:p}=e,v=T.useRef(null);T.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let b=k=>{k.forEach(O=>{c(O.isIntersecting)})},P=new IntersectionObserver(b,{threshold:.5});return v.current&&P.observe(v.current),()=>{P.disconnect()}}},[t]),T.useEffect(()=>{if(i){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[i]);let S=()=>{r(!0)},x=()=>{r(!1),c(!1)};return n?t!=="intent"?[a,v,{}]:[a,v,{onFocus:ul(l,S),onBlur:ul(d,x),onMouseEnter:ul(f,S),onMouseLeave:ul(m,x),onTouchStart:ul(p,S)}]:[!1,v,{}]}function ul(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function BI({page:t,...e}){let{router:n}=sk(),i=T.useMemo(()=>XE(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?T.createElement(VI,{page:t,matches:i,...e}):null}function FI(t){let{manifest:e,routeModules:n}=ak(),[i,r]=T.useState([]);return T.useEffect(()=>{let a=!1;return MI(t,e,n).then(c=>{a||r(c)}),()=>{a=!0}},[t,e,n]),i}function VI({page:t,matches:e,...n}){let i=cr(),{manifest:r,routeModules:a}=ak(),{basename:c}=sk(),{loaderData:l,matches:d}=LI(),f=T.useMemo(()=>lx(t,e,d,r,i,"data"),[t,e,d,r,i]),m=T.useMemo(()=>lx(t,e,d,r,i,"assets"),[t,e,d,r,i]),p=T.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let x=new Set,b=!1;if(e.forEach(k=>{let O=r.routes[k.route.id];!O||!O.hasLoader||(!f.some(N=>N.route.id===k.route.id)&&k.route.id in l&&a[k.route.id]?.shouldRevalidate||O.hasClientLoader?b=!0:x.add(k.route.id))}),x.size===0)return[];let P=PI(t,c,"data");return b&&x.size>0&&P.searchParams.set("_routes",e.filter(k=>x.has(k.route.id)).map(k=>k.route.id).join(",")),[P.pathname+P.search]},[c,l,i,r,f,e,t,a]),v=T.useMemo(()=>OI(m,r),[m,r]),S=FI(m);return T.createElement(T.Fragment,null,p.map(x=>T.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),v.map(x=>T.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),S.map(({key:x,link:b})=>T.createElement("link",{key:x,...b})))}function zI(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ok=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ok&&(window.__reactRouterVersion="7.7.1")}catch{}function HI({basename:t,children:e,window:n}){let i=T.useRef();i.current==null&&(i.current=_N({window:n,v5Compat:!0}));let r=i.current,[a,c]=T.useState({action:r.action,location:r.location}),l=T.useCallback(d=>{T.startTransition(()=>c(d))},[c]);return T.useLayoutEffect(()=>r.listen(l),[r,l]),T.createElement(yI,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r})}var ck=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,on=T.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:c,state:l,target:d,to:f,preventScrollReset:m,viewTransition:p,...v},S){let{basename:x}=T.useContext(Vi),b=typeof f=="string"&&ck.test(f),P,k=!1;if(typeof f=="string"&&b&&(P=f,ok))try{let X=new URL(window.location.href),ae=f.startsWith("//")?new URL(X.protocol+f):new URL(f),oe=jr(ae.pathname,x);ae.origin===X.origin&&oe!=null?f=oe+ae.search+ae.hash:k=!0}catch{Ci(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=iI(f,{relative:r}),[N,I,D]=jI(i,v),B=YI(f,{replace:c,state:l,target:d,preventScrollReset:m,relative:r,viewTransition:p});function H(X){e&&e(X),X.defaultPrevented||B(X)}let z=T.createElement("a",{...v,...D,href:P||O,onClick:k||a?e:H,ref:zI(S,I),target:d,"data-discover":!b&&n==="render"?"true":void 0});return N&&!b?T.createElement(T.Fragment,null,z,T.createElement(BI,{page:O})):z});on.displayName="Link";var qI=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:c,viewTransition:l,children:d,...f},m){let p=ru(c,{relative:f.relative}),v=cr(),S=T.useContext(Vf),{navigator:x,basename:b}=T.useContext(Vi),P=S!=null&&QI(p)&&l===!0,k=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,O=v.pathname,N=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;n||(O=O.toLowerCase(),N=N?N.toLowerCase():null,k=k.toLowerCase()),N&&b&&(N=jr(N,b)||N);const I=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let D=O===k||!r&&O.startsWith(k)&&O.charAt(I)==="/",B=N!=null&&(N===k||!r&&N.startsWith(k)&&N.charAt(k.length)==="/"),H={isActive:D,isPending:B,isTransitioning:P},z=D?e:void 0,X;typeof i=="function"?X=i(H):X=[i,D?"active":null,B?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let ae=typeof a=="function"?a(H):a;return T.createElement(on,{...f,"aria-current":z,className:X,ref:m,style:ae,to:c,viewTransition:l},typeof d=="function"?d(H):d)});qI.displayName="NavLink";var KI=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:a,method:c=Gd,action:l,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:p,...v},S)=>{let x=ZI(),b=JI(l,{relative:f}),P=c.toLowerCase()==="get"?"get":"post",k=typeof l=="string"&&ck.test(l),O=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let I=N.nativeEvent.submitter,D=I?.getAttribute("formmethod")||c;x(I||N.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:r,state:a,relative:f,preventScrollReset:m,viewTransition:p})};return T.createElement("form",{ref:S,method:P,action:b,onSubmit:i?d:O,...v,"data-discover":!k&&t==="render"?"true":void 0})});KI.displayName="Form";function GI(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lk(t){let e=T.useContext(Jo);return Nt(e,GI(t)),e}function YI(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:c}={}){let l=ec(),d=cr(),f=ru(t,{relative:a});return T.useCallback(m=>{if(CI(m,e)){m.preventDefault();let p=n!==void 0?n:Fl(d)===Fl(f);l(t,{replace:p,state:i,preventScrollReset:r,relative:a,viewTransition:c})}},[d,l,f,n,i,e,t,r,a,c])}function WI(t){Ci(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(Ig(t)),n=T.useRef(!1),i=cr(),r=T.useMemo(()=>EI(i.search,n.current?null:e.current),[i.search]),a=ec(),c=T.useCallback((l,d)=>{const f=Ig(typeof l=="function"?l(new URLSearchParams(r)):l);n.current=!0,a("?"+f,d)},[a,r]);return[r,c]}var $I=0,XI=()=>`__${String(++$I)}__`;function ZI(){let{router:t}=lk("useSubmit"),{basename:e}=T.useContext(Vi),n=mI();return T.useCallback(async(i,r={})=>{let{action:a,method:c,encType:l,formData:d,body:f}=AI(i,e);if(r.navigate===!1){let m=r.fetcherKey||XI();await t.fetch(m,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||c,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:d,body:f,formMethod:r.method||c,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function JI(t,{relative:e}={}){let{basename:n}=T.useContext(Vi),i=T.useContext(or);Nt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...ru(t||".",{relative:e})},c=cr();if(t==null){a.search=c.search;let l=new URLSearchParams(a.search),d=l.getAll("index");if(d.some(m=>m==="")){l.delete("index"),d.filter(p=>p).forEach(p=>l.append("index",p));let m=l.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Lr([n,a.pathname])),Fl(a)}function QI(t,{relative:e}={}){let n=T.useContext(ek);Nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=lk("useViewTransitionState"),r=ru(t,{relative:e});if(!n.isTransitioning)return!1;let a=jr(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=jr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return vf(r.pathname,c)!=null||vf(r.pathname,a)!=null}var su=YE();const uk=KE(su);var Rp={},Ap,ux;function e3(){if(ux)return Ap;ux=1;var t={}.toString;return Ap=Array.isArray||function(e){return t.call(e)=="[object Array]"},Ap}var dx;function t3(){return dx||(dx=1,function(t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var e=WE(),n=$E(),i=e3();t.Buffer=l,t.SlowBuffer=k,t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=a();function r(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},j.foo()===42&&typeof j.subarray=="function"&&j.subarray(1,1).byteLength===0}catch{return!1}}function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(j,R){if(a()<R)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(j=new Uint8Array(R),j.__proto__=l.prototype):(j===null&&(j=new l(R)),j.length=R),j}function l(j,R,A){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(j,R,A);if(typeof j=="number"){if(typeof R=="string")throw new Error("If encoding is specified then the first argument must be a string");return p(this,j)}return d(this,j,R,A)}l.poolSize=8192,l._augment=function(j){return j.__proto__=l.prototype,j};function d(j,R,A,F){if(typeof R=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&R instanceof ArrayBuffer?x(j,R,A,F):typeof R=="string"?v(j,R,A):b(j,R)}l.from=function(j,R,A){return d(null,j,R,A)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0}));function f(j){if(typeof j!="number")throw new TypeError('"size" argument must be a number');if(j<0)throw new RangeError('"size" argument must not be negative')}function m(j,R,A,F){return f(R),R<=0?c(j,R):A!==void 0?typeof F=="string"?c(j,R).fill(A,F):c(j,R).fill(A):c(j,R)}l.alloc=function(j,R,A){return m(null,j,R,A)};function p(j,R){if(f(R),j=c(j,R<0?0:P(R)|0),!l.TYPED_ARRAY_SUPPORT)for(var A=0;A<R;++A)j[A]=0;return j}l.allocUnsafe=function(j){return p(null,j)},l.allocUnsafeSlow=function(j){return p(null,j)};function v(j,R,A){if((typeof A!="string"||A==="")&&(A="utf8"),!l.isEncoding(A))throw new TypeError('"encoding" must be a valid string encoding');var F=O(R,A)|0;j=c(j,F);var $=j.write(R,A);return $!==F&&(j=j.slice(0,$)),j}function S(j,R){var A=R.length<0?0:P(R.length)|0;j=c(j,A);for(var F=0;F<A;F+=1)j[F]=R[F]&255;return j}function x(j,R,A,F){if(R.byteLength,A<0||R.byteLength<A)throw new RangeError("'offset' is out of bounds");if(R.byteLength<A+(F||0))throw new RangeError("'length' is out of bounds");return A===void 0&&F===void 0?R=new Uint8Array(R):F===void 0?R=new Uint8Array(R,A):R=new Uint8Array(R,A,F),l.TYPED_ARRAY_SUPPORT?(j=R,j.__proto__=l.prototype):j=S(j,R),j}function b(j,R){if(l.isBuffer(R)){var A=P(R.length)|0;return j=c(j,A),j.length===0||R.copy(j,0,0,A),j}if(R){if(typeof ArrayBuffer<"u"&&R.buffer instanceof ArrayBuffer||"length"in R)return typeof R.length!="number"||kt(R.length)?c(j,0):S(j,R);if(R.type==="Buffer"&&i(R.data))return S(j,R.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function P(j){if(j>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return j|0}function k(j){return+j!=j&&(j=0),l.alloc(+j)}l.isBuffer=function(R){return!!(R!=null&&R._isBuffer)},l.compare=function(R,A){if(!l.isBuffer(R)||!l.isBuffer(A))throw new TypeError("Arguments must be Buffers");if(R===A)return 0;for(var F=R.length,$=A.length,pe=0,we=Math.min(F,$);pe<we;++pe)if(R[pe]!==A[pe]){F=R[pe],$=A[pe];break}return F<$?-1:$<F?1:0},l.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(R,A){if(!i(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return l.alloc(0);var F;if(A===void 0)for(A=0,F=0;F<R.length;++F)A+=R[F].length;var $=l.allocUnsafe(A),pe=0;for(F=0;F<R.length;++F){var we=R[F];if(!l.isBuffer(we))throw new TypeError('"list" argument must be an Array of Buffers');we.copy($,pe),pe+=we.length}return $};function O(j,R){if(l.isBuffer(j))return j.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(j)||j instanceof ArrayBuffer))return j.byteLength;typeof j!="string"&&(j=""+j);var A=j.length;if(A===0)return 0;for(var F=!1;;)switch(R){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":case void 0:return Ge(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return li(j).length;default:if(F)return Ge(j).length;R=(""+R).toLowerCase(),F=!0}}l.byteLength=O;function N(j,R,A){var F=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,R>>>=0,A<=R))return"";for(j||(j="utf8");;)switch(j){case"hex":return Pe(this,R,A);case"utf8":case"utf-8":return Ae(this,R,A);case"ascii":return ie(this,R,A);case"latin1":case"binary":return J(this,R,A);case"base64":return ke(this,R,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,R,A);default:if(F)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),F=!0}}l.prototype._isBuffer=!0;function I(j,R,A){var F=j[R];j[R]=j[A],j[A]=F}l.prototype.swap16=function(){var R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var A=0;A<R;A+=2)I(this,A,A+1);return this},l.prototype.swap32=function(){var R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var A=0;A<R;A+=4)I(this,A,A+3),I(this,A+1,A+2);return this},l.prototype.swap64=function(){var R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var A=0;A<R;A+=8)I(this,A,A+7),I(this,A+1,A+6),I(this,A+2,A+5),I(this,A+3,A+4);return this},l.prototype.toString=function(){var R=this.length|0;return R===0?"":arguments.length===0?Ae(this,0,R):N.apply(this,arguments)},l.prototype.equals=function(R){if(!l.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:l.compare(this,R)===0},l.prototype.inspect=function(){var R="",A=t.INSPECT_MAX_BYTES;return this.length>0&&(R=this.toString("hex",0,A).match(/.{2}/g).join(" "),this.length>A&&(R+=" ... ")),"<Buffer "+R+">"},l.prototype.compare=function(R,A,F,$,pe){if(!l.isBuffer(R))throw new TypeError("Argument must be a Buffer");if(A===void 0&&(A=0),F===void 0&&(F=R?R.length:0),$===void 0&&($=0),pe===void 0&&(pe=this.length),A<0||F>R.length||$<0||pe>this.length)throw new RangeError("out of range index");if($>=pe&&A>=F)return 0;if($>=pe)return-1;if(A>=F)return 1;if(A>>>=0,F>>>=0,$>>>=0,pe>>>=0,this===R)return 0;for(var we=pe-$,Ke=F-A,Je=Math.min(we,Ke),M=this.slice($,pe),w=R.slice(A,F),E=0;E<Je;++E)if(M[E]!==w[E]){we=M[E],Ke=w[E];break}return we<Ke?-1:Ke<we?1:0};function D(j,R,A,F,$){if(j.length===0)return-1;if(typeof A=="string"?(F=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,isNaN(A)&&(A=$?0:j.length-1),A<0&&(A=j.length+A),A>=j.length){if($)return-1;A=j.length-1}else if(A<0)if($)A=0;else return-1;if(typeof R=="string"&&(R=l.from(R,F)),l.isBuffer(R))return R.length===0?-1:B(j,R,A,F,$);if(typeof R=="number")return R=R&255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?$?Uint8Array.prototype.indexOf.call(j,R,A):Uint8Array.prototype.lastIndexOf.call(j,R,A):B(j,[R],A,F,$);throw new TypeError("val must be string, number or Buffer")}function B(j,R,A,F,$){var pe=1,we=j.length,Ke=R.length;if(F!==void 0&&(F=String(F).toLowerCase(),F==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(j.length<2||R.length<2)return-1;pe=2,we/=2,Ke/=2,A/=2}function Je(W,re){return pe===1?W[re]:W.readUInt16BE(re*pe)}var M;if($){var w=-1;for(M=A;M<we;M++)if(Je(j,M)===Je(R,w===-1?0:M-w)){if(w===-1&&(w=M),M-w+1===Ke)return w*pe}else w!==-1&&(M-=M-w),w=-1}else for(A+Ke>we&&(A=we-Ke),M=A;M>=0;M--){for(var E=!0,L=0;L<Ke;L++)if(Je(j,M+L)!==Je(R,L)){E=!1;break}if(E)return M}return-1}l.prototype.includes=function(R,A,F){return this.indexOf(R,A,F)!==-1},l.prototype.indexOf=function(R,A,F){return D(this,R,A,F,!0)},l.prototype.lastIndexOf=function(R,A,F){return D(this,R,A,F,!1)};function H(j,R,A,F){A=Number(A)||0;var $=j.length-A;F?(F=Number(F),F>$&&(F=$)):F=$;var pe=R.length;if(pe%2!==0)throw new TypeError("Invalid hex string");F>pe/2&&(F=pe/2);for(var we=0;we<F;++we){var Ke=parseInt(R.substr(we*2,2),16);if(isNaN(Ke))return we;j[A+we]=Ke}return we}function z(j,R,A,F){return On(Ge(R,j.length-A),j,A,F)}function X(j,R,A,F){return On(wt(R),j,A,F)}function ae(j,R,A,F){return X(j,R,A,F)}function oe(j,R,A,F){return On(li(R),j,A,F)}function fe(j,R,A,F){return On(Ut(R,j.length-A),j,A,F)}l.prototype.write=function(R,A,F,$){if(A===void 0)$="utf8",F=this.length,A=0;else if(F===void 0&&typeof A=="string")$=A,F=this.length,A=0;else if(isFinite(A))A=A|0,isFinite(F)?(F=F|0,$===void 0&&($="utf8")):($=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var pe=this.length-A;if((F===void 0||F>pe)&&(F=pe),R.length>0&&(F<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");for(var we=!1;;)switch($){case"hex":return H(this,R,A,F);case"utf8":case"utf-8":return z(this,R,A,F);case"ascii":return X(this,R,A,F);case"latin1":case"binary":return ae(this,R,A,F);case"base64":return oe(this,R,A,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,R,A,F);default:if(we)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),we=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ke(j,R,A){return R===0&&A===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(R,A))}function Ae(j,R,A){A=Math.min(j.length,A);for(var F=[],$=R;$<A;){var pe=j[$],we=null,Ke=pe>239?4:pe>223?3:pe>191?2:1;if($+Ke<=A){var Je,M,w,E;switch(Ke){case 1:pe<128&&(we=pe);break;case 2:Je=j[$+1],(Je&192)===128&&(E=(pe&31)<<6|Je&63,E>127&&(we=E));break;case 3:Je=j[$+1],M=j[$+2],(Je&192)===128&&(M&192)===128&&(E=(pe&15)<<12|(Je&63)<<6|M&63,E>2047&&(E<55296||E>57343)&&(we=E));break;case 4:Je=j[$+1],M=j[$+2],w=j[$+3],(Je&192)===128&&(M&192)===128&&(w&192)===128&&(E=(pe&15)<<18|(Je&63)<<12|(M&63)<<6|w&63,E>65535&&E<1114112&&(we=E))}}we===null?(we=65533,Ke=1):we>65535&&(we-=65536,F.push(we>>>10&1023|55296),we=56320|we&1023),F.push(we),$+=Ke}return G(F)}var Oe=4096;function G(j){var R=j.length;if(R<=Oe)return String.fromCharCode.apply(String,j);for(var A="",F=0;F<R;)A+=String.fromCharCode.apply(String,j.slice(F,F+=Oe));return A}function ie(j,R,A){var F="";A=Math.min(j.length,A);for(var $=R;$<A;++$)F+=String.fromCharCode(j[$]&127);return F}function J(j,R,A){var F="";A=Math.min(j.length,A);for(var $=R;$<A;++$)F+=String.fromCharCode(j[$]);return F}function Pe(j,R,A){var F=j.length;(!R||R<0)&&(R=0),(!A||A<0||A>F)&&(A=F);for(var $="",pe=R;pe<A;++pe)$+=Xe(j[pe]);return $}function V(j,R,A){for(var F=j.slice(R,A),$="",pe=0;pe<F.length;pe+=2)$+=String.fromCharCode(F[pe]+F[pe+1]*256);return $}l.prototype.slice=function(R,A){var F=this.length;R=~~R,A=A===void 0?F:~~A,R<0?(R+=F,R<0&&(R=0)):R>F&&(R=F),A<0?(A+=F,A<0&&(A=0)):A>F&&(A=F),A<R&&(A=R);var $;if(l.TYPED_ARRAY_SUPPORT)$=this.subarray(R,A),$.__proto__=l.prototype;else{var pe=A-R;$=new l(pe,void 0);for(var we=0;we<pe;++we)$[we]=this[we+R]}return $};function Q(j,R,A){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+R>A)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function(R,A,F){R=R|0,A=A|0,F||Q(R,A,this.length);for(var $=this[R],pe=1,we=0;++we<A&&(pe*=256);)$+=this[R+we]*pe;return $},l.prototype.readUIntBE=function(R,A,F){R=R|0,A=A|0,F||Q(R,A,this.length);for(var $=this[R+--A],pe=1;A>0&&(pe*=256);)$+=this[R+--A]*pe;return $},l.prototype.readUInt8=function(R,A){return A||Q(R,1,this.length),this[R]},l.prototype.readUInt16LE=function(R,A){return A||Q(R,2,this.length),this[R]|this[R+1]<<8},l.prototype.readUInt16BE=function(R,A){return A||Q(R,2,this.length),this[R]<<8|this[R+1]},l.prototype.readUInt32LE=function(R,A){return A||Q(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},l.prototype.readUInt32BE=function(R,A){return A||Q(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},l.prototype.readIntLE=function(R,A,F){R=R|0,A=A|0,F||Q(R,A,this.length);for(var $=this[R],pe=1,we=0;++we<A&&(pe*=256);)$+=this[R+we]*pe;return pe*=128,$>=pe&&($-=Math.pow(2,8*A)),$},l.prototype.readIntBE=function(R,A,F){R=R|0,A=A|0,F||Q(R,A,this.length);for(var $=A,pe=1,we=this[R+--$];$>0&&(pe*=256);)we+=this[R+--$]*pe;return pe*=128,we>=pe&&(we-=Math.pow(2,8*A)),we},l.prototype.readInt8=function(R,A){return A||Q(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},l.prototype.readInt16LE=function(R,A){A||Q(R,2,this.length);var F=this[R]|this[R+1]<<8;return F&32768?F|4294901760:F},l.prototype.readInt16BE=function(R,A){A||Q(R,2,this.length);var F=this[R+1]|this[R]<<8;return F&32768?F|4294901760:F},l.prototype.readInt32LE=function(R,A){return A||Q(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},l.prototype.readInt32BE=function(R,A){return A||Q(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},l.prototype.readFloatLE=function(R,A){return A||Q(R,4,this.length),n.read(this,R,!0,23,4)},l.prototype.readFloatBE=function(R,A){return A||Q(R,4,this.length),n.read(this,R,!1,23,4)},l.prototype.readDoubleLE=function(R,A){return A||Q(R,8,this.length),n.read(this,R,!0,52,8)},l.prototype.readDoubleBE=function(R,A){return A||Q(R,8,this.length),n.read(this,R,!1,52,8)};function me(j,R,A,F,$,pe){if(!l.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>$||R<pe)throw new RangeError('"value" argument is out of bounds');if(A+F>j.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function(R,A,F,$){if(R=+R,A=A|0,F=F|0,!$){var pe=Math.pow(2,8*F)-1;me(this,R,A,F,pe,0)}var we=1,Ke=0;for(this[A]=R&255;++Ke<F&&(we*=256);)this[A+Ke]=R/we&255;return A+F},l.prototype.writeUIntBE=function(R,A,F,$){if(R=+R,A=A|0,F=F|0,!$){var pe=Math.pow(2,8*F)-1;me(this,R,A,F,pe,0)}var we=F-1,Ke=1;for(this[A+we]=R&255;--we>=0&&(Ke*=256);)this[A+we]=R/Ke&255;return A+F},l.prototype.writeUInt8=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,1,255,0),l.TYPED_ARRAY_SUPPORT||(R=Math.floor(R)),this[A]=R&255,A+1};function le(j,R,A,F){R<0&&(R=65535+R+1);for(var $=0,pe=Math.min(j.length-A,2);$<pe;++$)j[A+$]=(R&255<<8*(F?$:1-$))>>>(F?$:1-$)*8}l.prototype.writeUInt16LE=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[A]=R&255,this[A+1]=R>>>8):le(this,R,A,!0),A+2},l.prototype.writeUInt16BE=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[A]=R>>>8,this[A+1]=R&255):le(this,R,A,!1),A+2};function Te(j,R,A,F){R<0&&(R=4294967295+R+1);for(var $=0,pe=Math.min(j.length-A,4);$<pe;++$)j[A+$]=R>>>(F?$:3-$)*8&255}l.prototype.writeUInt32LE=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[A+3]=R>>>24,this[A+2]=R>>>16,this[A+1]=R>>>8,this[A]=R&255):Te(this,R,A,!0),A+4},l.prototype.writeUInt32BE=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[A]=R>>>24,this[A+1]=R>>>16,this[A+2]=R>>>8,this[A+3]=R&255):Te(this,R,A,!1),A+4},l.prototype.writeIntLE=function(R,A,F,$){if(R=+R,A=A|0,!$){var pe=Math.pow(2,8*F-1);me(this,R,A,F,pe-1,-pe)}var we=0,Ke=1,Je=0;for(this[A]=R&255;++we<F&&(Ke*=256);)R<0&&Je===0&&this[A+we-1]!==0&&(Je=1),this[A+we]=(R/Ke>>0)-Je&255;return A+F},l.prototype.writeIntBE=function(R,A,F,$){if(R=+R,A=A|0,!$){var pe=Math.pow(2,8*F-1);me(this,R,A,F,pe-1,-pe)}var we=F-1,Ke=1,Je=0;for(this[A+we]=R&255;--we>=0&&(Ke*=256);)R<0&&Je===0&&this[A+we+1]!==0&&(Je=1),this[A+we]=(R/Ke>>0)-Je&255;return A+F},l.prototype.writeInt8=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,1,127,-128),l.TYPED_ARRAY_SUPPORT||(R=Math.floor(R)),R<0&&(R=255+R+1),this[A]=R&255,A+1},l.prototype.writeInt16LE=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[A]=R&255,this[A+1]=R>>>8):le(this,R,A,!0),A+2},l.prototype.writeInt16BE=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[A]=R>>>8,this[A+1]=R&255):le(this,R,A,!1),A+2},l.prototype.writeInt32LE=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[A]=R&255,this[A+1]=R>>>8,this[A+2]=R>>>16,this[A+3]=R>>>24):Te(this,R,A,!0),A+4},l.prototype.writeInt32BE=function(R,A,F){return R=+R,A=A|0,F||me(this,R,A,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),l.TYPED_ARRAY_SUPPORT?(this[A]=R>>>24,this[A+1]=R>>>16,this[A+2]=R>>>8,this[A+3]=R&255):Te(this,R,A,!1),A+4};function Me(j,R,A,F,$,pe){if(A+F>j.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function _e(j,R,A,F,$){return $||Me(j,R,A,4),n.write(j,R,A,F,23,4),A+4}l.prototype.writeFloatLE=function(R,A,F){return _e(this,R,A,!0,F)},l.prototype.writeFloatBE=function(R,A,F){return _e(this,R,A,!1,F)};function be(j,R,A,F,$){return $||Me(j,R,A,8),n.write(j,R,A,F,52,8),A+8}l.prototype.writeDoubleLE=function(R,A,F){return be(this,R,A,!0,F)},l.prototype.writeDoubleBE=function(R,A,F){return be(this,R,A,!1,F)},l.prototype.copy=function(R,A,F,$){if(F||(F=0),!$&&$!==0&&($=this.length),A>=R.length&&(A=R.length),A||(A=0),$>0&&$<F&&($=F),$===F||R.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("sourceStart out of bounds");if($<0)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),R.length-A<$-F&&($=R.length-A+F);var pe=$-F,we;if(this===R&&F<A&&A<$)for(we=pe-1;we>=0;--we)R[we+A]=this[we+F];else if(pe<1e3||!l.TYPED_ARRAY_SUPPORT)for(we=0;we<pe;++we)R[we+A]=this[we+F];else Uint8Array.prototype.set.call(R,this.subarray(F,F+pe),A);return pe},l.prototype.fill=function(R,A,F,$){if(typeof R=="string"){if(typeof A=="string"?($=A,A=0,F=this.length):typeof F=="string"&&($=F,F=this.length),R.length===1){var pe=R.charCodeAt(0);pe<256&&(R=pe)}if($!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!l.isEncoding($))throw new TypeError("Unknown encoding: "+$)}else typeof R=="number"&&(R=R&255);if(A<0||this.length<A||this.length<F)throw new RangeError("Out of range index");if(F<=A)return this;A=A>>>0,F=F===void 0?this.length:F>>>0,R||(R=0);var we;if(typeof R=="number")for(we=A;we<F;++we)this[we]=R;else{var Ke=l.isBuffer(R)?R:Ge(new l(R,$).toString()),Je=Ke.length;for(we=0;we<F-A;++we)this[we+A]=Ke[we%Je]}return this};var Ce=/[^+\/0-9A-Za-z-_]/g;function Ve(j){if(j=qe(j).replace(Ce,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function qe(j){return j.trim?j.trim():j.replace(/^\s+|\s+$/g,"")}function Xe(j){return j<16?"0"+j.toString(16):j.toString(16)}function Ge(j,R){R=R||1/0;for(var A,F=j.length,$=null,pe=[],we=0;we<F;++we){if(A=j.charCodeAt(we),A>55295&&A<57344){if(!$){if(A>56319){(R-=3)>-1&&pe.push(239,191,189);continue}else if(we+1===F){(R-=3)>-1&&pe.push(239,191,189);continue}$=A;continue}if(A<56320){(R-=3)>-1&&pe.push(239,191,189),$=A;continue}A=($-55296<<10|A-56320)+65536}else $&&(R-=3)>-1&&pe.push(239,191,189);if($=null,A<128){if((R-=1)<0)break;pe.push(A)}else if(A<2048){if((R-=2)<0)break;pe.push(A>>6|192,A&63|128)}else if(A<65536){if((R-=3)<0)break;pe.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((R-=4)<0)break;pe.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return pe}function wt(j){for(var R=[],A=0;A<j.length;++A)R.push(j.charCodeAt(A)&255);return R}function Ut(j,R){for(var A,F,$,pe=[],we=0;we<j.length&&!((R-=2)<0);++we)A=j.charCodeAt(we),F=A>>8,$=A%256,pe.push($),pe.push(F);return pe}function li(j){return e.toByteArray(Ve(j))}function On(j,R,A,F){for(var $=0;$<F&&!($+A>=R.length||$>=j.length);++$)R[$+A]=j[$];return $}function kt(j){return j!==j}}(Rp)),Rp}var _t=t3(),Ti;typeof window<"u"&&window.crypto&&(Ti=window.crypto);!Ti&&typeof window<"u"&&window.msCrypto&&(Ti=window.msCrypto);!Ti&&typeof globalThis<"u"&&globalThis.crypto&&(Ti=globalThis.crypto);if(!Ti&&typeof require=="function")try{Ti=require("crypto")}catch{}function n3(){if(Ti){if(typeof Ti.getRandomValues=="function")try{return Ti.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof Ti.randomBytes=="function")try{return Ti.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")}function i3(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var a=e[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((a&15).toString(16))}return i.join("")}var r3=function(){function t(n,i){n=this.words=n||[],i!=null?this.sigBytes=i:this.sigBytes=n.length*4}var e=t.prototype;return e.random=function(i){for(var r=[],a=0;a<i;a+=4)r.push(n3());return new t(r,i)},e.toString=function(){return i3(this)},t}(),Pp={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ug=function(t,e){return Ug=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])},Ug(t,e)};function s3(t,e){Ug(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Lg=function(){return Lg=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lg.apply(this,arguments)};function a3(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function o3(t,e,n,i){var r=arguments.length,a=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,i);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(a=(r<3?c(a):r>3?c(e,n,a):c(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}function c3(t,e){return function(n,i){e(n,i,t)}}function l3(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function u3(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,e||[])).next())})}function d3(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(m){return d([f,m])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],r=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function f3(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}function h3(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function jg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dk(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,a=[],c;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(l){c={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return a}function m3(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(dk(arguments[e]));return t}function p3(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var a=arguments[e],c=0,l=a.length;c<l;c++,r++)i[r]=a[c];return i}function Vl(t){return this instanceof Vl?(this.v=t,this):new Vl(t)}function g3(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(v){i[v]&&(r[v]=function(S){return new Promise(function(x,b){a.push([v,S,x,b])>1||l(v,S)})})}function l(v,S){try{d(i[v](S))}catch(x){p(a[0][3],x)}}function d(v){v.value instanceof Vl?Promise.resolve(v.value.v).then(f,m):p(a[0][2],v)}function f(v){l("next",v)}function m(v){l("throw",v)}function p(v,S){v(S),a.shift(),a.length&&l(a[0][0],a[0][1])}}function v3(t){var e,n;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,a){e[r]=t[r]?function(c){return(n=!n)?{value:Vl(t[r](c)),done:r==="return"}:a?a(c):c}:a}}function y3(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jg=="function"?jg(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}function b3(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function S3(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T3(t){return t&&t.__esModule?t:{default:t}}function x3(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function w3(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const C3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Lg},__asyncDelegator:v3,__asyncGenerator:g3,__asyncValues:y3,__await:Vl,__awaiter:u3,__classPrivateFieldGet:x3,__classPrivateFieldSet:w3,__createBinding:f3,__decorate:o3,__exportStar:h3,__extends:s3,__generator:d3,__importDefault:T3,__importStar:S3,__makeTemplateObject:b3,__metadata:l3,__param:c3,__read:dk,__rest:a3,__spread:m3,__spreadArrays:p3,__values:jg},Symbol.toStringTag,{value:"Module"})),fk=y0(C3);var dl={},ni={},fx;function hk(){return fx||(fx=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.MAX_HASHABLE_LENGTH=ni.INIT=ni.KEY=ni.DIGEST_LENGTH=ni.BLOCK_SIZE=void 0,ni.BLOCK_SIZE=64,ni.DIGEST_LENGTH=32,ni.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ni.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ni.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),ni}var fl={},hx;function E3(){if(hx)return fl;hx=1,Object.defineProperty(fl,"__esModule",{value:!0}),fl.RawSha256=void 0;var t=hk(),e=function(){function n(){this.state=Int32Array.from(t.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return n.prototype.update=function(i){if(this.finished)throw new Error("Attempted to update an already finished hash.");var r=0,a=i.byteLength;if(this.bytesHashed+=a,this.bytesHashed*8>t.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;a>0;)this.buffer[this.bufferLength++]=i[r++],a--,this.bufferLength===t.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},n.prototype.digest=function(){if(!this.finished){var i=this.bytesHashed*8,r=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),a=this.bufferLength;if(r.setUint8(this.bufferLength++,128),a%t.BLOCK_SIZE>=t.BLOCK_SIZE-8){for(var c=this.bufferLength;c<t.BLOCK_SIZE;c++)r.setUint8(c,0);this.hashBuffer(),this.bufferLength=0}for(var c=this.bufferLength;c<t.BLOCK_SIZE-8;c++)r.setUint8(c,0);r.setUint32(t.BLOCK_SIZE-8,Math.floor(i/4294967296),!0),r.setUint32(t.BLOCK_SIZE-4,i),this.hashBuffer(),this.finished=!0}for(var l=new Uint8Array(t.DIGEST_LENGTH),c=0;c<8;c++)l[c*4]=this.state[c]>>>24&255,l[c*4+1]=this.state[c]>>>16&255,l[c*4+2]=this.state[c]>>>8&255,l[c*4+3]=this.state[c]>>>0&255;return l},n.prototype.hashBuffer=function(){for(var i=this,r=i.buffer,a=i.state,c=a[0],l=a[1],d=a[2],f=a[3],m=a[4],p=a[5],v=a[6],S=a[7],x=0;x<t.BLOCK_SIZE;x++){if(x<16)this.temp[x]=(r[x*4]&255)<<24|(r[x*4+1]&255)<<16|(r[x*4+2]&255)<<8|r[x*4+3]&255;else{var b=this.temp[x-2],P=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10;b=this.temp[x-15];var k=(b>>>7|b<<25)^(b>>>18|b<<14)^b>>>3;this.temp[x]=(P+this.temp[x-7]|0)+(k+this.temp[x-16]|0)}var O=(((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&p^~m&v)|0)+(S+(t.KEY[x]+this.temp[x]|0)|0)|0,N=((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+(c&l^c&d^l&d)|0;S=v,v=p,p=m,m=f+O|0,f=d,d=l,l=c,c=O+N|0}a[0]+=c,a[1]+=l,a[2]+=d,a[3]+=f,a[4]+=m,a[5]+=p,a[6]+=v,a[7]+=S},n}();return fl.RawSha256=e,fl}var _p={},hl={};const k3=t=>{const e=[];for(let n=0,i=t.length;n<i;n++){const r=t.charCodeAt(n);if(r<128)e.push(r);else if(r<2048)e.push(r>>6|192,r&63|128);else if(n+1<t.length&&(r&64512)===55296&&(t.charCodeAt(n+1)&64512)===56320){const a=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023);e.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else e.push(r>>12|224,r>>6&63|128,r&63|128)}return Uint8Array.from(e)},R3=t=>{let e="";for(let n=0,i=t.length;n<i;n++){const r=t[n];if(r<128)e+=String.fromCharCode(r);else if(192<=r&&r<224){const a=t[++n];e+=String.fromCharCode((r&31)<<6|a&63)}else if(240<=r&&r<365){const c="%"+[r,t[++n],t[++n],t[++n]].map(l=>l.toString(16)).join("%");e+=decodeURIComponent(c)}else e+=String.fromCharCode((r&15)<<12|(t[++n]&63)<<6|t[++n]&63)}return e};function A3(t){return new TextEncoder().encode(t)}function P3(t){return new TextDecoder("utf-8").decode(t)}const _3=t=>typeof TextEncoder=="function"?A3(t):k3(t),D3=t=>typeof TextDecoder=="function"?P3(t):R3(t),M3=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:_3,toUtf8:D3},Symbol.toStringTag,{value:"Module"})),O3=y0(M3);var mx;function N3(){if(mx)return hl;mx=1,Object.defineProperty(hl,"__esModule",{value:!0}),hl.convertToBuffer=void 0;var t=O3,e=typeof Buffer<"u"&&Buffer.from?function(i){return Buffer.from(i,"utf8")}:t.fromUtf8;function n(i){return i instanceof Uint8Array?i:typeof i=="string"?e(i):ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(i)}return hl.convertToBuffer=n,hl}var ml={},px;function I3(){if(px)return ml;px=1,Object.defineProperty(ml,"__esModule",{value:!0}),ml.isEmptyData=void 0;function t(e){return typeof e=="string"?e.length===0:e.byteLength===0}return ml.isEmptyData=t,ml}var pl={},gx;function U3(){if(gx)return pl;gx=1,Object.defineProperty(pl,"__esModule",{value:!0}),pl.numToUint8=void 0;function t(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}return pl.numToUint8=t,pl}var gl={},vx;function L3(){if(vx)return gl;vx=1,Object.defineProperty(gl,"__esModule",{value:!0}),gl.uint32ArrayFrom=void 0;function t(e){if(!Array.from){for(var n=new Uint32Array(e.length),i=0;i<e.length;)n[i]=e[i];return n}return Uint32Array.from(e)}return gl.uint32ArrayFrom=t,gl}var yx;function j3(){return yx||(yx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.uint32ArrayFrom=t.numToUint8=t.isEmptyData=t.convertToBuffer=void 0;var e=N3();Object.defineProperty(t,"convertToBuffer",{enumerable:!0,get:function(){return e.convertToBuffer}});var n=I3();Object.defineProperty(t,"isEmptyData",{enumerable:!0,get:function(){return n.isEmptyData}});var i=U3();Object.defineProperty(t,"numToUint8",{enumerable:!0,get:function(){return i.numToUint8}});var r=L3();Object.defineProperty(t,"uint32ArrayFrom",{enumerable:!0,get:function(){return r.uint32ArrayFrom}})}(_p)),_p}var bx;function B3(){if(bx)return dl;bx=1,Object.defineProperty(dl,"__esModule",{value:!0}),dl.Sha256=void 0;var t=fk,e=hk(),n=E3(),i=j3(),r=function(){function c(l){if(this.hash=new n.RawSha256,l){this.outer=new n.RawSha256;var d=a(l),f=new Uint8Array(e.BLOCK_SIZE);f.set(d);for(var m=0;m<e.BLOCK_SIZE;m++)d[m]^=54,f[m]^=92;this.hash.update(d),this.outer.update(f);for(var m=0;m<d.byteLength;m++)d[m]=0}}return c.prototype.update=function(l){if(!((0,i.isEmptyData)(l)||this.error))try{this.hash.update((0,i.convertToBuffer)(l))}catch(d){this.error=d}},c.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},c.prototype.digest=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(l){return[2,this.digestSync()]})})},c}();dl.Sha256=r;function a(c){var l=(0,i.convertToBuffer)(c);if(l.byteLength>e.BLOCK_SIZE){var d=new n.RawSha256;d.update(l),l=d.digest()}var f=new Uint8Array(e.BLOCK_SIZE);return f.set(l),f}return dl}var Sx;function F3(){return Sx||(Sx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=fk;(0,e.__exportStar)(B3(),t)}(Pp)),Pp}var Dl=F3();function Ne(t,e){t!=null&&this.fromString(t,e)}function Ln(){return new Ne(null)}var Rs,V3=0xdeadbeefcafe,Tx=(V3&16777215)==15715070;function z3(t,e,n,i,r,a){for(;--a>=0;){var c=e*this[t++]+n[i]+r;r=Math.floor(c/67108864),n[i++]=c&67108863}return r}function H3(t,e,n,i,r,a){for(var c=e&32767,l=e>>15;--a>=0;){var d=this[t]&32767,f=this[t++]>>15,m=l*d+f*c;d=c*d+((m&32767)<<15)+n[i]+(r&1073741823),r=(d>>>30)+(m>>>15)+l*f+(r>>>30),n[i++]=d&1073741823}return r}function q3(t,e,n,i,r,a){for(var c=e&16383,l=e>>14;--a>=0;){var d=this[t]&16383,f=this[t++]>>14,m=l*d+f*c;d=c*d+((m&16383)<<14)+n[i]+r,r=(d>>28)+(m>>14)+l*f,n[i++]=d&268435455}return r}var xx=typeof navigator<"u";xx&&Tx&&navigator.appName=="Microsoft Internet Explorer"?(Ne.prototype.am=H3,Rs=30):xx&&Tx&&navigator.appName!="Netscape"?(Ne.prototype.am=z3,Rs=26):(Ne.prototype.am=q3,Rs=28);Ne.prototype.DB=Rs;Ne.prototype.DM=(1<<Rs)-1;Ne.prototype.DV=1<<Rs;var R0=52;Ne.prototype.FV=Math.pow(2,R0);Ne.prototype.F1=R0-Rs;Ne.prototype.F2=2*Rs-R0;var K3="0123456789abcdefghijklmnopqrstuvwxyz",Hf=new Array,tc,xi;tc=48;for(xi=0;xi<=9;++xi)Hf[tc++]=xi;tc=97;for(xi=10;xi<36;++xi)Hf[tc++]=xi;tc=65;for(xi=10;xi<36;++xi)Hf[tc++]=xi;function wx(t){return K3.charAt(t)}function G3(t,e){var n=Hf[t.charCodeAt(e)];return n??-1}function Y3(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function W3(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function A0(t){var e=Ln();return e.fromInt(t),e}function $3(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;for(var i=t.length,r=!1,a=0;--i>=0;){var c=G3(t,i);if(c<0){t.charAt(i)=="-"&&(r=!0);continue}r=!1,a==0?this[this.t++]=c:a+n>this.DB?(this[this.t-1]|=(c&(1<<this.DB-a)-1)<<a,this[this.t++]=c>>this.DB-a):this[this.t-1]|=c<<a,a+=n,a>=this.DB&&(a-=this.DB)}this.clamp(),r&&Ne.ZERO.subTo(this,this)}function X3(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function Z3(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");var n=(1<<e)-1,i,r=!1,a="",c=this.t,l=this.DB-c*this.DB%e;if(c-- >0)for(l<this.DB&&(i=this[c]>>l)>0&&(r=!0,a=wx(i));c>=0;)l<e?(i=(this[c]&(1<<l)-1)<<e-l,i|=this[--c]>>(l+=this.DB-e)):(i=this[c]>>(l-=e)&n,l<=0&&(l+=this.DB,--c)),i>0&&(r=!0),r&&(a+=wx(i));return r?a:"0"}function J3(){var t=Ln();return Ne.ZERO.subTo(this,t),t}function Q3(){return this.s<0?this.negate():this}function eU(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this[n]-t[n])!=0)return e;return 0}function P0(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}function tU(){return this.t<=0?0:this.DB*(this.t-1)+P0(this[this.t-1]^this.s&this.DM)}function nU(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function iU(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function rU(t,e){var n=t%this.DB,i=this.DB-n,r=(1<<i)-1,a=Math.floor(t/this.DB),c=this.s<<n&this.DM,l;for(l=this.t-1;l>=0;--l)e[l+a+1]=this[l]>>i|c,c=(this[l]&r)<<n;for(l=a-1;l>=0;--l)e[l]=0;e[a]=c,e.t=this.t+a+1,e.s=this.s,e.clamp()}function sU(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var i=t%this.DB,r=this.DB-i,a=(1<<i)-1;e[0]=this[n]>>i;for(var c=n+1;c<this.t;++c)e[c-n-1]|=(this[c]&a)<<r,e[c-n]=this[c]>>i;i>0&&(e[this.t-n-1]|=(this.s&a)<<r),e.t=this.t-n,e.clamp()}function aU(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]-t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i-=t[n],e[n++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[n++]=this.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()}function oU(t,e){var n=this.abs(),i=t.abs(),r=n.t;for(e.t=r+i.t;--r>=0;)e[r]=0;for(r=0;r<i.t;++r)e[r+n.t]=n.am(0,i[r],e,r,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&Ne.ZERO.subTo(e,e)}function cU(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var i=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,i,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function lU(t,e,n){var i=t.abs();if(!(i.t<=0)){var r=this.abs();if(r.t<i.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=Ln());var a=Ln(),c=this.s,l=t.s,d=this.DB-P0(i[i.t-1]);d>0?(i.lShiftTo(d,a),r.lShiftTo(d,n)):(i.copyTo(a),r.copyTo(n));var f=a.t,m=a[f-1];if(m!=0){var p=m*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),v=this.FV/p,S=(1<<this.F1)/p,x=1<<this.F2,b=n.t,P=b-f,k=e??Ln();for(a.dlShiftTo(P,k),n.compareTo(k)>=0&&(n[n.t++]=1,n.subTo(k,n)),Ne.ONE.dlShiftTo(f,k),k.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--P>=0;){var O=n[--b]==m?this.DM:Math.floor(n[b]*v+(n[b-1]+x)*S);if((n[b]+=a.am(0,O,n,P,0,f))<O)for(a.dlShiftTo(P,k),n.subTo(k,n);n[b]<--O;)n.subTo(k,n)}e!=null&&(n.drShiftTo(f,e),c!=l&&Ne.ZERO.subTo(e,e)),n.t=f,n.clamp(),d>0&&n.rShiftTo(d,n),c<0&&Ne.ZERO.subTo(n,n)}}}function uU(t){var e=Ln();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Ne.ZERO)>0&&t.subTo(e,e),e}function dU(){if(this.t<1)return 0;var t=this[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function fU(t){return this.compareTo(t)==0}function hU(t,e){for(var n=0,i=0,r=Math.min(t.t,this.t);n<r;)i+=this[n]+t[n],e[n++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;n<this.t;)i+=this[n],e[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<t.t;)i+=t[n],e[n++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e[n++]=i:i<-1&&(e[n++]=this.DV+i),e.t=n,e.clamp()}function mU(t){var e=Ln();return this.addTo(t,e),e}function pU(t){var e=Ln();return this.subTo(t,e),e}function gU(t){var e=Ln();return this.multiplyTo(t,e),e}function vU(t){var e=Ln();return this.divRemTo(t,e,null),e}function nc(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function yU(t){var e=Ln();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Ne.ZERO)>0&&this.m.subTo(e,e),e}function bU(t){var e=Ln();return t.copyTo(e),this.reduce(e),e}function SU(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t[e]&32767,i=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,i,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function TU(t,e){t.squareTo(e),this.reduce(e)}function xU(t,e,n){t.multiplyTo(e,n),this.reduce(n)}nc.prototype.convert=yU;nc.prototype.revert=bU;nc.prototype.reduce=SU;nc.prototype.mulTo=xU;nc.prototype.sqrTo=TU;function wU(t,e,n){var i=t.bitLength(),r,a=A0(1),c=new nc(e);if(i<=0)return a;i<18?r=1:i<48?r=3:i<144?r=4:i<768?r=5:r=6;var l=new Array,d=3,f=r-1,m=(1<<r)-1;if(l[1]=c.convert(this),r>1){var p=Ln();for(c.sqrTo(l[1],p);d<=m;)l[d]=Ln(),c.mulTo(p,l[d-2],l[d]),d+=2}var v=t.t-1,S,x=!0,b=Ln(),P;for(i=P0(t[v])-1;v>=0;){for(i>=f?S=t[v]>>i-f&m:(S=(t[v]&(1<<i+1)-1)<<f-i,v>0&&(S|=t[v-1]>>this.DB+i-f)),d=r;(S&1)==0;)S>>=1,--d;if((i-=d)<0&&(i+=this.DB,--v),x)l[S].copyTo(a),x=!1;else{for(;d>1;)c.sqrTo(a,b),c.sqrTo(b,a),d-=2;d>0?c.sqrTo(a,b):(P=a,a=b,b=P),c.mulTo(b,l[S],a)}for(;v>=0&&(t[v]&1<<i)==0;)c.sqrTo(a,b),P=a,a=b,b=P,--i<0&&(i=this.DB-1,--v)}var k=c.revert(a);return n(null,k),k}Ne.prototype.copyTo=Y3;Ne.prototype.fromInt=W3;Ne.prototype.fromString=$3;Ne.prototype.clamp=X3;Ne.prototype.dlShiftTo=nU;Ne.prototype.drShiftTo=iU;Ne.prototype.lShiftTo=rU;Ne.prototype.rShiftTo=sU;Ne.prototype.subTo=aU;Ne.prototype.multiplyTo=oU;Ne.prototype.squareTo=cU;Ne.prototype.divRemTo=lU;Ne.prototype.invDigit=dU;Ne.prototype.addTo=hU;Ne.prototype.toString=Z3;Ne.prototype.negate=J3;Ne.prototype.abs=Q3;Ne.prototype.compareTo=eU;Ne.prototype.bitLength=tU;Ne.prototype.mod=uU;Ne.prototype.equals=fU;Ne.prototype.add=mU;Ne.prototype.subtract=pU;Ne.prototype.multiply=gU;Ne.prototype.divide=vU;Ne.prototype.modPow=wU;Ne.ZERO=A0(0);Ne.ONE=A0(1);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */function Dp(t){return _t.Buffer.from(new r3().random(t).toString(),"hex")}var CU=/^[89a-f]/i,EU="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",kU="userAttributes.",go=function(){function t(n){this.N=new Ne(EU,16),this.g=new Ne("2",16),this.k=new Ne(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=_t.Buffer.from("Caldera Derived Key","utf8"),this.poolName=n}var e=t.prototype;return e.getSmallAValue=function(){return this.smallAValue},e.getLargeAValue=function(i){var r=this;this.largeAValue?i(null,this.largeAValue):this.calculateA(this.smallAValue,function(a,c){a&&i(a,null),r.largeAValue=c,i(null,r.largeAValue)})},e.generateRandomSmallA=function(){var i=Dp(128).toString("hex"),r=new Ne(i,16);return r},e.generateRandomString=function(){return Dp(40).toString("base64")},e.getRandomPassword=function(){return this.randomPassword},e.getSaltDevices=function(){return this.SaltToHashDevices},e.getVerifierDevices=function(){return this.verifierDevices},e.generateHashDevice=function(i,r,a){var c=this;this.randomPassword=this.generateRandomString();var l=""+i+r+":"+this.randomPassword,d=this.hash(l),f=Dp(16).toString("hex");this.SaltToHashDevices=this.padHex(new Ne(f,16)),this.g.modPow(new Ne(this.hexHash(this.SaltToHashDevices+d),16),this.N,function(m,p){m&&a(m,null),c.verifierDevices=c.padHex(p),a(null,null)})},e.calculateA=function(i,r){var a=this;this.g.modPow(i,this.N,function(c,l){c&&r(c,null),l.mod(a.N).equals(Ne.ZERO)&&r(new Error("Illegal paramater. A mod N cannot be 0."),null),r(null,l)})},e.calculateU=function(i,r){this.UHexHash=this.hexHash(this.padHex(i)+this.padHex(r));var a=new Ne(this.UHexHash,16);return a},e.hash=function(i){var r=new Dl.Sha256;r.update(i);var a=r.digestSync(),c=_t.Buffer.from(a).toString("hex");return new Array(64-c.length).join("0")+c},e.hexHash=function(i){return this.hash(_t.Buffer.from(i,"hex"))},e.computehkdf=function(i,r){var a=_t.Buffer.concat([this.infoBits,_t.Buffer.from("","utf8")]),c=new Dl.Sha256(r);c.update(i);var l=c.digestSync(),d=new Dl.Sha256(l);d.update(a);var f=d.digestSync(),m=f,p=m.slice(0,16);return p},e.getPasswordAuthenticationKey=function(i,r,a,c,l){var d=this;if(a.mod(this.N).equals(Ne.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,a),this.UValue.equals(Ne.ZERO))throw new Error("U cannot be zero.");var f=""+this.poolName+i+":"+r,m=this.hash(f),p=new Ne(this.hexHash(this.padHex(c)+m),16);this.calculateS(p,a,function(v,S){v&&l(v,null);var x=d.computehkdf(_t.Buffer.from(d.padHex(S),"hex"),_t.Buffer.from(d.padHex(d.UValue),"hex"));l(null,x)})},e.calculateS=function(i,r,a){var c=this;this.g.modPow(i,this.N,function(l,d){l&&a(l,null);var f=r.subtract(c.k.multiply(d));f.modPow(c.smallAValue.add(c.UValue.multiply(i)),c.N,function(m,p){m&&a(m,null),a(null,p.mod(c.N))})})},e.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return kU},e.padHex=function(i){if(!(i instanceof Ne))throw new Error("Not a BigInteger");var r=i.compareTo(Ne.ZERO)<0,a=i.abs().toString(16);if(a=a.length%2!==0?"0"+a:a,a=CU.test(a)?"00"+a:a,r){var c=a.split("").map(function(d){var f=~parseInt(d,16)&15;return"0123456789ABCDEF".charAt(f)}).join(""),l=new Ne(c,16).add(Ne.ONE);a=l.toString(16),a.toUpperCase().startsWith("FF8")&&(a=a.substring(2))}return a},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var mk=function(){function t(n){this.jwtToken=n||"",this.payload=this.decodePayload()}var e=t.prototype;return e.getJwtToken=function(){return this.jwtToken},e.getExpiration=function(){return this.payload.exp},e.getIssuedAt=function(){return this.payload.iat},e.decodePayload=function(){var i=this.jwtToken.split(".")[1];try{return JSON.parse(_t.Buffer.from(i,"base64").toString("utf8"))}catch{return{}}},t}();function RU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Bg(t,e)}function Bg(t,e){return Bg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Bg(t,e)}var Fg=function(t){function e(n){var i=n===void 0?{}:n,r=i.AccessToken;return t.call(this,r||"")||this}return RU(e,t),e}(mk);function AU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Vg(t,e)}function Vg(t,e){return Vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Vg(t,e)}var zg=function(t){function e(n){var i=n===void 0?{}:n,r=i.IdToken;return t.call(this,r||"")||this}return AU(e,t),e}(mk);/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var Hg=function(){function t(n){var i=n===void 0?{}:n,r=i.RefreshToken;this.token=r||""}var e=t.prototype;return e.getToken=function(){return this.token},t}(),PU="5.0.4";/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var _U="aws-amplify/"+PU,pk={userAgent:_U,isReactNative:typeof navigator<"u"&&navigator.product==="ReactNative"},DU=function(){return pk.userAgent};/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var qg=function(){function t(n){var i=n===void 0?{}:n,r=i.IdToken,a=i.RefreshToken,c=i.AccessToken,l=i.ClockDrift;if(c==null||r==null)throw new Error("Id token and Access Token must be present.");this.idToken=r,this.refreshToken=a,this.accessToken=c,this.clockDrift=l===void 0?this.calculateClockDrift():l}var e=t.prototype;return e.getIdToken=function(){return this.idToken},e.getRefreshToken=function(){return this.refreshToken},e.getAccessToken=function(){return this.accessToken},e.getClockDrift=function(){return this.clockDrift},e.calculateClockDrift=function(){var i=Math.floor(new Date/1e3),r=Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt());return i-r},e.isValid=function(){var i=Math.floor(new Date/1e3),r=i-this.clockDrift;return r<this.accessToken.getExpiration()&&r<this.idToken.getExpiration()},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var MU=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],OU=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Cx=function(){function t(){}var e=t.prototype;return e.getNowString=function(){var i=new Date,r=OU[i.getUTCDay()],a=MU[i.getUTCMonth()],c=i.getUTCDate(),l=i.getUTCHours();l<10&&(l="0"+l);var d=i.getUTCMinutes();d<10&&(d="0"+d);var f=i.getUTCSeconds();f<10&&(f="0"+f);var m=i.getUTCFullYear(),p=r+" "+a+" "+c+" "+l+":"+d+":"+f+" UTC "+m;return p},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var NU=function(){function t(n){var i=n===void 0?{}:n,r=i.Name,a=i.Value;this.Name=r||"",this.Value=a||""}var e=t.prototype;return e.getValue=function(){return this.Value},e.setValue=function(i){return this.Value=i,this},e.getName=function(){return this.Name},e.setName=function(i){return this.Name=i,this},e.toString=function(){return JSON.stringify(this)},e.toJSON=function(){return{Name:this.Name,Value:this.Value}},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var aa={},IU=function(){function t(){}return t.setItem=function(n,i){return aa[n]=i,aa[n]},t.getItem=function(n){return Object.prototype.hasOwnProperty.call(aa,n)?aa[n]:void 0},t.removeItem=function(n){return delete aa[n]},t.clear=function(){return aa={},aa},t}(),gk=function(){function t(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch{this.storageWindow=IU}}var e=t.prototype;return e.getStorage=function(){return this.storageWindow},t}();/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var UU=typeof navigator<"u",Ex=UU?pk.isReactNative?"react-native":navigator.userAgent:"nodejs",Kg=function(){function t(n){if(n==null||n.Username==null||n.Pool==null)throw new Error("Username and Pool information are required.");this.username=n.Username||"",this.pool=n.Pool,this.Session=null,this.client=n.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=n.Storage||new gk().getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var e=t.prototype;return e.setSignInUserSession=function(i){this.clearCachedUserData(),this.signInUserSession=i,this.cacheTokens()},e.getSignInUserSession=function(){return this.signInUserSession},e.getUsername=function(){return this.username},e.getAuthenticationFlowType=function(){return this.authenticationFlowType},e.setAuthenticationFlowType=function(i){this.authenticationFlowType=i},e.initiateAuth=function(i,r){var a=this,c=i.getAuthParameters();c.USERNAME=this.username;var l=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),d={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:c,ClientMetadata:l};this.getUserContextData()&&(d.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",d,function(f,m){if(f)return r.onFailure(f);var p=m.ChallengeName,v=m.ChallengeParameters;return p==="CUSTOM_CHALLENGE"?(a.Session=m.Session,r.customChallenge(v)):(a.signInUserSession=a.getCognitoUserSession(m.AuthenticationResult),a.cacheTokens(),r.onSuccess(a.signInUserSession))})},e.authenticateUser=function(i,r){return this.authenticationFlowType==="USER_PASSWORD_AUTH"?this.authenticateUserPlainUsernamePassword(i,r):this.authenticationFlowType==="USER_SRP_AUTH"||this.authenticationFlowType==="CUSTOM_AUTH"?this.authenticateUserDefaultAuth(i,r):r.onFailure(new Error("Authentication flow type is invalid."))},e.authenticateUserDefaultAuth=function(i,r){var a=this,c=new go(this.pool.getUserPoolName()),l=new Cx,d,f,m={};this.deviceKey!=null&&(m.DEVICE_KEY=this.deviceKey),m.USERNAME=this.username,c.getLargeAValue(function(p,v){p&&r.onFailure(p),m.SRP_A=v.toString(16),a.authenticationFlowType==="CUSTOM_AUTH"&&(m.CHALLENGE_NAME="SRP_A");var S=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),x={AuthFlow:a.authenticationFlowType,ClientId:a.pool.getClientId(),AuthParameters:m,ClientMetadata:S};a.getUserContextData(a.username)&&(x.UserContextData=a.getUserContextData(a.username)),a.client.request("InitiateAuth",x,function(b,P){if(b)return r.onFailure(b);var k=P.ChallengeParameters;a.username=k.USER_ID_FOR_SRP,a.userDataKey=a.keyPrefix+"."+a.username+".userData",d=new Ne(k.SRP_B,16),f=new Ne(k.SALT,16),a.getCachedDeviceKeyAndPassword(),c.getPasswordAuthenticationKey(a.username,i.getPassword(),d,f,function(O,N){O&&r.onFailure(O);var I=l.getNowString(),D=_t.Buffer.concat([_t.Buffer.from(a.pool.getUserPoolName(),"utf8"),_t.Buffer.from(a.username,"utf8"),_t.Buffer.from(k.SECRET_BLOCK,"base64"),_t.Buffer.from(I,"utf8")]),B=new Dl.Sha256(N);B.update(D);var H=B.digestSync(),z=_t.Buffer.from(H).toString("base64"),X={};X.USERNAME=a.username,X.PASSWORD_CLAIM_SECRET_BLOCK=k.SECRET_BLOCK,X.TIMESTAMP=I,X.PASSWORD_CLAIM_SIGNATURE=z,a.deviceKey!=null&&(X.DEVICE_KEY=a.deviceKey);var ae=function(ke,Ae){return a.client.request("RespondToAuthChallenge",ke,function(Oe,G){return Oe&&Oe.code==="ResourceNotFoundException"&&Oe.message.toLowerCase().indexOf("device")!==-1?(X.DEVICE_KEY=null,a.deviceKey=null,a.randomPassword=null,a.deviceGroupKey=null,a.clearCachedDeviceKeyAndPassword(),ae(ke,Ae)):Ae(Oe,G)})},oe={ChallengeName:"PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:X,Session:P.Session,ClientMetadata:S};a.getUserContextData()&&(oe.UserContextData=a.getUserContextData()),ae(oe,function(fe,ke){return fe?r.onFailure(fe):a.authenticateUserInternal(ke,c,r)})})})})},e.authenticateUserPlainUsernamePassword=function(i,r){var a=this,c={};if(c.USERNAME=this.username,c.PASSWORD=i.getPassword(),!c.PASSWORD){r.onFailure(new Error("PASSWORD parameter is required"));return}var l=new go(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(c.DEVICE_KEY=this.deviceKey);var d=Object.keys(i.getValidationData()).length!==0?i.getValidationData():i.getClientMetadata(),f={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:c,ClientMetadata:d};this.getUserContextData(this.username)&&(f.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",f,function(m,p){return m?r.onFailure(m):a.authenticateUserInternal(p,l,r)})},e.authenticateUserInternal=function(i,r,a){var c=this,l=i.ChallengeName,d=i.ChallengeParameters;if(l==="SMS_MFA")return this.Session=i.Session,a.mfaRequired(l,d);if(l==="SELECT_MFA_TYPE")return this.Session=i.Session,a.selectMFAType(l,d);if(l==="MFA_SETUP")return this.Session=i.Session,a.mfaSetup(l,d);if(l==="SOFTWARE_TOKEN_MFA")return this.Session=i.Session,a.totpRequired(l,d);if(l==="CUSTOM_CHALLENGE")return this.Session=i.Session,a.customChallenge(d);if(l==="NEW_PASSWORD_REQUIRED"){this.Session=i.Session;var f=null,m=null,p=[],v=r.getNewPasswordRequiredChallengeUserAttributePrefix();if(d&&(f=JSON.parse(i.ChallengeParameters.userAttributes),m=JSON.parse(i.ChallengeParameters.requiredAttributes)),m)for(var S=0;S<m.length;S++)p[S]=m[S].substr(v.length);return a.newPasswordRequired(f,p)}if(l==="DEVICE_SRP_AUTH"){this.Session=i.Session,this.getDeviceResponse(a);return}this.signInUserSession=this.getCognitoUserSession(i.AuthenticationResult),this.challengeName=l,this.cacheTokens();var x=i.AuthenticationResult.NewDeviceMetadata;if(x==null)return a.onSuccess(this.signInUserSession);r.generateHashDevice(i.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(b){if(b)return a.onFailure(b);var P={Salt:_t.Buffer.from(r.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:_t.Buffer.from(r.getVerifierDevices(),"hex").toString("base64")};c.verifierDevices=P.PasswordVerifier,c.deviceGroupKey=x.DeviceGroupKey,c.randomPassword=r.getRandomPassword(),c.client.request("ConfirmDevice",{DeviceKey:x.DeviceKey,AccessToken:c.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:P,DeviceName:Ex},function(k,O){return k?a.onFailure(k):(c.deviceKey=i.AuthenticationResult.NewDeviceMetadata.DeviceKey,c.cacheDeviceKeyAndPassword(),O.UserConfirmationNecessary===!0?a.onSuccess(c.signInUserSession,O.UserConfirmationNecessary):a.onSuccess(c.signInUserSession))})})},e.completeNewPasswordChallenge=function(i,r,a,c){var l=this;if(!i)return a.onFailure(new Error("New password is required."));var d=new go(this.pool.getUserPoolName()),f=d.getNewPasswordRequiredChallengeUserAttributePrefix(),m={};r&&Object.keys(r).forEach(function(v){m[f+v]=r[v]}),m.NEW_PASSWORD=i,m.USERNAME=this.username;var p={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:m,Session:this.Session,ClientMetadata:c};this.getUserContextData()&&(p.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",p,function(v,S){return v?a.onFailure(v):l.authenticateUserInternal(S,d,a)})},e.getDeviceResponse=function(i,r){var a=this,c=new go(this.deviceGroupKey),l=new Cx,d={};d.USERNAME=this.username,d.DEVICE_KEY=this.deviceKey,c.getLargeAValue(function(f,m){f&&i.onFailure(f),d.SRP_A=m.toString(16);var p={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a.pool.getClientId(),ChallengeResponses:d,ClientMetadata:r,Session:a.Session};a.getUserContextData()&&(p.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",p,function(v,S){if(v)return i.onFailure(v);var x=S.ChallengeParameters,b=new Ne(x.SRP_B,16),P=new Ne(x.SALT,16);c.getPasswordAuthenticationKey(a.deviceKey,a.randomPassword,b,P,function(k,O){if(k)return i.onFailure(k);var N=l.getNowString(),I=_t.Buffer.concat([_t.Buffer.from(a.deviceGroupKey,"utf8"),_t.Buffer.from(a.deviceKey,"utf8"),_t.Buffer.from(x.SECRET_BLOCK,"base64"),_t.Buffer.from(N,"utf8")]),D=new Dl.Sha256(O);D.update(I);var B=D.digestSync(),H=_t.Buffer.from(B).toString("base64"),z={};z.USERNAME=a.username,z.PASSWORD_CLAIM_SECRET_BLOCK=x.SECRET_BLOCK,z.TIMESTAMP=N,z.PASSWORD_CLAIM_SIGNATURE=H,z.DEVICE_KEY=a.deviceKey;var X={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:z,Session:S.Session};a.getUserContextData()&&(X.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",X,function(ae,oe){return ae?i.onFailure(ae):(a.signInUserSession=a.getCognitoUserSession(oe.AuthenticationResult),a.cacheTokens(),i.onSuccess(a.signInUserSession))})})})})},e.confirmRegistration=function(i,r,a,c){var l={ClientId:this.pool.getClientId(),ConfirmationCode:i,Username:this.username,ForceAliasCreation:r,ClientMetadata:c};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",l,function(d){return d?a(d,null):a(null,"SUCCESS")})},e.sendCustomChallengeAnswer=function(i,r,a){var c=this,l={};l.USERNAME=this.username,l.ANSWER=i;var d=new go(this.pool.getUserPoolName());this.getCachedDeviceKeyAndPassword(),this.deviceKey!=null&&(l.DEVICE_KEY=this.deviceKey);var f={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:l,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:a};this.getUserContextData()&&(f.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",f,function(m,p){return m?r.onFailure(m):c.authenticateUserInternal(p,d,r)})},e.sendMFACode=function(i,r,a,c){var l=this,d={};d.USERNAME=this.username,d.SMS_MFA_CODE=i;var f=a||"SMS_MFA";f==="SOFTWARE_TOKEN_MFA"&&(d.SOFTWARE_TOKEN_MFA_CODE=i),this.deviceKey!=null&&(d.DEVICE_KEY=this.deviceKey);var m={ChallengeName:f,ChallengeResponses:d,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:c};this.getUserContextData()&&(m.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",m,function(p,v){if(p)return r.onFailure(p);var S=v.ChallengeName;if(S==="DEVICE_SRP_AUTH"){l.getDeviceResponse(r);return}if(l.signInUserSession=l.getCognitoUserSession(v.AuthenticationResult),l.cacheTokens(),v.AuthenticationResult.NewDeviceMetadata==null)return r.onSuccess(l.signInUserSession);var x=new go(l.pool.getUserPoolName());x.generateHashDevice(v.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,v.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(b){if(b)return r.onFailure(b);var P={Salt:_t.Buffer.from(x.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:_t.Buffer.from(x.getVerifierDevices(),"hex").toString("base64")};l.verifierDevices=P.PasswordVerifier,l.deviceGroupKey=v.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,l.randomPassword=x.getRandomPassword(),l.client.request("ConfirmDevice",{DeviceKey:v.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:l.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:P,DeviceName:Ex},function(k,O){return k?r.onFailure(k):(l.deviceKey=v.AuthenticationResult.NewDeviceMetadata.DeviceKey,l.cacheDeviceKeyAndPassword(),O.UserConfirmationNecessary===!0?r.onSuccess(l.signInUserSession,O.UserConfirmationNecessary):r.onSuccess(l.signInUserSession))})})})},e.changePassword=function(i,r,a,c){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return a(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:i,ProposedPassword:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:c},function(l){return l?a(l,null):a(null,"SUCCESS")})},e.enableMFA=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);var r=[],a={DeliveryMedium:"SMS",AttributeName:"phone_number"};r.push(a),this.client.request("SetUserSettings",{MFAOptions:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?i(c,null):i(null,"SUCCESS")})},e.setUserMfaPreference=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:i,SoftwareTokenMfaSettings:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?a(c,null):a(null,"SUCCESS")})},e.disableMFA=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);var r=[];this.client.request("SetUserSettings",{MFAOptions:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i(a,null):i(null,"SUCCESS")})},e.deleteUser=function(i,r){var a=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(c){return c?i(c,null):(a.clearCachedUser(),i(null,"SUCCESS"))})},e.updateAttributes=function(i,r,a){var c=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return r(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:i,ClientMetadata:a},function(l,d){return l?r(l,null):c.getUserData(function(){return r(null,"SUCCESS",d)},{bypassCache:!0})})},e.getUserAttributes=function(i){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,a){if(r)return i(r,null);for(var c=[],l=0;l<a.UserAttributes.length;l++){var d={Name:a.UserAttributes[l].Name,Value:a.UserAttributes[l].Value},f=new NU(d);c.push(f)}return i(null,c)})},e.getMFAOptions=function(i){if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(r,a){return r?i(r,null):i(null,a.MFAOptions)})},e.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},e.refreshSessionIfPossible=function(i){var r=this;return i===void 0&&(i={}),new Promise(function(a){var c=r.signInUserSession.getRefreshToken();c&&c.getToken()?r.refreshSession(c,a,i.clientMetadata):a()})},e.getUserData=function(i,r){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return this.clearCachedUserData(),i(new Error("User is not authenticated"),null);var c=this.getUserDataFromCache();if(!c){this.fetchUserData().then(function(l){i(null,l)}).catch(i);return}if(this.isFetchUserDataAndTokenRequired(r)){this.fetchUserData().then(function(l){return a.refreshSessionIfPossible(r).then(function(){return l})}).then(function(l){return i(null,l)}).catch(i);return}try{i(null,JSON.parse(c));return}catch(l){this.clearCachedUserData(),i(l,null);return}},e.getUserDataFromCache=function(){var i=this.storage.getItem(this.userDataKey);return i},e.isFetchUserDataAndTokenRequired=function(i){var r=i||{},a=r.bypassCache,c=a===void 0?!1:a;return c},e.fetchUserData=function(){var i=this;return this.createGetUserRequest().then(function(r){return i.cacheUserData(r),r})},e.deleteAttributes=function(i,r){var a=this;if(!(this.signInUserSession!=null&&this.signInUserSession.isValid()))return r(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?r(c,null):a.getUserData(function(){return r(null,"SUCCESS")},{bypassCache:!0})})},e.resendConfirmationCode=function(i,r){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:r};this.client.request("ResendConfirmationCode",a,function(c,l){return c?i(c,null):i(null,l)})},e.getSession=function(i,r){if(r===void 0&&(r={}),this.username==null)return i(new Error("Username is null. Cannot retrieve a new session"),null);if(this.signInUserSession!=null&&this.signInUserSession.isValid())return i(null,this.signInUserSession);var a="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,c=a+".idToken",l=a+".accessToken",d=a+".refreshToken",f=a+".clockDrift";if(this.storage.getItem(c)){var m=new zg({IdToken:this.storage.getItem(c)}),p=new Fg({AccessToken:this.storage.getItem(l)}),v=new Hg({RefreshToken:this.storage.getItem(d)}),S=parseInt(this.storage.getItem(f),0)||0,x={IdToken:m,AccessToken:p,RefreshToken:v,ClockDrift:S},b=new qg(x);if(b.isValid())return this.signInUserSession=b,i(null,this.signInUserSession);if(!v.getToken())return i(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(v,i,r.clientMetadata)}else i(new Error("Local storage is missing an ID Token, Please authenticate"),null)},e.refreshSession=function(i,r,a){var c=this,l=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(r):r,d={};d.REFRESH_TOKEN=i.getToken();var f="CognitoIdentityServiceProvider."+this.pool.getClientId(),m=f+".LastAuthUser";if(this.storage.getItem(m)){this.username=this.storage.getItem(m);var p=f+"."+this.username+".deviceKey";this.deviceKey=this.storage.getItem(p),d.DEVICE_KEY=this.deviceKey}var v={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:d,ClientMetadata:a};this.getUserContextData()&&(v.UserContextData=this.getUserContextData()),this.client.requestWithRetry("InitiateAuth",v,function(S,x){if(S)return S.code==="NotAuthorizedException"&&c.clearCachedUser(),l(S,null);if(x){var b=x.AuthenticationResult;return Object.prototype.hasOwnProperty.call(b,"RefreshToken")||(b.RefreshToken=i.getToken()),c.signInUserSession=c.getCognitoUserSession(b),c.cacheTokens(),l(null,c.signInUserSession)}})},e.cacheTokens=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId(),r=i+"."+this.username+".idToken",a=i+"."+this.username+".accessToken",c=i+"."+this.username+".refreshToken",l=i+"."+this.username+".clockDrift",d=i+".LastAuthUser";this.storage.setItem(r,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(a,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(c,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(l,""+this.signInUserSession.getClockDrift()),this.storage.setItem(d,this.username)},e.cacheUserData=function(i){this.storage.setItem(this.userDataKey,JSON.stringify(i))},e.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},e.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},e.cacheDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.setItem(r,this.deviceKey),this.storage.setItem(a,this.randomPassword),this.storage.setItem(c,this.deviceGroupKey)},e.getCachedDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.getItem(r)&&(this.deviceKey=this.storage.getItem(r),this.randomPassword=this.storage.getItem(a),this.deviceGroupKey=this.storage.getItem(c))},e.clearCachedDeviceKeyAndPassword=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=i+".deviceKey",a=i+".randomPasswordKey",c=i+".deviceGroupKey";this.storage.removeItem(r),this.storage.removeItem(a),this.storage.removeItem(c)},e.clearCachedTokens=function(){var i="CognitoIdentityServiceProvider."+this.pool.getClientId(),r=i+"."+this.username+".idToken",a=i+"."+this.username+".accessToken",c=i+"."+this.username+".refreshToken",l=i+".LastAuthUser",d=i+"."+this.username+".clockDrift";this.storage.removeItem(r),this.storage.removeItem(a),this.storage.removeItem(c),this.storage.removeItem(l),this.storage.removeItem(d)},e.getCognitoUserSession=function(i){var r=new zg(i),a=new Fg(i),c=new Hg(i),l={IdToken:r,AccessToken:a,RefreshToken:c};return new qg(l)},e.forgotPassword=function(i,r){var a={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:r};this.getUserContextData()&&(a.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",a,function(c,l){return c?i.onFailure(c):typeof i.inputVerificationCode=="function"?i.inputVerificationCode(l):i.onSuccess(l)})},e.confirmPassword=function(i,r,a,c){var l={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:i,Password:r,ClientMetadata:c};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",l,function(d){return d?a.onFailure(d):a.onSuccess("SUCCESS")})},e.getAttributeVerificationCode=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:i,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:a},function(c,l){return c?r.onFailure(c):typeof r.inputVerificationCode=="function"?r.inputVerificationCode(l):r.onSuccess("SUCCESS")})},e.verifyAttribute=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:i,Code:r,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(c){return c?a.onFailure(c):a.onSuccess("SUCCESS")})},e.getDevice=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(r,a){return r?i.onFailure(r):i.onSuccess(a)})},e.forgetSpecificDevice=function(i,r){if(this.signInUserSession==null||!this.signInUserSession.isValid())return r.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:i},function(a){return a?r.onFailure(a):r.onSuccess("SUCCESS")})},e.forgetDevice=function(i){var r=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:i.onFailure,onSuccess:function(c){return r.deviceKey=null,r.deviceGroupKey=null,r.randomPassword=null,r.clearCachedDeviceKeyAndPassword(),i.onSuccess(c)}})},e.setDeviceStatusRemembered=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(r){return r?i.onFailure(r):i.onSuccess("SUCCESS")})},e.setDeviceStatusNotRemembered=function(i){if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(r){return r?i.onFailure(r):i.onSuccess("SUCCESS")})},e.listDevices=function(i,r,a){if(this.signInUserSession==null||!this.signInUserSession.isValid())return a.onFailure(new Error("User is not authenticated"));var c={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:i};r&&(c.PaginationToken=r),this.client.request("ListDevices",c,function(l,d){return l?a.onFailure(l):a.onSuccess(d)})},e.globalSignOut=function(i){var r=this;if(this.signInUserSession==null||!this.signInUserSession.isValid())return i.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a){return a?i.onFailure(a):(r.clearCachedUser(),i.onSuccess("SUCCESS"))})},e.signOut=function(i){var r=this;if(!i||typeof i!="function"){this.cleanClientData();return}this.getSession(function(a,c){if(a)return i(a);r.revokeTokens(function(l){r.cleanClientData(),i(l)})})},e.revokeTokens=function(i){if(i===void 0&&(i=function(){}),typeof i!="function")throw new Error("Invalid revokeTokenCallback. It should be a function.");if(!this.signInUserSession){var r=new Error("User is not authenticated");return i(r)}if(!this.signInUserSession.getAccessToken()){var a=new Error("No Access token available");return i(a)}var c=this.signInUserSession.getRefreshToken().getToken(),l=this.signInUserSession.getAccessToken();if(this.isSessionRevocable(l)&&c)return this.revokeToken({token:c,callback:i});i()},e.isSessionRevocable=function(i){if(i&&typeof i.decodePayload=="function")try{var r=i.decodePayload(),a=r.origin_jti;return!!a}catch{}return!1},e.cleanClientData=function(){this.signInUserSession=null,this.clearCachedUser()},e.revokeToken=function(i){var r=i.token,a=i.callback;this.client.requestWithRetry("RevokeToken",{Token:r,ClientId:this.pool.getClientId()},function(c){if(c)return a(c);a()})},e.sendMFASelectionAnswer=function(i,r){var a=this,c={};c.USERNAME=this.username,c.ANSWER=i;var l={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:c,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(l.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",l,function(d,f){if(d)return r.onFailure(d);if(a.Session=f.Session,i==="SMS_MFA")return r.mfaRequired(f.ChallengeName,f.ChallengeParameters);if(i==="SOFTWARE_TOKEN_MFA")return r.totpRequired(f.ChallengeName,f.ChallengeParameters)})},e.getUserContextData=function(){var i=this.pool;return i.getUserContextData(this.username)},e.associateSoftwareToken=function(i){var r=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(a,c){return a?i.onFailure(a):i.associateSecretCode(c.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(a,c){return a?i.onFailure(a):(r.Session=c.Session,i.associateSecretCode(c.SecretCode))})},e.verifySoftwareToken=function(i,r,a){var c=this;this.signInUserSession!=null&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:i,FriendlyDeviceName:r},function(l,d){return l?a.onFailure(l):a.onSuccess(d)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:i,FriendlyDeviceName:r},function(l,d){if(l)return a.onFailure(l);c.Session=d.Session;var f={};f.USERNAME=c.username;var m={ChallengeName:"MFA_SETUP",ClientId:c.pool.getClientId(),ChallengeResponses:f,Session:c.Session};c.getUserContextData()&&(m.UserContextData=c.getUserContextData()),c.client.request("RespondToAuthChallenge",m,function(p,v){return p?a.onFailure(p):(c.signInUserSession=c.getCognitoUserSession(v.AuthenticationResult),c.cacheTokens(),a.onSuccess(c.signInUserSession))})})},t}();function LU(t,e){return e=e||{},new Promise(function(n,i){var r=new XMLHttpRequest,a=[],c=[],l={},d=function(){return{ok:(r.status/100|0)==2,statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(r.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:d,headers:{keys:function(){return a},entries:function(){return c},get:function(m){return l[m.toLowerCase()]},has:function(m){return m.toLowerCase()in l}}}};for(var f in r.open(e.method||"get",t,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(m,p,v){a.push(p=p.toLowerCase()),c.push([p,v]),l[p]=l[p]?l[p]+","+v:v}),n(d())},r.onerror=i,r.withCredentials=e.credentials=="include",e.headers)r.setRequestHeader(f,e.headers[f]);r.send(e.body||null)})}const jU=Object.freeze(Object.defineProperty({__proto__:null,default:LU},Symbol.toStringTag,{value:"Module"})),kx=y0(jU);var Mp,Rx;function BU(){return Rx||(Rx=1,Mp=self.fetch||(self.fetch=kx.default||kx)),Mp}BU();function ko(){}ko.prototype.userAgent=DU();var FU=function(e){var n=ko.category?" "+ko.category:"",i=ko.framework?" framework/"+ko.framework:"",r=""+ko.prototype.userAgent+n+i;return r};function VU(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,zl(t,e)}function Gg(t){var e=typeof Map=="function"?new Map:void 0;return Gg=function(i){if(i===null||!HU(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return zU(i,arguments,Yg(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),zl(r,i)},Gg(t)}function zU(t,e,n){if(vk())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,e);var r=new(t.bind.apply(t,i));return n&&zl(r,n.prototype),r}function vk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vk=function(){return!!t})()}function HU(t){try{return Function.toString.call(t).indexOf("[native code]")!==-1}catch{return typeof t=="function"}}function zl(t,e){return zl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zl(t,e)}function Yg(t){return Yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Yg(t)}var qU=function(t){function e(n,i,r,a){var c;return c=t.call(this,n)||this,c.code=i,c.name=r,c.statusCode=a,c}return VU(e,t),e}(Gg(Error)),KU=function(){function t(n,i,r){this.endpoint=i||"https://cognito-idp."+n+".amazonaws.com/";var a=r||{},c=a.credentials;this.fetchOptions=c?{credentials:c}:{}}var e=t.prototype;return e.promisifyRequest=function(i,r){var a=this;return new Promise(function(c,l){a.request(i,r,function(d,f){d?l(new qU(d.message,d.code,d.name,d.statusCode)):c(f)})})},e.requestWithRetry=function(i,r,a){var c=this,l=5*1e3;WU(function(d){return new Promise(function(f,m){c.request(i,d,function(p,v){p?m(p):f(v)})})},[r],l).then(function(d){return a(null,d)}).catch(function(d){return a(d)})},e.request=function(i,r,a){var c={"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+i,"X-Amz-User-Agent":FU(),"Cache-Control":"no-store"},l=Object.assign({},this.fetchOptions,{headers:c,method:"POST",mode:"cors",body:JSON.stringify(r)}),d;fetch(this.endpoint,l).then(function(f){return d=f,f},function(f){throw f instanceof TypeError?new Error("Network error"):f}).then(function(f){return f.json().catch(function(){return{}})}).then(function(f){if(d.ok)return a(null,f);var m=(f.__type||f.code).split("#").pop(),p=new Error(f.message||f.Message||null);return p.name=m,p.code=m,a(p)}).catch(function(f){if(d&&d.headers&&d.headers.get("x-amzn-errortype"))try{var m=d.headers.get("x-amzn-errortype").split(":")[0],p=new Error(d.status?d.status.toString():null);return p.code=m,p.name=m,p.statusCode=d.status,a(p)}catch{return a(f)}else f instanceof Error&&f.message==="Network error"&&(f.code="NetworkError");return a(f)})},t}(),Ad={debug:function(){}},GU=function(e){var n="nonRetryable";return e&&e[n]};function yk(t,e,n,i){if(i===void 0&&(i=1),typeof t!="function")throw Error("functionToRetry must be a function");return Ad.debug(t.name+" attempt #"+i+" with args: "+JSON.stringify(e)),t.apply(void 0,e).catch(function(r){if(Ad.debug("error on "+t.name,r),GU(r))throw Ad.debug(t.name+" non retryable error",r),r;var a=n(i,e,r);if(Ad.debug(t.name+" retrying in "+a+" ms"),a!==!1)return new Promise(function(c){return setTimeout(c,a)}).then(function(){return yk(t,e,n,i+1)});throw r})}function YU(t){var e=100,n=100;return function(i){var r=Math.pow(2,i)*e+n*Math.random();return r>t?!1:r}}function WU(t,e,n){return yk(t,e,YU(n))}/*!
 * Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * SPDX-License-Identifier: Apache-2.0
 */var $U=55,XU=function(){function t(n,i){var r=n||{},a=r.UserPoolId,c=r.ClientId,l=r.endpoint,d=r.fetchOptions,f=r.AdvancedSecurityDataCollectionFlag;if(!a||!c)throw new Error("Both UserPoolId and ClientId are required.");if(a.length>$U||!/^[\w-]+_[0-9a-zA-Z]+$/.test(a))throw new Error("Invalid UserPoolId format.");var m=a.split("_")[0];this.userPoolId=a,this.clientId=c,this.client=new KU(m,l,d),this.advancedSecurityDataCollectionFlag=f!==!1,this.storage=n.Storage||new gk().getStorage(),i&&(this.wrapRefreshSessionCallback=i)}var e=t.prototype;return e.getUserPoolId=function(){return this.userPoolId},e.getUserPoolName=function(){return this.getUserPoolId().split("_")[1]},e.getClientId=function(){return this.clientId},e.signUp=function(i,r,a,c,l,d){var f=this,m={ClientId:this.clientId,Username:i,Password:r,UserAttributes:a,ValidationData:c,ClientMetadata:d};this.getUserContextData(i)&&(m.UserContextData=this.getUserContextData(i)),this.client.request("SignUp",m,function(p,v){if(p)return l(p,null);var S={Username:i,Pool:f,Storage:f.storage},x={user:new Kg(S),userConfirmed:v.UserConfirmed,userSub:v.UserSub,codeDeliveryDetails:v.CodeDeliveryDetails};return l(null,x)})},e.getCurrentUser=function(){var i="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",r=this.storage.getItem(i);if(r){var a={Username:r,Pool:this,Storage:this.storage};return new Kg(a)}return null},e.getUserContextData=function(i){if(!(typeof AmazonCognitoAdvancedSecurityData>"u")){var r=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){var a=r.getData(i,this.userPoolId,this.clientId);if(a){var c={EncodedData:a};return c}}return{}}},t}(),Op={exports:{}};/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */var Ax;function ZU(){return Ax||(Ax=1,function(t,e){(function(n){var i;if(t.exports=n(),i=!0,!i){var r=window.Cookies,a=window.Cookies=n();a.noConflict=function(){return window.Cookies=r,a}}})(function(){function n(){for(var a=0,c={};a<arguments.length;a++){var l=arguments[a];for(var d in l)c[d]=l[d]}return c}function i(a){return a.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(a){function c(){}function l(f,m,p){if(!(typeof document>"u")){p=n({path:"/"},c.defaults,p),typeof p.expires=="number"&&(p.expires=new Date(new Date*1+p.expires*864e5)),p.expires=p.expires?p.expires.toUTCString():"";try{var v=JSON.stringify(m);/^[\{\[]/.test(v)&&(m=v)}catch{}m=a.write?a.write(m,f):encodeURIComponent(String(m)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),f=encodeURIComponent(String(f)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var S="";for(var x in p)p[x]&&(S+="; "+x,p[x]!==!0&&(S+="="+p[x].split(";")[0]));return document.cookie=f+"="+m+S}}function d(f,m){if(!(typeof document>"u")){for(var p={},v=document.cookie?document.cookie.split("; "):[],S=0;S<v.length;S++){var x=v[S].split("="),b=x.slice(1).join("=");!m&&b.charAt(0)==='"'&&(b=b.slice(1,-1));try{var P=i(x[0]);if(b=(a.read||a)(b,P)||i(b),m)try{b=JSON.parse(b)}catch{}if(p[P]=b,f===P)break}catch{}}return f?p[f]:p}}return c.set=l,c.get=function(f){return d(f,!1)},c.getJSON=function(f){return d(f,!0)},c.remove=function(f,m){l(f,"",n(m,{expires:-1}))},c.defaults={},c.withConverter=r,c}return r(function(){})})}(Op)),Op.exports}ZU();class JU{debug(e,...n){}info(e,...n){console.info(`[INFO] ${e}`,...n)}warn(e,...n){console.warn(`[WARN] ${e}`,...n)}error(e,...n){console.error(`[ERROR] ${e}`,...n)}}const $e=new JU;class QU{config;userPool;constructor(e){this.config=e;try{this.userPool=new XU({UserPoolId:e.userPoolId,ClientId:e.clientId}),$e.info("CognitoUserPool initialized successfully")}catch(n){throw $e.error("Failed to initialize CognitoUserPool:",n),n}}initiateLogin(e){$e.info("Cognito Config:",this.config),$e.info("Redirect URI being sent:",this.config.redirectUri);const n=new URLSearchParams({client_id:this.config.clientId,response_type:"code",scope:"openid email profile",redirect_uri:this.config.redirectUri,identity_provider:e}),i=`https://${this.config.domain}/oauth2/authorize?${n.toString()}`;$e.info("Login URL:",i),window.location.href=i}getCurrentUser(){return this.userPool.getCurrentUser()}async getCurrentSession(){const e=this.getCurrentUser();return e?new Promise((n,i)=>{e.getSession((r,a)=>{r?i(r):n(a)})}):null}async refreshSession(e){const n=this.getCurrentUser();if(!n)throw new Error("No current user found");return new Promise((i,r)=>{n.refreshSession(e,(a,c)=>{a?r(a):c?i(c):r(new Error("Failed to refresh session"))})})}async exchangeCodeForTokens(e){const n=`https://${this.config.domain}/oauth2/token`;$e.info("Token exchange - Code:",e),$e.info("Token exchange - Redirect URI:",this.config.redirectUri);const i=new URLSearchParams({grant_type:"authorization_code",client_id:this.config.clientId,code:e,redirect_uri:this.config.redirectUri});$e.info("Token exchange - Request body:",i.toString()),$e.info("Token exchange - Endpoint:",n);const r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()});if($e.info("Token exchange - Response status:",r.status),!r.ok){const c=await r.text();throw $e.error("Token exchange - Error response:",c),new Error(`Token exchange failed: ${r.status} ${c}`)}const a=await r.json();return $e.info("Token exchange - Success:",a),a}async getUserInfo(e){const n=`https://${this.config.domain}/oauth2/userInfo`,i=await fetch(n,{headers:{Authorization:`Bearer ${e}`}});if(!i.ok){const r=await i.text();throw new Error(`Failed to fetch user info: ${i.status} ${r}`)}return i.json()}async getUserInfoFromSession(e){const n=e.getAccessToken().getJwtToken();return this.getUserInfo(n)}async handleOAuthCallback(e){const n=await this.exchangeCodeForTokens(e),r=JSON.parse(atob(n.id_token.split(".")[1])).sub,a=new Kg({Username:r,Pool:this.userPool}),c=new zg({IdToken:n.id_token}),l=new Fg({AccessToken:n.access_token}),d=new Hg({RefreshToken:n.refresh_token}),f=new qg({IdToken:c,AccessToken:l,RefreshToken:d});a.setSignInUserSession(f),window.dispatchEvent(new CustomEvent("tokensChanged",{detail:"saved"}))}signOut(){const e=this.getCurrentUser();e&&e.signOut();const n=new URLSearchParams({client_id:this.config.clientId,logout_uri:this.config.logoutUri}),i=`https://${this.config.domain}/logout?${n.toString()}`;window.location.href=i}}const eL={domain:"auth.test.ladderr.ai",clientId:"1vjqgkgsa283flpnuju0orim4v",userPoolId:"us-west-2_VzuJZzMgD",region:"us-west-2",redirectUri:"https://test.ladderr.ai/auth/callback",logoutUri:"https://test.ladderr.ai/auth/logout"};let Np=null;const au=()=>(Np||(Np=new QU(eL)),Np);class vo extends Error{constructor(e,n,i=!1,r){super(e),this.code=n,this.isRetryable=i,this.originalError=r,this.name="AuthError"}}const Px=(t,e)=>{if(t instanceof vo)return t;const n=t instanceof Error?t.message:String(t);return $e.error(`Auth error in ${e}:`,t),n.includes("NetworkError")||n.includes("fetch")?new vo("Network error occurred","NETWORK_ERROR",!0,t instanceof Error?t:void 0):n.includes("expired")||n.includes("invalid")?new vo("Authentication token expired","TOKEN_EXPIRED",!1,t instanceof Error?t:void 0):n.includes("unauthorized")||n.includes("401")?new vo("Unauthorized access","UNAUTHORIZED",!1,t instanceof Error?t:void 0):n.includes("forbidden")||n.includes("403")?new vo("Access forbidden","FORBIDDEN",!1,t instanceof Error?t:void 0):new vo("Authentication failed","UNKNOWN_ERROR",!1,t instanceof Error?t:void 0)};class tL{baseURL;constructor(){this.baseURL="https://api-test.ladderr.ai"}async makeRequest(e,n){const{accessToken:i,...r}=n,a={"Content-Type":"application/json",...r.headers};i&&(a.Authorization=`Bearer ${i}`);const c=await fetch(`${this.baseURL}${e}`,{...r,headers:a});if(!c.ok){let l=`API Error: ${c.status} ${c.statusText}`;try{const d=await c.json();l=d.detail||l,$e.error("API Error:",d)}catch{$e.error("Failed to parse error response")}throw new Error(l)}return c.json()}async syncUser(e){$e.info("Syncing user profile with backend");try{const n=await this.makeRequest("/api/users/sync",{method:"POST",accessToken:e});return $e.info("User sync successful:",n),n}catch(n){throw $e.error("User sync failed:",n),n}}async getUserFeatures(e){$e.info("Fetching user feature flags from backend");try{const n=await this.makeRequest("/api/users/features",{method:"GET",accessToken:e});return $e.info("User features fetched successfully:",n),n}catch(n){throw $e.error("Failed to fetch user features:",n),n}}}const bk=new tL,Sk=T.createContext(void 0),nL=({children:t})=>{const[e,n]=T.useState(null),[i,r]=T.useState(!0),[a,c]=T.useState(!1),l=au(),d=T.useCallback(k=>{if(!k)return!1;try{if(!k.isValid())return!1;const O=k.getAccessToken(),N=k.getIdToken(),I=k.getRefreshToken();return!!(O&&N&&I)}catch(O){return $e.error("Session validation failed:",O),!1}},[]),f=T.useCallback(async()=>{r(!0);try{const k=await l.getCurrentSession();if(k&&d(k))try{const O=await l.getUserInfoFromSession(k);n({id:O.sub,email:O.email,name:O.name,picture:O.picture,username:O["cognito:username"]})}catch(O){const N=Px(O,"loadUserFromSession");if($e.error("Failed to load user info:",N),!N.isRetryable){const I=l.getCurrentUser();I&&I.signOut(),n(null)}}else n(null)}catch(k){const O=Px(k,"getSession");$e.error("Failed to get session:",O),n(null)}finally{r(!1),c(!0)}},[l,d]),m=T.useCallback(k=>{$e.info("Session change detected:",k.detail),k.detail==="cleared"?(n(null),r(!1)):k.detail==="saved"&&f()},[f]);T.useEffect(()=>(f(),window.addEventListener("tokensChanged",m),()=>{window.removeEventListener("tokensChanged",m)}),[f,m]);const P={user:e,loading:i,isAuthenticated:a&&!i&&!!e,signInWithProvider:k=>{l.initiateLogin(k)},signOut:()=>{const k=l.getCurrentUser();k&&k.signOut(),l.signOut()},clearLocalTokens:()=>{n(null),r(!1),$e.info("Local tokens cleared.")},refreshSession:async()=>{r(!0),await f()},handleSuccessfulLogin:async()=>{await f();const k=await l.getCurrentSession();if(k&&d(k)){const O=k.getAccessToken().getJwtToken();try{await bk.syncUser(O),$e.info("User profile synced successfully after new login")}catch(N){$e.error("Failed to sync user profile after new login:",N)}}}};return C.jsx(Sk.Provider,{value:P,children:t})};class iL extends T.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){$e.error("Auth error boundary caught an error:",e,n),(e.message.includes("auth")||e.message.includes("token")||e.message.includes("session"))&&$e.error("Authentication-related error detected:",{error:e.message,stack:e.stack,componentStack:n.componentStack})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:C.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:C.jsx("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:C.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),C.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Authentication Error"}),C.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Something went wrong with the authentication process. Please try refreshing the page."}),C.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Refresh Page"})]})})}):this.props.children}}/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sL=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),_x=t=>{const e=sL(t);return e.charAt(0).toUpperCase()+e.slice(1)},Tk=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),aL=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...l},d)=>T.createElement("svg",{ref:d,...oL,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:Tk("lucide",r),...!a&&!aL(l)&&{"aria-hidden":"true"},...l},[...c.map(([f,m])=>T.createElement(f,m)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=(t,e)=>{const n=T.forwardRef(({className:i,...r},a)=>T.createElement(cL,{ref:a,iconNode:e,className:Tk(`lucide-${rL(_x(t))}`,`lucide-${t}`,i),...r}));return n.displayName=_x(t),n};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yf=It("arrow-left",lL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ip=It("arrow-right",uL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],fL=It("database",dL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mL=It("eye",hL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],gL=It("heart",pL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],yL=It("lightbulb",vL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],SL=It("loader-circle",bL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xL=It("lock",TL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],CL=It("mail",wL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],kL=It("menu",EL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],AL=It("message-circle",RL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],_L=It("message-square",PL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],ML=It("mic-off",DL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],NL=It("mic",OL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"m9 10 3-3 3 3",key:"11gsxs"}],["path",{d:"M12 13V7",key:"h0r20n"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]],UL=It("monitor-up",IL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],jL=It("phone-off",LL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],FL=It("shield",BL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],zL=It("sparkles",VL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],qL=It("target",HL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],GL=It("trending-up",KL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],WL=It("users",YL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],XL=It("video-off",$L);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],JL=It("video",ZL);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xk=It("x",QL),Gr=()=>{const t=T.useContext(Sk);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};class e4{cachedFeatures=null;ttl;fetchingPromise=null;constructor(e=600*1e3){this.ttl=e}isCacheValid(){return this.cachedFeatures?Date.now()-this.cachedFeatures.lastFetched<this.ttl:!1}async getUserFeatures(e){return this.isCacheValid()?this.cachedFeatures.features:this.fetchingPromise?this.fetchingPromise:(this.fetchingPromise=(async()=>{try{const n=await bk.getUserFeatures(e);return this.cachedFeatures={features:n.enabled_features,lastFetched:Date.now()},n.enabled_features}catch(n){throw $e.error("Failed to fetch user features:",n),n}finally{this.fetchingPromise=null}})(),this.fetchingPromise)}isFeatureEnabled(e,n){return e.includes(n)}async checkFeature(e,n){try{const i=await this.getUserFeatures(e);return this.isFeatureEnabled(i,n)}catch(i){return $e.error(`Failed to check feature '${n}':`,i),!1}}clearCache(){this.cachedFeatures=null,this.fetchingPromise=null}}const vl=new e4,_0=()=>{const{user:t,isAuthenticated:e}=Gr(),[n,i]=T.useState([]),[r,a]=T.useState(!0),[c,l]=T.useState(null),d=au();return T.useEffect(()=>{(async()=>{if(!e||!t){i([]),a(!1),l(null);return}a(!0),l(null);try{const S=await d.getCurrentSession();if(!S){i([]),a(!1);return}const x=S.getAccessToken().getJwtToken(),b=await vl.getUserFeatures(x);i(b)}catch(S){const x=S instanceof Error?S.message:"Failed to fetch feature flags";l(x),$e.error("Feature flag fetch error:",S),i([])}finally{a(!1)}})()},[e,t]),{isFeatureEnabled:v=>vl.isFeatureEnabled(n,v),checkFeature:async v=>{if(!e||!t)return!1;try{const S=await d.getCurrentSession();if(!S)return!1;const x=S.getAccessToken().getJwtToken();return await vl.checkFeature(x,v)}catch(S){return $e.error(`Failed to check feature '${v}':`,S),!1}},features:n,loading:r,error:c,refetch:async()=>{if(!e||!t){i([]),a(!1),l(null);return}vl.clearCache(),a(!0),l(null);try{const v=await d.getCurrentSession();if(!v){i([]),a(!1);return}const S=v.getAccessToken().getJwtToken(),x=await vl.getUserFeatures(S);i(x)}catch(v){const S=v instanceof Error?v.message:"Failed to fetch feature flags";l(S),$e.error("Feature flag fetch error:",v),i([])}finally{a(!1)}}}},t4=({onStartCoaching:t})=>{const{loading:e,isAuthenticated:n,signOut:i}=Gr(),{isFeatureEnabled:r,loading:a}=_0(),[c,l]=T.useState(!1),f=cr().pathname==="/session",m=e||a,p=n&&r("alpha-access"),v=async()=>{await i()},S=()=>{l(!c)};return C.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm relative",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs(on,{to:"/",className:"flex items-center space-x-3",children:[C.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),C.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),C.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[C.jsx("a",{href:"#capabilities",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Capabilities"}),C.jsx("a",{href:"#testimonials",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Success Stories"}),C.jsx(on,{to:"/contact",className:"text-slate-600 hover:text-slate-900 font-medium transition-colors",children:"Contact"}),m?C.jsx("div",{className:"w-32 h-10 bg-gray-200 animate-pulse rounded-full"}):n?C.jsxs("div",{className:"flex items-center space-x-4",children:[!f&&p&&C.jsx(on,{to:"/session",className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Start Session"}),C.jsx("button",{onClick:v,className:"bg-gradient-to-r from-slate-800 to-slate-900 hover:from-slate-900 hover:to-black text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Logout"})]}):C.jsx("button",{onClick:t,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-2.5 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Join Early Access"})]}),C.jsx("button",{onClick:S,className:"md:hidden p-2 rounded-lg hover:bg-slate-100 transition-colors","aria-label":"Toggle menu",children:c?C.jsx(xk,{size:24}):C.jsx(kL,{size:24})})]}),c&&C.jsx("div",{className:"absolute top-full left-0 right-0 md:hidden border-t border-slate-100 bg-white/95 backdrop-blur-md shadow-lg z-50",children:C.jsxs("nav",{className:"px-6 py-4 space-y-4",children:[C.jsx("a",{href:"#capabilities",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>l(!1),children:"Capabilities"}),C.jsx("a",{href:"#testimonials",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>l(!1),children:"Success Stories"}),C.jsx(on,{to:"/contact",className:"block text-slate-600 hover:text-slate-900 font-medium transition-colors py-2",onClick:()=>l(!1),children:"Contact"}),C.jsx("div",{className:"pt-2",children:m?C.jsx("div",{className:"w-full h-12 bg-gray-200 animate-pulse rounded-full"}):n?C.jsxs("div",{className:"space-y-3",children:[!f&&p&&C.jsx(on,{to:"/session",onClick:()=>l(!1),className:"block w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg text-center",children:"Start Session"}),C.jsx("button",{onClick:()=>{v(),l(!1)},className:"w-full bg-gradient-to-r from-slate-800 to-slate-900 hover:from-slate-900 hover:to-black text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg",children:"Logout"})]}):C.jsx("button",{onClick:()=>{t(),l(!1)},className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 shadow-lg",children:"Join Early Access"})})]})})]})})},n4=({onStartCoaching:t})=>{const e=ec(),{isAuthenticated:n,loading:i}=Gr(),{isFeatureEnabled:r,loading:a}=_0(),c=i||a,l=n&&r("alpha-access"),d=()=>{n?l&&e("/session"):t()},m=c?{text:"Loading...",icon:C.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),disabled:!0,className:"group bg-neutral-400 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm cursor-not-allowed"}:n?l?{text:"Begin Your Climb",icon:C.jsx(Ip,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"}),disabled:!1,className:"group bg-neutral-900 hover:bg-neutral-800 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm shadow-lg hover:shadow-xl"}:{text:"Your Coach is Almost Ready",icon:C.jsx(Ip,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"}),disabled:!0,className:"group bg-neutral-300 text-neutral-600 px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm cursor-not-allowed"}:{text:"Begin Your Climb",icon:C.jsx(Ip,{className:"w-4 h-4 group-hover:translate-x-0.5 transition-transform"}),disabled:!1,className:"group bg-neutral-900 hover:bg-neutral-800 text-white px-10 py-4 text-base font-medium transition-all duration-200 inline-flex items-center gap-3 rounded-sm shadow-lg hover:shadow-xl"};return C.jsxs("section",{className:"relative min-h-screen flex items-center justify-center px-6 bg-neutral-50",children:[C.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-50 via-white to-neutral-100/50"}),C.jsxs("div",{className:"relative max-w-4xl mx-auto text-center",children:[C.jsxs("div",{className:"inline-flex items-center gap-2 text-neutral-600 text-sm font-medium mb-8",children:[C.jsx(zL,{className:"w-4 h-4"}),"Voice-First AI Career Coach"]}),C.jsxs("h1",{className:"text-5xl md:text-7xl font-light mb-6 tracking-tight text-neutral-900",children:["Own Your",C.jsx("br",{}),C.jsx("span",{className:"font-medium",children:"Career"})]}),C.jsx("p",{className:"text-lg md:text-xl text-neutral-600 mb-12 max-w-2xl mx-auto font-light leading-relaxed",children:"AI-powered career coaching that adapts to your goals and style"}),C.jsxs("div",{className:"mt-16 mb-8",children:[C.jsx("div",{className:"relative group",children:C.jsxs("button",{onClick:d,disabled:m.disabled,className:m.className,children:[!c&&C.jsxs("div",{className:"flex items-center gap-0.5",children:[C.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse"}),C.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.1s"}}),C.jsx("div",{className:"w-0.5 bg-current rounded-full h-3 animate-pulse",style:{animationDelay:"0.2s"}}),C.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.3s"}}),C.jsx("div",{className:"w-0.5 bg-current rounded-full h-2 animate-pulse",style:{animationDelay:"0.4s"}}),C.jsx("div",{className:"w-0.5 bg-current rounded-full h-4 animate-pulse",style:{animationDelay:"0.5s"}}),C.jsx("div",{className:"w-0.5 bg-current rounded-full h-5 animate-pulse",style:{animationDelay:"0.6s"}})]}),m.text,m.icon]})}),n&&!l&&!c&&C.jsx("p",{className:"text-sm text-neutral-500 mt-4",children:"You're in the early release queue. We'll activate you soon so we can keep sessions high quality."})]})]})]})},i4=[{icon:gL,title:"Workplace Confidence",description:"Build self-assurance for meetings, presentations, and difficult conversations through role-playing and reflection"},{icon:WL,title:"Conflict Resolution",description:"Navigate workplace tensions, manage difficult colleagues, and turn conflicts into productive conversations"},{icon:GL,title:"Self-Advocacy",description:"Learn to sell yourself, communicate your value, and position your achievements for recognition and advancement"},{icon:_L,title:"Communication Polish",description:"Refine your business English, presentation skills, and professional speaking to command respect"},{icon:qL,title:"Goal Accountability",description:"Stay on track with career objectives, break through barriers, and maintain momentum toward your aspirations"},{icon:yL,title:"Blind Spot Discovery",description:"Uncover hidden opportunities, challenge your assumptions, and explore career possibilities you hadn't considered"}],r4=()=>C.jsx("section",{id:"capabilities",className:"py-20 bg-white",children:C.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[C.jsxs("div",{className:"mb-16",children:[C.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-neutral-900 mb-4 text-center",children:"How we'll help you"}),C.jsx("p",{className:"text-neutral-600 text-center max-w-2xl mx-auto",children:"Your AI career coach, here to listen, reflect, and guide your professional growth"})]}),C.jsx("div",{className:"grid md:grid-cols-2 gap-x-16 gap-y-12",children:i4.map((t,e)=>{const n=t.icon;return C.jsxs("div",{className:"flex gap-4",children:[C.jsx("div",{className:"flex-shrink-0",children:C.jsx(n,{className:"w-6 h-6 text-neutral-700 mt-1"})}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-lg font-medium text-neutral-900 mb-2",children:t.title}),C.jsx("p",{className:"text-neutral-600 leading-relaxed",children:t.description})]})]},e)})})]})}),s4=[{text:"It's like having a mentor who actually gets it. Helped me navigate a difficult conversation with my manager.",context:"Product Manager"},{text:"Finally understood why I wasn't getting promoted. The AI helped me see my blind spots.",context:"Software Engineer"},{text:"Practiced my presentation pitch until I felt confident. Got the buy-in I needed.",context:"Marketing Director"},{text:"Talked through my career anxiety. It really listens and asks the right questions.",context:"Operations Lead"}],a4=()=>C.jsx("section",{id:"testimonials",className:"py-20 bg-white border-t border-neutral-100",children:C.jsxs("div",{className:"max-w-6xl mx-auto px-6",children:[C.jsx("h2",{className:"text-2xl md:text-3xl font-light text-neutral-900 mb-12 text-center",children:"Early feedback"}),C.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:s4.map((t,e)=>C.jsxs("div",{className:"border-l-2 border-neutral-200 pl-6",children:[C.jsxs("p",{className:"text-neutral-700 mb-3 leading-relaxed",children:['"',t.text,'"']}),C.jsx("p",{className:"text-sm text-neutral-500",children:t.context})]},e))}),C.jsx("div",{className:"mt-16 text-center",children:C.jsx("p",{className:"text-sm text-neutral-400",children:"From our alpha testers"})})]})}),o4=()=>C.jsx("footer",{className:"bg-slate-900 text-white border-t border-slate-800",children:C.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-16",children:[C.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[C.jsxs("div",{className:"md:col-span-2",children:[C.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[C.jsx("img",{src:"/logo-footer.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),C.jsxs("div",{children:[C.jsx("h3",{className:"text-2xl font-bold",children:"Ladderr.ai"}),C.jsx("p",{className:"text-slate-400 text-sm",children:"Voice-First AI Career Coach"})]})]}),C.jsx("p",{className:"text-slate-400 mb-6 max-w-md",children:"Your AI career coach, here to listen, reflect, and guide your professional growth."}),C.jsx("p",{className:"text-sm text-slate-500",children:"Ladderr is currently invite-only. We're limiting access to ensure every user gets a high-quality coaching experience."})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-4",children:"Product"}),C.jsxs("ul",{className:"space-y-3 text-slate-400",children:[C.jsx("li",{children:C.jsx("a",{href:"#capabilities",className:"hover:text-white transition-colors",children:"Capabilities"})}),C.jsx("li",{children:C.jsx("a",{href:"#testimonials",className:"hover:text-white transition-colors",children:"Success Stories"})}),C.jsx("li",{children:C.jsx("button",{className:"hover:text-white transition-colors text-left",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Join Waitlist"})})]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold mb-4",children:"Company"}),C.jsxs("ul",{className:"space-y-3 text-slate-400",children:[C.jsx("li",{children:C.jsx(on,{to:"/contact",className:"hover:text-white transition-colors",children:"Contact"})}),C.jsx("li",{children:C.jsx(on,{to:"/privacy",className:"hover:text-white transition-colors",children:"Privacy"})}),C.jsx("li",{children:C.jsx(on,{to:"/terms",className:"hover:text-white transition-colors",children:"Terms"})})]})]})]}),C.jsx("div",{className:"border-t border-slate-800 mt-12 pt-8 text-center text-slate-400",children:C.jsx("p",{children:"© 2025 Ladderr.ai. All rights reserved."})})]})}),c4=({onClose:t})=>{const[e,n]=T.useState(!1),[i,r]=T.useState(!1),[a,c]=T.useState(null),{signInWithProvider:l}=Gr(),d=()=>{n(!0),c(null);try{l("Google")}catch{c("An unexpected error occurred. Please try again."),n(!1)}},f=()=>{r(!0),c(null);try{l("LinkedIn")}catch{c("An unexpected error occurred. Please try again."),r(!1)}};return C.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:C.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-8 relative",children:[C.jsx("button",{onClick:t,className:"absolute top-6 right-6 text-slate-400 hover:text-slate-600 transition-colors",children:C.jsx(xk,{className:"w-6 h-6"})}),C.jsxs("div",{className:"text-center mb-8",children:[C.jsx("img",{src:"/logo-modal.png",alt:"Ladderr.ai Logo",className:"w-16 h-16 object-contain mx-auto mb-6"}),C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Join Early Access"}),C.jsx("p",{className:"text-slate-600",children:"Sign in to check your early access status and begin your climb"})]}),a&&C.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:a}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("button",{onClick:d,disabled:e||i,className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-slate-200 hover:border-slate-300 hover:bg-slate-50 text-slate-700 py-4 rounded-full font-semibold transition-all duration-300 hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:[e?C.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-slate-400"}):C.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[C.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),C.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),C.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),C.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),e?"Signing in...":"Continue with Google"]}),C.jsxs("button",{onClick:f,disabled:e||i,className:"w-full flex items-center justify-center gap-3 bg-[#0077B5] hover:bg-[#005885] text-white py-4 rounded-full font-semibold transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[i?C.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):C.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:C.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),i?"Signing in...":"Continue with LinkedIn"]})]}),C.jsxs("p",{className:"text-xs text-slate-500 text-center mt-6",children:["By continuing, you agree to our"," ",C.jsx(on,{to:"/terms",className:"text-indigo-600 hover:text-indigo-700 underline",children:"Terms of Service"})," ","and"," ",C.jsx(on,{to:"/privacy",className:"text-indigo-600 hover:text-indigo-700 underline",children:"Privacy Policy"})]})]})})},l4=()=>{const t=ec(),[e]=WI(),[n,i]=T.useState(null),[r,a]=T.useState(!0),{handleSuccessfulLogin:c}=Gr();return T.useEffect(()=>{let l=!0,d;const f=async()=>{const p=e.get("code"),v=e.get("error");if($e.info("AuthCallback - Processing:",{code:p?.substring(0,8)+"...",error:v}),v){l&&(i("Authentication failed"),a(!1),d=setTimeout(()=>t("/"),3e3));return}if(!p){l&&(i("No authorization code received"),a(!1),d=setTimeout(()=>t("/"),3e3));return}const S="processed_auth_codes",x=JSON.parse(localStorage.getItem(S)||"[]");if(x.includes(p)){$e.info("Authorization code already processed, skipping...");const P=x.slice(-9);localStorage.setItem(S,JSON.stringify(P));return}const b="auth_processing";if(localStorage.getItem(b)===p){$e.info("Token exchange already in progress, waiting...");return}localStorage.setItem(b,p);try{if($e.info("Starting OAuth callback processing for code:",p.substring(0,8)+"..."),await au().handleOAuthCallback(p),c(),!l){$e.info("Component unmounted, aborting...");return}$e.info("OAuth callback processing successful"),x.push(p),localStorage.setItem(S,JSON.stringify(x.slice(-10))),setTimeout(()=>{$e.info("Redirecting user...",{isInEarlyAccessList:!1}),t("/?waitlist=true")},1e3)}catch(P){$e.error("Token exchange failed:",P),l&&(i("Authentication failed"),a(!1),d=setTimeout(()=>t("/"),3e3))}finally{localStorage.removeItem(b),$e.info("Token exchange process completed")}},m=setTimeout(()=>{l&&f()},100);return()=>{l=!1,clearTimeout(m),d&&clearTimeout(d)}},[e,t,c]),n?C.jsx("div",{className:"min-h-screen flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("p",{className:"text-red-600 mb-4",children:n}),C.jsx("p",{className:"text-slate-600",children:"Redirecting to home..."})]})}):r?C.jsx("div",{className:"min-h-screen flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),C.jsx("p",{className:"text-slate-600",children:"Completing sign in..."})]})}):null},u4=()=>{const t=ec(),{clearLocalTokens:e}=Gr();return T.useEffect(()=>{e();const i=au().getCurrentUser();i&&i.signOut(),setTimeout(()=>{t("/")},1e3)},[t,e]),C.jsx("div",{className:"min-h-screen flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),C.jsx("p",{className:"text-slate-600",children:"Signing you out..."})]})})},d4=({children:t})=>{const{isAuthenticated:e,loading:n}=Gr();return n?C.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:C.jsx("div",{className:"animate-pulse text-lg text-gray-600",children:"Loading..."})}):e?C.jsx(C.Fragment,{children:t}):C.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-white px-4",children:C.jsxs("div",{className:"max-w-md text-center",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),C.jsx("p",{className:"text-gray-600 mb-8",children:"You need to be logged in to access this page. Please return to the home page and sign in."}),C.jsx("a",{href:"/",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors",children:"Go to Home"})]})})},f4=()=>C.jsxs("div",{className:"min-h-screen bg-white",children:[C.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:C.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs(on,{to:"/",className:"flex items-center space-x-3",children:[C.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),C.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),C.jsxs(on,{to:"/",className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[C.jsx(yf,{className:"w-4 h-4"}),"Back to Home"]})]})})}),C.jsx("div",{className:"py-20",children:C.jsxs("div",{className:"max-w-2xl mx-auto px-6",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("h1",{className:"text-5xl font-bold text-slate-900 mb-6",children:"Get in Touch"}),C.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Have questions about Ladderr.ai or interested in an enterprise solution? We'd love to hear from you."})]}),C.jsxs("div",{className:"space-y-8",children:[C.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-3xl p-8 border border-indigo-100 text-center",children:[C.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:C.jsx(CL,{className:"w-8 h-8 text-white"})}),C.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:"Email Us"}),C.jsx("p",{className:"text-slate-600 mt-2 mb-4",children:"For all inquiries, including enterprise solutions, please email us at"}),C.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-bold text-lg",children:"hello@ladderr.ai"})]}),C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8",children:[C.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-6 text-center",children:"Frequently Asked Questions"}),C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"How does early access work?"}),C.jsx("p",{className:"text-slate-600",children:"We're gradually onboarding users to ensure a high-quality coaching experience. You can join the waitlist from our homepage."})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"What about mobile apps or other languages?"}),C.jsxs("p",{className:"text-slate-600",children:["Our current focus is on a web-based, English-only experience. However, our roadmap is driven by user feedback. If you need a mobile app or another language, please email us at ",C.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-medium",children:"hello@ladderr.ai"}),"."]})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"font-semibold text-slate-800 mb-2",children:"Do you offer an enterprise version?"}),C.jsxs("p",{className:"text-slate-600",children:["Yes, we can deploy Ladderr.ai for wider corporate use. For more information on enterprise solutions, please contact us at ",C.jsx("a",{href:"mailto:hello@ladderr.ai",className:"text-indigo-600 font-medium",children:"hello@ladderr.ai"}),"."]})]})]})]})]})]})})]}),h4=()=>C.jsxs("div",{className:"min-h-screen bg-white",children:[C.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:C.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs(on,{to:"/",className:"flex items-center space-x-3",children:[C.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),C.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),C.jsxs(on,{to:"/",className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[C.jsx(yf,{className:"w-4 h-4"}),"Back to Home"]})]})})}),C.jsx("div",{className:"py-20",children:C.jsxs("div",{className:"max-w-4xl mx-auto px-6",children:[C.jsxs("div",{className:"text-center mb-16",children:[C.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:C.jsx(FL,{className:"w-8 h-8 text-white"})}),C.jsx("h1",{className:"text-5xl font-bold text-slate-900 mb-6",children:"Privacy Policy"}),C.jsx("p",{className:"text-xl text-slate-600 max-w-2xl mx-auto",children:"Your privacy and data security are fundamental to everything we do at Ladderr.ai"}),C.jsx("p",{className:"text-sm text-slate-500 mt-4",children:"Last updated: August 2025"})]}),C.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-16",children:[C.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100",children:[C.jsx(xL,{className:"w-8 h-8 text-indigo-600 mx-auto mb-4"}),C.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"End-to-End Encryption"}),C.jsx("p",{className:"text-slate-600 text-sm",children:"All coaching sessions are encrypted and secure"})]}),C.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl border border-purple-100",children:[C.jsx(mL,{className:"w-8 h-8 text-purple-600 mx-auto mb-4"}),C.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"Responsible Data Handling"}),C.jsx("p",{className:"text-slate-600 text-sm",children:"We use some providers like OpenAI but we never sell your data."})]}),C.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-pink-50 to-rose-50 rounded-2xl border border-pink-100",children:[C.jsx(fL,{className:"w-8 h-8 text-pink-600 mx-auto mb-4"}),C.jsx("h3",{className:"font-bold text-slate-900 mb-2",children:"Data Minimization"}),C.jsx("p",{className:"text-slate-600 text-sm",children:"We only collect what's necessary for coaching"})]})]}),C.jsxs("div",{className:"prose prose-slate max-w-none",children:[C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Our Commitment to Your Privacy"}),C.jsx("p",{className:"text-slate-600 mb-4",children:'Ladderr.ai ("we", "us", "our") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, and protect your personal data. Ladderr.ai is the data controller for your information under the UK General Data Protection Regulation (UK GDPR).'})]}),C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Information We Collect"}),C.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Account Information"}),C.jsx("p",{className:"text-slate-600 mb-4",children:"When you create an account, we collect basic information such as your name and email address to create and manage your account."}),C.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-4",children:"Coaching Session Data"}),C.jsx("p",{className:"text-slate-600 mb-4",children:"During coaching sessions, we process voice data and conversation content to provide the service. As we are in an MVP phase, we may also use this data to analyze and improve our service. By using the service, you consent to this use."})]}),C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"How and Why We Use Your Information (Lawful Basis)"}),C.jsxs("ul",{className:"space-y-3 text-slate-600",children:[C.jsxs("li",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),C.jsxs("span",{children:[C.jsx("strong",{children:"To Provide Our Service:"})," We process your data to fulfill our contract with you, i.e., to provide AI coaching."]})]}),C.jsxs("li",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),C.jsxs("span",{children:[C.jsx("strong",{children:"To Improve Our Service:"})," We use your anonymized session data based on our legitimate interest to improve our AI and for product development. You provide your consent to this when you agree to our Terms of Service."]})]}),C.jsxs("li",{className:"flex items-start gap-3",children:[C.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mt-2 flex-shrink-0"}),C.jsxs("span",{children:[C.jsx("strong",{children:"To Communicate with You:"})," We may send you important updates about your account."]})]})]})]}),C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Third-Party Services & Data Transfers"}),C.jsx("p",{className:"text-slate-600 mb-4",children:"We use third-party services, such as OpenAI, to provide our AI coaching services. This means your data may be transferred and processed outside of the United Kingdom. We take steps to ensure that any such transfers are compliant with UK GDPR and that your data is protected by appropriate safeguards."})]}),C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Data Security & Retention"}),C.jsx("p",{className:"text-slate-600 mb-4",children:"We implement reasonable security measures to protect your personal information in transit. However, no system is completely secure, and we cannot guarantee the security of data at rest. We will retain your data only for as long as necessary to provide the service and fulfill the purposes outlined in this policy."})]}),C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Your Rights Under UK GDPR"}),C.jsx("p",{className:"text-slate-600 mb-4",children:"You have rights over your personal data. To exercise these rights, or if you have a complaint, please contact us. You also have the right to lodge a complaint with the Information Commissioner's Office (ICO), the UK's data protection regulator."})]}),C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Data from Minors"}),C.jsx("p",{className:"text-slate-600 mb-4",children:"Our service is not intended for individuals under the age of 18. We do not knowingly collect personal data from minors. If we become aware that a minor has provided us with personal data, we will take steps to delete such information."})]}),C.jsxs("div",{className:"bg-white rounded-3xl shadow-lg border border-slate-100 p-8 mb-8",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-6",children:"Changes to This Policy"}),C.jsx("p",{className:"text-slate-600 mb-4",children:"We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page. You are advised to review this Privacy Policy periodically for any changes."})]}),C.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-3xl p-8 border border-indigo-100",children:[C.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Contact Us"}),C.jsx("p",{className:"text-slate-600 mb-6",children:"If you have any questions about this Privacy Policy, please contact us."}),C.jsxs(on,{to:"/contact",className:"inline-flex items-center gap-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-6 py-3 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:["Contact Us",C.jsx(yf,{className:"w-4 h-4 rotate-180"})]})]})]})]})})]}),m4=()=>C.jsxs("div",{className:"min-h-screen bg-white",children:[C.jsx("header",{className:"bg-white/95 backdrop-blur-md border-b border-slate-100 sticky top-0 z-50 shadow-sm",children:C.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsxs(on,{to:"/",className:"flex items-center space-x-3",children:[C.jsx("img",{src:"/logo-header.png",alt:"Ladderr.ai Logo",className:"w-10 h-10 object-contain"}),C.jsxs("div",{children:[C.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Ladderr.ai"}),C.jsx("p",{className:"text-sm text-slate-500 -mt-1",children:"Voice-First AI Career Coach"})]})]}),C.jsxs(on,{to:"/",className:"flex items-center space-x-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[C.jsx(yf,{className:"w-4 h-4"}),C.jsx("span",{children:"Back to Home"})]})]})})}),C.jsx("main",{className:"max-w-4xl mx-auto px-6 py-16",children:C.jsxs("div",{className:"prose prose-slate max-w-none",children:[C.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-8",children:"Terms of Service"}),C.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-6 mb-8",children:[C.jsxs("p",{className:"text-slate-600 mb-2",children:[C.jsx("strong",{children:"Last updated:"})," August 2025"]}),C.jsx("p",{className:"text-slate-600",children:"These terms apply to the alpha version of Ladderr.ai. By accessing our service, you agree to these terms."})]}),C.jsxs("section",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"1. Introduction and Acceptance of Terms"}),C.jsx("p",{className:"text-slate-700 mb-4",children:'These Terms of Service ("Terms") govern your use of the Ladderr.ai alpha service ("Service"). By using the Service, you agree to be bound by these Terms. If you do not agree to these Terms, you may not use the Service.'})]}),C.jsxs("section",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"2. Alpha Service"}),C.jsx("p",{className:"text-slate-700 mb-4",children:"The Service is an alpha version and is provided for testing and feedback purposes only. It may contain bugs, errors, and other problems. The features and availability of the Service may change at any time without notice."})]}),C.jsxs("section",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"3. Disclaimer of Warranties and Limitation of Liability"}),C.jsx("p",{className:"text-slate-700 mb-4",children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT ANY WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. TO THE FULLEST EXTENT PERMITTED BY LAW, WE DISCLAIM ALL WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT. IN NO EVENT SHALL LADDERR.AI BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOODWILL, OR OTHER INTANGIBLE LOSSES, RESULTING FROM YOUR ACCESS TO OR USE OF OR INABILITY TO ACCESS OR USE THE SERVICE. IN NO EVENT SHALL OUR AGGREGATE LIABILITY FOR ALL CLAIMS RELATING TO THE SERVICE EXCEED ONE HUNDRED POUNDS STERLING (£100).'})]}),C.jsxs("section",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"4. AI Content Disclaimer"}),C.jsx("p",{className:"text-slate-700 mb-4",children:"The content and advice provided by the Service are generated by an AI and are for informational purposes only. They do not constitute professional advice. You should not rely on any information provided by the Service without seeking independent professional advice."})]}),C.jsxs("section",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"5. Intellectual Property and Data License"}),C.jsx("p",{className:"text-slate-700 mb-4",children:"You retain ownership of the data you provide to the Service. However, you grant us a worldwide, non-exclusive, royalty-free license to use, copy, reproduce, process, adapt, modify, publish, transmit, display and distribute your anonymized data for the purposes of providing and improving the Service."})]}),C.jsxs("section",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"6. Indemnification"}),C.jsx("p",{className:"text-slate-700 mb-4",children:"You agree to defend, indemnify, and hold harmless Ladderr.ai, its officers, directors, employees, and agents, from and against any claims, liabilities, damages, losses, and expenses, including, without limitation, reasonable legal and accounting fees, arising out of or in any way connected with your access to or use of the Service, or your violation of these Terms."})]}),C.jsxs("section",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"7. Governing Law and Jurisdiction"}),C.jsx("p",{className:"text-slate-700 mb-4",children:"These Terms shall be governed by the laws of England and Wales, without respect to its conflict of laws principles. You agree to submit to the personal jurisdiction of the courts located in London, England for any actions for which we retain the right to seek injunctive or other equitable relief in a court of competent jurisdiction to prevent the actual or threatened infringement, misappropriation or violation of a our copyrights, trademarks, trade secrets, patents, or other intellectual property or proprietary rights, as set forth in the Arbitration provision below."})]}),C.jsxs("section",{className:"mb-8",children:[C.jsx("h2",{className:"text-2xl font-semibold text-slate-900 mb-4",children:"8. Contact"}),C.jsxs("p",{className:"text-slate-700",children:["For questions about these terms, please contact us through our"," ",C.jsx(on,{to:"/contact",className:"text-indigo-600 hover:text-indigo-700 underline",children:"contact page"}),"."]})]})]})})]});var Dx={};function p4(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var g4=Object.defineProperty,v4=(t,e,n)=>e in t?g4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Mx=(t,e,n)=>v4(t,typeof e!="symbol"?e+"":e,n);let In=class{constructor(){Mx(this,"_locking"),Mx(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(r=>e=()=>{this._locks-=1,r()}),i=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),i}};function Ht(t,e){if(!t)throw new Error(e)}const y4=34028234663852886e22,b4=-34028234663852886e22,S4=4294967295,T4=2147483647,x4=-2147483648;function Wd(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>T4||t<x4)throw new Error("invalid int 32: "+t)}function Wg(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>S4||t<0)throw new Error("invalid uint 32: "+t)}function wk(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>y4||t<b4))throw new Error("invalid float 32: "+t)}const Ck=Symbol("@bufbuild/protobuf/enum-type");function w4(t){const e=t[Ck];return Ht(e,"missing enum type on enum object"),e}function Ek(t,e,n,i){t[Ck]=kk(e,n.map(r=>({no:r.no,name:r.name,localName:t[r.no]})))}function kk(t,e,n){const i=Object.create(null),r=Object.create(null),a=[];for(const c of e){const l=Rk(c);a.push(l),i[c.name]=l,r[c.no]=l}return{typeName:t,values:a,findName(c){return i[c]},findNumber(c){return r[c]}}}function C4(t,e,n){const i={};for(const r of e){const a=Rk(r);i[a.localName]=a.no,i[a.no]=a.localName}return Ek(i,t,e),i}function Rk(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class D0{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const i=this.getType(),r=i.runtime.bin,a=r.makeReadOptions(n);return r.readMessage(this,a.readerFactory(e),e.byteLength,a),this}fromJson(e,n){const i=this.getType(),r=i.runtime.json,a=r.makeReadOptions(n);return r.readMessage(i,e,a,this),this}fromJsonString(e,n){let i;try{i=JSON.parse(e)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(i,n)}toBinary(e){const n=this.getType(),i=n.runtime.bin,r=i.makeWriteOptions(e),a=r.writerFactory();return i.writeMessage(this,a,r),a.finish()}toJson(e){const n=this.getType(),i=n.runtime.json,r=i.makeWriteOptions(e);return i.writeMessage(this,r)}toJsonString(e){var n;const i=this.toJson(e);return JSON.stringify(i,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function E4(t,e,n,i){var r;const a=(r=i?.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),c={[a]:function(l){t.util.initFields(this),t.util.initPartial(l,this)}}[a];return Object.setPrototypeOf(c.prototype,new D0),Object.assign(c,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(l,d){return new c().fromBinary(l,d)},fromJson(l,d){return new c().fromJson(l,d)},fromJsonString(l,d){return new c().fromJsonString(l,d)},equals(l,d){return t.util.equals(c,l,d)}}),c}function k4(){let t=0,e=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Up(t,e,n){for(let a=0;a<28;a=a+7){const c=t>>>a,l=!(!(c>>>7)&&e==0),d=(l?c|128:c)&255;if(n.push(d),!l)return}const i=t>>>28&15|(e&7)<<4,r=e>>3!=0;if(n.push((r?i|128:i)&255),!!r){for(let a=3;a<31;a=a+7){const c=e>>>a,l=!!(c>>>7),d=(l?c|128:c)&255;if(n.push(d),!l)return}n.push(e>>>31&1)}}const $d=4294967296;function Ox(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let i=0,r=0;function a(c,l){const d=Number(t.slice(c,l));r*=n,i=i*n+d,i>=$d&&(r=r+(i/$d|0),i=i%$d)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),e?Pk(i,r):M0(i,r)}function R4(t,e){let n=M0(t,e);const i=n.hi&2147483648;i&&(n=Pk(n.lo,n.hi));const r=Ak(n.lo,n.hi);return i?"-"+r:r}function Ak(t,e){if({lo:t,hi:e}=A4(t,e),e<=2097151)return String($d*e+t);const n=t&16777215,i=(t>>>24|e<<8)&16777215,r=e>>16&65535;let a=n+i*6777216+r*6710656,c=i+r*8147497,l=r*2;const d=1e7;return a>=d&&(c+=Math.floor(a/d),a%=d),c>=d&&(l+=Math.floor(c/d),c%=d),l.toString()+Nx(c)+Nx(a)}function A4(t,e){return{lo:t>>>0,hi:e>>>0}}function M0(t,e){return{lo:t|0,hi:e|0}}function Pk(t,e){return e=~e,t?t=~t+1:e+=1,M0(t,e)}const Nx=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Ix(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function P4(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function _4(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof Dx!="object"||Dx.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),a=BigInt("9223372036854775807"),c=BigInt("0"),l=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(d){const f=typeof d=="bigint"?d:BigInt(d);if(f>a||f<r)throw new Error("int64 invalid: ".concat(d));return f},uParse(d){const f=typeof d=="bigint"?d:BigInt(d);if(f>l||f<c)throw new Error("uint64 invalid: ".concat(d));return f},enc(d){return t.setBigInt64(0,this.parse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(d){return t.setBigInt64(0,this.uParse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(d,f){return t.setInt32(0,d,!0),t.setInt32(4,f,!0),t.getBigInt64(0,!0)},uDec(d,f){return t.setInt32(0,d,!0),t.setInt32(4,f,!0),t.getBigUint64(0,!0)}}}const n=r=>Ht(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),i=r=>Ht(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),Ox(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),Ox(r)},dec(r,a){return R4(r,a)},uDec(r,a){return Ak(r,a)}}}const Mt=_4();var xe;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(xe||(xe={}));var _s;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(_s||(_s={}));function vs(t,e,n){if(e===n)return!0;if(t==xe.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}switch(t){case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return e==n}return!1}function Ko(t,e){switch(t){case xe.BOOL:return!1;case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return e==0?Mt.zero:"0";case xe.DOUBLE:case xe.FLOAT:return 0;case xe.BYTES:return new Uint8Array(0);case xe.STRING:return"";default:return 0}}function _k(t,e){switch(t){case xe.BOOL:return e===!1;case xe.STRING:return e==="";case xe.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var Qt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Qt||(Qt={}));class D4{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Wg(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Wd(e),Ix(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){wk(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Wg(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Wd(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Wd(e),e=(e<<1^e>>31)>>>0,Ix(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=Mt.enc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=Mt.uEnc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=Mt.enc(e);return Up(n.lo,n.hi,this.buf),this}sint64(e){let n=Mt.enc(e),i=n.hi>>31,r=n.lo<<1^i,a=(n.hi<<1|n.lo>>>31)^i;return Up(r,a,this.buf),this}uint64(e){let n=Mt.uEnc(e);return Up(n.lo,n.hi,this.buf),this}}class M4{constructor(e,n){this.varint64=k4,this.uint32=P4,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,i=e&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(e,n){let i=this.pos;switch(e){case Qt.Varint:for(;this.buf[this.pos++]&128;);break;case Qt.Bit64:this.pos+=4;case Qt.Bit32:this.pos+=4;break;case Qt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Qt.StartGroup:for(;;){const[a,c]=this.tag();if(c===Qt.EndGroup){if(n!==void 0&&a!==n)throw new Error("invalid end group tag");break}this.skip(c,a)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Mt.dec(...this.varint64())}uint64(){return Mt.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),i=-(e&1);return e=(e>>>1|(n&1)<<31)^i,n=n>>>1^i,Mt.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Mt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Mt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function O4(t,e,n,i){let r;return{typeName:e,extendee:n,get field(){if(!r){const a=typeof i=="function"?i():i;a.name=e.split(".").pop(),a.jsonName="[".concat(e,"]"),r=t.util.newFieldList([a]).list()[0]}return r},runtime:t}}function Dk(t){const e=t.field.localName,n=Object.create(null);return n[e]=N4(t),[n,()=>n[e]]}function N4(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Ko(e.T,e.L);case"message":const n=e.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function I4(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let Or="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),qf=[];for(let t=0;t<Or.length;t++)qf[Or[t].charCodeAt(0)]=t;qf[45]=Or.indexOf("+");qf[95]=Or.indexOf("/");const Mk={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),i=0,r=0,a,c=0;for(let l=0;l<t.length;l++){if(a=qf[t.charCodeAt(l)],a===void 0)switch(t[l]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:c=a,r=1;break;case 1:n[i++]=c<<2|(a&48)>>4,c=a,r=2;break;case 2:n[i++]=(c&15)<<4|(a&60)>>2,c=a,r=3;break;case 3:n[i++]=(c&3)<<6|a,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(t){let e="",n=0,i,r=0;for(let a=0;a<t.length;a++)switch(i=t[a],n){case 0:e+=Or[i>>2],r=(i&3)<<4,n=1;break;case 1:e+=Or[r|i>>4],r=(i&15)<<2,n=2;break;case 2:e+=Or[r|i>>6],e+=Or[i&63],n=0;break}return n&&(e+=Or[r],e+="=",n==1&&(e+="=")),e}};function U4(t,e,n){Nk(e,t);const i=e.runtime.bin.makeReadOptions(n),r=I4(t.getType().runtime.bin.listUnknownFields(t),e.field),[a,c]=Dk(e);for(const l of r)e.runtime.bin.readField(a,i.readerFactory(l.data),e.field,l.wireType,i);return c()}function L4(t,e,n,i){Nk(e,t);const r=e.runtime.bin.makeReadOptions(i),a=e.runtime.bin.makeWriteOptions(i);if(Ok(t,e)){const f=t.getType().runtime.bin.listUnknownFields(t).filter(m=>m.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const m of f)t.getType().runtime.bin.onUnknownField(t,m.no,m.wireType,m.data)}const c=a.writerFactory();let l=e.field;!l.opt&&!l.repeated&&(l.kind=="enum"||l.kind=="scalar")&&(l=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(l,n,c,a);const d=r.readerFactory(c.finish());for(;d.pos<d.len;){const[f,m]=d.tag(),p=d.skip(m,f);t.getType().runtime.bin.onUnknownField(t,f,m,p)}}function Ok(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(i=>i.no==e.field.no)}function Nk(t,e){Ht(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function Ik(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!_k(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function Ux(t,e){const n=t.localName,i=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=i?t.T.values[0].no:void 0;break;case"scalar":e[n]=i?Ko(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function Nr(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(D0.prototype).every(i=>i in t&&typeof t[i]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function Uk(t,e){return Nr(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}xe.DOUBLE,xe.FLOAT,xe.INT64,xe.UINT64,xe.INT32,xe.UINT32,xe.BOOL,xe.STRING,xe.BYTES;const Lx={ignoreUnknownFields:!1},jx={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function j4(t){return t?Object.assign(Object.assign({},Lx),t):Lx}function B4(t){return t?Object.assign(Object.assign({},jx),t):jx}const bf=Symbol(),Xd=Symbol();function F4(){return{makeReadOptions:j4,makeWriteOptions:B4,readMessage(t,e,n,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat($i(e)));i=i??new t;const r=new Map,a=n.typeRegistry;for(const[c,l]of Object.entries(e)){const d=t.fields.findJsonName(c);if(d){if(d.oneof){if(l===null&&d.kind=="scalar")continue;const f=r.get(d.oneof);if(f!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(d.oneof.name,'" present: "').concat(f,'", "').concat(c,'"'));r.set(d.oneof,c)}Bx(i,l,d,n,t)}else{let f=!1;if(a?.findExtension&&c.startsWith("[")&&c.endsWith("]")){const m=a.findExtension(c.substring(1,c.length-1));if(m&&m.extendee.typeName==t.typeName){f=!0;const[p,v]=Dk(m);Bx(p,l,m.field,n,m),L4(i,m,v(),n)}}if(!f&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(c,'" is unknown'))}}return i},writeMessage(t,e){const n=t.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!Ik(r,t)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!z4(r))continue}const c=r.oneof?t[r.oneof.localName].value:t[r.localName],l=Fx(r,c,e);l!==void 0&&(i[e.useProtoFieldName?r.name:r.jsonName]=l)}const a=e.typeRegistry;if(a?.findExtensionFor)for(const c of n.runtime.bin.listUnknownFields(t)){const l=a.findExtensionFor(n.typeName,c.no);if(l&&Ok(t,l)){const d=U4(t,l,e),f=Fx(l.field,d,e);f!==void 0&&(i[l.field.jsonName]=f)}}}catch(a){const c=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return i},readScalar(t,e,n){return Ml(t,e,n??_s.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||_k(t,e)))return Zd(t,e)},debug:$i}}function $i(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function Bx(t,e,n,i,r){let a=n.localName;if(n.repeated){if(Ht(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat($i(e)));const c=t[a];for(const l of e){if(l===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat($i(l)));switch(n.kind){case"message":c.push(n.T.fromJson(l,i));break;case"enum":const d=Lp(n.T,l,i.ignoreUnknownFields,!0);d!==Xd&&c.push(d);break;case"scalar":try{c.push(Ml(n.T,l,n.L,!0))}catch(f){let m="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat($i(l));throw f instanceof Error&&f.message.length>0&&(m+=": ".concat(f.message)),new Error(m)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat($i(e)));const c=t[a];for(const[l,d]of Object.entries(e)){if(d===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let f;try{f=V4(n.K,l)}catch(m){let p="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat($i(e));throw m instanceof Error&&m.message.length>0&&(p+=": ".concat(m.message)),new Error(p)}switch(n.V.kind){case"message":c[f]=n.V.T.fromJson(d,i);break;case"enum":const m=Lp(n.V.T,d,i.ignoreUnknownFields,!0);m!==Xd&&(c[f]=m);break;case"scalar":try{c[f]=Ml(n.V.T,d,_s.BIGINT,!0)}catch(p){let v="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat($i(e));throw p instanceof Error&&p.message.length>0&&(v+=": ".concat(p.message)),new Error(v)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:a},a="value"),n.kind){case"message":const c=n.T;if(e===null&&c.typeName!="google.protobuf.Value")return;let l=t[a];Nr(l)?l.fromJson(e,i):(t[a]=l=c.fromJson(e,i),c.fieldWrapper&&!n.oneof&&(t[a]=c.fieldWrapper.unwrapField(l)));break;case"enum":const d=Lp(n.T,e,i.ignoreUnknownFields,!1);switch(d){case bf:Ux(n,t);break;case Xd:break;default:t[a]=d;break}break;case"scalar":try{const f=Ml(n.T,e,n.L,!1);switch(f){case bf:Ux(n,t);break;default:t[a]=f;break}}catch(f){let m="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat($i(e));throw f instanceof Error&&f.message.length>0&&(m+=": ".concat(f.message)),new Error(m)}break}}function V4(t,e){if(t===xe.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Ml(t,e,_s.BIGINT,!0).toString()}function Ml(t,e,n,i){if(e===null)return i?Ko(t,n):bf;switch(t){case xe.DOUBLE:case xe.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==xe.FLOAT&&wk(r),r;case xe.INT32:case xe.FIXED32:case xe.SFIXED32:case xe.SINT32:case xe.UINT32:let a;if(typeof e=="number"?a=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(a=Number(e)),a===void 0)break;return t==xe.UINT32||t==xe.FIXED32?Wg(a):Wd(a),a;case xe.INT64:case xe.SFIXED64:case xe.SINT64:if(typeof e!="number"&&typeof e!="string")break;const c=Mt.parse(e);return n?c.toString():c;case xe.FIXED64:case xe.UINT64:if(typeof e!="number"&&typeof e!="string")break;const l=Mt.uParse(e);return n?l.toString():l;case xe.BOOL:if(typeof e!="boolean")break;return e;case xe.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case xe.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return Mk.dec(e)}throw new Error}function Lp(t,e,n,i){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:i?t.values[0].no:bf;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r!==void 0)return r.no;if(n)return Xd;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat($i(e)))}function z4(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function Fx(t,e,n){if(t.kind=="map"){Ht(typeof e=="object"&&e!=null);const i={},r=Object.entries(e);switch(t.V.kind){case"scalar":for(const[c,l]of r)i[c.toString()]=Zd(t.V.T,l);break;case"message":for(const[c,l]of r)i[c.toString()]=l.toJson(n);break;case"enum":const a=t.V.T;for(const[c,l]of r)i[c.toString()]=jp(a,l,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?i:void 0}if(t.repeated){Ht(Array.isArray(e));const i=[];switch(t.kind){case"scalar":for(let r=0;r<e.length;r++)i.push(Zd(t.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)i.push(jp(t.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)i.push(e[r].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(t.kind){case"scalar":return Zd(t.T,e);case"enum":return jp(t.T,e,n.enumAsInteger);case"message":return Uk(t.T,e).toJson(n)}}function jp(t,e,n){var i;if(Ht(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=t.findNumber(e);return(i=r?.name)!==null&&i!==void 0?i:e}function Zd(t,e){switch(t){case xe.INT32:case xe.SFIXED32:case xe.SINT32:case xe.FIXED32:case xe.UINT32:return Ht(typeof e=="number"),e;case xe.FLOAT:case xe.DOUBLE:return Ht(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case xe.STRING:return Ht(typeof e=="string"),e;case xe.BOOL:return Ht(typeof e=="boolean"),e;case xe.UINT64:case xe.FIXED64:case xe.INT64:case xe.SFIXED64:case xe.SINT64:return Ht(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case xe.BYTES:return Ht(e instanceof Uint8Array),Mk.enc(e)}}const yo=Symbol("@bufbuild/protobuf/unknown-fields"),Vx={readUnknownFields:!0,readerFactory:t=>new M4(t)},zx={writeUnknownFields:!0,writerFactory:()=>new D4};function H4(t){return t?Object.assign(Object.assign({},Vx),t):Vx}function q4(t){return t?Object.assign(Object.assign({},zx),t):zx}function K4(){return{makeReadOptions:H4,makeWriteOptions:q4,listUnknownFields(t){var e;return(e=t[yo])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[yo]},writeUnknownFields(t,e){const i=t[yo];if(i)for(const r of i)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(t,e,n,i){const r=t;Array.isArray(r[yo])||(r[yo]=[]),r[yo].push({no:e,wireType:n,data:i})},readMessage(t,e,n,i,r){const a=t.getType(),c=r?e.len:e.pos+n;let l,d;for(;e.pos<c&&([l,d]=e.tag(),!(r===!0&&d==Qt.EndGroup));){const f=a.fields.find(l);if(!f){const m=e.skip(d,l);i.readUnknownFields&&this.onUnknownField(t,l,d,m);continue}Hx(t,e,f,d,i)}if(r&&(d!=Qt.EndGroup||l!==n))throw new Error("invalid end group tag")},readField:Hx,writeMessage(t,e,n){const i=t.getType();for(const r of i.fields.byNumber()){if(!Ik(r,t)){if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));continue}const a=r.oneof?t[r.oneof.localName].value:t[r.localName];qx(r,a,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,i){e!==void 0&&qx(t,e,n,i)}}}function Hx(t,e,n,i,r){let{repeated:a,localName:c}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=c&&delete t.value,t.case=c,c="value"),n.kind){case"scalar":case"enum":const l=n.kind=="enum"?xe.INT32:n.T;let d=Sf;if(n.kind=="scalar"&&n.L>0&&(d=Y4),a){let v=t[c];if(i==Qt.LengthDelimited&&l!=xe.STRING&&l!=xe.BYTES){let x=e.uint32()+e.pos;for(;e.pos<x;)v.push(d(e,l))}else v.push(d(e,l))}else t[c]=d(e,l);break;case"message":const f=n.T;a?t[c].push(Jd(e,new f,r,n)):Nr(t[c])?Jd(e,t[c],r,n):(t[c]=Jd(e,new f,r,n),f.fieldWrapper&&!n.oneof&&!n.repeated&&(t[c]=f.fieldWrapper.unwrapField(t[c])));break;case"map":let[m,p]=G4(n,e,r);t[c][m]=p;break}}function Jd(t,e,n,i){const r=e.getType().runtime.bin,a=i?.delimited;return r.readMessage(e,t,a?i.no:t.uint32(),n,a),e}function G4(t,e,n){const i=e.uint32(),r=e.pos+i;let a,c;for(;e.pos<r;){const[l]=e.tag();switch(l){case 1:a=Sf(e,t.K);break;case 2:switch(t.V.kind){case"scalar":c=Sf(e,t.V.T);break;case"enum":c=e.int32();break;case"message":c=Jd(e,new t.V.T,n,void 0);break}break}}if(a===void 0&&(a=Ko(t.K,_s.BIGINT)),typeof a!="string"&&typeof a!="number"&&(a=a.toString()),c===void 0)switch(t.V.kind){case"scalar":c=Ko(t.V.T,_s.BIGINT);break;case"enum":c=t.V.T.values[0].no;break;case"message":c=new t.V.T;break}return[a,c]}function Y4(t,e){const n=Sf(t,e);return typeof n=="bigint"?n.toString():n}function Sf(t,e){switch(e){case xe.STRING:return t.string();case xe.BOOL:return t.bool();case xe.DOUBLE:return t.double();case xe.FLOAT:return t.float();case xe.INT32:return t.int32();case xe.INT64:return t.int64();case xe.UINT64:return t.uint64();case xe.FIXED64:return t.fixed64();case xe.BYTES:return t.bytes();case xe.FIXED32:return t.fixed32();case xe.SFIXED32:return t.sfixed32();case xe.SFIXED64:return t.sfixed64();case xe.SINT64:return t.sint64();case xe.UINT32:return t.uint32();case xe.SINT32:return t.sint32()}}function qx(t,e,n,i){Ht(e!==void 0);const r=t.repeated;switch(t.kind){case"scalar":case"enum":let a=t.kind=="enum"?xe.INT32:t.T;if(r)if(Ht(Array.isArray(e)),t.packed)$4(n,a,t.no,e);else for(const c of e)Ol(n,a,t.no,c);else Ol(n,a,t.no,e);break;case"message":if(r){Ht(Array.isArray(e));for(const c of e)Kx(n,i,t,c)}else Kx(n,i,t,e);break;case"map":Ht(typeof e=="object"&&e!=null);for(const[c,l]of Object.entries(e))W4(n,i,t,c,l);break}}function W4(t,e,n,i,r){t.tag(n.no,Qt.LengthDelimited),t.fork();let a=i;switch(n.K){case xe.INT32:case xe.FIXED32:case xe.UINT32:case xe.SFIXED32:case xe.SINT32:a=Number.parseInt(i);break;case xe.BOOL:Ht(i=="true"||i=="false"),a=i=="true";break}switch(Ol(t,n.K,1,a),n.V.kind){case"scalar":Ol(t,n.V.T,2,r);break;case"enum":Ol(t,xe.INT32,2,r);break;case"message":Ht(r!==void 0),t.tag(2,Qt.LengthDelimited).bytes(r.toBinary(e));break}t.join()}function Kx(t,e,n,i){const r=Uk(n.T,i);n.delimited?t.tag(n.no,Qt.StartGroup).raw(r.toBinary(e)).tag(n.no,Qt.EndGroup):t.tag(n.no,Qt.LengthDelimited).bytes(r.toBinary(e))}function Ol(t,e,n,i){Ht(i!==void 0);let[r,a]=Lk(e);t.tag(n,r)[a](i)}function $4(t,e,n,i){if(!i.length)return;t.tag(n,Qt.LengthDelimited).fork();let[,r]=Lk(e);for(let a=0;a<i.length;a++)t[r](i[a]);t.join()}function Lk(t){let e=Qt.Varint;switch(t){case xe.BYTES:case xe.STRING:e=Qt.LengthDelimited;break;case xe.DOUBLE:case xe.FIXED64:case xe.SFIXED64:e=Qt.Bit64;break;case xe.FIXED32:case xe.SFIXED32:case xe.FLOAT:e=Qt.Bit32;break}const n=xe[t].toLowerCase();return[e,n]}function X4(){return{setEnumType:Ek,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const i of n.fields.byMember()){const r=i.localName,a=e,c=t;if(c[r]!=null)switch(i.kind){case"oneof":const l=c[r].case;if(l===void 0)continue;const d=i.findField(l);let f=c[r].value;d&&d.kind=="message"&&!Nr(f,d.T)?f=new d.T(f):d&&d.kind==="scalar"&&d.T===xe.BYTES&&(f=yl(f)),a[r]={case:l,value:f};break;case"scalar":case"enum":let m=c[r];i.T===xe.BYTES&&(m=i.repeated?m.map(yl):yl(m)),a[r]=m;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===xe.BYTES)for(const[S,x]of Object.entries(c[r]))a[r][S]=yl(x);else Object.assign(a[r],c[r]);break;case"message":const v=i.V.T;for(const S of Object.keys(c[r])){let x=c[r][S];v.fieldWrapper||(x=new v(x)),a[r][S]=x}break}break;case"message":const p=i.T;if(i.repeated)a[r]=c[r].map(v=>Nr(v,p)?v:new p(v));else{const v=c[r];p.fieldWrapper?p.typeName==="google.protobuf.BytesValue"?a[r]=yl(v):a[r]=v:a[r]=Nr(v,p)?v:new p(v)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(i=>{const r=e[i.localName],a=n[i.localName];if(i.repeated){if(r.length!==a.length)return!1;switch(i.kind){case"message":return r.every((c,l)=>i.T.equals(c,a[l]));case"scalar":return r.every((c,l)=>vs(i.T,c,a[l]));case"enum":return r.every((c,l)=>vs(xe.INT32,c,a[l]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let c=r,l=a;return i.T.fieldWrapper&&(c!==void 0&&!Nr(c)&&(c=i.T.fieldWrapper.wrapField(c)),l!==void 0&&!Nr(l)&&(l=i.T.fieldWrapper.wrapField(l))),i.T.equals(c,l);case"enum":return vs(xe.INT32,r,a);case"scalar":return vs(i.T,r,a);case"oneof":if(r.case!==a.case)return!1;const d=i.findField(r.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(r.value,a.value);case"enum":return vs(xe.INT32,r.value,a.value);case"scalar":return vs(d.T,r.value,a.value)}throw new Error("oneof cannot contain ".concat(d.kind));case"map":const f=Object.keys(r).concat(Object.keys(a));switch(i.V.kind){case"message":const m=i.V.T;return f.every(v=>m.equals(r[v],a[v]));case"enum":return f.every(v=>vs(xe.INT32,r[v],a[v]));case"scalar":const p=i.V.T;return f.every(v=>vs(p,r[v],a[v]))}break}})},clone(t){const e=t.getType(),n=new e,i=n;for(const r of e.fields.byMember()){const a=t[r.localName];let c;if(r.repeated)c=a.map(Pd);else if(r.kind=="map"){c=i[r.localName];for(const[l,d]of Object.entries(a))c[l]=Pd(d)}else r.kind=="oneof"?c=r.findField(a.case)?{case:a.case,value:Pd(a.value)}:{case:void 0}:c=Pd(a);i[r.localName]=c}for(const r of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}}function Pd(t){if(t===void 0)return t;if(Nr(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function yl(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Z4(t,e,n){return{syntax:t,json:F4(),bin:K4(),util:Object.assign(Object.assign({},X4()),{newFieldList:e,initFields:n}),makeMessageType(i,r,a){return E4(this,i,r,a)},makeEnum:C4,makeEnumType:kk,getEnumType:w4,makeExtension(i,r,a){return O4(this,i,r,a)}}}class J4{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,e.push(n)):e.push(i)}return this.members}}function jk(t,e){const n=Bk(t);return e?n:r6(i6(n))}function Q4(t){return jk(t,!1)}const e6=Bk;function Bk(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let r=t.charAt(i);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const t6=new Set(["constructor","toString","toJSON","valueOf"]),n6=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Fk=t=>"".concat(t,"$"),i6=t=>n6.has(t)?Fk(t):t,r6=t=>t6.has(t)?Fk(t):t;class s6{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Q4(e)}addField(e){Ht(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function a6(t,e){var n,i,r,a,c,l;const d=[];let f;for(const m of typeof t=="function"?t():t){const p=m;if(p.localName=jk(m.name,m.oneof!==void 0),p.jsonName=(n=m.jsonName)!==null&&n!==void 0?n:e6(m.name),p.repeated=(i=m.repeated)!==null&&i!==void 0?i:!1,m.kind=="scalar"&&(p.L=(r=m.L)!==null&&r!==void 0?r:_s.BIGINT),p.delimited=(a=m.delimited)!==null&&a!==void 0?a:!1,p.req=(c=m.req)!==null&&c!==void 0?c:!1,p.opt=(l=m.opt)!==null&&l!==void 0?l:!1,m.packed===void 0&&(p.packed=m.kind=="enum"||m.kind=="scalar"&&m.T!=xe.BYTES&&m.T!=xe.STRING),m.oneof!==void 0){const v=typeof m.oneof=="string"?m.oneof:m.oneof.name;(!f||f.name!=v)&&(f=new s6(v)),p.oneof=f,f.addField(p)}d.push(p)}return d}const ue=Z4("proto3",t=>new J4(t,e=>a6(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,i=t;if(e.repeated){i[n]=[];continue}switch(e.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Ko(e.T,e.L);break}}});class qn extends D0{constructor(e){super(),this.seconds=Mt.zero,this.nanos=0,ue.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(ue.json.debug(e)));const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Mt.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return qn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new qn({seconds:Mt.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new qn().fromBinary(e,n)}static fromJson(e,n){return new qn().fromJson(e,n)}static fromJsonString(e,n){return new qn().fromJsonString(e,n)}static equals(e,n){return ue.util.equals(qn,e,n)}}qn.runtime=ue;qn.typeName="google.protobuf.Timestamp";qn.fields=ue.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const o6=ue.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:qn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:c6,repeated:!0},{no:5,name:"events",kind:"message",T:u6,repeated:!0}]),c6=ue.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:l6,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),l6=ue.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:qn},{no:3,name:"value",kind:"scalar",T:2}]),u6=ue.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:qn},{no:7,name:"normalized_end_timestamp",kind:"message",T:qn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),Vk=ue.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),Ni=ue.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),an=ue.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),O0=ue.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),Rl=ue.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),Hl=ue.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),Ui=ue.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),bo=ue.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),d6=ue.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Sn=ue.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),Kf=ue.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Tf,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:eR}]),Tf=ue.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),f6=ue.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:ue.getEnumType(an),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),ya=ue.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ue.getEnumType(Io)},{no:4,name:"tracks",kind:"message",T:Ro,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:f6},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:ue.getEnumType(ba)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:ue.getEnumType(Ui)},{no:18,name:"kind_details",kind:"enum",T:ue.getEnumType(h6),repeated:!0}]),Io=ue.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ba=ue.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),h6=ue.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),ii=ue.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),m6=ue.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:ma,repeated:!0}]),Ro=ue.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:ue.getEnumType(Ni)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:ue.getEnumType(an)},{no:10,name:"layers",kind:"message",T:ma,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:m6,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:ue.getEnumType(ii)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:eR},{no:19,name:"audio_features",kind:"enum",T:ue.getEnumType(Sn),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:ue.getEnumType(Vk)}]),ma=ue.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:ue.getEnumType(O0)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),zn=ue.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:ue.getEnumType(tt)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Hk,oneof:"value"},{no:3,name:"speaker",kind:"message",T:p6,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:qk,oneof:"value"},{no:7,name:"transcription",kind:"message",T:g6,oneof:"value"},{no:8,name:"metrics",kind:"message",T:o6,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:$g,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Kk,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Gk,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:Yk,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Zg,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Jg,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Qg,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),tt=ue.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),p6=ue.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:zk,repeated:!0}]),zk=ue.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),Hk=ue.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),qk=ue.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),g6=ue.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:v6,repeated:!0}]),v6=ue.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),$g=ue.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Kk=ue.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),Gk=ue.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),Yk=ue.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:Wk,oneof:"value"}]),Wk=ue.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),$k=ue.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),Xk=ue.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:ue.getEnumType(Zk)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),Zk=ue.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),y6=ue.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:ue.getEnumType(Jk)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),Jk=ue.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),Qk=ue.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:Gx},{no:2,name:"screen",kind:"message",T:Gx},{no:3,name:"resume_connection",kind:"enum",T:ue.getEnumType(Hl)},{no:4,name:"disabled_codecs",kind:"message",T:b6},{no:5,name:"force_relay",kind:"enum",T:ue.getEnumType(Hl)}]),Gx=ue.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:ue.getEnumType(Hl)}]),b6=ue.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Tf,repeated:!0},{no:2,name:"publish",kind:"message",T:Tf,repeated:!0}]),eR=ue.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Xg=ue.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),tR=ue.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:ue.getEnumType(Xg)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),nR=ue.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Zg=ue.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:ue.getEnumType(ii)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:tR,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:nR,oneof:"content_header"}],{localName:"DataStream_Header"}),Jg=ue.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Qg=ue.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),Ii=ue.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),ev=ue.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),S6=ue.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),T6=ue.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:Sa,oneof:"message"},{no:2,name:"answer",kind:"message",T:Sa,oneof:"message"},{no:3,name:"trickle",kind:"message",T:N0,oneof:"message"},{no:4,name:"add_track",kind:"message",T:nv,oneof:"message"},{no:5,name:"mute",kind:"message",T:I0,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Gf,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:iR,oneof:"message"},{no:8,name:"leave",kind:"message",T:Yf,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:sR,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:lR,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:uR,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Wi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:aR,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:hR,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:rR,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:k6,oneof:"message"}]),Yx=ue.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:x6,oneof:"message"},{no:2,name:"answer",kind:"message",T:Sa,oneof:"message"},{no:3,name:"offer",kind:"message",T:Sa,oneof:"message"},{no:4,name:"trickle",kind:"message",T:N0,oneof:"message"},{no:5,name:"update",kind:"message",T:E6,oneof:"message"},{no:6,name:"track_published",kind:"message",T:U0,oneof:"message"},{no:8,name:"leave",kind:"message",T:Yf,oneof:"message"},{no:9,name:"mute",kind:"message",T:I0,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:R6,oneof:"message"},{no:11,name:"room_update",kind:"message",T:A6,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:_6,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:M6,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:N6,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:I6,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:C6,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:w6,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:L6,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:F6,oneof:"message"},{no:22,name:"request_response",kind:"message",T:V6,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:z6,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:U6,oneof:"message"}]),tv=ue.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),nv=ue.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:ue.getEnumType(Ni)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:ue.getEnumType(an)},{no:9,name:"layers",kind:"message",T:ma,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:tv,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:ue.getEnumType(ii)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:ue.getEnumType(Vk)},{no:17,name:"audio_features",kind:"enum",T:ue.getEnumType(Sn),repeated:!0}]),N0=ue.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:ue.getEnumType(Ii)},{no:3,name:"final",kind:"scalar",T:8}]),I0=ue.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),x6=ue.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Kf},{no:2,name:"participant",kind:"message",T:ya},{no:3,name:"other_participants",kind:"message",T:ya,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:oR,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:Qk},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Xk},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Tf,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),w6=ue.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:oR,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:Qk},{no:3,name:"server_info",kind:"message",T:Xk},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),U0=ue.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Ro}]),C6=ue.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Sa=ue.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13}]),E6=ue.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:ya,repeated:!0}]),Gf=ue.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:$k,repeated:!0}]),iR=ue.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:ue.getEnumType(O0)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),rR=ue.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:ue.getEnumType(Sn),repeated:!0}]),k6=ue.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),Yf=ue.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:ue.getEnumType(Ui)},{no:3,name:"action",kind:"enum",T:ue.getEnumType(Uo)},{no:4,name:"regions",kind:"message",T:j6}]),Uo=ue.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),sR=ue.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:ma,repeated:!0}]),aR=ue.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),oR=ue.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),R6=ue.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:zk,repeated:!0}]),A6=ue.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Kf}]),P6=ue.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:ue.getEnumType(Rl)},{no:3,name:"score",kind:"scalar",T:2}]),_6=ue.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:P6,repeated:!0}]),D6=ue.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:ue.getEnumType(ev)}]),M6=ue.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:D6,repeated:!0}]),L0=ue.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:ue.getEnumType(O0)},{no:2,name:"enabled",kind:"scalar",T:8}]),O6=ue.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:L0,repeated:!0}]),N6=ue.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:L0,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:O6,repeated:!0}]),cR=ue.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),lR=ue.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:cR,repeated:!0}]),I6=ue.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),U6=ue.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:Kf},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:ya},{no:4,name:"other_participants",kind:"message",T:ya,repeated:!0}]),uR=ue.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:Sa},{no:2,name:"subscription",kind:"message",T:Gf},{no:3,name:"publish_tracks",kind:"message",T:U0,repeated:!0},{no:4,name:"data_channels",kind:"message",T:fR,repeated:!0},{no:5,name:"offer",kind:"message",T:Sa},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:dR,repeated:!0}]),dR=ue.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),fR=ue.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:ue.getEnumType(Ii)}]),Wi=ue.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:ue.getEnumType(S6),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),hR=ue.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),L6=ue.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),j6=ue.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:B6,repeated:!0}]),B6=ue.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),F6=ue.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:ue.getEnumType(d6)}]),V6=ue.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:ue.getEnumType(j0)},{no:3,name:"message",kind:"scalar",T:9}]),j0=ue.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),z6=ue.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);function H6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qd={exports:{}},q6=Qd.exports,Wx;function K6(){return Wx||(Wx=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(q6,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],a={},c=null;function l(b,P){var k=b[P];if(typeof k.bind=="function")return k.bind(b);try{return Function.prototype.bind.call(k,b)}catch{return function(){return Function.prototype.apply.apply(k,[b,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(b){return b==="debug"&&(b="log"),typeof console===n?!1:b==="trace"&&i?d:console[b]!==void 0?l(console,b):console.log!==void 0?l(console,"log"):e}function m(){for(var b=this.getLevel(),P=0;P<r.length;P++){var k=r[P];this[k]=P<b?e:this.methodFactory(k,b,this.name)}if(this.log=this.debug,typeof console===n&&b<this.levels.SILENT)return"No console available for logging"}function p(b){return function(){typeof console!==n&&(m.call(this),this[b].apply(this,arguments))}}function v(b,P,k){return f(b)||p.apply(this,arguments)}function S(b,P){var k=this,O,N,I,D="loglevel";typeof b=="string"?D+=":"+b:typeof b=="symbol"&&(D=void 0);function B(oe){var fe=(r[oe]||"silent").toUpperCase();if(!(typeof window===n||!D)){try{window.localStorage[D]=fe;return}catch{}try{window.document.cookie=encodeURIComponent(D)+"="+fe+";"}catch{}}}function H(){var oe;if(!(typeof window===n||!D)){try{oe=window.localStorage[D]}catch{}if(typeof oe===n)try{var fe=window.document.cookie,ke=encodeURIComponent(D),Ae=fe.indexOf(ke+"=");Ae!==-1&&(oe=/^([^;]+)/.exec(fe.slice(Ae+ke.length+1))[1])}catch{}return k.levels[oe]===void 0&&(oe=void 0),oe}}function z(){if(!(typeof window===n||!D)){try{window.localStorage.removeItem(D)}catch{}try{window.document.cookie=encodeURIComponent(D)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function X(oe){var fe=oe;if(typeof fe=="string"&&k.levels[fe.toUpperCase()]!==void 0&&(fe=k.levels[fe.toUpperCase()]),typeof fe=="number"&&fe>=0&&fe<=k.levels.SILENT)return fe;throw new TypeError("log.setLevel() called with invalid level: "+oe)}k.name=b,k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.methodFactory=P||v,k.getLevel=function(){return I??N??O},k.setLevel=function(oe,fe){return I=X(oe),fe!==!1&&B(I),m.call(k)},k.setDefaultLevel=function(oe){N=X(oe),H()||k.setLevel(oe,!1)},k.resetLevel=function(){I=null,z(),m.call(k)},k.enableAll=function(oe){k.setLevel(k.levels.TRACE,oe)},k.disableAll=function(oe){k.setLevel(k.levels.SILENT,oe)},k.rebuild=function(){if(c!==k&&(O=X(c.getLevel())),m.call(k),c===k)for(var oe in a)a[oe].rebuild()},O=X(c?c.getLevel():"WARN");var ae=H();ae!=null&&(I=X(ae)),m.call(k)}c=new S,c.getLogger=function(P){if(typeof P!="symbol"&&typeof P!="string"||P==="")throw new TypeError("You must supply a name when creating a logger.");var k=a[P];return k||(k=a[P]=new S(P,c.methodFactory)),k};var x=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=x),c},c.getLoggers=function(){return a},c.default=c,c})}(Qd)),Qd.exports}var Wf=K6(),iv;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(iv||(iv={}));var Li;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Li||(Li={}));let ot=Wf.getLogger("livekit");Object.values(Li).map(t=>Wf.getLogger(t));ot.setDefaultLevel(iv.info);function Br(t){const e=Wf.getLogger(t);return e.setDefaultLevel(ot.getLevel()),e}const G6=Wf.getLogger("lk-e2ee"),bl=7e3,Y6=[0,300,4*300,9*300,16*300,bl,bl,bl,bl,bl];class W6{constructor(e){this._retryDelays=e!==void 0?[...e]:Y6}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function $6(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function K(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,e||[])).next())})}function $x(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ir(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $x=="function"?$x(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}var _d={exports:{}},Xx;function X6(){if(Xx)return _d.exports;Xx=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(D,B,H){return Function.prototype.apply.call(D,B,H)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:n=function(D){return Object.getOwnPropertyNames(D)};function i(I){console&&console.warn&&console.warn(I)}var r=Number.isNaN||function(D){return D!==D};function a(){a.init.call(this)}_d.exports=a,_d.exports.once=k,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(I){if(typeof I!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof I)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(I){if(typeof I!="number"||I<0||r(I))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+I+".");c=I}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||r(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this};function d(I){return I._maxListeners===void 0?a.defaultMaxListeners:I._maxListeners}a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(D){for(var B=[],H=1;H<arguments.length;H++)B.push(arguments[H]);var z=D==="error",X=this._events;if(X!==void 0)z=z&&X.error===void 0;else if(!z)return!1;if(z){var ae;if(B.length>0&&(ae=B[0]),ae instanceof Error)throw ae;var oe=new Error("Unhandled error."+(ae?" ("+ae.message+")":""));throw oe.context=ae,oe}var fe=X[D];if(fe===void 0)return!1;if(typeof fe=="function")e(fe,this,B);else for(var ke=fe.length,Ae=x(fe,ke),H=0;H<ke;++H)e(Ae[H],this,B);return!0};function f(I,D,B,H){var z,X,ae;if(l(B),X=I._events,X===void 0?(X=I._events=Object.create(null),I._eventsCount=0):(X.newListener!==void 0&&(I.emit("newListener",D,B.listener?B.listener:B),X=I._events),ae=X[D]),ae===void 0)ae=X[D]=B,++I._eventsCount;else if(typeof ae=="function"?ae=X[D]=H?[B,ae]:[ae,B]:H?ae.unshift(B):ae.push(B),z=d(I),z>0&&ae.length>z&&!ae.warned){ae.warned=!0;var oe=new Error("Possible EventEmitter memory leak detected. "+ae.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");oe.name="MaxListenersExceededWarning",oe.emitter=I,oe.type=D,oe.count=ae.length,i(oe)}return I}a.prototype.addListener=function(D,B){return f(this,D,B,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(D,B){return f(this,D,B,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(I,D,B){var H={fired:!1,wrapFn:void 0,target:I,type:D,listener:B},z=m.bind(H);return z.listener=B,H.wrapFn=z,z}a.prototype.once=function(D,B){return l(B),this.on(D,p(this,D,B)),this},a.prototype.prependOnceListener=function(D,B){return l(B),this.prependListener(D,p(this,D,B)),this},a.prototype.removeListener=function(D,B){var H,z,X,ae,oe;if(l(B),z=this._events,z===void 0)return this;if(H=z[D],H===void 0)return this;if(H===B||H.listener===B)--this._eventsCount===0?this._events=Object.create(null):(delete z[D],z.removeListener&&this.emit("removeListener",D,H.listener||B));else if(typeof H!="function"){for(X=-1,ae=H.length-1;ae>=0;ae--)if(H[ae]===B||H[ae].listener===B){oe=H[ae].listener,X=ae;break}if(X<0)return this;X===0?H.shift():b(H,X),H.length===1&&(z[D]=H[0]),z.removeListener!==void 0&&this.emit("removeListener",D,oe||B)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(D){var B,H,z;if(H=this._events,H===void 0)return this;if(H.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):H[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete H[D]),this;if(arguments.length===0){var X=Object.keys(H),ae;for(z=0;z<X.length;++z)ae=X[z],ae!=="removeListener"&&this.removeAllListeners(ae);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(B=H[D],typeof B=="function")this.removeListener(D,B);else if(B!==void 0)for(z=B.length-1;z>=0;z--)this.removeListener(D,B[z]);return this};function v(I,D,B){var H=I._events;if(H===void 0)return[];var z=H[D];return z===void 0?[]:typeof z=="function"?B?[z.listener||z]:[z]:B?P(z):x(z,z.length)}a.prototype.listeners=function(D){return v(this,D,!0)},a.prototype.rawListeners=function(D){return v(this,D,!1)},a.listenerCount=function(I,D){return typeof I.listenerCount=="function"?I.listenerCount(D):S.call(I,D)},a.prototype.listenerCount=S;function S(I){var D=this._events;if(D!==void 0){var B=D[I];if(typeof B=="function")return 1;if(B!==void 0)return B.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function x(I,D){for(var B=new Array(D),H=0;H<D;++H)B[H]=I[H];return B}function b(I,D){for(;D+1<I.length;D++)I[D]=I[D+1];I.pop()}function P(I){for(var D=new Array(I.length),B=0;B<D.length;++B)D[B]=I[B].listener||I[B];return D}function k(I,D){return new Promise(function(B,H){function z(ae){I.removeListener(D,X),H(ae)}function X(){typeof I.removeListener=="function"&&I.removeListener("error",z),B([].slice.call(arguments))}N(I,D,X,{once:!0}),D!=="error"&&O(I,z,{once:!0})})}function O(I,D,B){typeof I.on=="function"&&N(I,"error",D,B)}function N(I,D,B,H){if(typeof I.on=="function")H.once?I.once(D,B):I.on(D,B);else if(typeof I.addEventListener=="function")I.addEventListener(D,function z(X){H.once&&I.removeEventListener(D,z),B(X)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof I)}return _d.exports}var lr=X6();let mR=!0,pR=!0;function Al(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseFloat(i[n],10)}function Ra(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(c,l){if(c!==e)return r.apply(this,arguments);const d=f=>{const m=n(f);m&&(l.handleEvent?l.handleEvent(m):l(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,d),r.apply(this,[c,d])};const a=i.removeEventListener;i.removeEventListener=function(c,l){if(c!==e||!this._eventMap||!this._eventMap[e])return a.apply(this,arguments);if(!this._eventMap[e].has(l))return a.apply(this,arguments);const d=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,a.apply(this,[c,d])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function Z6(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(mR=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function J6(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(pR=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function gR(){if(typeof window=="object"){if(mR)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function B0(t,e){pR&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Q6(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Al(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Al(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Al(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Al(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Zx(t){return Object.prototype.toString.call(t)==="[object Object]"}function vR(t){return Zx(t)?Object.keys(t).reduce(function(e,n){const i=Zx(t[n]),r=i?vR(t[n]):t[n],a=i&&!Object.keys(r).length;return r===void 0||a?e:Object.assign(e,{[n]:r})},{}):t}function rv(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?rv(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(r=>{rv(t,t.get(r),n)})}))}function Jx(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const a=[];return t.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&a.push(c)}),a.forEach(c=>{t.forEach(l=>{l.type===i&&l.trackId===c.id&&rv(t,l,r)})}),r}const Qx=gR;function yR(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const d={};return Object.keys(l).forEach(f=>{if(f==="require"||f==="advanced"||f==="mediaSource")return;const m=typeof l[f]=="object"?l[f]:{ideal:l[f]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const p=function(v,S){return v?v+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(m.ideal!==void 0){d.optional=d.optional||[];let v={};typeof m.ideal=="number"?(v[p("min",f)]=m.ideal,d.optional.push(v),v={},v[p("max",f)]=m.ideal,d.optional.push(v)):(v[p("",f)]=m.ideal,d.optional.push(v))}m.exact!==void 0&&typeof m.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[p("",f)]=m.exact):["min","max"].forEach(v=>{m[v]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[p(v,f)]=m[v])})}),l.advanced&&(d.optional=(d.optional||[]).concat(l.advanced)),d},r=function(l,d){if(e.version>=61)return d(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const f=function(m,p,v){p in m&&!(v in m)&&(m[v]=m[p],delete m[p])};l=JSON.parse(JSON.stringify(l)),f(l.audio,"autoGainControl","googAutoGainControl"),f(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=i(l.audio)}if(l&&typeof l.video=="object"){let f=l.video.facingMode;f=f&&(typeof f=="object"?f:{ideal:f});const m=e.version<66;if(f&&(f.exact==="user"||f.exact==="environment"||f.ideal==="user"||f.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete l.video.facingMode;let p;if(f.exact==="environment"||f.ideal==="environment"?p=["back","rear"]:(f.exact==="user"||f.ideal==="user")&&(p=["front"]),p)return n.mediaDevices.enumerateDevices().then(v=>{v=v.filter(x=>x.kind==="videoinput");let S=v.find(x=>p.some(b=>x.label.toLowerCase().includes(b)));return!S&&v.length&&p.includes("back")&&(S=v[v.length-1]),S&&(l.video.deviceId=f.exact?{exact:S.deviceId}:{ideal:S.deviceId}),l.video=i(l.video),Qx("chrome: "+JSON.stringify(l)),d(l)})}l.video=i(l.video)}return Qx("chrome: "+JSON.stringify(l)),d(l)},a=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(l,d,f){r(l,m=>{n.webkitGetUserMedia(m,d,p=>{f&&f(a(p))})})};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return r(d,f=>l(f).then(m=>{if(f.audio&&!m.getAudioTracks().length||f.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(a(m))))}}}function bR(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function SR(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===r.track.id):a={track:r.track};const c=new Event("track");c.track=r.track,c.receiver=a,c.transceiver={receiver:a},c.streams=[i.stream],this.dispatchEvent(c)}),i.stream.getTracks().forEach(r=>{let a;t.RTCPeerConnection.prototype.getReceivers?a=this.getReceivers().find(l=>l.track&&l.track.id===r.id):a={track:r};const c=new Event("track");c.track=r,c.receiver=a,c.transceiver={receiver:a},c.streams=[i.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Ra(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function TR(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(r,a){return{track:a,get dtmf(){return this._dtmf===void 0&&(a.kind==="audio"?this._dtmf=r.createDTMFSender(a):this._dtmf=null),this._dtmf},_pc:r}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,d){let f=r.apply(this,arguments);return f||(f=e(this,l),this._senders.push(f)),f};const a=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){a.apply(this,arguments);const d=this._senders.indexOf(l);d!==-1&&this._senders.splice(d,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(a){this._senders=this._senders||[],n.apply(this,[a]),a.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(a){this._senders=this._senders||[],i.apply(this,[a]),a.getTracks().forEach(c=>{const l=this._senders.find(d=>d.track===c);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function xR(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const a=n.apply(this,[]);return a.forEach(c=>c._pc=this),a});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const a=i.apply(this,arguments);return a._pc=this,a}),t.RTCRtpSender.prototype.getStats=function(){const a=this;return this._pc.getStats().then(c=>Jx(c,a.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(a=>a._pc=this),r}),Ra(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(a=>Jx(a,r.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let r,a,c;return this.getSenders().forEach(l=>{l.track===i&&(r?c=!0:r=l)}),this.getReceivers().forEach(l=>(l.track===i&&(a?c=!0:a=l),l.track===i)),c||r&&a?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():a?a.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function wR(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(d)===-1&&this._shimmedLocalStreams[l.id].push(d):this._shimmedLocalStreams[l.id]=[l,d],d};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(f=>{if(this.getSenders().find(p=>p.track===f))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(f=>l.indexOf(f)===-1);this._shimmedLocalStreams[c.id]=[c].concat(d)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],i.apply(this,arguments)};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const d=this._shimmedLocalStreams[l].indexOf(c);d!==-1&&this._shimmedLocalStreams[l].splice(d,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),r.apply(this,arguments)}}function CR(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return wR(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const m=n.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(p=>this._reverseStreams[p.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(p=>{if(this.getSenders().find(S=>S.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const p=new t.MediaStream(m.getTracks());this._streams[m.id]=p,this._reverseStreams[p.id]=m,m=p}i.apply(this,[m])};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},t.RTCPeerConnection.prototype.addTrack=function(m,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(b=>b===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(b=>b.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const x=this._streams[p.id];if(x)x.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const b=new t.MediaStream([m]);this._streams[p.id]=b,this._reverseStreams[b.id]=p,this.addStream(b)}return this.getSenders().find(b=>b.track===m)};function a(f,m){let p=m.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const S=f._reverseStreams[v],x=f._streams[S.id];p=p.replace(new RegExp(x.id,"g"),S.id)}),new RTCSessionDescription({type:m.type,sdp:p})}function c(f,m){let p=m.sdp;return Object.keys(f._reverseStreams||[]).forEach(v=>{const S=f._reverseStreams[v],x=f._streams[S.id];p=p.replace(new RegExp(S.id,"g"),x.id)}),new RTCSessionDescription({type:m.type,sdp:p})}["createOffer","createAnswer"].forEach(function(f){const m=t.RTCPeerConnection.prototype[f],p={[f](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[x=>{const b=a(this,x);v[0].apply(null,[b])},x=>{v[1]&&v[1].apply(null,x)},arguments[2]]):m.apply(this,arguments).then(x=>a(this,x))}};t.RTCPeerConnection.prototype[f]=p[f]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=c(this,arguments[0]),l.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const f=d.get.apply(this);return f.type===""?f:a(this,f)}}),t.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(b=>m.track===b)&&(v=this._streams[S])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function sv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=r[n]})}function ER(t,e){Ra(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var ew=Object.freeze({__proto__:null,fixNegotiationNeeded:ER,shimAddTrackRemoveTrack:CR,shimAddTrackRemoveTrackWithNative:wR,shimGetSendersWithDtmf:TR,shimGetUserMedia:yR,shimMediaStream:bR,shimOnTrack:SR,shimPeerConnection:sv,shimSenderReceiverGetStats:xR});function kR(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(r,a,c){B0("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(a,c)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(c,l,d){l in c&&!(d in c)&&(c[d]=c[l],delete c[l])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),r(c.audio,"autoGainControl","mozAutoGainControl"),r(c.audio,"noiseSuppression","mozNoiseSuppression")),a(c)},i&&i.prototype.getSettings){const c=i.prototype.getSettings;i.prototype.getSettings=function(){const l=c.apply(this,arguments);return r(l,"mozAutoGainControl","autoGainControl"),r(l,"mozNoiseSuppression","noiseSuppression"),l}}if(i&&i.prototype.applyConstraints){const c=i.prototype.applyConstraints;i.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),r(l,"autoGainControl","mozAutoGainControl"),r(l,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[l])}}}}function e5(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function RR(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function av(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const a=t.RTCPeerConnection.prototype[r],c={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),a.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=c[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[a,c,l]=arguments;return i.apply(this,[a||null]).then(d=>{if(e.version<53&&!c)try{d.forEach(f=>{f.type=n[f.type]||f.type})}catch(f){if(f.name!=="TypeError")throw f;d.forEach((m,p)=>{d.set(p,Object.assign({},m,{type:n[m.type]||m.type}))})}return d}).then(c,l)}}function AR(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(a=>a._pc=this),r});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function PR(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i}),Ra(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function _R(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){B0("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function DR(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function MR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const a=e.apply(this,arguments);if(r){const{sender:c}=a,l=c.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=i,c.sendEncodings=i,this.setParametersPromises.push(c.setParameters(l).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return a})}function OR(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function NR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function IR(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var tw=Object.freeze({__proto__:null,shimAddTransceiver:MR,shimCreateAnswer:IR,shimCreateOffer:NR,shimGetDisplayMedia:e5,shimGetParameters:OR,shimGetUserMedia:kR,shimOnTrack:RR,shimPeerConnection:av,shimRTCDataChannel:DR,shimReceiverGetStats:PR,shimRemoveStream:_R,shimSenderGetStats:AR});function UR(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>e.call(this,r,i)),i.getVideoTracks().forEach(r=>e.call(this,r,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var r=arguments.length,a=new Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return a&&a.forEach(l=>{this._localStreams?this._localStreams.includes(l)||this._localStreams.push(l):this._localStreams=[l]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const r=n.getTracks();this.getSenders().forEach(a=>{r.includes(a.track)&&this.removeTrack(a)})})}}function LR(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const a=new Event("addstream");a.stream=r,this.dispatchEvent(a)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(a=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(a)>=0)return;i._remoteStreams.push(a);const c=new Event("addstream");c.stream=a,i.dispatchEvent(c)})}),e.apply(i,arguments)}}}function jR(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,r=e.setLocalDescription,a=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(f,m){const p=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[p]);return m?(v.then(f,m),Promise.resolve()):v},e.createAnswer=function(f,m){const p=arguments.length>=2?arguments[2]:arguments[0],v=i.apply(this,[p]);return m?(v.then(f,m),Promise.resolve()):v};let l=function(d,f,m){const p=r.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p};e.setLocalDescription=l,l=function(d,f,m){const p=a.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p},e.setRemoteDescription=l,l=function(d,f,m){const p=c.apply(this,[d]);return m?(p.then(f,m),Promise.resolve()):p},e.addIceCandidate=l}function BR(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=r=>i(FR(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(i,r,a){e.mediaDevices.getUserMedia(i).then(r,a)}).bind(e))}function FR(t){return t&&t.video!==void 0?Object.assign({},t,{video:vR(t.video)}):t}function VR(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const a=[];for(let c=0;c<i.iceServers.length;c++){let l=i.iceServers[c];l.urls===void 0&&l.url?(B0("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,a.push(l)):a.push(i.iceServers[c])}i.iceServers=a}return new e(i,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function zR(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function HR(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const a=this.getTransceivers().find(c=>c.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):i.offerToReceiveVideo===!0&&!a&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function qR(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var nw=Object.freeze({__proto__:null,shimAudioContext:qR,shimCallbacksAPI:jR,shimConstraints:FR,shimCreateOfferLegacy:HR,shimGetUserMedia:BR,shimLocalStreamsAPI:UR,shimRTCIceServerUrls:VR,shimRemoteStreamsAPI:LR,shimTrackEventTransceiver:zR}),Bp={exports:{}},iw;function t5(){return iw||(iw=1,function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((r,a)=>(a>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(r=>r.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let a=8;a<i.length;a+=2)switch(i[a]){case"raddr":r.relatedAddress=i[a+1];break;case"rport":r.relatedPort=parseInt(i[a+1],10);break;case"tcptype":r.tcpType=i[a+1];break;case"ufrag":r.ufrag=i[a+1],r.usernameFragment=i[a+1];break;default:r[i[a]]===void 0&&(r[i[a]]=i[a+1]);break}return r},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const r=n.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const a=n.type;return i.push("typ"),i.push(a),a!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let r;const a=n.substring(n.indexOf(" ")+1).split(";");for(let c=0;c<a.length;c++)r=a[c].trim().split("="),i[r[0].trim()]=r[1];return i},e.writeFmtp=function(n){let i="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const a=[];Object.keys(n.parameters).forEach(c=>{n.parameters[c]!==void 0?a.push(c+"="+n.parameters[c]):a.push(c)}),i+="a=fmtp:"+r+" "+a.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(a=>{i+="a=rtcp-fb:"+r+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,i),10)},a=n.indexOf(":",i);return a>-1?(r.attribute=n.substring(i+1,a),r.value=n.substring(a+1)):r.attribute=n.substring(i+1),r},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let r="a=setup:"+i+`\r
`;return n.fingerprints.forEach(a=>{r+="a=fingerprint:"+a.algorithm+" "+a.value+`\r
`}),r},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const r=e.matchPrefix(n+i,"a=ice-ufrag:")[0],a=e.matchPrefix(n+i,"a=ice-pwd:")[0];return r&&a?{usernameFragment:r.substring(12),password:a.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(n)[0].split(" ");i.profile=a[2];for(let l=3;l<a.length;l++){const d=a[l],f=e.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(f){const m=e.parseRtpMap(f),p=e.matchPrefix(n,"a=fmtp:"+d+" ");switch(m.parameters=p.length?e.parseFmtp(p[0]):{},m.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),i.codecs.push(m),m.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(m.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(l=>{i.headerExtensions.push(e.parseExtmap(l))});const c=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(l=>{c.forEach(d=>{l.rtcpFeedback.find(m=>m.type===d.type&&m.parameter===d.parameter)||l.rtcpFeedback.push(d)})}),i},e.writeRtpDescription=function(n,i){let r="";r+="m="+n+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(c=>c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(c=>{r+=e.writeRtpMap(c),r+=e.writeFmtp(c),r+=e.writeRtcpFb(c)});let a=0;return i.codecs.forEach(c=>{c.maxptime>a&&(a=c.maxptime)}),a>0&&(r+="a=maxptime:"+a+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(c=>{r+=e.writeExtmap(c)}),r},e.parseRtpEncodingParameters=function(n){const i=[],r=e.parseRtpParameters(n),a=r.fecMechanisms.indexOf("RED")!==-1,c=r.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(v=>e.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),d=l.length>0&&l[0].ssrc;let f;const m=e.matchPrefix(n,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(x=>parseInt(x,10)));m.length>0&&m[0].length>1&&m[0][0]===d&&(f=m[0][1]),r.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let S={ssrc:d,codecPayloadType:parseInt(v.parameters.apt,10)};d&&f&&(S.rtx={ssrc:f}),i.push(S),a&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:d,mechanism:c?"red+ulpfec":"red"},i.push(S))}}),i.length===0&&d&&i.push({ssrc:d});let p=e.matchPrefix(n,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-2e3*8:p=void 0,i.forEach(v=>{v.maxBitrate=p})),i},e.parseRtcpParameters=function(n){const i={},r=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const a=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=a.length>0,i.compound=a.length===0;const c=e.matchPrefix(n,"a=rtcp-mux");return i.mux=c.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const r=e.matchPrefix(n,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const a=e.matchPrefix(n,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="msid");if(a.length>0)return i=a[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),r=e.matchPrefix(n,"a=max-message-size:");let a;r.length>0&&(a=parseInt(r[0].substring(19),10)),isNaN(a)&&(a=65536);const c=e.matchPrefix(n,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substring(12),10),protocol:i.fmt,maxMessageSize:a};const l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){const d=l[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:a}}},e.writeSctpDescription=function(n,i){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,r){let a;const c=i!==void 0?i:2;return n?a=n:a=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+a+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const r=e.splitLines(n);for(let a=0;a<r.length;a++)switch(r[a]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[a].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const r=e.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){const r=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},t.exports=e}(Bp)),Bp.exports}var KR=t5(),Lo=H6(KR),n5=p4({__proto__:null,default:Lo},[KR]);function ef(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new e(i),a=Lo.parseCandidate(i.candidate);for(const c in a)c in r||Object.defineProperty(r,c,{value:a[c]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,Ra(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ov(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Ra(t,"icecandidate",e=>{if(e.candidate){const n=Lo.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function tf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const d=Lo.splitSections(l.sdp);return d.shift(),d.some(f=>{const m=Lo.parseMLine(f);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},i=function(l){const d=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const f=parseInt(d[1],10);return f!==f?-1:f},r=function(l){let d=65536;return e.browser==="firefox"&&(e.version<57?l===-1?d=16384:d=2147483637:e.version<60?d=e.version===57?65535:65536:d=2147483637),d},a=function(l,d){let f=65536;e.browser==="firefox"&&e.version===57&&(f=65535);const m=Lo.matchPrefix(l.sdp,"a=max-message-size:");return m.length>0?f=parseInt(m[0].substring(19),10):e.browser==="firefox"&&d!==-1&&(f=2147483637),f},c=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=i(arguments[0]),f=r(d),m=a(arguments[0],d);let p;f===0&&m===0?p=Number.POSITIVE_INFINITY:f===0||m===0?p=Math.max(f,m):p=Math.min(f,m);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return p}}),this._sctp=v}return c.apply(this,arguments)}}function nf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,r){const a=i.send;i.send=function(){const l=arguments[0],d=l.length||l.size||l.byteLength;if(i.readyState==="open"&&r.sctp&&d>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return a.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},Ra(t,"datachannel",i=>(e(i.channel,i.target),i))}function cv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const a=r.target;if(a._lastConnectionState!==a.connectionState){a._lastConnectionState=a.connectionState;const c=new Event("connectionstatechange",r);a.dispatchEvent(c)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function lv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const a=r.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&r instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:r.type,sdp:a}):r.sdp=a}return n.apply(this,arguments)}}function rf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function sf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(c=>n.apply(this,[c]))})}var i5=Object.freeze({__proto__:null,removeExtmapAllowMixed:lv,shimAddIceCandidateNullOrEmpty:rf,shimConnectionState:cv,shimMaxMessageSize:tf,shimParameterlessSetLocalDescription:sf,shimRTCIceCandidate:ef,shimRTCIceCandidateRelayProtocol:ov,shimSendThrowTypeError:nf});function r5(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=gR,i=Q6(t),r={browserDetails:i,commonShim:i5,extractVersion:Al,disableLog:Z6,disableWarnings:J6,sdp:n5};switch(i.browser){case"chrome":if(!ew||!sv||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=ew,rf(t,i),sf(t),yR(t,i),bR(t),sv(t,i),SR(t),CR(t,i),TR(t),xR(t),ER(t,i),ef(t),ov(t),cv(t),tf(t,i),nf(t),lv(t,i);break;case"firefox":if(!tw||!av||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=tw,rf(t,i),sf(t),kR(t,i),av(t,i),RR(t),_R(t),AR(t),PR(t),DR(t),MR(t),OR(t),NR(t),IR(t),ef(t),cv(t),tf(t,i),nf(t);break;case"safari":if(!nw||!e.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=nw,rf(t,i),sf(t),VR(t),HR(t),jR(t),UR(t),LR(t),zR(t),BR(t),qR(t),ef(t),ov(t),tf(t,i),nf(t),lv(t,i);break;default:n("Unsupported browser!");break}return r}r5({window:typeof window>"u"?void 0:window});const s5=10,Sl="lk_e2ee",a5="LKFrameEncryptionKey",o5={sharedKey:!1,ratchetSalt:a5,ratchetWindowSize:8,failureTolerance:s5,keyringSize:16};var As;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(As||(As={}));var rw;(function(t){t.KeyRatcheted="keyRatcheted"})(rw||(rw={}));var ks;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(ks||(ks={}));var sw;(function(t){t.Error="cryptorError"})(sw||(sw={}));function c5(){return l5()||uv()}function uv(){return typeof window.RTCRtpScriptTransform<"u"}function l5(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class PY extends lr.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,r)=>{ot.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},o5),e),this.on(As.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,i){const r={key:e,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),r),this.emit(As.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(As.RatchetRequest,e,n)}}class Us extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var lt;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(lt||(lt={}));class Et extends Us{constructor(e,n,i,r){super(1,e),this.name="ConnectionError",this.status=i,this.reason=n,this.context=r,this.reasonName=lt[n]}}class F0 extends Us{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Ur extends Us{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class u5 extends Us{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class mn extends Us{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class dv extends Us{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class aw extends Us{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class ow extends Us{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:j0[n]}}var xf;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(xf||(xf={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(xf||(xf={}));var cw;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(cw||(cw={}));var de;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(de||(de={}));var ye;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(ye||(ye={}));var De;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(De||(De={}));var Ee;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(Ee||(Ee={}));function d5(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const f5=/version\/(\d+(\.?_?\d+)+)/i;let Fp;function ai(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Fp===void 0||e){const i=h5.find(r=>{let{test:a}=r;return a.test(n)});Fp=i?.describe(n)}return Fp}const h5=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:af(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Vp(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:af(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Vp(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:af(f5,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Vp(t)}}}];function af(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=e.match(t);return i&&i.length>=n&&i[n]||""}function Vp(t){return t.includes("mac os")?af(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var m5="2.15.4";const p5=m5,g5=16;class Rn{}Rn.setTimeout=function(){return setTimeout(...arguments)};Rn.setInterval=function(){return setInterval(...arguments)};Rn.clearTimeout=function(){return clearTimeout(...arguments)};Rn.clearInterval=function(){return clearInterval(...arguments)};const v5=5e3,Tl=[];var si;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(si||(si={}));class te extends lr.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=te.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=ot,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),v5):this.handleAppVisibilityChanged()},this.log=Br((r=i.loggerName)!==null&&r!==void 0?r:Li.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=te.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),st(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===te.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===te.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Tl.forEach(a=>{a.parentElement===null&&!e&&(e=a)}),e&&Tl.splice(Tl.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Ao(this.mediaStreamTrack,e);const i=e.srcObject.getTracks(),r=i.some(a=>a.kind==="audio");return e.play().then(()=>{this.emit(r?Ee.AudioPlaybackStarted:Ee.VideoPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(r?Ee.AudioPlaybackFailed:Ee.VideoPlaybackFailed,a):a.name==="AbortError"?ot.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):ot.warn("could not playback ".concat(r?"audio":"video"),a),r&&e&&i.some(c=>c.kind==="video")&&a.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(Ee.ElementAttached,e),e}detach(e){try{if(e){jo(this.mediaStreamTrack,e);const i=this.attachedElements.indexOf(e);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(e),this.emit(Ee.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(i=>{jo(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(Ee.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Br(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Tl.forEach(i=>{i.parentElement||(n=!1)}),n&&Tl.push(e)}}handleAppVisibilityChanged(){return K(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===te.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){Kn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Kn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Ao(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let i;t.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(t)||(i.forEach(r=>{n.removeTrack(r)}),n.addTrack(t)),(!Ta()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Ta()||Go())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function jo(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(f){f.Audio="audio",f.Video="video",f.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(f){f.Camera="camera",f.Microphone="microphone",f.ScreenShare="screen_share",f.ScreenShareAudio="screen_share_audio",f.Unknown="unknown"})(n=t.Source||(t.Source={}));let i;(function(f){f.Active="active",f.Paused="paused",f.Unknown="unknown"})(i=t.StreamState||(t.StreamState={}));function r(f){switch(f){case e.Audio:return Ni.AUDIO;case e.Video:return Ni.VIDEO;default:return Ni.DATA}}t.kindToProto=r;function a(f){switch(f){case Ni.AUDIO:return e.Audio;case Ni.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=a;function c(f){switch(f){case n.Camera:return an.CAMERA;case n.Microphone:return an.MICROPHONE;case n.ScreenShare:return an.SCREEN_SHARE;case n.ScreenShareAudio:return an.SCREEN_SHARE_AUDIO;default:return an.UNKNOWN}}t.sourceToProto=c;function l(f){switch(f){case an.CAMERA:return n.Camera;case an.MICROPHONE:return n.Microphone;case an.SCREEN_SHARE:return n.ScreenShare;case an.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=l;function d(f){switch(f){case ev.ACTIVE:return i.Active;case ev.PAUSED:return i.Paused;default:return i.Unknown}}t.streamStateFromProto=d})(te||(te={}));class xt{constructor(e,n,i,r,a){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&i!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:i,maxFramerate:r,priority:a};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const y5=["vp8","h264"],b5=["vp8","h264","vp9","av1","h265"];function S5(t){return!!y5.find(e=>e===t)}var lw;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(lw||(lw={}));var fv;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(fv||(fv={}));const ql={h90:new xt(160,90,9e4,20),h180:new xt(320,180,16e4,20),h216:new xt(384,216,18e4,20),h360:new xt(640,360,45e4,20),h540:new xt(960,540,8e5,25),h720:new xt(1280,720,17e5,30),h1080:new xt(1920,1080,3e6,30),h1440:new xt(2560,1440,5e6,30),h2160:new xt(3840,2160,8e6,30)},hv={h120:new xt(160,120,7e4,20),h180:new xt(240,180,125e3,20),h240:new xt(320,240,14e4,20),h360:new xt(480,360,33e4,20),h480:new xt(640,480,5e5,20),h540:new xt(720,540,6e5,25),h720:new xt(960,720,13e5,30),h1080:new xt(1440,1080,23e5,30),h1440:new xt(1920,1440,38e5,30)},V0={h360fps3:new xt(640,360,2e5,3,"medium"),h360fps15:new xt(640,360,4e5,15,"medium"),h720fps5:new xt(1280,720,8e5,5,"medium"),h720fps15:new xt(1280,720,15e5,15,"medium"),h720fps30:new xt(1280,720,2e6,30,"medium"),h1080fps15:new xt(1920,1080,25e5,15,"medium"),h1080fps30:new xt(1920,1080,5e6,30,"medium"),original:new xt(0,0,7e6,30,"medium")},T5="|",uw="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function x5(t){const e=t.split(T5);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Yn(t){return K(this,void 0,void 0,function*(){return new Promise(e=>Rn.setTimeout(e,t))})}function mv(){return"addTransceiver"in RTCPeerConnection.prototype}function pv(){return"addTrack"in RTCPeerConnection.prototype}function w5(){if(!("getCapabilities"in RTCRtpSender)||Ta())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function C5(){if(!("getCapabilities"in RTCRtpSender)||Go())return!1;if(Ta()){const n=ai();if(n?.version&&ji(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&ji(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function Xi(t){return t==="av1"||t==="vp9"}function gv(t){return!document||wf()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function E5(){return typeof RTCPeerConnection>"u"?!1:mv()||pv()}function Go(){var t;return((t=ai())===null||t===void 0?void 0:t.name)==="Firefox"}function Ta(){var t;return((t=ai())===null||t===void 0?void 0:t.name)==="Safari"}function wf(){const t=ai();return t?.name==="Safari"||t?.os==="iOS"}function k5(){const t=ai();return t?.name==="Safari"&&t.version.startsWith("17.")||t?.os==="iOS"&&!!t?.osVersion&&ji(t.osVersion,"17")>=0}function R5(t){return t||(t=ai()),t?.name==="Safari"&&ji(t.version,"18.3")>0||t?.os==="iOS"&&!!t?.osVersion&&ji(t.osVersion,"18.3")>0}function GR(){var t,e;return Kn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function A5(){const t=ai(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&ji(e,t.osVersion)>=0?!0:t.name==="Safari"&&ji(e,t.version)>=0}function Kn(){return typeof document<"u"}function rr(){return navigator.product=="ReactNative"}function vv(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function YR(){if(globalThis&&globalThis.LiveKitReactNativeGlobal)return globalThis.LiveKitReactNativeGlobal}function WR(){if(!rr())return;let t=YR();if(t)return t.platform}function dw(){if(Kn())return window.devicePixelRatio;if(rr()){let t=YR();if(t)return t.devicePixelRatio}return 1}function ji(t,e){const n=t.split("."),i=e.split("."),r=Math.min(n.length,i.length);for(let a=0;a<r;++a){const c=parseInt(n[a],10),l=parseInt(i[a],10);if(c>l)return 1;if(c<l)return-1;if(a===r-1&&c===l)return 0}return t===""&&e!==""?-1:e===""?1:n.length==i.length?0:n.length<i.length?-1:1}function P5(t){for(const e of t)e.target.handleResize(e)}function _5(t){for(const e of t)e.target.handleVisibilityChanged(e)}let zp=null;const fw=()=>(zp||(zp=new ResizeObserver(P5)),zp);let Hp=null;const hw=()=>(Hp||(Hp=new IntersectionObserver(_5,{root:null,rootMargin:"0px"})),Hp);function D5(){var t;const e=new y6({sdk:Jk.JS,protocol:g5,version:p5});return rr()&&(e.os=(t=WR())!==null&&t!==void 0?t:""),e}function mw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=t,r.height=e;const a=r.getContext("2d");a?.fillRect(0,0,r.width,r.height),i&&a&&(a.beginPath(),a.arc(t/2,e/2,50,0,Math.PI*2,!0),a.closePath(),a.fillStyle="grey",a.fill());const c=r.captureStream(),[l]=c.getTracks();if(!l)throw Error("Could not get empty media stream video track");return l.enabled=n,l}let xl;function qp(){if(!xl){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const i=t.createMediaStreamDestination();if(e.connect(n),n.connect(i),e.start(),[xl]=i.stream.getAudioTracks(),!xl)throw Error("Could not get empty media stream audio track");xl.enabled=!1}return xl.clone()}class Po{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,r)=>K(this,void 0,void 0,function*(){this.resolve=i,this.reject=r,e&&(yield e(i,r))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function M5(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),i=H0();if(!i)throw new Error("Audio Context not supported on this browser");const r=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,a=i.createMediaStreamSource(new MediaStream([r])),c=i.createAnalyser();c.minDecibels=n.minDecibels,c.maxDecibels=n.maxDecibels,c.fftSize=n.fftSize,c.smoothingTimeConstant=n.smoothingTimeConstant,a.connect(c);const l=new Uint8Array(c.frequencyBinCount);return{calculateVolume:()=>{c.getByteFrequencyData(l);let m=0;for(const v of l)m+=Math.pow(v/255,2);return Math.sqrt(m/l.length)},analyser:c,cleanup:()=>K(this,void 0,void 0,function*(){yield i.close(),n.cloneTrack&&r.stop()})}}function O5(t){return b5.includes(t)}function Ps(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function N5(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function yv(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function I5(t,e){return t.segments.map(n=>{let{id:i,text:r,language:a,startTime:c,endTime:l,final:d}=n;var f;const m=(f=e.get(i))!==null&&f!==void 0?f:Date.now(),p=Date.now();return d?e.delete(i):e.set(i,m),{id:i,text:r,startTime:Number.parseInt(c.toString()),endTime:Number.parseInt(l.toString()),final:d,language:a,firstReceivedTime:m,lastReceivedTime:p}})}function U5(t){const{id:e,timestamp:n,message:i,editTimestamp:r}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}function pw(t){switch(t.reason){case lt.LeaveRequest:return t.context;case lt.Cancelled:return Ui.CLIENT_INITIATED;case lt.NotAllowed:return Ui.USER_REJECTED;case lt.ServerUnreachable:return Ui.JOIN_FAILURE;default:return Ui.UNKNOWN_REASON}}function of(t){return t!==void 0?Number(t):void 0}function la(t){return t!==void 0?BigInt(t):void 0}function Bo(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function Qi(t){return!!t&&t.kind==te.Kind.Audio}function Aa(t){return!!t&&t.kind==te.Kind.Video}function ys(t){return Bo(t)&&Aa(t)}function Dr(t){return Bo(t)&&Qi(t)}function bv(t){return!!t&&!t.isLocal}function L5(t){return!!t&&!t.isLocal}function Kp(t){return bv(t)&&Aa(t)}function j5(t){return t.isLocal}function B5(t,e){const n=[];let i=new TextEncoder().encode(t);for(;i.length>e;){let r=e;for(;r>0;){const a=i[r];if(a!==void 0&&(a&192)!==128)break;r--}n.push(i.slice(0,r)),i=i.slice(r)}return i.length>0&&n.push(i),n}function $R(t,e,n){var i,r,a,c;const{optionsWithoutProcessor:l,audioProcessor:d,videoProcessor:f}=ZR(t??{}),m=e?.processor,p=n?.processor,v=l??{};return v.audio===!0&&(v.audio={}),v.video===!0&&(v.video={}),v.audio&&(Sv(v.audio,e),(i=(a=v.audio).deviceId)!==null&&i!==void 0||(a.deviceId={ideal:"default"}),(d||m)&&(v.audio.processor=d??m)),v.video&&(Sv(v.video,n),(r=(c=v.video).deviceId)!==null&&r!==void 0||(c.deviceId={ideal:"default"}),(f||p)&&(v.video.processor=f??p)),v}function Sv(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function z0(t){var e,n,i,r;const a={};if(t.video)if(typeof t.video=="object"){const c={},l=c,d=t.video;Object.keys(d).forEach(f=>{switch(f){case"resolution":Sv(l,d.resolution);break;default:l[f]=d[f]}}),a.video=c,(e=(i=a.video).deviceId)!==null&&e!==void 0||(i.deviceId={ideal:"default"})}else a.video=t.video?{deviceId:{ideal:"default"}}:!1;else a.video=!1;return t.audio?typeof t.audio=="object"?(a.audio=t.audio,(n=(r=a.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):a.audio={deviceId:{ideal:"default"}}:a.audio=!1,a}function XR(t){return K(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return function*(){const i=H0();if(i){const r=i.createAnalyser();r.fftSize=2048;const a=r.frequencyBinCount,c=new Uint8Array(a);i.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(r),yield Yn(n),r.getByteTimeDomainData(c);const d=c.some(f=>f!==128&&f!==0);return i.close(),!d}return!1}()})}function H0(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const i=()=>K(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(a){console.warn("Error trying to auto-resume audio context",a)}(r=window.document.body)===null||r===void 0||r.removeEventListener("click",i)});window.document.body.addEventListener("click",i)}return n}}function F5(t){return t==="audioinput"?te.Source.Microphone:t==="videoinput"?te.Source.Camera:te.Source.Unknown}function Tv(t){return t===te.Source.Microphone?"audioinput":t===te.Source.Camera?"videoinput":void 0}function V5(t){var e,n;let i=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(i=typeof i=="boolean"?{}:i,Ta()?i=Object.assign(Object.assign({},i),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:i,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function cf(t){return t.split("/")[1].toLowerCase()}function z5(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new U0({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function st(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?st(t.track):{})}}function H5(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function q5(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const i=[...Object.keys(e),...Object.keys(t)],r={};for(const a of i)t[a]!==e[a]&&(r[a]=(n=e[a])!==null&&n!==void 0?n:"");return r}function ZR(t){const e=Object.assign({},t);let n,i;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(i=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:d5(e)}}function K5(t){switch(t){case an.CAMERA:return te.Source.Camera;case an.MICROPHONE:return te.Source.Microphone;case an.SCREEN_SHARE:return te.Source.ScreenShare;case an.SCREEN_SHARE_AUDIO:return te.Source.ScreenShareAudio;default:return te.Source.Unknown}}function gw(t,e){return t.width*t.height<e.width*e.height}function G5(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(i=>i.quality===e)}class Y5 extends lr.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var i,r;const{kind:a,data:c}=n.data;switch(a){case"error":ot.error(c.error.message),this.emit(ks.EncryptionError,c.error);break;case"initAck":c.enabled&&this.keyProvider.getKeys().forEach(l=>{this.postKey(l)});break;case"enable":if(c.enabled&&this.keyProvider.getKeys().forEach(l=>{this.postKey(l)}),this.encryptionEnabled!==c.enabled&&c.participantIdentity===((i=this.room)===null||i===void 0?void 0:i.localParticipant.identity))this.emit(ks.ParticipantEncryptionStatusChanged,c.enabled,this.room.localParticipant),this.encryptionEnabled=c.enabled;else if(c.participantIdentity){const l=(r=this.room)===null||r===void 0?void 0:r.getParticipantByIdentity(c.participantIdentity);if(!l)throw TypeError("couldn't set encryption status, participant not found".concat(c.participantIdentity));this.emit(ks.ParticipantEncryptionStatusChanged,c.enabled,l)}break;case"ratchetKey":this.keyProvider.emit(As.KeyRatcheted,c.ratchetResult,c.participantIdentity,c.keyIndex);break}},this.onWorkerError=n=>{ot.error("e2ee worker encountered an error:",{error:n.error}),this.emit(ks.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!c5())throw new F0("tried to setup end-to-end encryption on an unsupported browser");if(ot.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:G6.getLevel()}};this.worker&&(ot.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){ot.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?ot.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(De.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(de.TrackPublished,(i,r)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==ii.NONE,r.identity)),e.on(de.ConnectionStateChanged,i=>{i===at.Connected&&e.remoteParticipants.forEach(r=>{r.trackPublications.forEach(a=>{this.setParticipantCryptorEnabled(a.trackInfo.encryption!==ii.NONE,r.identity)})})}).on(de.TrackUnsubscribed,(i,r,a)=>{var c;const l={kind:"removeTransform",data:{participantIdentity:a.identity,trackId:i.mediaStreamID}};(c=this.worker)===null||c===void 0||c.postMessage(l)}).on(de.TrackSubscribed,(i,r,a)=>{this.setupE2EEReceiver(i,a.identity,r.trackInfo)}).on(de.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(ye.LocalSenderCreated,(i,r)=>K(this,void 0,void 0,function*(){this.setupE2EESender(r,i)})),n.on(As.SetKey,i=>this.postKey(i)).on(As.RatchetRequest,(i,r)=>this.postRatchetRequest(i,r))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(i)}postKey(e){let{key:n,participantIdentity:i,keyIndex:r}=e;var a;if(!this.worker)throw Error("could not set key, worker is missing");const c={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((a=this.room)===null||a===void 0?void 0:a.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(c)}postEnable(e,n){if(this.worker){const i={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,i){if(e.receiver){if(!i?.mimeType||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?cf(i.mimeType):void 0)}}setupE2EESender(e,n){if(!Bo(e)||!n){n||ot.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,i,r){return K(this,void 0,void 0,function*(){if(this.worker){if(uv()){const a={kind:"decode",participantIdentity:i,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{if(Sl in e&&r){const d={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:i}};this.worker.postMessage(d);return}let a=e.writableStream,c=e.readableStream;if(!a||!c){const d=e.createEncodedStreams();e.writableStream=d.writable,a=d.writable,e.readableStream=d.readable,c=d.readable}const l={kind:"decode",data:{readableStream:c,writableStream:a,trackId:n,codec:r,participantIdentity:i,isReuse:Sl in e}};this.worker.postMessage(l,[c,a])}e[Sl]=!0}})}handleSender(e,n,i){var r;if(!(Sl in e||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(uv()){ot.info("initialize script transform");const a={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,a)}else{ot.info("initialize encoded streams");const a=e.createEncodedStreams(),c={kind:"encode",data:{readableStream:a.readable,writableStream:a.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(c,[a.readable,a.writable])}e[Sl]=!0}}}const Gp="default";class Tn{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Tn),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;if(((a=Tn.userMediaPromiseMap)===null||a===void 0?void 0:a.size)>0){ot.debug("awaiting getUserMedia promise");try{n?yield Tn.userMediaPromiseMap.get(n):yield Promise.all(Tn.userMediaPromiseMap.values())}catch{ot.warn("error waiting for media permissons")}}let c=yield navigator.mediaDevices.enumerateDevices();if(r&&!(Ta()&&i.hasDeviceInUse(n))&&(c.filter(d=>d.kind===n).length===0||c.some(d=>{const f=d.label==="",m=n?d.kind===n:!0;return f&&m}))){const d={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},f=yield navigator.mediaDevices.getUserMedia(d);c=yield navigator.mediaDevices.enumerateDevices(),f.getTracks().forEach(m=>{m.stop()})}return i._previousDevices=c,n&&(c=c.filter(l=>l.kind===n)),c}()})}normalizeDeviceId(e,n,i){return K(this,void 0,void 0,function*(){if(n!==Gp)return n;const r=yield this.getDevices(e),a=r.find(l=>l.deviceId===Gp);if(!a){ot.warn("could not reliably determine default device");return}const c=r.find(l=>l.deviceId!==Gp&&l.groupId===(i??a.groupId));if(!c){ot.warn("could not reliably determine default device");return}return c?.deviceId})}hasDeviceInUse(e){return e?Tn.userMediaPromiseMap.has(e):Tn.userMediaPromiseMap.size>0}}Tn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Tn.userMediaPromiseMap=new Map;var Nl;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Nl||(Nl={}));class W5{constructor(){this.pendingTasks=new Map,this.taskMutex=new In,this.nextTaskIndex=0}run(e){return K(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Nl.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Nl.RUNNING,yield e()}finally{n.status=Nl.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return K(this,void 0,void 0,function*(){return this.run(()=>K(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}function $5(t,e){const n=new URL(N5(t));return e.forEach((i,r)=>{n.searchParams.set(r,i)}),JR(n,"rtc")}function X5(t){const e=new URL(yv(t));return JR(e,"validate")}function Z5(t){return t.endsWith("/")?t:"".concat(t,"/")}function JR(t,e){return t.pathname="".concat(Z5(t.pathname)).concat(e),t.toString()}const J5=["syncState","trickle","offer","answer","simulate","leave"];function Q5(t){const e=J5.indexOf(t.case)>=0;return ot.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Pt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Pt||(Pt={}));class q0{get currentState(){return this.state}get isDisconnected(){return this.state===Pt.DISCONNECTING||this.state===Pt.DISCONNECTED}get isEstablishingConnection(){return this.state===Pt.CONNECTING||this.state===Pt.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=Pt.DISCONNECTED,this.log=ot,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Br((i=n.loggerName)!==null&&i!==void 0?i:Li.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new W5,this.queuedRequests=[],this.closingLock=new In,this.connectionLock=new In,this.state=Pt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,i,r){return K(this,void 0,void 0,function*(){return this.state=Pt.CONNECTING,this.options=i,yield this.connect(e,n,i,r)})}reconnect(e,n,i,r){return K(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Pt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:r}))})}connect(e,n,i,r){this.connectOptions=i;const a=D5(),c=e8(n,a,i),l=$5(e,c),d=X5(l);return new Promise((f,m)=>K(this,void 0,void 0,function*(){const p=yield this.connectionLock.lock();try{const v=()=>K(this,void 0,void 0,function*(){this.close(),clearTimeout(S),m(new Et("room connection has been cancelled (signal)",lt.Cancelled))}),S=setTimeout(()=>{this.close(),m(new Et("room connection has timed out (signal)",lt.ServerUnreachable))},i.websocketTimeout);r?.aborted&&v(),r?.addEventListener("abort",v);const x=new URL(l);x.searchParams.has("access_token")&&x.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(x),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(l),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(S)},this.ws.onerror=b=>K(this,void 0,void 0,function*(){if(this.state!==Pt.CONNECTED){this.state=Pt.DISCONNECTED,clearTimeout(S);try{const P=yield fetch(d);if(P.status.toFixed(0).startsWith("4")){const k=yield P.text();m(new Et(k,lt.NotAllowed,P.status))}else m(new Et("Encountered unknown websocket error during connection: ".concat(b.toString()),lt.InternalError,P.status))}catch(P){m(new Et(P instanceof Error?P.message:"server was not reachable",lt.ServerUnreachable))}return}this.handleWSError(b)}),this.ws.onmessage=b=>K(this,void 0,void 0,function*(){var P,k,O;let N;if(typeof b.data=="string"){const I=JSON.parse(b.data);N=Yx.fromJson(I,{ignoreUnknownFields:!0})}else if(b.data instanceof ArrayBuffer)N=Yx.fromBinary(new Uint8Array(b.data));else{this.log.error("could not decode websocket message: ".concat(typeof b.data),this.logContext);return}if(this.state!==Pt.CONNECTED){let I=!1;if(((P=N.message)===null||P===void 0?void 0:P.case)==="join"?(this.state=Pt.CONNECTED,r?.removeEventListener("abort",v),this.pingTimeoutDuration=N.message.value.pingTimeout,this.pingIntervalDuration=N.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),f(N.message.value)):this.state===Pt.RECONNECTING&&N.message.case!=="leave"?(this.state=Pt.CONNECTED,r?.removeEventListener("abort",v),this.startPingInterval(),((k=N.message)===null||k===void 0?void 0:k.case)==="reconnect"?f(N.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),f(void 0),I=!0)):this.isEstablishingConnection&&N.message.case==="leave"?m(new Et("Received leave request while trying to (re)connect",lt.LeaveRequest,void 0,N.message.value.reason)):i.reconnect||m(new Et("did not receive join response, got ".concat((O=N.message)===null||O===void 0?void 0:O.case," instead"),lt.InternalError)),!I)return}this.signalLatency&&(yield Yn(this.signalLatency)),this.handleSignalResponse(N)}),this.ws.onclose=b=>{this.isEstablishingConnection&&m(new Et("Websocket got closed during a (re)connection attempt",lt.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:b.reason,code:b.code,wasClean:b.wasClean,state:this.state})),this.handleOnClose(b.reason)}}finally{p()}}))}close(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){const i=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=Pt.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const r=new Promise(a=>{e.ws?e.ws.onclose=()=>{a()}:a()});e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([r,Yn(250)])),e.ws=void 0}}finally{n&&(e.state=Pt.DISCONNECTED),i()}}()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Cf(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Cf(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new N0({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new I0({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return K(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){const l=a.getNextRequestId();return yield a.sendRequest({case:"updateMetadata",value:new aR({requestId:l,metadata:i,name:r,attributes:c})}),l}()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new sR({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new lR({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Mt.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new hR({timestamp:Mt.parse(Date.now()),rtt:Mt.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new rR({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new Yf({reason:Ui.CLIENT_INITIATED,action:Uo.DISCONNECT})})}sendRequest(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return function*(){if(!r&&!Q5(n)&&i.state===Pt.RECONNECTING){i.queuedRequests.push(()=>K(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield i.requestQueue.flush()),i.signalLatency&&(yield Yn(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.ws||i.ws.readyState!==i.ws.OPEN){i.log.error("cannot send signal request before connected, type: ".concat(n?.case),i.logContext);return}const c=new T6({message:n});try{i.useJSON?i.ws.send(c.toJsonString()):i.ws.send(c.toBinary())}catch(l){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:l}))}}()})}handleSignalResponse(e){var n,i;const r=e.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let a=!1;if(r.case==="answer"){const c=vw(r.value);this.onAnswer&&this.onAnswer(c,r.value.id)}else if(r.case==="offer"){const c=vw(r.value);this.onOffer&&this.onOffer(c,r.value.id)}else if(r.case==="trickle"){const c=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(c,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=r.value.speakers)!==null&&i!==void 0?i:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),a=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));a||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return K(this,void 0,void 0,function*(){if(this.state===Pt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Rn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Rn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Rn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Rn.clearInterval(this.pingInterval)}}function vw(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Cf(t,e){return new Sa({sdp:t.sdp,type:t.type,id:e})}function e8(t,e,n){var i;const r=new URLSearchParams;return r.set("access_token",t),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",rr()?"reactnative":"js"),r.set("version",e.version),r.set("protocol",e.protocol.toString()),e.deviceModel&&r.set("device_model",e.deviceModel),e.os&&r.set("os",e.os),e.osVersion&&r.set("os_version",e.osVersion),e.browser&&r.set("browser",e.browser),e.browserVersion&&r.set("browser_version",e.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&r.set("network",navigator.connection.type),r}class yw{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class t8{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const r=i+this.ttl;return this._map.set(e,{value:n,expiresAt:r}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e(i.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],i=this.asValueMap();for(const[r,a]of i.entries())n.push(e(a,r,i));return n}asValueMap(){const e=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e.set(n,i.value);return e}}var Pi={},Yp={},Wp={exports:{}},bw;function K0(){if(bw)return Wp.exports;bw=1;var t=Wp.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),Wp.exports}var Sw;function n8(){return Sw||(Sw=1,function(t){var e=function(l){return String(Number(l))===l?Number(l):l},n=function(l,d,f,m){if(m&&!f)d[m]=e(l[1]);else for(var p=0;p<f.length;p+=1)l[p+1]!=null&&(d[f[p]]=e(l[p+1]))},i=function(l,d,f){var m=l.name&&l.names;l.push&&!d[l.push]?d[l.push]=[]:m&&!d[l.name]&&(d[l.name]={});var p=l.push?{}:m?d[l.name]:d;n(f.match(l.reg),p,l.names,l.name),l.push&&d[l.push].push(p)},r=K0(),a=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(l){var d={},f=[],m=d;return l.split(/(\r\n|\r|\n)/).filter(a).forEach(function(p){var v=p[0],S=p.slice(2);v==="m"&&(f.push({rtp:[],fmtp:[]}),m=f[f.length-1]);for(var x=0;x<(r[v]||[]).length;x+=1){var b=r[v][x];if(b.reg.test(S))return i(b,m,S)}}),d.media=f,d};var c=function(l,d){var f=d.split(/=(.+)/,2);return f.length===2?l[f[0]]=e(f[1]):f.length===1&&d.length>1&&(l[f[0]]=void 0),l};t.parseParams=function(l){return l.split(/;\s?/).reduce(c,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(l){return l.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(l){for(var d=[],f=l.split(" ").map(e),m=0;m<f.length;m+=3)d.push({component:f[m],ip:f[m+1],port:f[m+2]});return d},t.parseImageAttributes=function(l){return l.split(" ").map(function(d){return d.substring(1,d.length-1).split(",").reduce(c,{})})},t.parseSimulcastStreamList=function(l){return l.split(";").map(function(d){return d.split(",").map(function(f){var m,p=!1;return f[0]!=="~"?m=e(f):(m=e(f.substring(1,f.length)),p=!0),{scid:m,paused:p}})})}}(Yp)),Yp}var $p,Tw;function i8(){if(Tw)return $p;Tw=1;var t=K0(),e=/%[sdv%]/g,n=function(c){var l=1,d=arguments,f=d.length;return c.replace(e,function(m){if(l>=f)return m;var p=d[l];switch(l+=1,m){case"%%":return"%";case"%s":return String(p);case"%d":return Number(p);case"%v":return""}})},i=function(c,l,d){var f=l.format instanceof Function?l.format(l.push?d:d[l.name]):l.format,m=[c+"="+f];if(l.names)for(var p=0;p<l.names.length;p+=1){var v=l.names[p];l.name?m.push(d[l.name][v]):m.push(d[l.names[p]])}else m.push(d[l.name]);return n.apply(null,m)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],a=["i","c","b","a"];return $p=function(c,l){l=l||{},c.version==null&&(c.version=0),c.name==null&&(c.name=" "),c.media.forEach(function(p){p.payloads==null&&(p.payloads="")});var d=l.outerOrder||r,f=l.innerOrder||a,m=[];return d.forEach(function(p){t[p].forEach(function(v){v.name in c&&c[v.name]!=null?m.push(i(p,v,c)):v.push in c&&c[v.push]!=null&&c[v.push].forEach(function(S){m.push(i(p,v,S))})})}),c.media.forEach(function(p){m.push(i("m",t.m[0],p)),f.forEach(function(v){t[v].forEach(function(S){S.name in p&&p[S.name]!=null?m.push(i(v,S,p)):S.push in p&&p[S.push]!=null&&p[S.push].forEach(function(x){m.push(i(v,S,x))})})})}),m.join(`\r
`)+`\r
`},$p}var xw;function r8(){if(xw)return Pi;xw=1;var t=n8(),e=i8(),n=K0();return Pi.grammar=n,Pi.write=e,Pi.parse=t.parse,Pi.parseParams=t.parseParams,Pi.parseFmtpConfig=t.parseFmtpConfig,Pi.parsePayloads=t.parsePayloads,Pi.parseRemoteCandidates=t.parseRemoteCandidates,Pi.parseImageAttributes=t.parseImageAttributes,Pi.parseSimulcastStreamList=t.parseSimulcastStreamList,Pi}var Ts=r8();function G0(t,e,n){var i,r,a;e===void 0&&(e=50),n===void 0&&(n={});var c=(i=n.isImmediate)!=null&&i,l=(r=n.callback)!=null&&r,d=n.maxWait,f=Date.now(),m=[];function p(){if(d!==void 0){var S=Date.now()-f;if(S+e>=d)return d-S}return e}var v=function(){var S=[].slice.call(arguments),x=this;return new Promise(function(b,P){var k=c&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,f=Date.now(),!c){var N=t.apply(x,S);l&&l(N),m.forEach(function(I){return(0,I.resolve)(N)}),m=[]}},p()),k){var O=t.apply(x,S);return l&&l(O),b(O)}m.push({resolve:b,reject:P})})};return v.cancel=function(S){a!==void 0&&clearTimeout(a),m.forEach(function(x){return(0,x.reject)(S)}),m=[]},v}const s8=.7,a8=20,Fo={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class ww extends lr.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=ot,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=G0(r=>K(this,void 0,void 0,function*(){this.emit(Fo.NegotiationStarted);try{yield this.createAndSendOffer()}catch(a){if(r)r(a);else throw a}}),a8),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Br((i=n.loggerName)!==null&&i!==void 0?i:Li.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new In}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},e.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},e.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return K(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return K(this,void 0,void 0,function*(){var i;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(e.type==="offer"){let{stereoMids:a,nackMids:c}=o8(e);this.remoteStereoMids=a,this.remoteNackMids=c}else if(e.type==="answer"){const a=Ts.parse((i=e.sdp)!==null&&i!==void 0?i:"");a.media.forEach(c=>{c.type==="audio"&&this.trackBitrates.some(l=>{if(!l.transceiver||c.mid!=l.transceiver.mid)return!1;let d=0;if(c.rtp.some(m=>m.codec.toUpperCase()===l.codec.toUpperCase()?(d=m.payload,!0):!1),d===0)return!0;let f=!1;for(const m of c.fmtp)if(m.payload===d){m.config=m.config.split(";").filter(p=>!p.includes("maxaveragebitrate")).join(";"),l.maxbr>0&&(m.config+=";maxaveragebitrate=".concat(l.maxbr*1e3)),f=!0;break}return f||l.maxbr>0&&c.fmtp.push({payload:d,config:"maxaveragebitrate=".concat(l.maxbr*1e3)}),!0})}),r=Ts.write(a)}return yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(a=>{this.pc.addIceCandidate(a)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Fo.NegotiationComplete),e.sdp&&Ts.parse(e.sdp).media.forEach(c=>{c.type==="video"&&this.emit(Fo.RTPVideoPayloadTypes,c.rtp)})),!0})}createAndSendOffer(e){return K(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const l=this._pc.remoteDescription;if(e?.iceRestart&&l)yield this._pc.setRemoteDescription(l);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const a=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:a.sdp},this.logContext));const c=Ts.parse((n=a.sdp)!==null&&n!==void 0?n:"");if(c.media.forEach(l=>{Ew(l),l.type==="audio"?Cw(l,[],[]):l.type==="video"&&this.trackBitrates.some(d=>{if(!l.msid||!d.cid||!l.msid.includes(d.cid))return!1;let f=0;if(l.rtp.some(p=>p.codec.toUpperCase()===d.codec.toUpperCase()?(f=p.payload,!0):!1),f===0||(Xi(d.codec)&&!Ta()&&this.ensureVideoDDExtensionForSVC(l,c),d.codec!=="av1"))return!0;const m=Math.round(d.maxbr*s8);for(const p of l.fmtp)if(p.payload===f){p.config.includes("x-google-start-bitrate")||(p.config+=";x-google-start-bitrate=".concat(m));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(a,Ts.write(c)),this.onOffer(a,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),i=Ts.parse((e=n.sdp)!==null&&e!==void 0?e:"");return i.media.forEach(r=>{Ew(r),r.type==="audio"&&Cw(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Ts.write(i)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new mn("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new mn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return K(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const i=new Map,r=new Map;if((yield this._pc.getStats()).forEach(l=>{switch(l.type){case"transport":n=l.selectedCandidatePairId;break;case"candidate-pair":n===""&&l.selected&&(n=l.id),i.set(l.id,l);break;case"remote-candidate":r.set(l.id,"".concat(l.address,":").concat(l.port));break}}),n==="")return;const c=(e=i.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(c!==void 0)return r.get(c)})}setMungedSDP(e,n,i){return K(this,void 0,void 0,function*(){if(n){const r=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(a){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:a,sdp:n})),e.sdp=r}}try{i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(r){let a="unknown error";r instanceof Error?a=r.message:typeof r=="string"&&(a=r);const c={error:a,sdp:e.sdp};throw!i&&this.pc.remoteDescription&&(c.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:c})),new dv(a)}})}ensureVideoDDExtensionForSVC(e,n){var i,r;if(!((i=e.ext)===null||i===void 0?void 0:i.some(c=>c.uri===uw))){if(this.ddExtID===0){let c=0;n.media.forEach(l=>{var d;l.type==="video"&&((d=l.ext)===null||d===void 0||d.forEach(f=>{f.value>c&&(c=f.value)}))}),this.ddExtID=c+1}(r=e.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:uw})}}}function Cw(t,e,n){let i=0;t.rtp.some(r=>r.codec==="opus"?(i=r.payload,!0):!1),i>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(r=>r.payload===i&&r.type==="nack")&&t.rtcpFb.push({payload:i,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(r=>r.payload===i?(r.config.includes("stereo=1")||(r.config+=";stereo=1"),!0):!1))}function o8(t){var e;const n=[],i=[],r=Ts.parse((e=t.sdp)!==null&&e!==void 0?e:"");let a=0;return r.media.forEach(c=>{var l;c.type==="audio"&&(c.rtp.some(d=>d.codec==="opus"?(a=d.payload,!0):!1),!((l=c.rtcpFb)===null||l===void 0)&&l.some(d=>d.payload===a&&d.type==="nack")&&i.push(c.mid),c.fmtp.some(d=>d.payload===a?(d.config.includes("sprop-stereo=1")&&n.push(c.mid),!0):!1))}),{stereoMids:n,nackMids:i}}function Ew(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}const xv="vp8",c8={audioPreset:fv.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:V0.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:xv,backupCodec:!0,preConnectBuffer:!1},QR={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},eA={deviceId:{ideal:"default"},resolution:ql.h720.resolution},l8={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new W6,disconnectOnPageLeave:!0,webAudioMix:!1},Y0={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Vt;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Vt||(Vt={}));class u8{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,i){var r;this.peerConnectionTimeout=Y0.peerConnectionTimeout,this.log=ot,this.updateState=()=>{var a;const c=this.state,l=this.requiredTransports.map(d=>d.getConnectionState());l.every(d=>d==="connected")?this.state=Vt.CONNECTED:l.some(d=>d==="failed")?this.state=Vt.FAILED:l.some(d=>d==="connecting")?this.state=Vt.CONNECTING:l.every(d=>d==="closed")?this.state=Vt.CLOSED:l.some(d=>d==="closed")?this.state=Vt.CLOSING:l.every(d=>d==="new")&&(this.state=Vt.NEW),c!==this.state&&(this.log.debug("pc state change: from ".concat(Vt[c]," to ").concat(Vt[this.state]),this.logContext),(a=this.onStateChange)===null||a===void 0||a.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Br((r=i.loggerName)!==null&&r!==void 0?r:Li.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n,this.publisher=new ww(e,i),this.subscriber=new ww(e,i),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=a=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,a,Ii.PUBLISHER)},this.subscriber.onIceCandidate=a=>{var c;(c=this.onIceCandidate)===null||c===void 0||c.call(this,a,Ii.SUBSCRIBER)},this.subscriber.onDataChannel=a=>{var c;(c=this.onDataChannel)===null||c===void 0||c.call(this,a)},this.subscriber.onTrack=a=>{var c;(c=this.onTrack)===null||c===void 0||c.call(this,a)},this.publisher.onOffer=(a,c)=>{var l;(l=this.onPublisherOffer)===null||l===void 0||l.call(this,a,c)},this.state=Vt.NEW,this.connectionLock=new In,this.remoteOfferLock=new In}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return K(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(i){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:i}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return K(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return K(this,void 0,void 0,function*(){n===Ii.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return K(this,void 0,void 0,function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const i=yield this.remoteOfferLock.lock();try{return(yield this.subscriber.setRemoteDescription(e,n))?yield this.subscriber.createAndSetAnswer():void 0}finally{i()}})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return K(this,void 0,void 0,function*(){var i;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(a=>this.ensureTransportConnected(a,e,n)))}finally{r()}})}negotiate(e){return K(this,void 0,void 0,function*(){return new Promise((n,i)=>K(this,void 0,void 0,function*(){const r=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),a=()=>{clearTimeout(r),i("negotiation aborted")};e.signal.addEventListener("abort",a),this.publisher.once(Fo.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Fo.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(c=>{clearTimeout(r),i(c)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Ii.PUBLISHER?this.publisher.getConnectedAddress():e===Ii.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return K(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return function*(){if(i.getConnectionState()!=="connected")return new Promise((d,f)=>K(a,void 0,void 0,function*(){const m=()=>{this.log.warn("abort transport connection",this.logContext),Rn.clearTimeout(p),f(new Et("room connection has been cancelled",lt.Cancelled))};r?.signal.aborted&&m(),r?.signal.addEventListener("abort",m);const p=Rn.setTimeout(()=>{r?.signal.removeEventListener("abort",m),f(new Et("could not establish pc connection",lt.InternalError))},c);for(;this.state!==Vt.CONNECTED;)if(yield Yn(50),r?.signal.aborted){f(new Et("room connection has been cancelled",lt.Cancelled));return}Rn.clearTimeout(p),r?.signal.removeEventListener("abort",m),d()}))}()})}}class qt extends Error{constructor(e,n,i){super(n),this.code=e,this.message=kw(n,qt.MAX_MESSAGE_BYTES),this.data=i?kw(i,qt.MAX_DATA_BYTES):void 0}static fromProto(e){return new qt(e.code,e.message,e.data)}toProto(){return new Wk({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new qt(qt.ErrorCode[e],qt.ErrorMessage[e],n)}}qt.MAX_MESSAGE_BYTES=256;qt.MAX_DATA_BYTES=15360;qt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};qt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const tA=15360;function W0(t){return new TextEncoder().encode(t).length}function kw(t,e){if(W0(t)<=e)return t;let n=0,i=t.length;const r=new TextEncoder;for(;n<i;){const a=Math.floor((n+i+1)/2);r.encode(t.slice(0,a)).length<=e?n=a:i=a-1}return t.slice(0,n)}const $0=2e3;function $f(t,e){if(!e)return 0;let n,i;return"bytesReceived"in t?(n=t.bytesReceived,i=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,i=e.bytesSent),n===void 0||i===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-i)*8*1e3/(t.timestamp-e.timestamp)}const X0=typeof MediaRecorder<"u";class d8{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const f8=X0?MediaRecorder:d8;class h8 extends f8{constructor(e,n){if(!X0)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let i,r;const a=()=>r===void 0,c=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",c),this.removeEventListener("error",l),r?.close(),r=void 0},l=d=>{r?.error(d),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",c),this.removeEventListener("error",l),r=void 0};this.byteStream=new ReadableStream({start:d=>{r=d,i=f=>K(this,void 0,void 0,function*(){let m;if(f.data.arrayBuffer){const p=yield f.data.arrayBuffer();m=new Uint8Array(p)}else if(f.data.byteArray)m=f.data.byteArray;else throw new Error("no data available!");a()||d.enqueue(m)}),this.addEventListener("dataavailable",i)},cancel:()=>{c()}}),this.addEventListener("stop",c),this.addEventListener("error",l)}}function m8(){return X0}const p8=1e3,g8=1e4;class nA extends te{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=arguments.length>4?arguments[4]:void 0;super(e,n,a),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=G0(()=>K(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>K(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Ee.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new In,this.pauseUpstreamLock=new In,this.processorLock=new In,this.restartLock=new In,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==te.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return K(this,void 0,void 0,function*(){var i;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(a=>{jo(this._mediaStreamTrack,a)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e){const a=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(Ao(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}finally{a()}}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(a=>{Ao(r??e,a)}))})}waitForDimensions(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p8;return function*(){var i;if(e.kind===te.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=ai())===null||i===void 0?void 0:i.os)==="iOS"&&(yield Yn(10));const r=Date.now();for(;Date.now()-r<n;){const a=e.dimensions;if(a)return a;yield Yn(50)}throw new Ur("unable to get track dimensions after timeout")}()})}setDeviceId(e){return K(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Ps(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Ps(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){if(e.source===te.Source.ScreenShare)return;const{deviceId:i,groupId:r}=e._mediaStreamTrack.getSettings(),a=e.kind===te.Kind.Audio?"audioinput":"videoinput";return n?Tn.getInstance().normalizeDeviceId(a,i,r):i}()})}mute(){return K(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return K(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return K(this,void 0,void 0,function*(){if(!this.sender)throw new Ur("unable to replace an unpublished track");let i,r;return typeof n=="boolean"?i=n:n!==void 0&&(i=n.userProvidedTrack,r=n.stopProcessor),this.providedByUser=i??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),r&&this.processor&&(yield this.stopProcessor()),this})}restart(e){return K(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:i,facingMode:r}=e,a=$6(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const c={audio:!1,video:!1};this.kind===te.Kind.Video?c.video=i||r?{deviceId:i,facingMode:r}:!0:c.audio=i?{deviceId:i}:!0,this.attachedElements.forEach(f=>{jo(this.mediaStreamTrack,f)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const d=(yield navigator.mediaDevices.getUserMedia(c)).getTracks()[0];return yield d.applyConstraints(a),d.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(d),this._constraints=e,this.emit(Ee.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ee.Muted:Ee.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),GR()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(Ee.UpstreamPaused,this);const i=ai();if(i?.name==="Safari"&&ji(i.version,"12.0")<0)throw new F0("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return K(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(Ee.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return K(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var a;const c=yield i.processorLock.lock();try{i.log.debug("setting up processor",i.logContext);const l=document.createElement(i.kind),d={kind:i.kind,track:i._mediaStreamTrack,element:l,audioContext:i.audioContext};if(yield n.init(d),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.stopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(Ao(i._mediaStreamTrack,l),l.muted=!0,l.play().catch(f=>{f instanceof DOMException&&f.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:f})),setTimeout(()=>{l.play().catch(m=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:m}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:f}))}),i.processor=n,i.processorElement=l,i.processor.processedTrack){for(const f of i.attachedElements)f!==i.processorElement&&r&&(jo(i._mediaStreamTrack,f),Ao(i.processor.processedTrack,f));yield(a=i.sender)===null||a===void 0?void 0:a.replaceTrack(i.processor.processedTrack)}i.emit(Ee.TrackProcessorUpdate,i.processor)}finally{c()}}()})}getProcessor(){return this.processor}stopProcessor(){return K(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var i,r;e.processor&&(e.log.debug("stopping processor",e.logContext),(i=e.processor.processedTrack)===null||i===void 0||i.stop(),yield e.processor.destroy(),e.processor=void 0,n||((r=e.processorElement)===null||r===void 0||r.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(Ee.TrackProcessorUpdate))}()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!m8()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new h8(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},g8)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class Ef extends nA{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;super(e,te.Kind.Audio,n,i,a),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>K(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let c;try{c=yield this.getSenderStats()}catch(l){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:l}));return}c&&this.prevStats&&(this._currentBitrate=$f(c,this.prevStats)),this.prevStats=c}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(Ee.AudioTrackFeatureUpdate,this,Sn.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(Ee.AudioTrackFeatureUpdate,this,Sn.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===te.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ps(this._constraints.deviceId);return this.source===te.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return K(this,void 0,void 0,function*(){let n;if(e){const i=z0({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return K(this,void 0,void 0,function*(){const i=yield n.restart.call(this,e);return this.checkForSilence(),i})}startMonitor(){Kn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},$0)))}setProcessor(e){return K(this,void 0,void 0,function*(){var n;const i=yield this.processorLock.lock();try{if(!rr()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(r),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(Ee.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return K(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(r=>{r.type==="outbound-rtp"&&(i={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),i})}checkForSilence(){return K(this,void 0,void 0,function*(){const e=yield XR(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(Ee.AudioSilenceDetected)),e})}}function v8(t,e,n){switch(t.kind){case"audio":return new Ef(t,e,!1,void 0,n);case"video":return new kf(t,e,!1,n);default:throw new Ur("unsupported track type: ".concat(t.kind))}}const y8=Object.values(ql),b8=Object.values(hv),S8=Object.values(V0),T8=[ql.h180,ql.h360],x8=[hv.h180,hv.h360],w8=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var i,r;return new xt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=t.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,t.encoding.priority)}),wv=["q","h","f"];function Cv(t,e,n,i){var r,a;let c=i?.videoEncoding;t&&(c=i?.screenShareEncoding);const l=i?.simulcast,d=i?.scalabilityMode,f=i?.videoCodec;if(!c&&!l&&!d||!e||!n)return[{}];c||(c=E8(t,e,n,f),ot.debug("using video encoding",c));const m=c.maxFramerate,p=new xt(e,n,c.maxBitrate,c.maxFramerate,c.priority);if(d&&Xi(f)){const x=new iA(d),b=[];if(x.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(d));const P=ai();if(wf()||rr()||P?.name==="Chrome"&&ji(P?.version,"113")<0){const k=x.suffix=="h"?2:3,O=R5(P);for(let N=0;N<x.spatial;N+=1)b.push({rid:wv[2-N],maxBitrate:c.maxBitrate/Math.pow(k,N),maxFramerate:p.encoding.maxFramerate,scaleResolutionDownBy:O?Math.pow(2,N):void 0});b[0].scalabilityMode=d}else b.push({maxBitrate:c.maxBitrate,maxFramerate:p.encoding.maxFramerate,scalabilityMode:d});return p.encoding.priority&&(b[0].priority=p.encoding.priority,b[0].networkPriority=p.encoding.priority),ot.debug("using svc encoding",{encodings:b}),b}if(!l)return[c];let v=[];t?v=(r=Aw(i?.screenShareSimulcastLayers))!==null&&r!==void 0?r:Rw(t,p):v=(a=Aw(i?.videoSimulcastLayers))!==null&&a!==void 0?a:Rw(t,p);let S;if(v.length>0){const x=v[0];v.length>1&&([,S]=v);const b=Math.max(e,n);if(b>=960&&S)return Xp(e,n,[x,S,p],m);if(b>=480)return Xp(e,n,[x,p],m)}return Xp(e,n,[p])}function C8(t,e,n){var i,r,a,c;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&ot.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const l=t.mediaStreamTrack.getSettings(),d=(i=l.width)!==null&&i!==void 0?i:(r=t.dimensions)===null||r===void 0?void 0:r.width,f=(a=l.height)!==null&&a!==void 0?a:(c=t.dimensions)===null||c===void 0?void 0:c.height;return t.source===te.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Cv(t.source===te.Source.ScreenShare,d,f,n)}function E8(t,e,n,i){const r=k8(t,e,n);let{encoding:a}=r[0];const c=Math.max(e,n);for(let l=0;l<r.length;l+=1){const d=r[l];if(a=d.encoding,d.width>=c)break}if(i)switch(i){case"av1":case"h265":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.7;break;case"vp9":a=Object.assign({},a),a.maxBitrate=a.maxBitrate*.85;break}return a}function k8(t,e,n){if(t)return S8;const i=e>n?e/n:n/e;return Math.abs(i-16/9)<Math.abs(i-4/3)?y8:b8}function Rw(t,e){if(t)return w8(e);const{width:n,height:i}=e,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?T8:x8}function Xp(t,e,n,i){const r=[];if(n.forEach((a,c)=>{if(c>=wv.length)return;const l=Math.min(t,e),f={rid:wv[c],scaleResolutionDownBy:Math.max(1,l/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate},m=i&&a.encoding.maxFramerate?Math.min(i,a.encoding.maxFramerate):a.encoding.maxFramerate;m&&(f.maxFramerate=m);const p=Go()||c===0;a.encoding.priority&&p&&(f.priority=a.encoding.priority,f.networkPriority=a.encoding.priority),r.push(f)}),rr()&&WR()==="ios"){let a;r.forEach(l=>{a?l.maxFramerate&&l.maxFramerate>a&&(a=l.maxFramerate):a=l.maxFramerate});let c=!0;r.forEach(l=>{var d;l.maxFramerate!=a&&(c&&(c=!1,ot.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),ot.info('Setting framerate of encoding "'.concat((d=l.rid)!==null&&d!==void 0?d:"",'" to ').concat(a)),l.maxFramerate=a)})}return r}function Aw(t){if(t)return t.sort((e,n)=>{const{encoding:i}=e,{encoding:r}=n;return i.maxBitrate>r.maxBitrate?1:i.maxBitrate<r.maxBitrate?-1:i.maxBitrate===r.maxBitrate&&i.maxFramerate&&r.maxFramerate?i.maxFramerate>r.maxFramerate?1:-1:0})}class iA{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function R8(t){return t.source===te.Source.ScreenShare||t.constraints.height&&Ps(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const A8=5e3;class kf extends nA{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(e,te.Kind.Video,n,i,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>K(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(d){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:d}));return}const c=new Map(a.map(d=>[d.rid,d])),l=a.some(d=>d.qualityLimitationReason==="cpu");if(l!==this.isCpuConstrained&&(this.isCpuConstrained=l,this.isCpuConstrained&&this.emit(Ee.CpuConstrained)),this.prevStats){let d=0;c.forEach((f,m)=>{var p;const v=(p=this.prevStats)===null||p===void 0?void 0:p.get(m);d+=$f(f,v)}),this._currentBitrate=d}this.prevStats=c}),this.senderLock=new In}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Kn())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},$0))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return K(this,void 0,void 0,function*(){var n,i,r,a,c;yield e.pauseUpstream.call(this);try{for(var l=!0,d=Ir(this.simulcastCodecs.values()),f;f=yield d.next(),n=f.done,!n;l=!0)a=f.value,l=!1,yield(c=a.sender)===null||c===void 0?void 0:c.replaceTrack(null)}catch(m){i={error:m}}finally{try{!l&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return K(this,void 0,void 0,function*(){var n,i,r,a,c;yield e.resumeUpstream.call(this);try{for(var l=!0,d=Ir(this.simulcastCodecs.values()),f;f=yield d.next(),n=f.done,!n;l=!0){a=f.value,l=!1;const m=a;yield(c=m.sender)===null||c===void 0?void 0:c.replaceTrack(m.mediaStreamTrack)}}catch(m){i={error:m}}finally{try{!l&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===te.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return K(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===te.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return K(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(r=>{var a;if(r.type==="outbound-rtp"){const c={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(a=r.rid)!==null&&a!==void 0?a:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},l=i.get(r.remoteId);l&&(c.jitter=l.jitter,c.packetsLost=l.packetsLost,c.roundTripTime=l.roundTripTime),n.push(c)}}),n.sort((r,a)=>{var c,l;return((c=a.frameWidth)!==null&&c!==void 0?c:0)-((l=r.frameWidth)!==null&&l!==void 0?l:0)}),n})}setPublishingQuality(e){const n=[];for(let i=si.LOW;i<=si.HIGH;i+=1)n.push(new L0({quality:i,enabled:i<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(Xi(this.codec),n)}restartTrack(e){return K(this,void 0,void 0,function*(){var n,i,r,a,c;let l;if(e){const p=z0({video:e});typeof p.video!="boolean"&&(l=p.video)}yield this.restart(l),this.isCpuConstrained=!1;try{for(var d=!0,f=Ir(this.simulcastCodecs.values()),m;m=yield f.next(),n=m.done,!n;d=!0){a=m.value,d=!1;const p=a;p.sender&&((c=p.sender.transport)===null||c===void 0?void 0:c.state)!=="closed"&&(p.mediaStreamTrack=this.mediaStreamTrack.clone(),yield p.sender.replaceTrack(p.mediaStreamTrack))}}catch(p){i={error:p}}finally{try{!d&&!n&&(r=f.return)&&(yield r.call(f))}finally{if(i)throw i.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return K(this,arguments,void 0,function(i){var r=this;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){var c,l,d,f,m,p;if(yield n.setProcessor.call(r,i,a),!((m=r.processor)===null||m===void 0)&&m.processedTrack)try{for(var v=!0,S=Ir(r.simulcastCodecs.values()),x;x=yield S.next(),c=x.done,!c;v=!0)f=x.value,v=!1,yield(p=f.sender)===null||p===void 0?void 0:p.replaceTrack(r.processor.processedTrack)}catch(b){l={error:b}}finally{try{!v&&!c&&(d=S.return)&&(yield d.call(S))}finally{if(l)throw l.error}}}()})}setDegradationPreference(e){return K(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,i),i}setSimulcastTrackSender(e,n){const i=this.simulcastCodecs.get(e);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},A8))}setPublishingCodecs(e){return K(this,void 0,void 0,function*(){var n,i,r,a,c,l,d;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(Xi(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const f=[];try{for(n=!0,i=Ir(e);r=yield i.next(),a=r.done,!a;n=!0){d=r.value,n=!1;const m=d;if(!this.codec||this.codec===m.codec)yield this.setPublishingLayers(Xi(m.codec),m.qualities);else{const p=this.simulcastCodecs.get(m.codec);if(this.log.debug("try setPublishingCodec for ".concat(m.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:p})),!p||!p.sender){for(const v of m.qualities)if(v.enabled){f.push(m.codec);break}}else p.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(m.codec),this.logContext),yield Pw(p.sender,p.encodings,m.qualities,this.senderLock,Xi(m.codec),this.log,this.logContext))}}}catch(m){c={error:m}}finally{try{!n&&!a&&(l=i.return)&&(yield l.call(i))}finally{if(c)throw c.error}}return f})}setPublishingLayers(e,n){return K(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield Pw(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return K(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,r)=>{var a;return Object.assign(Object.assign({},i),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((a=this.mediaStreamTrack.getSettings().height)!==null&&a!==void 0?a:360)/360)),scalabilityMode:r===0&&Xi(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),GR()&&this.isInBackground&&this.source===te.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Pw(t,e,n,i,r,a,c){return K(this,void 0,void 0,function*(){const l=yield i.lock();a.debug("setPublishingLayersForSender",Object.assign(Object.assign({},c),{sender:t,qualities:n,senderEncodings:e}));try{const d=t.getParameters(),{encodings:f}=d;if(!f)return;if(f.length!==e.length){a.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},c),{encodings:f,senderEncodings:e}));return}let m=!1;!1&&f[0].scalabilityMode||(r&&n.some(S=>S.enabled)&&n.forEach(S=>S.enabled=!0),f.forEach((v,S)=>{var x;let b=(x=v.rid)!==null&&x!==void 0?x:"";b===""&&(b="q");const P=rA(b),k=n.find(O=>O.quality===P);k&&v.active!==k.enabled&&(m=!0,v.active=k.enabled,a.debug("setting layer ".concat(k.quality," to ").concat(v.active?"enabled":"disabled"),c),Go()&&(k.enabled?(v.scaleResolutionDownBy=e[S].scaleResolutionDownBy,v.maxBitrate=e[S].maxBitrate,v.maxFrameRate=e[S].maxFrameRate):(v.scaleResolutionDownBy=4,v.maxBitrate=10,v.maxFrameRate=2)))})),m&&(d.encodings=f,a.debug("setting encodings",Object.assign(Object.assign({},c),{encodings:d.encodings})),yield t.setParameters(d))}finally{l()}})}function rA(t){switch(t){case"f":return si.HIGH;case"h":return si.MEDIUM;case"q":return si.LOW;default:return si.HIGH}}function _w(t,e,n,i){if(!n)return[new ma({quality:si.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(i){const r=n[0].scalabilityMode,a=new iA(r),c=[],l=a.suffix=="h"?1.5:2,d=a.suffix=="h"?2:3;for(let f=0;f<a.spatial;f+=1)c.push(new ma({quality:Math.min(si.HIGH,a.spatial-1)-f,width:Math.ceil(t/Math.pow(l,f)),height:Math.ceil(e/Math.pow(l,f)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(d,f)):0,ssrc:0}));return c}return n.map(r=>{var a,c,l;const d=(a=r.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let f=rA((c=r.rid)!==null&&c!==void 0?c:"");return new ma({quality:f,width:Math.ceil(t/d),height:Math.ceil(e/d),bitrate:(l=r.maxBitrate)!==null&&l!==void 0?l:0,ssrc:0})})}const Dw="_lossy",Mw="_reliable",P8=2*1e3,Zp="leave-reconnect",_8=3e4;var _i;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(_i||(_i={}));class D8 extends lr.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Y0.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=_i.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=ot,this.reliableDataSequence=1,this.reliableMessageBuffer=new yw,this.reliableReceivedState=new t8(_8),this.handleDataChannel=i=>K(this,[i],void 0,function(r){var a=this;let{channel:c}=r;return function*(){if(c){if(c.label===Mw)a.reliableDCSub=c;else if(c.label===Dw)a.lossyDCSub=c;else return;a.log.debug("on data channel ".concat(c.id,", ").concat(c.label),a.logContext),c.onmessage=a.handleDataMessage}}()}),this.handleDataMessage=i=>K(this,void 0,void 0,function*(){var r,a;const c=yield this.dataProcessLock.lock();try{let l;if(i.data instanceof ArrayBuffer)l=i.data;else if(i.data instanceof Blob)l=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const d=zn.fromBinary(new Uint8Array(l));if(d.sequence>0&&d.participantSid!==""){const f=this.reliableReceivedState.get(d.participantSid);if(f&&d.sequence<=f)return;this.reliableReceivedState.set(d.participantSid,d.sequence)}((r=d.value)===null||r===void 0?void 0:r.case)==="speaker"?this.emit(De.ActiveSpeakersUpdate,d.value.value.speakers):(((a=d.value)===null||a===void 0?void 0:a.case)==="user"&&O8(d,d.value.value),this.emit(De.DataPacketReceived,d))}finally{c()}}),this.handleDataError=i=>{const a=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:c}=i.error;this.log.error("DataChannel error on ".concat(a,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:c}))}else this.log.error("Unknown DataChannel error on ".concat(a),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const a=i.currentTarget.maxRetransmits===0?tt.LOSSY:tt.RELIABLE;this.updateAndEmitDCBufferStatus(a)},this.handleDisconnect=(i,r)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=d=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(d,"ms. giving up"),this.logContext),this.emit(De.Disconnected),this.close()},c=Date.now()-this.reconnectStart;let l=this.getNextRetryDelay({elapsedMs:c,retryCount:this.reconnectAttempts});if(l===null){a(c);return}i===Zp&&(l=0),this.log.debug("reconnecting in ".concat(l,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Rn.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),l)},this.waitForRestarted=()=>new Promise((i,r)=>{this.pcState===_i.Connected&&i();const a=()=>{this.off(De.Disconnected,c),i()},c=()=>{this.off(De.Restarted,a),r()};this.once(De.Restarted,a),this.once(De.Disconnected,c)}),this.updateAndEmitDCBufferStatus=i=>{const r=this.isBufferStatusLow(i);typeof r<"u"&&r!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,r),this.emit(De.DCBufferStatusChanged,r,i))},this.isBufferStatusLow=i=>{const r=this.dataChannelForKind(i);if(r)return i===tt.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(r.bufferedAmount),r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Pt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(bo.RR_SIGNAL_DISCONNECTED))},this.log=Br((n=e.loggerName)!==null&&n!==void 0?n:Li.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new q0(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new In,this.dataProcessLock=new In,this.dcBufferStatus=new Map([[tt.LOSSY,!0],[tt.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(De.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(De.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(De.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(De.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(De.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(De.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(De.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(De.SignalRequestResponse,i)}get logContext(){var e,n,i,r,a,c;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(r=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.sid,participant:(c=(a=this.latestJoinResponse)===null||a===void 0?void 0:a.participant)===null||c===void 0?void 0:c.identity,pID:this.participantSid}}join(e,n,i,r){return K(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const a=yield this.client.join(e,n,i,r);return this._isClosed=!1,this.latestJoinResponse=a,this.subscriberPrimary=a.subscriberPrimary,this.pcManager||(yield this.configure(a)),(!this.subscriberPrimary||a.fastPublish)&&this.negotiate(),this.clientConfiguration=a.clientConfiguration,this.emit(De.SignalConnected,a),a}catch(a){if(a instanceof Et&&a.reason===lt.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,i,r);throw a}})}close(){return K(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(De.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return K(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new yw,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return K(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Ur("a track with the same ID has already been published");return new Promise((n,i)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],i(new Et("publication of local track timed out, no response from server",lt.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:a=>{clearTimeout(r),n(a)},reject:()=>{clearTimeout(r),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return K(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return K(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==Vt.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new u8(r,e.subscriberPrimary,this.loggerOptions),this.emit(De.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(a,c)=>{this.client.sendIceCandidate(a,c)},this.pcManager.onPublisherOffer=(a,c)=>{this.client.sendOffer(a,c)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(a,c,l)=>K(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(a),this.logContext),["closed","disconnected","failed"].includes(c)&&(this.publisherConnectionPromise=void 0),a===Vt.CONNECTED){const m=this.pcState===_i.New;this.pcState=_i.Connected,m&&this.emit(De.Connected,e)}else a===Vt.FAILED&&this.pcState===_i.Connected&&(this.pcState=_i.Disconnected,this.handleDisconnect("peerconnection failed",l==="failed"?bo.RR_SUBSCRIBER_FAILED:bo.RR_PUBLISHER_FAILED));const d=this.client.isDisconnected||this.client.currentState===Pt.RECONNECTING,f=[Vt.FAILED,Vt.CLOSING,Vt.CLOSED].includes(a);d&&f&&!this._isClosed&&this.emit(De.Offline)}),this.pcManager.onTrack=a=>{this.emit(De.MediaTrackAdded,a.track,a.streams[0],a.receiver)},M8((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n)=>K(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n)=>K(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;const i=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);i&&this.client.sendAnswer(i,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:i}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],i(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(De.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(De.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(De.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(De.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(De.RoomMoved,e)},this.client.onClose=()=>{this.handleDisconnect("signal",bo.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case Uo.DISCONNECT:this.emit(De.Disconnected,e?.reason),this.close();break;case Uo.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Zp);break;case Uo.RESUME:this.handleDisconnect(Zp)}}}makeRTCConfiguration(e){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),e.iceServers&&!i.iceServers){const r=[];e.iceServers.forEach(a=>{const c={urls:a.urls};a.username&&(c.username=a.username),a.credential&&(c.credential=a.credential),r.push(c)}),i.iceServers=r}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Hl.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Dw,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(Mw,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,i){return K(this,void 0,void 0,function*(){if(mv())return yield this.createTransceiverRTCRtpSender(e,n,i);if(pv())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new mn("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,i,r){return K(this,void 0,void 0,function*(){if(mv())return this.createSimulcastTransceiverSender(e,n,i,r);if(pv())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new mn("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,i){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("publisher is closed");const r=[];e.mediaStream&&r.push(e.mediaStream),Aa(e)&&(e.codec=n.videoCodec);const a={direction:"sendonly",streams:r};return i&&(a.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,a)).sender})}createSimulcastTransceiverSender(e,n,i,r){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("publisher is closed");const a={direction:"sendonly"};r&&(a.sendEncodings=r);const c=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,a);if(i.videoCodec)return e.setSimulcastTrackSender(i.videoCodec,c.sender),c.sender})}createRTCRtpSender(e){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return K(this,void 0,void 0,function*(){var n,i,r;if(!this._isClosed){if(this.attemptingReconnect){ot.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Hl.DISABLED||((r=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&r!==void 0?r:Vt.NEW)===Vt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(a){this.reconnectAttempts+=1;let c=!0;a instanceof mn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:a})),c=!1):a instanceof So||(this.fullReconnectOnNext=!0),c?this.handleDisconnect("reconnect",bo.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(De.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return K(this,void 0,void 0,function*(){var n,i,r;try{if(!this.url||!this.token)throw new mn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(De.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let a;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new So;a=yield this.join(e??this.url,this.token,this.signalOpts)}catch(c){throw c instanceof Et&&c.reason===lt.NotAllowed?new mn("could not reconnect, token might be expired"):new So}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(De.SignalRestarted,a),yield this.waitForPCReconnected(),this.client.currentState!==Pt.CONNECTED)throw new So("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(De.Restarted)}catch(a){const c=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(c){yield this.restartConnection(c);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),a}})}resumeConnection(e){return K(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new mn("could not reconnect, url or token not saved");if(!this.pcManager)throw new mn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(De.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(r){let a="";throw r instanceof Error&&(a=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof Et&&r.reason===lt.NotAllowed?new mn("could not reconnect, token might be expired"):r instanceof Et&&r.reason===lt.LeaveRequest?r:new So(a)}if(this.emit(De.SignalResumed),i){const r=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Pt.CONNECTED)throw new So("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i?.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(De.Resumed)})}waitForPCInitialConnection(e,n){return K(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return K(this,void 0,void 0,function*(){this.pcState=_i.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Yn(P8),!this.pcManager)throw new mn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=_i.Connected}catch(e){throw this.pcState=_i.Disconnected,new Et("could not establish PC connection, ".concat(e.message),lt.InternalError)}})}publishRpcResponse(e,n,i,r){return K(this,void 0,void 0,function*(){const a=new zn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcResponse",value:new Yk({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(a,tt.RELIABLE)})}publishRpcAck(e,n){return K(this,void 0,void 0,function*(){const i=new zn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcAck",value:new Gk({requestId:n})}});yield this.sendDataPacket(i,tt.RELIABLE)})}sendDataPacket(e,n){return K(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(n),n===tt.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=e.toBinary(),r=this.dataChannelForKind(n);if(r){if(n===tt.RELIABLE&&this.reliableMessageBuffer.push({data:i,sequence:e.sequence}),this.attemptingReconnect)return;r.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return K(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(tt.RELIABLE);const n=this.dataChannelForKind(tt.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(tt.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,i)=>K(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const r=()=>i("Engine closed");for(this.once(De.Closing,r);!this.dcBufferStatus.get(e);)yield Yn(10);this.off(De.Closing,r),n()}}))}ensureDataTransportConnected(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return function*(){var a;if(!i.pcManager)throw new mn("PC manager is closed");const c=r?i.pcManager.subscriber:i.pcManager.publisher,l=r?"Subscriber":"Publisher";if(!c)throw new Et("".concat(l," connection not set"),lt.InternalError);let d=!1;!r&&!i.dataChannelForKind(n,r)&&(i.createDataChannels(),d=!0),!d&&!r&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(d=!0),d&&i.negotiate();const f=i.dataChannelForKind(n,r);if(f?.readyState==="open")return;const m=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<m;){if(c.isICEConnected&&((a=i.dataChannelForKind(n,r))===null||a===void 0?void 0:a.readyState)==="open")return;yield Yn(50)}throw new Et("could not establish ".concat(l," connection, state: ").concat(c.getICEConnectionState()),lt.InternalError)}()})}ensurePublisherConnected(e){return K(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Vt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return K(this,void 0,void 0,function*(){return new Promise((e,n)=>K(this,void 0,void 0,function*(){if(!this.pcManager){n(new dv("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,r=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(De.Closing,r),this.pcManager.publisher.once(Fo.RTPVideoPayloadTypes,a=>{const c=new Map;a.forEach(l=>{const d=l.codec.toLowerCase();O5(d)&&c.set(l.payload,d)}),this.emit(De.RTPVideoMapUpdate,c)});try{yield this.pcManager.negotiate(i),e()}catch(a){a instanceof dv&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",bo.RR_UNKNOWN),n(a)}finally{this.off(De.Closing,r)}}))})}dataChannelForKind(e,n){if(n){if(e===tt.LOSSY)return this.lossyDCSub;if(e===tt.RELIABLE)return this.reliableDCSub}else{if(e===tt.LOSSY)return this.lossyDC;if(e===tt.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var i,r;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const a=this.pcManager.subscriber.getLocalDescription(),c=this.pcManager.subscriber.getRemoteDescription(),l=(r=(i=this.signalOpts)===null||i===void 0?void 0:i.autoSubscribe)!==null&&r!==void 0?r:!0,d=new Array,f=new Array;e.forEach(m=>{m.isDesired!==l&&d.push(m.trackSid),m.isEnabled||f.push(m.trackSid)}),this.client.sendSyncState(new uR({answer:a?Cf({sdp:a.sdp,type:a.type}):void 0,offer:c?Cf({sdp:c.sdp,type:c.type}):void 0,subscription:new Gf({trackSids:d,subscribe:!l,participantTracks:[]}),publishTracks:z5(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:f,datachannelReceiveStates:this.reliableReceivedState.map((m,p)=>new dR({publisherSid:p,lastSeq:m}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(i,r)=>{i?.id!==void 0&&i.id!==null&&e.push(new fR({label:i.label,id:i.id,target:r}))};return n(this.dataChannelForKind(tt.LOSSY),Ii.PUBLISHER),n(this.dataChannelForKind(tt.RELIABLE),Ii.PUBLISHER),n(this.dataChannelForKind(tt.LOSSY,!0),Ii.SUBSCRIBER),n(this.dataChannelForKind(tt.RELIABLE,!0),Ii.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Rn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Kn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Kn()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class So extends Error{}function M8(t){return t!==void 0&&t>13}function O8(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const i=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=i,e.destinationIdentities=i}class Ev{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return vv(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return K(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(i=>!this.attemptedRegions.find(r=>r.url===i.url));if(n.length>0){const i=n[0];return this.attemptedRegions.push(i),ot.debug("next region: ".concat(i.region)),i.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return K(this,void 0,void 0,function*(){const n=yield fetch("".concat(N8(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const i=yield n.json();return this.lastUpdateAt=Date.now(),i}else throw new Et("Could not fetch region settings: ".concat(n.statusText),n.status===401?lt.NotAllowed:lt.InternalError,n.status)})}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}function N8(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class sA{get info(){return this._info}constructor(e,n,i){this.reader=n,this.totalByteSize=i,this._info=e,this.bytesReceived=0}}class I8 extends sA{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength;const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>K(this,void 0,void 0,function*(){try{const{done:n,value:i}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:i.content})}catch{return{done:!0,value:void 0}}}),return(){return K(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return K(this,void 0,void 0,function*(){var e,n,i,r;let a=new Set;try{for(var c=!0,l=Ir(this),d;d=yield l.next(),e=d.done,!e;c=!0){r=d.value,c=!1;const f=r;a.add(f)}}catch(f){n={error:f}}finally{try{!c&&!e&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return Array.from(a)})}}class U8 extends sA{constructor(e,n,i){super(e,n,i),this.receivedChunks=new Map}handleChunkReceived(e){var n;const i=of(e.chunkIndex),r=this.receivedChunks.get(i);if(r&&r.version>e.version)return;this.receivedChunks.set(i,e),this.bytesReceived+=e.content.byteLength;const a=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,a)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder;return{next:()=>K(this,void 0,void 0,function*(){try{const{done:i,value:r}=yield e.read();return i?{done:!0,value:void 0}:(this.handleChunkReceived(r),{done:!1,value:n.decode(r.content)})}catch{return{done:!0,value:void 0}}}),return(){return K(this,void 0,void 0,function*(){return e.releaseLock(),{done:!0,value:void 0}})}}}readAll(){return K(this,void 0,void 0,function*(){var e,n,i,r;let a="";try{for(var c=!0,l=Ir(this),d;d=yield l.next(),e=d.done,!e;c=!0)r=d.value,c=!1,a+=r}catch(f){n={error:f}}finally{try{!c&&!e&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return a})}}class aA{constructor(e,n,i){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=i,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return K(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class L8 extends aA{}class j8 extends aA{}class oA extends te{constructor(e,n,i,r,a){super(e,i,a),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ee.Muted:Ee.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=i=>{i.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(Ee.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return K(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),$0)),H5()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:r,rtpTimestamp:a}=i;a&&this.rtpTimestamp!==a&&(this.emit(Ee.TimeSyncUpdate,{timestamp:r,rtpTimestamp:a}),this.rtpTimestamp=a)}};e()}}class cA extends oA{constructor(e,n,i,r,a,c){super(e,n,te.Kind.Audio,i,c),this.monitorReceiver=()=>K(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=$f(l,this.prevStats)),this.prevStats=l}),this.audioContext=r,this.webAudioPluginNodes=[],a&&(this.sinkId=a.deviceId)}setVolume(e){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):i.volume=e;rr()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(rr())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return K(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(gv(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&gv(e)&&e.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{i.connect(r),i=r}),this.gainNode=e.createGain(),i.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(Ee.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(Ee.AudioPlaybackFailed,r)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return K(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const Jp=100;class B8 extends oA{constructor(e,n,i,r,a){super(e,n,te.Kind.Video,i,a),this.elementInfos=[],this.monitorReceiver=()=>K(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const c=yield this.getReceiverStats();c&&this.prevStats&&this.receiver&&(this._currentBitrate=$f(c,this.prevStats)),this.prevStats=c}),this.debouncedHandleResize=G0(()=>{this.updateDimensions()},Jp),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?jo(this._mediaStreamTrack,n):Ao(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new F8(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===e);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return K(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,i="",r=new Map;return e.forEach(a=>{a.type==="inbound-rtp"?(i=a.codecId,n={type:"video",streamId:a.id,framesDecoded:a.framesDecoded,framesDropped:a.framesDropped,framesReceived:a.framesReceived,packetsReceived:a.packetsReceived,packetsLost:a.packetsLost,frameWidth:a.frameWidth,frameHeight:a.frameHeight,pliCount:a.pliCount,firCount:a.firCount,nackCount:a.nackCount,jitter:a.jitter,timestamp:a.timestamp,bytesReceived:a.bytesReceived,decoderImplementation:a.decoderImplementation}):a.type==="codec"&&r.set(a.id,a)}),n&&i!==""&&r.get(i)&&(n.mimeType=r.get(i).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(i=>i.element===e);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return K(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const i=this.elementInfos.reduce((l,d)=>Math.max(l,d.visibilityChangedAt||0),0),r=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,a=this.elementInfos.some(l=>l.pictureInPicture),c=this.elementInfos.some(l=>l.visible)&&!r||a;if(this.lastVisible!==c){if(!c&&Date.now()-i<Jp){Rn.setTimeout(()=>{this.updateVisibility()},Jp);return}this.lastVisible=c,this.emit(Ee.VisibilityChanged,c,this)}}updateDimensions(){var e,n;let i=0,r=0;const a=this.getPixelDensity();for(const c of this.elementInfos){const l=c.width()*a,d=c.height()*a;l+d>i+r&&(i=l,r=d)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:i,height:r},this.emit(Ee.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?dw():n||(dw()>2?2:1)}}class F8{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=i=>{var r;const{target:a,isIntersecting:c}=i;a===this.element&&(this.isIntersecting=c,this.isPiP=wl(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var i,r,a;(r=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=wl(this.element),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=wl(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=e,this.isIntersecting=n??kv(e),this.isPiP=Kn()&&wl(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,i;this.isIntersecting=kv(this.element),this.isPiP=wl(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,hw().observe(this.element),fw().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,i,r,a;(e=hw())===null||e===void 0||e.unobserve(this.element),(n=fw())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(a=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||a===void 0||a.removeEventListener("pagehide",this.onLeavePiP)}}function wl(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?kv(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function kv(t,e){const n=e||window;let i=t.offsetTop,r=t.offsetLeft;const a=t.offsetWidth,c=t.offsetHeight,{hidden:l}=t,{display:d}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,i+=t.offsetTop,r+=t.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+c>n.pageYOffset&&r+a>n.pageXOffset&&!l&&d!=="none"}class Mr extends lr.EventEmitter{constructor(e,n,i,r){var a;super(),this.metadataMuted=!1,this.encryption=ii.NONE,this.log=ot,this.handleMuted=()=>{this.emit(Ee.Muted)},this.handleUnmuted=()=>{this.emit(Ee.Unmuted)},this.log=Br((a=r?.loggerName)!==null&&a!==void 0?a:Li.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=i,this.source=te.Source.Unknown}setTrack(e){this.track&&(this.track.off(Ee.Muted,this.handleMuted),this.track.off(Ee.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(Ee.Muted,this.handleMuted),e.on(Ee.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),st(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==ii.NONE}get audioTrack(){if(Qi(this.track))return this.track}get videoTrack(){if(Aa(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=te.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===te.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(Mr||(Mr={}));class Rv extends Mr{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Ee.Ended)},this.handleCpuConstrained=()=>{this.track&&Aa(this.track)&&this.emit(Ee.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(e){this.track&&(this.track.off(Ee.Ended,this.handleTrackEnded),this.track.off(Ee.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(Ee.Ended,this.handleTrackEnded),e.on(Ee.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return K(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return K(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return K(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return K(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(Qi(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(Sn.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(Sn.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(Sn.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(Sn.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||i.add(Sn.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(Sn.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function Xf(t,e){return K(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:a}=ZR(t);let c=a.audio,l=a.video;if(i&&typeof a.audio=="object"&&(a.audio.processor=i),r&&typeof a.video=="object"&&(a.video.processor=r),t.audio&&typeof a.audio=="object"&&typeof a.audio.deviceId=="string"){const p=a.audio.deviceId;a.audio.deviceId={exact:p},n=!0,c=Object.assign(Object.assign({},a.audio),{deviceId:{ideal:p}})}if(a.video&&typeof a.video=="object"&&typeof a.video.deviceId=="string"){const p=a.video.deviceId;a.video.deviceId={exact:p},n=!0,l=Object.assign(Object.assign({},a.video),{deviceId:{ideal:p}})}(a.audio===!0||typeof a.audio=="object"&&!a.audio.deviceId)&&(a.audio={deviceId:"default"}),a.video===!0?a.video={deviceId:"default"}:typeof a.video=="object"&&!a.video.deviceId&&(a.video.deviceId="default");const d=$R(a,QR,eA),f=z0(d),m=navigator.mediaDevices.getUserMedia(f);a.audio&&(Tn.userMediaPromiseMap.set("audioinput",m),m.catch(()=>Tn.userMediaPromiseMap.delete("audioinput"))),a.video&&(Tn.userMediaPromiseMap.set("videoinput",m),m.catch(()=>Tn.userMediaPromiseMap.delete("videoinput")));try{const p=yield m;return yield Promise.all(p.getTracks().map(v=>K(this,void 0,void 0,function*(){const S=v.kind==="audio";let x=S?d.audio:d.video;(typeof x=="boolean"||!x)&&(x={});let b;const P=S?f.audio:f.video;typeof P!="boolean"&&(b=P);const k=v.getSettings().deviceId;b?.deviceId&&Ps(b.deviceId)!==k?b.deviceId=k:b||(b={deviceId:k});const O=v8(v,b,e);return O.kind===te.Kind.Video?O.source=te.Source.Camera:O.kind===te.Kind.Audio&&(O.source=te.Source.Microphone),O.mediaStream=p,Qi(O)&&i?yield O.setProcessor(i):Aa(O)&&r&&(yield O.setProcessor(r)),O})))}catch(p){if(!n)throw p;return Xf(Object.assign(Object.assign({},t),{audio:c,video:l}),e)}})}function V8(t){return K(this,void 0,void 0,function*(){return(yield Xf({audio:!1,video:!0}))[0]})}function z8(t){return K(this,void 0,void 0,function*(){return(yield Xf({audio:!0,video:!1}))[0]})}var Cs;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Cs||(Cs={}));function H8(t){switch(t){case Rl.EXCELLENT:return Cs.Excellent;case Rl.GOOD:return Cs.Good;case Rl.POOR:return Cs.Poor;case Rl.LOST:return Cs.Lost;default:return Cs.Unknown}}class lA extends lr.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===ba.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Io.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,i,r,a,c){let l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ba.STANDARD;var d;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Cs.Unknown,this.log=ot,this.log=Br((d=c?.loggerName)!==null&&d!==void 0?d:Li.Participant),this.loggerOptions=c,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=i,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=l,this._attributes=a??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new Po,this.once(ye.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(te.Source.Camera);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(te.Source.Microphone);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(te.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Io.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Io.ACTIVE&&this.emit(ye.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(ye.ParticipantMetadataChanged,i)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ye.ParticipantNameChanged,e)}_setAttributes(e){const n=q5(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(ye.AttributesChanged,n)}setPermissions(e){var n,i,r,a,c,l;const d=this.permissions,f=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||e.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||e.hidden!==((a=this.permissions)===null||a===void 0?void 0:a.hidden)||e.recorder!==((c=this.permissions)===null||c===void 0?void 0:c.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((m,p)=>{var v;return m!==((v=this.permissions)===null||v===void 0?void 0:v.canPublishSources[p])})||e.canSubscribeMetrics!==((l=this.permissions)===null||l===void 0?void 0:l.canSubscribeMetrics);return this.permissions=e,f&&this.emit(ye.ParticipantPermissionsChanged,d),f}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ye.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=H8(e),n!==this._connectionQuality&&this.emit(ye.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>Qi(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(Ee.Muted,()=>{this.emit(ye.TrackMuted,e)}),e.on(Ee.Unmuted,()=>{this.emit(ye.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case te.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case te.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function q8(t){var e,n,i;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new cR({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=t.allowAll)!==null&&i!==void 0?i:!1,trackSids:t.allowedTrackSids||[]})}const Ow=15e3;class K8 extends lA{constructor(e,n,i,r,a){super(e,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=ii.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Po)},this.handleReconnected=()=>{var c,l;(l=(c=this.reconnectFuture)===null||c===void 0?void 0:c.resolve)===null||l===void 0||l.call(c),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var c,l,d,f,m,p;this.reconnectFuture&&(this.reconnectFuture.promise.catch(v=>this.log.warn(v.message,this.logContext)),(l=(c=this.reconnectFuture)===null||c===void 0?void 0:c.reject)===null||l===void 0||l.call(c,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((f=(d=this.signalConnectedFuture).reject)===null||f===void 0||f.call(d,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(p=(m=this.activeAgentFuture)===null||m===void 0?void 0:m.reject)===null||p===void 0||p.call(m,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=c=>{var l,d;c.participant&&this.updateInfo(c.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new Po),(d=(l=this.signalConnectedFuture).resolve)===null||d===void 0||d.call(l)},this.handleSignalRequestResponse=c=>{const{requestId:l,reason:d,message:f}=c,m=this.pendingSignalRequests.get(l);m&&(d!==j0.OK&&m.reject(new ow(f,d)),this.pendingSignalRequests.delete(l))},this.handleDataPacket=c=>{switch(c.value.case){case"rpcResponse":let l=c.value.value,d=null,f=null;l.value.case==="payload"?d=l.value.value:l.value.case==="error"&&(f=qt.fromProto(l.value.value)),this.handleIncomingRpcResponse(l.requestId,d,f);break;case"rpcAck":let m=c.value.value;this.handleIncomingRpcAck(m.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(c=>q8(c)))},this.onTrackUnmuted=c=>{this.onTrackMuted(c,c.isUpstreamPaused)},this.onTrackMuted=(c,l)=>{if(l===void 0&&(l=!0),!c.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),st(c)));return}this.engine.updateMuteStatus(c.sid,l)},this.onTrackUpstreamPaused=c=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),st(c))),this.onTrackMuted(c,!0)},this.onTrackUpstreamResumed=c=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),st(c))),this.onTrackMuted(c,c.isMuted)},this.onTrackFeatureUpdate=c=>{const l=this.audioTrackPublications.get(c.sid);if(!l){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(c.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(l.trackSid,l.getTrackFeatures())},this.onTrackCpuConstrained=(c,l)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),st(l))),this.emit(ye.LocalTrackCpuConstrained,c,l)},this.handleSubscribedQualityUpdate=c=>K(this,void 0,void 0,function*(){var l,d,f,m,p;if(!(!((p=this.roomOptions)===null||p===void 0)&&p.dynacast))return;const v=this.videoTrackPublications.get(c.trackSid);if(!v){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}if(!v.videoTrack)return;const S=yield v.videoTrack.setPublishingCodecs(c.subscribedCodecs);try{for(var x=!0,b=Ir(S),P;P=yield b.next(),l=P.done,!l;x=!0){m=P.value,x=!1;const k=m;S5(k)&&(this.log.debug("publish ".concat(k," for ").concat(v.videoTrack.sid),Object.assign(Object.assign({},this.logContext),st(v))),yield this.publishAdditionalCodecForTrack(v.videoTrack,k,v.options))}}catch(k){d={error:k}}finally{try{!x&&!l&&(f=b.return)&&(yield f.call(b))}finally{if(d)throw d.error}}}),this.handleLocalTrackUnpublished=c=>{const l=this.trackPublications.get(c.trackSid);if(!l){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}this.unpublishTrack(l.track)},this.handleTrackEnded=c=>K(this,void 0,void 0,function*(){if(c.source===te.Source.ScreenShare||c.source===te.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),st(c))),this.unpublishTrack(c);else if(c.isUserProvided)yield c.mute();else if(Dr(c)||ys(c))try{if(Kn())try{const l=yield navigator?.permissions.query({name:c.source===te.Source.Camera?"camera":"microphone"});if(l&&l.state==="denied")throw this.log.warn("user has revoked access to ".concat(c.source),Object.assign(Object.assign({},this.logContext),st(c))),l.onchange=()=>{l.state!=="denied"&&(c.isMuted||c.restartTrack(),l.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}c.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),st(c))),Dr(c)?yield c.restartTrack({deviceId:"default"}):yield c.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),st(c))),yield c.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=r,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=a}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==ii.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(De.RemoteMute,(i,r)=>{const a=this.trackPublications.get(i);!a||!a.track||(r?a.mute():a.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(De.Connected,this.handleReconnected).on(De.SignalConnected,this.handleSignalConnected).on(De.SignalRestarted,this.handleReconnected).on(De.SignalResumed,this.handleReconnected).on(De.Restarting,this.handleReconnecting).on(De.Resuming,this.handleReconnecting).on(De.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(De.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(De.Closing,this.handleClosing).on(De.SignalRequestResponse,this.handleSignalRequestResponse).on(De.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return K(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return K(this,arguments,void 0,function(n){var i=this;let{metadata:r,name:a,attributes:c}=n;return function*(){return new Promise((l,d)=>K(i,void 0,void 0,function*(){var f,m;try{let p=!1;const v=yield this.engine.client.sendUpdateLocalMetadata((f=r??this.metadata)!==null&&f!==void 0?f:"",(m=a??this.name)!==null&&m!==void 0?m:"",c),S=performance.now();for(this.pendingSignalRequests.set(v,{resolve:l,reject:x=>{d(x),p=!0},values:{name:a,metadata:r,attributes:c}});performance.now()-S<5e3&&!p;){if((!a||this.name===a)&&(!r||this.metadata===r)&&(!c||Object.entries(c).every(x=>{let[b,P]=x;return this.attributes[b]===P||P===""&&!this.attributes[b]}))){this.pendingSignalRequests.delete(v),l();return}yield Yn(50)}d(new ow("Request to update local metadata timed out","TimeoutError"))}catch(p){p instanceof Error&&d(p)}}))}()})}setCameraEnabled(e,n,i){return this.setTrackEnabled(te.Source.Camera,e,n,i)}setMicrophoneEnabled(e,n,i){return this.setTrackEnabled(te.Source.Microphone,e,n,i)}setScreenShareEnabled(e,n,i){return this.setTrackEnabled(te.Source.ScreenShare,e,n,i)}setPermissions(e){const n=this.permissions,i=super.setPermissions(e);return i&&n&&this.emit(ye.ParticipantPermissionsChanged,n),i}setE2EEEnabled(e){return K(this,void 0,void 0,function*(){this.encryptionType=e?ii.GCM:ii.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,i,r){return K(this,void 0,void 0,function*(){var a,c;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let l=this.getTrackPublication(e);if(n)if(l)yield l.unmute();else{let d;if(this.pendingPublishing.has(e)){const f=yield this.waitForPendingPublicationOfSource(e);return f||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield f?.unmute(),f}this.pendingPublishing.add(e);try{switch(e){case te.Source.Camera:d=yield this.createTracks({video:(a=i)!==null&&a!==void 0?a:!0});break;case te.Source.Microphone:d=yield this.createTracks({audio:(c=i)!==null&&c!==void 0?c:!0});break;case te.Source.ScreenShare:d=yield this.createScreenTracks(Object.assign({},i));break;default:throw new Ur(e)}}catch(f){throw d?.forEach(m=>{m.stop()}),f instanceof Error&&this.emit(ye.MediaDevicesError,f,Tv(e)),this.pendingPublishing.delete(e),f}for(const f of d){const m=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);e===te.Source.Microphone&&Qi(f)&&m.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),f.startPreConnectBuffer())}try{const f=[];for(const p of d)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),st(p))),f.push(this.publishTrack(p,r));[l]=yield Promise.all(f)}catch(f){throw d?.forEach(m=>{m.stop()}),f}finally{this.pendingPublishing.delete(e)}}else if(!l?.track&&this.pendingPublishing.has(e)&&(l=yield this.waitForPendingPublicationOfSource(e),l||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),l&&l.track)if(e===te.Source.ScreenShare){l=yield this.unpublishTrack(l.track);const d=this.getTrackPublication(te.Source.ScreenShareAudio);d&&d.track&&this.unpublishTrack(d.track)}else yield l.mute();return l})}enableCameraAndMicrophone(){return K(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(te.Source.Camera)||this.pendingPublishing.has(te.Source.Microphone))){this.pendingPublishing.add(te.Source.Camera),this.pendingPublishing.add(te.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(te.Source.Camera),this.pendingPublishing.delete(te.Source.Microphone)}}})}createTracks(e){return K(this,void 0,void 0,function*(){var n,i;e??(e={});const r=$R(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield Xf(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(l=>(Qi(l)&&(this.microphoneError=void 0,l.setAudioContext(this.audioContext),l.source=te.Source.Microphone,this.emit(ye.AudioStreamAcquired)),Aa(l)&&(this.cameraError=void 0,l.source=te.Source.Camera),l))}catch(a){throw a instanceof Error&&(e.audio&&(this.microphoneError=a),e.video&&(this.cameraError=a)),a}})}createScreenTracks(e){return K(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new F0("getDisplayMedia not supported");e.resolution===void 0&&!k5()&&(e.resolution=V0.h1080fps30.resolution);const n=V5(e),i=yield navigator.mediaDevices.getDisplayMedia(n),r=i.getVideoTracks();if(r.length===0)throw new Ur("no video track found");const a=new kf(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=te.Source.ScreenShare,e.contentHint&&(a.mediaStreamTrack.contentHint=e.contentHint);const c=[a];if(i.getAudioTracks().length>0){this.emit(ye.AudioStreamAcquired);const l=new Ef(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});l.source=te.Source.ScreenShareAudio,c.push(l)}return c})}publishTrack(e,n){return K(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return K(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return function*(){var l,d,f,m;Dr(i)&&i.setAudioContext(a.audioContext),yield(l=a.reconnectFuture)===null||l===void 0?void 0:l.promise,a.republishPromise&&!c&&(yield a.republishPromise),Bo(i)&&a.pendingPublishPromises.has(i)&&(yield a.pendingPublishPromises.get(i));let p;if(i instanceof MediaStreamTrack)p=i.getConstraints();else{p=i.constraints;let k;switch(i.source){case te.Source.Microphone:k="audioinput";break;case te.Source.Camera:k="videoinput"}k&&a.activeDeviceMap.has(k)&&(p=Object.assign(Object.assign({},p),{deviceId:a.activeDeviceMap.get(k)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new Ef(i,p,!0,a.audioContext,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;case"video":i=new kf(i,p,!0,{loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});break;default:throw new Ur("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:a.roomOptions.loggerName,loggerContextCb:()=>a.logContext});let v;if(a.trackPublications.forEach(k=>{k.track&&k.track===i&&(v=k)}),v)return a.log.warn("track has already been published, skipping",Object.assign(Object.assign({},a.logContext),st(v))),v;const S="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,x=(d=r?.forceStereo)!==null&&d!==void 0?d:S;x&&(r||(r={}),r.dtx===void 0&&a.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},a.logContext),st(i))),r.red===void 0&&a.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(f=r.dtx)!==null&&f!==void 0||(r.dtx=!1),(m=r.red)!==null&&m!==void 0||(r.red=!1));const b=Object.assign(Object.assign({},a.roomOptions.publishDefaults),r);!A5()&&a.roomOptions.e2ee&&(a.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},a.logContext)),b.simulcast=!1),b.source&&(i.source=b.source);const P=new Promise((k,O)=>K(a,void 0,void 0,function*(){try{if(this.engine.client.currentState!==Pt.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:st(i)}));const N=setTimeout(()=>{O(new aw("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(N);const I=yield this.publish(i,b,x);k(I)}else try{const N=yield this.publish(i,b,x);k(N)}catch(N){O(N)}}catch(N){O(N)}}));a.pendingPublishPromises.set(i,P);try{return yield P}catch(k){throw k}finally{a.pendingPublishPromises.delete(i)}}()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new Po),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),st(e))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(r=>K5(r)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),st(e))),!1)}publish(e,n,i){return K(this,void 0,void 0,function*(){var r,a,c,l,d,f,m,p,v,S;if(!this.hasPermissionsToPublish(e))throw new aw("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(X=>Bo(e)&&X.source===e.source)&&e.source!==te.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),st(e))),n.stopMicTrackOnMute&&Qi(e)&&(e.stopOnMute=!0),e.source===te.Source.ScreenShare&&Go()&&(n.simulcast=!1),n.videoCodec==="av1"&&!w5()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!C5()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=xv),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(X=>n.videoCodec===cf(X.mime))||(n.videoCodec=cf(this.enabledPublishVideoCodecs[0].mime)));const b=n.videoCodec;e.on(Ee.Muted,this.onTrackMuted),e.on(Ee.Unmuted,this.onTrackUnmuted),e.on(Ee.Ended,this.handleTrackEnded),e.on(Ee.UpstreamPaused,this.onTrackUpstreamPaused),e.on(Ee.UpstreamResumed,this.onTrackUpstreamResumed),e.on(Ee.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const P=[],k=!(!((r=n.dtx)!==null&&r!==void 0)||r),O=e.getSourceTrackSettings();O.autoGainControl&&P.push(Sn.TF_AUTO_GAIN_CONTROL),O.echoCancellation&&P.push(Sn.TF_ECHO_CANCELLATION),O.noiseSuppression&&P.push(Sn.TF_NOISE_SUPPRESSION),O.channelCount&&O.channelCount>1&&P.push(Sn.TF_STEREO),k&&P.push(Sn.TF_NO_DTX),Dr(e)&&e.hasPreConnectBuffer&&P.push(Sn.TF_PRECONNECT_BUFFER);const N=new nv({cid:e.mediaStreamTrack.id,name:n.name,type:te.kindToProto(e.kind),muted:e.isMuted,source:te.sourceToProto(e.source),disableDtx:k,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((a=n.red)!==null&&a!==void 0)||a),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:P});let I;if(e.kind===te.Kind.Video){let X={width:0,height:0};try{X=yield e.waitForDimensions()}catch{const oe=(l=(c=this.roomOptions.videoCaptureDefaults)===null||c===void 0?void 0:c.resolution)!==null&&l!==void 0?l:ql.h720.resolution;X={width:oe.width,height:oe.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{dims:X}))}N.width=X.width,N.height=X.height,ys(e)&&(Xi(b)&&(e.source===te.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),st(e))))),n.scalabilityMode=(d=n.scalabilityMode)!==null&&d!==void 0?d:"L3T3_KEY"),N.simulcastCodecs=[new tv({codec:b,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:xv}),n.backupCodec&&b!==n.backupCodec.codec&&N.encryption===ii.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),N.simulcastCodecs.push(new tv({codec:n.backupCodec.codec,cid:""})))),I=Cv(e.source===te.Source.ScreenShare,N.width,N.height,n),N.layers=_w(N.width,N.height,I,Xi(n.videoCodec))}else e.kind===te.Kind.Audio&&(I=[{maxBitrate:(f=n.audioPreset)===null||f===void 0?void 0:f.maxBitrate,priority:(p=(m=n.audioPreset)===null||m===void 0?void 0:m.priority)!==null&&p!==void 0?p:"high",networkPriority:(S=(v=n.audioPreset)===null||v===void 0?void 0:v.priority)!==null&&S!==void 0?S:"high"}]);if(!this.engine||this.engine.isClosed)throw new mn("cannot publish track when not connected");const D=()=>K(this,void 0,void 0,function*(){var X,ae,oe;if(!this.engine.pcManager)throw new mn("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,I),this.emit(ye.LocalSenderCreated,e.sender,e),ys(e)&&((X=n.degradationPreference)!==null&&X!==void 0||(n.degradationPreference=R8(e)),e.setDegradationPreference(n.degradationPreference)),I)if(Go()&&e.kind===te.Kind.Audio){let fe;for(const ke of this.engine.pcManager.publisher.getTransceivers())if(ke.sender===e.sender){fe=ke;break}fe&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:fe,codec:"opus",maxbr:!((ae=I[0])===null||ae===void 0)&&ae.maxBitrate?I[0].maxBitrate/1e3:0})}else e.codec&&Xi(e.codec)&&(!((oe=I[0])===null||oe===void 0)&&oe.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:N.cid,codec:e.codec,maxbr:I[0].maxBitrate/1e3});yield this.engine.negotiate()});let B;const H=new Promise((X,ae)=>K(this,void 0,void 0,function*(){var oe;try{B=yield this.engine.addTrack(N),X(B)}catch(fe){e.sender&&(!((oe=this.engine.pcManager)===null||oe===void 0)&&oe.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(ke=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{error:ke}))})),ae(fe)}}));if(this.enabledPublishVideoCodecs.length>0)B=(yield Promise.all([H,D()]))[0];else{B=yield H;let X;if(B.codecs.forEach(ae=>{X===void 0&&(X=ae.mimeType)}),X&&e.kind===te.Kind.Video){const ae=cf(X);ae!==b&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{codec:ae})),n.videoCodec=ae,I=Cv(e.source===te.Source.ScreenShare,N.width,N.height,n))}yield D()}const z=new Rv(e.kind,B,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(z.on(Ee.CpuConstrained,X=>this.onTrackCpuConstrained(X,z)),z.options=n,e.sid=B.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:I,trackInfo:B})),ys(e)?e.startMonitor(this.engine.client):Dr(e)&&e.startMonitor(),this.addTrackPublication(z),this.emit(ye.LocalTrackPublished,z),Dr(e)&&B.audioFeatures.includes(Sn.TF_PRECONNECT_BUFFER)){const X=e.getPreConnectBuffer(),ae=e.getPreConnectBufferMimeType();this.on(ye.LocalTrackSubscribed,oe=>{if(oe.trackSid===B.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),st(e))),e.stopPreConnectBuffer()}}),X&&new Promise((fe,ke)=>K(this,void 0,void 0,function*(){var Ae,Oe,G,ie,J,Pe;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),st(e)));const le=setTimeout(()=>{ke(new Error("agent not active within 10 seconds"))},1e4),Te=yield this.waitUntilActiveAgentPresent();clearTimeout(le),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),st(e)));const Me=yield this.streamBytes({name:"preconnect-buffer",mimeType:ae,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[Te.identity],attributes:{trackId:z.trackSid,sampleRate:String((J=O.sampleRate)!==null&&J!==void 0?J:"48000"),channels:String((Pe=O.channelCount)!==null&&Pe!==void 0?Pe:"1")}});try{for(var V=!0,Q=Ir(X),me;me=yield Q.next(),Ae=me.done,!Ae;V=!0){ie=me.value,V=!1;const _e=ie;yield Me.write(_e)}}catch(_e){Oe={error:_e}}finally{try{!V&&!Ae&&(G=Q.return)&&(yield G.call(Q))}finally{if(Oe)throw Oe.error}}yield Me.close(),fe()}catch(le){ke(le)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),st(e)))}).catch(fe=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{error:fe}))})}return z})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,i){return K(this,void 0,void 0,function*(){var r;if(this.encryptionType!==ii.NONE)return;let a;if(this.trackPublications.forEach(S=>{S.track&&S.track===e&&(a=S)}),!a)throw new Ur("track is not published");if(!ys(e))throw new Ur("track is not a video track");const c=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),i),l=C8(e,n,c);if(!l){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),st(e)));return}const d=e.addSimulcastTrack(n,l);if(!d)return;const f=new nv({cid:d.mediaStreamTrack.id,type:te.kindToProto(e.kind),muted:e.isMuted,source:te.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:c.videoCodec,cid:d.mediaStreamTrack.id}]});if(f.layers=_w(f.width,f.height,l),!this.engine||this.engine.isClosed)throw new mn("cannot publish track when not connected");const m=()=>K(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,d,c,l),yield this.engine.negotiate()}),v=(yield Promise.all([this.engine.addTrack(f),m()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:l,trackInfo:v}))})}unpublishTrack(e,n){return K(this,void 0,void 0,function*(){var i,r;if(Bo(e)){const f=this.pendingPublishPromises.get(e);f&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),st(e))),yield f)}const a=this.getPublicationForTrack(e),c=a?st(a):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),c)),!a||!a.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),c));return}e=a.track,e.off(Ee.Muted,this.onTrackMuted),e.off(Ee.Unmuted,this.onTrackUnmuted),e.off(Ee.Ended,this.handleTrackEnded),e.off(Ee.UpstreamPaused,this.onTrackUpstreamPaused),e.off(Ee.UpstreamResumed,this.onTrackUpstreamResumed),e.off(Ee.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?e.stop():e.stopMonitor();let l=!1;const d=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Vt.FAILED&&d)try{for(const f of this.engine.pcManager.publisher.getTransceivers())f.sender===d&&(f.direction="inactive",l=!0);if(this.engine.removeTrack(d)&&(l=!0),ys(e)){for(const[,f]of e.simulcastCodecs)f.sender&&(this.engine.removeTrack(f.sender)&&(l=!0),f.sender=void 0);e.simulcastCodecs.clear()}}catch(f){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),c),{error:f}))}switch(this.trackPublications.delete(a.trackSid),a.kind){case te.Kind.Audio:this.audioTrackPublications.delete(a.trackSid);break;case te.Kind.Video:this.videoTrackPublications.delete(a.trackSid);break}return this.emit(ye.LocalTrackUnpublished,a),a.setTrack(void 0),l&&(yield this.engine.negotiate()),a})}unpublishTracks(e){return K(this,void 0,void 0,function*(){return(yield Promise.all(e.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((a,c)=>K(i,void 0,void 0,function*(){try{const l=[];this.trackPublications.forEach(d=>{d.track&&(n&&(d.options=Object.assign(Object.assign({},d.options),n)),l.push(d))}),yield Promise.all(l.map(d=>K(this,void 0,void 0,function*(){const f=d.track;yield this.unpublishTrack(f,!1),r&&!f.isMuted&&f.source!==te.Source.ScreenShare&&f.source!==te.Source.ScreenShareAudio&&(Dr(f)||ys(f))&&!f.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:d.trackSid})),yield f.restartTrack()),yield this.publishOrRepublishTrack(f,d.options,!0)}))),a()}catch(l){c(l)}finally{this.republishPromise=void 0}})),yield i.republishPromise}()})}publishData(e){return K(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const a=r.reliable?tt.RELIABLE:tt.LOSSY,c=r.destinationIdentities,l=r.topic,d=new zn({kind:a,value:{case:"user",value:new Hk({participantIdentity:i.identity,payload:n,destinationIdentities:c,topic:l})}});yield i.engine.sendDataPacket(d,a)}()})}publishDtmf(e,n){return K(this,void 0,void 0,function*(){const i=new zn({kind:tt.RELIABLE,value:{case:"sipDtmf",value:new qk({code:e,digit:n})}});yield this.engine.sendDataPacket(i,tt.RELIABLE)})}sendChatMessage(e,n){return K(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n?.attachments},r=new zn({value:{case:"chatMessage",value:new $g(Object.assign(Object.assign({},i),{timestamp:Mt.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(r,tt.RELIABLE),this.emit(ye.ChatMessage,i),i})}editChatMessage(e,n){return K(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),r=new zn({value:{case:"chatMessage",value:new $g(Object.assign(Object.assign({},i),{timestamp:Mt.parse(i.timestamp),editTimestamp:Mt.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,tt.RELIABLE),this.emit(ye.ChatMessage,i),i})}sendText(e,n){return K(this,void 0,void 0,function*(){var i;const r=crypto.randomUUID(),c=new TextEncoder().encode(e).byteLength,l=(i=n?.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),d=new Array(l?l.length+1:1).fill(0),f=(p,v)=>{var S;d[v]=p;const x=d.reduce((b,P)=>b+P,0);(S=n?.onProgress)===null||S===void 0||S.call(n,x)},m=yield this.streamText({streamId:r,totalSize:c,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:l,attributes:n?.attributes});return yield m.write(e),f(1,0),yield m.close(),n?.attachments&&l&&(yield Promise.all(n.attachments.map((p,v)=>K(this,void 0,void 0,function*(){return this._sendFile(l[v],p,{topic:n.topic,mimeType:p.type,onProgress:S=>{f(S,v+1)}})})))),m.info})}streamText(e){return K(this,void 0,void 0,function*(){var n,i;const r=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),a={id:r,mimeType:"text/plain",timestamp:Date.now(),topic:(i=e?.topic)!==null&&i!==void 0?i:"",size:e?.totalSize,attributes:e?.attributes},c=new Zg({streamId:r,mimeType:a.mimeType,topic:a.topic,timestamp:la(a.timestamp),totalLength:la(e?.totalSize),attributes:a.attributes,contentHeader:{case:"textHeader",value:new tR({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?Xg.UPDATE:Xg.CREATE})}}),l=e?.destinationIdentities,d=new zn({destinationIdentities:l,value:{case:"streamHeader",value:c}});yield this.engine.sendDataPacket(d,tt.RELIABLE);let f=0;const m=this,p=new WritableStream({write(x){return K(this,void 0,void 0,function*(){for(const b of B5(x,Ow)){yield m.engine.waitForBufferStatusLow(tt.RELIABLE);const P=new Jg({content:b,streamId:r,chunkIndex:la(f)}),k=new zn({destinationIdentities:l,value:{case:"streamChunk",value:P}});yield m.engine.sendDataPacket(k,tt.RELIABLE),f+=1}})},close(){return K(this,void 0,void 0,function*(){const x=new Qg({streamId:r}),b=new zn({destinationIdentities:l,value:{case:"streamTrailer",value:x}});yield m.engine.sendDataPacket(b,tt.RELIABLE)})},abort(x){console.log("Sink error:",x)}});let v=()=>K(this,void 0,void 0,function*(){yield S.close()});m.engine.once(De.Closing,v);const S=new L8(p,a,()=>this.engine.off(De.Closing,v));return S})}sendFile(e,n){return K(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,e,n),{id:i}})}_sendFile(e,n,i){return K(this,void 0,void 0,function*(){var r;const a=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(r=i?.mimeType)!==null&&r!==void 0?r:n.type,topic:i?.topic,destinationIdentities:i?.destinationIdentities}),c=n.stream().getReader();for(;;){const{done:l,value:d}=yield c.read();if(l)break;yield a.write(d)}return yield a.close(),a.info})}streamBytes(e){return K(this,void 0,void 0,function*(){var n,i,r,a,c;const l=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),d=e?.destinationIdentities,f={id:l,mimeType:(i=e?.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(r=e?.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:e?.attributes,size:e?.totalSize,name:(a=e?.name)!==null&&a!==void 0?a:"unknown"},m=new Zg({totalLength:la((c=f.size)!==null&&c!==void 0?c:0),mimeType:f.mimeType,streamId:l,topic:f.topic,timestamp:la(Date.now()),attributes:f.attributes,contentHeader:{case:"byteHeader",value:new nR({name:f.name})}}),p=new zn({destinationIdentities:d,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(p,tt.RELIABLE);let v=0;const S=new In,x=this.engine,b=this.log,P=new WritableStream({write(O){return K(this,void 0,void 0,function*(){const N=yield S.lock();let I=0;try{for(;I<O.byteLength;){const D=O.slice(I,I+Ow);yield x.waitForBufferStatusLow(tt.RELIABLE);const B=new zn({destinationIdentities:d,value:{case:"streamChunk",value:new Jg({content:D,streamId:l,chunkIndex:la(v)})}});yield x.sendDataPacket(B,tt.RELIABLE),v+=1,I+=D.byteLength}}finally{N()}})},close(){return K(this,void 0,void 0,function*(){const O=new Qg({streamId:l}),N=new zn({destinationIdentities:d,value:{case:"streamTrailer",value:O}});yield x.sendDataPacket(N,tt.RELIABLE)})},abort(O){b.error("Sink error:",O)}});return new j8(P,f)})}performRpc(e){return K(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:r,method:a,payload:c,responseTimeout:l=1e4}=n;return function*(){return new Promise((f,m)=>K(i,void 0,void 0,function*(){var p,v,S,x;if(W0(c)>tA){m(qt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((v=(p=this.engine.latestJoinResponse)===null||p===void 0?void 0:p.serverInfo)===null||v===void 0)&&v.version&&ji((x=(S=this.engine.latestJoinResponse)===null||S===void 0?void 0:S.serverInfo)===null||x===void 0?void 0:x.version,"1.8.0")<0){m(qt.builtIn("UNSUPPORTED_SERVER"));return}const b=crypto.randomUUID();yield this.publishRpcRequest(r,b,a,c,l-2e3);const P=setTimeout(()=>{this.pendingAcks.delete(b),m(qt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(b),clearTimeout(k)},2e3);this.pendingAcks.set(b,{resolve:()=>{clearTimeout(P)},participantIdentity:r});const k=setTimeout(()=>{this.pendingResponses.delete(b),m(qt.builtIn("RESPONSE_TIMEOUT"))},l);this.pendingResponses.set(b,{resolve:(O,N)=>{clearTimeout(k),this.pendingAcks.has(b)&&(console.warn("RPC response received before ack",b),this.pendingAcks.delete(b),clearTimeout(P)),N?m(N):f(O??"")},participantIdentity:r})}))}()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,i){const r=this.pendingResponses.get(e);r?(r.resolve(n,i),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,i,r,a){return K(this,void 0,void 0,function*(){const c=new zn({destinationIdentities:[e],kind:tt.RELIABLE,value:{case:"rpcRequest",value:new Kk({id:n,method:i,payload:r,responseTimeoutMs:a,version:1})}});yield this.engine.sendDataPacket(c,tt.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:r}]of this.pendingResponses)i===e&&(r(null,qt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var i,r;const a=this.trackPublications.get(n.sid);if(a){const c=a.isMuted||((r=(i=a.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&r!==void 0?r:!1);c!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),st(a)),{mutedOnServer:c})),this.engine.client.sendMuteTrack(n.sid,c))}}),!0):!1}setActiveAgent(e){var n,i,r,a;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,e):(a=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||a===void 0||a.call(r,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new Po),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(i=>{const r=i.track;r&&(e instanceof MediaStreamTrack?(Dr(r)||ys(r))&&r.mediaStreamTrack===e&&(n=i):e===r&&(n=i))}),n}waitForPendingPublicationOfSource(e){return K(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(a=>{let[c]=a;return c.source===e});if(r)return r[1];yield Yn(20)}})}}class Rf extends Mr{constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=a=>{this.setTrack(void 0),this.emit(Ee.Ended,a)},this.handleVisibilityChange=a=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),this.logContext),this.visible=a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{this.log.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),this.logContext),this.videoDimensionsAdaptiveStream=a,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const r=new Gf({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new $k({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Ee.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?Mr.SubscriptionStatus.Unsubscribed:super.isSubscribed?Mr.SubscriptionStatus.Subscribed:Mr.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Mr.PermissionStatus.Allowed:Mr.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===e.height||(Kp(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Kp(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:si.HIGH}setTrack(e){const n=this.subscriptionStatus,i=this.permissionStatus,r=this.track;r!==e&&(r&&(r.off(Ee.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(Ee.VisibilityChanged,this.handleVisibilityChange),r.off(Ee.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(Ee.Unsubscribed,r)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(Ee.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(Ee.VisibilityChanged,this.handleVisibilityChange),e.on(Ee.Ended,this.handleEnded),this.emit(Ee.Subscribed,e)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(Ee.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?Ee.Muted:Ee.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(Ee.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(Ee.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Kp(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new iR({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===te.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)gw(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=G5(this.trackInfo,this.requestedMaxQuality);i&&gw(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:si.HIGH})),e.quality=si.HIGH)}this.emit(Ee.UpdateSettings,e)}}class Af extends lA{static fromParticipantInfo(e,n,i){return new Af(e,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,i,r,a,c,l){let d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:ba.STANDARD;super(n,i||"",r,a,c,l,d),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(Ee.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),st(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(Ee.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(Ee.SubscriptionPermissionChanged,n=>{this.emit(ye.TrackSubscriptionPermissionChanged,e,n)}),e.on(Ee.SubscriptionStatusChanged,n=>{this.emit(ye.TrackSubscriptionStatusChanged,e,n)}),e.on(Ee.Subscribed,n=>{this.emit(ye.TrackSubscribed,n,e)}),e.on(Ee.Unsubscribed,n=>{this.emit(ye.TrackUnsubscribed,n,e)}),e.on(Ee.SubscriptionFailed,n=>{this.emit(ye.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.Source.Microphone;this.volumeMap.set(n,e);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,i,r,a,c){let l=this.getTrackPublicationBySid(n);if(l||n.startsWith("TR")||this.trackPublications.forEach(m=>{!l&&e.kind===m.kind.toString()&&(l=m)}),!l){if(c===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ye.TrackSubscriptionFailed,n);return}c===void 0&&(c=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,r,a,c-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),st(l))),this.emit(ye.TrackSubscriptionFailed,n);return}const d=e.kind==="video";let f;return d?f=new B8(e,n,r,a):f=new cA(e,n,r,this.audioContext,this.audioOutput),f.source=l.source,f.isMuted=l.isMuted,f.setMediaStream(i),f.start(),l.setTrack(f),this.volumeMap.has(l.source)&&bv(f)&&Qi(f)&&f.setVolume(this.volumeMap.get(l.source)),l}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,i=new Map;return e.tracks.forEach(r=>{var a,c;let l=this.getTrackPublicationBySid(r.sid);if(l)l.updateInfo(r);else{const d=te.kindFromProto(r.type);if(!d)return;l=new Rf(d,r,(a=this.signalClient.connectOptions)===null||a===void 0?void 0:a.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(c=this.loggerOptions)===null||c===void 0?void 0:c.loggerName}),l.updateInfo(r),i.set(r.sid,l);const f=Array.from(this.trackPublications.values()).find(m=>m.source===l?.source);f&&l.source!==te.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(l.source),Object.assign(Object.assign({},this.logContext),{oldTrack:st(f),newTrack:st(l)})),this.addTrackPublication(l)}n.set(r.sid,l)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),st(r))),this.unpublishTrack(r.trackSid,!0))}),i.forEach(r=>{this.emit(ye.TrackPublished,r)}),!0}unpublishTrack(e,n){const i=this.trackPublications.get(e);if(!i)return;const{track:r}=i;switch(r&&(r.stop(),i.setTrack(void 0)),this.trackPublications.delete(e),i.kind){case te.Kind.Audio:this.audioTrackPublications.delete(e);break;case te.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(ye.TrackUnpublished,i)}setAudioOutput(e){return K(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(i=>{var r;Qi(i.track)&&bv(i.track)&&n.push(i.track.setSinkId((r=e.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:i})),super.emit(e,...i)}}var at;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(at||(at={}));const G8=4*1e3;class Fr extends lr.EventEmitter{constructor(e){var n,i,r,a;if(super(),n=this,this.state=at.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=ot,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(c,l,d)=>K(this,void 0,void 0,function*(){var f;if(!E5())throw rr()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const m=yield this.disconnectLock.lock();if(this.state===at.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),m(),Promise.resolve();if(this.connectFuture)return m(),this.connectFuture.promise;this.setAndEmitConnectionState(at.Connecting),((f=this.regionUrlProvider)===null||f===void 0?void 0:f.getServerUrl().toString())!==c&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),vv(new URL(c))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Ev(c,l):this.regionUrlProvider.updateToken(l),this.regionUrlProvider.fetchRegionSettings().then(S=>{var x;(x=this.regionUrlProvider)===null||x===void 0||x.setServerReportedRegions(S)}).catch(S=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:S}))}));const p=(S,x,b)=>K(this,void 0,void 0,function*(){var P,k;this.abortController&&this.abortController.abort();const O=new AbortController;this.abortController=O,m?.();try{yield this.attemptConnection(b??c,l,d,O),this.abortController=void 0,S()}catch(N){if(this.regionUrlProvider&&N instanceof Et&&N.reason!==lt.Cancelled&&N.reason!==lt.NotAllowed){let I=null;try{I=yield this.regionUrlProvider.getNextBestRegionUrl((P=this.abortController)===null||P===void 0?void 0:P.signal)}catch(D){if(D instanceof Et&&(D.status===401||D.reason===lt.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),x(D);return}}I&&!(!((k=this.abortController)===null||k===void 0)&&k.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(N.message,". Retrying with another region: ").concat(I),this.logContext),this.recreateEngine(),yield p(S,x,I)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,pw(N)),x(N))}else{let I=Ui.UNKNOWN_REASON;N instanceof Et&&(I=pw(N)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,I),x(N)}}}),v=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Po((S,x)=>{p(S,x,v)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(c,l,d,f,m,p)=>K(this,void 0,void 0,function*(){var v,S,x;const b=yield d.join(c,l,{autoSubscribe:f.autoSubscribe,adaptiveStream:typeof m.adaptiveStream=="object"?!0:m.adaptiveStream,maxRetries:f.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:f.websocketTimeout},p.signal);let P=b.serverInfo;if(P||(P={version:b.serverVersion,region:b.serverRegion}),this.serverInfo=P,this.log.debug("connected to Livekit Server ".concat(Object.entries(P).map(k=>{let[O,N]=k;return"".concat(O,": ").concat(N)}).join(", ")),{room:(v=b.room)===null||v===void 0?void 0:v.name,roomSid:(S=b.room)===null||S===void 0?void 0:S.sid,identity:(x=b.participant)===null||x===void 0?void 0:x.identity}),!P.version)throw new u5("unknown server version");return P.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),m.dynacast=!1),b}),this.applyJoinResponse=c=>{const l=c.participant;if(this.localParticipant.sid=l.sid,this.localParticipant.identity=l.identity,this.localParticipant.setEnabledPublishCodecs(c.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(c.sifTrailer)}catch(d){this.log.error(d instanceof Error?d.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:d}))}this.handleParticipantUpdates([l,...c.otherParticipants]),c.room&&this.handleRoomUpdate(c.room)},this.attemptConnection=(c,l,d,f)=>K(this,void 0,void 0,function*(){var m,p;this.state===at.Reconnecting||this.isResuming||!((m=this.engine)===null||m===void 0)&&m.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((p=this.regionUrlProvider)===null||p===void 0)&&p.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Y0),d),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const v=yield this.connectSignal(c,l,this.engine,this.connOptions,this.options,f);this.applyJoinResponse(v),this.setupLocalParticipantEvents(),this.emit(de.SignalConnected)}catch(v){yield this.engine.close(),this.recreateEngine();const S=new Et("could not establish signal connection",lt.ServerUnreachable);throw v instanceof Error&&(S.message="".concat(S.message,": ").concat(v.message)),v instanceof Et&&(S.reason=v.reason,S.status=v.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:v})),S}if(f.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Et("Connection attempt aborted",lt.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,f)}catch(v){throw yield this.engine.close(),this.recreateEngine(),v}Kn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Kn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(at.Connected),this.emit(de.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var c=arguments.length,l=new Array(c),d=0;d<c;d++)l[d]=arguments[d];return K(n,[...l],void 0,function(){var f=this;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return function*(){var p,v,S,x;const b=yield f.disconnectLock.lock();try{if(f.state===at.Disconnected){f.log.debug("already disconnected",f.logContext);return}f.log.info("disconnect from room",Object.assign({},f.logContext)),(f.state===at.Connecting||f.state===at.Reconnecting||f.isResuming)&&(f.log.warn("abort connection attempt",f.logContext),(p=f.abortController)===null||p===void 0||p.abort(),(S=(v=f.connectFuture)===null||v===void 0?void 0:v.reject)===null||S===void 0||S.call(v,new Et("Client initiated disconnect",lt.Cancelled)),f.connectFuture=void 0),!((x=f.engine)===null||x===void 0)&&x.client.isDisconnected||(yield f.engine.client.sendLeave()),f.engine&&(yield f.engine.close()),f.handleDisconnect(m,Ui.CLIENT_INITIATED),f.engine=void 0}finally{b()}}()})},this.onPageLeave=()=>K(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>K(this,void 0,void 0,function*(){const c=[],l=ai();if(l&&l.os==="iOS"){const d="livekit-dummy-audio-el";let f=document.getElementById(d);if(!f){f=document.createElement("audio"),f.id=d,f.autoplay=!0,f.hidden=!0;const m=qp();m.enabled=!0;const p=new MediaStream([m]);f.srcObject=p,document.addEventListener("visibilitychange",()=>{f&&(f.srcObject=document.hidden?null:p,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(f),this.once(de.Disconnected,()=>{f?.remove(),f=null})}c.push(f)}this.remoteParticipants.forEach(d=>{d.audioTrackPublications.forEach(f=>{f.track&&f.track.attachedElements.forEach(m=>{c.push(m)})})});try{yield Promise.all([this.acquireAudioContext(),...c.map(d=>(d.muted=!1,d.play()))]),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}),this.startVideo=()=>K(this,void 0,void 0,function*(){const c=[];for(const l of this.remoteParticipants.values())l.videoTrackPublications.forEach(d=>{var f;(f=d.track)===null||f===void 0||f.attachedElements.forEach(m=>{c.includes(m)||c.push(m)})});yield Promise.all(c.map(l=>l.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(l=>{l.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const c of this.remoteParticipants.values())this.handleParticipantDisconnected(c.identity,c);this.setAndEmitConnectionState(at.Reconnecting)&&this.emit(de.Reconnecting)},this.handleSignalRestarted=c=>K(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(c.serverRegion),Object.assign(Object.assign({},this.logContext),{region:c.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(c);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(l){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:l}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:c.serverRegion}))}catch{return}this.setAndEmitConnectionState(at.Connected),this.emit(de.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=c=>{c.forEach(l=>{var d;if(l.identity===this.localParticipant.identity){this.localParticipant.updateInfo(l);return}l.identity===""&&(l.identity=(d=this.sidToIdentity.get(l.sid))!==null&&d!==void 0?d:"");let f=this.remoteParticipants.get(l.identity);l.state===Io.DISCONNECTED?this.handleParticipantDisconnected(l.identity,f):f=this.getOrCreateParticipant(l.identity,l)})},this.handleActiveSpeakersUpdate=c=>{const l=[],d={};c.forEach(f=>{if(d[f.sid]=!0,f.sid===this.localParticipant.sid)this.localParticipant.audioLevel=f.level,this.localParticipant.setIsSpeaking(!0),l.push(this.localParticipant);else{const m=this.getRemoteParticipantBySid(f.sid);m&&(m.audioLevel=f.level,m.setIsSpeaking(!0),l.push(m))}}),d[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(f=>{d[f.sid]||(f.audioLevel=0,f.setIsSpeaking(!1))}),this.activeSpeakers=l,this.emitWhenConnected(de.ActiveSpeakersChanged,l)},this.handleSpeakersChanged=c=>{const l=new Map;this.activeSpeakers.forEach(f=>{const m=this.remoteParticipants.get(f.identity);m&&m.sid!==f.sid||l.set(f.sid,f)}),c.forEach(f=>{let m=this.getRemoteParticipantBySid(f.sid);f.sid===this.localParticipant.sid&&(m=this.localParticipant),m&&(m.audioLevel=f.level,m.setIsSpeaking(f.active),f.active?l.set(f.sid,m):l.delete(f.sid))});const d=Array.from(l.values());d.sort((f,m)=>m.audioLevel-f.audioLevel),this.activeSpeakers=d,this.emitWhenConnected(de.ActiveSpeakersChanged,d)},this.handleStreamStateUpdate=c=>{c.streamStates.forEach(l=>{const d=this.getRemoteParticipantBySid(l.participantSid);if(!d)return;const f=d.getTrackPublicationBySid(l.trackSid);if(!f||!f.track)return;const m=te.streamStateFromProto(l.state);m!==f.track.streamState&&(f.track.streamState=m,d.emit(ye.TrackStreamStateChanged,f,f.track.streamState),this.emitWhenConnected(de.TrackStreamStateChanged,f,f.track.streamState,d))})},this.handleSubscriptionPermissionUpdate=c=>{const l=this.getRemoteParticipantBySid(c.participantSid);if(!l)return;const d=l.getTrackPublicationBySid(c.trackSid);d&&d.setAllowed(c.allowed)},this.handleSubscriptionError=c=>{const l=Array.from(this.remoteParticipants.values()).find(f=>f.trackPublications.has(c.trackSid));if(!l)return;const d=l.getTrackPublicationBySid(c.trackSid);d&&d.setSubscriptionError(c.err)},this.handleDataPacket=c=>{const l=this.remoteParticipants.get(c.participantIdentity);if(c.value.case==="user")this.handleUserPacket(l,c.value.value,c.kind);else if(c.value.case==="transcription")this.handleTranscription(l,c.value.value);else if(c.value.case==="sipDtmf")this.handleSipDtmf(l,c.value.value);else if(c.value.case==="chatMessage")this.handleChatMessage(l,c.value.value);else if(c.value.case==="metrics")this.handleMetrics(c.value.value,l);else if(c.value.case==="streamHeader")this.handleStreamHeader(c.value.value,c.participantIdentity);else if(c.value.case==="streamChunk")this.handleStreamChunk(c.value.value);else if(c.value.case==="streamTrailer")this.handleStreamTrailer(c.value.value);else if(c.value.case==="rpcRequest"){const d=c.value.value;this.handleIncomingRpcRequest(c.participantIdentity,d.id,d.method,d.payload,d.responseTimeoutMs,d.version)}},this.handleUserPacket=(c,l,d)=>{this.emit(de.DataReceived,l.payload,c,d,l.topic),c?.emit(ye.DataReceived,l.payload,d)},this.handleSipDtmf=(c,l)=>{this.emit(de.SipDTMFReceived,l,c),c?.emit(ye.SipDTMFReceived,l)},this.bufferedSegments=new Map,this.handleTranscription=(c,l)=>{const d=l.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(l.transcribedParticipantIdentity),f=d?.trackPublications.get(l.trackId),m=I5(l,this.transcriptionReceivedTimes);f?.emit(Ee.TranscriptionReceived,m),d?.emit(ye.TranscriptionReceived,m,f),this.emit(de.TranscriptionReceived,m,d,f)},this.handleChatMessage=(c,l)=>{const d=U5(l);this.emit(de.ChatMessage,d,c)},this.handleMetrics=(c,l)=>{this.emit(de.MetricsReceived,c,l)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(de.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=c=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:c})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(de.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(de.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(de.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>K(this,void 0,void 0,function*(){var c;((c=ai())===null||c===void 0?void 0:c.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(de.MediaDevicesChanged)}),this.handleRoomUpdate=c=>{const l=this.roomInfo;this.roomInfo=c,l&&l.metadata!==c.metadata&&this.emitWhenConnected(de.RoomMetadataChanged,c.metadata),l?.activeRecording!==c.activeRecording&&this.emitWhenConnected(de.RecordingStatusChanged,c.activeRecording)},this.handleConnectionQualityUpdate=c=>{c.updates.forEach(l=>{if(l.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(l.quality);return}const d=this.getRemoteParticipantBySid(l.participantSid);d&&d.setConnectionQuality(l.quality)})},this.onLocalParticipantMetadataChanged=c=>{this.emit(de.ParticipantMetadataChanged,c,this.localParticipant)},this.onLocalParticipantNameChanged=c=>{this.emit(de.ParticipantNameChanged,c,this.localParticipant)},this.onLocalAttributesChanged=c=>{this.emit(de.ParticipantAttributesChanged,c,this.localParticipant)},this.onLocalTrackMuted=c=>{this.emit(de.TrackMuted,c,this.localParticipant)},this.onLocalTrackUnmuted=c=>{this.emit(de.TrackUnmuted,c,this.localParticipant)},this.onTrackProcessorUpdate=c=>{var l;(l=c?.onPublish)===null||l===void 0||l.call(c,this)},this.onLocalTrackPublished=c=>K(this,void 0,void 0,function*(){var l,d,f,m,p,v;(l=c.track)===null||l===void 0||l.on(Ee.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=c.track)===null||d===void 0||d.on(Ee.Restarted,this.onLocalTrackRestarted),(p=(m=(f=c.track)===null||f===void 0?void 0:f.getProcessor())===null||m===void 0?void 0:m.onPublish)===null||p===void 0||p.call(m,this),this.emit(de.LocalTrackPublished,c,this.localParticipant),Dr(c.track)&&(yield c.track.checkForSilence())&&this.emit(de.LocalAudioSilenceDetected,c);const S=yield(v=c.track)===null||v===void 0?void 0:v.getDeviceId(!1),x=Tv(c.source);x&&S&&S!==this.localParticipant.activeDeviceMap.get(x)&&(this.localParticipant.activeDeviceMap.set(x,S),this.emit(de.ActiveDeviceChanged,x,S))}),this.onLocalTrackUnpublished=c=>{var l,d;(l=c.track)===null||l===void 0||l.off(Ee.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=c.track)===null||d===void 0||d.off(Ee.Restarted,this.onLocalTrackRestarted),this.emit(de.LocalTrackUnpublished,c,this.localParticipant)},this.onLocalTrackRestarted=c=>K(this,void 0,void 0,function*(){const l=yield c.getDeviceId(!1),d=Tv(c.source);d&&l&&l!==this.localParticipant.activeDeviceMap.get(d)&&(this.log.debug("local track restarted, setting ".concat(d," ").concat(l," active"),this.logContext),this.localParticipant.activeDeviceMap.set(d,l),this.emit(de.ActiveDeviceChanged,d,l))}),this.onLocalConnectionQualityChanged=c=>{this.emit(de.ConnectionQualityChanged,c,this.localParticipant)},this.onMediaDevicesError=(c,l)=>{this.emit(de.MediaDevicesError,c,l)},this.onLocalParticipantPermissionsChanged=c=>{this.emit(de.ParticipantPermissionsChanged,c,this.localParticipant)},this.onLocalChatMessageSent=c=>{this.emit(de.ChatMessage,c,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},l8),e),this.log=Br((i=this.options.loggerName)!==null&&i!==void 0?i:Li.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},QR),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},eA),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},c8),e?.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new In,this.localParticipant=new K8("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ps(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ps(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",Ps(this.options.audioOutput.deviceId)).catch(c=>this.log.warn("Could not set audio output: ".concat(c.message),this.logContext)),this.options.e2ee&&this.setupE2EE(),Kn()){const c=new AbortController;(a=navigator.mediaDevices)===null||a===void 0||a.addEventListener("devicechange",this.handleDeviceChange,{signal:c.signal}),Fr.cleanupRegistry&&Fr.cleanupRegistry.register(this,()=>{c.abort()})}}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,n,i,r,a,c){return K(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),c!==1){yield this.engine.publishRpcResponse(e,n,null,qt.builtIn("UNSUPPORTED_VERSION"));return}const l=this.rpcHandlers.get(i);if(!l){yield this.engine.publishRpcResponse(e,n,null,qt.builtIn("UNSUPPORTED_METHOD"));return}let d=null,f=null;try{const m=yield l({requestId:n,callerIdentity:e,payload:r,responseTimeout:a});W0(m)>tA?(d=qt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):f=m}catch(m){m instanceof qt?d=m:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),m),d=qt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,f,d)})}setE2EEEnabled(e){return K(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new Y5(this.options.e2ee),this.e2eeManager.on(ks.ParticipantEncryptionStatusChanged,(n,i)=>{j5(i)&&(this.isE2EEEnabled=n),this.emit(de.ParticipantEncryptionStatusChanged,n,i)}),this.e2eeManager.on(ks.EncryptionError,n=>this.emit(de.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return K(this,void 0,void 0,function*(){return this.state===at.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const i=r=>{r.sid!==""&&(this.engine.off(De.RoomUpdate,i),e(r.sid))};this.engine.on(De.RoomUpdate,i),this.once(de.Disconnected,()=>{this.engine.off(De.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new D8(this.options),this.engine.on(De.ParticipantUpdate,this.handleParticipantUpdates).on(De.RoomUpdate,this.handleRoomUpdate).on(De.SpeakersChanged,this.handleSpeakersChanged).on(De.StreamStateChanged,this.handleStreamStateUpdate).on(De.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(De.SubscriptionError,this.handleSubscriptionError).on(De.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(De.MediaTrackAdded,(e,n,i)=>{this.onTrackAdded(e,n,i)}).on(De.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(De.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(De.DataPacketReceived,this.handleDataPacket).on(De.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(at.SignalReconnecting)&&this.emit(de.SignalReconnecting)}).on(De.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(at.Connected)&&this.emit(de.Reconnected)}).on(De.SignalResumed,()=>{this.bufferedEvents=[],(this.state===at.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(De.Restarting,this.handleRestarting).on(De.SignalRestarted,this.handleSignalRestarted).on(De.Offline,()=>{this.setAndEmitConnectionState(at.Reconnecting)&&this.emit(de.Reconnecting)}).on(De.DCBufferStatusChanged,(e,n)=>{this.emit(de.DCBufferStatusChanged,e,n)}).on(De.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:r}=i;return r===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(ye.LocalTrackSubscribed,n),this.emitWhenConnected(de.LocalTrackSubscribed,n,this.localParticipant)}).on(De.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(de.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Tn.getInstance().getDevices(e,n)}prepareConnection(e,n){return K(this,void 0,void 0,function*(){if(this.state===at.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(vv(new URL(e))&&n){this.regionUrlProvider=new Ev(e,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===at.Disconnected&&(this.regionUrl=i,yield fetch(yv(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(yv(e),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return K(this,void 0,void 0,function*(){let i=()=>{},r;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new Wi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new Wi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new Wi({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new Wi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>K(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Wi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>K(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new Wi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new Wi({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),i=()=>K(this,void 0,void 0,function*(){const a=this.engine.client.onLeave;a&&a(new Yf({reason:Ui.CLIENT_INITIATED,action:Uo.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new Wi({scenario:{case:"subscriberBandwidth",value:la(n)}});break;case"leave-full-reconnect":r=new Wi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return K(this,arguments,void 0,function(i,r){var a=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return function*(){var l,d,f,m,p,v,S;let x=!0,b=!1;const P=c?{exact:r}:r;if(i==="audioinput"){b=a.localParticipant.audioTrackPublications.size===0;const k=(l=a.getActiveDevice(i))!==null&&l!==void 0?l:a.options.audioCaptureDefaults.deviceId;a.options.audioCaptureDefaults.deviceId=P;const O=Array.from(a.localParticipant.audioTrackPublications.values()).filter(I=>I.source===te.Source.Microphone);try{x=(yield Promise.all(O.map(I=>{var D;return(D=I.audioTrack)===null||D===void 0?void 0:D.setDeviceId(P)}))).every(I=>I===!0)}catch(I){throw a.options.audioCaptureDefaults.deviceId=k,I}const N=O.some(I=>{var D,B;return(B=(D=I.track)===null||D===void 0?void 0:D.isMuted)!==null&&B!==void 0?B:!1});x&&N&&(b=!0)}else if(i==="videoinput"){b=a.localParticipant.videoTrackPublications.size===0;const k=(d=a.getActiveDevice(i))!==null&&d!==void 0?d:a.options.videoCaptureDefaults.deviceId;a.options.videoCaptureDefaults.deviceId=P;const O=Array.from(a.localParticipant.videoTrackPublications.values()).filter(I=>I.source===te.Source.Camera);try{x=(yield Promise.all(O.map(I=>{var D;return(D=I.videoTrack)===null||D===void 0?void 0:D.setDeviceId(P)}))).every(I=>I===!0)}catch(I){throw a.options.videoCaptureDefaults.deviceId=k,I}const N=O.some(I=>{var D,B;return(B=(D=I.track)===null||D===void 0?void 0:D.isMuted)!==null&&B!==void 0?B:!1});x&&N&&(b=!0)}else if(i==="audiooutput"){if(b=!0,!gv()&&!a.options.webAudioMix||a.options.webAudioMix&&a.audioContext&&!("setSinkId"in a.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");a.options.webAudioMix&&(r=(f=yield Tn.getInstance().normalizeDeviceId("audiooutput",r))!==null&&f!==void 0?f:""),(m=(S=a.options).audioOutput)!==null&&m!==void 0||(S.audioOutput={});const k=(p=a.getActiveDevice(i))!==null&&p!==void 0?p:a.options.audioOutput.deviceId;a.options.audioOutput.deviceId=r;try{a.options.webAudioMix&&((v=a.audioContext)===null||v===void 0||v.setSinkId(r)),yield Promise.all(Array.from(a.remoteParticipants.values()).map(O=>O.setAudioOutput({deviceId:r})))}catch(O){throw a.options.audioOutput.deviceId=k,O}}return b&&(a.localParticipant.activeDeviceMap.set(i,r),a.emit(de.ActiveDeviceChanged,i,r)),x}()})}setupLocalParticipantEvents(){this.localParticipant.on(ye.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ye.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ye.AttributesChanged,this.onLocalAttributesChanged).on(ye.TrackMuted,this.onLocalTrackMuted).on(ye.TrackUnmuted,this.onLocalTrackUnmuted).on(ye.LocalTrackPublished,this.onLocalTrackPublished).on(ye.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ye.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ye.MediaDevicesError,this.onMediaDevicesError).on(ye.AudioStreamAcquired,this.startAudio).on(ye.ChatMessage,this.onLocalChatMessageSent).on(ye.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,i){if(this.state===at.Connecting||this.state===at.Reconnecting){const m=()=>{this.onTrackAdded(e,n,i),p()},p=()=>{this.off(de.Reconnected,m),this.off(de.Connected,m),this.off(de.Disconnected,p)};this.once(de.Reconnected,m),this.once(de.Connected,m),this.once(de.Disconnected,p);return}if(this.state===at.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=x5(n.id),a=r[0];let c=r[1],l=e.id;if(c&&c.startsWith("TR")&&(l=c),a===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const d=Array.from(this.remoteParticipants.values()).find(m=>m.sid===a);if(!d){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(a),this.logContext);return}let f;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?f=this.options.adaptiveStream:f={}),d.addSubscribedMediaTrack(e,l,n,i,f)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==at.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(a=>{r.unpublishTrack(a.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var a,c,l;r.track&&this.localParticipant.unpublishTrack(r.track,e),e?((a=r.track)===null||a===void 0||a.detach(),(c=r.track)===null||c===void 0||c.stop()):(l=r.track)===null||l===void 0||l.stopMonitor()}),this.localParticipant.off(ye.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ye.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ye.AttributesChanged,this.onLocalAttributesChanged).off(ye.TrackMuted,this.onLocalTrackMuted).off(ye.TrackUnmuted,this.onLocalTrackUnmuted).off(ye.LocalTrackPublished,this.onLocalTrackPublished).off(ye.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ye.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ye.MediaDevicesError,this.onMediaDevicesError).off(ye.AudioStreamAcquired,this.startAudio).off(ye.ChatMessage,this.onLocalChatMessageSent).off(ye.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Kn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(at.Disconnected),this.emit(de.Disconnected,n)}}}handleParticipantDisconnected(e,n){var i;this.remoteParticipants.delete(e),n&&(n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(de.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleStreamHeader(e,n){return K(this,void 0,void 0,function*(){var i;if(e.contentHeader.case==="byteHeader"){const r=this.byteStreamHandlers.get(e.topic);if(!r){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let a;const c={id:e.streamId,name:(i=e.contentHeader.value.name)!==null&&i!==void 0?i:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:of(e.timestamp),attributes:e.attributes},l=new ReadableStream({start:d=>{a=d,this.byteStreamControllers.set(e.streamId,{info:c,controller:a,startTime:Date.now()})}});r(new I8(c,l,of(e.totalLength)),{identity:n})}else if(e.contentHeader.case==="textHeader"){const r=this.textStreamHandlers.get(e.topic);if(!r){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let a;const c={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},l=new ReadableStream({start:d=>{a=d,this.textStreamControllers.set(e.streamId,{info:c,controller:a,startTime:Date.now()})}});r(new U8(c,l,of(e.totalLength)),{identity:n})}})}handleStreamChunk(e){const n=this.byteStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e);const i=this.textStreamControllers.get(e.streamId);i&&e.content.length>0&&i.controller.enqueue(e)}handleStreamTrailer(e){const n=this.textStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.textStreamControllers.delete(e.streamId));const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.byteStreamControllers.delete(e.streamId))}selectDefaultDevices(){return K(this,void 0,void 0,function*(){var e,n,i;const r=Tn.getInstance().previousDevices,a=yield Tn.getInstance().getDevices(void 0,!1),c=ai();if(c?.name==="Chrome"&&c.os!=="iOS")for(let d of a){const f=r.find(m=>m.deviceId===d.deviceId);f&&f.label!==""&&f.kind===d.kind&&f.label!==d.label&&this.getActiveDevice(d.kind)==="default"&&this.emit(de.ActiveDeviceChanged,d.kind,d.deviceId)}const l=["audiooutput","audioinput","videoinput"];for(let d of l){const f=F5(d),m=this.localParticipant.getTrackPublication(f);if(m&&(!((e=m.track)===null||e===void 0)&&e.isUserProvided))continue;const p=a.filter(S=>S.kind===d),v=this.getActiveDevice(d);if(v===((n=r.filter(S=>S.kind===d)[0])===null||n===void 0?void 0:n.deviceId)&&p.length>0&&((i=p[0])===null||i===void 0?void 0:i.deviceId)!==v){yield this.switchActiveDevice(d,p[0].deviceId);continue}d==="audioinput"&&!wf()||d==="videoinput"||p.length>0&&!p.find(S=>S.deviceId===this.getActiveDevice(d))&&(d!=="audiooutput"||!wf())&&(yield this.switchActiveDevice(d,p[0].deviceId))}})}acquireAudioContext(){return K(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=H0())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),Yn(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(de.AudioPlaybackStatusChanged,i))})}createParticipant(e,n){var i;let r;return n?r=Af.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new Af(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(a=>this.log.warn("Could not set audio output: ".concat(a.message),this.logContext)),r}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const r=this.remoteParticipants.get(e);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const i=this.createParticipant(e,n);return this.remoteParticipants.set(e,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(de.ParticipantConnected,i),i.on(ye.TrackPublished,r=>{this.emitWhenConnected(de.TrackPublished,r,i)}).on(ye.TrackSubscribed,(r,a)=>{r.kind===te.Kind.Audio?(r.on(Ee.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(Ee.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===te.Kind.Video&&(r.on(Ee.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(Ee.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(de.TrackSubscribed,r,a,i)}).on(ye.TrackUnpublished,r=>{this.emit(de.TrackUnpublished,r,i)}).on(ye.TrackUnsubscribed,(r,a)=>{this.emit(de.TrackUnsubscribed,r,a,i)}).on(ye.TrackMuted,r=>{this.emitWhenConnected(de.TrackMuted,r,i)}).on(ye.TrackUnmuted,r=>{this.emitWhenConnected(de.TrackUnmuted,r,i)}).on(ye.ParticipantMetadataChanged,r=>{this.emitWhenConnected(de.ParticipantMetadataChanged,r,i)}).on(ye.ParticipantNameChanged,r=>{this.emitWhenConnected(de.ParticipantNameChanged,r,i)}).on(ye.AttributesChanged,r=>{this.emitWhenConnected(de.ParticipantAttributesChanged,r,i)}).on(ye.ConnectionQualityChanged,r=>{this.emitWhenConnected(de.ConnectionQualityChanged,r,i)}).on(ye.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(de.ParticipantPermissionsChanged,r,i)}).on(ye.TrackSubscriptionStatusChanged,(r,a)=>{this.emitWhenConnected(de.TrackSubscriptionStatusChanged,r,a,i)}).on(ye.TrackSubscriptionFailed,(r,a)=>{this.emit(de.TrackSubscriptionFailed,r,i,a)}).on(ye.TrackSubscriptionPermissionChanged,(r,a)=>{this.emitWhenConnected(de.TrackSubscriptionPermissionChanged,r,a,i)}).on(ye.Active,()=>{this.emitWhenConnected(de.ParticipantActive,i),i.kind===ba.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((i,r)=>(i.push(...r.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&L5(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Rn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ui.STATE_MISMATCH))):e=0},G8)}clearConnectionReconcile(){this.connectionReconcileInterval&&Rn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(de.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,i]=e;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.state===at.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,i]);else if(this.state===at.Connected)return this.emit(e,...i);return!1}simulateParticipants(e){return K(this,void 0,void 0,function*(){var n,i;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),a=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Kf({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Mt.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new ya({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(de.SignalConnected),this.emit(de.Connected),this.setAndEmitConnectionState(at.Connected),r.video){const c=new Rv(te.Kind.Video,new Ro({source:an.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ni.AUDIO,name:"video-dummy"}),new kf(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:mw(160*((n=a.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(ye.LocalTrackPublished,c)}if(r.audio){const c=new Rv(te.Kind.Audio,new Ro({source:an.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ni.AUDIO}),new Ef(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:qp(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(c),this.localParticipant.emit(ye.LocalTrackPublished,c)}for(let c=0;c<a.count-1;c+=1){let l=new ya({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(c),state:Io.ACTIVE,tracks:[],joinedAt:Mt.parse(Date.now())});const d=this.getOrCreateParticipant(l.identity,l);if(a.video){const f=mw(160*((i=a.aspectRatios[c%a.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),m=new Ro({source:an.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Ni.AUDIO});d.addSubscribedMediaTrack(f,m.sid,new MediaStream([f]),new RTCRtpReceiver),l.tracks=[...l.tracks,m]}if(a.audio){const f=qp(),m=new Ro({source:an.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Ni.AUDIO});d.addSubscribedMediaTrack(f,m.sid,new MediaStream([f]),new RTCRtpReceiver),l.tracks=[...l.tracks,m]}d.updateInfo(l)}})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e!==de.ActiveSpeakersChanged&&e!==de.TranscriptionReceived){const a=uA(i).filter(c=>c!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:a}))}return super.emit(e,...i)}}Fr.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function uA(t){return t.map(e=>{if(e)return Array.isArray(e)?uA(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var Oi;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Oi||(Oi={}));class Ls extends lr.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Oi.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Fr(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(e){return K(this,void 0,void 0,function*(){if(this.status!==Oi.IDLE)throw Error("check is running already");this.setStatus(Oi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Oi.SKIPPED&&this.setStatus(this.isSuccess()?Oi.SUCCESS:Oi.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return K(this,void 0,void 0,function*(){return this.room.state===at.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return K(this,void 0,void 0,function*(){this.room&&this.room.state!==at.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Oi.SKIPPED)}switchProtocol(e){return K(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(de.Reconnecting,()=>{n=!0}),this.room.once(de.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(a=>setTimeout(a,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(i)return;yield Yn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class Y8 extends Ls{get description(){return"Cloud regions"}perform(){return K(this,void 0,void 0,function*(){const e=new Ev(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],i=new Set;for(let a=0;a<3;a++){const c=yield e.getNextBestRegionUrl();if(!c)break;if(i.has(c))continue;i.add(c);const l=yield this.checkCloudRegion(c);this.appendMessage("".concat(l.region," RTT: ").concat(l.rtt,"ms, duration: ").concat(l.duration,"ms")),n.push(l)}n.sort((a,c)=>(a.duration-c.duration)*.5+(a.rtt-c.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return K(this,void 0,void 0,function*(){var n,i;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const a=yield this.room.localParticipant.streamText({topic:"test"}),c=1e3,d=1e6/c,f="A".repeat(c),m=Date.now();for(let x=0;x<d;x++)yield a.write(f);yield a.close();const p=Date.now(),v=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),S={region:r,rtt:1e4,duration:p-m};return v?.forEach(x=>{x.type==="candidate-pair"&&x.nominated&&(S.rtt=x.currentRoundTripTime*1e3)}),yield this.disconnect(),S})}}const Qp=1e4;class W8 extends Ls{get description(){return"Connection via UDP vs TCP"}perform(){return K(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(Qp/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(Qp/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return K(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=0;const a=()=>{r=(r+1)%360,i.fillStyle="hsl(".concat(r,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(a)};a();const l=n.captureStream(30).getVideoTracks()[0],f=(yield this.room.localParticipant.publishTrack(l,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,m={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},p=setInterval(()=>K(this,void 0,void 0,function*(){const v=yield f.getRTCStatsReport();v?.forEach(S=>{S.type==="outbound-rtp"?(m.packetsSent=S.packetsSent,m.qualityLimitationDurations=S.qualityLimitationDurations,m.bitrateTotal+=S.targetBitrate,m.count++):S.type==="remote-inbound-rtp"&&(m.packetsLost=S.packetsLost,m.rttTotal+=S.roundTripTime,m.jitterTotal+=S.jitter)})}),1e3);return yield new Promise(v=>setTimeout(v,Qp)),clearInterval(p),l.stop(),n.remove(),yield this.disconnect(),m})}}class $8 extends Ls{get description(){return"Can publish audio"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield z8();if(yield XR(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(l=>setTimeout(l,3e3));const a=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!a)throw new Error("Could not get RTCStats");let c=0;if(a.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="audio"||!l.kind&&l.mediaType==="audio")&&(c=l.packetsSent)}),c===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(c," audio packets"))})}}class X8 extends Ls{get description(){return"Can publish video"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield V8();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(c=>setTimeout(c,5e3));const r=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!r)throw new Error("Could not get RTCStats");let a=0;if(r.forEach(c=>{c.type==="outbound-rtp"&&(c.kind==="video"||!c.kind&&c.mediaType==="video")&&(a+=c.packetsSent)}),a===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(a," video packets"))})}checkForVideo(e){return K(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,yield new Promise(r=>{i.onplay=()=>{setTimeout(()=>{var a,c,l,d;const f=document.createElement("canvas"),m=e.getSettings(),p=(c=(a=m.width)!==null&&a!==void 0?a:i.videoWidth)!==null&&c!==void 0?c:1280,v=(d=(l=m.height)!==null&&l!==void 0?l:i.videoHeight)!==null&&d!==void 0?d:720;f.width=p,f.height=v;const S=f.getContext("2d");S.drawImage(i,0,0);const b=S.getImageData(0,0,f.width,f.height).data;let P=!0;for(let k=0;k<b.length;k+=4)if(b[k]!==0||b[k+1]!==0||b[k+2]!==0){P=!1;break}P?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},i.play()}),n.getTracks().forEach(r=>r.stop()),i.remove()})}}class Z8 extends Ls{get description(){return"Resuming connection after interruption"}perform(){return K(this,void 0,void 0,function*(){var e;const n=yield this.connect();let i=!1,r=!1,a;const c=new Promise(f=>{setTimeout(f,5e3),a=f}),l=()=>{i=!0};n.on(de.SignalReconnecting,l).on(de.Reconnecting,l).on(de.Reconnected,()=>{r=!0,a(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const d=n.engine.client.onClose;if(d&&d(""),yield c,i){if(!r||n.state!==at.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class J8 extends Ls{get description(){return"Can connect via TURN"}perform(){return K(this,void 0,void 0,function*(){var e,n;const i=new q0,r=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let a=!1,c=!1,l=!1;for(let d of r.iceServers)for(let f of d.urls)f.startsWith("turn:")?(c=!0,l=!0):f.startsWith("turns:")&&(c=!0,l=!0,a=!0),f.startsWith("stun:")&&(l=!0);l?c&&!a&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||c?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class Q8 extends Ls{get description(){return"Establishing WebRTC connection"}perform(){return K(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(de.SignalConnected,()=>{const i=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(r,a)=>{if(r.candidate){const c=new RTCIceCandidate(r);let l="".concat(c.protocol," ").concat(c.address,":").concat(c.port," ").concat(c.type);c.address&&(ej(c.address)?l+=" (private)":c.protocol==="tcp"&&c.tcpType==="passive"?(e=!0,l+=" (passive)"):c.protocol==="udp"&&(n=!0)),this.appendMessage(l)}i&&i(r,a)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=r=>{r instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(r.errorCode," ").concat(r.errorText," ").concat(r.url))})});try{yield this.connect(),ot.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function ej(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class tj extends Ls{get description(){return"Connecting to signal connection via WebSocket"}perform(){return K(this,void 0,void 0,function*(){var e,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new q0;const a=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(a.serverVersion,".")),((e=a.serverInfo)===null||e===void 0?void 0:e.edition)===Zk.Cloud&&(!((n=a.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=a.serverInfo)===null||i===void 0?void 0:i.region)),yield r.close()})}}class _Y extends lr.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=i}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Oi.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Oi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return K(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new e(this.url,this.token,this.options),r=c=>{this.updateCheck(n,c)};i.on("update",r);const a=yield i.run();return i.off("update",r),a})}checkWebsocket(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(tj)})}checkWebRTC(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Q8)})}checkTURN(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(J8)})}checkReconnect(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Z8)})}checkPublishAudio(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck($8)})}checkPublishVideo(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(X8)})}checkConnectionProtocol(){return K(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(W8);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return K(this,void 0,void 0,function*(){return this.createAndRunCheck(Y8)})}}const Z0=T.createContext({});function J0(t){const e=T.useRef(null);return e.current===null&&(e.current=t()),e.current}const Q0=typeof window<"u",dA=Q0?T.useLayoutEffect:T.useEffect,Zf=T.createContext(null);function ey(t,e){t.indexOf(e)===-1&&t.push(e)}function ty(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Vr=(t,e,n)=>n>e?e:n<t?t:n;let ny=()=>{};const zr={},fA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function hA(t){return typeof t=="object"&&t!==null}const mA=t=>/^0[^.\s]+$/u.test(t);function iy(t){let e;return()=>(e===void 0&&(e=t()),e)}const wi=t=>t,nj=(t,e)=>n=>e(t(n)),ou=(...t)=>t.reduce(nj),Kl=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class ry{constructor(){this.subscriptions=[]}add(e){return ey(this.subscriptions,e),()=>ty(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let a=0;a<r;a++){const c=this.subscriptions[a];c&&c(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const er=t=>t*1e3,tr=t=>t/1e3;function pA(t,e){return e?t*(1e3/e):0}const gA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ij=1e-7,rj=12;function sj(t,e,n,i,r){let a,c,l=0;do c=e+(n-e)/2,a=gA(c,i,r)-t,a>0?n=c:e=c;while(Math.abs(a)>ij&&++l<rj);return c}function cu(t,e,n,i){if(t===e&&n===i)return wi;const r=a=>sj(a,0,1,t,n);return a=>a===0||a===1?a:gA(r(a),e,i)}const vA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,yA=t=>e=>1-t(1-e),bA=cu(.33,1.53,.69,.99),sy=yA(bA),SA=vA(sy),TA=t=>(t*=2)<1?.5*sy(t):.5*(2-Math.pow(2,-10*(t-1))),ay=t=>1-Math.sin(Math.acos(t)),xA=yA(ay),wA=vA(ay),aj=cu(.42,0,1,1),oj=cu(0,0,.58,1),CA=cu(.42,0,.58,1),cj=t=>Array.isArray(t)&&typeof t[0]!="number",EA=t=>Array.isArray(t)&&typeof t[0]=="number",lj={linear:wi,easeIn:aj,easeInOut:CA,easeOut:oj,circIn:ay,circInOut:wA,circOut:xA,backIn:sy,backInOut:SA,backOut:bA,anticipate:TA},uj=t=>typeof t=="string",Nw=t=>{if(EA(t)){ny(t.length===4);const[e,n,i,r]=t;return cu(e,n,i,r)}else if(uj(t))return lj[t];return t},Dd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function dj(t,e){let n=new Set,i=new Set,r=!1,a=!1;const c=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function d(m){c.has(m)&&(f.schedule(m),t()),m(l)}const f={schedule:(m,p=!1,v=!1)=>{const x=v&&r?n:i;return p&&c.add(m),x.has(m)||x.add(m),m},cancel:m=>{i.delete(m),c.delete(m)},process:m=>{if(l=m,r){a=!0;return}r=!0,[n,i]=[i,n],n.forEach(d),n.clear(),r=!1,a&&(a=!1,f.process(m))}};return f}const fj=40;function kA(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=Dd.reduce((N,I)=>(N[I]=dj(a),N),{}),{setup:l,read:d,resolveKeyframes:f,preUpdate:m,update:p,preRender:v,render:S,postRender:x}=c,b=()=>{const N=zr.useManualTiming?r.timestamp:performance.now();n=!1,zr.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(N-r.timestamp,fj),1)),r.timestamp=N,r.isProcessing=!0,l.process(r),d.process(r),f.process(r),m.process(r),p.process(r),v.process(r),S.process(r),x.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(b))},P=()=>{n=!0,i=!0,r.isProcessing||t(b)};return{schedule:Dd.reduce((N,I)=>{const D=c[I];return N[I]=(B,H=!1,z=!1)=>(n||P(),D.schedule(B,H,z)),N},{}),cancel:N=>{for(let I=0;I<Dd.length;I++)c[Dd[I]].cancel(N)},state:r,steps:c}}const{schedule:Ot,cancel:Ds,state:kn,steps:eg}=kA(typeof requestAnimationFrame<"u"?requestAnimationFrame:wi,!0);let lf;function hj(){lf=void 0}const Gn={now:()=>(lf===void 0&&Gn.set(kn.isProcessing||zr.useManualTiming?kn.timestamp:performance.now()),lf),set:t=>{lf=t,queueMicrotask(hj)}},RA=t=>e=>typeof e=="string"&&e.startsWith(t),oy=RA("--"),mj=RA("var(--"),cy=t=>mj(t)?pj.test(t.split("/*")[0].trim()):!1,pj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ic={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Gl={...ic,transform:t=>Vr(0,1,t)},Md={...ic,default:1},Il=t=>Math.round(t*1e5)/1e5,ly=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gj(t){return t==null}const vj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,uy=(t,e)=>n=>!!(typeof n=="string"&&vj.test(n)&&n.startsWith(t)||e&&!gj(n)&&Object.prototype.hasOwnProperty.call(n,e)),AA=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,a,c,l]=i.match(ly);return{[t]:parseFloat(r),[e]:parseFloat(a),[n]:parseFloat(c),alpha:l!==void 0?parseFloat(l):1}},yj=t=>Vr(0,255,t),tg={...ic,transform:t=>Math.round(yj(t))},fa={test:uy("rgb","red"),parse:AA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+tg.transform(t)+", "+tg.transform(e)+", "+tg.transform(n)+", "+Il(Gl.transform(i))+")"};function bj(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Av={test:uy("#"),parse:bj,transform:fa.transform},lu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xs=lu("deg"),nr=lu("%"),He=lu("px"),Sj=lu("vh"),Tj=lu("vw"),Iw={...nr,parse:t=>nr.parse(t)/100,transform:t=>nr.transform(t*100)},_o={test:uy("hsl","hue"),parse:AA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+nr.transform(Il(e))+", "+nr.transform(Il(n))+", "+Il(Gl.transform(i))+")"},sn={test:t=>fa.test(t)||Av.test(t)||_o.test(t),parse:t=>fa.test(t)?fa.parse(t):_o.test(t)?_o.parse(t):Av.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?fa.transform(t):_o.transform(t),getAnimatableNone:t=>{const e=sn.parse(t);return e.alpha=0,sn.transform(e)}},xj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wj(t){return isNaN(t)&&typeof t=="string"&&(t.match(ly)?.length||0)+(t.match(xj)?.length||0)>0}const PA="number",_A="color",Cj="var",Ej="var(",Uw="${}",kj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yl(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let a=0;const l=e.replace(kj,d=>(sn.test(d)?(i.color.push(a),r.push(_A),n.push(sn.parse(d))):d.startsWith(Ej)?(i.var.push(a),r.push(Cj),n.push(d)):(i.number.push(a),r.push(PA),n.push(parseFloat(d))),++a,Uw)).split(Uw);return{values:n,split:l,indexes:i,types:r}}function DA(t){return Yl(t).values}function MA(t){const{split:e,types:n}=Yl(t),i=e.length;return r=>{let a="";for(let c=0;c<i;c++)if(a+=e[c],r[c]!==void 0){const l=n[c];l===PA?a+=Il(r[c]):l===_A?a+=sn.transform(r[c]):a+=r[c]}return a}}const Rj=t=>typeof t=="number"?0:sn.test(t)?sn.getAnimatableNone(t):t;function Aj(t){const e=DA(t);return MA(t)(e.map(Rj))}const Ms={test:wj,parse:DA,createTransformer:MA,getAnimatableNone:Aj};function ng(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Pj({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,a=0,c=0;if(!e)r=a=c=n;else{const l=n<.5?n*(1+e):n+e-n*e,d=2*n-l;r=ng(d,l,t+1/3),a=ng(d,l,t),c=ng(d,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:i}}function Pf(t,e){return n=>n>0?e:t}const jt=(t,e,n)=>t+(e-t)*n,ig=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},_j=[Av,fa,_o],Dj=t=>_j.find(e=>e.test(t));function Lw(t){const e=Dj(t);if(!e)return!1;let n=e.parse(t);return e===_o&&(n=Pj(n)),n}const jw=(t,e)=>{const n=Lw(t),i=Lw(e);if(!n||!i)return Pf(t,e);const r={...n};return a=>(r.red=ig(n.red,i.red,a),r.green=ig(n.green,i.green,a),r.blue=ig(n.blue,i.blue,a),r.alpha=jt(n.alpha,i.alpha,a),fa.transform(r))},Pv=new Set(["none","hidden"]);function Mj(t,e){return Pv.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Oj(t,e){return n=>jt(t,e,n)}function dy(t){return typeof t=="number"?Oj:typeof t=="string"?cy(t)?Pf:sn.test(t)?jw:Uj:Array.isArray(t)?OA:typeof t=="object"?sn.test(t)?jw:Nj:Pf}function OA(t,e){const n=[...t],i=n.length,r=t.map((a,c)=>dy(a)(a,e[c]));return a=>{for(let c=0;c<i;c++)n[c]=r[c](a);return n}}function Nj(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=dy(t[r])(t[r],e[r]));return r=>{for(const a in i)n[a]=i[a](r);return n}}function Ij(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],c=t.indexes[a][i[a]],l=t.values[c]??0;n[r]=l,i[a]++}return n}const Uj=(t,e)=>{const n=Ms.createTransformer(e),i=Yl(t),r=Yl(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Pv.has(t)&&!r.values.length||Pv.has(e)&&!i.values.length?Mj(t,e):ou(OA(Ij(i,r),r.values),n):Pf(t,e)};function NA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?jt(t,e,n):dy(t)(t,e)}const Lj=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ot.update(e,n),stop:()=>Ds(e),now:()=>kn.isProcessing?kn.timestamp:Gn.now()}},IA=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let a=0;a<r;a++)i+=Math.round(t(a/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},_f=2e4;function fy(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<_f;)e+=n,i=t.next(e);return e>=_f?1/0:e}function jj(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(fy(i),_f);return{type:"keyframes",ease:a=>i.next(r*a).value/e,duration:tr(r)}}const Bj=5;function UA(t,e,n){const i=Math.max(e-Bj,0);return pA(n-t(i),e-i)}const zt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rg=.001;function Fj({duration:t=zt.duration,bounce:e=zt.bounce,velocity:n=zt.velocity,mass:i=zt.mass}){let r,a,c=1-e;c=Vr(zt.minDamping,zt.maxDamping,c),t=Vr(zt.minDuration,zt.maxDuration,tr(t)),c<1?(r=f=>{const m=f*c,p=m*t,v=m-n,S=_v(f,c),x=Math.exp(-p);return rg-v/S*x},a=f=>{const p=f*c*t,v=p*n+n,S=Math.pow(c,2)*Math.pow(f,2)*t,x=Math.exp(-p),b=_v(Math.pow(f,2),c);return(-r(f)+rg>0?-1:1)*((v-S)*x)/b}):(r=f=>{const m=Math.exp(-f*t),p=(f-n)*t+1;return-rg+m*p},a=f=>{const m=Math.exp(-f*t),p=(n-f)*(t*t);return m*p});const l=5/t,d=zj(r,a,l);if(t=er(t),isNaN(d))return{stiffness:zt.stiffness,damping:zt.damping,duration:t};{const f=Math.pow(d,2)*i;return{stiffness:f,damping:c*2*Math.sqrt(i*f),duration:t}}}const Vj=12;function zj(t,e,n){let i=n;for(let r=1;r<Vj;r++)i=i-t(i)/e(i);return i}function _v(t,e){return t*Math.sqrt(1-e*e)}const Hj=["duration","bounce"],qj=["stiffness","damping","mass"];function Bw(t,e){return e.some(n=>t[n]!==void 0)}function Kj(t){let e={velocity:zt.velocity,stiffness:zt.stiffness,damping:zt.damping,mass:zt.mass,isResolvedFromDuration:!1,...t};if(!Bw(t,qj)&&Bw(t,Hj))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,a=2*Vr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:zt.mass,stiffness:r,damping:a}}else{const n=Fj(t);e={...e,...n,mass:zt.mass},e.isResolvedFromDuration=!0}return e}function Df(t=zt.visualDuration,e=zt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:d,damping:f,mass:m,duration:p,velocity:v,isResolvedFromDuration:S}=Kj({...n,velocity:-tr(n.velocity||0)}),x=v||0,b=f/(2*Math.sqrt(d*m)),P=c-a,k=tr(Math.sqrt(d/m)),O=Math.abs(P)<5;i||(i=O?zt.restSpeed.granular:zt.restSpeed.default),r||(r=O?zt.restDelta.granular:zt.restDelta.default);let N;if(b<1){const D=_v(k,b);N=B=>{const H=Math.exp(-b*k*B);return c-H*((x+b*k*P)/D*Math.sin(D*B)+P*Math.cos(D*B))}}else if(b===1)N=D=>c-Math.exp(-k*D)*(P+(x+k*P)*D);else{const D=k*Math.sqrt(b*b-1);N=B=>{const H=Math.exp(-b*k*B),z=Math.min(D*B,300);return c-H*((x+b*k*P)*Math.sinh(z)+D*P*Math.cosh(z))/D}}const I={calculatedDuration:S&&p||null,next:D=>{const B=N(D);if(S)l.done=D>=p;else{let H=D===0?x:0;b<1&&(H=D===0?er(x):UA(N,D,B));const z=Math.abs(H)<=i,X=Math.abs(c-B)<=r;l.done=z&&X}return l.value=l.done?c:B,l},toString:()=>{const D=Math.min(fy(I),_f),B=IA(H=>I.next(D*H).value,D,30);return D+"ms "+B},toTransition:()=>{}};return I}Df.applyToOptions=t=>{const e=jj(t,100,Df);return t.ease=e.ease,t.duration=er(e.duration),t.type="keyframes",t};function Dv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:c,min:l,max:d,restDelta:f=.5,restSpeed:m}){const p=t[0],v={done:!1,value:p},S=z=>l!==void 0&&z<l||d!==void 0&&z>d,x=z=>l===void 0?d:d===void 0||Math.abs(l-z)<Math.abs(d-z)?l:d;let b=n*e;const P=p+b,k=c===void 0?P:c(P);k!==P&&(b=k-p);const O=z=>-b*Math.exp(-z/i),N=z=>k+O(z),I=z=>{const X=O(z),ae=N(z);v.done=Math.abs(X)<=f,v.value=v.done?k:ae};let D,B;const H=z=>{S(v.value)&&(D=z,B=Df({keyframes:[v.value,x(v.value)],velocity:UA(N,z,v.value),damping:r,stiffness:a,restDelta:f,restSpeed:m}))};return H(0),{calculatedDuration:null,next:z=>{let X=!1;return!B&&D===void 0&&(X=!0,I(z),H(z)),D!==void 0&&z>=D?B.next(z-D):(!X&&I(z),v)}}}function Gj(t,e,n){const i=[],r=n||zr.mix||NA,a=t.length-1;for(let c=0;c<a;c++){let l=r(t[c],t[c+1]);if(e){const d=Array.isArray(e)?e[c]||wi:e;l=ou(d,l)}i.push(l)}return i}function Yj(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const a=t.length;if(ny(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Gj(e,i,r),d=l.length,f=m=>{if(c&&m<t[0])return e[0];let p=0;if(d>1)for(;p<t.length-2&&!(m<t[p+1]);p++);const v=Kl(t[p],t[p+1],m);return l[p](v)};return n?m=>f(Vr(t[0],t[a-1],m)):f}function Wj(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Kl(0,e,i);t.push(jt(n,1,r))}}function $j(t){const e=[0];return Wj(e,t.length-1),e}function Xj(t,e){return t.map(n=>n*e)}function Zj(t,e){return t.map(()=>e||CA).splice(0,t.length-1)}function Ul({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=cj(i)?i.map(Nw):Nw(i),a={done:!1,value:e[0]},c=Xj(n&&n.length===e.length?n:$j(e),t),l=Yj(c,e,{ease:Array.isArray(r)?r:Zj(e,r)});return{calculatedDuration:t,next:d=>(a.value=l(d),a.done=d>=t,a)}}const Jj=t=>t!==null;function hy(t,{repeat:e,repeatType:n="loop"},i,r=1){const a=t.filter(Jj),l=r<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||i===void 0?a[l]:i}const Qj={decay:Dv,inertia:Dv,tween:Ul,keyframes:Ul,spring:Df};function LA(t){typeof t.type=="string"&&(t.type=Qj[t.type])}class my{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const eB=t=>t/100;class py extends my{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Gn.now()&&this.tick(Gn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;LA(e);const{type:n=Ul,repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:c=0}=e;let{keyframes:l}=e;const d=n||Ul;d!==Ul&&typeof l[0]!="number"&&(this.mixKeyframes=ou(eB,NA(l[0],l[1])),l=[0,100]);const f=d({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...l].reverse(),velocity:-c})),f.calculatedDuration===null&&(f.calculatedDuration=fy(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:l,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:m,repeat:p,repeatType:v,repeatDelay:S,type:x,onUpdate:b,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const k=this.currentTime-f*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?k<0:k>r;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let N=this.currentTime,I=i;if(p){const z=Math.min(this.currentTime,r)/l;let X=Math.floor(z),ae=z%1;!ae&&z>=1&&(ae=1),ae===1&&X--,X=Math.min(X,p+1),!!(X%2)&&(v==="reverse"?(ae=1-ae,S&&(ae-=S/l)):v==="mirror"&&(I=c)),N=Vr(0,1,ae)*l}const D=O?{done:!1,value:m[0]}:I.next(N);a&&(D.value=a(D.value));let{done:B}=D;!O&&d!==null&&(B=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&B);return H&&x!==Dv&&(D.value=hy(m,this.options,P,this.speed)),b&&b(D.value),H&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return tr(this.calculatedDuration)}get time(){return tr(this.currentTime)}set time(e){e=er(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Gn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=tr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Lj,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function tB(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const ha=t=>t*180/Math.PI,Mv=t=>{const e=ha(Math.atan2(t[1],t[0]));return Ov(e)},nB={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Mv,rotateZ:Mv,skewX:t=>ha(Math.atan(t[1])),skewY:t=>ha(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Ov=t=>(t=t%360,t<0&&(t+=360),t),Fw=Mv,Vw=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),zw=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),iB={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Vw,scaleY:zw,scale:t=>(Vw(t)+zw(t))/2,rotateX:t=>Ov(ha(Math.atan2(t[6],t[5]))),rotateY:t=>Ov(ha(Math.atan2(-t[2],t[0]))),rotateZ:Fw,rotate:Fw,skewX:t=>ha(Math.atan(t[4])),skewY:t=>ha(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Nv(t){return t.includes("scale")?1:0}function Iv(t,e){if(!t||t==="none")return Nv(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=iB,r=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=nB,r=l}if(!r)return Nv(e);const a=i[e],c=r[1].split(",").map(sB);return typeof a=="function"?a(c):c[a]}const rB=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Iv(n,e)};function sB(t){return parseFloat(t.trim())}const rc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sc=new Set(rc),Hw=t=>t===ic||t===He,aB=new Set(["x","y","z"]),oB=rc.filter(t=>!aB.has(t));function cB(t){const e=[];return oB.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const pa={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Iv(e,"x"),y:(t,{transform:e})=>Iv(e,"y")};pa.translateX=pa.x;pa.translateY=pa.y;const ga=new Set;let Uv=!1,Lv=!1,jv=!1;function jA(){if(Lv){const t=Array.from(ga).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=cB(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([a,c])=>{i.getValue(a)?.set(c)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Lv=!1,Uv=!1,ga.forEach(t=>t.complete(jv)),ga.clear()}function BA(){ga.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Lv=!0)})}function lB(){jv=!0,BA(),jA(),jv=!1}class gy{constructor(e,n,i,r,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(ga.add(this),Uv||(Uv=!0,Ot.read(BA),Ot.resolveKeyframes(jA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const a=r?.get(),c=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const l=i.readValue(n,c);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=c),r&&a===void 0&&r.set(e[0])}tB(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ga.delete(this)}cancel(){this.state==="scheduled"&&(ga.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const uB=t=>t.startsWith("--");function dB(t,e,n){uB(e)?t.style.setProperty(e,n):t.style[e]=n}const fB=iy(()=>window.ScrollTimeline!==void 0),hB={};function mB(t,e){const n=iy(t);return()=>hB[e]??n()}const FA=mB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Pl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,qw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pl([0,.65,.55,1]),circOut:Pl([.55,0,1,.45]),backIn:Pl([.31,.01,.66,-.59]),backOut:Pl([.33,1.53,.69,.99])};function VA(t,e){if(t)return typeof t=="function"?FA()?IA(t,e):"ease-out":EA(t)?Pl(t):Array.isArray(t)?t.map(n=>VA(n,e)||qw.easeOut):qw[t]}function pB(t,e,n,{delay:i=0,duration:r=300,repeat:a=0,repeatType:c="loop",ease:l="easeOut",times:d}={},f=void 0){const m={[e]:n};d&&(m.offset=d);const p=VA(l,r);Array.isArray(p)&&(m.easing=p);const v={delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),t.animate(m,v)}function zA(t){return typeof t=="function"&&"applyToOptions"in t}function gB({type:t,...e}){return zA(t)&&FA()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class vB extends my{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:l,onComplete:d}=e;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=e,ny(typeof e.type!="string");const f=gB(e);this.animation=pB(n,i,r,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const m=hy(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(m):dB(n,i,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return tr(Number(e))}get time(){return tr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=er(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&fB()?(this.animation.timeline=e,wi):n(this)}}const HA={anticipate:TA,backInOut:SA,circInOut:wA};function yB(t){return t in HA}function bB(t){typeof t.ease=="string"&&yB(t.ease)&&(t.ease=HA[t.ease])}const Kw=10;class SB extends vB{constructor(e){bB(e),LA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:a,...c}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new py({...c,autoplay:!1}),d=er(this.finishedTime??this.time);n.setWithVelocity(l.sample(d-Kw).value,l.sample(d).value,Kw),l.stop()}}const Gw=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ms.test(t)||t==="0")&&!t.startsWith("url("));function TB(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function xB(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],c=Gw(r,e),l=Gw(a,e);return!c||!l?!1:TB(t)||(n==="spring"||zA(n))&&i}function Bv(t){t.duration=0,t.type}const wB=new Set(["opacity","clipPath","filter","transform"]),CB=iy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function EB(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:a,type:c}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=e.owner.getProps();return CB()&&n&&wB.has(n)&&(n!=="transform"||!f)&&!d&&!i&&r!=="mirror"&&a!==0&&c!=="inertia"}const kB=40;class RB extends my{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:c="loop",keyframes:l,name:d,motionValue:f,element:m,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Gn.now();const v={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:a,repeatType:c,name:d,motionValue:f,element:m,...p},S=m?.KeyframeResolver||gy;this.keyframeResolver=new S(l,(x,b,P)=>this.onKeyframesResolved(x,b,v,!P),d,f,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:a,type:c,velocity:l,delay:d,isHandoff:f,onUpdate:m}=i;this.resolvedAt=Gn.now(),xB(e,a,c,l)||((zr.instantAnimations||!d)&&m?.(hy(e,i,n)),e[0]=e[e.length-1],Bv(i),i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>kB?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},S=!f&&EB(v)?new SB({...v,element:v.motionValue.owner.current}):new py(v);S.finished.then(()=>this.notifyFinished()).catch(wi),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),lB()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const AB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PB(t){const e=AB.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function qA(t,e,n=1){const[i,r]=PB(t);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const c=a.trim();return fA(c)?parseFloat(c):c}return cy(r)?qA(r,e,n+1):r}function vy(t,e){return t?.[e]??t?.default??t}const KA=new Set(["width","height","top","left","right","bottom",...rc]),_B={test:t=>t==="auto",parse:t=>t},GA=t=>e=>e.test(t),YA=[ic,He,nr,xs,Tj,Sj,_B],Yw=t=>YA.find(GA(t));function DB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||mA(t):!0}const MB=new Set(["brightness","contrast","saturate","opacity"]);function OB(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(ly)||[];if(!i)return t;const r=n.replace(i,"");let a=MB.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+r+")"}const NB=/\b([a-z-]*)\(.*?\)/gu,Fv={...Ms,getAnimatableNone:t=>{const e=t.match(NB);return e?e.map(OB).join(" "):t}},Ww={...ic,transform:Math.round},IB={rotate:xs,rotateX:xs,rotateY:xs,rotateZ:xs,scale:Md,scaleX:Md,scaleY:Md,scaleZ:Md,skew:xs,skewX:xs,skewY:xs,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:Gl,originX:Iw,originY:Iw,originZ:He},yy={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,backgroundPositionX:He,backgroundPositionY:He,...IB,zIndex:Ww,fillOpacity:Gl,strokeOpacity:Gl,numOctaves:Ww},UB={...yy,color:sn,backgroundColor:sn,outlineColor:sn,fill:sn,stroke:sn,borderColor:sn,borderTopColor:sn,borderRightColor:sn,borderBottomColor:sn,borderLeftColor:sn,filter:Fv,WebkitFilter:Fv},WA=t=>UB[t];function $A(t,e){let n=WA(t);return n!==Fv&&(n=Ms),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const LB=new Set(["auto","none","0"]);function jB(t,e,n){let i=0,r;for(;i<t.length&&!r;){const a=t[i];typeof a=="string"&&!LB.has(a)&&Yl(a).values.length&&(r=t[i]),i++}if(r&&n)for(const a of e)t[a]=$A(n,r)}class BB extends gy{constructor(e,n,i,r,a){super(e,n,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="string"&&(f=f.trim(),cy(f))){const m=qA(f,n.current);m!==void 0&&(e[d]=m),d===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!KA.has(i)||e.length!==2)return;const[r,a]=e,c=Yw(r),l=Yw(a);if(c!==l)if(Hw(c)&&Hw(l))for(let d=0;d<e.length;d++){const f=e[d];typeof f=="string"&&(e[d]=parseFloat(f))}else pa[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||DB(e[r]))&&i.push(r);i.length&&jB(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=pa[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,c=i[a];i[a]=pa[n](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,d])=>{e.getValue(l).set(d)}),this.resolveNoneKeyframes()}}function FB(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=n?.[t]??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const XA=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function ZA(t){return hA(t)&&"offsetHeight"in t}const $w=30,VB=t=>!isNaN(parseFloat(t));class zB{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Gn.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=VB(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ry);const i=this.events[e].add(n);return e==="change"?()=>{i(),Ot.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Gn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>$w)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$w);return pA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yo(t,e){return new zB(t,e)}const{schedule:by}=kA(queueMicrotask,!1),Di={x:!1,y:!1};function JA(){return Di.x||Di.y}function HB(t){return t==="x"||t==="y"?Di[t]?null:(Di[t]=!0,()=>{Di[t]=!1}):Di.x||Di.y?null:(Di.x=Di.y=!0,()=>{Di.x=Di.y=!1})}function QA(t,e){const n=FB(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function Xw(t){return!(t.pointerType==="touch"||JA())}function qB(t,e,n={}){const[i,r,a]=QA(t,n),c=l=>{if(!Xw(l))return;const{target:d}=l,f=e(d,l);if(typeof f!="function"||!d)return;const m=p=>{Xw(p)&&(f(p),d.removeEventListener("pointerleave",m))};d.addEventListener("pointerleave",m,r)};return i.forEach(l=>{l.addEventListener("pointerenter",c,r)}),a}const eP=(t,e)=>e?t===e?!0:eP(t,e.parentElement):!1,Sy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,KB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function GB(t){return KB.has(t.tagName)||t.tabIndex!==-1}const uf=new WeakSet;function Zw(t){return e=>{e.key==="Enter"&&t(e)}}function sg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const YB=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=Zw(()=>{if(uf.has(n))return;sg(n,"down");const r=Zw(()=>{sg(n,"up")}),a=()=>sg(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function Jw(t){return Sy(t)&&!JA()}function WB(t,e,n={}){const[i,r,a]=QA(t,n),c=l=>{const d=l.currentTarget;if(!Jw(l))return;uf.add(d);const f=e(d,l),m=(S,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",v),uf.has(d)&&uf.delete(d),Jw(S)&&typeof f=="function"&&f(S,{success:x})},p=S=>{m(S,d===window||d===document||n.useGlobalTarget||eP(d,S.target))},v=S=>{m(S,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",v,r)};return i.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",c,r),ZA(l)&&(l.addEventListener("focus",f=>YB(f,r)),!GB(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function tP(t){return hA(t)&&"ownerSVGElement"in t}function $B(t){return tP(t)&&t.tagName==="svg"}const Dn=t=>!!(t&&t.getVelocity),XB=[...YA,sn,Ms],ZB=t=>XB.find(GA(t)),Ty=T.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class JB extends T.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=ZA(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function QB({children:t,isPresent:e,anchorX:n,root:i}){const r=T.useId(),a=T.useRef(null),c=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=T.useContext(Ty);return T.useInsertionEffect(()=>{const{width:d,height:f,top:m,left:p,right:v}=c.current;if(e||!a.current||!d||!f)return;const S=n==="left"?`left: ${p}`:`right: ${v}`;a.current.dataset.motionPopId=r;const x=document.createElement("style");l&&(x.nonce=l);const b=i??document.head;return b.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${f}px !important;
            ${S}px !important;
            top: ${m}px !important;
          }
        `),()=>{b.contains(x)&&b.removeChild(x)}},[e]),C.jsx(JB,{isPresent:e,childRef:a,sizeRef:c,children:T.cloneElement(t,{ref:a})})}const e2=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:c,anchorX:l,root:d})=>{const f=J0(t2),m=T.useId();let p=!0,v=T.useMemo(()=>(p=!1,{id:m,initial:e,isPresent:n,custom:r,onExitComplete:S=>{f.set(S,!0);for(const x of f.values())if(!x)return;i&&i()},register:S=>(f.set(S,!1),()=>f.delete(S))}),[n,f,i]);return a&&p&&(v={...v}),T.useMemo(()=>{f.forEach((S,x)=>f.set(x,!1))},[n]),T.useEffect(()=>{!n&&!f.size&&i&&i()},[n]),c==="popLayout"&&(t=C.jsx(QB,{isPresent:n,anchorX:l,root:d,children:t})),C.jsx(Zf.Provider,{value:v,children:t})};function t2(){return new Map}function nP(t=!0){const e=T.useContext(Zf);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,a=T.useId();T.useEffect(()=>{if(t)return r(a)},[t]);const c=T.useCallback(()=>t&&i&&i(a),[a,i,t]);return!n&&i?[!1,c]:[!0]}const Od=t=>t.key||"";function Qw(t){const e=[];return T.Children.forEach(t,n=>{T.isValidElement(n)&&e.push(n)}),e}const Vv=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:c=!1,anchorX:l="left",root:d})=>{const[f,m]=nP(c),p=T.useMemo(()=>Qw(t),[t]),v=c&&!f?[]:p.map(Od),S=T.useRef(!0),x=T.useRef(p),b=J0(()=>new Map),[P,k]=T.useState(p),[O,N]=T.useState(p);dA(()=>{S.current=!1,x.current=p;for(let B=0;B<O.length;B++){const H=Od(O[B]);v.includes(H)?b.delete(H):b.get(H)!==!0&&b.set(H,!1)}},[O,v.length,v.join("-")]);const I=[];if(p!==P){let B=[...p];for(let H=0;H<O.length;H++){const z=O[H],X=Od(z);v.includes(X)||(B.splice(H,0,z),I.push(z))}return a==="wait"&&I.length&&(B=I),N(Qw(B)),k(p),null}const{forceRender:D}=T.useContext(Z0);return C.jsx(C.Fragment,{children:O.map(B=>{const H=Od(B),z=c&&!f?!1:p===O||v.includes(H),X=()=>{if(b.has(H))b.set(H,!0);else return;let ae=!0;b.forEach(oe=>{oe||(ae=!1)}),ae&&(D?.(),N(x.current),c&&m?.(),i&&i())};return C.jsx(e2,{isPresent:z,initial:!S.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,root:d,onExitComplete:z?void 0:X,anchorX:l,children:B},H)})})},iP=T.createContext({strict:!1}),eC={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Wo={};for(const t in eC)Wo[t]={isEnabled:e=>eC[t].some(n=>!!e[n])};function n2(t){for(const e in t)Wo[e]={...Wo[e],...t[e]}}const i2=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mf(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||i2.has(t)}let rP=t=>!Mf(t);function r2(t){typeof t=="function"&&(rP=e=>e.startsWith("on")?!Mf(e):t(e))}try{r2(require("@emotion/is-prop-valid").default)}catch{}function s2(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(rP(r)||n===!0&&Mf(r)||!e&&!Mf(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const Jf=T.createContext({});function Qf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Wl(t){return typeof t=="string"||Array.isArray(t)}const xy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],wy=["initial",...xy];function eh(t){return Qf(t.animate)||wy.some(e=>Wl(t[e]))}function sP(t){return!!(eh(t)||t.variants)}function a2(t,e){if(eh(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Wl(n)?n:void 0,animate:Wl(i)?i:void 0}}return t.inherit!==!1?e:{}}function o2(t){const{initial:e,animate:n}=a2(t,T.useContext(Jf));return T.useMemo(()=>({initial:e,animate:n}),[tC(e),tC(n)])}function tC(t){return Array.isArray(t)?t.join(" "):t}const $l={};function c2(t){for(const e in t)$l[e]=t[e],oy(e)&&($l[e].isCSSVariable=!0)}function aP(t,{layout:e,layoutId:n}){return sc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!$l[t]||t==="opacity")}const l2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},u2=rc.length;function d2(t,e,n){let i="",r=!0;for(let a=0;a<u2;a++){const c=rc[a],l=t[c];if(l===void 0)continue;let d=!0;if(typeof l=="number"?d=l===(c.startsWith("scale")?1:0):d=parseFloat(l)===0,!d||n){const f=XA(l,yy[c]);if(!d){r=!1;const m=l2[c]||c;i+=`${m}(${f}) `}n&&(e[c]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Cy(t,e,n){const{style:i,vars:r,transformOrigin:a}=t;let c=!1,l=!1;for(const d in e){const f=e[d];if(sc.has(d)){c=!0;continue}else if(oy(d)){r[d]=f;continue}else{const m=XA(f,yy[d]);d.startsWith("origin")?(l=!0,a[d]=m):i[d]=m}}if(e.transform||(c||n?i.transform=d2(e,t.transform,n):i.transform&&(i.transform="none")),l){const{originX:d="50%",originY:f="50%",originZ:m=0}=a;i.transformOrigin=`${d} ${f} ${m}`}}const Ey=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oP(t,e,n){for(const i in e)!Dn(e[i])&&!aP(i,n)&&(t[i]=e[i])}function f2({transformTemplate:t},e){return T.useMemo(()=>{const n=Ey();return Cy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function h2(t,e){const n=t.style||{},i={};return oP(i,n,t),Object.assign(i,f2(t,e)),i}function m2(t,e){const n={},i=h2(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const p2={offset:"stroke-dashoffset",array:"stroke-dasharray"},g2={offset:"strokeDashoffset",array:"strokeDasharray"};function v2(t,e,n=1,i=0,r=!0){t.pathLength=1;const a=r?p2:g2;t[a.offset]=He.transform(-i);const c=He.transform(e),l=He.transform(n);t[a.array]=`${c} ${l}`}function cP(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:a=1,pathOffset:c=0,...l},d,f,m){if(Cy(t,l,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:v}=t;p.transform&&(v.transform=p.transform,delete p.transform),(v.transform||p.transformOrigin)&&(v.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),v.transform&&(v.transformBox=m?.transformBox??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),i!==void 0&&(p.scale=i),r!==void 0&&v2(p,r,a,c,!1)}const lP=()=>({...Ey(),attrs:{}}),uP=t=>typeof t=="string"&&t.toLowerCase()==="svg";function y2(t,e,n,i){const r=T.useMemo(()=>{const a=lP();return cP(a,e,uP(i),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};oP(a,t.style,t),r.style={...a,...r.style}}return r}const b2=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ky(t){return typeof t!="string"||t.includes("-")?!1:!!(b2.indexOf(t)>-1||/[A-Z]/u.test(t))}function S2(t,e,n,{latestValues:i},r,a=!1){const l=(ky(t)?y2:m2)(e,i,r,t),d=s2(e,typeof t=="string",a),f=t!==T.Fragment?{...d,...l,ref:n}:{},{children:m}=e,p=T.useMemo(()=>Dn(m)?m.get():m,[m]);return T.createElement(t,{...f,children:p})}function nC(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Ry(t,e,n,i){if(typeof e=="function"){const[r,a]=nC(i);e=e(n!==void 0?n:t.custom,r,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,a]=nC(i);e=e(n!==void 0?n:t.custom,r,a)}return e}function df(t){return Dn(t)?t.get():t}function T2({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:x2(n,i,r,t),renderState:e()}}function x2(t,e,n,i){const r={},a=i(t,{});for(const v in a)r[v]=df(a[v]);let{initial:c,animate:l}=t;const d=eh(t),f=sP(t);e&&f&&!d&&t.inherit!==!1&&(c===void 0&&(c=e.initial),l===void 0&&(l=e.animate));let m=n?n.initial===!1:!1;m=m||c===!1;const p=m?l:c;if(p&&typeof p!="boolean"&&!Qf(p)){const v=Array.isArray(p)?p:[p];for(let S=0;S<v.length;S++){const x=Ry(t,v[S]);if(x){const{transitionEnd:b,transition:P,...k}=x;for(const O in k){let N=k[O];if(Array.isArray(N)){const I=m?N.length-1:0;N=N[I]}N!==null&&(r[O]=N)}for(const O in b)r[O]=b[O]}}}return r}const dP=t=>(e,n)=>{const i=T.useContext(Jf),r=T.useContext(Zf),a=()=>T2(t,e,i,r);return n?a():J0(a)};function Ay(t,e,n){const{style:i}=t,r={};for(const a in i)(Dn(i[a])||e.style&&Dn(e.style[a])||aP(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(r[a]=i[a]);return r}const w2=dP({scrapeMotionValuesFromProps:Ay,createRenderState:Ey});function fP(t,e,n){const i=Ay(t,e,n);for(const r in t)if(Dn(t[r])||Dn(e[r])){const a=rc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=t[r]}return i}const C2=dP({scrapeMotionValuesFromProps:fP,createRenderState:lP}),E2=Symbol.for("motionComponentSymbol");function Do(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function k2(t,e,n){return T.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Do(n)&&(n.current=i))},[e])}const Py=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),R2="framerAppearId",hP="data-"+Py(R2),mP=T.createContext({});function A2(t,e,n,i,r){const{visualElement:a}=T.useContext(Jf),c=T.useContext(iP),l=T.useContext(Zf),d=T.useContext(Ty).reducedMotion,f=T.useRef(null);i=i||c.renderer,!f.current&&i&&(f.current=i(t,{visualState:e,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,p=T.useContext(mP);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&P2(f.current,n,r,p);const v=T.useRef(!1);T.useInsertionEffect(()=>{m&&v.current&&m.update(n,l)});const S=n[hP],x=T.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return dA(()=>{m&&(v.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),x.current&&m.animationState&&m.animationState.animateChanges())}),T.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),x.current=!1),m.enteringChildren=void 0)}),m}function P2(t,e,n,i){const{layoutId:r,layout:a,drag:c,dragConstraints:l,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:pP(t.parent)),t.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!c||l&&Do(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:m,layoutScroll:d,layoutRoot:f})}function pP(t){if(t)return t.options.allowProjection!==!1?t.projection:pP(t.parent)}function ag(t,{forwardMotionProps:e=!1}={},n,i){n&&n2(n);const r=ky(t)?C2:w2;function a(l,d){let f;const m={...T.useContext(Ty),...l,layoutId:_2(l)},{isStatic:p}=m,v=o2(l),S=r(l,p);if(!p&&Q0){D2();const x=M2(m);f=x.MeasureLayout,v.visualElement=A2(t,S,m,i,x.ProjectionNode)}return C.jsxs(Jf.Provider,{value:v,children:[f&&v.visualElement?C.jsx(f,{visualElement:v.visualElement,...m}):null,S2(t,l,k2(S,v.visualElement,d),S,p,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const c=T.forwardRef(a);return c[E2]=t,c}function _2({layoutId:t}){const e=T.useContext(Z0).id;return e&&t!==void 0?e+"-"+t:t}function D2(t,e){T.useContext(iP).strict}function M2(t){const{drag:e,layout:n}=Wo;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function O2(t,e){if(typeof Proxy>"u")return ag;const n=new Map,i=(a,c)=>ag(a,c,t,e),r=(a,c)=>i(a,c);return new Proxy(r,{get:(a,c)=>c==="create"?i:(n.has(c)||n.set(c,ag(c,void 0,t,e)),n.get(c))})}function gP({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function N2({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function I2(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function og(t){return t===void 0||t===1}function zv({scale:t,scaleX:e,scaleY:n}){return!og(t)||!og(e)||!og(n)}function ua(t){return zv(t)||vP(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vP(t){return iC(t.x)||iC(t.y)}function iC(t){return t&&t!=="0%"}function Of(t,e,n){const i=t-n,r=e*i;return n+r}function rC(t,e,n,i,r){return r!==void 0&&(t=Of(t,r,i)),Of(t,n,i)+e}function Hv(t,e=0,n=1,i,r){t.min=rC(t.min,e,n,i,r),t.max=rC(t.max,e,n,i,r)}function yP(t,{x:e,y:n}){Hv(t.x,e.translate,e.scale,e.originPoint),Hv(t.y,n.translate,n.scale,n.originPoint)}const sC=.999999999999,aC=1.0000000000001;function U2(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let a,c;for(let l=0;l<r;l++){a=n[l],c=a.projectionDelta;const{visualElement:d}=a.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Oo(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,yP(t,c)),i&&ua(a.latestValues)&&Oo(t,a.latestValues))}e.x<aC&&e.x>sC&&(e.x=1),e.y<aC&&e.y>sC&&(e.y=1)}function Mo(t,e){t.min=t.min+e,t.max=t.max+e}function oC(t,e,n,i,r=.5){const a=jt(t.min,t.max,r);Hv(t,e,n,a,i)}function Oo(t,e){oC(t.x,e.x,e.scaleX,e.scale,e.originX),oC(t.y,e.y,e.scaleY,e.scale,e.originY)}function bP(t,e){return gP(I2(t.getBoundingClientRect(),e))}function L2(t,e,n){const i=bP(t,n),{scroll:r}=e;return r&&(Mo(i.x,r.offset.x),Mo(i.y,r.offset.y)),i}const cC=()=>({translate:0,scale:1,origin:0,originPoint:0}),No=()=>({x:cC(),y:cC()}),lC=()=>({min:0,max:0}),Zt=()=>({x:lC(),y:lC()}),qv={current:null},SP={current:!1};function j2(){if(SP.current=!0,!!Q0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>qv.current=t.matches;t.addEventListener("change",e),e()}else qv.current=!1}const B2=new WeakMap;function F2(t,e,n){for(const i in e){const r=e[i],a=n[i];if(Dn(r))t.addValue(i,r);else if(Dn(a))t.addValue(i,Yo(r,{owner:t}));else if(a!==r)if(t.hasValue(i)){const c=t.getValue(i);c.liveStyle===!0?c.jump(r):c.hasAnimated||c.set(r)}else{const c=t.getStaticValue(i);t.addValue(i,Yo(c!==void 0?c:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const uC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class V2{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:c},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Gn.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Ot.render(this.render,!1,!0))};const{latestValues:d,renderState:f}=c;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=eh(n),this.isVariantNode=sP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in p){const S=p[v];d[v]!==void 0&&Dn(S)&&S.set(d[v])}}mount(e){this.current=e,B2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),SP.current||j2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:qv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ds(this.notifyUpdate),Ds(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=sc.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&Ot.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Wo){const n=Wo[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Zt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<uC.length;i++){const r=uC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,c=e[a];c&&(this.propEventSubscriptions[r]=this.on(r,c))}this.prevMotionValues=F2(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Yo(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(fA(i)||mA(i))?i=parseFloat(i):!ZB(i)&&Ms.test(n)&&(i=$A(e,n)),this.setBaseTarget(e,Dn(i)?i.get():i)),Dn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const a=Ry(this.props,n,this.presenceContext?.custom);a&&(i=a[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Dn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ry),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){by.render(this.render)}}class TP extends V2{constructor(){super(...arguments),this.KeyframeResolver=BB}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function xP(t,{style:e,vars:n},i,r){const a=t.style;let c;for(c in e)a[c]=e[c];r?.applyProjectionStyles(a,i);for(c in n)a.setProperty(c,n[c])}function z2(t){return window.getComputedStyle(t)}class H2 extends TP{constructor(){super(...arguments),this.type="html",this.renderInstance=xP}readValueFromInstance(e,n){if(sc.has(n))return this.projection?.isProjecting?Nv(n):rB(e,n);{const i=z2(e),r=(oy(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return bP(e,n)}build(e,n,i){Cy(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Ay(e,n,i)}}const wP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function q2(t,e,n,i){xP(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(wP.has(r)?r:Py(r),e.attrs[r])}class K2 extends TP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Zt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(sc.has(n)){const i=WA(n);return i&&i.default||0}return n=wP.has(n)?n:Py(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return fP(e,n,i)}build(e,n,i){cP(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){q2(e,n,i,r)}mount(e){this.isSVGTag=uP(e.tagName),super.mount(e)}}const G2=(t,e)=>ky(t)?new K2(e):new H2(e,{allowProjection:t!==T.Fragment});function Vo(t,e,n){const i=t.getProps();return Ry(i,e,n!==void 0?n:i.custom,t)}const Kv=t=>Array.isArray(t);function Y2(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Yo(n))}function W2(t){return Kv(t)?t[t.length-1]||0:t}function $2(t,e){const n=Vo(t,e);let{transitionEnd:i={},transition:r={},...a}=n||{};a={...a,...i};for(const c in a){const l=W2(a[c]);Y2(t,c,l)}}function X2(t){return!!(Dn(t)&&t.add)}function Gv(t,e){const n=t.getValue("willChange");if(X2(n))return n.add(e);if(!n&&zr.WillChange){const i=new zr.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function CP(t){return t.props[hP]}const Z2=t=>t!==null;function J2(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(Z2),a=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[a]}const Q2={type:"spring",stiffness:500,damping:25,restSpeed:10},eF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tF={type:"keyframes",duration:.8},nF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iF=(t,{keyframes:e})=>e.length>2?tF:sc.has(t)?t.startsWith("scale")?eF(e[1]):Q2:nF;function rF({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:c,repeatDelay:l,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const _y=(t,e,n,i={},r,a)=>c=>{const l=vy(i,t)||{},d=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-er(d);const m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{c(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:r};rF(l)||Object.assign(m,iF(t,m)),m.duration&&(m.duration=er(m.duration)),m.repeatDelay&&(m.repeatDelay=er(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let p=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(Bv(m),m.delay===0&&(p=!0)),(zr.instantAnimations||zr.skipAnimations)&&(p=!0,Bv(m),m.delay=0),m.allowFlatten=!l.type&&!l.ease,p&&!a&&e.get()!==void 0){const v=J2(m.keyframes,l);if(v!==void 0){Ot.update(()=>{m.onUpdate(v),m.onComplete()});return}}return l.isSync?new py(m):new RB(m)};function sF({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function EP(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:c,...l}=e;i&&(a=i);const d=[],f=r&&t.animationState&&t.animationState.getState()[r];for(const m in l){const p=t.getValue(m,t.latestValues[m]??null),v=l[m];if(v===void 0||f&&sF(f,m))continue;const S={delay:n,...vy(a||{},m)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(v)&&v===x&&!S.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const k=CP(t);if(k){const O=window.MotionHandoffAnimation(k,m,Ot);O!==null&&(S.startTime=O,b=!0)}}Gv(t,m),p.start(_y(m,p,v,t.shouldReduceMotion&&KA.has(m)?{type:!1}:S,t,b));const P=p.animation;P&&d.push(P)}return c&&Promise.all(d).then(()=>{Ot.update(()=>{c&&$2(t,c)})}),d}function kP(t,e,n,i=0,r=1){const a=Array.from(t).sort((f,m)=>f.sortNodePosition(m)).indexOf(e),c=t.size,l=(c-1)*i;return typeof n=="function"?n(a,c):r===1?a*i:l-a*i}function Yv(t,e,n={}){const i=Vo(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const a=i?()=>Promise.all(EP(t,i,n)):()=>Promise.resolve(),c=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:p}=r;return aF(t,e,d,f,m,p,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[d,f]=l==="beforeChildren"?[a,c]:[c,a];return d().then(()=>f())}else return Promise.all([a(),c(n.delay)])}function aF(t,e,n=0,i=0,r=0,a=1,c){const l=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),l.push(Yv(d,e,{...c,delay:n+(typeof i=="function"?0:i)+kP(t.variantChildren,d,i,r,a)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(l)}function oF(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>Yv(t,a,n));i=Promise.all(r)}else if(typeof e=="string")i=Yv(t,e,n);else{const r=typeof e=="function"?Vo(t,e,n.custom):e;i=Promise.all(EP(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function RP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const cF=wy.length;function AP(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?AP(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<cF;n++){const i=wy[n],r=t.props[i];(Wl(r)||r===!1)&&(e[i]=r)}return e}const lF=[...xy].reverse(),uF=xy.length;function dF(t){return e=>Promise.all(e.map(({animation:n,options:i})=>oF(t,n,i)))}function fF(t){let e=dF(t),n=dC(),i=!0;const r=d=>(f,m)=>{const p=Vo(t,m,d==="exit"?t.presenceContext?.custom:void 0);if(p){const{transition:v,transitionEnd:S,...x}=p;f={...f,...x,...S}}return f};function a(d){e=d(t)}function c(d){const{props:f}=t,m=AP(t.parent)||{},p=[],v=new Set;let S={},x=1/0;for(let P=0;P<uF;P++){const k=lF[P],O=n[k],N=f[k]!==void 0?f[k]:m[k],I=Wl(N),D=k===d?O.isActive:null;D===!1&&(x=P);let B=N===m[k]&&N!==f[k]&&I;if(B&&i&&t.manuallyAnimateOnMount&&(B=!1),O.protectedKeys={...S},!O.isActive&&D===null||!N&&!O.prevProp||Qf(N)||typeof N=="boolean")continue;const H=hF(O.prevProp,N);let z=H||k===d&&O.isActive&&!B&&I||P>x&&I,X=!1;const ae=Array.isArray(N)?N:[N];let oe=ae.reduce(r(k),{});D===!1&&(oe={});const{prevResolvedValues:fe={}}=O,ke={...fe,...oe},Ae=ie=>{z=!0,v.has(ie)&&(X=!0,v.delete(ie)),O.needsAnimating[ie]=!0;const J=t.getValue(ie);J&&(J.liveStyle=!1)};for(const ie in ke){const J=oe[ie],Pe=fe[ie];if(S.hasOwnProperty(ie))continue;let V=!1;Kv(J)&&Kv(Pe)?V=!RP(J,Pe):V=J!==Pe,V?J!=null?Ae(ie):v.add(ie):J!==void 0&&v.has(ie)?Ae(ie):O.protectedKeys[ie]=!0}O.prevProp=N,O.prevResolvedValues=oe,O.isActive&&(S={...S,...oe}),i&&t.blockInitialAnimation&&(z=!1);const Oe=B&&H;z&&(!Oe||X)&&p.push(...ae.map(ie=>{const J={type:k};if(typeof ie=="string"&&i&&!Oe&&t.manuallyAnimateOnMount&&t.parent){const{parent:Pe}=t,V=Vo(Pe,ie);if(Pe.enteringChildren&&V){const{delayChildren:Q}=V.transition||{};J.delay=kP(Pe.enteringChildren,t,Q)}}return{animation:ie,options:J}}))}if(v.size){const P={};if(typeof f.initial!="boolean"){const k=Vo(t,Array.isArray(f.initial)?f.initial[0]:f.initial);k&&k.transition&&(P.transition=k.transition)}v.forEach(k=>{const O=t.getBaseTarget(k),N=t.getValue(k);N&&(N.liveStyle=!0),P[k]=O??null}),p.push({animation:P})}let b=!!p.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(b=!1),i=!1,b?e(p):Promise.resolve()}function l(d,f){if(n[d].isActive===f)return Promise.resolve();t.variantChildren?.forEach(p=>p.animationState?.setActive(d,f)),n[d].isActive=f;const m=c(d);for(const p in n)n[p].protectedKeys={};return m}return{animateChanges:c,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=dC(),i=!0}}}function hF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!RP(e,t):!1}function oa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dC(){return{animate:oa(!0),whileInView:oa(),whileHover:oa(),whileTap:oa(),whileDrag:oa(),whileFocus:oa(),exit:oa()}}class js{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mF extends js{constructor(e){super(e),e.animationState||(e.animationState=fF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Qf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let pF=0;class gF extends js{constructor(){super(...arguments),this.id=pF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const vF={animation:{Feature:mF},exit:{Feature:gF}};function Xl(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function uu(t){return{point:{x:t.pageX,y:t.pageY}}}const yF=t=>e=>Sy(e)&&t(e,uu(e));function Ll(t,e,n,i){return Xl(t,e,yF(n),i)}const PP=1e-4,bF=1-PP,SF=1+PP,_P=.01,TF=0-_P,xF=0+_P;function Un(t){return t.max-t.min}function wF(t,e,n){return Math.abs(t-e)<=n}function fC(t,e,n,i=.5){t.origin=i,t.originPoint=jt(e.min,e.max,t.origin),t.scale=Un(n)/Un(e),t.translate=jt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=bF&&t.scale<=SF||isNaN(t.scale))&&(t.scale=1),(t.translate>=TF&&t.translate<=xF||isNaN(t.translate))&&(t.translate=0)}function jl(t,e,n,i){fC(t.x,e.x,n.x,i?i.originX:void 0),fC(t.y,e.y,n.y,i?i.originY:void 0)}function hC(t,e,n){t.min=n.min+e.min,t.max=t.min+Un(e)}function CF(t,e,n){hC(t.x,e.x,n.x),hC(t.y,e.y,n.y)}function mC(t,e,n){t.min=e.min-n.min,t.max=t.min+Un(e)}function Bl(t,e,n){mC(t.x,e.x,n.x),mC(t.y,e.y,n.y)}function Si(t){return[t("x"),t("y")]}const DP=({current:t})=>t?t.ownerDocument.defaultView:null,pC=(t,e)=>Math.abs(t-e);function EF(t,e){const n=pC(t.x,e.x),i=pC(t.y,e.y);return Math.sqrt(n**2+i**2)}class MP{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=lg(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,x=EF(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!x)return;const{point:b}=v,{timestamp:P}=kn;this.history.push({...b,timestamp:P});const{onStart:k,onMove:O}=this.handlers;S||(k&&k(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,v)},this.handlePointerMove=(v,S)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=cg(S,this.transformPagePoint),Ot.update(this.updatePoint,!0)},this.handlePointerUp=(v,S)=>{this.end();const{onEnd:x,onSessionEnd:b,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=lg(v.type==="pointercancel"?this.lastMoveEventInfo:cg(S,this.transformPagePoint),this.history);this.startEvent&&x&&x(v,k),b&&b(v,k)},!Sy(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=r||window;const l=uu(e),d=cg(l,this.transformPagePoint),{point:f}=d,{timestamp:m}=kn;this.history=[{...f,timestamp:m}];const{onSessionStart:p}=n;p&&p(e,lg(d,this.history)),this.removeListeners=ou(Ll(this.contextWindow,"pointermove",this.handlePointerMove),Ll(this.contextWindow,"pointerup",this.handlePointerUp),Ll(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ds(this.updatePoint)}}function cg(t,e){return e?{point:e(t.point)}:t}function gC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function lg({point:t},e){return{point:t,delta:gC(t,OP(e)),offset:gC(t,kF(e)),velocity:RF(e,.1)}}function kF(t){return t[0]}function OP(t){return t[t.length-1]}function RF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=OP(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>er(e)));)n--;if(!i)return{x:0,y:0};const a=tr(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const c={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function AF(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?jt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?jt(n,t,i.max):Math.min(t,n)),t}function vC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function PF(t,{top:e,left:n,bottom:i,right:r}){return{x:vC(t.x,n,r),y:vC(t.y,e,i)}}function yC(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function _F(t,e){return{x:yC(t.x,e.x),y:yC(t.y,e.y)}}function DF(t,e){let n=.5;const i=Un(t),r=Un(e);return r>i?n=Kl(e.min,e.max-i,t.min):i>r&&(n=Kl(t.min,t.max-r,e.min)),Vr(0,1,n)}function MF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Wv=.35;function OF(t=Wv){return t===!1?t=0:t===!0&&(t=Wv),{x:bC(t,"left","right"),y:bC(t,"top","bottom")}}function bC(t,e,n){return{min:SC(t,e),max:SC(t,n)}}function SC(t,e){return typeof t=="number"?t:t[e]||0}const NF=new WeakMap;class IF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Zt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(uu(p).point)},c=(p,v)=>{const{drag:S,dragPropagation:x,onDragStart:b}=this.getProps();if(S&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=HB(S),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Si(k=>{let O=this.getAxisMotionValue(k).get()||0;if(nr.test(O)){const{projection:N}=this.visualElement;if(N&&N.layout){const I=N.layout.layoutBox[k];I&&(O=Un(I)*(parseFloat(O)/100))}}this.originPoint[k]=O}),b&&Ot.postRender(()=>b(p,v)),Gv(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v;const{dragPropagation:S,dragDirectionLock:x,onDirectionLock:b,onDrag:P}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:k}=v;if(x&&this.currentDirection===null){this.currentDirection=UF(k),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",v.point,k),this.updateAxis("y",v.point,k),this.visualElement.render(),P&&P(p,v)},d=(p,v)=>{this.latestPointerEvent=p,this.latestPanInfo=v,this.stop(p,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Si(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:m}=this.getProps();this.panSession=new MP(e,{onSessionStart:a,onStart:c,onMove:l,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:i,contextWindow:DP(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!i)return;const{velocity:c}=r;this.startAnimation(c);const{onDragEnd:l}=this.getProps();l&&Ot.postRender(()=>l(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Nd(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let c=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(c=AF(c,this.constraints[e],this.elastic[e])),a.set(c)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Do(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=PF(i.layoutBox,e):this.constraints=!1,this.elastic=OF(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Si(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=MF(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Do(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=L2(i,r.root,this.visualElement.getTransformPagePoint());let c=_F(r.layout.layoutBox,a);if(n){const l=n(N2(c));this.hasMutatedConstraints=!!l,l&&(c=gP(l))}return c}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},f=Si(m=>{if(!Nd(m,n,this.currentDirection))return;let p=d&&d[m]||{};c&&(p={min:0,max:0});const v=r?200:1e6,S=r?40:1e7,x={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(m,x)});return Promise.all(f).then(l)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Gv(this.visualElement,e),i.start(_y(e,i,0,n,this.visualElement,!1))}stopAnimation(){Si(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Si(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Si(n=>{const{drag:i}=this.getProps();if(!Nd(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(n);if(r&&r.layout){const{min:c,max:l}=r.layout.layoutBox[n];a.set(e[n]-jt(c,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Do(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Si(c=>{const l=this.getAxisMotionValue(c);if(l&&this.constraints!==!1){const d=l.get();r[c]=DF({min:d,max:d},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Si(c=>{if(!Nd(c,e,null))return;const l=this.getAxisMotionValue(c),{min:d,max:f}=this.constraints[c];l.set(jt(d,f,r[c]))})}addListeners(){if(!this.visualElement.current)return;NF.set(this.visualElement,this);const e=this.visualElement.current,n=Ll(e,"pointerdown",d=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();Do(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Ot.read(i);const c=Xl(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f})=>{this.isDragging&&f&&(Si(m=>{const p=this.getAxisMotionValue(m);p&&(this.originPoint[m]+=d[m].translate,p.set(p.get()+d[m].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:c=Wv,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:c,dragMomentum:l}}}function Nd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function UF(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class LF extends js{constructor(e){super(e),this.removeGroupControls=wi,this.removeListeners=wi,this.controls=new IF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wi}unmount(){this.removeGroupControls(),this.removeListeners()}}const TC=t=>(e,n)=>{t&&Ot.postRender(()=>t(e,n))};class jF extends js{constructor(){super(...arguments),this.removePointerDownListener=wi}onPointerDown(e){this.session=new MP(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DP(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:TC(e),onStart:TC(n),onMove:i,onEnd:(a,c)=>{delete this.session,r&&Ot.postRender(()=>r(a,c))}}}mount(){this.removePointerDownListener=Ll(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ff={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Cl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(He.test(t))t=parseFloat(t);else return t;const n=xC(t,e.target.x),i=xC(t,e.target.y);return`${n}% ${i}%`}},BF={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Ms.parse(t);if(r.length>5)return i;const a=Ms.createTransformer(t),c=typeof r[0]!="number"?1:0,l=n.x.scale*e.x,d=n.y.scale*e.y;r[0+c]/=l,r[1+c]/=d;const f=jt(l,d,.5);return typeof r[2+c]=="number"&&(r[2+c]/=f),typeof r[3+c]=="number"&&(r[3+c]/=f),a(r)}};let ug=!1;class FF extends T.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;c2(VF),a&&(n.group&&n.group.add(a),i&&i.register&&r&&i.register(a),ug&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),ff.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:a}=this.props,{projection:c}=i;return c&&(c.isPresent=a,ug=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==a?c.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?c.promote():c.relegate()||Ot.postRender(()=>{const l=c.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),by.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;ug=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function NP(t){const[e,n]=nP(),i=T.useContext(Z0);return C.jsx(FF,{...t,layoutGroup:i,switchLayoutGroup:T.useContext(mP),isPresent:e,safeToRemove:n})}const VF={borderRadius:{...Cl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cl,borderTopRightRadius:Cl,borderBottomLeftRadius:Cl,borderBottomRightRadius:Cl,boxShadow:BF};function zF(t,e,n){const i=Dn(t)?t:Yo(t);return i.start(_y("",i,e,n)),i.animation}const HF=(t,e)=>t.depth-e.depth;class qF{constructor(){this.children=[],this.isDirty=!1}add(e){ey(this.children,e),this.isDirty=!0}remove(e){ty(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(HF),this.isDirty=!1,this.children.forEach(e)}}function KF(t,e){const n=Gn.now(),i=({timestamp:r})=>{const a=r-n;a>=e&&(Ds(i),t(a-e))};return Ot.setup(i,!0),()=>Ds(i)}const IP=["TopLeft","TopRight","BottomLeft","BottomRight"],GF=IP.length,wC=t=>typeof t=="string"?parseFloat(t):t,CC=t=>typeof t=="number"||He.test(t);function YF(t,e,n,i,r,a){r?(t.opacity=jt(0,n.opacity??1,WF(i)),t.opacityExit=jt(e.opacity??1,0,$F(i))):a&&(t.opacity=jt(e.opacity??1,n.opacity??1,i));for(let c=0;c<GF;c++){const l=`border${IP[c]}Radius`;let d=EC(e,l),f=EC(n,l);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||CC(d)===CC(f)?(t[l]=Math.max(jt(wC(d),wC(f),i),0),(nr.test(f)||nr.test(d))&&(t[l]+="%")):t[l]=f}(e.rotate||n.rotate)&&(t.rotate=jt(e.rotate||0,n.rotate||0,i))}function EC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const WF=UP(0,.5,xA),$F=UP(.5,.95,wi);function UP(t,e,n){return i=>i<t?0:i>e?1:n(Kl(t,e,i))}function kC(t,e){t.min=e.min,t.max=e.max}function bi(t,e){kC(t.x,e.x),kC(t.y,e.y)}function RC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function AC(t,e,n,i,r){return t-=e,t=Of(t,1/n,i),r!==void 0&&(t=Of(t,1/r,i)),t}function XF(t,e=0,n=1,i=.5,r,a=t,c=t){if(nr.test(e)&&(e=parseFloat(e),e=jt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let l=jt(a.min,a.max,i);t===a&&(l-=e),t.min=AC(t.min,e,n,l,r),t.max=AC(t.max,e,n,l,r)}function PC(t,e,[n,i,r],a,c){XF(t,e[n],e[i],e[r],e.scale,a,c)}const ZF=["x","scaleX","originX"],JF=["y","scaleY","originY"];function _C(t,e,n,i){PC(t.x,e,ZF,n?n.x:void 0,i?i.x:void 0),PC(t.y,e,JF,n?n.y:void 0,i?i.y:void 0)}function DC(t){return t.translate===0&&t.scale===1}function LP(t){return DC(t.x)&&DC(t.y)}function MC(t,e){return t.min===e.min&&t.max===e.max}function QF(t,e){return MC(t.x,e.x)&&MC(t.y,e.y)}function OC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function jP(t,e){return OC(t.x,e.x)&&OC(t.y,e.y)}function NC(t){return Un(t.x)/Un(t.y)}function IC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class eV{constructor(){this.members=[]}add(e){ey(this.members,e),e.scheduleRender()}remove(e){if(ty(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function tV(t,e,n){let i="";const r=t.x.translate/e.x,a=t.y.translate/e.y,c=n?.z||0;if((r||a||c)&&(i=`translate3d(${r}px, ${a}px, ${c}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:p,rotateY:v,skewX:S,skewY:x}=n;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),p&&(i+=`rotateX(${p}deg) `),v&&(i+=`rotateY(${v}deg) `),S&&(i+=`skewX(${S}deg) `),x&&(i+=`skewY(${x}deg) `)}const l=t.x.scale*e.x,d=t.y.scale*e.y;return(l!==1||d!==1)&&(i+=`scale(${l}, ${d})`),i||"none"}const dg=["","X","Y","Z"],nV=1e3;let iV=0;function fg(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function BP(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=CP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ot,!(r||a))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&BP(i)}function FP({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(c={},l=e?.()){this.id=iV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(aV),this.nodes.forEach(uV),this.nodes.forEach(dV),this.nodes.forEach(oV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new qF)}addEventListener(c,l){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new ry),this.eventHandlers.get(c).add(l)}notifyListeners(c,...l){const d=this.eventHandlers.get(c);d&&d.notify(...l)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=tP(c)&&!$B(c),this.instance=c;const{layoutId:l,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||l)&&(this.isLayoutDirty=!0),t){let m,p=0;const v=()=>this.root.updateBlockedByResize=!1;Ot.read(()=>{p=window.innerWidth}),t(c,()=>{const S=window.innerWidth;S!==p&&(p=S,this.root.updateBlockedByResize=!0,m&&m(),m=KF(v,250),ff.hasAnimatedSinceResize&&(ff.hasAnimatedSinceResize=!1,this.nodes.forEach(jC)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p,hasRelativeLayoutChanged:v,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||f.getDefaultTransition()||gV,{onLayoutAnimationStart:b,onLayoutAnimationComplete:P}=f.getProps(),k=!this.targetLayout||!jP(this.targetLayout,S),O=!p&&v;if(this.options.layoutRoot||this.resumeFrom||O||p&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...vy(x,"layout"),onPlay:b,onComplete:P};(f.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(m,O)}else p||jC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ds(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fV),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const p=this.path[m];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UC);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(LC);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(lV),this.nodes.forEach(rV),this.nodes.forEach(sV)):this.nodes.forEach(LC),this.clearAllSnapshots();const l=Gn.now();kn.delta=Vr(0,1e3/60,l-kn.timestamp),kn.timestamp=l,kn.isProcessing=!0,eg.update.process(kn),eg.preRender.process(kn),eg.render.process(kn),kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,by.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(cV),this.sharedNodes.forEach(hV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Un(this.snapshot.measuredBox.x)&&!Un(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Zt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(l=!1),l&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!LP(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;c&&this.instance&&(l||ua(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return c&&(d=this.removeTransform(d)),vV(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:c}=this.options;if(!c)return Zt();const l=c.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(yV))){const{scroll:f}=this.root;f&&(Mo(l.x,f.offset.x),Mo(l.y,f.offset.y))}return l}removeElementScroll(c){const l=Zt();if(bi(l,c),this.scroll?.wasRoot)return l;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:p}=f;f!==this.root&&m&&p.layoutScroll&&(m.wasRoot&&bi(l,c),Mo(l.x,m.offset.x),Mo(l.y,m.offset.y))}return l}applyTransform(c,l=!1){const d=Zt();bi(d,c);for(let f=0;f<this.path.length;f++){const m=this.path[f];!l&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Oo(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),ua(m.latestValues)&&Oo(d,m.latestValues)}return ua(this.latestValues)&&Oo(d,this.latestValues),d}removeTransform(c){const l=Zt();bi(l,c);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!ua(f.latestValues))continue;zv(f.latestValues)&&f.updateSnapshot();const m=Zt(),p=f.measurePageBox();bi(m,p),_C(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return ua(this.latestValues)&&_C(l,this.latestValues),l}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==l;if(!(c||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:p}=this.options;if(!(!this.layout||!(m||p))){if(this.resolvedRelativeTargetAt=kn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Zt(),this.relativeTargetOrigin=Zt(),Bl(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Zt(),this.targetWithTransforms=Zt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bi(this.target,this.layout.layoutBox),yP(this.target,this.targetDelta)):bi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Zt(),this.relativeTargetOrigin=Zt(),Bl(this.relativeTargetOrigin,this.target,v.target),bi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zv(this.parent.latestValues)||vP(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const c=this.getLead(),l=!!this.resumingFrom||this!==c;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===kn.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;bi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,v=this.treeScale.y;U2(this.layoutCorrected,this.treeScale,this.path,l),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=Zt());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RC(this.prevProjectionDelta.x,this.projectionDelta.x),RC(this.prevProjectionDelta.y,this.projectionDelta.y)),jl(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==v||!IC(this.projectionDelta.x,this.prevProjectionDelta.x)||!IC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){if(this.options.visualElement?.scheduleRender(),c){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=No(),this.projectionDelta=No(),this.projectionDeltaWithTransform=No()}setAnimationOrigin(c,l=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},p=No();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=Zt(),S=d?d.source:void 0,x=this.layout?this.layout.source:void 0,b=S!==x,P=this.getStack(),k=!P||P.members.length<=1,O=!!(b&&!k&&this.options.crossfade===!0&&!this.path.some(pV));this.animationProgress=0;let N;this.mixTargetDelta=I=>{const D=I/1e3;BC(p.x,c.x,D),BC(p.y,c.y,D),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bl(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mV(this.relativeTarget,this.relativeTargetOrigin,v,D),N&&QF(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Zt()),bi(N,this.relativeTarget)),b&&(this.animationValues=m,YF(m,f,this.latestValues,D,O,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Ds(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ot.update(()=>{ff.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Yo(0)),this.currentAnimation=zF(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),c.onUpdate&&c.onUpdate(l)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:l,target:d,layout:f,latestValues:m}=c;if(!(!l||!d||!f)){if(this!==c&&this.layout&&f&&VP(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Zt();const p=Un(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+p;const v=Un(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+v}bi(l,d),Oo(l,m),jl(this.projectionDeltaWithTransform,this.layoutCorrected,l,m)}}registerSharedNode(c,l){this.sharedNodes.has(c)||this.sharedNodes.set(c,new eV),this.sharedNodes.get(c).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){const{layoutId:c}=this.options;return c?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:c}=this.options;return c?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:l,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let l=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(l=!0),!l)return;const f={};d.z&&fg("z",c,f,this.animationValues);for(let m=0;m<dg.length;m++)fg(`rotate${dg[m]}`,c,f,this.animationValues),fg(`skew${dg[m]}`,c,f,this.animationValues);c.render();for(const m in f)c.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);c.scheduleRender()}applyProjectionStyles(c,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=df(l?.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=df(l?.pointerEvents)||""),this.hasProjected&&!ua(this.latestValues)&&(c.transform=d?d({},""):"none",this.hasProjected=!1);return}c.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=tV(this.projectionDeltaWithTransform,this.treeScale,m);d&&(p=d(m,p)),c.transform=p;const{x:v,y:S}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${S.origin*100}% 0`,f.animationValues?c.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in $l){if(m[x]===void 0)continue;const{correct:b,applyTo:P,isCSSVariable:k}=$l[x],O=p==="none"?m[x]:b(m[x],f);if(P){const N=P.length;for(let I=0;I<N;I++)c[P[I]]=O}else k?this.options.visualElement.renderState.vars[x]=O:c[x]=O}this.options.layoutId&&(c.pointerEvents=f===this?df(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>c.currentAnimation?.stop()),this.root.nodes.forEach(UC),this.root.sharedNodes.clear()}}}function rV(t){t.updateLayout()}function sV(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,a=e.source!==t.layout.source;r==="size"?Si(m=>{const p=a?e.measuredBox[m]:e.layoutBox[m],v=Un(p);p.min=n[m].min,p.max=p.min+v}):VP(r,e.layoutBox,n)&&Si(m=>{const p=a?e.measuredBox[m]:e.layoutBox[m],v=Un(n[m]);p.max=p.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+v)});const c=No();jl(c,n,e.layoutBox);const l=No();a?jl(l,t.applyTransform(i,!0),e.measuredBox):jl(l,n,e.layoutBox);const d=!LP(c);let f=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:v}=m;if(p&&v){const S=Zt();Bl(S,e.layoutBox,p.layoutBox);const x=Zt();Bl(x,n,v.layoutBox),jP(S,x)||(f=!0),m.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=S,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function aV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function oV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function cV(t){t.clearSnapshot()}function UC(t){t.clearMeasurements()}function LC(t){t.isLayoutDirty=!1}function lV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function jC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function uV(t){t.resolveTargetDelta()}function dV(t){t.calcProjection()}function fV(t){t.resetSkewAndRotation()}function hV(t){t.removeLeadSnapshot()}function BC(t,e,n){t.translate=jt(e.translate,0,n),t.scale=jt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function FC(t,e,n,i){t.min=jt(e.min,n.min,i),t.max=jt(e.max,n.max,i)}function mV(t,e,n,i){FC(t.x,e.x,n.x,i),FC(t.y,e.y,n.y,i)}function pV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const gV={duration:.45,ease:[.4,0,.1,1]},VC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),zC=VC("applewebkit/")&&!VC("chrome/")?Math.round:wi;function HC(t){t.min=zC(t.min),t.max=zC(t.max)}function vV(t){HC(t.x),HC(t.y)}function VP(t,e,n){return t==="position"||t==="preserve-aspect"&&!wF(NC(e),NC(n),.2)}function yV(t){return t!==t.root&&t.scroll?.wasRoot}const bV=FP({attachResizeListener:(t,e)=>Xl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hg={current:void 0},zP=FP({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!hg.current){const t=new bV({});t.mount(window),t.setOptions({layoutScroll:!0}),hg.current=t}return hg.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),SV={pan:{Feature:jF},drag:{Feature:LF,ProjectionNode:zP,MeasureLayout:NP}};function qC(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,a=i[r];a&&Ot.postRender(()=>a(e,uu(e)))}class TV extends js{mount(){const{current:e}=this.node;e&&(this.unmount=qB(e,(n,i)=>(qC(this.node,i,"Start"),r=>qC(this.node,r,"End"))))}unmount(){}}class xV extends js{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ou(Xl(this.node.current,"focus",()=>this.onFocus()),Xl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function KC(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),a=i[r];a&&Ot.postRender(()=>a(e,uu(e)))}class wV extends js{mount(){const{current:e}=this.node;e&&(this.unmount=WB(e,(n,i)=>(KC(this.node,i,"Start"),(r,{success:a})=>KC(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $v=new WeakMap,mg=new WeakMap,CV=t=>{const e=$v.get(t.target);e&&e(t)},EV=t=>{t.forEach(CV)};function kV({root:t,...e}){const n=t||document;mg.has(n)||mg.set(n,{});const i=mg.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(EV,{root:t,...e})),i[r]}function RV(t,e,n){const i=kV(e);return $v.set(t,n),i.observe(t),()=>{$v.delete(t),i.unobserve(t)}}const AV={some:0,all:1};class PV extends js{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:a}=e,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:AV[r]},l=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:p}=this.node.getProps(),v=f?m:p;v&&v(d)};return RV(this.node.current,c,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(_V(e,n))&&this.startObserver()}unmount(){}}function _V({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const DV={inView:{Feature:PV},tap:{Feature:wV},focus:{Feature:xV},hover:{Feature:TV}},MV={layout:{ProjectionNode:zP,MeasureLayout:NP}},OV={...vF,...DV,...SV,...MV},xa=O2(OV,G2);var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function HP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Xv={exports:{}},NV=Xv.exports,GC;function IV(){return GC||(GC=1,function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(NV,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],a={},c=null;function l(b,P){var k=b[P];if(typeof k.bind=="function")return k.bind(b);try{return Function.prototype.bind.call(k,b)}catch{return function(){return Function.prototype.apply.apply(k,[b,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(b){return b==="debug"&&(b="log"),typeof console===n?!1:b==="trace"&&i?d:console[b]!==void 0?l(console,b):console.log!==void 0?l(console,"log"):e}function m(){for(var b=this.getLevel(),P=0;P<r.length;P++){var k=r[P];this[k]=P<b?e:this.methodFactory(k,b,this.name)}if(this.log=this.debug,typeof console===n&&b<this.levels.SILENT)return"No console available for logging"}function p(b){return function(){typeof console!==n&&(m.call(this),this[b].apply(this,arguments))}}function v(b,P,k){return f(b)||p.apply(this,arguments)}function S(b,P){var k=this,O,N,I,D="loglevel";typeof b=="string"?D+=":"+b:typeof b=="symbol"&&(D=void 0);function B(oe){var fe=(r[oe]||"silent").toUpperCase();if(!(typeof window===n||!D)){try{window.localStorage[D]=fe;return}catch{}try{window.document.cookie=encodeURIComponent(D)+"="+fe+";"}catch{}}}function H(){var oe;if(!(typeof window===n||!D)){try{oe=window.localStorage[D]}catch{}if(typeof oe===n)try{var fe=window.document.cookie,ke=encodeURIComponent(D),Ae=fe.indexOf(ke+"=");Ae!==-1&&(oe=/^([^;]+)/.exec(fe.slice(Ae+ke.length+1))[1])}catch{}return k.levels[oe]===void 0&&(oe=void 0),oe}}function z(){if(!(typeof window===n||!D)){try{window.localStorage.removeItem(D)}catch{}try{window.document.cookie=encodeURIComponent(D)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function X(oe){var fe=oe;if(typeof fe=="string"&&k.levels[fe.toUpperCase()]!==void 0&&(fe=k.levels[fe.toUpperCase()]),typeof fe=="number"&&fe>=0&&fe<=k.levels.SILENT)return fe;throw new TypeError("log.setLevel() called with invalid level: "+oe)}k.name=b,k.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},k.methodFactory=P||v,k.getLevel=function(){return I??N??O},k.setLevel=function(oe,fe){return I=X(oe),fe!==!1&&B(I),m.call(k)},k.setDefaultLevel=function(oe){N=X(oe),H()||k.setLevel(oe,!1)},k.resetLevel=function(){I=null,z(),m.call(k)},k.enableAll=function(oe){k.setLevel(k.levels.TRACE,oe)},k.disableAll=function(oe){k.setLevel(k.levels.SILENT,oe)},k.rebuild=function(){if(c!==k&&(O=X(c.getLevel())),m.call(k),c===k)for(var oe in a)a[oe].rebuild()},O=X(c?c.getLevel():"WARN");var ae=H();ae!=null&&(I=X(ae)),m.call(k)}c=new S,c.getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var P=a[b];return P||(P=a[b]=new S(b,c.methodFactory)),P};var x=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=x),c},c.getLoggers=function(){return a},c.default=c,c})}(Xv)),Xv.exports}var UV=IV();const LV=HP(UV);var Zv=function(t,e){return Zv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Zv(t,e)};function Yr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function jV(t,e,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function l(m){try{f(i.next(m))}catch(p){c(p)}}function d(m){try{f(i.throw(m))}catch(p){c(p)}}function f(m){m.done?a(m.value):r(m.value).then(l,d)}f((i=i.apply(t,[])).next())})}function qP(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=l(0),c.throw=l(1),c.return=l(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(m){return d([f,m])}}function d(f){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(n=0)),n;)try{if(i=1,r&&(a=f[0]&2?r.return:f[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,f[1])).done)return a;switch(r=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,r=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){n.label=f[1];break}if(f[0]===6&&n.label<a[1]){n.label=a[1],a=f;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(f);break}a[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(m){f=[6,m],r=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function $o(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zl(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,a=[],c;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(l){c={error:l}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return a}function Jl(t,e,n){if(arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}function zo(t){return this instanceof zo?(this.v=t,this):new zo(t)}function BV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(S){return function(x){return Promise.resolve(x).then(S,p)}}function l(S,x){i[S]&&(r[S]=function(b){return new Promise(function(P,k){a.push([S,b,P,k])>1||d(S,b)})},x&&(r[S]=x(r[S])))}function d(S,x){try{f(i[S](x))}catch(b){v(a[0][3],b)}}function f(S){S.value instanceof zo?Promise.resolve(S.value.v).then(m,p):v(a[0][2],S)}function m(S){d("next",S)}function p(S){d("throw",S)}function v(S,x){S(x),a.shift(),a.length&&d(a[0][0],a[0][1])}}function FV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof $o=="function"?$o(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(c){return new Promise(function(l,d){c=t[a](c),r(l,d,c.done,c.value)})}}function r(a,c,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},c)}}function cn(t){return typeof t=="function"}function Dy(t){var e=function(i){Error.call(i),i.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var pg=Dy(function(t){return function(e){t(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Nf(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var du=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,i,r,a;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var l=$o(c),d=l.next();!d.done;d=l.next()){var f=d.value;f.remove(this)}}catch(b){e={error:b}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}else c.remove(this);var m=this.initialTeardown;if(cn(m))try{m()}catch(b){a=b instanceof pg?b.errors:[b]}var p=this._finalizers;if(p){this._finalizers=null;try{for(var v=$o(p),S=v.next();!S.done;S=v.next()){var x=S.value;try{YC(x)}catch(b){a=a??[],b instanceof pg?a=Jl(Jl([],Zl(a)),Zl(b.errors)):a.push(b)}}}catch(b){i={error:b}}finally{try{S&&!S.done&&(r=v.return)&&r.call(v)}finally{if(i)throw i.error}}}if(a)throw new pg(a)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)YC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Nf(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Nf(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),KP=du.EMPTY;function GP(t){return t instanceof du||t&&"closed"in t&&cn(t.remove)&&cn(t.add)&&cn(t.unsubscribe)}function YC(t){cn(t)?t():t.unsubscribe()}var VV={Promise:void 0},zV={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,Jl([t,e],Zl(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function YP(t){zV.setTimeout(function(){throw t})}function Jv(){}function hf(t){t()}var My=function(t){Yr(e,t);function e(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,GP(n)&&n.add(i)):i.destination=KV,i}return e.create=function(n,i,r){return new Ql(n,i,r)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(du),HV=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(i){Ud(i)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(i){Ud(i)}else Ud(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Ud(n)}},t}(),Ql=function(t){Yr(e,t);function e(n,i,r){var a=t.call(this)||this,c;return cn(n)||!n?c={next:n??void 0,error:i??void 0,complete:r??void 0}:c=n,a.destination=new HV(c),a}return e}(My);function Ud(t){YP(t)}function qV(t){throw t}var KV={closed:!0,next:Jv,error:qV,complete:Jv},Oy=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Ny(t){return t}function GV(t){return t.length===0?Ny:t.length===1?t[0]:function(e){return t.reduce(function(n,i){return i(n)},e)}}var en=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,i){var r=this,a=WV(e)?e:new Ql(e,n,i);return hf(function(){var c=r,l=c.operator,d=c.source;a.add(l?l.call(a,d):d?r._subscribe(a):r._trySubscribe(a))}),a},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var i=this;return n=WC(n),new n(function(r,a){var c=new Ql({next:function(l){try{e(l)}catch(d){a(d),c.unsubscribe()}},error:a,complete:r});i.subscribe(c)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Oy]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return GV(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=WC(e),new e(function(i,r){var a;n.subscribe(function(c){return a=c},function(c){return r(c)},function(){return i(a)})})},t.create=function(e){return new t(e)},t}();function WC(t){var e;return(e=t??VV.Promise)!==null&&e!==void 0?e:Promise}function YV(t){return t&&cn(t.next)&&cn(t.error)&&cn(t.complete)}function WV(t){return t&&t instanceof My||YV(t)&&GP(t)}function $V(t){return cn(t?.lift)}function ur(t){return function(e){if($V(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Os(t,e,n,i,r){return new XV(t,e,n,i,r)}var XV=function(t){Yr(e,t);function e(n,i,r,a,c,l){var d=t.call(this,n)||this;return d.onFinalize=c,d.shouldUnsubscribe=l,d._next=i?function(f){try{i(f)}catch(m){n.error(m)}}:t.prototype._next,d._error=a?function(f){try{a(f)}catch(m){n.error(m)}finally{this.unsubscribe()}}:t.prototype._error,d._complete=r?function(){try{r()}catch(f){n.error(f)}finally{this.unsubscribe()}}:t.prototype._complete,d}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(My),ZV=Dy(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Hr=function(t){Yr(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var i=new $C(this,this);return i.operator=n,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new ZV},e.prototype.next=function(n){var i=this;hf(function(){var r,a;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var c=$o(i.currentObservers),l=c.next();!l.done;l=c.next()){var d=l.value;d.next(n)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(r)throw r.error}}}})},e.prototype.error=function(n){var i=this;hf(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var r=i.observers;r.length;)r.shift().error(n)}})},e.prototype.complete=function(){var n=this;hf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var i=this,r=this,a=r.hasError,c=r.isStopped,l=r.observers;return a||c?KP:(this.currentObservers=null,l.push(n),new du(function(){i.currentObservers=null,Nf(l,n)}))},e.prototype._checkFinalizedStatuses=function(n){var i=this,r=i.hasError,a=i.thrownError,c=i.isStopped;r?n.error(a):c&&n.complete()},e.prototype.asObservable=function(){var n=new en;return n.source=this,n},e.create=function(n,i){return new $C(n,i)},e}(en),$C=function(t){Yr(e,t);function e(n,i){var r=t.call(this)||this;return r.destination=n,r.source=i,r}return e.prototype.next=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.next)===null||r===void 0||r.call(i,n)},e.prototype.error=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.error)===null||r===void 0||r.call(i,n)},e.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},e.prototype._subscribe=function(n){var i,r;return(r=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&r!==void 0?r:KP},e}(Hr),WP=function(t){Yr(e,t);function e(n){var i=t.call(this)||this;return i._value=n,i}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var i=t.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},e.prototype.getValue=function(){var n=this,i=n.hasError,r=n.thrownError,a=n._value;if(i)throw r;return this._throwIfClosed(),a},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Hr),JV={now:function(){return Date.now()}},QV=function(t){Yr(e,t);function e(n,i){return t.call(this)||this}return e.prototype.schedule=function(n,i){return this},e}(du),XC={setInterval:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,Jl([t,e],Zl(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},e9=function(t){Yr(e,t);function e(n,i){var r=t.call(this,n,i)||this;return r.scheduler=n,r.work=i,r.pending=!1,r}return e.prototype.schedule=function(n,i){var r;if(i===void 0&&(i=0),this.closed)return this;this.state=n;var a=this.id,c=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(c,a,i)),this.pending=!0,this.delay=i,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(c,this.id,i),this},e.prototype.requestAsyncId=function(n,i,r){return r===void 0&&(r=0),XC.setInterval(n.flush.bind(n,this),r)},e.prototype.recycleAsyncId=function(n,i,r){if(r===void 0&&(r=0),r!=null&&this.delay===r&&this.pending===!1)return i;i!=null&&XC.clearInterval(i)},e.prototype.execute=function(n,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(n,i);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,i){var r=!1,a;try{this.work(n)}catch(c){r=!0,a=c||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),a},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,i=n.id,r=n.scheduler,a=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Nf(a,this),i!=null&&(this.id=this.recycleAsyncId(r,i,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(QV),ZC=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,i){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(i,n)},t.now=JV.now,t}(),t9=function(t){Yr(e,t);function e(n,i){i===void 0&&(i=ZC.now);var r=t.call(this,n,i)||this;return r.actions=[],r._active=!1,r}return e.prototype.flush=function(n){var i=this.actions;if(this._active){i.push(n);return}var r;this._active=!0;do if(r=n.execute(n.state,n.delay))break;while(n=i.shift());if(this._active=!1,r){for(;n=i.shift();)n.unsubscribe();throw r}},e}(ZC);new t9(e9);function n9(t){return t&&cn(t.schedule)}function i9(t){return t[t.length-1]}function $P(t){return n9(i9(t))?t.pop():void 0}var XP=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function ZP(t){return cn(t?.then)}function JP(t){return cn(t[Oy])}function QP(t){return Symbol.asyncIterator&&cn(t?.[Symbol.asyncIterator])}function e_(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function r9(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var t_=r9();function n_(t){return cn(t?.[t_])}function i_(t){return BV(this,arguments,function(){var e,n,i,r;return qP(this,function(a){switch(a.label){case 0:e=t.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,zo(e.read())];case 3:return n=a.sent(),i=n.value,r=n.done,r?[4,zo(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,zo(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function r_(t){return cn(t?.getReader)}function Bs(t){if(t instanceof en)return t;if(t!=null){if(JP(t))return s9(t);if(XP(t))return a9(t);if(ZP(t))return o9(t);if(QP(t))return s_(t);if(n_(t))return c9(t);if(r_(t))return l9(t)}throw e_(t)}function s9(t){return new en(function(e){var n=t[Oy]();if(cn(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function a9(t){return new en(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function o9(t){return new en(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,YP)})}function c9(t){return new en(function(e){var n,i;try{for(var r=$o(t),a=r.next();!a.done;a=r.next()){var c=a.value;if(e.next(c),e.closed)return}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}e.complete()})}function s_(t){return new en(function(e){u9(t,e).catch(function(n){return e.error(n)})})}function l9(t){return s_(i_(t))}function u9(t,e){var n,i,r,a;return jV(this,void 0,void 0,function(){var c,l;return qP(this,function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=FV(t),d.label=1;case 1:return[4,n.next()];case 2:if(i=d.sent(),!!i.done)return[3,4];if(c=i.value,e.next(c),e.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return l=d.sent(),r={error:l},[3,11];case 6:return d.trys.push([6,,9,10]),i&&!i.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function va(t,e,n,i,r){i===void 0&&(i=0),r===void 0&&(r=!1);var a=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(a),!r)return a}function a_(t,e){return e===void 0&&(e=0),ur(function(n,i){n.subscribe(Os(i,function(r){return va(i,t,function(){return i.next(r)},e)},function(){return va(i,t,function(){return i.complete()},e)},function(r){return va(i,t,function(){return i.error(r)},e)}))})}function o_(t,e){return e===void 0&&(e=0),ur(function(n,i){i.add(t.schedule(function(){return n.subscribe(i)},e))})}function d9(t,e){return Bs(t).pipe(o_(e),a_(e))}function f9(t,e){return Bs(t).pipe(o_(e),a_(e))}function h9(t,e){return new en(function(n){var i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function m9(t,e){return new en(function(n){var i;return va(n,e,function(){i=t[t_](),va(n,e,function(){var r,a,c;try{r=i.next(),a=r.value,c=r.done}catch(l){n.error(l);return}c?n.complete():n.next(a)},0,!0)}),function(){return cn(i?.return)&&i.return()}})}function c_(t,e){if(!t)throw new Error("Iterable cannot be null");return new en(function(n){va(n,e,function(){var i=t[Symbol.asyncIterator]();va(n,e,function(){i.next().then(function(r){r.done?n.complete():n.next(r.value)})},0,!0)})})}function p9(t,e){return c_(i_(t),e)}function g9(t,e){if(t!=null){if(JP(t))return d9(t,e);if(XP(t))return h9(t,e);if(ZP(t))return f9(t,e);if(QP(t))return c_(t,e);if(n_(t))return m9(t,e);if(r_(t))return p9(t,e)}throw e_(t)}function Iy(t,e){return e?g9(t,e):Bs(t)}Dy(function(t){return function(e){e===void 0&&(e=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=e}});function Mn(t,e){return ur(function(n,i){var r=0;n.subscribe(Os(i,function(a){i.next(t.call(e,a,r++))}))})}function v9(t,e,n,i,r,a,c,l){var d=[],f=0,m=0,p=!1,v=function(){p&&!d.length&&!f&&e.complete()},S=function(b){return f<i?x(b):d.push(b)},x=function(b){f++;var P=!1;Bs(n(b,m++)).subscribe(Os(e,function(k){e.next(k)},function(){P=!0},void 0,function(){if(P)try{f--;for(var k=function(){var O=d.shift();c||x(O)};d.length&&f<i;)k();v()}catch(O){e.error(O)}}))};return t.subscribe(Os(e,S,function(){p=!0,v()})),function(){}}function l_(t,e,n){return n===void 0&&(n=1/0),cn(e)?l_(function(i,r){return Mn(function(a,c){return e(i,a,r,c)})(Bs(t(i,r)))},n):(typeof e=="number"&&(n=e),ur(function(i,r){return v9(i,r,t,n)}))}function y9(t){return l_(Ny,t)}function b9(){return y9(1)}function Qv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return b9()(Iy(t,$P(t)))}function Uy(t,e){return ur(function(n,i){var r=0;n.subscribe(Os(i,function(a){return t.call(e,a,r++)&&i.next(a)}))})}function S9(t,e,n,i,r){return function(a,c){var l=n,d=e,f=0;a.subscribe(Os(c,function(m){var p=f++;d=l?t(d,m,p):(l=!0,m),c.next(d)},r))}}function e0(t,e){return ur(S9(t,e,arguments.length>=2,!0))}function T9(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new Hr}:e,i=t.resetOnError,r=i===void 0?!0:i,a=t.resetOnComplete,c=a===void 0?!0:a,l=t.resetOnRefCountZero,d=l===void 0?!0:l;return function(f){var m,p,v,S=0,x=!1,b=!1,P=function(){p?.unsubscribe(),p=void 0},k=function(){P(),m=v=void 0,x=b=!1},O=function(){var N=m;k(),N?.unsubscribe()};return ur(function(N,I){S++,!b&&!x&&P();var D=v=v??n();I.add(function(){S--,S===0&&!b&&!x&&(p=gg(O,d))}),D.subscribe(I),!m&&S>0&&(m=new Ql({next:function(B){return D.next(B)},error:function(B){b=!0,P(),p=gg(k,r,B),D.error(B)},complete:function(){x=!0,P(),p=gg(k,c),D.complete()}}),Bs(N).subscribe(m))})(f)}}function gg(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(e===!0){t();return}if(e!==!1){var r=new Ql({next:function(){r.unsubscribe(),t()}});return Bs(e.apply(void 0,Jl([],Zl(n)))).subscribe(r)}}function dr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=$P(t);return ur(function(i,r){(n?Qv(t,i,n):Qv(t,i)).subscribe(r)})}function JC(t){return ur(function(e,n){Bs(t).subscribe(Os(n,function(){return n.complete()},Jv)),!n.closed&&e.subscribe(n)})}function x9(t,e,n){var i=cn(t)||e||n?{next:t,error:e,complete:n}:t;return i?ur(function(r,a){var c;(c=i.subscribe)===null||c===void 0||c.call(i);var l=!0;r.subscribe(Os(a,function(d){var f;(f=i.next)===null||f===void 0||f.call(i,d),a.next(d)},function(){var d;l=!1,(d=i.complete)===null||d===void 0||d.call(i),a.complete()},function(d){var f;l=!1,(f=i.error)===null||f===void 0||f.call(i,d),a.error(d)},function(){var d,f;l&&((d=i.unsubscribe)===null||d===void 0||d.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Ny}var w9=Object.defineProperty,C9=Object.defineProperties,E9=Object.getOwnPropertyDescriptors,QC=Object.getOwnPropertySymbols,k9=Object.prototype.hasOwnProperty,R9=Object.prototype.propertyIsEnumerable,eE=(t,e,n)=>e in t?w9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zi=(t,e)=>{for(var n in e||(e={}))k9.call(e,n)&&eE(t,n,e[n]);if(QC)for(var n of QC(e))R9.call(e,n)&&eE(t,n,e[n]);return t},da=(t,e)=>C9(t,E9(e)),sr=(t,e,n)=>new Promise((i,r)=>{var a=d=>{try{l(n.next(d))}catch(f){r(f)}},c=d=>{try{l(n.throw(d))}catch(f){r(f)}},l=d=>d.done?i(d.value):Promise.resolve(d.value).then(a,c);l((n=n.apply(t,e)).next())}),u_="lk";function Ly(t){return typeof t>"u"?!1:A9(t)||P9(t)}function A9(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function P9(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function _9(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function d_(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(_9(t))return`${t.participant.identity}_${t.source}_placeholder`;if(Ly(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}var D9=[de.ConnectionStateChanged,de.RoomMetadataChanged,de.ActiveSpeakersChanged,de.ConnectionQualityChanged,de.ParticipantConnected,de.ParticipantDisconnected,de.ParticipantPermissionsChanged,de.ParticipantMetadataChanged,de.ParticipantNameChanged,de.ParticipantAttributesChanged,de.TrackMuted,de.TrackUnmuted,de.TrackPublished,de.TrackUnpublished,de.TrackStreamStateChanged,de.TrackSubscriptionFailed,de.TrackSubscriptionPermissionChanged,de.TrackSubscriptionStatusChanged],f_=[...D9,de.LocalTrackPublished,de.LocalTrackUnpublished],M9=[ye.TrackPublished,ye.TrackUnpublished,ye.TrackMuted,ye.TrackUnmuted,ye.TrackStreamStateChanged,ye.TrackSubscribed,ye.TrackUnsubscribed,ye.TrackSubscriptionPermissionChanged,ye.TrackSubscriptionFailed,ye.LocalTrackPublished,ye.LocalTrackUnpublished],O9=[ye.ConnectionQualityChanged,ye.IsSpeakingChanged,ye.ParticipantMetadataChanged,ye.ParticipantPermissionsChanged,ye.TrackMuted,ye.TrackUnmuted,ye.TrackPublished,ye.TrackUnpublished,ye.TrackStreamStateChanged,ye.TrackSubscriptionFailed,ye.TrackSubscriptionPermissionChanged,ye.TrackSubscriptionStatusChanged];[...O9,ye.LocalTrackPublished,ye.LocalTrackUnpublished];var ln=LV.getLogger("lk-components-js");ln.setDefaultLevel("WARN");function N9(t,e){var n;return da(Zi({},t),{receivedAtMediaTimestamp:(n=e.rtpTimestamp)!=null?n:0,receivedAt:e.timestamp})}function I9(t,e,n){return[...t,...e].reduceRight((i,r)=>(i.find(a=>a.id===r.id)||i.unshift(r),i),[]).slice(0-n)}function h_(t){return typeof t=="object"}function m_(t){return Array.isArray(t)&&t.filter(h_).length>0}function fu(t){return`${u_}-${t}`}function U9(t){const e=t0(t),n=By(t.participant).pipe(Mn(()=>t0(t)),dr(e));return{className:fu(t.source===te.Source.Camera||t.source===te.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function t0(t){if(Ly(t))return t.publication;{const{source:e,name:n,participant:i}=t;if(e&&n)return i.getTrackPublications().find(r=>r.source===e&&r.trackName===n);if(n)return i.getTrackPublicationByName(n);if(e)return i.getTrackPublication(e);throw new Error("At least one of source and name needs to be defined")}}function th(t,...e){return new en(n=>{const i=()=>{n.next(t)};return e.forEach(r=>{t.on(r,i)}),()=>{e.forEach(r=>{t.off(r,i)})}}).pipe(dr(t))}function jy(t,e){return new en(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function L9(t){return jy(t,de.ConnectionStateChanged).pipe(Mn(([e])=>e),dr(t.state))}function j9(t){return th(t,de.RoomMetadataChanged,de.ConnectionStateChanged).pipe(Mn(e=>({name:e.name,metadata:e.metadata})))}function B9(t,e,n=!0){const i=new en(a=>{Fr.getLocalDevices(t,n).then(c=>{a.next(c),a.complete()}).catch(c=>{e?.(c),a.next([]),a.complete()})}),r=new en(a=>{var c;const l=()=>sr(this,null,function*(){try{const d=yield Fr.getLocalDevices(t,n);a.next(d)}catch(d){e?.(d)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(c=navigator?.mediaDevices)==null||c.addEventListener("devicechange",l)}return()=>{var d;(d=navigator?.mediaDevices)==null||d.removeEventListener("devicechange",l)}});return Qv(i,r)}function F9(t){return jy(t,de.DataReceived)}function V9(t){return th(t,de.AudioPlaybackStatusChanged).pipe(Mn(e=>({canPlayAudio:e.canPlaybackAudio})))}function z9(t,e){return jy(t,de.ActiveDeviceChanged).pipe(Uy(([n])=>n===e),Mn(([n,i])=>(ln.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:i}),i)))}function p_(t,...e){return new en(n=>{const i=()=>{n.next(t)};return e.forEach(r=>{t.on(r,i)}),()=>{e.forEach(r=>{t.off(r,i)})}}).pipe(dr(t))}function By(t){return p_(t,ye.TrackMuted,ye.TrackUnmuted,ye.ParticipantPermissionsChanged,ye.TrackPublished,ye.TrackUnpublished,ye.LocalTrackPublished,ye.LocalTrackUnpublished,ye.MediaDevicesError,ye.TrackSubscriptionStatusChanged).pipe(Mn(e=>{const{isMicrophoneEnabled:n,isCameraEnabled:i,isScreenShareEnabled:r}=e,a=e.getTrackPublication(te.Source.Microphone),c=e.getTrackPublication(te.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:n,isScreenShareEnabled:r,cameraTrack:c,microphoneTrack:a,participant:e}}))}function g_(t,e){return new en(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function H9(t,e={}){var n;let i;const r=new en(d=>(i=d,()=>l.unsubscribe())).pipe(dr(Array.from(t.remoteParticipants.values()))),a=(n=e.additionalRoomEvents)!=null?n:f_,c=Array.from(new Set([de.ParticipantConnected,de.ParticipantDisconnected,de.ConnectionStateChanged,...a])),l=th(t,...c).subscribe(d=>i?.next(Array.from(d.remoteParticipants.values())));return t.remoteParticipants.size>0&&i?.next(Array.from(t.remoteParticipants.values())),r}function q9(t){return g_(t,ye.ParticipantPermissionsChanged).pipe(Mn(()=>t.permissions),dr(t.permissions))}function tE(t){return typeof t>"u"?new en:g_(t,ye.AttributesChanged).pipe(Mn(([e])=>({changed:e,attributes:t.attributes})),dr({changed:t.attributes,attributes:t.attributes}))}function K9(t,e,n,i,r){const{localParticipant:a}=e,c=(m,p)=>{let v=!1;switch(m){case te.Source.Camera:v=p.isCameraEnabled;break;case te.Source.Microphone:v=p.isMicrophoneEnabled;break;case te.Source.ScreenShare:v=p.isScreenShareEnabled;break}return v},l=By(a).pipe(Mn(m=>c(t,m.participant)),dr(c(t,a))),d=new Hr,f=(m,p)=>sr(this,null,function*(){try{switch(p??(p=n),d.next(!0),t){case te.Source.Camera:return yield a.setCameraEnabled(m??!a.isCameraEnabled,p,i),a.isCameraEnabled;case te.Source.Microphone:return yield a.setMicrophoneEnabled(m??!a.isMicrophoneEnabled,p,i),a.isMicrophoneEnabled;case te.Source.ScreenShare:return yield a.setScreenShareEnabled(m??!a.isScreenShareEnabled,p,i),a.isScreenShareEnabled;default:throw new TypeError("Tried to toggle unsupported source")}}catch(v){if(r&&v instanceof Error){r?.(v);return}else throw v}finally{d.next(!1)}});return{className:fu("button"),toggle:f,enabledObserver:l,pendingObserver:d.asObservable()}}function G9(){let t=!1;const e=new Hr,n=new Hr,i=r=>sr(this,null,function*(){n.next(!0),t=r??!t,e.next(t),n.next(!1)});return{className:fu("button"),toggle:i,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function Y9(t,e,n){const i=new WP(void 0),r=z9(e,t),a=(c,...l)=>sr(this,[c,...l],function*(d,f={}){var m,p,v;if(e){ln.debug(`Switching active device of kind "${t}" with id ${d}.`),yield e.switchActiveDevice(t,d,f.exact);const S=(m=e.getActiveDevice(t))!=null?m:d;S!==d&&d!=="default"&&ln.info(`We tried to select the device with id (${d}), but the browser decided to select the device with id (${S}) instead.`);let x;t==="audioinput"?x=(p=e.localParticipant.getTrackPublication(te.Source.Microphone))==null?void 0:p.track:t==="videoinput"&&(x=(v=e.localParticipant.getTrackPublication(te.Source.Camera))==null?void 0:v.track);const b=d==="default"&&!x||d==="default"&&x?.mediaStreamTrack.label.startsWith("Default");i.next(b?d:S)}});return{className:fu("media-device-select"),activeDeviceObservable:r,setActiveMediaDevice:a}}var v_={CHAT:"lk.chat",TRANSCRIPTION:"lk.transcription"},W9={CHAT:"lk-chat-topic"};function y_(t,e){return sr(this,arguments,function*(n,i,r={}){const{reliable:a,destinationIdentities:c,topic:l}=r;yield n.publishData(i,{destinationIdentities:c,topic:l,reliable:a})})}function $9(t,e,n){const i=Array.isArray(e)?e:[e],r=F9(t).pipe(Uy(([,,,l])=>e===void 0||l!==void 0&&i.includes(l)),Mn(([l,d,,f])=>({payload:l,topic:f,from:d})));let a;const c=new en(l=>{a=l});return{messageObservable:r,isSendingObservable:c,send:(l,...d)=>sr(this,[l,...d],function*(f,m={}){a.next(!0);try{yield y_(t.localParticipant,f,Zi({topic:i[0]},m))}finally{a.next(!1)}})}}var Ld=new WeakMap;function X9(t){return t.ignoreLegacy==!0}var Z9=t=>JSON.parse(new TextDecoder().decode(t)),J9=t=>new TextEncoder().encode(JSON.stringify(t));function Q9(t,e){var n,i,r,a,c,l;const d=()=>{var D,B,H;return((D=t.serverInfo)==null?void 0:D.edition)===1||!!((B=t.serverInfo)!=null&&B.version)&&ji((H=t.serverInfo)==null?void 0:H.version,"1.8.2")>0},f=new Hr,m=(n=void 0)!=null?n:v_.CHAT,p=(i=void 0)!=null?i:W9.CHAT;let v=!1;Ld.has(t)||(v=!0);const S=(r=Ld.get(t))!=null?r:new Map,x=(a=S.get(m))!=null?a:new Hr;S.set(m,x),Ld.set(t,S);const b=(c=void 0)!=null?c:Z9;if(v){t.registerTextStreamHandler(m,(B,H)=>sr(this,null,function*(){const{id:z,timestamp:X}=B.info;Iy(B).pipe(e0((ae,oe)=>ae+oe),Mn(ae=>({id:z,timestamp:X,message:ae,from:t.getParticipantByIdentity(H.identity)}))).subscribe({next:ae=>x.next(ae)})}));const{messageObservable:D}=$9(t,[p]);D.pipe(Mn(B=>{const H=b(B.payload);return X9(H)?void 0:da(Zi({},H),{from:B.from})}),Uy(B=>!!B),JC(f)).subscribe(x)}const P=x.pipe(e0((D,B)=>{if("id"in B&&D.find(H=>{var z,X;return((z=H.from)==null?void 0:z.identity)===((X=B.from)==null?void 0:X.identity)&&H.id===B.id})){const H=D.findIndex(z=>z.id===B.id);if(H>-1){const z=D[H];D[H]=da(Zi({},B),{timestamp:z.timestamp,editTimestamp:B.timestamp})}return[...D]}return[...D,B]},[]),JC(f)),k=new WP(!1),O=(l=void 0)!=null?l:J9,N=(D,B)=>sr(this,null,function*(){B||(B={}),B.topic!=null||(B.topic=m),k.next(!0);try{const H={id:(yield t.localParticipant.sendText(D,B)).id,timestamp:Date.now(),message:D},z=da(Zi({},H),{attachedFiles:B.attachments}),X=da(Zi({},z),{from:t.localParticipant,attributes:B.attributes});x.next(X);const ae=O(da(Zi({},H),{ignoreLegacy:d()}));try{yield y_(t.localParticipant,ae,{reliable:!0,topic:p})}catch(oe){ln.info("could not send message in legacy chat format",oe)}return X}finally{k.next(!1)}});function I(){f.next(),f.complete(),x.complete(),Ld.delete(t),t.unregisterTextStreamHandler(m)}return t.once(de.Disconnected,I),{messageObservable:P,isSendingObservable:k,send:N}}function e7(){const t=e=>sr(this,null,function*(){ln.info("Start Audio for room: ",e),yield e.startAudio()});return{className:fu("start-audio-button"),roomAudioPlaybackAllowedObservable:V9,handleStartAudioPlayback:t}}function nE(t,e,n=!0){const i=[t.localParticipant,...Array.from(t.remoteParticipants.values())],r=[];return i.forEach(a=>{e.forEach(c=>{const l=Array.from(a.trackPublications.values()).filter(d=>d.source===c&&(!n||d.track)).map(d=>({participant:a,publication:d,source:d.source}));r.push(...l)})}),{trackReferences:r,participants:i}}function iE(t,e,n=!1){const{sources:i,kind:r,name:a}=e;return Array.from(t.trackPublications.values()).filter(c=>(!i||i.includes(c.source))&&(!r||c.kind===r)&&(!a||c.trackName===a)&&(!n||c.track)).map(c=>({participant:t,publication:c,source:c.source}))}function t7(t,e,n){var i,r;const a=(i=n.additionalRoomEvents)!=null?i:f_,c=(r=n.onlySubscribed)!=null?r:!0,l=Array.from(new Set([de.ParticipantConnected,de.ParticipantDisconnected,de.ConnectionStateChanged,de.LocalTrackPublished,de.LocalTrackUnpublished,de.TrackPublished,de.TrackUnpublished,de.TrackSubscriptionStatusChanged,...a]).values());return th(t,...l).pipe(Mn(d=>{const f=nE(d,e,c);return ln.debug(`TrackReference[] was updated. (length ${f.trackReferences.length})`,f),f}),dr(nE(t,e,c)))}function n7(t,e){return p_(t,...M9).pipe(Mn(n=>{const i=iE(n,e);return ln.debug(`TrackReference[] was updated. (length ${i.length})`,i),i}),dr(iE(t,e)))}function b_(t,e){return new en(n=>{const i=(...r)=>{n.next(r)};return t.on(e,i),()=>{t.off(e,i)}})}function i7(t){return b_(t,Ee.TranscriptionReceived)}function r7(t){return b_(t,Ee.TimeSyncUpdate).pipe(Mn(([e])=>e))}function s7(t,e){if(typeof localStorage>"u"){ln.error("Local storage is not available.");return}try{if(e){const n=Object.fromEntries(Object.entries(e).filter(([,i])=>i!==""));localStorage.setItem(t,JSON.stringify(n))}}catch(n){ln.error(`Error setting item to local storage: ${n}`)}}function a7(t){if(typeof localStorage>"u"){ln.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){ln.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){ln.error(`Error getting item from local storage: ${e}`);return}}function o7(t){return{load:()=>a7(t),save:e=>s7(t,e)}}var c7=`${u_}-user-choices`,El={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"default",audioDeviceId:"default",username:""},{load:l7,save:u7}=o7(c7);function d7(t,e=!1){e!==!0&&u7(t)}function f7(t,e=!1){var n,i,r,a,c;const l={videoEnabled:(n=t?.videoEnabled)!=null?n:El.videoEnabled,audioEnabled:(i=t?.audioEnabled)!=null?i:El.audioEnabled,videoDeviceId:(r=t?.videoDeviceId)!=null?r:El.videoDeviceId,audioDeviceId:(a=t?.audioDeviceId)!=null?a:El.audioDeviceId,username:(c=t?.username)!=null?c:El.username};if(e)return l;{const d=l7();return Zi(Zi({},l),d??{})}}var vg=null,yg=null,h7=0;function rE(){return vg||(vg=new Map),vg}function m7(){return yg||(yg=new WeakMap),yg}function p7(t,e){const n=m7();let i=n.get(t);return i||(i=`room_${h7++}`,n.set(t,i)),`${i}:${e}`}function g7(t,e){const n=p7(t,e),i=rE(),r=i.get(n);if(r)return r;const a=new Hr;let c=[];const l="lk.segment_id",d=a.pipe(x9({subscribe:()=>{t.registerTextStreamHandler(e,(f,m)=>sr(this,null,function*(){var p;const v=Iy(f).pipe(e0((x,b)=>x+b,"")),S=!!((p=f.info.attributes)!=null&&p[l]);v.subscribe(x=>{const b=c.findIndex(P=>{var k,O;return P.streamInfo.id===f.info.id||S&&((k=P.streamInfo.attributes)==null?void 0:k[l])===((O=f.info.attributes)==null?void 0:O[l])});b!==-1?(c[b]=da(Zi({},c[b]),{text:x}),a.next([...c])):(c.push({text:x,participantInfo:m,streamInfo:f.info}),a.next([...c]))})}))},finalize:()=>{t.unregisterTextStreamHandler(e)}}),T9());return i.set(n,d),t.on(de.Disconnected,()=>{rE().delete(n),c=[],a.next([])}),d}T.createContext(void 0);const v7=T.createContext(void 0);function S_(){return T.useContext(v7)}function T_(t){const e=S_(),n=t??e;if(!n)throw new Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}const y7=T.createContext(void 0);function x_(){return T.useContext(y7)}const Fy=T.createContext(void 0);function Pa(){const t=T.useContext(Fy);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function nh(){return T.useContext(Fy)}function ac(t){const e=nh(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}T.createContext(void 0);function w_(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=w_(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function C_(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=w_(t))&&(i&&(i+=" "),i+=e);return i}function b7(...t){return(...e)=>{for(const n of t)if(typeof n=="function")try{n(...e)}catch(i){console.error(i)}}}function Vy(...t){const e={...t[0]};for(let n=1;n<t.length;n++){const i=t[n];for(const r in i){const a=e[r],c=i[r];typeof a=="function"&&typeof c=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?e[r]=b7(a,c):(r==="className"||r==="UNSAFE_className")&&typeof a=="string"&&typeof c=="string"?e[r]=C_(a,c):e[r]=c!==void 0?c:a}}return e}function S7(t){return t!==void 0}function E_(...t){return Vy(...t.filter(S7))}function T7(t,e,n){return T.Children.map(t,i=>T.isValidElement(i)&&T.Children.only(t)?(i.props.className&&(e??(e={}),e.className=C_(i.props.className,e.className),e.style={...i.props.style,...e.style}),T.cloneElement(i,{...e,key:n})):i)}function ci(t,e,n=!0){const[i,r]=T.useState(e);return T.useEffect(()=>{if(n&&r(e),typeof window>"u"||!t)return;const a=t.subscribe(r);return()=>a.unsubscribe()},[t,n]),i}function zy(t){const e=ac(t),n=T.useMemo(()=>L9(e),[e]);return ci(n,e.state)}function k_(t={}){const e=ac(t.room),[n,i]=T.useState(e.localParticipant),[r,a]=T.useState(n.isMicrophoneEnabled),[c,l]=T.useState(n.isCameraEnabled),[d,f]=T.useState(n.isScreenShareEnabled),[m,p]=T.useState(n.lastMicrophoneError),[v,S]=T.useState(n.lastCameraError),[x,b]=T.useState(void 0),[P,k]=T.useState(void 0),O=N=>{l(N.isCameraEnabled),a(N.isMicrophoneEnabled),f(N.isScreenShareEnabled),k(N.cameraTrack),b(N.microphoneTrack),p(N.participant.lastMicrophoneError),S(N.participant.lastCameraError),i(N.participant)};return T.useEffect(()=>{const N=By(e.localParticipant).subscribe(O);return()=>N.unsubscribe()},[e]),{isMicrophoneEnabled:r,isScreenShareEnabled:d,isCameraEnabled:c,microphoneTrack:x,cameraTrack:P,lastMicrophoneError:m,lastCameraError:v,localParticipant:n}}function x7(){const t=Pa(),e=T.useMemo(()=>q9(t.localParticipant),[t]);return ci(e,t.localParticipant.permissions)}function w7({kind:t,room:e,track:n,requestPermissions:i,onError:r}){const a=nh(),c=T.useMemo(()=>e??a??new Fr,[e,a]),l=T.useMemo(()=>B9(t,r,i),[t,i,r]),d=ci(l,[]),[f,m]=T.useState(c?.getActiveDevice(t)??"default"),{className:p,activeDeviceObservable:v,setActiveMediaDevice:S}=T.useMemo(()=>Y9(t,c),[t,c,n]);return T.useEffect(()=>{const x=v.subscribe(b=>{b&&(ln.info("setCurrentDeviceId",b),m(b))});return()=>{x?.unsubscribe()}},[v]),{devices:d,className:p,activeDeviceId:f,setActiveMediaDevice:S}}function Hy(t={}){const e=ac(t.room),[n,i]=T.useState([]);return T.useEffect(()=>{const r=H9(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(i);return()=>r.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function C7(t={}){const e=ac(t.room),n=T.useMemo(()=>j9(e),[e]),{name:i,metadata:r}=ci(n,{name:e.name,metadata:e.metadata});return{name:i,metadata:r}}function E7({room:t,props:e}){const n=ac(t),{className:i,roomAudioPlaybackAllowedObservable:r,handleStartAudioPlayback:a}=T.useMemo(()=>e7(),[]),c=T.useMemo(()=>r(n),[n,r]),{canPlayAudio:l}=ci(c,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:T.useMemo(()=>Vy(e,{className:i,onClick:()=>{a(n)},style:{display:l?"none":"block"}}),[e,i,l,a,n]),canPlayAudio:l}}function bg({source:t,onChange:e,initialState:n,captureOptions:i,publishOptions:r,onDeviceError:a,...c}){var l;const d=nh(),f=(l=d?.localParticipant)==null?void 0:l.getTrackPublication(t),m=T.useRef(!1),{toggle:p,className:v,pendingObserver:S,enabledObserver:x}=T.useMemo(()=>d?K9(t,d,i,r,a):G9(),[d,t,JSON.stringify(i),r]),b=ci(S,!1),P=ci(x,n??!!(f!=null&&f.isEnabled));T.useEffect(()=>{e?.(P,m.current),m.current=!1},[P,e]),T.useEffect(()=>{n!==void 0&&(ln.debug("forcing initial toggle state",t,n),p(n))},[]);const k=T.useMemo(()=>Vy(c,{className:v}),[c,v]),O=T.useCallback(N=>{var I;m.current=!0,p().catch(()=>m.current=!1),(I=c.onClick)==null||I.call(c,N)},[c,p]);return{toggle:p,enabled:P,pending:b,track:f,buttonProps:{...k,"aria-pressed":P,"data-lk-source":t,"data-lk-enabled":P,disabled:b,onClick:O}}}function R_(t=[te.Source.Camera,te.Source.Microphone,te.Source.ScreenShare,te.Source.ScreenShareAudio,te.Source.Unknown],e={}){const n=ac(e.room),[i,r]=T.useState([]),[a,c]=T.useState([]),l=T.useMemo(()=>t.map(d=>h_(d)?d.source:d),[JSON.stringify(t)]);return T.useEffect(()=>{const d=t7(n,l,{additionalRoomEvents:e.updateOnlyOn,onlySubscribed:e.onlySubscribed}).subscribe(({trackReferences:f,participants:m})=>{ln.debug("setting track bundles",f,m),r(f),c(m)});return()=>d.unsubscribe()},[n,JSON.stringify(e.onlySubscribed),JSON.stringify(e.updateOnlyOn),JSON.stringify(t)]),T.useMemo(()=>{if(m_(t)){const d=R7(t,a),f=Array.from(i);return a.forEach(m=>{d.has(m.identity)&&(d.get(m.identity)??[]).forEach(p=>{if(i.find(({participant:S,publication:x})=>m.identity===S.identity&&x.source===p))return;ln.debug(`Add ${p} placeholder for participant ${m.identity}.`);const v={participant:m,source:p};f.push(v)})}),f}else return i},[i,a,t])}function k7(t,e){const n=new Set(t);for(const i of e)n.delete(i);return n}function R7(t,e){const n=new Map;if(m_(t)){const i=t.filter(r=>r.withPlaceholder).map(r=>r.source);e.forEach(r=>{const a=r.getTrackPublications().map(l=>{var d;return(d=l.track)==null?void 0:d.source}).filter(l=>l!==void 0),c=Array.from(k7(new Set(i),new Set(a)));c.length>0&&n.set(r.identity,c)})}return n}function A7(t){const e=Pa(),n=zy(e),i=T.useMemo(()=>n===at.Disconnected,[n]),r=T.useMemo(()=>Q9(e),[e,t,i]),a=ci(r.isSendingObservable,!1),c=ci(r.messageObservable,[]);return{send:r.send,chatMessages:c,isSending:a}}function P7(t={}){const[e,n]=T.useState(f7(t.defaults,t.preventLoad??!1)),i=T.useCallback(d=>{n(f=>({...f,audioEnabled:d}))},[]),r=T.useCallback(d=>{n(f=>({...f,videoEnabled:d}))},[]),a=T.useCallback(d=>{n(f=>({...f,audioDeviceId:d}))},[]),c=T.useCallback(d=>{n(f=>({...f,videoDeviceId:d}))},[]),l=T.useCallback(d=>{n(f=>({...f,username:d}))},[]);return T.useEffect(()=>{d7(e,t.preventSave??!1)},[e,t.preventSave]),{userChoices:e,saveAudioInputEnabled:i,saveVideoInputEnabled:r,saveAudioInputDeviceId:a,saveVideoInputDeviceId:c,saveUsername:l}}const _7=t=>{const e=n=>{let i=1-Math.max(-100,Math.min(-10,n))*-1/100;return i=Math.sqrt(i),i};return t.map(n=>n===-1/0?0:e(n))},D7={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};function M7(t,e={}){var n;const i=t instanceof te?t:(n=t?.publication)==null?void 0:n.track,r={...D7,...e},[a,c]=T.useState(new Array(r.bands).fill(0));return T.useEffect(()=>{if(!i||!(i!=null&&i.mediaStream))return;const{analyser:l,cleanup:d}=M5(i,r.analyserOptions),f=l.frequencyBinCount,m=new Float32Array(f),p=setInterval(()=>{l.getFloatFrequencyData(m);let v=new Float32Array(m.length);for(let P=0;P<m.length;P++)v[P]=m[P];v=v.slice(e.loPass,e.hiPass);const S=_7(v),x=Math.ceil(S.length/r.bands),b=[];for(let P=0;P<r.bands;P++){const k=S.slice(P*x,(P+1)*x).reduce((O,N)=>O+=N,0);b.push(k/x)}c(b)},r.updateInterval);return()=>{d(),clearInterval(p)}},[i,i?.mediaStream,JSON.stringify(e)]),a}function sE(t,e){const n=x_(),i=Hy({updateOnlyOn:[]}),r=T.useMemo(()=>e?i.find(c=>c.identity===e):n,[e,i,n]),a=T.useMemo(()=>{if(r)return n7(r,{sources:t})},[r,JSON.stringify(t)]);return ci(a,[])}function O7(t){var e,n,i;const r=T.useMemo(()=>{var a;return(a=t?.publication)!=null&&a.track?r7(t?.publication.track):void 0},[(e=t?.publication)==null?void 0:e.track]);return ci(r,{timestamp:Date.now(),rtpTimestamp:(i=(n=t?.publication)==null?void 0:n.track)==null?void 0:i.rtpTimestamp})}const N7={bufferSize:100};function I7(t,e){const n={...N7,...e},[i,r]=T.useState([]),a=O7(t),c=l=>{var d;(d=n.onTranscription)==null||d.call(n,l),r(f=>I9(f,l.map(m=>N9(m,a)),n.bufferSize))};return T.useEffect(()=>{if(!(t!=null&&t.publication))return;const l=i7(t.publication).subscribe(d=>{c(...d)});return()=>{l.unsubscribe()}},[t&&d_(t),c]),{segments:i}}function U7(t={}){const e=x_(),n=t.participant??e,i=T.useMemo(()=>tE(n),[n]);return ci(i,{attributes:n?.attributes})}const aE="lk.agent.state";function A_(){const t=Hy(),e=t.find(p=>p.kind===ba.AGENT&&!("lk.publish_on_behalf"in p.attributes)),n=t.find(p=>p.kind===ba.AGENT&&p.attributes["lk.publish_on_behalf"]===e?.identity),i=sE([te.Source.Microphone,te.Source.Camera],e?.identity),r=sE([te.Source.Microphone,te.Source.Camera],n?.identity),a=i.find(p=>p.source===te.Source.Microphone)??r.find(p=>p.source===te.Source.Microphone),c=i.find(p=>p.source===te.Source.Camera)??r.find(p=>p.source===te.Source.Camera),{segments:l}=I7(a),d=zy(),{attributes:f}=U7({participant:e}),m=T.useMemo(()=>d===at.Disconnected?"disconnected":d===at.Connecting||!e||!(f!=null&&f[aE])?"connecting":f[aE],[f,e,d]);return{agent:e,state:m,audioTrack:a,videoTrack:c,agentTranscriptions:l,agentAttributes:f}}function L7(t){const e=Pa(),n=zy(e)===at.Disconnected,i=T.useMemo(()=>g7(e,t),[e,t]);return{textStreams:ci(n?void 0:i,[])}}function j7(t){const{participantIdentities:e,trackSids:n}={},{textStreams:i}=L7(v_.TRANSCRIPTION);return T.useMemo(()=>i.filter(r=>e?e.includes(r.participantInfo.identity):!0).filter(r=>{var a;return n?n.includes(((a=r.streamInfo.attributes)==null?void 0:a["lk.transcribed_track_id"])??""):!0}),[i,e,n])}const B7=T.forwardRef(function({label:t="Allow Audio",...e},n){const i=Pa(),{mergedProps:r}=E7({room:i,props:e});return T.createElement("button",{ref:n,...r},t)});function P_(t,e={}){const[n,i]=T.useState(t0(t)),[r,a]=T.useState(n?.isMuted),[c,l]=T.useState(n?.isSubscribed),[d,f]=T.useState(n?.track),[m,p]=T.useState("landscape"),v=T.useRef(),{className:S,trackObserver:x}=T.useMemo(()=>U9(t),[t.participant.sid??t.participant.identity,t.source,Ly(t)&&t.publication.trackSid]);return T.useEffect(()=>{const b=x.subscribe(P=>{ln.debug("update track",P),i(P),a(P?.isMuted),l(P?.isSubscribed),f(P?.track)});return()=>b?.unsubscribe()},[x]),T.useEffect(()=>{var b,P;return d&&(v.current&&d.detach(v.current),(b=e.element)!=null&&b.current&&!(t.participant.isLocal&&d?.kind==="audio")&&d.attach(e.element.current)),v.current=(P=e.element)==null?void 0:P.current,()=>{v.current&&d?.detach(v.current)}},[d,e.element]),T.useEffect(()=>{var b,P;if(typeof((b=n?.dimensions)==null?void 0:b.width)=="number"&&typeof((P=n?.dimensions)==null?void 0:P.height)=="number"){const k=n.dimensions.width>n.dimensions.height?"landscape":"portrait";p(k)}},[n]),{publication:n,isMuted:r,isSubscribed:c,track:d,elementProps:E_(e.props,{className:S,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":n?.source,...n?.kind==="video"&&{"data-lk-orientation":m}})}}var Sg,oE;function F7(){if(oE)return Sg;oE=1;var t="Expected a function",e=NaN,n="[object Symbol]",i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,d=typeof Id=="object"&&Id&&Id.Object===Object&&Id,f=typeof self=="object"&&self&&self.Object===Object&&self,m=d||f||Function("return this")(),p=Object.prototype,v=p.toString,S=Math.max,x=Math.min,b=function(){return m.Date.now()};function P(D,B,H){var z,X,ae,oe,fe,ke,Ae=0,Oe=!1,G=!1,ie=!0;if(typeof D!="function")throw new TypeError(t);B=I(B)||0,k(H)&&(Oe=!!H.leading,G="maxWait"in H,ae=G?S(I(H.maxWait)||0,B):ae,ie="trailing"in H?!!H.trailing:ie);function J(be){var Ce=z,Ve=X;return z=X=void 0,Ae=be,oe=D.apply(Ve,Ce),oe}function Pe(be){return Ae=be,fe=setTimeout(me,B),Oe?J(be):oe}function V(be){var Ce=be-ke,Ve=be-Ae,qe=B-Ce;return G?x(qe,ae-Ve):qe}function Q(be){var Ce=be-ke,Ve=be-Ae;return ke===void 0||Ce>=B||Ce<0||G&&Ve>=ae}function me(){var be=b();if(Q(be))return le(be);fe=setTimeout(me,V(be))}function le(be){return fe=void 0,ie&&z?J(be):(z=X=void 0,oe)}function Te(){fe!==void 0&&clearTimeout(fe),Ae=0,z=ke=X=fe=void 0}function Me(){return fe===void 0?oe:le(b())}function _e(){var be=b(),Ce=Q(be);if(z=arguments,X=this,ke=be,Ce){if(fe===void 0)return Pe(ke);if(G)return fe=setTimeout(me,B),J(ke)}return fe===void 0&&(fe=setTimeout(me,B)),oe}return _e.cancel=Te,_e.flush=Me,_e}function k(D){var B=typeof D;return!!D&&(B=="object"||B=="function")}function O(D){return!!D&&typeof D=="object"}function N(D){return typeof D=="symbol"||O(D)&&v.call(D)==n}function I(D){if(typeof D=="number")return D;if(N(D))return e;if(k(D)){var B=typeof D.valueOf=="function"?D.valueOf():D;D=k(B)?B+"":B}if(typeof D!="string")return D===0?D:+D;D=D.replace(i,"");var H=a.test(D);return H||c.test(D)?l(D.slice(2),H?2:8):r.test(D)?e:+D}return Sg=P,Sg}var V7=F7();const cE=HP(V7);function z7(t){const e=T.useRef(t);e.current=t,T.useEffect(()=>()=>{e.current()},[])}function H7(t,e=500,n){const i=T.useRef();z7(()=>{i.current&&i.current.cancel()});const r=T.useMemo(()=>{const a=cE(t,e,n),c=(...l)=>a(...l);return c.cancel=()=>{a.cancel()},c.isPending=()=>!!i.current,c.flush=()=>a.flush(),c},[t,e,n]);return T.useEffect(()=>{i.current=cE(t,e,n)},[t,e,n]),r}function q7(t,e,n){const i=(f,m)=>f===m,r=t instanceof Function?t():t,[a,c]=T.useState(r),l=T.useRef(r),d=H7(c,e,n);return i(l.current,r)||(d(r),l.current=r),[a,d]}function K7({threshold:t=0,root:e=null,rootMargin:n="0%",freezeOnceVisible:i=!1,initialIsIntersecting:r=!1,onChange:a}={}){var c;const[l,d]=T.useState(null),[f,m]=T.useState(()=>({isIntersecting:r,entry:void 0})),p=T.useRef();p.current=a;const v=((c=f.entry)==null?void 0:c.isIntersecting)&&i;T.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||v)return;const b=new IntersectionObserver(P=>{const k=Array.isArray(b.thresholds)?b.thresholds:[b.thresholds];P.forEach(O=>{const N=O.isIntersecting&&k.some(I=>O.intersectionRatio>=I);m({isIntersecting:N,entry:O}),p.current&&p.current(N,O)})},{threshold:t,root:e,rootMargin:n});return b.observe(l),()=>{b.disconnect()}},[l,JSON.stringify(t),e,n,v,i]);const S=T.useRef(null);T.useEffect(()=>{var b;!l&&(b=f.entry)!=null&&b.target&&!i&&!v&&S.current!==f.entry.target&&(S.current=f.entry.target,m({isIntersecting:r,entry:void 0}))},[l,f.entry,i,v,r]);const x=[d,!!f.isIntersecting,f.entry];return x.ref=x[0],x.isIntersecting=x[1],x.entry=x[2],x}const __=T.forwardRef(function({onTrackClick:t,onClick:e,onSubscriptionStatusChanged:n,trackRef:i,manageSubscription:r,...a},c){const l=T_(i),d=T.useRef(null);T.useImperativeHandle(c,()=>d.current);const f=K7({root:d.current}),[m]=q7(f,3e3);T.useEffect(()=>{r&&l.publication instanceof Rf&&m?.isIntersecting===!1&&f?.isIntersecting===!1&&l.publication.setSubscribed(!1)},[m,l,r]),T.useEffect(()=>{r&&l.publication instanceof Rf&&f?.isIntersecting===!0&&l.publication.setSubscribed(!0)},[f,l,r]);const{elementProps:p,publication:v,isSubscribed:S}=P_(l,{element:d,props:a});T.useEffect(()=>{n?.(!!S)},[S,n]);const x=b=>{e?.(b),t?.({participant:l?.participant,track:v})};return T.createElement("video",{ref:d,...p,muted:!0,onClick:x})}),G7=T.forwardRef(function({trackRef:t,onSubscriptionStatusChanged:e,volume:n,...i},r){const a=T_(t),c=T.useRef(null);T.useImperativeHandle(r,()=>c.current);const{elementProps:l,isSubscribed:d,track:f,publication:m}=P_(a,{element:c,props:i});return T.useEffect(()=>{e?.(!!d)},[d,e]),T.useEffect(()=>{f===void 0||n===void 0||(f instanceof cA?f.setVolume(n):ln.warn("Volume can only be set on remote audio tracks."))},[n,f]),T.useEffect(()=>{m===void 0||i.muted===void 0||(m instanceof Rf?m.setEnabled(!i.muted):ln.warn("Can only call setEnabled on remote track publications."))},[i.muted,m,f]),T.createElement("audio",{ref:c,...l})});function Y7({volume:t,muted:e}){const n=R_([te.Source.Microphone,te.Source.ScreenShareAudio,te.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(i=>!i.participant.isLocal&&i.publication.kind===te.Kind.Audio);return T.createElement("div",{style:{display:"none"}},n.map(i=>T.createElement(G7,{key:d_(i),trackRef:i,volume:t,muted:e})))}const W7=t=>{const e=[];for(let n=0;n<t;n++)e.push([n,t-1-n]);return e},lE=t=>[[Math.floor(t/2)],[-1]],$7=(t,e,n)=>{const[i,r]=T.useState(0),[a,c]=T.useState([[]]);T.useEffect(()=>{if(t==="thinking")c(lE(e));else if(t==="connecting"||t==="initializing"){const d=[...W7(e)];c(d)}else c(t==="listening"?lE(e):t===void 0||t==="speaking"?[new Array(e).fill(0).map((d,f)=>f)]:[[]]);r(0)},[t,e]);const l=T.useRef(null);return T.useEffect(()=>{let d=performance.now();const f=m=>{m-d>=n&&(r(p=>p+1),d=m),l.current=requestAnimationFrame(f)};return l.current=requestAnimationFrame(f),()=>{l.current!==null&&cancelAnimationFrame(l.current)}},[n,e,t,a.length]),a[i%a.length]},X7=new Map([["connecting",2e3],["initializing",2e3],["listening",500],["thinking",150]]),Z7=(t,e)=>{if(t===void 0)return 1e3;let n=X7.get(t);if(n)switch(t){case"connecting":n/=e;break}return n},D_=T.forwardRef(function({state:t,options:e,barCount:n=15,trackRef:i,children:r,...a},c){const l=E_(a,{className:"lk-audio-bar-visualizer"});let d=S_();i&&(d=i);const f=M7(d,{bands:n,loPass:100,hiPass:200}),m=e?.minHeight??20,p=e?.maxHeight??100,v=$7(t,n,Z7(t,n)??100);return T.createElement("div",{ref:c,...l,"data-lk-va-state":t},f.map((S,x)=>r?T7(r,{"data-lk-highlighted":v.includes(x),"data-lk-bar-index":x,className:"lk-audio-bar",style:{height:`${Math.min(p,Math.max(m,S*100+5))}%`}}):T.createElement("span",{key:x,"data-lk-highlighted":v.includes(x),"data-lk-bar-index":x,className:`lk-audio-bar ${v.includes(x)&&"lk-highlighted"}`,style:{height:`${Math.min(p,Math.max(m,S*100+5))}%`}})))});function J7(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const Q7=t=>{switch(t){case"success":return nz;case"info":return rz;case"warning":return iz;case"error":return sz;default:return null}},ez=Array(12).fill(0),tz=({visible:t,className:e})=>Re.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Re.createElement("div",{className:"sonner-spinner"},ez.map((n,i)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),nz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),iz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sz=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),az=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),oz=()=>{const[t,e]=Re.useState(document.hidden);return Re.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let n0=1;class cz{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:i,...r}=e,a=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:n0++,c=this.toasts.find(d=>d.id===a),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),c?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...e,id:a,title:i}),{...d,...e,id:a,dismissible:l,title:i}):d):this.addToast({title:i,...r,dismissible:l,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let a=i!==void 0,c;const l=r.then(async f=>{if(c=["resolve",f],Re.isValidElement(f))a=!1,this.create({id:i,type:"default",message:f});else if(uz(f)&&!f.ok){a=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${f.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${f.status}`):n.description,x=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:v,...x})}else if(f instanceof Error){a=!1;const p=typeof n.error=="function"?await n.error(f):n.error,v=typeof n.description=="function"?await n.description(f):n.description,x=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"error",description:v,...x})}else if(n.success!==void 0){a=!1;const p=typeof n.success=="function"?await n.success(f):n.success,v=typeof n.description=="function"?await n.description(f):n.description,x=typeof p=="object"&&!Re.isValidElement(p)?p:{message:p};this.create({id:i,type:"success",description:v,...x})}}).catch(async f=>{if(c=["reject",f],n.error!==void 0){a=!1;const m=typeof n.error=="function"?await n.error(f):n.error,p=typeof n.description=="function"?await n.description(f):n.description,S=typeof m=="object"&&!Re.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:p,...S})}}).finally(()=>{a&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((f,m)=>l.then(()=>c[0]==="reject"?m(c[1]):f(c[1])).catch(m));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(e,n)=>{const i=n?.id||n0++;return this.create({jsx:e(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Hn=new cz,lz=(t,e)=>{const n=e?.id||n0++;return Hn.addToast({title:t,...e,id:n}),n},uz=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",dz=lz,fz=()=>Hn.toasts,hz=()=>Hn.getActiveToasts(),mz=Object.assign(dz,{success:Hn.success,info:Hn.info,warning:Hn.warning,error:Hn.error,custom:Hn.custom,message:Hn.message,promise:Hn.promise,dismiss:Hn.dismiss,loading:Hn.loading},{getHistory:fz,getToasts:hz});J7("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jd(t){return t.label!==void 0}const pz=3,gz="24px",vz="16px",uE=4e3,yz=356,bz=14,Sz=45,Tz=200;function Yi(...t){return t.filter(Boolean).join(" ")}function xz(t){const[e,n]=t.split("-"),i=[];return e&&i.push(e),n&&i.push(n),i}const wz=t=>{var e,n,i,r,a,c,l,d,f;const{invert:m,toast:p,unstyled:v,interacting:S,setHeights:x,visibleToasts:b,heights:P,index:k,toasts:O,expanded:N,removeToast:I,defaultRichColors:D,closeButton:B,style:H,cancelButtonStyle:z,actionButtonStyle:X,className:ae="",descriptionClassName:oe="",duration:fe,position:ke,gap:Ae,expandByDefault:Oe,classNames:G,icons:ie,closeButtonAriaLabel:J="Close toast"}=t,[Pe,V]=Re.useState(null),[Q,me]=Re.useState(null),[le,Te]=Re.useState(!1),[Me,_e]=Re.useState(!1),[be,Ce]=Re.useState(!1),[Ve,qe]=Re.useState(!1),[Xe,Ge]=Re.useState(!1),[wt,Ut]=Re.useState(0),[li,On]=Re.useState(0),kt=Re.useRef(p.duration||fe||uE),j=Re.useRef(null),R=Re.useRef(null),A=k===0,F=k+1<=b,$=p.type,pe=p.dismissible!==!1,we=p.className||"",Ke=p.descriptionClassName||"",Je=Re.useMemo(()=>P.findIndex(We=>We.toastId===p.id)||0,[P,p.id]),M=Re.useMemo(()=>{var We;return(We=p.closeButton)!=null?We:B},[p.closeButton,B]),w=Re.useMemo(()=>p.duration||fe||uE,[p.duration,fe]),E=Re.useRef(0),L=Re.useRef(0),W=Re.useRef(0),re=Re.useRef(null),[ge,Ye]=ke.split("-"),ut=Re.useMemo(()=>P.reduce((We,Gt,tn)=>tn>=Je?We:We+Gt.height,0),[P,Je]),ht=oz(),gt=p.invert||m,dt=$==="loading";L.current=Re.useMemo(()=>Je*Ae+ut,[Je,ut]),Re.useEffect(()=>{kt.current=w},[w]),Re.useEffect(()=>{Te(!0)},[]),Re.useEffect(()=>{const We=R.current;if(We){const Gt=We.getBoundingClientRect().height;return On(Gt),x(tn=>[{toastId:p.id,height:Gt,position:p.position},...tn]),()=>x(tn=>tn.filter(xn=>xn.toastId!==p.id))}},[x,p.id]),Re.useLayoutEffect(()=>{if(!le)return;const We=R.current,Gt=We.style.height;We.style.height="auto";const tn=We.getBoundingClientRect().height;We.style.height=Gt,On(tn),x(xn=>xn.find(un=>un.toastId===p.id)?xn.map(un=>un.toastId===p.id?{...un,height:tn}:un):[{toastId:p.id,height:tn,position:p.position},...xn])},[le,p.title,p.description,x,p.id,p.jsx,p.action,p.cancel]);const Ei=Re.useCallback(()=>{_e(!0),Ut(L.current),x(We=>We.filter(Gt=>Gt.toastId!==p.id)),setTimeout(()=>{I(p)},Tz)},[p,I,x,L]);Re.useEffect(()=>{if(p.promise&&$==="loading"||p.duration===1/0||p.type==="loading")return;let We;return N||S||ht?(()=>{if(W.current<E.current){const xn=new Date().getTime()-E.current;kt.current=kt.current-xn}W.current=new Date().getTime()})():(()=>{kt.current!==1/0&&(E.current=new Date().getTime(),We=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),Ei()},kt.current))})(),()=>clearTimeout(We)},[N,S,p,$,ht,Ei]),Re.useEffect(()=>{p.delete&&(Ei(),p.onDismiss==null||p.onDismiss.call(p,p))},[Ei,p.delete]);function mu(){var We;if(ie?.loading){var Gt;return Re.createElement("div",{className:Yi(G?.loader,p==null||(Gt=p.classNames)==null?void 0:Gt.loader,"sonner-loader"),"data-visible":$==="loading"},ie.loading)}return Re.createElement(tz,{className:Yi(G?.loader,p==null||(We=p.classNames)==null?void 0:We.loader),visible:$==="loading"})}const fc=p.icon||ie?.[$]||Q7($);var Wr,pu;return Re.createElement("li",{tabIndex:0,ref:R,className:Yi(ae,we,G?.toast,p==null||(e=p.classNames)==null?void 0:e.toast,G?.default,G?.[$],p==null||(n=p.classNames)==null?void 0:n[$]),"data-sonner-toast":"","data-rich-colors":(Wr=p.richColors)!=null?Wr:D,"data-styled":!(p.jsx||p.unstyled||v),"data-mounted":le,"data-promise":!!p.promise,"data-swiped":Xe,"data-removed":Me,"data-visible":F,"data-y-position":ge,"data-x-position":Ye,"data-index":k,"data-front":A,"data-swiping":be,"data-dismissible":pe,"data-type":$,"data-invert":gt,"data-swipe-out":Ve,"data-swipe-direction":Q,"data-expanded":!!(N||Oe&&le),"data-testid":p.testId,style:{"--index":k,"--toasts-before":k,"--z-index":O.length-k,"--offset":`${Me?wt:L.current}px`,"--initial-height":Oe?"auto":`${li}px`,...H,...p.style},onDragEnd:()=>{Ce(!1),V(null),re.current=null},onPointerDown:We=>{We.button!==2&&(dt||!pe||(j.current=new Date,Ut(L.current),We.target.setPointerCapture(We.pointerId),We.target.tagName!=="BUTTON"&&(Ce(!0),re.current={x:We.clientX,y:We.clientY})))},onPointerUp:()=>{var We,Gt,tn;if(Ve||!pe)return;re.current=null;const xn=Number(((We=R.current)==null?void 0:We.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),zs=Number(((Gt=R.current)==null?void 0:Gt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),un=new Date().getTime()-((tn=j.current)==null?void 0:tn.getTime()),Yt=Pe==="x"?xn:zs,Wt=Math.abs(Yt)/un;if(Math.abs(Yt)>=Sz||Wt>.11){Ut(L.current),p.onDismiss==null||p.onDismiss.call(p,p),me(Pe==="x"?xn>0?"right":"left":zs>0?"down":"up"),Ei(),qe(!0);return}else{var Rt,pn;(Rt=R.current)==null||Rt.style.setProperty("--swipe-amount-x","0px"),(pn=R.current)==null||pn.style.setProperty("--swipe-amount-y","0px")}Ge(!1),Ce(!1),V(null)},onPointerMove:We=>{var Gt,tn,xn;if(!re.current||!pe||((Gt=window.getSelection())==null?void 0:Gt.toString().length)>0)return;const un=We.clientY-re.current.y,Yt=We.clientX-re.current.x;var Wt;const Rt=(Wt=t.swipeDirections)!=null?Wt:xz(ke);!Pe&&(Math.abs(Yt)>1||Math.abs(un)>1)&&V(Math.abs(Yt)>Math.abs(un)?"x":"y");let pn={x:0,y:0};const _a=hr=>1/(1.5+Math.abs(hr)/20);if(Pe==="y"){if(Rt.includes("top")||Rt.includes("bottom"))if(Rt.includes("top")&&un<0||Rt.includes("bottom")&&un>0)pn.y=un;else{const hr=un*_a(un);pn.y=Math.abs(hr)<Math.abs(un)?hr:un}}else if(Pe==="x"&&(Rt.includes("left")||Rt.includes("right")))if(Rt.includes("left")&&Yt<0||Rt.includes("right")&&Yt>0)pn.x=Yt;else{const hr=Yt*_a(Yt);pn.x=Math.abs(hr)<Math.abs(Yt)?hr:Yt}(Math.abs(pn.x)>0||Math.abs(pn.y)>0)&&Ge(!0),(tn=R.current)==null||tn.style.setProperty("--swipe-amount-x",`${pn.x}px`),(xn=R.current)==null||xn.style.setProperty("--swipe-amount-y",`${pn.y}px`)}},M&&!p.jsx&&$!=="loading"?Re.createElement("button",{"aria-label":J,"data-disabled":dt,"data-close-button":!0,onClick:dt||!pe?()=>{}:()=>{Ei(),p.onDismiss==null||p.onDismiss.call(p,p)},className:Yi(G?.closeButton,p==null||(i=p.classNames)==null?void 0:i.closeButton)},(pu=ie?.close)!=null?pu:az):null,($||p.icon||p.promise)&&p.icon!==null&&(ie?.[$]!==null||p.icon)?Re.createElement("div",{"data-icon":"",className:Yi(G?.icon,p==null||(r=p.classNames)==null?void 0:r.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||mu():null,p.type!=="loading"?fc:null):null,Re.createElement("div",{"data-content":"",className:Yi(G?.content,p==null||(a=p.classNames)==null?void 0:a.content)},Re.createElement("div",{"data-title":"",className:Yi(G?.title,p==null||(c=p.classNames)==null?void 0:c.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?Re.createElement("div",{"data-description":"",className:Yi(oe,Ke,G?.description,p==null||(l=p.classNames)==null?void 0:l.description)},typeof p.description=="function"?p.description():p.description):null),Re.isValidElement(p.cancel)?p.cancel:p.cancel&&jd(p.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||z,onClick:We=>{jd(p.cancel)&&pe&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,We),Ei())},className:Yi(G?.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,Re.isValidElement(p.action)?p.action:p.action&&jd(p.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||X,onClick:We=>{jd(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,We),!We.defaultPrevented&&Ei())},className:Yi(G?.actionButton,p==null||(f=p.classNames)==null?void 0:f.actionButton)},p.action.label):null)};function dE(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Cz(t,e){const n={};return[t,e].forEach((i,r)=>{const a=r===1,c=a?"--mobile-offset":"--offset",l=a?vz:gz;function d(f){["top","right","bottom","left"].forEach(m=>{n[`${c}-${m}`]=typeof f=="number"?`${f}px`:f})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(f=>{i[f]===void 0?n[`${c}-${f}`]=l:n[`${c}-${f}`]=typeof i[f]=="number"?`${i[f]}px`:i[f]}):d(l)}),n}const Ez=Re.forwardRef(function(e,n){const{id:i,invert:r,position:a="bottom-right",hotkey:c=["altKey","KeyT"],expand:l,closeButton:d,className:f,offset:m,mobileOffset:p,theme:v="light",richColors:S,duration:x,style:b,visibleToasts:P=pz,toastOptions:k,dir:O=dE(),gap:N=bz,icons:I,containerAriaLabel:D="Notifications"}=e,[B,H]=Re.useState([]),z=Re.useMemo(()=>i?B.filter(le=>le.toasterId===i):B.filter(le=>!le.toasterId),[B,i]),X=Re.useMemo(()=>Array.from(new Set([a].concat(z.filter(le=>le.position).map(le=>le.position)))),[z,a]),[ae,oe]=Re.useState([]),[fe,ke]=Re.useState(!1),[Ae,Oe]=Re.useState(!1),[G,ie]=Re.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),J=Re.useRef(null),Pe=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=Re.useRef(null),Q=Re.useRef(!1),me=Re.useCallback(le=>{H(Te=>{var Me;return(Me=Te.find(_e=>_e.id===le.id))!=null&&Me.delete||Hn.dismiss(le.id),Te.filter(({id:_e})=>_e!==le.id)})},[]);return Re.useEffect(()=>Hn.subscribe(le=>{if(le.dismiss){requestAnimationFrame(()=>{H(Te=>Te.map(Me=>Me.id===le.id?{...Me,delete:!0}:Me))});return}setTimeout(()=>{uk.flushSync(()=>{H(Te=>{const Me=Te.findIndex(_e=>_e.id===le.id);return Me!==-1?[...Te.slice(0,Me),{...Te[Me],...le},...Te.slice(Me+1)]:[le,...Te]})})})}),[B]),Re.useEffect(()=>{if(v!=="system"){ie(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;const le=window.matchMedia("(prefers-color-scheme: dark)");try{le.addEventListener("change",({matches:Te})=>{ie(Te?"dark":"light")})}catch{le.addListener(({matches:Me})=>{try{ie(Me?"dark":"light")}catch(_e){console.error(_e)}})}},[v]),Re.useEffect(()=>{B.length<=1&&ke(!1)},[B]),Re.useEffect(()=>{const le=Te=>{var Me;if(c.every(Ce=>Te[Ce]||Te.code===Ce)){var be;ke(!0),(be=J.current)==null||be.focus()}Te.code==="Escape"&&(document.activeElement===J.current||(Me=J.current)!=null&&Me.contains(document.activeElement))&&ke(!1)};return document.addEventListener("keydown",le),()=>document.removeEventListener("keydown",le)},[c]),Re.useEffect(()=>{if(J.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,Q.current=!1)}},[J.current]),Re.createElement("section",{ref:n,"aria-label":`${D} ${Pe}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},X.map((le,Te)=>{var Me;const[_e,be]=le.split("-");return z.length?Re.createElement("ol",{key:le,dir:O==="auto"?dE():O,tabIndex:-1,ref:J,className:f,"data-sonner-toaster":!0,"data-sonner-theme":G,"data-y-position":_e,"data-x-position":be,style:{"--front-toast-height":`${((Me=ae[0])==null?void 0:Me.height)||0}px`,"--width":`${yz}px`,"--gap":`${N}px`,...b,...Cz(m,p)},onBlur:Ce=>{Q.current&&!Ce.currentTarget.contains(Ce.relatedTarget)&&(Q.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,V.current=Ce.relatedTarget)},onMouseEnter:()=>ke(!0),onMouseMove:()=>ke(!0),onMouseLeave:()=>{Ae||ke(!1)},onDragEnd:()=>ke(!1),onPointerDown:Ce=>{Ce.target instanceof HTMLElement&&Ce.target.dataset.dismissible==="false"||Oe(!0)},onPointerUp:()=>Oe(!1)},z.filter(Ce=>!Ce.position&&Te===0||Ce.position===le).map((Ce,Ve)=>{var qe,Xe;return Re.createElement(wz,{key:Ce.id,icons:I,index:Ve,toast:Ce,defaultRichColors:S,duration:(qe=k?.duration)!=null?qe:x,className:k?.className,descriptionClassName:k?.descriptionClassName,invert:r,visibleToasts:P,closeButton:(Xe=k?.closeButton)!=null?Xe:d,interacting:Ae,position:le,style:k?.style,unstyled:k?.unstyled,classNames:k?.classNames,cancelButtonStyle:k?.cancelButtonStyle,actionButtonStyle:k?.actionButtonStyle,closeButtonAriaLabel:k?.closeButtonAriaLabel,removeToast:me,toasts:z.filter(Ge=>Ge.position==Ce.position),heights:ae.filter(Ge=>Ge.position==Ce.position),setHeights:oe,expandByDefault:l,gap:N,expanded:fe,swipeDirections:e.swipeDirections})})):null}))});function i0({title:t,description:e}){mz.error(t,{description:e})}function fE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function M_(...t){return e=>{let n=!1;const i=t.map(r=>{const a=fE(r,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():fE(t[r],null)}}}}function An(...t){return T.useCallback(M_(...t),t)}function eu(t){const e=Rz(t),n=T.forwardRef((i,r)=>{const{children:a,...c}=i,l=T.Children.toArray(a),d=l.find(Pz);if(d){const f=d.props.children,m=l.map(p=>p===d?T.Children.count(f)>1?T.Children.only(null):T.isValidElement(f)?f.props.children:null:p);return C.jsx(e,{...c,ref:r,children:T.isValidElement(f)?T.cloneElement(f,void 0,m):null})}return C.jsx(e,{...c,ref:r,children:a})});return n.displayName=`${t}.Slot`,n}var kz=eu("Slot");function Rz(t){const e=T.forwardRef((n,i)=>{const{children:r,...a}=n;if(T.isValidElement(r)){const c=Dz(r),l=_z(a,r.props);return r.type!==T.Fragment&&(l.ref=i?M_(i,c):c),T.cloneElement(r,l)}return T.Children.count(r)>1?T.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Az=Symbol("radix.slottable");function Pz(t){return T.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Az}function _z(t,e){const n={...e};for(const i in e){const r=t[i],a=e[i];/^on[A-Z]/.test(i)?r&&a?n[i]=(...l)=>{const d=a(...l);return r(...l),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...a}:i==="className"&&(n[i]=[r,a].filter(Boolean).join(" "))}return{...t,...n}}function Dz(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function O_(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=O_(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function N_(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=O_(t))&&(i&&(i+=" "),i+=e);return i}const qy="-",Mz=t=>{const e=Nz(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:c=>{const l=c.split(qy);return l[0]===""&&l.length!==1&&l.shift(),I_(l,e)||Oz(c)},getConflictingClassGroupIds:(c,l)=>{const d=n[c]||[];return l&&i[c]?[...d,...i[c]]:d}}},I_=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),r=i?I_(t.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const a=t.join(qy);return e.validators.find(({validator:c})=>c(a))?.classGroupId},hE=/^\[(.+)\]$/,Oz=t=>{if(hE.test(t)){const e=hE.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Nz=t=>{const{theme:e,classGroups:n}=t,i={nextPart:new Map,validators:[]};for(const r in n)r0(n[r],i,r,e);return i},r0=(t,e,n,i)=>{t.forEach(r=>{if(typeof r=="string"){const a=r===""?e:mE(e,r);a.classGroupId=n;return}if(typeof r=="function"){if(Iz(r)){r0(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([a,c])=>{r0(c,mE(e,a),n,i)})})},mE=(t,e)=>{let n=t;return e.split(qy).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},Iz=t=>t.isThemeGetter,Uz=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const r=(a,c)=>{n.set(a,c),e++,e>t&&(e=0,i=n,n=new Map)};return{get(a){let c=n.get(a);if(c!==void 0)return c;if((c=i.get(a))!==void 0)return r(a,c),c},set(a,c){n.has(a)?n.set(a,c):r(a,c)}}},s0="!",a0=":",Lz=a0.length,jz=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=r=>{const a=[];let c=0,l=0,d=0,f;for(let x=0;x<r.length;x++){let b=r[x];if(c===0&&l===0){if(b===a0){a.push(r.slice(d,x)),d=x+Lz;continue}if(b==="/"){f=x;continue}}b==="["?c++:b==="]"?c--:b==="("?l++:b===")"&&l--}const m=a.length===0?r:r.substring(d),p=Bz(m),v=p!==m,S=f&&f>d?f-d:void 0;return{modifiers:a,hasImportantModifier:v,baseClassName:p,maybePostfixModifierPosition:S}};if(e){const r=e+a0,a=i;i=c=>c.startsWith(r)?a(c.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const r=i;i=a=>n({className:a,parseClassName:r})}return i},Bz=t=>t.endsWith(s0)?t.substring(0,t.length-1):t.startsWith(s0)?t.substring(1):t,Fz=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const r=[];let a=[];return i.forEach(c=>{c[0]==="["||e[c]?(r.push(...a.sort(),c),a=[]):a.push(c)}),r.push(...a.sort()),r}},Vz=t=>({cache:Uz(t.cacheSize),parseClassName:jz(t),sortModifiers:Fz(t),...Mz(t)}),zz=/\s+/,Hz=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:a}=e,c=[],l=t.trim().split(zz);let d="";for(let f=l.length-1;f>=0;f-=1){const m=l[f],{isExternal:p,modifiers:v,hasImportantModifier:S,baseClassName:x,maybePostfixModifierPosition:b}=n(m);if(p){d=m+(d.length>0?" "+d:d);continue}let P=!!b,k=i(P?x.substring(0,b):x);if(!k){if(!P){d=m+(d.length>0?" "+d:d);continue}if(k=i(x),!k){d=m+(d.length>0?" "+d:d);continue}P=!1}const O=a(v).join(":"),N=S?O+s0:O,I=N+k;if(c.includes(I))continue;c.push(I);const D=r(k,P);for(let B=0;B<D.length;++B){const H=D[B];c.push(N+H)}d=m+(d.length>0?" "+d:d)}return d};function qz(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=U_(e))&&(i&&(i+=" "),i+=n);return i}const U_=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=U_(t[i]))&&(n&&(n+=" "),n+=e);return n};function Kz(t,...e){let n,i,r,a=c;function c(d){const f=e.reduce((m,p)=>p(m),t());return n=Vz(f),i=n.cache.get,r=n.cache.set,a=l,l(d)}function l(d){const f=i(d);if(f)return f;const m=Hz(d,n);return r(d,m),m}return function(){return a(qz.apply(null,arguments))}}const hn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},L_=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,j_=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Gz=/^\d+\/\d+$/,Yz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$z=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Xz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Zz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,To=t=>Gz.test(t),et=t=>!!t&&!Number.isNaN(Number(t)),bs=t=>!!t&&Number.isInteger(Number(t)),Tg=t=>t.endsWith("%")&&et(t.slice(0,-1)),Pr=t=>Yz.test(t),Jz=()=>!0,Qz=t=>Wz.test(t)&&!$z.test(t),B_=()=>!1,eH=t=>Xz.test(t),tH=t=>Zz.test(t),nH=t=>!Ue(t)&&!Le(t),iH=t=>oc(t,z_,B_),Ue=t=>L_.test(t),ca=t=>oc(t,H_,Qz),xg=t=>oc(t,cH,et),pE=t=>oc(t,F_,B_),rH=t=>oc(t,V_,tH),Bd=t=>oc(t,q_,eH),Le=t=>j_.test(t),kl=t=>cc(t,H_),sH=t=>cc(t,lH),gE=t=>cc(t,F_),aH=t=>cc(t,z_),oH=t=>cc(t,V_),Fd=t=>cc(t,q_,!0),oc=(t,e,n)=>{const i=L_.exec(t);return i?i[1]?e(i[1]):n(i[2]):!1},cc=(t,e,n=!1)=>{const i=j_.exec(t);return i?i[1]?e(i[1]):n:!1},F_=t=>t==="position"||t==="percentage",V_=t=>t==="image"||t==="url",z_=t=>t==="length"||t==="size"||t==="bg-size",H_=t=>t==="length",cH=t=>t==="number",lH=t=>t==="family-name",q_=t=>t==="shadow",uH=()=>{const t=hn("color"),e=hn("font"),n=hn("text"),i=hn("font-weight"),r=hn("tracking"),a=hn("leading"),c=hn("breakpoint"),l=hn("container"),d=hn("spacing"),f=hn("radius"),m=hn("shadow"),p=hn("inset-shadow"),v=hn("text-shadow"),S=hn("drop-shadow"),x=hn("blur"),b=hn("perspective"),P=hn("aspect"),k=hn("ease"),O=hn("animate"),N=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...I(),Le,Ue],B=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto","contain","none"],z=()=>[Le,Ue,d],X=()=>[To,"full","auto",...z()],ae=()=>[bs,"none","subgrid",Le,Ue],oe=()=>["auto",{span:["full",bs,Le,Ue]},bs,Le,Ue],fe=()=>[bs,"auto",Le,Ue],ke=()=>["auto","min","max","fr",Le,Ue],Ae=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Oe=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...z()],ie=()=>[To,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],J=()=>[t,Le,Ue],Pe=()=>[...I(),gE,pE,{position:[Le,Ue]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",aH,iH,{size:[Le,Ue]}],me=()=>[Tg,kl,ca],le=()=>["","none","full",f,Le,Ue],Te=()=>["",et,kl,ca],Me=()=>["solid","dashed","dotted","double"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[et,Tg,gE,pE],Ce=()=>["","none",x,Le,Ue],Ve=()=>["none",et,Le,Ue],qe=()=>["none",et,Le,Ue],Xe=()=>[et,Le,Ue],Ge=()=>[To,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Pr],breakpoint:[Pr],color:[Jz],container:[Pr],"drop-shadow":[Pr],ease:["in","out","in-out"],font:[nH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Pr],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Pr],shadow:[Pr],spacing:["px",et],text:[Pr],"text-shadow":[Pr],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",To,Ue,Le,P]}],container:["container"],columns:[{columns:[et,Ue,Le,l]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:X()}],"inset-x":[{"inset-x":X()}],"inset-y":[{"inset-y":X()}],start:[{start:X()}],end:[{end:X()}],top:[{top:X()}],right:[{right:X()}],bottom:[{bottom:X()}],left:[{left:X()}],visibility:["visible","invisible","collapse"],z:[{z:[bs,"auto",Le,Ue]}],basis:[{basis:[To,"full","auto",l,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,To,"auto","initial","none",Ue]}],grow:[{grow:["",et,Le,Ue]}],shrink:[{shrink:["",et,Le,Ue]}],order:[{order:[bs,"first","last","none",Le,Ue]}],"grid-cols":[{"grid-cols":ae()}],"col-start-end":[{col:oe()}],"col-start":[{"col-start":fe()}],"col-end":[{"col-end":fe()}],"grid-rows":[{"grid-rows":ae()}],"row-start-end":[{row:oe()}],"row-start":[{"row-start":fe()}],"row-end":[{"row-end":fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ke()}],"auto-rows":[{"auto-rows":ke()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...Ae(),"normal"]}],"justify-items":[{"justify-items":[...Oe(),"normal"]}],"justify-self":[{"justify-self":["auto",...Oe()]}],"align-content":[{content:["normal",...Ae()]}],"align-items":[{items:[...Oe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Oe(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ae()}],"place-items":[{"place-items":[...Oe(),"baseline"]}],"place-self":[{"place-self":["auto",...Oe()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:ie()}],w:[{w:[l,"screen",...ie()]}],"min-w":[{"min-w":[l,"screen","none",...ie()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[c]},...ie()]}],h:[{h:["screen","lh",...ie()]}],"min-h":[{"min-h":["screen","lh","none",...ie()]}],"max-h":[{"max-h":["screen","lh",...ie()]}],"font-size":[{text:["base",n,kl,ca]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Le,xg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Tg,Ue]}],"font-family":[{font:[sH,Ue,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Le,Ue]}],"line-clamp":[{"line-clamp":[et,"none",Le,xg]}],leading:[{leading:[a,...z()]}],"list-image":[{"list-image":["none",Le,Ue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Le,Ue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Me(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",Le,ca]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[et,"auto",Le,Ue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Le,Ue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Le,Ue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Pe()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},bs,Le,Ue],radial:["",Le,Ue],conic:[bs,Le,Ue]},oH,rH]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:me()}],"gradient-via-pos":[{via:me()}],"gradient-to-pos":[{to:me()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:le()}],"rounded-s":[{"rounded-s":le()}],"rounded-e":[{"rounded-e":le()}],"rounded-t":[{"rounded-t":le()}],"rounded-r":[{"rounded-r":le()}],"rounded-b":[{"rounded-b":le()}],"rounded-l":[{"rounded-l":le()}],"rounded-ss":[{"rounded-ss":le()}],"rounded-se":[{"rounded-se":le()}],"rounded-ee":[{"rounded-ee":le()}],"rounded-es":[{"rounded-es":le()}],"rounded-tl":[{"rounded-tl":le()}],"rounded-tr":[{"rounded-tr":le()}],"rounded-br":[{"rounded-br":le()}],"rounded-bl":[{"rounded-bl":le()}],"border-w":[{border:Te()}],"border-w-x":[{"border-x":Te()}],"border-w-y":[{"border-y":Te()}],"border-w-s":[{"border-s":Te()}],"border-w-e":[{"border-e":Te()}],"border-w-t":[{"border-t":Te()}],"border-w-r":[{"border-r":Te()}],"border-w-b":[{"border-b":Te()}],"border-w-l":[{"border-l":Te()}],"divide-x":[{"divide-x":Te()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Te()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Me(),"hidden","none"]}],"divide-style":[{divide:[...Me(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...Me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,Le,Ue]}],"outline-w":[{outline:["",et,kl,ca]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",m,Fd,Bd]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",p,Fd,Bd]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[et,ca]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":Te()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",v,Fd,Bd]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[et,Le,Ue]}],"mix-blend":[{"mix-blend":[..._e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[Le,Ue]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":I()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Pe()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Le,Ue]}],filter:[{filter:["","none",Le,Ue]}],blur:[{blur:Ce()}],brightness:[{brightness:[et,Le,Ue]}],contrast:[{contrast:[et,Le,Ue]}],"drop-shadow":[{"drop-shadow":["","none",S,Fd,Bd]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",et,Le,Ue]}],"hue-rotate":[{"hue-rotate":[et,Le,Ue]}],invert:[{invert:["",et,Le,Ue]}],saturate:[{saturate:[et,Le,Ue]}],sepia:[{sepia:["",et,Le,Ue]}],"backdrop-filter":[{"backdrop-filter":["","none",Le,Ue]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[et,Le,Ue]}],"backdrop-contrast":[{"backdrop-contrast":[et,Le,Ue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,Le,Ue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,Le,Ue]}],"backdrop-invert":[{"backdrop-invert":["",et,Le,Ue]}],"backdrop-opacity":[{"backdrop-opacity":[et,Le,Ue]}],"backdrop-saturate":[{"backdrop-saturate":[et,Le,Ue]}],"backdrop-sepia":[{"backdrop-sepia":["",et,Le,Ue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Le,Ue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",Le,Ue]}],ease:[{ease:["linear","initial",k,Le,Ue]}],delay:[{delay:[et,Le,Ue]}],animate:[{animate:["none",O,Le,Ue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Le,Ue]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:Ve()}],"rotate-x":[{"rotate-x":Ve()}],"rotate-y":[{"rotate-y":Ve()}],"rotate-z":[{"rotate-z":Ve()}],scale:[{scale:qe()}],"scale-x":[{"scale-x":qe()}],"scale-y":[{"scale-y":qe()}],"scale-z":[{"scale-z":qe()}],"scale-3d":["scale-3d"],skew:[{skew:Xe()}],"skew-x":[{"skew-x":Xe()}],"skew-y":[{"skew-y":Xe()}],transform:[{transform:[Le,Ue,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ge()}],"translate-x":[{"translate-x":Ge()}],"translate-y":[{"translate-y":Ge()}],"translate-z":[{"translate-z":Ge()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Le,Ue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Le,Ue]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[et,kl,ca,xg]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},dH=Kz(uH);function ft(...t){return dH(N_(t))}function fH(t,e){return{id:t.streamInfo.id,timestamp:t.streamInfo.timestamp,message:t.text,from:t.participantInfo.identity===e.localParticipant.identity?e.localParticipant:Array.from(e.remoteParticipants.values()).find(n=>n.identity===t.participantInfo.identity)}}const K_="(prefers-color-scheme: dark)";function vE(){const t=document.documentElement;t.classList.remove("dark","light"),window.matchMedia(K_).matches?t.classList.add("dark"):t.classList.add("light")}const yE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,bE=N_,Ky=(t,e)=>n=>{var i;if(e?.variants==null)return bE(t,n?.class,n?.className);const{variants:r,defaultVariants:a}=e,c=Object.keys(r).map(f=>{const m=n?.[f],p=a?.[f];if(m===null)return null;const v=yE(m)||yE(p);return r[f][v]}),l=n&&Object.entries(n).reduce((f,m)=>{let[p,v]=m;return v===void 0||(f[p]=v),f},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((f,m)=>{let{class:p,className:v,...S}=m;return Object.entries(S).every(x=>{let[b,P]=x;return Array.isArray(P)?P.includes({...a,...l}[b]):{...a,...l}[b]===P})?[...f,p,v]:f},[]);return bE(t,c,d,n?.class,n?.className)},hH=Ky(["text-xs font-bold tracking-wider uppercase whitespace-nowrap","inline-flex items-center justify-center gap-2 shrink-0 rounded-full cursor-pointer outline-none transition-colors duration-300","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","disabled:pointer-events-none disabled:opacity-50","aria-invalid:ring-destructive/20 aria-invalid:border-destructive dark:aria-invalid:ring-destructive/40 ","[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0"],{variants:{variant:{default:"bg-button text-button-foreground hover:bg-muted focus:bg-muted",destructive:["bg-destructive text-destructive-foreground","hover:bg-destructive-hover focus:bg-destructive-hover focus-visible:ring-destructive-foreground/20","dark:focus-visible:ring-destructive-foreground/40"],outline:["border bg-background","hover:bg-accent hover:text-accent-foreground","dark:bg-input/30 dark:border-input dark:hover:bg-input/50"],primary:"bg-primary text-primary-foreground hover:bg-primary-hover focus:bg-primary-hover",secondary:"bg-secondary text-secondary-foregroun hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Gy({className:t,variant:e,size:n,asChild:i=!1,...r}){const a=i?kz:"button";return C.jsx(a,{"data-slot":"button",className:ft(hH({variant:e,size:n,className:t})),...r})}function mH({onSend:t,className:e,disabled:n,...i}){const r=T.useRef(null),[a,c]=T.useState(""),l=f=>{f.preventDefault(),i.onSubmit?.(f),t?.(a),c("")},d=n||a.trim().length===0;return T.useEffect(()=>{n||r.current?.focus()},[n]),C.jsxs("form",{...i,onSubmit:l,className:ft("flex items-center gap-2 rounded-md pl-1 text-sm",e),children:[C.jsx("input",{autoFocus:!0,ref:r,type:"text",value:a,disabled:n,placeholder:"Type something...",onChange:f=>c(f.target.value),className:"flex-1 bg-transparent text-foreground placeholder:text-muted-foreground focus:outline-none disabled:cursor-not-allowed disabled:opacity-50"}),C.jsx(Gy,{size:"sm",type:"submit",variant:d?"secondary":"primary",disabled:d,className:"font-mono",children:"SEND"})]})}function Jt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}var Wn=globalThis?.document?T.useLayoutEffect:()=>{},pH=GE[" useInsertionEffect ".trim().toString()]||Wn;function o0({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,a,c]=gH({defaultProp:e,onChange:n}),l=t!==void 0,d=l?t:r;{const m=T.useRef(t!==void 0);T.useEffect(()=>{const p=m.current;p!==l&&console.warn(`${i} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,i])}const f=T.useCallback(m=>{if(l){const p=vH(m)?m(t):m;p!==t&&c.current?.(p)}else a(m)},[l,t,a,c]);return[d,f]}function gH({defaultProp:t,onChange:e}){const[n,i]=T.useState(t),r=T.useRef(n),a=T.useRef(e);return pH(()=>{a.current=e},[e]),T.useEffect(()=>{r.current!==n&&(a.current?.(n),r.current=n)},[n,r]),[n,i,a]}function vH(t){return typeof t=="function"}var yH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kt=yH.reduce((t,e)=>{const n=eu(`Primitive.${e}`),i=T.forwardRef((r,a)=>{const{asChild:c,...l}=r,d=c?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),C.jsx(d,{...l,ref:a})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function bH(t,e){t&&su.flushSync(()=>t.dispatchEvent(e))}var G_="Toggle",Y_=T.forwardRef((t,e)=>{const{pressed:n,defaultPressed:i,onPressedChange:r,...a}=t,[c,l]=o0({prop:n,onChange:r,defaultProp:i??!1,caller:G_});return C.jsx(Kt.button,{type:"button","aria-pressed":c,"data-state":c?"on":"off","data-disabled":t.disabled?"":void 0,...a,ref:e,onClick:Jt(t.onClick,()=>{t.disabled||l(!c)})})});Y_.displayName=G_;var SH=Y_;const TH=Ky(["inline-flex items-center justify-center gap-2 rounded-full","text-sm font-medium whitespace-nowrap","cursor-pointer outline-none transition-[color,border,background-color]","focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:border-ring","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","disabled:pointer-events-none disabled:opacity-50 disabled:not-allowed","data-[state=on]:bg-button-selected data-[state=on]:border-button-border-selected","[&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0"],{variants:{variant:{default:"bg-button hover:bg-muted focus:bg-muted hover:text-muted-foreground focus:text-muted-foreground",primary:"text-fg1 data-[state=on]:bg-button hover:data-[state=on]:bg-button-hover focus:data-[state=on]:bg-button-hover data-[state=off]:bg-button-primary hover:data-[state=off]:bg-destructive-hover data-[state=off]:text-button-primary-foreground",secondary:"text-fg1 bg-button hover:bg-button-hover data-[state=on]:bg-button-secondary hover:data-[state=on]:bg-button-secondary/80 data-[state=on]:text-button-secondary-foreground",outline:["border border-button-border bg-button text-button-foreground","hover:bg-background focus:bg-background"]},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});function W_({className:t,variant:e,size:n,...i}){return C.jsx(SH,{"data-slot":"toggle",className:ft(TH({variant:e,size:n,className:t})),...i})}const ih=T.forwardRef((t,e)=>{const{alt:n,color:i="currentColor",size:r="1em",weight:a="regular",mirrored:c=!1,children:l,weights:d,...f}=t;return T.createElement("svg",{ref:e,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,fill:i,viewBox:"0 0 256 256",transform:c?"scale(-1, 1)":void 0,...f},!!n&&T.createElement("title",null,n),l,d.get(a))});ih.displayName="SSRBase";const xH=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M208,96l-80,80L48,96Z",opacity:"0.2"}),T.createElement("path",{d:"M215.39,92.94A8,8,0,0,0,208,88H48a8,8,0,0,0-5.66,13.66l80,80a8,8,0,0,0,11.32,0l80-80A8,8,0,0,0,215.39,92.94ZM128,164.69,67.31,104H188.69Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,48,88H208a8,8,0,0,1,5.66,13.66Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M212.24,100.24l-80,80a6,6,0,0,1-8.48,0l-80-80a6,6,0,0,1,8.48-8.48L128,167.51l75.76-75.75a6,6,0,0,1,8.48,8.48Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M210.83,98.83l-80,80a4,4,0,0,1-5.66,0l-80-80a4,4,0,0,1,5.66-5.66L128,170.34l77.17-77.17a4,4,0,1,1,5.66,5.66Z"}))]]),Yy=T.forwardRef((t,e)=>T.createElement(ih,{ref:e,...t,weights:xH}));Yy.displayName="CaretDownIcon";const wH=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216.49,168.49a12,12,0,0,1-17,0L128,97,56.49,168.49a12,12,0,0,1-17-17l80-80a12,12,0,0,1,17,0l80,80A12,12,0,0,1,216.49,168.49Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M208,160H48l80-80Z",opacity:"0.2"}),T.createElement("path",{d:"M213.66,154.34l-80-80a8,8,0,0,0-11.32,0l-80,80A8,8,0,0,0,48,168H208a8,8,0,0,0,5.66-13.66ZM67.31,152,128,91.31,188.69,152Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M215.39,163.06A8,8,0,0,1,208,168H48a8,8,0,0,1-5.66-13.66l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,215.39,163.06Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M212.24,164.24a6,6,0,0,1-8.48,0L128,88.49,52.24,164.24a6,6,0,0,1-8.48-8.48l80-80a6,6,0,0,1,8.48,0l80,80A6,6,0,0,1,212.24,164.24Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M213.66,165.66a8,8,0,0,1-11.32,0L128,91.31,53.66,165.66a8,8,0,0,1-11.32-11.32l80-80a8,8,0,0,1,11.32,0l80,80A8,8,0,0,1,213.66,165.66Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M210.83,162.83a4,4,0,0,1-5.66,0L128,85.66,50.83,162.83a4,4,0,0,1-5.66-5.66l80-80a4,4,0,0,1,5.66,0l80,80A4,4,0,0,1,210.83,162.83Z"}))]]),$_=T.forwardRef((t,e)=>T.createElement(ih,{ref:e,...t,weights:wH}));$_.displayName="CaretUpIcon";const CH=new Map([["bold",T.createElement(T.Fragment,null,T.createElement("path",{d:"M232.49,80.49l-128,128a12,12,0,0,1-17,0l-56-56a12,12,0,1,1,17-17L96,183,215.51,63.51a12,12,0,0,1,17,17Z"}))],["duotone",T.createElement(T.Fragment,null,T.createElement("path",{d:"M232,56V200a16,16,0,0,1-16,16H40a16,16,0,0,1-16-16V56A16,16,0,0,1,40,40H216A16,16,0,0,1,232,56Z",opacity:"0.2"}),T.createElement("path",{d:"M205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["fill",T.createElement(T.Fragment,null,T.createElement("path",{d:"M216,40H40A16,16,0,0,0,24,56V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40ZM205.66,85.66l-96,96a8,8,0,0,1-11.32,0l-40-40a8,8,0,0,1,11.32-11.32L104,164.69l90.34-90.35a8,8,0,0,1,11.32,11.32Z"}))],["light",T.createElement(T.Fragment,null,T.createElement("path",{d:"M228.24,76.24l-128,128a6,6,0,0,1-8.48,0l-56-56a6,6,0,0,1,8.48-8.48L96,191.51,219.76,67.76a6,6,0,0,1,8.48,8.48Z"}))],["regular",T.createElement(T.Fragment,null,T.createElement("path",{d:"M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"}))],["thin",T.createElement(T.Fragment,null,T.createElement("path",{d:"M226.83,74.83l-128,128a4,4,0,0,1-5.66,0l-56-56a4,4,0,0,1,5.66-5.66L96,194.34,221.17,69.17a4,4,0,1,1,5.66,5.66Z"}))]]),X_=T.forwardRef((t,e)=>T.createElement(ih,{ref:e,...t,weights:CH}));X_.displayName="CheckIcon";function SE(t,[e,n]){return Math.min(n,Math.max(e,t))}function Wy(t,e=[]){let n=[];function i(a,c){const l=T.createContext(c),d=n.length;n=[...n,c];const f=p=>{const{scope:v,children:S,...x}=p,b=v?.[t]?.[d]||l,P=T.useMemo(()=>x,Object.values(x));return C.jsx(b.Provider,{value:P,children:S})};f.displayName=a+"Provider";function m(p,v){const S=v?.[t]?.[d]||l,x=T.useContext(S);if(x)return x;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[f,m]}const r=()=>{const a=n.map(c=>T.createContext(c));return function(l){const d=l?.[t]||a;return T.useMemo(()=>({[`__scope${t}`]:{...l,[t]:d}}),[l,d])}};return r.scopeName=t,[i,EH(r,...e)]}function EH(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(a){const c=i.reduce((l,{useScope:d,scopeName:f})=>{const p=d(a)[`__scope${f}`];return{...l,...p}},{});return T.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return n.scopeName=e.scopeName,n}function kH(t){const e=t+"CollectionProvider",[n,i]=Wy(e),[r,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:P,children:k}=b,O=Re.useRef(null),N=Re.useRef(new Map).current;return C.jsx(r,{scope:P,itemMap:N,collectionRef:O,children:k})};c.displayName=e;const l=t+"CollectionSlot",d=eu(l),f=Re.forwardRef((b,P)=>{const{scope:k,children:O}=b,N=a(l,k),I=An(P,N.collectionRef);return C.jsx(d,{ref:I,children:O})});f.displayName=l;const m=t+"CollectionItemSlot",p="data-radix-collection-item",v=eu(m),S=Re.forwardRef((b,P)=>{const{scope:k,children:O,...N}=b,I=Re.useRef(null),D=An(P,I),B=a(m,k);return Re.useEffect(()=>(B.itemMap.set(I,{ref:I,...N}),()=>void B.itemMap.delete(I))),C.jsx(v,{[p]:"",ref:D,children:O})});S.displayName=m;function x(b){const P=a(t+"CollectionConsumer",b);return Re.useCallback(()=>{const O=P.collectionRef.current;if(!O)return[];const N=Array.from(O.querySelectorAll(`[${p}]`));return Array.from(P.itemMap.values()).sort((B,H)=>N.indexOf(B.ref.current)-N.indexOf(H.ref.current))},[P.collectionRef,P.itemMap])}return[{Provider:c,Slot:f,ItemSlot:S},x,i]}var RH=T.createContext(void 0);function AH(t){const e=T.useContext(RH);return t||e||"ltr"}function wa(t){const e=T.useRef(t);return T.useEffect(()=>{e.current=t}),T.useMemo(()=>(...n)=>e.current?.(...n),[])}function PH(t,e=globalThis?.document){const n=wa(t);T.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var _H="DismissableLayer",c0="dismissableLayer.update",DH="dismissableLayer.pointerDownOutside",MH="dismissableLayer.focusOutside",TE,Z_=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),J_=T.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:a,onInteractOutside:c,onDismiss:l,...d}=t,f=T.useContext(Z_),[m,p]=T.useState(null),v=m?.ownerDocument??globalThis?.document,[,S]=T.useState({}),x=An(e,H=>p(H)),b=Array.from(f.layers),[P]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),k=b.indexOf(P),O=m?b.indexOf(m):-1,N=f.layersWithOutsidePointerEventsDisabled.size>0,I=O>=k,D=IH(H=>{const z=H.target,X=[...f.branches].some(ae=>ae.contains(z));!I||X||(r?.(H),c?.(H),H.defaultPrevented||l?.())},v),B=UH(H=>{const z=H.target;[...f.branches].some(ae=>ae.contains(z))||(a?.(H),c?.(H),H.defaultPrevented||l?.())},v);return PH(H=>{O===f.layers.size-1&&(i?.(H),!H.defaultPrevented&&l&&(H.preventDefault(),l()))},v),T.useEffect(()=>{if(m)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(TE=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),xE(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=TE)}},[m,v,n,f]),T.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),xE())},[m,f]),T.useEffect(()=>{const H=()=>S({});return document.addEventListener(c0,H),()=>document.removeEventListener(c0,H)},[]),C.jsx(Kt.div,{...d,ref:x,style:{pointerEvents:N?I?"auto":"none":void 0,...t.style},onFocusCapture:Jt(t.onFocusCapture,B.onFocusCapture),onBlurCapture:Jt(t.onBlurCapture,B.onBlurCapture),onPointerDownCapture:Jt(t.onPointerDownCapture,D.onPointerDownCapture)})});J_.displayName=_H;var OH="DismissableLayerBranch",NH=T.forwardRef((t,e)=>{const n=T.useContext(Z_),i=T.useRef(null),r=An(e,i);return T.useEffect(()=>{const a=i.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),C.jsx(Kt.div,{...t,ref:r})});NH.displayName=OH;function IH(t,e=globalThis?.document){const n=wa(t),i=T.useRef(!1),r=T.useRef(()=>{});return T.useEffect(()=>{const a=l=>{if(l.target&&!i.current){let d=function(){Q_(DH,n,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);i.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",a),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function UH(t,e=globalThis?.document){const n=wa(t),i=T.useRef(!1);return T.useEffect(()=>{const r=a=>{a.target&&!i.current&&Q_(MH,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function xE(){const t=new CustomEvent(c0);document.dispatchEvent(t)}function Q_(t,e,n,{discrete:i}){const r=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?bH(r,a):r.dispatchEvent(a)}var wg=0;function LH(){T.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wE()),document.body.insertAdjacentElement("beforeend",t[1]??wE()),wg++,()=>{wg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),wg--}},[])}function wE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Cg="focusScope.autoFocusOnMount",Eg="focusScope.autoFocusOnUnmount",CE={bubbles:!1,cancelable:!0},jH="FocusScope",eD=T.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:a,...c}=t,[l,d]=T.useState(null),f=wa(r),m=wa(a),p=T.useRef(null),v=An(e,b=>d(b)),S=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(i){let b=function(N){if(S.paused||!l)return;const I=N.target;l.contains(I)?p.current=I:ws(p.current,{select:!0})},P=function(N){if(S.paused||!l)return;const I=N.relatedTarget;I!==null&&(l.contains(I)||ws(p.current,{select:!0}))},k=function(N){if(document.activeElement===document.body)for(const D of N)D.removedNodes.length>0&&ws(l)};document.addEventListener("focusin",b),document.addEventListener("focusout",P);const O=new MutationObserver(k);return l&&O.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",P),O.disconnect()}}},[i,l,S.paused]),T.useEffect(()=>{if(l){kE.add(S);const b=document.activeElement;if(!l.contains(b)){const k=new CustomEvent(Cg,CE);l.addEventListener(Cg,f),l.dispatchEvent(k),k.defaultPrevented||(BH(qH(tD(l)),{select:!0}),document.activeElement===b&&ws(l))}return()=>{l.removeEventListener(Cg,f),setTimeout(()=>{const k=new CustomEvent(Eg,CE);l.addEventListener(Eg,m),l.dispatchEvent(k),k.defaultPrevented||ws(b??document.body,{select:!0}),l.removeEventListener(Eg,m),kE.remove(S)},0)}}},[l,f,m,S]);const x=T.useCallback(b=>{if(!n&&!i||S.paused)return;const P=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,k=document.activeElement;if(P&&k){const O=b.currentTarget,[N,I]=FH(O);N&&I?!b.shiftKey&&k===I?(b.preventDefault(),n&&ws(N,{select:!0})):b.shiftKey&&k===N&&(b.preventDefault(),n&&ws(I,{select:!0})):k===O&&b.preventDefault()}},[n,i,S.paused]);return C.jsx(Kt.div,{tabIndex:-1,...c,ref:v,onKeyDown:x})});eD.displayName=jH;function BH(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(ws(i,{select:e}),document.activeElement!==n)return}function FH(t){const e=tD(t),n=EE(e,t),i=EE(e.reverse(),t);return[n,i]}function tD(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function EE(t,e){for(const n of t)if(!VH(n,{upTo:e}))return n}function VH(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function zH(t){return t instanceof HTMLInputElement&&"select"in t}function ws(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&zH(t)&&e&&t.select()}}var kE=HH();function HH(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=RE(t,e),t.unshift(e)},remove(e){t=RE(t,e),t[0]?.resume()}}}function RE(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function qH(t){return t.filter(e=>e.tagName!=="A")}var KH=GE[" useId ".trim().toString()]||(()=>{}),GH=0;function $y(t){const[e,n]=T.useState(KH());return Wn(()=>{n(i=>i??String(GH++))},[t]),t||(e?`radix-${e}`:"")}const YH=["top","right","bottom","left"],Ns=Math.min,ri=Math.max,If=Math.round,Vd=Math.floor,ir=t=>({x:t,y:t}),WH={left:"right",right:"left",bottom:"top",top:"bottom"},$H={start:"end",end:"start"};function l0(t,e,n){return ri(t,Ns(e,n))}function qr(t,e){return typeof t=="function"?t(e):t}function Kr(t){return t.split("-")[0]}function lc(t){return t.split("-")[1]}function Xy(t){return t==="x"?"y":"x"}function Zy(t){return t==="y"?"height":"width"}const XH=new Set(["top","bottom"]);function Ji(t){return XH.has(Kr(t))?"y":"x"}function Jy(t){return Xy(Ji(t))}function ZH(t,e,n){n===void 0&&(n=!1);const i=lc(t),r=Jy(t),a=Zy(r);let c=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(c=Uf(c)),[c,Uf(c)]}function JH(t){const e=Uf(t);return[u0(t),e,u0(e)]}function u0(t){return t.replace(/start|end/g,e=>$H[e])}const AE=["left","right"],PE=["right","left"],QH=["top","bottom"],eq=["bottom","top"];function tq(t,e,n){switch(t){case"top":case"bottom":return n?e?PE:AE:e?AE:PE;case"left":case"right":return e?QH:eq;default:return[]}}function nq(t,e,n,i){const r=lc(t);let a=tq(Kr(t),n==="start",i);return r&&(a=a.map(c=>c+"-"+r),e&&(a=a.concat(a.map(u0)))),a}function Uf(t){return t.replace(/left|right|bottom|top/g,e=>WH[e])}function iq(t){return{top:0,right:0,bottom:0,left:0,...t}}function nD(t){return typeof t!="number"?iq(t):{top:t,right:t,bottom:t,left:t}}function Lf(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function _E(t,e,n){let{reference:i,floating:r}=t;const a=Ji(e),c=Jy(e),l=Zy(c),d=Kr(e),f=a==="y",m=i.x+i.width/2-r.width/2,p=i.y+i.height/2-r.height/2,v=i[l]/2-r[l]/2;let S;switch(d){case"top":S={x:m,y:i.y-r.height};break;case"bottom":S={x:m,y:i.y+i.height};break;case"right":S={x:i.x+i.width,y:p};break;case"left":S={x:i.x-r.width,y:p};break;default:S={x:i.x,y:i.y}}switch(lc(e)){case"start":S[c]-=v*(n&&f?-1:1);break;case"end":S[c]+=v*(n&&f?-1:1);break}return S}const rq=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:a=[],platform:c}=n,l=a.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(e));let f=await c.getElementRects({reference:t,floating:e,strategy:r}),{x:m,y:p}=_E(f,i,d),v=i,S={},x=0;for(let b=0;b<l.length;b++){const{name:P,fn:k}=l[b],{x:O,y:N,data:I,reset:D}=await k({x:m,y:p,initialPlacement:i,placement:v,strategy:r,middlewareData:S,rects:f,platform:c,elements:{reference:t,floating:e}});m=O??m,p=N??p,S={...S,[P]:{...S[P],...I}},D&&x<=50&&(x++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(f=D.rects===!0?await c.getElementRects({reference:t,floating:e,strategy:r}):D.rects),{x:m,y:p}=_E(f,v,d)),b=-1)}return{x:m,y:p,placement:v,strategy:r,middlewareData:S}};async function tu(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:a,rects:c,elements:l,strategy:d}=t,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:p="floating",altBoundary:v=!1,padding:S=0}=qr(e,t),x=nD(S),P=l[v?p==="floating"?"reference":"floating":p],k=Lf(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(P)))==null||n?P:P.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:f,rootBoundary:m,strategy:d})),O=p==="floating"?{x:i,y:r,width:c.floating.width,height:c.floating.height}:c.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),I=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},D=Lf(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:O,offsetParent:N,strategy:d}):O);return{top:(k.top-D.top+x.top)/I.y,bottom:(D.bottom-k.bottom+x.bottom)/I.y,left:(k.left-D.left+x.left)/I.x,right:(D.right-k.right+x.right)/I.x}}const sq=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:a,platform:c,elements:l,middlewareData:d}=e,{element:f,padding:m=0}=qr(t,e)||{};if(f==null)return{};const p=nD(m),v={x:n,y:i},S=Jy(r),x=Zy(S),b=await c.getDimensions(f),P=S==="y",k=P?"top":"left",O=P?"bottom":"right",N=P?"clientHeight":"clientWidth",I=a.reference[x]+a.reference[S]-v[S]-a.floating[x],D=v[S]-a.reference[S],B=await(c.getOffsetParent==null?void 0:c.getOffsetParent(f));let H=B?B[N]:0;(!H||!await(c.isElement==null?void 0:c.isElement(B)))&&(H=l.floating[N]||a.floating[x]);const z=I/2-D/2,X=H/2-b[x]/2-1,ae=Ns(p[k],X),oe=Ns(p[O],X),fe=ae,ke=H-b[x]-oe,Ae=H/2-b[x]/2+z,Oe=l0(fe,Ae,ke),G=!d.arrow&&lc(r)!=null&&Ae!==Oe&&a.reference[x]/2-(Ae<fe?ae:oe)-b[x]/2<0,ie=G?Ae<fe?Ae-fe:Ae-ke:0;return{[S]:v[S]+ie,data:{[S]:Oe,centerOffset:Ae-Oe-ie,...G&&{alignmentOffset:ie}},reset:G}}}),aq=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:a,rects:c,initialPlacement:l,platform:d,elements:f}=e,{mainAxis:m=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:b=!0,...P}=qr(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const k=Kr(r),O=Ji(l),N=Kr(l)===l,I=await(d.isRTL==null?void 0:d.isRTL(f.floating)),D=v||(N||!b?[Uf(l)]:JH(l)),B=x!=="none";!v&&B&&D.push(...nq(l,b,x,I));const H=[l,...D],z=await tu(e,P),X=[];let ae=((i=a.flip)==null?void 0:i.overflows)||[];if(m&&X.push(z[k]),p){const Ae=ZH(r,c,I);X.push(z[Ae[0]],z[Ae[1]])}if(ae=[...ae,{placement:r,overflows:X}],!X.every(Ae=>Ae<=0)){var oe,fe;const Ae=(((oe=a.flip)==null?void 0:oe.index)||0)+1,Oe=H[Ae];if(Oe&&(!(p==="alignment"?O!==Ji(Oe):!1)||ae.every(J=>Ji(J.placement)===O?J.overflows[0]>0:!0)))return{data:{index:Ae,overflows:ae},reset:{placement:Oe}};let G=(fe=ae.filter(ie=>ie.overflows[0]<=0).sort((ie,J)=>ie.overflows[1]-J.overflows[1])[0])==null?void 0:fe.placement;if(!G)switch(S){case"bestFit":{var ke;const ie=(ke=ae.filter(J=>{if(B){const Pe=Ji(J.placement);return Pe===O||Pe==="y"}return!0}).map(J=>[J.placement,J.overflows.filter(Pe=>Pe>0).reduce((Pe,V)=>Pe+V,0)]).sort((J,Pe)=>J[1]-Pe[1])[0])==null?void 0:ke[0];ie&&(G=ie);break}case"initialPlacement":G=l;break}if(r!==G)return{reset:{placement:G}}}return{}}}};function DE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ME(t){return YH.some(e=>t[e]>=0)}const oq=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=qr(t,e);switch(i){case"referenceHidden":{const a=await tu(e,{...r,elementContext:"reference"}),c=DE(a,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:ME(c)}}}case"escaped":{const a=await tu(e,{...r,altBoundary:!0}),c=DE(a,n.floating);return{data:{escapedOffsets:c,escaped:ME(c)}}}default:return{}}}}},iD=new Set(["left","top"]);async function cq(t,e){const{placement:n,platform:i,elements:r}=t,a=await(i.isRTL==null?void 0:i.isRTL(r.floating)),c=Kr(n),l=lc(n),d=Ji(n)==="y",f=iD.has(c)?-1:1,m=a&&d?-1:1,p=qr(e,t);let{mainAxis:v,crossAxis:S,alignmentAxis:x}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof x=="number"&&(S=l==="end"?x*-1:x),d?{x:S*m,y:v*f}:{x:v*f,y:S*m}}const lq=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:a,placement:c,middlewareData:l}=e,d=await cq(e,t);return c===((n=l.offset)==null?void 0:n.placement)&&(i=l.arrow)!=null&&i.alignmentOffset?{}:{x:r+d.x,y:a+d.y,data:{...d,placement:c}}}}},uq=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:a=!0,crossAxis:c=!1,limiter:l={fn:P=>{let{x:k,y:O}=P;return{x:k,y:O}}},...d}=qr(t,e),f={x:n,y:i},m=await tu(e,d),p=Ji(Kr(r)),v=Xy(p);let S=f[v],x=f[p];if(a){const P=v==="y"?"top":"left",k=v==="y"?"bottom":"right",O=S+m[P],N=S-m[k];S=l0(O,S,N)}if(c){const P=p==="y"?"top":"left",k=p==="y"?"bottom":"right",O=x+m[P],N=x-m[k];x=l0(O,x,N)}const b=l.fn({...e,[v]:S,[p]:x});return{...b,data:{x:b.x-n,y:b.y-i,enabled:{[v]:a,[p]:c}}}}}},dq=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:a,middlewareData:c}=e,{offset:l=0,mainAxis:d=!0,crossAxis:f=!0}=qr(t,e),m={x:n,y:i},p=Ji(r),v=Xy(p);let S=m[v],x=m[p];const b=qr(l,e),P=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const N=v==="y"?"height":"width",I=a.reference[v]-a.floating[N]+P.mainAxis,D=a.reference[v]+a.reference[N]-P.mainAxis;S<I?S=I:S>D&&(S=D)}if(f){var k,O;const N=v==="y"?"width":"height",I=iD.has(Kr(r)),D=a.reference[p]-a.floating[N]+(I&&((k=c.offset)==null?void 0:k[p])||0)+(I?0:P.crossAxis),B=a.reference[p]+a.reference[N]+(I?0:((O=c.offset)==null?void 0:O[p])||0)-(I?P.crossAxis:0);x<D?x=D:x>B&&(x=B)}return{[v]:S,[p]:x}}}},fq=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:a,platform:c,elements:l}=e,{apply:d=()=>{},...f}=qr(t,e),m=await tu(e,f),p=Kr(r),v=lc(r),S=Ji(r)==="y",{width:x,height:b}=a.floating;let P,k;p==="top"||p==="bottom"?(P=p,k=v===(await(c.isRTL==null?void 0:c.isRTL(l.floating))?"start":"end")?"left":"right"):(k=p,P=v==="end"?"top":"bottom");const O=b-m.top-m.bottom,N=x-m.left-m.right,I=Ns(b-m[P],O),D=Ns(x-m[k],N),B=!e.middlewareData.shift;let H=I,z=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(z=N),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(H=O),B&&!v){const ae=ri(m.left,0),oe=ri(m.right,0),fe=ri(m.top,0),ke=ri(m.bottom,0);S?z=x-2*(ae!==0||oe!==0?ae+oe:ri(m.left,m.right)):H=b-2*(fe!==0||ke!==0?fe+ke:ri(m.top,m.bottom))}await d({...e,availableWidth:z,availableHeight:H});const X=await c.getDimensions(l.floating);return x!==X.width||b!==X.height?{reset:{rects:!0}}:{}}}};function rh(){return typeof window<"u"}function uc(t){return rD(t)?(t.nodeName||"").toLowerCase():"#document"}function oi(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function fr(t){var e;return(e=(rD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function rD(t){return rh()?t instanceof Node||t instanceof oi(t).Node:!1}function Bi(t){return rh()?t instanceof Element||t instanceof oi(t).Element:!1}function ar(t){return rh()?t instanceof HTMLElement||t instanceof oi(t).HTMLElement:!1}function OE(t){return!rh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof oi(t).ShadowRoot}const hq=new Set(["inline","contents"]);function hu(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Fi(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!hq.has(r)}const mq=new Set(["table","td","th"]);function pq(t){return mq.has(uc(t))}const gq=[":popover-open",":modal"];function sh(t){return gq.some(e=>{try{return t.matches(e)}catch{return!1}})}const vq=["transform","translate","scale","rotate","perspective"],yq=["transform","translate","scale","rotate","perspective","filter"],bq=["paint","layout","strict","content"];function Qy(t){const e=eb(),n=Bi(t)?Fi(t):t;return vq.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||yq.some(i=>(n.willChange||"").includes(i))||bq.some(i=>(n.contain||"").includes(i))}function Sq(t){let e=Is(t);for(;ar(e)&&!Xo(e);){if(Qy(e))return e;if(sh(e))return null;e=Is(e)}return null}function eb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Tq=new Set(["html","body","#document"]);function Xo(t){return Tq.has(uc(t))}function Fi(t){return oi(t).getComputedStyle(t)}function ah(t){return Bi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Is(t){if(uc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||OE(t)&&t.host||fr(t);return OE(e)?e.host:e}function sD(t){const e=Is(t);return Xo(e)?t.ownerDocument?t.ownerDocument.body:t.body:ar(e)&&hu(e)?e:sD(e)}function nu(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=sD(t),a=r===((i=t.ownerDocument)==null?void 0:i.body),c=oi(r);if(a){const l=d0(c);return e.concat(c,c.visualViewport||[],hu(r)?r:[],l&&n?nu(l):[])}return e.concat(r,nu(r,[],n))}function d0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function aD(t){const e=Fi(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=ar(t),a=r?t.offsetWidth:n,c=r?t.offsetHeight:i,l=If(n)!==a||If(i)!==c;return l&&(n=a,i=c),{width:n,height:i,$:l}}function tb(t){return Bi(t)?t:t.contextElement}function Ho(t){const e=tb(t);if(!ar(e))return ir(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:a}=aD(e);let c=(a?If(n.width):n.width)/i,l=(a?If(n.height):n.height)/r;return(!c||!Number.isFinite(c))&&(c=1),(!l||!Number.isFinite(l))&&(l=1),{x:c,y:l}}const xq=ir(0);function oD(t){const e=oi(t);return!eb()||!e.visualViewport?xq:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function wq(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==oi(t)?!1:e}function Ca(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),a=tb(t);let c=ir(1);e&&(i?Bi(i)&&(c=Ho(i)):c=Ho(t));const l=wq(a,n,i)?oD(a):ir(0);let d=(r.left+l.x)/c.x,f=(r.top+l.y)/c.y,m=r.width/c.x,p=r.height/c.y;if(a){const v=oi(a),S=i&&Bi(i)?oi(i):i;let x=v,b=d0(x);for(;b&&i&&S!==x;){const P=Ho(b),k=b.getBoundingClientRect(),O=Fi(b),N=k.left+(b.clientLeft+parseFloat(O.paddingLeft))*P.x,I=k.top+(b.clientTop+parseFloat(O.paddingTop))*P.y;d*=P.x,f*=P.y,m*=P.x,p*=P.y,d+=N,f+=I,x=oi(b),b=d0(x)}}return Lf({width:m,height:p,x:d,y:f})}function nb(t,e){const n=ah(t).scrollLeft;return e?e.left+n:Ca(fr(t)).left+n}function cD(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:nb(t,i)),a=i.top+e.scrollTop;return{x:r,y:a}}function Cq(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const a=r==="fixed",c=fr(i),l=e?sh(e.floating):!1;if(i===c||l&&a)return n;let d={scrollLeft:0,scrollTop:0},f=ir(1);const m=ir(0),p=ar(i);if((p||!p&&!a)&&((uc(i)!=="body"||hu(c))&&(d=ah(i)),ar(i))){const S=Ca(i);f=Ho(i),m.x=S.x+i.clientLeft,m.y=S.y+i.clientTop}const v=c&&!p&&!a?cD(c,d,!0):ir(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-d.scrollLeft*f.x+m.x+v.x,y:n.y*f.y-d.scrollTop*f.y+m.y+v.y}}function Eq(t){return Array.from(t.getClientRects())}function kq(t){const e=fr(t),n=ah(t),i=t.ownerDocument.body,r=ri(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),a=ri(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let c=-n.scrollLeft+nb(t);const l=-n.scrollTop;return Fi(i).direction==="rtl"&&(c+=ri(e.clientWidth,i.clientWidth)-r),{width:r,height:a,x:c,y:l}}function Rq(t,e){const n=oi(t),i=fr(t),r=n.visualViewport;let a=i.clientWidth,c=i.clientHeight,l=0,d=0;if(r){a=r.width,c=r.height;const f=eb();(!f||f&&e==="fixed")&&(l=r.offsetLeft,d=r.offsetTop)}return{width:a,height:c,x:l,y:d}}const Aq=new Set(["absolute","fixed"]);function Pq(t,e){const n=Ca(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,a=ar(t)?Ho(t):ir(1),c=t.clientWidth*a.x,l=t.clientHeight*a.y,d=r*a.x,f=i*a.y;return{width:c,height:l,x:d,y:f}}function NE(t,e,n){let i;if(e==="viewport")i=Rq(t,n);else if(e==="document")i=kq(fr(t));else if(Bi(e))i=Pq(e,n);else{const r=oD(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Lf(i)}function lD(t,e){const n=Is(t);return n===e||!Bi(n)||Xo(n)?!1:Fi(n).position==="fixed"||lD(n,e)}function _q(t,e){const n=e.get(t);if(n)return n;let i=nu(t,[],!1).filter(l=>Bi(l)&&uc(l)!=="body"),r=null;const a=Fi(t).position==="fixed";let c=a?Is(t):t;for(;Bi(c)&&!Xo(c);){const l=Fi(c),d=Qy(c);!d&&l.position==="fixed"&&(r=null),(a?!d&&!r:!d&&l.position==="static"&&!!r&&Aq.has(r.position)||hu(c)&&!d&&lD(t,c))?i=i.filter(m=>m!==c):r=l,c=Is(c)}return e.set(t,i),i}function Dq(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const c=[...n==="clippingAncestors"?sh(e)?[]:_q(e,this._c):[].concat(n),i],l=c[0],d=c.reduce((f,m)=>{const p=NE(e,m,r);return f.top=ri(p.top,f.top),f.right=Ns(p.right,f.right),f.bottom=Ns(p.bottom,f.bottom),f.left=ri(p.left,f.left),f},NE(e,l,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function Mq(t){const{width:e,height:n}=aD(t);return{width:e,height:n}}function Oq(t,e,n){const i=ar(e),r=fr(e),a=n==="fixed",c=Ca(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const d=ir(0);function f(){d.x=nb(r)}if(i||!i&&!a)if((uc(e)!=="body"||hu(r))&&(l=ah(e)),i){const S=Ca(e,!0,a,e);d.x=S.x+e.clientLeft,d.y=S.y+e.clientTop}else r&&f();a&&!i&&r&&f();const m=r&&!i&&!a?cD(r,l):ir(0),p=c.left+l.scrollLeft-d.x-m.x,v=c.top+l.scrollTop-d.y-m.y;return{x:p,y:v,width:c.width,height:c.height}}function kg(t){return Fi(t).position==="static"}function IE(t,e){if(!ar(t)||Fi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return fr(t)===n&&(n=n.ownerDocument.body),n}function uD(t,e){const n=oi(t);if(sh(t))return n;if(!ar(t)){let r=Is(t);for(;r&&!Xo(r);){if(Bi(r)&&!kg(r))return r;r=Is(r)}return n}let i=IE(t,e);for(;i&&pq(i)&&kg(i);)i=IE(i,e);return i&&Xo(i)&&kg(i)&&!Qy(i)?n:i||Sq(t)||n}const Nq=async function(t){const e=this.getOffsetParent||uD,n=this.getDimensions,i=await n(t.floating);return{reference:Oq(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function Iq(t){return Fi(t).direction==="rtl"}const Uq={convertOffsetParentRelativeRectToViewportRelativeRect:Cq,getDocumentElement:fr,getClippingRect:Dq,getOffsetParent:uD,getElementRects:Nq,getClientRects:Eq,getDimensions:Mq,getScale:Ho,isElement:Bi,isRTL:Iq};function dD(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Lq(t,e){let n=null,i;const r=fr(t);function a(){var l;clearTimeout(i),(l=n)==null||l.disconnect(),n=null}function c(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),a();const f=t.getBoundingClientRect(),{left:m,top:p,width:v,height:S}=f;if(l||e(),!v||!S)return;const x=Vd(p),b=Vd(r.clientWidth-(m+v)),P=Vd(r.clientHeight-(p+S)),k=Vd(m),N={rootMargin:-x+"px "+-b+"px "+-P+"px "+-k+"px",threshold:ri(0,Ns(1,d))||1};let I=!0;function D(B){const H=B[0].intersectionRatio;if(H!==d){if(!I)return c();H?c(!1,H):i=setTimeout(()=>{c(!1,1e-7)},1e3)}H===1&&!dD(f,t.getBoundingClientRect())&&c(),I=!1}try{n=new IntersectionObserver(D,{...N,root:r.ownerDocument})}catch{n=new IntersectionObserver(D,N)}n.observe(t)}return c(!0),a}function jq(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,f=tb(t),m=r||a?[...f?nu(f):[],...nu(e)]:[];m.forEach(k=>{r&&k.addEventListener("scroll",n,{passive:!0}),a&&k.addEventListener("resize",n)});const p=f&&l?Lq(f,n):null;let v=-1,S=null;c&&(S=new ResizeObserver(k=>{let[O]=k;O&&O.target===f&&S&&(S.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var N;(N=S)==null||N.observe(e)})),n()}),f&&!d&&S.observe(f),S.observe(e));let x,b=d?Ca(t):null;d&&P();function P(){const k=Ca(t);b&&!dD(b,k)&&n(),b=k,x=requestAnimationFrame(P)}return n(),()=>{var k;m.forEach(O=>{r&&O.removeEventListener("scroll",n),a&&O.removeEventListener("resize",n)}),p?.(),(k=S)==null||k.disconnect(),S=null,d&&cancelAnimationFrame(x)}}const Bq=lq,Fq=uq,Vq=aq,zq=fq,Hq=oq,UE=sq,qq=dq,Kq=(t,e,n)=>{const i=new Map,r={platform:Uq,...n},a={...r.platform,_c:i};return rq(t,e,{...r,platform:a})};var Gq=typeof document<"u",Yq=function(){},mf=Gq?T.useLayoutEffect:Yq;function jf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!jf(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!(a==="_owner"&&t.$$typeof)&&!jf(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function fD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function LE(t,e){const n=fD(t);return Math.round(e*n)/n}function Rg(t){const e=T.useRef(t);return mf(()=>{e.current=t}),e}function Wq(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:a,floating:c}={},transform:l=!0,whileElementsMounted:d,open:f}=t,[m,p]=T.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,S]=T.useState(i);jf(v,i)||S(i);const[x,b]=T.useState(null),[P,k]=T.useState(null),O=T.useCallback(J=>{J!==B.current&&(B.current=J,b(J))},[]),N=T.useCallback(J=>{J!==H.current&&(H.current=J,k(J))},[]),I=a||x,D=c||P,B=T.useRef(null),H=T.useRef(null),z=T.useRef(m),X=d!=null,ae=Rg(d),oe=Rg(r),fe=Rg(f),ke=T.useCallback(()=>{if(!B.current||!H.current)return;const J={placement:e,strategy:n,middleware:v};oe.current&&(J.platform=oe.current),Kq(B.current,H.current,J).then(Pe=>{const V={...Pe,isPositioned:fe.current!==!1};Ae.current&&!jf(z.current,V)&&(z.current=V,su.flushSync(()=>{p(V)}))})},[v,e,n,oe,fe]);mf(()=>{f===!1&&z.current.isPositioned&&(z.current.isPositioned=!1,p(J=>({...J,isPositioned:!1})))},[f]);const Ae=T.useRef(!1);mf(()=>(Ae.current=!0,()=>{Ae.current=!1}),[]),mf(()=>{if(I&&(B.current=I),D&&(H.current=D),I&&D){if(ae.current)return ae.current(I,D,ke);ke()}},[I,D,ke,ae,X]);const Oe=T.useMemo(()=>({reference:B,floating:H,setReference:O,setFloating:N}),[O,N]),G=T.useMemo(()=>({reference:I,floating:D}),[I,D]),ie=T.useMemo(()=>{const J={position:n,left:0,top:0};if(!G.floating)return J;const Pe=LE(G.floating,m.x),V=LE(G.floating,m.y);return l?{...J,transform:"translate("+Pe+"px, "+V+"px)",...fD(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Pe,top:V}},[n,l,G.floating,m.x,m.y]);return T.useMemo(()=>({...m,update:ke,refs:Oe,elements:G,floatingStyles:ie}),[m,ke,Oe,G,ie])}const $q=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?UE({element:i.current,padding:r}).fn(n):{}:i?UE({element:i,padding:r}).fn(n):{}}}},Xq=(t,e)=>({...Bq(t),options:[t,e]}),Zq=(t,e)=>({...Fq(t),options:[t,e]}),Jq=(t,e)=>({...qq(t),options:[t,e]}),Qq=(t,e)=>({...Vq(t),options:[t,e]}),eK=(t,e)=>({...zq(t),options:[t,e]}),tK=(t,e)=>({...Hq(t),options:[t,e]}),nK=(t,e)=>({...$q(t),options:[t,e]});var iK="Arrow",hD=T.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...a}=t;return C.jsx(Kt.svg,{...a,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:C.jsx("polygon",{points:"0,0 30,0 15,10"})})});hD.displayName=iK;var rK=hD;function sK(t){const[e,n]=T.useState(void 0);return Wn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const a=r[0];let c,l;if("borderBoxSize"in a){const d=a.borderBoxSize,f=Array.isArray(d)?d[0]:d;c=f.inlineSize,l=f.blockSize}else c=t.offsetWidth,l=t.offsetHeight;n({width:c,height:l})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var ib="Popper",[mD,pD]=Wy(ib),[aK,gD]=mD(ib),vD=t=>{const{__scopePopper:e,children:n}=t,[i,r]=T.useState(null);return C.jsx(aK,{scope:e,anchor:i,onAnchorChange:r,children:n})};vD.displayName=ib;var yD="PopperAnchor",bD=T.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,a=gD(yD,n),c=T.useRef(null),l=An(e,c);return T.useEffect(()=>{a.onAnchorChange(i?.current||c.current)}),i?null:C.jsx(Kt.div,{...r,ref:l})});bD.displayName=yD;var rb="PopperContent",[oK,cK]=mD(rb),SD=T.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:a="center",alignOffset:c=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:S="optimized",onPlaced:x,...b}=t,P=gD(rb,n),[k,O]=T.useState(null),N=An(e,be=>O(be)),[I,D]=T.useState(null),B=sK(I),H=B?.width??0,z=B?.height??0,X=i+(a!=="center"?"-"+a:""),ae=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},oe=Array.isArray(f)?f:[f],fe=oe.length>0,ke={padding:ae,boundary:oe.filter(uK),altBoundary:fe},{refs:Ae,floatingStyles:Oe,placement:G,isPositioned:ie,middlewareData:J}=Wq({strategy:"fixed",placement:X,whileElementsMounted:(...be)=>jq(...be,{animationFrame:S==="always"}),elements:{reference:P.anchor},middleware:[Xq({mainAxis:r+z,alignmentAxis:c}),d&&Zq({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?Jq():void 0,...ke}),d&&Qq({...ke}),eK({...ke,apply:({elements:be,rects:Ce,availableWidth:Ve,availableHeight:qe})=>{const{width:Xe,height:Ge}=Ce.reference,wt=be.floating.style;wt.setProperty("--radix-popper-available-width",`${Ve}px`),wt.setProperty("--radix-popper-available-height",`${qe}px`),wt.setProperty("--radix-popper-anchor-width",`${Xe}px`),wt.setProperty("--radix-popper-anchor-height",`${Ge}px`)}}),I&&nK({element:I,padding:l}),dK({arrowWidth:H,arrowHeight:z}),v&&tK({strategy:"referenceHidden",...ke})]}),[Pe,V]=wD(G),Q=wa(x);Wn(()=>{ie&&Q?.()},[ie,Q]);const me=J.arrow?.x,le=J.arrow?.y,Te=J.arrow?.centerOffset!==0,[Me,_e]=T.useState();return Wn(()=>{k&&_e(window.getComputedStyle(k).zIndex)},[k]),C.jsx("div",{ref:Ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...Oe,transform:ie?Oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[J.transformOrigin?.x,J.transformOrigin?.y].join(" "),...J.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:C.jsx(oK,{scope:n,placedSide:Pe,onArrowChange:D,arrowX:me,arrowY:le,shouldHideArrow:Te,children:C.jsx(Kt.div,{"data-side":Pe,"data-align":V,...b,ref:N,style:{...b.style,animation:ie?void 0:"none"}})})})});SD.displayName=rb;var TD="PopperArrow",lK={top:"bottom",right:"left",bottom:"top",left:"right"},xD=T.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,a=cK(TD,i),c=lK[a.placedSide];return C.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:C.jsx(rK,{...r,ref:n,style:{...r.style,display:"block"}})})});xD.displayName=TD;function uK(t){return t!==null}var dK=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,c=r.arrow?.centerOffset!==0,l=c?0:t.arrowWidth,d=c?0:t.arrowHeight,[f,m]=wD(n),p={start:"0%",center:"50%",end:"100%"}[m],v=(r.arrow?.x??0)+l/2,S=(r.arrow?.y??0)+d/2;let x="",b="";return f==="bottom"?(x=c?p:`${v}px`,b=`${-d}px`):f==="top"?(x=c?p:`${v}px`,b=`${i.floating.height+d}px`):f==="right"?(x=`${-d}px`,b=c?p:`${S}px`):f==="left"&&(x=`${i.floating.width+d}px`,b=c?p:`${S}px`),{data:{x,y:b}}}});function wD(t){const[e,n="center"]=t.split("-");return[e,n]}var fK=vD,hK=bD,mK=SD,pK=xD,gK="Portal",CD=T.forwardRef((t,e)=>{const{container:n,...i}=t,[r,a]=T.useState(!1);Wn(()=>a(!0),[]);const c=n||r&&globalThis?.document?.body;return c?uk.createPortal(C.jsx(Kt.div,{...i,ref:e}),c):null});CD.displayName=gK;function vK(t){const e=T.useRef({value:t,previous:t});return T.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var ED=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yK="VisuallyHidden",bK=T.forwardRef((t,e)=>C.jsx(Kt.span,{...t,ref:e,style:{...ED,...t.style}}));bK.displayName=yK;var SK=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},xo=new WeakMap,zd=new WeakMap,Hd={},Ag=0,kD=function(t){return t&&(t.host||kD(t.parentNode))},TK=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=kD(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},xK=function(t,e,n,i){var r=TK(e,Array.isArray(t)?t:[t]);Hd[n]||(Hd[n]=new WeakMap);var a=Hd[n],c=[],l=new Set,d=new Set(r),f=function(p){!p||l.has(p)||(l.add(p),f(p.parentNode))};r.forEach(f);var m=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(v){if(l.has(v))m(v);else try{var S=v.getAttribute(i),x=S!==null&&S!=="false",b=(xo.get(v)||0)+1,P=(a.get(v)||0)+1;xo.set(v,b),a.set(v,P),c.push(v),b===1&&x&&zd.set(v,!0),P===1&&v.setAttribute(n,"true"),x||v.setAttribute(i,"true")}catch(k){console.error("aria-hidden: cannot operate on ",v,k)}})};return m(e),l.clear(),Ag++,function(){c.forEach(function(p){var v=xo.get(p)-1,S=a.get(p)-1;xo.set(p,v),a.set(p,S),v||(zd.has(p)||p.removeAttribute(i),zd.delete(p)),S||p.removeAttribute(n)}),Ag--,Ag||(xo=new WeakMap,xo=new WeakMap,zd=new WeakMap,Hd={})}},wK=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=SK(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),xK(i,r,n,"aria-hidden")):function(){return null}},Es=function(){return Es=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Es.apply(this,arguments)};function CK(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function EK(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}var pf="right-scroll-bar-position",gf="width-before-scroll-bar",kK="with-scroll-bars-hidden",RK="--removed-body-scroll-bar-size";function Pg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function AK(t,e){var n=T.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var PK=typeof window<"u"?T.useLayoutEffect:T.useEffect,jE=new WeakMap;function _K(t,e){var n=AK(null,function(i){return t.forEach(function(r){return Pg(r,i)})});return PK(function(){var i=jE.get(n);if(i){var r=new Set(i),a=new Set(t),c=n.current;r.forEach(function(l){a.has(l)||Pg(l,null)}),a.forEach(function(l){r.has(l)||Pg(l,c)})}jE.set(n,t)},[t]),n}var Bf=function(){return Bf=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bf.apply(this,arguments)};function DK(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function MK(t){return t}function OK(t,e){e===void 0&&(e=MK);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var c=e(a,i);return n.push(c),function(){n=n.filter(function(l){return l!==c})}},assignSyncMedium:function(a){for(i=!0;n.length;){var c=n;n=[],c.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){i=!0;var c=[];if(n.length){var l=n;n=[],l.forEach(a),c=n}var d=function(){var m=c;c=[],m.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),n={push:function(m){c.push(m),f()},filter:function(m){return c=c.filter(m),n}}}};return r}function NK(t){t===void 0&&(t={});var e=OK(null);return e.options=Bf({async:!0,ssr:!1},t),e}var RD=function(t){var e=t.sideCar,n=DK(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return T.createElement(i,Bf({},n))};RD.isSideCarExport=!0;function IK(t,e){return t.useMedium(e),RD}var AD=NK(),_g=function(){},oh=T.forwardRef(function(t,e){var n=T.useRef(null),i=T.useState({onScrollCapture:_g,onWheelCapture:_g,onTouchMoveCapture:_g}),r=i[0],a=i[1],c=t.forwardProps,l=t.children,d=t.className,f=t.removeScrollBar,m=t.enabled,p=t.shards,v=t.sideCar,S=t.noRelative,x=t.noIsolation,b=t.inert,P=t.allowPinchZoom,k=t.as,O=k===void 0?"div":k,N=t.gapMode,I=CK(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=v,B=_K([n,e]),H=Es(Es({},I),r);return T.createElement(T.Fragment,null,m&&T.createElement(D,{sideCar:AD,removeScrollBar:f,shards:p,noRelative:S,noIsolation:x,inert:b,setCallbacks:a,allowPinchZoom:!!P,lockRef:n,gapMode:N}),c?T.cloneElement(T.Children.only(l),Es(Es({},H),{ref:B})):T.createElement(O,Es({},H,{className:d,ref:B}),l))});oh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};oh.classNames={fullWidth:gf,zeroRight:pf};var UK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function LK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=UK();return e&&t.setAttribute("nonce",e),t}function jK(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function BK(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var FK=function(){var t=0,e=null;return{add:function(n){t==0&&(e=LK())&&(jK(e,n),BK(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},VK=function(){var t=FK();return function(e,n){T.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},PD=function(){var t=VK(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},zK={left:0,top:0,right:0,gap:0},Dg=function(t){return parseInt(t||"",10)||0},HK=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[Dg(n),Dg(i),Dg(r)]},qK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return zK;var e=HK(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},KK=PD(),qo="data-scroll-locked",GK=function(t,e,n,i){var r=t.left,a=t.top,c=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(kK,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(l,"px ").concat(i,`;
  }
  body[`).concat(qo,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(pf,` {
    right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(gf,` {
    margin-right: `).concat(l,"px ").concat(i,`;
  }
  
  .`).concat(pf," .").concat(pf,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(gf," .").concat(gf,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(qo,`] {
    `).concat(RK,": ").concat(l,`px;
  }
`)},BE=function(){var t=parseInt(document.body.getAttribute(qo)||"0",10);return isFinite(t)?t:0},YK=function(){T.useEffect(function(){return document.body.setAttribute(qo,(BE()+1).toString()),function(){var t=BE()-1;t<=0?document.body.removeAttribute(qo):document.body.setAttribute(qo,t.toString())}},[])},WK=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;YK();var a=T.useMemo(function(){return qK(r)},[r]);return T.createElement(KK,{styles:GK(a,!e,r,n?"":"!important")})},f0=!1;if(typeof window<"u")try{var qd=Object.defineProperty({},"passive",{get:function(){return f0=!0,!0}});window.addEventListener("test",qd,qd),window.removeEventListener("test",qd,qd)}catch{f0=!1}var wo=f0?{passive:!1}:!1,$K=function(t){return t.tagName==="TEXTAREA"},_D=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!$K(t)&&n[e]==="visible")},XK=function(t){return _D(t,"overflowY")},ZK=function(t){return _D(t,"overflowX")},FE=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=DD(t,i);if(r){var a=MD(t,i),c=a[1],l=a[2];if(c>l)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},JK=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},QK=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},DD=function(t,e){return t==="v"?XK(e):ZK(e)},MD=function(t,e){return t==="v"?JK(e):QK(e)},eG=function(t,e){return t==="h"&&e==="rtl"?-1:1},tG=function(t,e,n,i,r){var a=eG(t,window.getComputedStyle(e).direction),c=a*i,l=n.target,d=e.contains(l),f=!1,m=c>0,p=0,v=0;do{if(!l)break;var S=MD(t,l),x=S[0],b=S[1],P=S[2],k=b-P-a*x;(x||k)&&DD(t,l)&&(p+=k,v+=x);var O=l.parentNode;l=O&&O.nodeType===Node.DOCUMENT_FRAGMENT_NODE?O.host:O}while(!d&&l!==document.body||d&&(e.contains(l)||e===l));return(m&&Math.abs(p)<1||!m&&Math.abs(v)<1)&&(f=!0),f},Kd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},VE=function(t){return[t.deltaX,t.deltaY]},zE=function(t){return t&&"current"in t?t.current:t},nG=function(t,e){return t[0]===e[0]&&t[1]===e[1]},iG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},rG=0,Co=[];function sG(t){var e=T.useRef([]),n=T.useRef([0,0]),i=T.useRef(),r=T.useState(rG++)[0],a=T.useState(PD)[0],c=T.useRef(t);T.useEffect(function(){c.current=t},[t]),T.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var b=EK([t.lockRef.current],(t.shards||[]).map(zE),!0).filter(Boolean);return b.forEach(function(P){return P.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),b.forEach(function(P){return P.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var l=T.useCallback(function(b,P){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!c.current.allowPinchZoom;var k=Kd(b),O=n.current,N="deltaX"in b?b.deltaX:O[0]-k[0],I="deltaY"in b?b.deltaY:O[1]-k[1],D,B=b.target,H=Math.abs(N)>Math.abs(I)?"h":"v";if("touches"in b&&H==="h"&&B.type==="range")return!1;var z=FE(H,B);if(!z)return!0;if(z?D=H:(D=H==="v"?"h":"v",z=FE(H,B)),!z)return!1;if(!i.current&&"changedTouches"in b&&(N||I)&&(i.current=D),!D)return!0;var X=i.current||D;return tG(X,P,b,X==="h"?N:I)},[]),d=T.useCallback(function(b){var P=b;if(!(!Co.length||Co[Co.length-1]!==a)){var k="deltaY"in P?VE(P):Kd(P),O=e.current.filter(function(D){return D.name===P.type&&(D.target===P.target||P.target===D.shadowParent)&&nG(D.delta,k)})[0];if(O&&O.should){P.cancelable&&P.preventDefault();return}if(!O){var N=(c.current.shards||[]).map(zE).filter(Boolean).filter(function(D){return D.contains(P.target)}),I=N.length>0?l(P,N[0]):!c.current.noIsolation;I&&P.cancelable&&P.preventDefault()}}},[]),f=T.useCallback(function(b,P,k,O){var N={name:b,delta:P,target:k,should:O,shadowParent:aG(k)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(I){return I!==N})},1)},[]),m=T.useCallback(function(b){n.current=Kd(b),i.current=void 0},[]),p=T.useCallback(function(b){f(b.type,VE(b),b.target,l(b,t.lockRef.current))},[]),v=T.useCallback(function(b){f(b.type,Kd(b),b.target,l(b,t.lockRef.current))},[]);T.useEffect(function(){return Co.push(a),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",d,wo),document.addEventListener("touchmove",d,wo),document.addEventListener("touchstart",m,wo),function(){Co=Co.filter(function(b){return b!==a}),document.removeEventListener("wheel",d,wo),document.removeEventListener("touchmove",d,wo),document.removeEventListener("touchstart",m,wo)}},[]);var S=t.removeScrollBar,x=t.inert;return T.createElement(T.Fragment,null,x?T.createElement(a,{styles:iG(r)}):null,S?T.createElement(WK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function aG(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const oG=IK(AD,sG);var OD=T.forwardRef(function(t,e){return T.createElement(oh,Es({},t,{ref:e,sideCar:oG}))});OD.classNames=oh.classNames;var cG=[" ","Enter","ArrowUp","ArrowDown"],lG=[" ","Enter"],Ea="Select",[ch,lh,uG]=kH(Ea),[dc,MY]=Wy(Ea,[uG,pD]),uh=pD(),[dG,Fs]=dc(Ea),[fG,hG]=dc(Ea),ND=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:a,value:c,defaultValue:l,onValueChange:d,dir:f,name:m,autoComplete:p,disabled:v,required:S,form:x}=t,b=uh(e),[P,k]=T.useState(null),[O,N]=T.useState(null),[I,D]=T.useState(!1),B=AH(f),[H,z]=o0({prop:i,defaultProp:r??!1,onChange:a,caller:Ea}),[X,ae]=o0({prop:c,defaultProp:l,onChange:d,caller:Ea}),oe=T.useRef(null),fe=P?x||!!P.closest("form"):!0,[ke,Ae]=T.useState(new Set),Oe=Array.from(ke).map(G=>G.props.value).join(";");return C.jsx(fK,{...b,children:C.jsxs(dG,{required:S,scope:e,trigger:P,onTriggerChange:k,valueNode:O,onValueNodeChange:N,valueNodeHasChildren:I,onValueNodeHasChildrenChange:D,contentId:$y(),value:X,onValueChange:ae,open:H,onOpenChange:z,dir:B,triggerPointerDownPosRef:oe,disabled:v,children:[C.jsx(ch.Provider,{scope:e,children:C.jsx(fG,{scope:t.__scopeSelect,onNativeOptionAdd:T.useCallback(G=>{Ae(ie=>new Set(ie).add(G))},[]),onNativeOptionRemove:T.useCallback(G=>{Ae(ie=>{const J=new Set(ie);return J.delete(G),J})},[]),children:n})}),fe?C.jsxs(nM,{"aria-hidden":!0,required:S,tabIndex:-1,name:m,autoComplete:p,value:X,onChange:G=>ae(G.target.value),disabled:v,form:x,children:[X===void 0?C.jsx("option",{value:""}):null,Array.from(ke)]},Oe):null]})})};ND.displayName=Ea;var ID="SelectTrigger",UD=T.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,a=uh(n),c=Fs(ID,n),l=c.disabled||i,d=An(e,c.onTriggerChange),f=lh(n),m=T.useRef("touch"),[p,v,S]=rM(b=>{const P=f().filter(N=>!N.disabled),k=P.find(N=>N.value===c.value),O=sM(P,b,k);O!==void 0&&c.onValueChange(O.value)}),x=b=>{l||(c.onOpenChange(!0),S()),b&&(c.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return C.jsx(hK,{asChild:!0,...a,children:C.jsx(Kt.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":iM(c.value)?"":void 0,...r,ref:d,onClick:Jt(r.onClick,b=>{b.currentTarget.focus(),m.current!=="mouse"&&x(b)}),onPointerDown:Jt(r.onPointerDown,b=>{m.current=b.pointerType;const P=b.target;P.hasPointerCapture(b.pointerId)&&P.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(x(b),b.preventDefault())}),onKeyDown:Jt(r.onKeyDown,b=>{const P=p.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&v(b.key),!(P&&b.key===" ")&&cG.includes(b.key)&&(x(),b.preventDefault())})})})});UD.displayName=ID;var LD="SelectValue",jD=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:a,placeholder:c="",...l}=t,d=Fs(LD,n),{onValueNodeHasChildrenChange:f}=d,m=a!==void 0,p=An(e,d.onValueNodeChange);return Wn(()=>{f(m)},[f,m]),C.jsx(Kt.span,{...l,ref:p,style:{pointerEvents:"none"},children:iM(d.value)?C.jsx(C.Fragment,{children:c}):a})});jD.displayName=LD;var mG="SelectIcon",BD=T.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return C.jsx(Kt.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});BD.displayName=mG;var pG="SelectPortal",FD=t=>C.jsx(CD,{asChild:!0,...t});FD.displayName=pG;var ka="SelectContent",VD=T.forwardRef((t,e)=>{const n=Fs(ka,t.__scopeSelect),[i,r]=T.useState();if(Wn(()=>{r(new DocumentFragment)},[]),!n.open){const a=i;return a?su.createPortal(C.jsx(zD,{scope:t.__scopeSelect,children:C.jsx(ch.Slot,{scope:t.__scopeSelect,children:C.jsx("div",{children:t.children})})}),a):null}return C.jsx(HD,{...t,ref:e})});VD.displayName=ka;var Mi=10,[zD,Vs]=dc(ka),gG="SelectContentImpl",vG=eu("SelectContent.RemoveScroll"),HD=T.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:a,onPointerDownOutside:c,side:l,sideOffset:d,align:f,alignOffset:m,arrowPadding:p,collisionBoundary:v,collisionPadding:S,sticky:x,hideWhenDetached:b,avoidCollisions:P,...k}=t,O=Fs(ka,n),[N,I]=T.useState(null),[D,B]=T.useState(null),H=An(e,be=>I(be)),[z,X]=T.useState(null),[ae,oe]=T.useState(null),fe=lh(n),[ke,Ae]=T.useState(!1),Oe=T.useRef(!1);T.useEffect(()=>{if(N)return wK(N)},[N]),LH();const G=T.useCallback(be=>{const[Ce,...Ve]=fe().map(Ge=>Ge.ref.current),[qe]=Ve.slice(-1),Xe=document.activeElement;for(const Ge of be)if(Ge===Xe||(Ge?.scrollIntoView({block:"nearest"}),Ge===Ce&&D&&(D.scrollTop=0),Ge===qe&&D&&(D.scrollTop=D.scrollHeight),Ge?.focus(),document.activeElement!==Xe))return},[fe,D]),ie=T.useCallback(()=>G([z,N]),[G,z,N]);T.useEffect(()=>{ke&&ie()},[ke,ie]);const{onOpenChange:J,triggerPointerDownPosRef:Pe}=O;T.useEffect(()=>{if(N){let be={x:0,y:0};const Ce=qe=>{be={x:Math.abs(Math.round(qe.pageX)-(Pe.current?.x??0)),y:Math.abs(Math.round(qe.pageY)-(Pe.current?.y??0))}},Ve=qe=>{be.x<=10&&be.y<=10?qe.preventDefault():N.contains(qe.target)||J(!1),document.removeEventListener("pointermove",Ce),Pe.current=null};return Pe.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",Ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",Ve,{capture:!0})}}},[N,J,Pe]),T.useEffect(()=>{const be=()=>J(!1);return window.addEventListener("blur",be),window.addEventListener("resize",be),()=>{window.removeEventListener("blur",be),window.removeEventListener("resize",be)}},[J]);const[V,Q]=rM(be=>{const Ce=fe().filter(Xe=>!Xe.disabled),Ve=Ce.find(Xe=>Xe.ref.current===document.activeElement),qe=sM(Ce,be,Ve);qe&&setTimeout(()=>qe.ref.current.focus())}),me=T.useCallback((be,Ce,Ve)=>{const qe=!Oe.current&&!Ve;(O.value!==void 0&&O.value===Ce||qe)&&(X(be),qe&&(Oe.current=!0))},[O.value]),le=T.useCallback(()=>N?.focus(),[N]),Te=T.useCallback((be,Ce,Ve)=>{const qe=!Oe.current&&!Ve;(O.value!==void 0&&O.value===Ce||qe)&&oe(be)},[O.value]),Me=i==="popper"?h0:qD,_e=Me===h0?{side:l,sideOffset:d,align:f,alignOffset:m,arrowPadding:p,collisionBoundary:v,collisionPadding:S,sticky:x,hideWhenDetached:b,avoidCollisions:P}:{};return C.jsx(zD,{scope:n,content:N,viewport:D,onViewportChange:B,itemRefCallback:me,selectedItem:z,onItemLeave:le,itemTextRefCallback:Te,focusSelectedItem:ie,selectedItemText:ae,position:i,isPositioned:ke,searchRef:V,children:C.jsx(OD,{as:vG,allowPinchZoom:!0,children:C.jsx(eD,{asChild:!0,trapped:O.open,onMountAutoFocus:be=>{be.preventDefault()},onUnmountAutoFocus:Jt(r,be=>{O.trigger?.focus({preventScroll:!0}),be.preventDefault()}),children:C.jsx(J_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:be=>be.preventDefault(),onDismiss:()=>O.onOpenChange(!1),children:C.jsx(Me,{role:"listbox",id:O.contentId,"data-state":O.open?"open":"closed",dir:O.dir,onContextMenu:be=>be.preventDefault(),...k,..._e,onPlaced:()=>Ae(!0),ref:H,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:Jt(k.onKeyDown,be=>{const Ce=be.ctrlKey||be.altKey||be.metaKey;if(be.key==="Tab"&&be.preventDefault(),!Ce&&be.key.length===1&&Q(be.key),["ArrowUp","ArrowDown","Home","End"].includes(be.key)){let qe=fe().filter(Xe=>!Xe.disabled).map(Xe=>Xe.ref.current);if(["ArrowUp","End"].includes(be.key)&&(qe=qe.slice().reverse()),["ArrowUp","ArrowDown"].includes(be.key)){const Xe=be.target,Ge=qe.indexOf(Xe);qe=qe.slice(Ge+1)}setTimeout(()=>G(qe)),be.preventDefault()}})})})})})})});HD.displayName=gG;var yG="SelectItemAlignedPosition",qD=T.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,a=Fs(ka,n),c=Vs(ka,n),[l,d]=T.useState(null),[f,m]=T.useState(null),p=An(e,H=>m(H)),v=lh(n),S=T.useRef(!1),x=T.useRef(!0),{viewport:b,selectedItem:P,selectedItemText:k,focusSelectedItem:O}=c,N=T.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&f&&b&&P&&k){const H=a.trigger.getBoundingClientRect(),z=f.getBoundingClientRect(),X=a.valueNode.getBoundingClientRect(),ae=k.getBoundingClientRect();if(a.dir!=="rtl"){const Xe=ae.left-z.left,Ge=X.left-Xe,wt=H.left-Ge,Ut=H.width+wt,li=Math.max(Ut,z.width),On=window.innerWidth-Mi,kt=SE(Ge,[Mi,Math.max(Mi,On-li)]);l.style.minWidth=Ut+"px",l.style.left=kt+"px"}else{const Xe=z.right-ae.right,Ge=window.innerWidth-X.right-Xe,wt=window.innerWidth-H.right-Ge,Ut=H.width+wt,li=Math.max(Ut,z.width),On=window.innerWidth-Mi,kt=SE(Ge,[Mi,Math.max(Mi,On-li)]);l.style.minWidth=Ut+"px",l.style.right=kt+"px"}const oe=v(),fe=window.innerHeight-Mi*2,ke=b.scrollHeight,Ae=window.getComputedStyle(f),Oe=parseInt(Ae.borderTopWidth,10),G=parseInt(Ae.paddingTop,10),ie=parseInt(Ae.borderBottomWidth,10),J=parseInt(Ae.paddingBottom,10),Pe=Oe+G+ke+J+ie,V=Math.min(P.offsetHeight*5,Pe),Q=window.getComputedStyle(b),me=parseInt(Q.paddingTop,10),le=parseInt(Q.paddingBottom,10),Te=H.top+H.height/2-Mi,Me=fe-Te,_e=P.offsetHeight/2,be=P.offsetTop+_e,Ce=Oe+G+be,Ve=Pe-Ce;if(Ce<=Te){const Xe=oe.length>0&&P===oe[oe.length-1].ref.current;l.style.bottom="0px";const Ge=f.clientHeight-b.offsetTop-b.offsetHeight,wt=Math.max(Me,_e+(Xe?le:0)+Ge+ie),Ut=Ce+wt;l.style.height=Ut+"px"}else{const Xe=oe.length>0&&P===oe[0].ref.current;l.style.top="0px";const wt=Math.max(Te,Oe+b.offsetTop+(Xe?me:0)+_e)+Ve;l.style.height=wt+"px",b.scrollTop=Ce-Te+b.offsetTop}l.style.margin=`${Mi}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=fe+"px",i?.(),requestAnimationFrame(()=>S.current=!0)}},[v,a.trigger,a.valueNode,l,f,b,P,k,a.dir,i]);Wn(()=>N(),[N]);const[I,D]=T.useState();Wn(()=>{f&&D(window.getComputedStyle(f).zIndex)},[f]);const B=T.useCallback(H=>{H&&x.current===!0&&(N(),O?.(),x.current=!1)},[N,O]);return C.jsx(SG,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:S,onScrollButtonChange:B,children:C.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:C.jsx(Kt.div,{...r,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});qD.displayName=yG;var bG="SelectPopperPosition",h0=T.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Mi,...a}=t,c=uh(n);return C.jsx(mK,{...c,...a,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});h0.displayName=bG;var[SG,sb]=dc(ka,{}),m0="SelectViewport",KD=T.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,a=Vs(m0,n),c=sb(m0,n),l=An(e,a.onViewportChange),d=T.useRef(0);return C.jsxs(C.Fragment,{children:[C.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),C.jsx(ch.Slot,{scope:n,children:C.jsx(Kt.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:Jt(r.onScroll,f=>{const m=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=c;if(v?.current&&p){const S=Math.abs(d.current-m.scrollTop);if(S>0){const x=window.innerHeight-Mi*2,b=parseFloat(p.style.minHeight),P=parseFloat(p.style.height),k=Math.max(b,P);if(k<x){const O=k+S,N=Math.min(x,O),I=O-N;p.style.height=N+"px",p.style.bottom==="0px"&&(m.scrollTop=I>0?I:0,p.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});KD.displayName=m0;var GD="SelectGroup",[TG,xG]=dc(GD),wG=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=$y();return C.jsx(TG,{scope:n,id:r,children:C.jsx(Kt.div,{role:"group","aria-labelledby":r,...i,ref:e})})});wG.displayName=GD;var YD="SelectLabel",CG=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=xG(YD,n);return C.jsx(Kt.div,{id:r.id,...i,ref:e})});CG.displayName=YD;var Ff="SelectItem",[EG,WD]=dc(Ff),$D=T.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:a,...c}=t,l=Fs(Ff,n),d=Vs(Ff,n),f=l.value===i,[m,p]=T.useState(a??""),[v,S]=T.useState(!1),x=An(e,O=>d.itemRefCallback?.(O,i,r)),b=$y(),P=T.useRef("touch"),k=()=>{r||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return C.jsx(EG,{scope:n,value:i,disabled:r,textId:b,isSelected:f,onItemTextChange:T.useCallback(O=>{p(N=>N||(O?.textContent??"").trim())},[]),children:C.jsx(ch.ItemSlot,{scope:n,value:i,disabled:r,textValue:m,children:C.jsx(Kt.div,{role:"option","aria-labelledby":b,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...c,ref:x,onFocus:Jt(c.onFocus,()=>S(!0)),onBlur:Jt(c.onBlur,()=>S(!1)),onClick:Jt(c.onClick,()=>{P.current!=="mouse"&&k()}),onPointerUp:Jt(c.onPointerUp,()=>{P.current==="mouse"&&k()}),onPointerDown:Jt(c.onPointerDown,O=>{P.current=O.pointerType}),onPointerMove:Jt(c.onPointerMove,O=>{P.current=O.pointerType,r?d.onItemLeave?.():P.current==="mouse"&&O.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Jt(c.onPointerLeave,O=>{O.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:Jt(c.onKeyDown,O=>{d.searchRef?.current!==""&&O.key===" "||(lG.includes(O.key)&&k(),O.key===" "&&O.preventDefault())})})})})});$D.displayName=Ff;var _l="SelectItemText",XD=T.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...a}=t,c=Fs(_l,n),l=Vs(_l,n),d=WD(_l,n),f=hG(_l,n),[m,p]=T.useState(null),v=An(e,k=>p(k),d.onItemTextChange,k=>l.itemTextRefCallback?.(k,d.value,d.disabled)),S=m?.textContent,x=T.useMemo(()=>C.jsx("option",{value:d.value,disabled:d.disabled,children:S},d.value),[d.disabled,d.value,S]),{onNativeOptionAdd:b,onNativeOptionRemove:P}=f;return Wn(()=>(b(x),()=>P(x)),[b,P,x]),C.jsxs(C.Fragment,{children:[C.jsx(Kt.span,{id:d.textId,...a,ref:v}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?su.createPortal(a.children,c.valueNode):null]})});XD.displayName=_l;var ZD="SelectItemIndicator",JD=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return WD(ZD,n).isSelected?C.jsx(Kt.span,{"aria-hidden":!0,...i,ref:e}):null});JD.displayName=ZD;var p0="SelectScrollUpButton",QD=T.forwardRef((t,e)=>{const n=Vs(p0,t.__scopeSelect),i=sb(p0,t.__scopeSelect),[r,a]=T.useState(!1),c=An(e,i.onScrollButtonChange);return Wn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollTop>0;a(f)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?C.jsx(tM,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});QD.displayName=p0;var g0="SelectScrollDownButton",eM=T.forwardRef((t,e)=>{const n=Vs(g0,t.__scopeSelect),i=sb(g0,t.__scopeSelect),[r,a]=T.useState(!1),c=An(e,i.onScrollButtonChange);return Wn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;a(m)};const d=n.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),r?C.jsx(tM,{...t,ref:c,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=n;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});eM.displayName=g0;var tM=T.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,a=Vs("SelectScrollButton",n),c=T.useRef(null),l=lh(n),d=T.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return T.useEffect(()=>()=>d(),[d]),Wn(()=>{l().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),C.jsx(Kt.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:Jt(r.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(i,50))}),onPointerMove:Jt(r.onPointerMove,()=>{a.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(i,50))}),onPointerLeave:Jt(r.onPointerLeave,()=>{d()})})}),kG="SelectSeparator",RG=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return C.jsx(Kt.div,{"aria-hidden":!0,...i,ref:e})});RG.displayName=kG;var v0="SelectArrow",AG=T.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=uh(n),a=Fs(v0,n),c=Vs(v0,n);return a.open&&c.position==="popper"?C.jsx(pK,{...r,...i,ref:e}):null});AG.displayName=v0;var PG="SelectBubbleInput",nM=T.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=T.useRef(null),a=An(i,r),c=vK(e);return T.useEffect(()=>{const l=r.current;if(!l)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==e&&m){const p=new Event("change",{bubbles:!0});m.call(l,e),l.dispatchEvent(p)}},[c,e]),C.jsx(Kt.select,{...n,style:{...ED,...n.style},ref:a,defaultValue:e})});nM.displayName=PG;function iM(t){return t===""||t===void 0}function rM(t){const e=wa(t),n=T.useRef(""),i=T.useRef(0),r=T.useCallback(c=>{const l=n.current+c;e(l),function d(f){n.current=f,window.clearTimeout(i.current),f!==""&&(i.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),a=T.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,a]}function sM(t,e,n){const r=e.length>1&&Array.from(e).every(f=>f===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let c=_G(t,Math.max(a,0));r.length===1&&(c=c.filter(f=>f!==n));const d=c.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function _G(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var DG=ND,MG=UD,OG=jD,NG=BD,IG=FD,UG=VD,LG=KD,jG=$D,BG=XD,FG=JD,VG=QD,zG=eM;function HG({...t}){return C.jsx(DG,{"data-slot":"select",...t})}function qG({...t}){return C.jsx(OG,{"data-slot":"select-value",...t})}function KG({className:t,size:e="default",children:n,...i}){return C.jsxs(MG,{"data-slot":"select-trigger","data-size":e,className:ft(["flex w-fit cursor-pointer items-center justify-between gap-2","rounded-full px-3 py-2 text-sm whitespace-nowrap","bg-button transition-[color,border,background-color]","disabled:cursor-not-allowed disabled:opacity-50","hover:bg-muted focus:bg-muted hover:text-muted-foreground focus:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 outline-none focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive","data-[placeholder]:text-muted-foreground","data-[size=default]:h-9 data-[size=sm]:h-8","*:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2","[&:not([class*='text-'])_svg:not([class*='text-'])]:text-muted-foreground","[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"],t),...i,children:[n,C.jsx(NG,{asChild:!0,children:C.jsx(Yy,{weight:"bold",className:"size-4 transition-colors"})})]})}function GG({className:t,children:e,position:n="popper",...i}){return C.jsx(IG,{children:C.jsxs(UG,{"data-slot":"select-content",className:ft(["bg-popover text-popover-foreground relative z-50 overflow-x-hidden overflow-y-auto rounded-md border drop-shadow-xl/5","max-h-(--radix-select-content-available-height) min-w-[8rem]","origin-(--radix-select-content-transform-origin)","data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95","data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95","data-[side=top]:slide-in-from-bottom-2","data-[side=right]:slide-in-from-left-2","data-[side=bottom]:slide-in-from-top-2","data-[side=left]:slide-in-from-right-2"],n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[C.jsx(WG,{}),C.jsx(LG,{className:ft("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),C.jsx($G,{})]})})}function YG({className:t,children:e,...n}){return C.jsxs(jG,{"data-slot":"select-item",className:ft(["relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none","cursor-pointer disabled:cursor-not-allowed","focus:bg-accent focus:text-accent-foreground","data-[disabled]:pointer-events-none data-[disabled]:opacity-50","*:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2","[&_svg:not([class*='text-'])]:text-muted-foreground [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"],t),...n,children:[C.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:C.jsx(FG,{children:C.jsx(X_,{className:"size-4",weight:"bold"})})}),C.jsx(BG,{children:e})]})}function WG({className:t,...e}){return C.jsx(VG,{"data-slot":"select-scroll-up-button",className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:C.jsx($_,{className:"size-4",weight:"bold"})})}function $G({className:t,...e}){return C.jsx(zG,{"data-slot":"select-scroll-down-button",className:ft("flex cursor-default items-center justify-center py-1",t),...e,children:C.jsx(Yy,{className:"size-4",weight:"bold"})})}const XG=Ky(["w-full rounded-full px-3 py-2 text-sm cursor-pointer","disabled:not-allowed","hover:bg-button-hover focus:bg-button-hover","data-[state=open]:bg-button-hover data-[state=open]:text-muted-foreground","peer-data-[state=off]/track:bg-button-primary hover:peer-data-[state=off]/track:bg-destructive-hover","peer-data-[state=off]/track:data-[state=open]:bg-destructive-hover"],{variants:{size:{default:"w-[180px]",sm:"w-auto"}},defaultVariants:{size:"default"}});function HE({kind:t,track:e,requestPermissions:n,onMediaDeviceError:i,onActiveDeviceChange:r,onDeviceListChange:a,...c}){const l=c.size||"default",[d,f]=T.useState(!1),m=T.useRef(null),p=nh(),{devices:v,activeDeviceId:S,setActiveMediaDevice:x}=w7({kind:t,room:p,track:e,requestPermissions:n,onError:i});T.useEffect(()=>{if(v.length>0&&!d){let k=v.find(O=>O.label.toLowerCase().includes("default"));k||(k=v.find(O=>{const N=O.label.toLowerCase();return N.includes("airpod")||N.includes("headphone")||N.includes("bluetooth")||N.includes("external")||N.includes("wireless")})),k&&k.deviceId!==S?x(k.deviceId):S||x(v[0].deviceId)}},[v,S,x,d]),T.useEffect(()=>{if(v.length>0&&!v.some(O=>O.deviceId===S)){let O=v.find(N=>N.label.toLowerCase().includes("default"));O||(O=v.find(N=>{const I=N.label.toLowerCase();return I.includes("airpod")||I.includes("headphone")||I.includes("bluetooth")||I.includes("external")||I.includes("wireless")})),x(O?O.deviceId:v[0].deviceId),f(!1)}},[v,S,x]);const b=T.useCallback(k=>{x(k),f(!0),r?.(k)},[x,r]),P=T.useCallback(k=>{setIsOpen(k),k||setTimeout(()=>{m.current?.blur()},0)},[]);return T.useEffect(()=>{a?.(v)},[v,a]),C.jsxs(HG,{value:S||"",onValueChange:b,onOpenChange:P,children:[C.jsx(KG,{ref:m,className:ft(XG({size:l}),c.className),children:l!=="sm"&&C.jsx(qG,{className:"font-mono text-sm",placeholder:`Select a ${t}`})}),C.jsx(GG,{children:v.map(k=>C.jsx(YG,{value:k.deviceId,className:"font-mono text-xs",children:k.label},k.deviceId))})]})}function ZG(t,e,n=!1){if(n)return SL;switch(t){case te.Source.Microphone:return e?NL:ML;case te.Source.Camera:return e?JL:XL;case te.Source.ScreenShare:return UL;default:return T.Fragment}}function Mg({source:t,pressed:e,pending:n,className:i,...r}){const a=ZG(t,e??!1,n);return C.jsxs(W_,{pressed:e,"aria-label":`Toggle ${t}`,className:ft(i),...r,children:[C.jsx(a,{className:ft("h-4 w-4",n&&"animate-spin")}),r.children]})}const JG=t=>{switch(t){case te.Source.Camera:return 1;case te.Source.Microphone:return 2;case te.Source.ScreenShare:return 3;default:return 0}};function QG(){const t=x7(),e=n=>!!t?.canPublish&&(t.canPublishSources.length===0||t.canPublishSources.includes(JG(n)));return{camera:e(te.Source.Camera),microphone:e(te.Source.Microphone),screenShare:e(te.Source.ScreenShare),data:t?.canPublishData??!1}}function eY(t={}){const{controls:e,saveUserChoices:n=!0}=t,i={leave:!0,...e},{microphoneTrack:r,localParticipant:a}=k_(),c=QG(),l=Pa(),d=bg({source:te.Source.Microphone,onDeviceError:D=>t.onDeviceError?.({source:te.Source.Microphone,error:D})}),f=bg({source:te.Source.Camera,onDeviceError:D=>t.onDeviceError?.({source:te.Source.Camera,error:D})}),m=bg({source:te.Source.ScreenShare,onDeviceError:D=>t.onDeviceError?.({source:te.Source.ScreenShare,error:D})}),p=T.useMemo(()=>({participant:a,source:te.Source.Microphone,publication:r}),[a,r]);i.microphone??=c.microphone,i.screenShare??=c.screenShare,i.camera??=c.camera,i.chat??=c.data;const{saveAudioInputEnabled:v,saveVideoInputEnabled:S,saveVideoInputDeviceId:x}=P7({preventSave:!n}),b=T.useCallback(async()=>{l&&await l.disconnect()},[l]),P=T.useCallback(()=>{},[]),k=T.useCallback(D=>{x(D??"default")},[x]),O=T.useCallback(async D=>{m.enabled&&m.toggle(!1),await f.toggle(D),S(!f.enabled)},[f,m,S]),N=T.useCallback(async D=>{await d.toggle(D),v(!d.enabled)},[d,v]),I=T.useCallback(async D=>{f.enabled&&f.toggle(!1),await m.toggle(D)},[m,f]);return{micTrackRef:p,visibleControls:i,cameraToggle:{...f,toggle:O},microphoneToggle:{...d,toggle:N},screenShareToggle:{...m,toggle:I},handleDisconnect:b,handleAudioDeviceChange:P,handleVideoDeviceChange:k}}function tY({controls:t,saveUserChoices:e=!0,capabilities:n,className:i,onSendMessage:r,onChatOpenChange:a,onDisconnect:c,onDeviceError:l,...d}){const f=Hy(),[m,p]=T.useState(!1),[v,S]=T.useState(!1),x=f.some(Ae=>Ae.isAgent),b=!m||!x||v,[P,k]=T.useState(!1),{micTrackRef:O,visibleControls:N,cameraToggle:I,microphoneToggle:D,screenShareToggle:B,handleAudioDeviceChange:H,handleVideoDeviceChange:z,handleDisconnect:X}=eY({controls:t,saveUserChoices:e}),ae=async Ae=>{S(!0);try{await r?.(Ae)}finally{S(!1)}},oe=async()=>{k(!0),await X(),k(!1),c?.()};T.useEffect(()=>{a?.(m)},[m,a]);const fe=T.useCallback(Ae=>{l?.({source:te.Source.Microphone,error:Ae})},[l]),ke=T.useCallback(Ae=>{l?.({source:te.Source.Camera,error:Ae})},[l]);return C.jsxs("div",{"aria-label":"Voice assistant controls",className:ft("bg-background border-bg2 dark:border-separator1 flex flex-col rounded-[31px] border p-3 drop-shadow-md/3",i),...d,children:[n.supportsChatInput&&C.jsxs("div",{inert:!m,className:ft("overflow-hidden transition-[height] duration-300 ease-out",m?"h-[57px]":"h-0"),children:[C.jsx("div",{className:"flex h-8 w-full",children:C.jsx(mH,{onSend:ae,disabled:b,className:"w-full"})}),C.jsx("hr",{className:"border-bg2 my-3"})]}),C.jsxs("div",{className:"flex flex-row justify-between gap-1",children:[C.jsxs("div",{className:"flex gap-1",children:[N.microphone&&C.jsxs("div",{className:"flex items-center gap-0",children:[C.jsx(Mg,{variant:"primary",source:te.Source.Microphone,pressed:D.enabled,disabled:D.pending,onPressedChange:D.toggle,className:"peer/track group/track relative w-auto pr-3 pl-3 md:rounded-r-none md:border-r-0 md:pr-2",children:C.jsx(D_,{barCount:3,trackRef:O,options:{minHeight:5},className:"flex h-full w-auto items-center justify-center gap-0.5",children:C.jsx("span",{className:ft(["h-full w-0.5 origin-center rounded-2xl","group-data-[state=on]/track:bg-fg1 group-data-[state=off]/track:bg-destructive-foreground","data-lk-muted:bg-muted"])})})}),C.jsx("hr",{className:"bg-separator1 peer-data-[state=off]/track:bg-separatorSerious relative z-10 -mr-px hidden h-4 w-px md:block"}),C.jsx(HE,{size:"sm",kind:"audioinput",onMediaDeviceError:fe,onActiveDeviceChange:H,className:ft(["pl-2","peer-data-[state=off]/track:text-destructive-foreground","hover:text-fg1 focus:text-fg1","hover:peer-data-[state=off]/track:text-destructive-foreground focus:peer-data-[state=off]/track:text-destructive-foreground","hidden rounded-l-none md:block"])})]}),n.supportsVideoInput&&N.camera&&C.jsxs("div",{className:"flex items-center gap-0",children:[C.jsx(Mg,{variant:"primary",source:te.Source.Camera,pressed:I.enabled,pending:I.pending,disabled:I.pending,onPressedChange:I.toggle,className:"peer/track relative w-auto rounded-r-none pr-3 pl-3 disabled:opacity-100 md:border-r-0 md:pr-2"}),C.jsx("hr",{className:"bg-separator1 peer-data-[state=off]/track:bg-separatorSerious relative z-10 -mr-px hidden h-4 w-px md:block"}),C.jsx(HE,{size:"sm",kind:"videoinput",onMediaDeviceError:ke,onActiveDeviceChange:z,className:ft(["pl-2","peer-data-[state=off]/track:text-destructive-foreground","hover:text-fg1 focus:text-fg1","hover:peer-data-[state=off]/track:text-destructive-foreground focus:peer-data-[state=off]/track:text-destructive-foreground","rounded-l-none"])})]}),n.supportsScreenShare&&N.screenShare&&C.jsx("div",{className:"flex items-center gap-0",children:C.jsx(Mg,{variant:"secondary",source:te.Source.ScreenShare,pressed:B.enabled,disabled:B.pending,onPressedChange:B.toggle,className:"relative w-auto"})}),N.chat&&C.jsx(W_,{variant:"secondary","aria-label":"Toggle chat",pressed:m,onPressedChange:p,disabled:!x,className:"aspect-square h-full",children:C.jsx(AL,{className:"h-4 w-4"})})]}),N.leave&&C.jsxs(Gy,{variant:"destructive",onClick:oe,disabled:P,className:"font-mono",children:[C.jsx(jL,{className:"h-4 w-4"}),C.jsx("span",{className:"hidden md:inline",children:"END CALL"}),C.jsx("span",{className:"inline md:hidden",children:"END"})]})]})]})}function nY(t,e){const n=e?.(t.message)||t.message,i=new Date(t.timestamp),r="en-US",a=t.from?.name||t.from?.identity||"Unknown";return{message:n,hasBeenEdited:!1,time:i,locale:r,name:a}}const iY=({entry:t,messageFormatter:e,hideName:n,hideTimestamp:i,className:r,...a})=>{const{message:c,hasBeenEdited:l,time:d,locale:f,name:m}=nY(t,e),p=t.from?.isLocal??!1,v=p?"remote":"local";return C.jsxs("li",{"data-lk-message-origin":v,className:ft("group flex flex-col gap-0.5",r),...a,children:[(!i||!n||l)&&C.jsxs("span",{className:"text-muted-foreground flex text-sm",children:[!n&&C.jsx("strong",{className:"mt-2",children:m}),!i&&C.jsxs("span",{className:ft("align-self-end font-mono text-xs opacity-0 transition-opacity ease-linear group-hover:opacity-100",p?"ml-auto":"mr-auto"),children:[l&&"*",d.toLocaleTimeString(f,{timeStyle:"short"})]})]}),C.jsx("span",{className:ft("max-w-4/5 rounded-[10px] p-2",p?"bg-muted ml-auto":"mr-auto"),children:c})]})};function rY(t){T.useEffect(()=>{function e(){const{scrollingElement:n}=document;n&&(n.scrollTop=n.scrollHeight)}if(t.current){const n=new ResizeObserver(e);return n.observe(t.current),e(),()=>n.disconnect()}},[t])}const aM=({className:t,children:e,...n})=>{const i=T.useRef(null);return rY(i),C.jsx("div",{ref:i,className:ft("flex flex-col justify-end",t),...n,children:e})};aM.displayName="ChatMessageView";const sY={listening:"Listening",thinking:"Thinking",speaking:"Speaking",connecting:"Joining",initializing:"Joining",disconnected:"Disconnected"},aY=()=>C.jsxs("span",{className:"inline-flex",children:[C.jsx("span",{className:"animate-pulse",style:{animationDelay:"0ms",animationDuration:"1.4s"},children:"."}),C.jsx("span",{className:"animate-pulse",style:{animationDelay:"200ms",animationDuration:"1.4s"},children:"."}),C.jsx("span",{className:"animate-pulse",style:{animationDelay:"400ms",animationDuration:"1.4s"},children:"."})]}),oM=T.forwardRef(({state:t,audioTrack:e,className:n,...i},r)=>{const a=sY[t];return C.jsxs("div",{ref:r,className:ft("flex flex-col items-center gap-3",n),...i,children:[C.jsx(D_,{barCount:5,state:t,options:{minHeight:5},trackRef:e,className:ft("flex aspect-video w-40 items-center justify-center gap-1"),children:C.jsx("span",{className:ft(["bg-muted min-h-4 w-4 rounded-full","origin-center transition-colors duration-250 ease-linear","data-[lk-highlighted=true]:bg-foreground data-[lk-muted=true]:bg-muted"])})}),a&&C.jsxs("p",{className:"text-[10px] text-gray-400 font-light pointer-events-none",children:[a,t!=="disconnected"&&C.jsx(aY,{})]})]})});oM.displayName="AgentTile";const cM=T.forwardRef(({videoTrack:t,className:e,...n},i)=>!t||t.publication.isMuted?null:C.jsxs("div",{ref:i,className:ft("relative overflow-hidden rounded-lg bg-gray-900",e),...n,children:[C.jsx(__,{trackRef:t,className:"h-full w-full object-cover"}),C.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"AI Agent"})]}));cM.displayName="AvatarTile";const lM=T.forwardRef(({trackRef:t,className:e,...n},i)=>!t||t.publication.isMuted?null:C.jsxs("div",{ref:i,className:ft("relative overflow-hidden rounded-lg bg-gray-900",e),...n,children:[C.jsx(__,{trackRef:t,className:"h-full w-full object-cover"}),t.source===te.Source.ScreenShare&&C.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"Screen Share"}),t.source===te.Source.Camera&&C.jsx("div",{className:"absolute top-2 left-2 rounded bg-black/50 px-2 py-1 text-xs text-white",children:"Camera"})]}));lM.displayName="VideoTile";function oY(t){const{localParticipant:e}=k_(),n=e.getTrackPublication(t);return T.useMemo(()=>n?{source:t,participant:e,publication:n}:void 0,[t,n,e])}const qE=xa(lM),cY=xa(oM),lY=xa(cM),_r={initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{type:"spring",stiffness:675,damping:75,mass:1}},Eo={grid:["h-full w-full","grid gap-x-2 place-content-center","grid-cols-[1fr_1fr] grid-rows-[90px_1fr_90px]"],agentChatOpenWithSecondTile:["col-start-1 row-start-1","self-center justify-self-end"],agentChatOpenWithoutSecondTile:["col-start-1 row-start-1","col-span-2","place-content-center"],agentChatClosed:["col-start-1 row-start-1","col-span-2 row-span-3","place-content-center"],secondTileChatOpen:["col-start-2 row-start-1","self-center justify-self-start"],secondTileChatClosed:["col-start-2 row-start-3","place-content-end"]};function uY({chatOpen:t}){const{state:e,audioTrack:n,videoTrack:i}=A_(),[r]=R_([te.Source.ScreenShare]),a=oY(te.Source.Camera),c=a&&!a.publication.isMuted,l=r&&!r.publication.isMuted,d=c||l,f={..._r.transition,delay:t?0:.15},m={..._r.animate,scale:t?1:3,transition:f},p={..._r.animate,transition:f},v=f,S=f,x=i!==void 0;return C.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-8 bottom-32 z-50 md:top-12 md:bottom-40",children:C.jsx("div",{className:"relative mx-auto h-full max-w-2xl px-4 md:px-0",children:C.jsxs("div",{className:ft(Eo.grid),children:[C.jsx("div",{className:ft(["grid",!t&&Eo.agentChatClosed,t&&d&&Eo.agentChatOpenWithSecondTile,t&&!d&&Eo.agentChatOpenWithoutSecondTile]),children:C.jsxs(Vv,{mode:"popLayout",children:[!x&&C.jsx(cY,{layoutId:"agent",..._r,animate:m,transition:v,state:e,audioTrack:n,className:ft(t?"h-[90px]":"h-auto w-full")},"agent"),x&&C.jsx(lY,{layoutId:"avatar",..._r,animate:p,transition:S,videoTrack:i,className:ft(t?"h-[90px] [&>video]:h-[90px] [&>video]:w-auto":"h-auto w-full")},"avatar")]})}),C.jsx("div",{className:ft(["grid",t&&Eo.secondTileChatOpen,!t&&Eo.secondTileChatClosed]),children:C.jsxs(Vv,{children:[a&&c&&C.jsx(qE,{layout:"position",layoutId:"camera",..._r,trackRef:a,transition:{..._r.transition,delay:t?0:.15},className:"h-[90px]"},"camera"),l&&C.jsx(qE,{layout:"position",layoutId:"screen",..._r,trackRef:r,transition:{..._r.transition,delay:t?0:.15},className:"h-[90px]"},"screen")]})})]})})})}function dY(){const t=j7(),e=A7(),n=Pa();return{messages:T.useMemo(()=>[...t.map(a=>fH(a,n)),...e.chatMessages].sort((a,c)=>a.timestamp-c.timestamp),[t,e.chatMessages,n]),send:e.send}}function fY(){const t=C7();T.useEffect(()=>{},[t])}function hY(t){return t=="listening"||t=="thinking"||t=="speaking"}const mY=({appConfig:t,disabled:e,sessionStarted:n,ref:i})=>{const{state:r}=A_(),[a,c]=T.useState(!1),{messages:l,send:d}=dY(),f=Pa();fY();async function m(b){await d(b)}T.useEffect(()=>{if(n){const b=setTimeout(()=>{if(!hY(r)){const P=r==="connecting"?"Agent did not join the room. ":"Agent connected but did not complete initializing. ";i0({title:"Session ended",description:C.jsxs("p",{className:"w-full",children:[P,C.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.livekit.io/agents/start/voice-ai/",className:"whitespace-nowrap underline",children:"See quickstart guide"}),"."]})}),f.disconnect()}},1e4);return()=>clearTimeout(b)}},[r,n,f]);const{supportsChatInput:p,supportsVideoInput:v,supportsScreenShare:S}=t,x={supportsChatInput:p,supportsVideoInput:v,supportsScreenShare:S};return C.jsxs("main",{ref:i,inert:e,className:ft(!a&&"max-h-svh overflow-hidden"),children:[C.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"absolute top-4 left-4 z-50",children:C.jsx("img",{src:"/full-size-logo-white.png",alt:"Ladderr AI Logo",className:"h-8"})}),C.jsx(aM,{className:ft("mx-auto min-h-svh w-full max-w-2xl px-3 pt-32 pb-40 transition-[opacity,translate] duration-300 ease-out md:px-0 md:pt-36 md:pb-48",a?"translate-y-0 opacity-100 delay-200":"translate-y-20 opacity-0"),children:C.jsx("div",{className:"space-y-3 whitespace-pre-wrap",children:C.jsx(Vv,{children:l.map(b=>C.jsx(xa.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:1,height:"auto",translateY:.001},transition:{duration:.5,ease:"easeOut"},children:C.jsx(iY,{hideName:!0,entry:b},b.id)},b.id))})})}),C.jsx("div",{className:"bg-background fixed top-0 right-0 left-0 h-32 md:h-36",children:C.jsx("div",{className:"from-background absolute bottom-0 left-0 h-12 w-full translate-y-full bg-gradient-to-b to-transparent"})}),C.jsx(uY,{chatOpen:a}),C.jsx("div",{className:"bg-background fixed right-0 bottom-0 left-0 z-50 px-3 pt-2 pb-3 md:px-12 md:pb-12",children:C.jsxs(xa.div,{initial:{opacity:0,translateY:"100%"},animate:{opacity:n?1:0,translateY:n?"0%":"100%"},transition:{duration:.3,delay:n?.5:0,ease:"easeOut"},children:[C.jsx("div",{className:"relative z-10 mx-auto w-full max-w-2xl",children:C.jsx(tY,{capabilities:x,onChatOpenChange:c,onSendMessage:m})}),C.jsx("div",{className:"from-background border-background absolute top-0 left-0 h-12 w-full -translate-y-full bg-gradient-to-t to-transparent"})]},"control-bar")})]})},pY=({disabled:t,startButtonText:e,onStartCall:n,ref:i})=>C.jsxs("div",{ref:i,inert:t,className:"fixed inset-0 z-10 mx-auto flex h-svh flex-col items-center justify-center text-center bg-background",children:[C.jsx("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-foreground mb-4 size-16",children:C.jsx("path",{d:"M15 24V40C15 40.7957 14.6839 41.5587 14.1213 42.1213C13.5587 42.6839 12.7956 43 12 43C11.2044 43 10.4413 42.6839 9.87868 42.1213C9.31607 41.5587 9 40.7957 9 40V24C9 23.2044 9.31607 22.4413 9.87868 21.8787C10.4413 21.3161 11.2044 21 12 21C12.7956 21 13.5587 21.3161 14.1213 21.8787C14.6839 22.4413 15 23.2044 15 24ZM22 5C21.2044 5 20.4413 5.31607 19.8787 5.87868C19.3161 6.44129 19 7.20435 19 8V56C19 56.7957 19.3161 57.5587 19.8787 58.1213C20.4413 58.6839 21.2044 59 22 59C22.7956 59 23.5587 58.6839 24.1213 58.1213C24.6839 57.5587 25 56.7957 25 56V8C25 7.20435 24.6839 6.44129 24.1213 5.87868C23.5587 5.31607 22.7956 5 22 5ZM32 13C31.2044 13 30.4413 13.3161 29.8787 13.8787C29.3161 14.4413 29 15.2044 29 16V48C29 48.7957 29.3161 49.5587 29.8787 50.1213C30.4413 50.6839 31.2044 51 32 51C32.7956 51 33.5587 50.6839 34.1213 50.1213C34.6839 49.5587 35 48.7957 35 48V16C35 15.2044 34.6839 14.4413 34.1213 13.8787C33.5587 13.3161 32.7956 13 32 13ZM42 21C41.2043 21 40.4413 21.3161 39.8787 21.8787C39.3161 22.4413 39 23.2044 39 24V40C39 40.7957 39.3161 41.5587 39.8787 42.1213C40.4413 42.6839 41.2043 43 42 43C42.7957 43 43.5587 42.6839 44.1213 42.1213C44.6839 41.5587 45 40.7957 45 40V24C45 23.2044 44.6839 22.4413 44.1213 21.8787C43.5587 21.3161 42.7957 21 42 21ZM52 17C51.2043 17 50.4413 17.3161 49.8787 17.8787C49.3161 18.4413 49 19.2044 49 20V44C49 44.7957 49.3161 45.5587 49.8787 46.1213C50.4413 46.6839 51.2043 47 52 47C52.7957 47 53.5587 46.6839 54.1213 46.1213C54.6839 45.5587 55 44.7957 55 44V20C55 19.2044 54.6839 18.4413 54.1213 17.8787C53.5587 17.3161 52.7957 17 52 17Z",fill:"currentColor"})}),C.jsx("p",{className:"text-muted-foreground max-w-prose pt-1 leading-6 font-medium",children:"Chat live with your voice AI agent"}),C.jsx(Gy,{variant:"primary",size:"lg",onClick:n,className:"mt-6 w-64 font-mono",children:e})]});class gY{baseUrl;constructor(){this.baseUrl="https://api-test.ladderr.ai"}async getJoinToken(e){const n=await fetch(`${this.baseUrl}/api/conversation/join-token`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Failed to get join token: ${n.status} ${n.statusText}`);return{token:(await n.json()).token}}}const vY=new gY;function yY(){const{user:t}=Gr(),[e,n]=T.useState(null),[i,r]=T.useState(!0),[a,c]=T.useState(null),l=T.useRef(!1),d=T.useCallback(async()=>{if(!(!t||l.current)){l.current=!0,n(null),r(!0),c(null);try{const m=await au().getCurrentSession();if(!m)throw new Error("No active session found");const p=m.getAccessToken().getJwtToken(),v=await vY.getJoinToken(p);n({serverUrl:void 0,participantToken:v.token,participantName:"user",roomName:`voice_assistant_room_${Math.floor(Math.random()*1e4)}`})}catch(f){console.error("Error fetching connection details:",f),c(f instanceof Error?f.message:"Failed to connect to service")}finally{r(!1),l.current=!1}}},[t]);return T.useEffect(()=>{d()},[d]),{connectionDetails:e,refreshConnectionDetails:d,loading:i,error:a}}function bY(){T.useEffect(()=>{vE();const t=window.matchMedia(K_),e=()=>{vE()};if(t.addEventListener)return t.addEventListener("change",e),()=>{t.removeEventListener("change",e)};if(t.addListener)return t.addListener(e),()=>{t.removeListener(e)}},[])}const SY=xa(pY),TY=xa(mY);function xY({appConfig:t}){bY();const e=T.useMemo(()=>new Fr,[]),[n,i]=T.useState(!1),{connectionDetails:r,refreshConnectionDetails:a,loading:c,error:l}=yY();if(T.useEffect(()=>{const f=()=>{i(!1),a()},m=p=>{i0({title:"Encountered an error with your media devices",description:`${p.name}: ${p.message}`})};return e.on(de.MediaDevicesError,m),e.on(de.Disconnected,f),()=>{e.off(de.Disconnected,f),e.off(de.MediaDevicesError,m)}},[e,a]),T.useEffect(()=>{let f=!1;return n&&e.state==="disconnected"&&r&&Promise.all([e.localParticipant.setMicrophoneEnabled(!0,void 0,{preConnectBuffer:t.isPreConnectBufferEnabled}),e.connect(r.serverUrl,r.participantToken)]).catch(m=>{f||i0({title:"There was an error connecting to the agent",description:`${m.name}: ${m.message}`})}),()=>{f=!0,e.disconnect()}},[e,n,r,t.isPreConnectBufferEnabled]),c)return C.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),C.jsx("p",{className:"text-lg text-muted-foreground",children:"Setting up your session..."})]})});if(l)return C.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:C.jsxs("div",{className:"text-center max-w-md",children:[C.jsx("div",{className:"text-destructive text-5xl mb-4",children:"⚠️"}),C.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Connection Error"}),C.jsx("p",{className:"text-muted-foreground mb-6",children:l}),C.jsx("button",{onClick:a,className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90",children:"Try Again"})]})});const{startButtonText:d}=t;return C.jsxs(C.Fragment,{children:[C.jsx(SY,{startButtonText:d,onStartCall:()=>i(!0),disabled:n,initial:{opacity:0},animate:{opacity:n?0:1},transition:{duration:.5,ease:"linear",delay:n?0:.5}},"welcome"),C.jsxs(Fy.Provider,{value:e,children:[C.jsx(Y7,{}),C.jsx(B7,{label:"Start Audio"}),C.jsx(TY,{appConfig:t,disabled:!n,sessionStarted:n,initial:{opacity:0},animate:{opacity:n?1:0},transition:{duration:.5,ease:"linear",delay:n?.5:0}},"session-view")]}),C.jsx(Ez,{})]})}const wY={pageTitle:"Ladderr AI Coach",pageDescription:"Voice-first AI career coaching",companyName:"Ladderr",supportsChatInput:!0,supportsVideoInput:!1,supportsScreenShare:!1,isPreConnectBufferEnabled:!0,logo:"",startButtonText:"Start Coaching Session"},CY=()=>{const{isAuthenticated:t,loading:e}=Gr(),{isFeatureEnabled:n,features:i,loading:r}=_0();return e||r?C.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:C.jsxs("div",{className:"text-center",children:[C.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),C.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):(console.log("Session Debug:",{isAuthenticated:t,hasAlphaAccess:n("alpha-access"),features:i,authLoading:e,featureLoading:r}),t?n("alpha-access")?C.jsx(xY,{appConfig:wY}):(console.log("Redirecting: No alpha access"),C.jsx(cx,{to:"/",replace:!0})):(console.log("Redirecting: Not authenticated"),C.jsx(cx,{to:"/",replace:!0})))};function EY(){const[t,e]=T.useState(!1),n=()=>{e(!0)},i=()=>{e(!1)};return C.jsxs("div",{className:"min-h-screen bg-white",children:[C.jsx(t4,{onStartCoaching:n}),C.jsx(n4,{onStartCoaching:n}),C.jsx(r4,{}),C.jsx(a4,{}),C.jsx(o4,{}),t&&C.jsx(c4,{onClose:i})]})}function kY(){return C.jsx(iL,{children:C.jsx(nL,{children:C.jsx(HI,{children:C.jsxs(bI,{children:[C.jsx(Ss,{path:"/",element:C.jsx(EY,{})}),C.jsx(Ss,{path:"/contact",element:C.jsx(f4,{})}),C.jsx(Ss,{path:"/privacy",element:C.jsx(h4,{})}),C.jsx(Ss,{path:"/terms",element:C.jsx(m4,{})}),C.jsx(Ss,{path:"/session",element:C.jsx(d4,{children:C.jsx(CY,{})})}),C.jsx(Ss,{path:"/auth/callback",element:C.jsx(l4,{})}),C.jsx(Ss,{path:"/auth/logout",element:C.jsx(u4,{})})]})})})})}window.Buffer=PN.Buffer;RN.createRoot(document.getElementById("root")).render(C.jsx(T.StrictMode,{children:C.jsx(kY,{})}));
